var __BUNDLE_START_TIME__=this.nativePerformanceNow?nativePerformanceNow():Date.now(),__DEV__=false,process=this.process||{};process.env=process.env||{};process.env.NODE_ENV=process.env.NODE_ENV||"production";
!(function(r){"use strict";r.__r=o,r.__d=function(r,i,n){if(null!=e[i])return;var o={dependencyMap:n,factory:r,hasError:!1,importedAll:t,importedDefault:t,isInitialized:!1,publicModule:{exports:{}}};e[i]=o},r.__c=n,r.__registerSegment=function(r,e){s[r]=e};var e=n(),t={},i={}.hasOwnProperty;function n(){return e=Object.create(null)}function o(r){var t=r,i=e[t];return i&&i.isInitialized?i.publicModule.exports:d(t,i)}function l(r){var i=r;if(e[i]&&e[i].importedDefault!==t)return e[i].importedDefault;var n=o(i),l=n&&n.__esModule?n.default:n;return e[i].importedDefault=l}function u(r){var n=r;if(e[n]&&e[n].importedAll!==t)return e[n].importedAll;var l,u=o(n);if(u&&u.__esModule)l=u;else{if(l={},u)for(var a in u)i.call(u,a)&&(l[a]=u[a]);l.default=u}return e[n].importedAll=l}o.importDefault=l,o.importAll=u;var a=!1;function d(e,t){if(!a&&r.ErrorUtils){var i;a=!0;try{i=v(e,t)}catch(e){r.ErrorUtils.reportFatalError(e)}return a=!1,i}return v(e,t)}var c=16,f=65535;function p(r){return{segmentId:r>>>c,localId:r&f}}o.unpackModuleId=p,o.packModuleId=function(r){return(r.segmentId<<c)+r.localId};var s=[];function v(t,i){if(!i&&s.length>0){var n=p(t),a=n.segmentId,d=n.localId,c=s[a];null!=c&&(c(d),i=e[t])}var f=r.nativeRequire;if(!i&&f){var v=p(t),h=v.segmentId;f(v.localId,h),i=e[t]}if(!i)throw Error('Requiring unknown module "'+t+'".');if(i.hasError)throw m(t,i.error);i.isInitialized=!0;var I=i,g=I.factory,y=I.dependencyMap;try{var _=i.publicModule;return _.id=t,g(r,o,l,u,_,_.exports,y),i.factory=void 0,i.dependencyMap=void 0,_.exports}catch(r){throw i.hasError=!0,i.error=r,i.isInitialized=!1,i.publicModule.exports=void 0,r}}function m(r,e){return Error('Requiring module "'+r+'", which threw an exception: '+e)}})('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof global?global:'undefined'!=typeof window?window:this);
!(function(n){var e=(function(){function n(n,e){return n}function e(n){var e={};return n.forEach(function(n,r){e[n]=!0}),e}function r(n,r,u){if(n.formatValueCalls++,n.formatValueCalls>200)return"[TOO BIG formatValueCalls "+n.formatValueCalls+" exceeded limit of 200]";var f=t(n,r);if(f)return f;var c=Object.keys(r),s=e(c);if(d(r)&&(c.indexOf('message')>=0||c.indexOf('description')>=0))return o(r);if(0===c.length){if(v(r)){var g=r.name?': '+r.name:'';return n.stylize('[Function'+g+']','special')}if(p(r))return n.stylize(RegExp.prototype.toString.call(r),'regexp');if(y(r))return n.stylize(Date.prototype.toString.call(r),'date');if(d(r))return o(r)}var h,b,m='',j=!1,O=['{','}'];(h=r,Array.isArray(h)&&(j=!0,O=['[',']']),v(r))&&(m=' [Function'+(r.name?': '+r.name:'')+']');return p(r)&&(m=' '+RegExp.prototype.toString.call(r)),y(r)&&(m=' '+Date.prototype.toUTCString.call(r)),d(r)&&(m=' '+o(r)),0!==c.length||j&&0!=r.length?u<0?p(r)?n.stylize(RegExp.prototype.toString.call(r),'regexp'):n.stylize('[Object]','special'):(n.seen.push(r),b=j?i(n,r,u,s,c):c.map(function(e){return l(n,r,u,s,e,j)}),n.seen.pop(),a(b,m,O)):O[0]+m+O[1]}function t(n,e){if(s(e))return n.stylize('undefined','undefined');if('string'==typeof e){var r="'"+JSON.stringify(e).replace(/^"|"$/g,'').replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return n.stylize(r,'string')}return c(e)?n.stylize(''+e,'number'):u(e)?n.stylize(''+e,'boolean'):f(e)?n.stylize('null','null'):void 0}function o(n){return'['+Error.prototype.toString.call(n)+']'}function i(n,e,r,t,o){for(var i=[],a=0,u=e.length;a<u;++a)b(e,String(a))?i.push(l(n,e,r,t,String(a),!0)):i.push('');return o.forEach(function(o){o.match(/^\d+$/)||i.push(l(n,e,r,t,o,!0))}),i}function l(n,e,t,o,i,l){var a,u,c;if((c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?u=c.set?n.stylize('[Getter/Setter]','special'):n.stylize('[Getter]','special'):c.set&&(u=n.stylize('[Setter]','special')),b(o,i)||(a='['+i+']'),u||(n.seen.indexOf(c.value)<0?(u=f(t)?r(n,c.value,null):r(n,c.value,t-1)).indexOf('\n')>-1&&(u=l?u.split('\n').map(function(n){return'  '+n}).join('\n').substr(2):'\n'+u.split('\n').map(function(n){return'   '+n}).join('\n')):u=n.stylize('[Circular]','special')),s(a)){if(l&&i.match(/^\d+$/))return u;(a=JSON.stringify(''+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=n.stylize(a,'name')):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=n.stylize(a,'string'))}return a+': '+u}function a(n,e,r){return n.reduce(function(n,e){return 0,e.indexOf('\n')>=0&&0,n+e.replace(/\u001b\[\d\d?m/g,'').length+1},0)>60?r[0]+(''===e?'':e+'\n ')+' '+n.join(',\n  ')+' '+r[1]:r[0]+e+' '+n.join(', ')+' '+r[1]}function u(n){return'boolean'==typeof n}function f(n){return null===n}function c(n){return'number'==typeof n}function s(n){return void 0===n}function p(n){return g(n)&&'[object RegExp]'===h(n)}function g(n){return'object'==typeof n&&null!==n}function y(n){return g(n)&&'[object Date]'===h(n)}function d(n){return g(n)&&('[object Error]'===h(n)||n instanceof Error)}function v(n){return'function'==typeof n}function h(n){return Object.prototype.toString.call(n)}function b(n,e){return Object.prototype.hasOwnProperty.call(n,e)}return function(e,t){return r({seen:[],formatValueCalls:0,stylize:n},e,t.depth)}})(),r='(index)',t={trace:0,info:1,warn:2,error:3},o=[];o[t.trace]='debug',o[t.info]='log',o[t.warn]='warning',o[t.error]='error';var i=1;function l(r){return function(){var l;l=1===arguments.length&&'string'==typeof arguments[0]?arguments[0]:Array.prototype.map.call(arguments,function(n){return e(n,{depth:10})}).join(', ');var a=arguments[0],u=r;'string'==typeof a&&'Warning: '===a.slice(0,9)&&u>=t.error&&(u=t.warn),n.__inspectorLog&&n.__inspectorLog(o[u],l,[].slice.call(arguments),i),s.length&&(l=p('',l)),n.nativeLoggingHook(l,u)}}function a(n,e){return Array.apply(null,Array(e)).map(function(){return n})}var u="\u2502",f="\u2510",c="\u2518",s=[];function p(n,e){return s.join('')+n+' '+(e||'')}if(n.nativeLoggingHook){n.console;n.console={error:l(t.error),info:l(t.info),log:l(t.info),warn:l(t.warn),trace:l(t.trace),debug:l(t.trace),table:function(e){if(!Array.isArray(e)){var o=e;for(var i in e=[],o)if(o.hasOwnProperty(i)){var l=o[i];l[r]=i,e.push(l)}}if(0!==e.length){var u=Object.keys(e[0]).sort(),f=[],c=[];u.forEach(function(n,r){c[r]=n.length;for(var t=0;t<e.length;t++){var o=(e[t][n]||'?').toString();f[t]=f[t]||[],f[t][r]=o,c[r]=Math.max(c[r],o.length)}});for(var s=y(c.map(function(n){return a('-',n).join('')}),'-'),p=[y(u),s],g=0;g<e.length;g++)p.push(y(f[g]));n.nativeLoggingHook('\n'+p.join('\n'),t.info)}else n.nativeLoggingHook('',t.info);function y(n,e){var r=n.map(function(n,e){return n+a(' ',c[e]-n.length).join('')});return e=e||' ',r.join(e+'|'+e)}},group:function(e){n.nativeLoggingHook(p(f,e),t.info),s.push(u)},groupEnd:function(){s.pop(),n.nativeLoggingHook(p(c),t.info)},groupCollapsed:function(e){n.nativeLoggingHook(p(c,e),t.info),s.push(u)},assert:function(e,r){e||n.nativeLoggingHook('Assertion failed: '+r,t.error)}},Object.defineProperty(console,'_isPolyfilled',{value:!0,enumerable:!1})}else if(!n.console){function g(){}var y=n.print||g;n.console={debug:y,error:y,info:y,log:y,trace:y,warn:y,assert:function(n,e){n||y('Assertion failed: '+e)},clear:g,dir:g,dirxml:g,group:g,groupCollapsed:g,groupEnd:g,profile:g,profileEnd:g,table:g},Object.defineProperty(console,'_isPolyfilled',{value:!0,enumerable:!1})}})('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof global?global:'undefined'!=typeof window?window:this);
!(function(n){var r=0,t=function(n,r){throw n},l={setGlobalHandler:function(n){t=n},getGlobalHandler:function(){return t},reportError:function(n){t&&t(n,!1)},reportFatalError:function(n){t&&t(n,!0)},applyWithGuard:function(n,t,u,o,e){try{return r++,n.apply(t,u)}catch(n){l.reportError(n)}finally{r--}return null},applyWithGuardIfNeeded:function(n,r,t){return l.inGuard()?n.apply(r,t):(l.applyWithGuard(n,r,t),null)},inGuard:function(){return!!r},guard:function(n,r,t){var u;if('function'!=typeof n)return console.warn('A function must be passed to ErrorUtils.guard, got ',n),null;var o=null!=(u=null!=r?r:n.name)?u:'<generated guard>';return function(){for(var r=arguments.length,u=new Array(r),e=0;e<r;e++)u[e]=arguments[e];return l.applyWithGuard(n,null!=t?t:this,u,null,o)}}};n.ErrorUtils=l})('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof global?global:'undefined'!=typeof window?window:this);
'undefined'!=typeof globalThis?globalThis:'undefined'!=typeof global?global:'undefined'!=typeof window&&window,(function(){'use strict';var e=Object.prototype.hasOwnProperty;'function'!=typeof Object.entries&&(Object.entries=function(n){if(null==n)throw new TypeError('Object.entries called on non-object');var o=[];for(var t in n)e.call(n,t)&&o.push([t,n[t]]);return o}),'function'!=typeof Object.values&&(Object.values=function(n){if(null==n)throw new TypeError('Object.values called on non-object');var o=[];for(var t in n)e.call(n,t)&&o.push(n[t]);return o})})();
__d(function(g,r,i,a,m,e,d){var n=r(d[0]);r(d[1]);var t=n(r(d[2])),o=r(d[3]),u=n(r(d[4])),f=r(d[5]);r(d[6]),console.log=function(){},window.$=t.default,g.$=t.default,o.AppRegistry.registerComponent(f.name,function(){return u.default})},0,[1,2,453,5,454,463,464]);
__d(function(g,r,i,a,m,e,d){m.exports=function(n){return n&&n.__esModule?n:{default:n}}},1,[]);
__d(function(g,r,i,a,m,e,d){r(d[0]),r(d[1])},2,[3,4]);
__d(function(g,r,i,a,m,e,d){var _;void 0===(_=g||window||this).__filename&&(_.__filename='__filename')},3,[]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]),n=r(d[1]),o=t(r(d[2])),l=t(r(d[3]));function f(t,n){return t===n?t:(o=Object.getPrototypeOf(t))&&(o=f(n,o))||(o=Object.getPrototypeOf(n))&&(o=f(t,o))?o:void 0;var o}function s(t,n){var o=null;return t&&u(t,function(t){return 1===t.nodeType&&t.nodeName===n&&(o=t,!0)}),o}function u(t,n){if(n(t))return!0;if(t=t.firstChild)do{if(u(t,n))return!0}while(t=t.nextSibling);return!1}!(function(t){var u=r(d[4]).DOMParser;if(t.DOMParser=u,void 0===t.addEventListener&&(t.addEventListener=function(){}),void 0===t.removeEventListener&&(t.removeEventListener=function(){}),void 0===t.document){var c=(new u).parseFromString('<html><head></head><body></body></html>','text/xml');void 0===c.addEventListener&&(c.addEventListener=function(){}),void 0===c.cookie&&(c.cookie=''),void 0===c.implementation.createHTMLDocument&&(c.implementation.createHTMLDocument=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'',n=(new u).parseFromString("<html>\n                            <head><title>"+t+"</title></head>\n                            <body></body>\n                        </html>",'text/xml');return Object.defineProperty(n,'body',{get:function(){return n.getElementsByTagName('body')[0]}}),n});var v=Object.getPrototypeOf(c.documentElement);v&&(void 0===v.querySelector&&(v.querySelector=function(t){return s(this,t)}),void 0===v.remove&&(v.remove=function(){null!==this.parentNode&&this.parentNode.removeChild(this)}),v.hasOwnProperty('innerHTML')||Object.defineProperty(v,'innerHTML',{get:function(){return this.childNodes.toString()},set:function(t){this.textContent='';for(var n,o=(new u).parseFromString("<div>"+t+"</div>",'text/xml').documentElement;n=o.firstChild;)this.appendChild(n)}}),v.hasOwnProperty('children')||Object.defineProperty(v,'children',{get:function(){for(var t=this.childNodes,n=[],o=0,l=t[o];l;)1===l.nodeType&&n.push(l),l=t[o+=1];return n}}));var p=f(Object.getPrototypeOf(c),v);if(p&&p!==Object.getPrototypeOf({})){var h=t.console;if(h){var y=r(d[5]).levels;Object.keys(y).forEach(function(t){var n=y[t],o=h[n];'function'==typeof o&&(h[n]=function(){for(var t=arguments.length,l=new Array(t),f=0;f<t;f++)l[f]=arguments[f];if(h.disableYellowBox&&'error'===n)h.warn.apply(h,l);else{for(var s=l.length,u=0;u<s;++u){var c=l[u];if(c&&'string'!=typeof c&&p.isPrototypeOf(c)){var v=c.toString;v&&(c=v.call(c))}l[u]=c}o.apply(this,l)}})})}}t.document=c}void 0===t.location&&(t.location={href:'',search:''});var O=t.navigator;if(O){var b=O.userAgent||'',w=r(d[6]),P=w.name,x=w.version,L=P||'react-native';x&&(L+="/"+x),-1===b.indexOf(L)&&(b=b?L+" "+b:L);var S="("+n.Platform.OS+" "+n.Platform.Version+")";-1===b.indexOf(S)&&(b=b?b+" "+S:S),O.userAgent=b}if(r(d[7]),r(d[8]),t.callstats=r(d[9]),t.XMLHttpRequest){var T=t.XMLHttpRequest.prototype;T&&!T.hasOwnProperty('responseXML')&&Object.defineProperty(T,'responseXML',{get:function(){var t=this.responseText;return t&&(new u).parseFromString(t,'text/xml')}})}t.clearTimeout=o.default.clearTimeout.bind(o.default),t.clearInterval=o.default.clearInterval.bind(o.default),t.setInterval=o.default.setInterval.bind(o.default),t.setTimeout=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o.default.setTimeout(t,n)},void 0===t.localStorage&&(t.localStorage=new l.default('@jitsi-meet/')),void 0===t.sessionStorage&&(t.sessionStorage=new l.default),t.performance={now:function(){return Date.now()}}})(g||window||this)},4,[1,5,405,406,411,414,417,418,449,452]);
__d(function(g,r,i,a,m,e,d){'use strict';r(d[0]);var t=r(d[1]);m.exports={get AccessibilityInfo(){return r(d[2])},get ActivityIndicator(){return r(d[3])},get Button(){return r(d[4])},get CheckBox(){return t('checkBox-moved',"CheckBox has been extracted from react-native core and will be removed in a future release. It can now be installed and imported from '@react-native-community/checkbox' instead of 'react-native'. See https://github.com/react-native-community/react-native-checkbox"),r(d[5])},get DatePickerIOS(){return t('DatePickerIOS-merged',"DatePickerIOS has been merged with DatePickerAndroid and will be removed in a future release. It can now be installed and imported from '@react-native-community/datetimepicker' instead of 'react-native'. See https://github.com/react-native-community/datetimepicker"),r(d[6])},get DrawerLayoutAndroid(){return r(d[7])},get FlatList(){return r(d[8])},get Image(){return r(d[9])},get ImageBackground(){return r(d[10])},get InputAccessoryView(){return r(d[11])},get KeyboardAvoidingView(){return r(d[12])},get MaskedViewIOS(){return t('maskedviewios-moved',"MaskedViewIOS has been extracted from react-native core and will be removed in a future release. It can now be installed and imported from '@react-native-community/masked-view' instead of 'react-native'. See https://github.com/react-native-community/react-native-masked-view"),r(d[13])},get Modal(){return r(d[14])},get Picker(){return t('picker-moved',"Picker has been extracted from react-native core and will be removed in a future release. It can now be installed and imported from '@react-native-community/picker' instead of 'react-native'. See https://github.com/react-native-community/react-native-picker"),r(d[15])},get PickerIOS(){return t('pickerios-moved',"PickerIOS has been extracted from react-native core and will be removed in a future release. It can now be installed and imported from '@react-native-community/picker' instead of 'react-native'. See https://github.com/react-native-community/react-native-picker"),r(d[16])},get Pressable(){return r(d[17]).default},get ProgressBarAndroid(){return t('progress-bar-android-moved',"ProgressBarAndroid has been extracted from react-native core and will be removed in a future release. It can now be installed and imported from '@react-native-community/progress-bar-android' instead of 'react-native'. See https://github.com/react-native-community/progress-bar-android"),r(d[18])},get ProgressViewIOS(){return t('progress-view-ios-moved',"ProgressViewIOS has been extracted from react-native core and will be removed in a future release. It can now be installed and imported from '@react-native-community/progress-view' instead of 'react-native'. See https://github.com/react-native-community/progress-view"),r(d[19])},get SafeAreaView(){return r(d[20])},get ScrollView(){return r(d[21])},get SectionList(){return r(d[22])},get SegmentedControlIOS(){return t('segmented-control-ios-moved',"SegmentedControlIOS has been extracted from react-native core and will be removed in a future release. It can now be installed and imported from '@react-native-community/segmented-control' instead of 'react-native'. See https://github.com/react-native-community/segmented-control"),r(d[23])},get Slider(){return t('slider-moved',"Slider has been extracted from react-native core and will be removed in a future release. It can now be installed and imported from '@react-native-community/slider' instead of 'react-native'. See https://github.com/react-native-community/react-native-slider"),r(d[24])},get Switch(){return r(d[25])},get RefreshControl(){return r(d[26])},get StatusBar(){return r(d[27])},get Text(){return r(d[28])},get TextInput(){return r(d[29])},get Touchable(){return r(d[30])},get TouchableHighlight(){return r(d[31])},get TouchableNativeFeedback(){return r(d[32])},get TouchableOpacity(){return r(d[33])},get TouchableWithoutFeedback(){return r(d[34])},get View(){return r(d[35])},get VirtualizedList(){return r(d[36])},get VirtualizedSectionList(){return r(d[37])},get ActionSheetIOS(){return r(d[38])},get Alert(){return r(d[39])},get Animated(){return r(d[40])},get Appearance(){return r(d[41])},get AppRegistry(){return r(d[42])},get AppState(){return r(d[43])},get AsyncStorage(){return t('async-storage-moved',"AsyncStorage has been extracted from react-native core and will be removed in a future release. It can now be installed and imported from '@react-native-community/async-storage' instead of 'react-native'. See https://github.com/react-native-community/async-storage"),r(d[44])},get BackHandler(){return r(d[45])},get Clipboard(){return t('clipboard-moved',"Clipboard has been extracted from react-native core and will be removed in a future release. It can now be installed and imported from '@react-native-community/clipboard' instead of 'react-native'. See https://github.com/react-native-community/clipboard"),r(d[46])},get DatePickerAndroid(){return t('DatePickerAndroid-merged',"DatePickerAndroid has been merged with DatePickerIOS and will be removed in a future release. It can now be installed and imported from '@react-native-community/datetimepicker' instead of 'react-native'. See https://github.com/react-native-community/datetimepicker"),r(d[47])},get DeviceInfo(){return r(d[48])},get DevSettings(){return r(d[49])},get Dimensions(){return r(d[50])},get Easing(){return r(d[51])},get findNodeHandle(){return r(d[52]).findNodeHandle},get I18nManager(){return r(d[53])},get ImagePickerIOS(){return t('imagePickerIOS-moved',"ImagePickerIOS has been extracted from react-native core and will be removed in a future release. Please upgrade to use either '@react-native-community/react-native-image-picker' or 'expo-image-picker'. If you cannot upgrade to a different library, please install the deprecated '@react-native-community/image-picker-ios' package. See https://github.com/react-native-community/react-native-image-picker-ios"),r(d[54])},get InteractionManager(){return r(d[55])},get Keyboard(){return r(d[56])},get LayoutAnimation(){return r(d[57])},get Linking(){return r(d[58])},get LogBox(){return r(d[59])},get NativeDialogManagerAndroid(){return r(d[60]).default},get NativeEventEmitter(){return r(d[61])},get Networking(){return r(d[62])},get PanResponder(){return r(d[63])},get PermissionsAndroid(){return r(d[64])},get PixelRatio(){return r(d[65])},get PushNotificationIOS(){return t('pushNotificationIOS-moved',"PushNotificationIOS has been extracted from react-native core and will be removed in a future release. It can now be installed and imported from '@react-native-community/push-notification-ios' instead of 'react-native'. See https://github.com/react-native-community/push-notification-ios"),r(d[66])},get Settings(){return r(d[67])},get Share(){return r(d[68])},get StatusBarIOS(){return t('StatusBarIOS-merged','StatusBarIOS has been merged with StatusBar and will be removed in a future release. Use StatusBar for mutating the status bar'),r(d[69])},get StyleSheet(){return r(d[70])},get Systrace(){return r(d[71])},get ToastAndroid(){return r(d[72])},get TurboModuleRegistry(){return r(d[73])},get TVEventHandler(){return r(d[74])},get UIManager(){return r(d[75])},get unstable_batchedUpdates(){return r(d[52]).unstable_batchedUpdates},get useColorScheme(){return r(d[76]).default},get useWindowDimensions(){return r(d[77]).default},get UTFSequence(){return r(d[78])},get Vibration(){return r(d[79])},get YellowBox(){return r(d[80])},get DeviceEventEmitter(){return r(d[81])},get NativeAppEventEmitter(){return r(d[82])},get NativeModules(){return r(d[83])},get Platform(){return r(d[84])},get processColor(){return r(d[85])},get PlatformColor(){return r(d[86]).PlatformColor},get DynamicColorIOS(){return r(d[87]).DynamicColorIOS},get ColorAndroid(){return r(d[88]).ColorAndroid},get requireNativeComponent(){return r(d[89])},get unstable_RootTagContext(){return r(d[90])},get unstable_enableLogBox(){return function(){return console.warn('LogBox is enabled by default so there is no need to call unstable_enableLogBox() anymore. This is a no op and will be removed in the next version.')}},get ColorPropType(){return r(d[91])},get EdgeInsetsPropType(){return r(d[92])},get PointPropType(){return r(d[93])},get ViewPropTypes(){return r(d[94])}}},5,[6,7,10,53,206,303,305,307,264,291,308,309,311,312,314,320,322,324,327,328,330,271,299,332,334,336,268,339,207,342,213,348,224,230,346,91,265,300,349,159,231,351,354,367,370,364,372,374,375,376,64,259,94,318,378,240,281,283,380,382,160,145,143,383,385,63,387,389,391,393,62,32,394,14,217,79,395,398,118,399,401,41,170,15,57,71,70,402,403,181,317,68,209,404,344]);
__d(function(g,r,i,a,m,e,d){'use strict';m.exports=function(n,o,t,f,s,u,c,l){if(!n){var v;if(void 0===o)v=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[t,f,s,u,c,l],h=0;(v=new Error(o.replace(/%s/g,function(){return p[h++]}))).name='Invariant Violation'}throw v.framesToPop=1,v}}},6,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n={};m.exports=function(c,o){n[c]||(t(!1,o),n[c]=!0)}},7,[8]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);m.exports=t},8,[9]);
__d(function(g,r,i,a,m,e,d){"use strict";function t(t){return function(){return t}}var n=function(){};n.thatReturns=t,n.thatReturnsFalse=t(!1),n.thatReturnsTrue=t(!0),n.thatReturnsNull=t(null),n.thatReturnsThis=function(){return this},n.thatReturnsArgument=function(t){return t},m.exports=n},9,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0])(r(d[1])),t=r(d[2]),c=r(d[3]),u={announcementFinished:'announcementFinished',boldTextChanged:'boldTextChanged',grayscaleChanged:'grayscaleChanged',invertColorsChanged:'invertColorsChanged',reduceMotionChanged:'reduceMotionChanged',reduceTransparencyChanged:'reduceTransparencyChanged',screenReaderChanged:'screenReaderChanged'},o=new Map,s={isBoldTextEnabled:function(){return new t(function(t,c){n.default?n.default.getCurrentBoldTextState(t,c):c(c)})},isGrayscaleEnabled:function(){return new t(function(t,c){n.default?n.default.getCurrentGrayscaleState(t,c):c(c)})},isInvertColorsEnabled:function(){return new t(function(t,c){n.default?n.default.getCurrentInvertColorsState(t,c):c(c)})},isReduceMotionEnabled:function(){return new t(function(t,c){n.default?n.default.getCurrentReduceMotionState(t,c):c(c)})},isReduceTransparencyEnabled:function(){return new t(function(t,c){n.default?n.default.getCurrentReduceTransparencyState(t,c):c(c)})},isScreenReaderEnabled:function(){return new t(function(t,c){n.default?n.default.getCurrentVoiceOverState(t,c):c(c)})},get fetch(){return console.warn('AccessibilityInfo.fetch is deprecated, call AccessibilityInfo.isScreenReaderEnabled instead'),this.isScreenReaderEnabled},addEventListener:function(n,t){var l;return'change'===n?l=c.addListener(u.screenReaderChanged,t):u[n]&&(l=c.addListener(n,t)),o.set(t,l),{remove:s.removeEventListener.bind(null,n,t)}},setAccessibilityFocus:function(t){n.default&&n.default.setAccessibilityFocus(t)},announceForAccessibility:function(t){n.default&&n.default.announceForAccessibility(t)},removeEventListener:function(n,t){var c=o.get(t);c&&(c.remove(),o.delete(t))}};m.exports=s},10,[1,11,36,41]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])).get('AccessibilityManager');e.default=u},11,[12,14]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}m.exports=function(o){if(o&&o.__esModule)return o;if(null===o||"object"!==t(o)&&"function"!=typeof o)return{default:o};var u=n();if(u&&u.has(o))return u.get(o);var f={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in o)if(Object.prototype.hasOwnProperty.call(o,p)){var l=c?Object.getOwnPropertyDescriptor(o,p):null;l&&(l.get||l.set)?Object.defineProperty(f,p,l):f[p]=o[p]}return f.default=o,u&&u.set(o,f),f}},12,[13]);
__d(function(g,r,i,a,m,e,d){function o(t){"@babel/helpers - typeof";return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?m.exports=o=function(o){return typeof o}:m.exports=o=function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},o(t)}m.exports=o},13,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.get=o,e.getEnforcing=function(n){var u=o(n);return(0,t.default)(null!=u,"TurboModuleRegistry.getEnforcing(...): '"+n+"' could not be found. Verify that a module by this name is registered in the native binary."),u};var t=n(r(d[1])),u=r(d[2]),l=g.__turboModuleProxy;function o(n){if(!g.RN$Bridgeless){var t=u[n];if(null!=t)return t}return null!=l?l(n):null}},14,[1,6,15]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]),t=r(d[1]),o=r(d[2]),u=r(d[3]);function l(o,l){if(!o)return null;var f=t(o,5),v=f[0],h=f[1],y=f[2],C=f[3],M=f[4];if(u(!v.startsWith('RCT')&&!v.startsWith('RK'),"Module name prefixes should've been stripped by the native side but wasn't for "+v),!h&&!y)return{name:v};var b={};return y&&y.forEach(function(n,t){var o=C&&c(C,t),f=M&&c(M,t);u(!o||!f,'Cannot have a method that is both async and a sync hook');var v=o?'promise':f?'sync':'async';b[n]=s(l,t,v)}),n(b,h),null==b.getConstants?b.getConstants=function(){return h||Object.freeze({})}:console.warn("Unable to define method 'getConstants()' on NativeModule '"+v+"'. NativeModule '"+v+"' already has a constant or method called 'getConstants'. Please remove it."),{name:v,module:b}}function f(n,t){u(g.nativeRequireModuleConfig,"Can't lazily create module without nativeRequireModuleConfig");var o=l(g.nativeRequireModuleConfig(n),t);return o&&o.module}function s(n,t,l){var f=null;return(f='promise'===l?function(){for(var u=arguments.length,l=new Array(u),f=0;f<u;f++)l[f]=arguments[f];var s=new Error;return new Promise(function(u,f){o.enqueueNativeCall(n,t,l,function(n){return u(n)},function(n){return f(v(n,s))})})}:function(){for(var f=arguments.length,s=new Array(f),c=0;c<f;c++)s[c]=arguments[c];var v=s.length>0?s[s.length-1]:null,h=s.length>1?s[s.length-2]:null,y='function'==typeof v,C='function'==typeof h;C&&u(y,'Cannot have a non-function arg after a function arg.');var M=y?v:null,b=C?h:null,p=y+C;if(s=s.slice(0,s.length-p),'sync'===l)return o.callNativeSyncHook(n,t,s,b,M);o.enqueueNativeCall(n,t,s,b,M)}).type=l,f}function c(n,t){return-1!==n.indexOf(t)}function v(t,o){return n(o,t||{})}g.__fbGenNativeModule=l;var h={};if(g.nativeModuleProxy)h=g.nativeModuleProxy;else if(!g.nativeExtensions){var y=g.__fbBatchedBridgeConfig;u(y,'__fbBatchedBridgeConfig is not set, cannot invoke native modules');var C=r(d[4]);(y.remoteModuleConfig||[]).forEach(function(n,t){var o=l(n,t);o&&(o.module?h[o.name]=o.module:C(h,o.name,{get:function(){return f(o.name,t)}}))})}m.exports=h},15,[16,17,23,6,35]);
__d(function(g,r,i,a,m,e,d){function t(){return m.exports=t=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var p in o)Object.prototype.hasOwnProperty.call(o,p)&&(t[p]=o[p])}return t},t.apply(this,arguments)}m.exports=t},16,[]);
__d(function(g,r,i,a,m,e,d){var n=r(d[0]),t=r(d[1]),o=r(d[2]),u=r(d[3]);m.exports=function(c,f){return n(c)||t(c,f)||o(c,f)||u()}},17,[18,19,20,22]);
__d(function(g,r,i,a,m,e,d){m.exports=function(n){if(Array.isArray(n))return n}},18,[]);
__d(function(g,r,i,a,m,e,d){m.exports=function(t,n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var o=[],l=!0,f=!1,u=void 0;try{for(var y,c=t[Symbol.iterator]();!(l=(y=c.next()).done)&&(o.push(y.value),!n||o.length!==n);l=!0);}catch(t){f=!0,u=t}finally{try{l||null==c.return||c.return()}finally{if(f)throw u}}return o}}},19,[]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);m.exports=function(n,o){if(n){if("string"==typeof n)return t(n,o);var c=Object.prototype.toString.call(n).slice(8,-1);return"Object"===c&&n.constructor&&(c=n.constructor.name),"Map"===c||"Set"===c?Array.from(n):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?t(n,o):void 0}}},20,[21]);
__d(function(g,r,i,a,m,e,d){m.exports=function(n,t){(null==t||t>n.length)&&(t=n.length);for(var l=0,o=new Array(t);l<t;l++)o[l]=n[l];return o}},21,[]);
__d(function(g,r,i,a,m,e,d){m.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},22,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=new(r(d[0]));Object.defineProperty(g,'__fbBatchedBridge',{configurable:!0,value:t}),m.exports=t},23,[24]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),l=r(d[1]),u=r(d[2]),s=r(d[3]),n=r(d[4]),h=(r(d[5]),r(d[6])),o=r(d[7]).default,c=(r(d[8]),(function(){function c(){l(this,c),this._lazyCallableModules={},this._queue=[[],[],[],0],this._successCallbacks=new Map,this._failureCallbacks=new Map,this._callID=0,this._lastFlush=0,this._eventLoopStartTime=Date.now(),this._immediatesCallback=null,this.callFunctionReturnFlushedQueue=this.callFunctionReturnFlushedQueue.bind(this),this.flushedQueue=this.flushedQueue.bind(this),this.invokeCallbackAndReturnFlushedQueue=this.invokeCallbackAndReturnFlushedQueue.bind(this)}return u(c,[{key:"callFunctionReturnFlushedQueue",value:function(t,l,u){var s=this;return this.__guard(function(){s.__callFunction(t,l,u)}),this.flushedQueue()}},{key:"callFunctionReturnResultAndFlushedQueue",value:function(t,l,u){}},{key:"invokeCallbackAndReturnFlushedQueue",value:function(t,l){var u=this;return this.__guard(function(){u.__invokeCallback(t,l)}),this.flushedQueue()}},{key:"flushedQueue",value:function(){var t=this;this.__guard(function(){t.__callImmediates()});var l=this._queue;return this._queue=[[],[],[],this._callID],l[0].length?l:null}},{key:"getEventLoopRunningTime",value:function(){return Date.now()-this._eventLoopStartTime}},{key:"registerCallableModule",value:function(t,l){this._lazyCallableModules[t]=function(){return l}}},{key:"registerLazyCallableModule",value:function(t,l){var u,s=l;this._lazyCallableModules[t]=function(){return s&&(u=s(),s=null),u}}},{key:"getCallableModule",value:function(t){var l=this._lazyCallableModules[t];return l?l():null}},{key:"callNativeSyncHook",value:function(t,l,u,s,n){return this.processCallbacks(t,l,u,s,n),g.nativeCallSyncHook(t,l,u)}},{key:"processCallbacks",value:function(t,l,u,s,n){(s||n)&&(s&&u.push(this._callID<<1),n&&u.push(this._callID<<1|1),this._successCallbacks.set(this._callID,n),this._failureCallbacks.set(this._callID,s)),this._callID++}},{key:"enqueueNativeCall",value:function(t,l,u,s,h){this.processCallbacks(t,l,u,s,h),this._queue[0].push(t),this._queue[1].push(l),this._queue[2].push(u);var o=Date.now();if(g.nativeFlushQueueImmediate&&o-this._lastFlush>=5){var c=this._queue;this._queue=[[],[],[],this._callID],this._lastFlush=o,g.nativeFlushQueueImmediate(c)}n.counterEvent('pending_js_to_native_queue',this._queue[0].length),this.__spy&&this.__spy({type:1,module:t+'',method:l,args:u})}},{key:"createDebugLookup",value:function(t,l,u){}},{key:"setImmediatesCallback",value:function(t){this._immediatesCallback=t}},{key:"__guard",value:function(t){if(this.__shouldPauseOnThrow())t();else try{t()}catch(t){s.reportFatalError(t)}}},{key:"__shouldPauseOnThrow",value:function(){return'undefined'!=typeof DebuggerInternal&&!0===DebuggerInternal.shouldPauseOnThrow}},{key:"__callImmediates",value:function(){n.beginEvent('JSTimers.callImmediates()'),null!=this._immediatesCallback&&this._immediatesCallback(),n.endEvent()}},{key:"__callFunction",value:function(t,l,u){this._lastFlush=Date.now(),this._eventLoopStartTime=this._lastFlush,this.__spy?n.beginEvent(t+"."+l+"("+o(u)+")"):n.beginEvent(t+"."+l+"(...)"),this.__spy&&this.__spy({type:0,module:t,method:l,args:u});var s=this.getCallableModule(t);h(!!s,'Module %s is not a registered callable module (calling %s)',t,l),h(!!s[l],'Method %s does not exist on module %s',l,t),s[l].apply(s,u),n.endEvent()}},{key:"__invokeCallback",value:function(l,u){this._lastFlush=Date.now(),this._eventLoopStartTime=this._lastFlush;var s=l>>>1,n=1&l?this._successCallbacks.get(s):this._failureCallbacks.get(s);n&&(this._successCallbacks.delete(s),this._failureCallbacks.delete(s),n.apply(void 0,t(u)))}}],[{key:"spy",value:function(t){c.prototype.__spy=!0===t?function(t){console.log((0===t.type?'N->JS':'JS->N')+" : "+(t.module?t.module+'.':'')+t.method+"("+JSON.stringify(t.args)+")")}:!1===t?null:t}}]),c})());m.exports=c},24,[25,29,30,31,32,33,6,34,7]);
__d(function(g,r,i,a,m,e,d){var n=r(d[0]),t=r(d[1]),o=r(d[2]),u=r(d[3]);m.exports=function(c){return n(c)||t(c)||o(c)||u()}},25,[26,27,20,28]);
__d(function(g,r,i,a,m,e,d){var n=r(d[0]);m.exports=function(t){if(Array.isArray(t))return n(t)}},26,[21]);
__d(function(g,r,i,a,m,e,d){m.exports=function(n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)}},27,[]);
__d(function(g,r,i,a,m,e,d){m.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},28,[]);
__d(function(g,r,i,a,m,e,d){m.exports=function(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}},29,[]);
__d(function(g,r,i,a,m,e,d){function n(n,t){for(var o=0;o<t.length;o++){var u=t[o];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}m.exports=function(t,o,u){return o&&n(t.prototype,o),u&&n(t,u),t}},30,[]);
__d(function(g,r,i,a,m,e,d){m.exports=g.ErrorUtils},31,[]);
__d(function(g,r,i,a,m,e,d){'use strict';r(d[0]);var n=!1,t=0,c={installReactHook:function(){!0},setEnabled:function(t){n!==t&&(n=t)},isEnabled:function(){return n},beginEvent:function(t,c){n&&(t='function'==typeof t?t():t,g.nativeTraceBeginSection(131072,t,c))},endEvent:function(){n&&g.nativeTraceEndSection(131072)},beginAsyncEvent:function(c){var o=t;return n&&(t++,c='function'==typeof c?c():c,g.nativeTraceBeginAsyncSection(131072,c,o)),o},endAsyncEvent:function(t,c){n&&(t='function'==typeof t?t():t,g.nativeTraceEndAsyncSection(131072,t,c))},counterEvent:function(t,c){n&&(t='function'==typeof t?t():t,g.nativeTraceCounter&&g.nativeTraceCounter(131072,t,c))}};m.exports=c},32,[6]);
__d(function(g,r,i,a,m,e,d){'use strict';m.exports=function(t){return t}},33,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.createStringifySafeWithLimits=l,e.default=void 0;var n=t(r(d[1]));function o(t,n){var o;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=u(t))||n&&t&&"number"==typeof t.length){o&&(t=o);var f=0;return function(){return f>=t.length?{done:!0}:{done:!1,value:t[f++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(o=t[Symbol.iterator]()).next.bind(o)}function u(t,n){if(t){if("string"==typeof t)return f(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?f(t,n):void 0}}function f(t,n){(null==n||n>t.length)&&(n=t.length);for(var o=0,u=new Array(n);o<n;o++)u[o]=t[o];return u}function l(t){var u=t.maxDepth,f=void 0===u?Number.POSITIVE_INFINITY:u,l=t.maxStringLimit,c=void 0===l?Number.POSITIVE_INFINITY:l,s=t.maxArrayLimit,y=void 0===s?Number.POSITIVE_INFINITY:s,h=t.maxObjectKeysLimit,v=void 0===h?Number.POSITIVE_INFINITY:h,b=[];function I(t,u){for(;b.length&&this!==b[0];)b.shift();if('string'==typeof u){return u.length>c+"...(truncated)...".length?u.substring(0,c)+"...(truncated)...":u}if('object'!=typeof u||null===u)return u;var l=u;if(Array.isArray(u))b.length>=f?l="[ ... array with "+u.length+" values ... ]":u.length>y&&(l=u.slice(0,y).concat(["... extra "+(u.length-y)+" values truncated ..."]));else{(0,n.default)('object'==typeof u,'This was already found earlier');var s=Object.keys(u);if(b.length>=f)l="{ ... object with "+s.length+" keys ... }";else if(s.length>v){l={};for(var h,I=o(s.slice(0,v));!(h=I()).done;){var p=h.value;l[p]=u[p]}l['...(truncated keys)...']=s.length-v}}return b.unshift(l),l}return function(t){if(void 0===t)return'undefined';if(null===t)return'null';if('function'==typeof t)try{return t.toString()}catch(t){return'[function unknown]'}else{if(t instanceof Error)return t.name+': '+t.message;try{var n=JSON.stringify(t,I);return void 0===n?'["'+typeof t+'" failed to stringify]':n}catch(n){if('function'==typeof t.toString)try{return t.toString()}catch(t){}}}return'["'+typeof t+'" failed to stringify]'}}var c=l({maxDepth:10,maxStringLimit:100,maxArrayLimit:50,maxObjectKeysLimit:50});e.default=c},34,[1,6]);
__d(function(g,r,i,a,m,e,d){'use strict';m.exports=function(t,n,u){var b,c=u.get,o=!1!==u.enumerable,f=!1!==u.writable,l=!1;function s(u){b=u,l=!0,Object.defineProperty(t,n,{value:u,configurable:!0,enumerable:o,writable:f})}Object.defineProperty(t,n,{get:function(){return l||(l=!0,s(c())),b},set:s,configurable:!0,enumerable:o})}},35,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);r(d[1]),r(d[2]),m.exports=t},36,[37,39,40]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]);m.exports=n;var t=y(!0),o=y(!1),f=y(null),u=y(void 0),c=y(0),l=y('');function y(t){var o=new n(n._0);return o._V=1,o._W=t,o}n.resolve=function(p){if(p instanceof n)return p;if(null===p)return f;if(void 0===p)return u;if(!0===p)return t;if(!1===p)return o;if(0===p)return c;if(''===p)return l;if('object'==typeof p||'function'==typeof p)try{var h=p.then;if('function'==typeof h)return new n(h.bind(p))}catch(t){return new n(function(n,o){o(t)})}return y(p)};var p=function(n){return'function'==typeof Array.from?(p=Array.from,Array.from(n)):(p=function(n){return Array.prototype.slice.call(n)},Array.prototype.slice.call(n))};n.all=function(t){var o=p(t);return new n(function(t,f){if(0===o.length)return t([]);var u=o.length;function c(l,y){if(y&&('object'==typeof y||'function'==typeof y)){if(y instanceof n&&y.then===n.prototype.then){for(;3===y._V;)y=y._W;return 1===y._V?c(l,y._W):(2===y._V&&f(y._W),void y.then(function(n){c(l,n)},f))}var p=y.then;if('function'==typeof p)return void new n(p.bind(y)).then(function(n){c(l,n)},f)}o[l]=y,0==--u&&t(o)}for(var l=0;l<o.length;l++)c(l,o[l])})},n.reject=function(t){return new n(function(n,o){o(t)})},n.race=function(t){return new n(function(o,f){p(t).forEach(function(t){n.resolve(t).then(o,f)})})},n.prototype.catch=function(n){return this.then(null,n)}},37,[38]);
__d(function(g,r,i,a,m,e,d){'use strict';function n(){}var t=null,o={};function u(n){try{return n.then}catch(n){return t=n,o}}function f(n,u){try{return n(u)}catch(n){return t=n,o}}function c(n,u,f){try{n(u,f)}catch(n){return t=n,o}}function _(t){if('object'!=typeof this)throw new TypeError('Promises must be constructed via new');if('function'!=typeof t)throw new TypeError('Promise constructor\'s argument is not a function');this._U=0,this._V=0,this._W=null,this._X=null,t!==n&&X(t,this)}function s(t,o,u){return new t.constructor(function(f,c){var s=new _(n);s.then(f,c),l(t,new w(o,u,s))})}function l(n,t){for(;3===n._V;)n=n._W;if(_._Y&&_._Y(n),0===n._V)return 0===n._U?(n._U=1,void(n._X=t)):1===n._U?(n._U=2,void(n._X=[n._X,t])):void n._X.push(t);h(n,t)}function h(n,u){setImmediate(function(){var c=1===n._V?u.onFulfilled:u.onRejected;if(null!==c){var _=f(c,n._W);_===o?v(u.promise,t):p(u.promise,_)}else 1===n._V?p(u.promise,n._W):v(u.promise,n._W)})}function p(n,f){if(f===n)return v(n,new TypeError('A promise cannot be resolved with itself.'));if(f&&('object'==typeof f||'function'==typeof f)){var c=u(f);if(c===o)return v(n,t);if(c===n.then&&f instanceof _)return n._V=3,n._W=f,void y(n);if('function'==typeof c)return void X(c.bind(f),n)}n._V=1,n._W=f,y(n)}function v(n,t){n._V=2,n._W=t,_._Z&&_._Z(n,t),y(n)}function y(n){if(1===n._U&&(l(n,n._X),n._X=null),2===n._U){for(var t=0;t<n._X.length;t++)l(n,n._X[t]);n._X=null}}function w(n,t,o){this.onFulfilled='function'==typeof n?n:null,this.onRejected='function'==typeof t?t:null,this.promise=o}function X(n,u){var f=!1,_=c(n,function(n){f||(f=!0,p(u,n))},function(n){f||(f=!0,v(u,n))});f||_!==o||(f=!0,v(u,t))}m.exports=_,_._Y=null,_._Z=null,_._0=n,_.prototype.then=function(t,o){if(this.constructor!==_)return s(this,t,o);var u=new _(n);return l(this,new w(t,o,u)),u}},38,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);m.exports=t,t.prototype.done=function(t,n){(arguments.length?this.then.apply(this,arguments):this).then(null,function(t){setTimeout(function(){throw t},0)})}},39,[38]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]);m.exports=n,n.prototype.finally=function(t){return this.then(function(o){return n.resolve(t()).then(function(){return o})},function(o){return n.resolve(t()).then(function(){throw o})})}},40,[38]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),c=r(d[2]),o=r(d[3]),s=r(d[4]),u=r(d[5]);function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var f=r(d[6]),p=r(d[7]),h=(function(h){o(R,f);var v,y,b=(v=R,y=l(),function(){var t,n=u(v);if(y){var c=u(this).constructor;t=Reflect.construct(n,arguments,c)}else t=n.apply(this,arguments);return s(this,t)});function R(){var n;t(this,R);var c=new p;return(n=b.call(this,c)).sharedSubscriber=c,n}return n(R,[{key:"addListener",value:function(t,n,o){return c(u(R.prototype),"addListener",this).call(this,t,n,o)}},{key:"removeAllListeners",value:function(t){c(u(R.prototype),"removeAllListeners",this).call(this,t)}},{key:"removeSubscription",value:function(t){t.emitter!==this?t.emitter.removeSubscription(t):c(u(R.prototype),"removeSubscription",this).call(this,t)}}]),R})();m.exports=new h},41,[29,30,42,45,47,44,49,52]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);function n(c,f,o){return"undefined"!=typeof Reflect&&Reflect.get?m.exports=n=Reflect.get:m.exports=n=function(n,c,f){var o=t(n,c);if(o){var u=Object.getOwnPropertyDescriptor(o,c);return u.get?u.get.call(f):u.value}},n(c,f,o||c)}m.exports=n},42,[43]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);m.exports=function(n,o){for(;!Object.prototype.hasOwnProperty.call(n,o)&&null!==(n=t(n)););return n}},43,[44]);
__d(function(g,r,i,a,m,e,d){function t(o){return m.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t(o)}m.exports=t},44,[]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);m.exports=function(o,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(n&&n.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),n&&t(o,n)}},45,[46]);
__d(function(g,r,i,a,m,e,d){function t(o,n){return m.exports=t=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t},t(o,n)}m.exports=t},46,[]);
__d(function(g,r,i,a,m,e,d){var n=r(d[0]),t=r(d[1]);m.exports=function(o,c){return!c||"object"!==n(c)&&"function"!=typeof c?t(o):c}},47,[13,48]);
__d(function(g,r,i,a,m,e,d){m.exports=function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}},48,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),s=r(d[2]),u=r(d[3]),o=r(d[4]),c=function(){return!0},b=(function(){function b(n){t(this,b),this._subscriber=n||new u}return n(b,[{key:"addListener",value:function(t,n,u){return this._subscriber.addSubscription(t,new s(this,this._subscriber,n,u))}},{key:"once",value:function(t,n,s){var u=this;return this.addListener(t,function(){u.removeCurrentListener();for(var t=arguments.length,o=new Array(t),c=0;c<t;c++)o[c]=arguments[c];n.apply(s,o)})}},{key:"removeAllListeners",value:function(t){this._subscriber.removeAllSubscriptions(t)}},{key:"removeCurrentListener",value:function(){o(!!this._currentSubscription,'Not in an emitting cycle; there is no current subscription'),this.removeSubscription(this._currentSubscription)}},{key:"removeSubscription",value:function(t){o(t.emitter===this,'Subscription does not belong to this emitter.'),this._subscriber.removeSubscription(t)}},{key:"listeners",value:function(t){var n=this._subscriber.getSubscriptionsForType(t);return n?n.filter(c).map(function(t){return t.listener}):[]}},{key:"emit",value:function(t){var n=this._subscriber.getSubscriptionsForType(t);if(n){for(var s=0,u=n.length;s<u;s++){var o=n[s];o&&o.listener&&(this._currentSubscription=o,o.listener.apply(o.context,Array.prototype.slice.call(arguments,1)))}this._currentSubscription=null}}},{key:"removeListener",value:function(t,n){var s=this._subscriber.getSubscriptionsForType(t);if(s)for(var u=0,o=s.length;u<o;u++){var c=s[u];c&&c.listener===n&&c.remove()}}}]),b})();m.exports=b},49,[29,30,50,52,6]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),c=r(d[2]),o=r(d[3]),u=r(d[4]);function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var s=r(d[5]),l=(function(l){c(y,s);var h,v,p=(h=y,v=f(),function(){var t,n=u(h);if(v){var c=u(this).constructor;t=Reflect.construct(n,arguments,c)}else t=n.apply(this,arguments);return o(this,t)});function y(n,c,o,u){var f;return t(this,y),(f=p.call(this,c)).emitter=n,f.listener=o,f.context=u,f}return n(y,[{key:"remove",value:function(){this.emitter.removeSubscription(this)}}]),y})();m.exports=l},50,[29,30,45,47,44,51]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),s=r(d[1]),n=(function(){function n(s){t(this,n),this.subscriber=s}return s(n,[{key:"remove",value:function(){this.subscriber.removeSubscription(this)}}]),n})();m.exports=n},51,[29,30]);
__d(function(g,r,i,a,m,e,d){'use strict';var s=r(d[0]),t=r(d[1]),n=r(d[2]),o=(function(){function o(){s(this,o),this._subscriptionsForType={},this._currentSubscription=null}return t(o,[{key:"addSubscription",value:function(s,t){n(t.subscriber===this,'The subscriber of the subscription is incorrectly set.'),this._subscriptionsForType[s]||(this._subscriptionsForType[s]=[]);var o=this._subscriptionsForType[s].length;return this._subscriptionsForType[s].push(t),t.eventType=s,t.key=o,t}},{key:"removeAllSubscriptions",value:function(s){void 0===s?this._subscriptionsForType={}:delete this._subscriptionsForType[s]}},{key:"removeSubscription",value:function(s){var t=s.eventType,n=s.key,o=this._subscriptionsForType[t];o&&delete o[n]}},{key:"getSubscriptionsForType",value:function(s){return this._subscriptionsForType[s]}}]),o})();m.exports=o},52,[29,30,6]);
__d(function(g,r,i,a,m,e,d){'use strict';r(d[0]);var t=r(d[1]),n=r(d[2]);function o(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,s)}return o}function s(n){for(var s=1;s<arguments.length;s++){var c=null!=arguments[s]?arguments[s]:{};s%2?o(Object(c),!0).forEach(function(o){t(n,o,c[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(c)):o(Object(c)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(c,t))})}return n}r(d[3]);var c=r(d[4]),l=r(d[5]),u=r(d[6]),f=r(d[7]).default,p=c.forwardRef(function(t,o){var p,O,b=t.onLayout,h=t.style,j=t.size,w=n(t,["onLayout","style","size"]);switch(j){case'small':p=y.sizeSmall,O='small';break;case'large':p=y.sizeLarge,O='large';break;default:p={height:t.size,width:t.size}}var v=s(s({},w),{},{ref:o,style:p,size:O});return c.createElement(u,{onLayout:b,style:l.compose(y.container,h)},c.createElement(f,v))});p.displayName='ActivityIndicator',p.defaultProps={animating:!0,color:'#999999',hidesWhenStopped:!0,size:'small'};var y=l.create({container:{alignItems:'center',justifyContent:'center'},sizeSmall:{width:20,height:20},sizeLarge:{width:36,height:36}});m.exports=p},53,[16,54,55,57,59,62,91,204]);
__d(function(g,r,i,a,m,e,d){m.exports=function(n,t,u){return t in n?Object.defineProperty(n,t,{value:u,enumerable:!0,configurable:!0,writable:!0}):n[t]=u,n}},54,[]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);m.exports=function(n,o){if(null==n)return{};var l,p,b=t(n,o);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);for(p=0;p<c.length;p++)l=c[p],o.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(n,l)&&(b[l]=n[l])}return b}},55,[56]);
__d(function(g,r,i,a,m,e,d){m.exports=function(n,t){if(null==n)return{};var f,u,o={},c=Object.keys(n);for(u=0;u<c.length;u++)f=c[u],t.indexOf(f)>=0||(o[f]=n[f]);return o}},56,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0])(r(d[1])),n={__constants:null,OS:'ios',get Version(){return this.constants.osVersion},get constants(){return null==this.__constants&&(this.__constants=t.default.getConstants()),this.__constants},get isPad(){return'pad'===this.constants.interfaceIdiom},get isTVOS(){return n.isTV},get isTV(){return'tv'===this.constants.interfaceIdiom},get isTesting(){return!1},select:function(t){return'ios'in t?t.ios:'native'in t?t.native:t.default}};m.exports=n},57,[1,58]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r(d[1])).getEnforcing('PlatformConstants');e.default=n},58,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';m.exports=r(d[0])},59,[60]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n="function"==typeof Symbol&&Symbol.for,o=n?Symbol.for("react.element"):60103,u=n?Symbol.for("react.portal"):60106,f=n?Symbol.for("react.fragment"):60107,c=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,p=n?Symbol.for("react.context"):60110,y=n?Symbol.for("react.forward_ref"):60112,v=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.memo"):60115,b=n?Symbol.for("react.lazy"):60116,_="function"==typeof Symbol&&Symbol.iterator;function S(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$={};function w(t,n,o){this.props=t,this.context=n,this.refs=$,this.updater=o||k}function C(){}function E(t,n,o){this.props=t,this.context=n,this.refs=$,this.updater=o||k}w.prototype.isReactComponent={},w.prototype.setState=function(t,n){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(S(85));this.updater.enqueueSetState(this,t,n,"setState")},w.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},C.prototype=w.prototype;var R=E.prototype=new C;R.constructor=E,t(R,w.prototype),R.isPureReactComponent=!0;var x={current:null},P=Object.prototype.hasOwnProperty,j={key:!0,ref:!0,__self:!0,__source:!0};function O(t,n,u){var f,c={},l=null,s=null;if(null!=n)for(f in void 0!==n.ref&&(s=n.ref),void 0!==n.key&&(l=""+n.key),n)P.call(n,f)&&!j.hasOwnProperty(f)&&(c[f]=n[f]);var p=arguments.length-2;if(1===p)c.children=u;else if(1<p){for(var y=Array(p),v=0;v<p;v++)y[v]=arguments[v+2];c.children=y}if(t&&t.defaultProps)for(f in p=t.defaultProps)void 0===c[f]&&(c[f]=p[f]);return{$$typeof:o,type:t,key:l,ref:s,props:c,_owner:x.current}}function A(t,n){return{$$typeof:o,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}function I(t){return"object"==typeof t&&null!==t&&t.$$typeof===o}function U(t){var n={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return n[t]})}var q=/\/+/g,F=[];function L(t,n,o,u){if(F.length){var f=F.pop();return f.result=t,f.keyPrefix=n,f.func=o,f.context=u,f.count=0,f}return{result:t,keyPrefix:n,func:o,context:u,count:0}}function M(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>F.length&&F.push(t)}function D(t,n,f,c){var l=typeof t;"undefined"!==l&&"boolean"!==l||(t=null);var s=!1;if(null===t)s=!0;else switch(l){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case o:case u:s=!0}}if(s)return f(c,t,""===n?"."+B(t,0):n),1;if(s=0,n=""===n?".":n+":",Array.isArray(t))for(var p=0;p<t.length;p++){var y=n+B(l=t[p],p);s+=D(l,y,f,c)}else if(null===t||"object"!=typeof t?y=null:y="function"==typeof(y=_&&t[_]||t["@@iterator"])?y:null,"function"==typeof y)for(t=y.call(t),p=0;!(l=t.next()).done;)s+=D(l=l.value,y=n+B(l,p++),f,c);else if("object"===l)throw f=""+t,Error(S(31,"[object Object]"===f?"object with keys {"+Object.keys(t).join(", ")+"}":f,""));return s}function V(t,n,o){return null==t?0:D(t,"",n,o)}function B(t,n){return"object"==typeof t&&null!==t&&null!=t.key?U(t.key):n.toString(36)}function N(t,n){t.func.call(t.context,n,t.count++)}function T(t,n,o){var u=t.result,f=t.keyPrefix;t=t.func.call(t.context,n,t.count++),Array.isArray(t)?z(t,u,o,function(t){return t}):null!=t&&(I(t)&&(t=A(t,f+(!t.key||n&&n.key===t.key?"":(""+t.key).replace(q,"$&/")+"/")+o)),u.push(t))}function z(t,n,o,u,f){var c="";null!=o&&(c=(""+o).replace(q,"$&/")+"/"),V(t,T,n=L(n,c,u,f)),M(n)}var H={current:null};function W(){var t=H.current;if(null===t)throw Error(S(321));return t}var Y={ReactCurrentDispatcher:H,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:t};e.Children={map:function(t,n,o){if(null==t)return t;var u=[];return z(t,u,null,n,o),u},forEach:function(t,n,o){if(null==t)return t;V(t,N,n=L(null,null,n,o)),M(n)},count:function(t){return V(t,function(){return null},null)},toArray:function(t){var n=[];return z(t,n,null,function(t){return t}),n},only:function(t){if(!I(t))throw Error(S(143));return t}},e.Component=w,e.Fragment=f,e.Profiler=l,e.PureComponent=E,e.StrictMode=c,e.Suspense=v,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,e.cloneElement=function(n,u,f){if(null===n||void 0===n)throw Error(S(267,n));var c=t({},n.props),l=n.key,s=n.ref,p=n._owner;if(null!=u){if(void 0!==u.ref&&(s=u.ref,p=x.current),void 0!==u.key&&(l=""+u.key),n.type&&n.type.defaultProps)var y=n.type.defaultProps;for(v in u)P.call(u,v)&&!j.hasOwnProperty(v)&&(c[v]=void 0===u[v]&&void 0!==y?y[v]:u[v])}var v=arguments.length-2;if(1===v)c.children=f;else if(1<v){y=Array(v);for(var h=0;h<v;h++)y[h]=arguments[h+2];c.children=y}return{$$typeof:o,type:n.type,key:l,ref:s,props:c,_owner:p}},e.createContext=function(t,n){return void 0===n&&(n=null),(t={$$typeof:p,_calculateChangedBits:n,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},e.createElement=O,e.createFactory=function(t){var n=O.bind(null,t);return n.type=t,n},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:y,render:t}},e.isValidElement=I,e.lazy=function(t){return{$$typeof:b,_ctor:t,_status:-1,_result:null}},e.memo=function(t,n){return{$$typeof:h,type:t,compare:void 0===n?null:n}},e.useCallback=function(t,n){return W().useCallback(t,n)},e.useContext=function(t,n){return W().useContext(t,n)},e.useDebugValue=function(){},e.useEffect=function(t,n){return W().useEffect(t,n)},e.useImperativeHandle=function(t,n,o){return W().useImperativeHandle(t,n,o)},e.useLayoutEffect=function(t,n){return W().useLayoutEffect(t,n)},e.useMemo=function(t,n){return W().useMemo(t,n)},e.useReducer=function(t,n,o){return W().useReducer(t,n,o)},e.useRef=function(t){return W().useRef(t)},e.useState=function(t){return W().useState(t)},e.version="16.13.1"},60,[61]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;function f(t){if(null===t||void 0===t)throw new TypeError('Object.assign cannot be called with null or undefined');return Object(t)}m.exports=(function(){try{if(!Object.assign)return!1;var n=new String('abc');if(n[5]='de','5'===Object.getOwnPropertyNames(n)[0])return!1;for(var o={},c=0;c<10;c++)o['_'+String.fromCharCode(c)]=c;if('0123456789'!==Object.getOwnPropertyNames(o).map(function(t){return o[t]}).join(''))return!1;var f={};return'abcdefghijklmnopqrst'.split('').forEach(function(t){f[t]=t}),'abcdefghijklmnopqrst'===Object.keys(t({},f)).join('')}catch(t){return!1}})()?Object.assign:function(t,u){for(var s,b,l=f(t),p=1;p<arguments.length;p++){for(var j in s=Object(arguments[p]))o.call(s,j)&&(l[j]=s[j]);if(n){b=n(s);for(var O=0;O<b.length;O++)c.call(s,b[O])&&(l[b[O]]=s[b[O]])}}return l}},61,[16]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);function o(t,o){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);o&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,c)}return n}function n(n){for(var c=1;c<arguments.length;c++){var l=null!=arguments[c]?arguments[c]:{};c%2?o(Object(l),!0).forEach(function(o){t(n,o,l[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(l)):o(Object(l)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(l,t))})}return n}var c=r(d[1]),l=r(d[2]),s=(r(d[3]),r(d[4])),u=c.roundToNearestPixel(.4);0===u&&(u=1/c.get());var b={position:'absolute',left:0,right:0,top:0,bottom:0};m.exports={hairlineWidth:u,absoluteFill:b,absoluteFillObject:b,compose:function(t,o){return null!=t&&null!=o?[t,o]:null!=t?t:o},flatten:s,setStyleAttributePreprocessor:function(t,o){var c;if(!0===l[t])c={};else{if('object'!=typeof l[t])return void console.error(t+" is not a valid style attribute");c=l[t]}l[t]=n(n({},c),{},{process:o})},create:function(t){return t}}},62,[54,63,66,89,90]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),u=r(d[2]),o=(function(){function o(){t(this,o)}return n(o,null,[{key:"get",value:function(){return u.get('window').scale}},{key:"getFontScale",value:function(){return u.get('window').fontScale||o.get()}},{key:"getPixelSizeForLayoutSize",value:function(t){return Math.round(t*o.get())}},{key:"roundToNearestPixel",value:function(t){var n=o.get();return Math.round(t*n)/n}},{key:"startDetecting",value:function(){}}]),o})();m.exports=o},63,[29,30,64]);
__d(function(g,r,i,a,m,e,d){'use strict';var n,t=r(d[0]),s=t(r(d[1])),o=t(r(d[2])),l=t(r(d[3])),c=t(r(d[4])),u=t(r(d[5])),f=t(r(d[6])),v=new l.default,h=!1,w=(function(){function t(){(0,s.default)(this,t)}return(0,o.default)(t,null,[{key:"get",value:function(t){return(0,f.default)(n[t],'No dimension set for key '+t),n[t]}},{key:"set",value:function(t){var s=t.screen,o=t.window,l=t.windowPhysicalPixels;l&&(o={width:l.width/l.scale,height:l.height/l.scale,scale:l.scale,fontScale:l.fontScale});var c=t.screenPhysicalPixels;c?s={width:c.width/c.scale,height:c.height/c.scale,scale:c.scale,fontScale:c.fontScale}:null==s&&(s=o),n={window:o,screen:s},h?v.emit('change',n):h=!0}},{key:"addEventListener",value:function(n,t){(0,f.default)('change'===n,'Trying to subscribe to unknown event: "%s"',n),v.addListener(n,t)}},{key:"removeEventListener",value:function(n,t){(0,f.default)('change'===n,'Trying to remove listener for unknown event: "%s"',n),v.removeListener(n,t)}}]),t})(),y=g.nativeExtensions&&g.nativeExtensions.DeviceInfo&&g.nativeExtensions.DeviceInfo.Dimensions;y||(c.default.addListener('didUpdateDimensions',function(n){w.set(n)}),y=u.default.getConstants().Dimensions),w.set(y),m.exports=w},64,[1,29,30,49,41,65,6]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var f=t(r(d[1])).getEnforcing('DeviceInfo');e.default=f},65,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var o=r(d[0]);function t(o,t){var n=Object.keys(o);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(o);t&&(c=c.filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable})),n.push.apply(n,c)}return n}function n(n){for(var c=1;c<arguments.length;c++){var l=null!=arguments[c]?arguments[c]:{};c%2?t(Object(l),!0).forEach(function(t){o(n,t,l[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(l)):t(Object(l)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(l,o))})}return n}for(var c=r(d[1]),l=r(d[2]),b=r(d[3]),s=r(d[4]),f=r(d[5]),p=r(d[6]),O={},u=0,y=Object.keys(n(n(n({},b),l),c));u<y.length;u++){O[y[u]]=!0}O.transform={process:f},O.shadowOffset={diff:p};var C={process:s};O.backgroundColor=C,O.borderBottomColor=C,O.borderColor=C,O.borderLeftColor=C,O.borderRightColor=C,O.borderTopColor=C,O.borderStartColor=C,O.borderEndColor=C,O.color=C,O.shadowColor=C,O.textDecorationColor=C,O.tintColor=C,O.textShadowColor=C,O.overlayColor=C,m.exports=O},66,[54,67,84,85,71,86,88]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);function o(t,o){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(t);o&&(b=b.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,b)}return n}function n(n){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?o(Object(c),!0).forEach(function(o){t(n,o,c[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(c)):o(Object(c)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(c,t))})}return n}var b=r(d[1]),c=r(d[2]),u=r(d[3]),s=r(d[4]),f=r(d[5]),p=n(n(n(n({},c),u),s),{},{resizeMode:f.oneOf(['center','contain','cover','repeat','stretch']),backfaceVisibility:f.oneOf(['visible','hidden']),backgroundColor:b,borderColor:b,borderWidth:f.number,borderRadius:f.number,overflow:f.oneOf(['visible','hidden']),tintColor:b,opacity:f.number,overlayColor:f.string,borderTopLeftRadius:f.number,borderTopRightRadius:f.number,borderBottomLeftRadius:f.number,borderBottomRightRadius:f.number});m.exports=p},67,[54,68,72,76,77,73]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]),f=function(f,l,o,b,t,u){var s=l[o];return void 0===s||null===s?f?new Error('Required '+t+' `'+(u||o)+'` was not specified in `'+b+'`.'):void 0:'number'!=typeof s&&null===n(s)?new Error('Invalid '+t+' `'+(u||o)+'` supplied to `'+b+'`: '+s+"\nValid color formats are\n  - '#f0f' (#rgb)\n  - '#f0fc' (#rgba)\n  - '#ff00ff' (#rrggbb)\n  - '#ff00ff00' (#rrggbbaa)\n  - 'rgb(255, 255, 255)'\n  - 'rgba(255, 255, 255, 1.0)'\n  - 'hsl(360, 100%, 100%)'\n  - 'hsla(360, 100%, 100%, 1.0)'\n  - 'transparent'\n  - 'red'\n  - 0xff00ff00 (0xrrggbbaa)\n"):void 0},l=f.bind(null,!1);l.isRequired=f.bind(null,!0),m.exports=l},68,[69]);
__d(function(g,r,i,a,m,e,d){'use strict';function l(l,n,o){return o<0&&(o+=1),o>1&&(o-=1),o<.16666666666666666?l+6*(n-l)*o:o<.5?n:o<.6666666666666666?l+(n-l)*(.6666666666666666-o)*6:l}function n(n,o,t){var u=t<.5?t*(1+o):t+o-t*o,s=2*t-u,h=l(s,u,n+.3333333333333333),c=l(s,u,n),b=l(s,u,n-.3333333333333333);return Math.round(255*h)<<24|Math.round(255*c)<<16|Math.round(255*b)<<8}var o,t='[-+]?\\d*\\.?\\d+',u="[-+]?\\d*\\.?\\d+%";function s(){for(var l=arguments.length,n=new Array(l),o=0;o<l;o++)n[o]=arguments[o];return'\\(\\s*('+n.join(')\\s*,\\s*(')+')\\s*\\)'}function h(l){var n=parseInt(l,10);return n<0?0:n>255?255:n}function c(l){return(parseFloat(l)%360+360)%360/360}function b(l){var n=parseFloat(l);return n<0?0:n>1?255:Math.round(255*n)}function p(l){var n=parseFloat(l);return n<0?0:n>100?1:n/100}var y={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199};m.exports=function(l){var f,k=(void 0===o&&(o={rgb:new RegExp('rgb'+s(t,t,t)),rgba:new RegExp('rgba'+s(t,t,t,t)),hsl:new RegExp('hsl'+s(t,u,u)),hsla:new RegExp('hsla'+s(t,u,u,t)),hex3:/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4:/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#([0-9a-fA-F]{6})$/,hex8:/^#([0-9a-fA-F]{8})$/}),o);return'number'==typeof l?l>>>0===l&&l>=0&&l<=4294967295?l:null:'object'==typeof l&&null!=l&&null!=(0,r(d[0]).normalizeColorObject)(l)?l:'string'!=typeof l?null:(f=k.hex6.exec(l))?parseInt(f[1]+'ff',16)>>>0:y.hasOwnProperty(l)?y[l]:(f=k.rgb.exec(l))?(h(f[1])<<24|h(f[2])<<16|h(f[3])<<8|255)>>>0:(f=k.rgba.exec(l))?(h(f[1])<<24|h(f[2])<<16|h(f[3])<<8|b(f[4]))>>>0:(f=k.hex3.exec(l))?parseInt(f[1]+f[1]+f[2]+f[2]+f[3]+f[3]+'ff',16)>>>0:(f=k.hex8.exec(l))?parseInt(f[1],16)>>>0:(f=k.hex4.exec(l))?parseInt(f[1]+f[1]+f[2]+f[2]+f[3]+f[3]+f[4]+f[4],16)>>>0:(f=k.hsl.exec(l))?(255|n(c(f[1]),p(f[2]),p(f[3])))>>>0:(f=k.hsla.exec(l))?(n(c(f[1]),p(f[2]),p(f[3]))|b(f[4]))>>>0:null}},69,[70]);
__d(function(g,r,i,a,m,e,d){'use strict';Object.defineProperty(e,"__esModule",{value:!0}),e.processColorObject=e.normalizeColorObject=e.DynamicColorIOSPrivate=e.PlatformColor=void 0;e.PlatformColor=function(){for(var n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];return{semantic:t}};e.DynamicColorIOSPrivate=function(n){return{dynamic:{light:n.light,dark:n.dark}}};e.normalizeColorObject=function(n){if('semantic'in n)return n;if('dynamic'in n&&void 0!==n.dynamic){var t=r(d[0]),o=n.dynamic;return{dynamic:{light:t(o.light),dark:t(o.dark)}}}return null};e.processColorObject=function(n){if('dynamic'in n&&null!=n.dynamic){var t=r(d[1]),o=n.dynamic;return{dynamic:{light:t(o.light),dark:t(o.dark)}}}return n}},70,[69,71]);
__d(function(g,r,i,a,m,e,d){'use strict';r(d[0]);var n=r(d[1]);m.exports=function(t){if(void 0===t||null===t)return t;var o=n(t);if(null!==o&&void 0!==o){if('object'==typeof o){var u=(0,r(d[2]).processColorObject)(o);if(null!=u)return u}return'number'!=typeof o?null:o=(o<<24|o>>>8)>>>0}}},71,[57,69,70]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]),t={display:n.oneOf(['none','flex']),width:n.oneOfType([n.number,n.string]),height:n.oneOfType([n.number,n.string]),start:n.oneOfType([n.number,n.string]),end:n.oneOfType([n.number,n.string]),top:n.oneOfType([n.number,n.string]),left:n.oneOfType([n.number,n.string]),right:n.oneOfType([n.number,n.string]),bottom:n.oneOfType([n.number,n.string]),minWidth:n.oneOfType([n.number,n.string]),maxWidth:n.oneOfType([n.number,n.string]),minHeight:n.oneOfType([n.number,n.string]),maxHeight:n.oneOfType([n.number,n.string]),margin:n.oneOfType([n.number,n.string]),marginVertical:n.oneOfType([n.number,n.string]),marginHorizontal:n.oneOfType([n.number,n.string]),marginTop:n.oneOfType([n.number,n.string]),marginBottom:n.oneOfType([n.number,n.string]),marginLeft:n.oneOfType([n.number,n.string]),marginRight:n.oneOfType([n.number,n.string]),marginStart:n.oneOfType([n.number,n.string]),marginEnd:n.oneOfType([n.number,n.string]),padding:n.oneOfType([n.number,n.string]),paddingVertical:n.oneOfType([n.number,n.string]),paddingHorizontal:n.oneOfType([n.number,n.string]),paddingTop:n.oneOfType([n.number,n.string]),paddingBottom:n.oneOfType([n.number,n.string]),paddingLeft:n.oneOfType([n.number,n.string]),paddingRight:n.oneOfType([n.number,n.string]),paddingStart:n.oneOfType([n.number,n.string]),paddingEnd:n.oneOfType([n.number,n.string]),borderWidth:n.number,borderTopWidth:n.number,borderStartWidth:n.number,borderEndWidth:n.number,borderRightWidth:n.number,borderBottomWidth:n.number,borderLeftWidth:n.number,position:n.oneOf(['absolute','relative']),flexDirection:n.oneOf(['row','row-reverse','column','column-reverse']),flexWrap:n.oneOf(['wrap','nowrap','wrap-reverse']),justifyContent:n.oneOf(['flex-start','flex-end','center','space-between','space-around','space-evenly']),alignItems:n.oneOf(['flex-start','flex-end','center','stretch','baseline']),alignSelf:n.oneOf(['auto','flex-start','flex-end','center','stretch','baseline']),alignContent:n.oneOf(['flex-start','flex-end','center','stretch','space-between','space-around']),overflow:n.oneOf(['visible','hidden','scroll']),flex:n.number,flexGrow:n.number,flexShrink:n.number,flexBasis:n.oneOfType([n.number,n.string]),aspectRatio:n.number,zIndex:n.number,direction:n.oneOf(['inherit','ltr','rtl'])};m.exports=t},72,[73]);
__d(function(g,r,i,a,m,e,d){m.exports=r(d[0])()},73,[74]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]);function t(){}function o(){}o.resetWarningCache=t,m.exports=function(){function p(t,o,p,c,s,y){if(y!==n){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name='Invariant Violation',f}}function c(){return p}p.isRequired=p;var s={array:p,bool:p,func:p,number:p,object:p,string:p,symbol:p,any:p,arrayOf:c,element:p,elementType:p,instanceOf:c,node:p,objectOf:c,oneOf:c,oneOfType:c,shape:c,exact:c,checkPropTypes:o,resetWarningCache:t};return s.PropTypes=s,s}},74,[75]);
__d(function(g,r,i,a,m,e,d){'use strict';m.exports='SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED'},75,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var s=r(d[0]),h=r(d[1]),o={shadowColor:s,shadowOffset:h.shape({width:h.number,height:h.number}),shadowOpacity:h.number,shadowRadius:h.number};m.exports=o},76,[68,73]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),s=r(d[1]),n={transform:t.arrayOf(t.oneOfType([t.shape({perspective:t.number}),t.shape({rotate:t.string}),t.shape({rotateX:t.string}),t.shape({rotateY:t.string}),t.shape({rotateZ:t.string}),t.shape({scale:t.number}),t.shape({scaleX:t.number}),t.shape({scaleY:t.number}),t.shape({translateX:t.number}),t.shape({translateY:t.number}),t.shape({skewX:t.string}),t.shape({skewY:t.string})])),transformMatrix:function(t,s,n){if(t[s])return new Error("The transformMatrix style property is deprecated. Use `transform: [{ matrix: ... }]` instead.")},decomposedMatrix:function(t,s,n){if(t[s])return new Error("The decomposedMatrix style property is deprecated. Use `transform: [...]` instead.")},scaleX:s(t.number,'Use the transform prop instead.'),scaleY:s(t.number,'Use the transform prop instead.'),rotation:s(t.number,'Use the transform prop instead.'),translateX:s(t.number,'Use the transform prop instead.'),translateY:s(t.number,'Use the transform prop instead.')};m.exports=n},77,[73,78]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]);m.exports=function(t,o){return function(c,s,u){g.RN$Bridgeless||n.getViewManagerConfig(u)||void 0===c[s]||console.warn("`"+s+"` supplied to `"+u+"` has been deprecated. "+o);for(var p=arguments.length,f=new Array(p>3?p-3:0),l=3;l<p;l++)f[l-3]=arguments[l];return t.apply(void 0,[c,s,u].concat(f))}}},78,[79]);
__d(function(g,r,i,a,m,e,d){'use strict';var s=!0===g.RN$Bridgeless?r(d[0]):r(d[1]);m.exports=s},79,[80,81]);
__d(function(g,r,i,a,m,e,d){'use strict';m.exports={getViewManagerConfig:function(n){return console.warn('Attempting to get config for view manager: '+n),'RCTVirtualText'===n?{}:null},getConstants:function(){return{}},getConstantsForViewManager:function(n){},getDefaultEventTypes:function(){return[]},playTouchSound:function(){},lazilyLoadView:function(n){},createView:function(n,t,o,u){},updateView:function(n,t,o){},focus:function(n){},blur:function(n){},findSubviewIn:function(n,t,o){},dispatchViewManagerCommand:function(n,t,o){},measure:function(n,t){},measureInWindow:function(n,t){},viewIsDescendantOf:function(n,t,o){},measureLayout:function(n,t,o,u){},measureLayoutRelativeToParent:function(n,t,o){},setJSResponder:function(n,t){},clearJSResponder:function(){},configureNextLayoutAnimation:function(n,t,o){},removeSubviewsFromContainerWithID:function(n){},replaceExistingNonRootView:function(n,t){},setChildren:function(n,t){},manageChildren:function(n,t,o,u,c,f){},setLayoutAnimationEnabledExperimental:function(n){},sendAccessibilityEvent:function(n,t){},showPopupMenu:function(n,t,o,u){},dismissPopupMenu:function(){}}},80,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=t(r(d[1])),o=t(r(d[2]));function c(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);n&&(c=c.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,c)}return o}function f(t){for(var o=1;o<arguments.length;o++){var f=null!=arguments[o]?arguments[o]:{};o%2?c(Object(f),!0).forEach(function(o){(0,n.default)(t,o,f[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(f)):c(Object(f)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(f,n))})}return t}var u=r(d[3]),s=(r(d[4]),r(d[5])),l=r(d[6]),y={},O=new Set,p={},v=!1;function w(){return v||(p=o.default.getConstants(),v=!0),p}var b=f(f({},o.default),{},{getConstants:function(){return w()},getViewManagerConfig:function(t){if(void 0===y[t]&&o.default.getConstantsForViewManager)try{y[t]=o.default.getConstantsForViewManager(t)}catch(n){y[t]=null}var n=y[t];if(n)return n;if(!g.nativeCallSyncHook)return n;if(o.default.lazilyLoadView&&!O.has(t)){var c=o.default.lazilyLoadView(t);O.add(t),c.viewConfig&&(w()[t]=c.viewConfig,j(t))}return y[t]}});function j(t){var n=w()[t];y[t]=n,n.Manager&&(l(n,'Constants',{get:function(){var t=u[n.Manager],o={};return t&&Object.keys(t).forEach(function(n){var c=t[n];'function'!=typeof c&&(o[n]=c)}),o}}),l(n,'Commands',{get:function(){var t=u[n.Manager],o={},c=0;return t&&Object.keys(t).forEach(function(n){'function'==typeof t[n]&&(o[n]=c++)}),o}}))}o.default.getViewManagerConfig=b.getViewManagerConfig,Object.keys(w()).forEach(function(t){j(t)}),g.nativeCallSyncHook||Object.keys(w()).forEach(function(t){s.includes(t)||(y[t]||(y[t]=w()[t]),l(o.default,t,{get:function(){return console.warn("Accessing view manager configs directly off UIManager via UIManager['"+t+"'] is no longer supported. Use UIManager.getViewManagerConfig('"+t+"') instead."),b.getViewManagerConfig(t)}}))}),m.exports=b},81,[1,54,82,15,57,83,35]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r(d[1])).getEnforcing('UIManager');e.default=n},82,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';m.exports=['clearJSResponder','configureNextLayoutAnimation','createView','dismissPopupMenu','dispatchViewManagerCommand','findSubviewIn','getConstantsForViewManager','getDefaultEventTypes','manageChildren','measure','measureInWindow','measureLayout','measureLayoutRelativeToParent','playTouchSound','removeRootView','removeSubviewsFromContainerWithID','replaceExistingNonRootView','sendAccessibilityEvent','setChildren','setJSResponder','setLayoutAnimationEnabledExperimental','showPopupMenu','updateView','viewIsDescendantOf','PopupMenu','LazyViewManagersEnabled','ViewManagerNames','StyleConstants','AccessibilityEventTypes','UIView','getViewManagerConfig','blur','focus','genericBubblingEventTypes','genericDirectEventTypes','lazilyLoadView']},83,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);function n(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);n&&(l=l.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,l)}return o}function o(o){for(var l=1;l<arguments.length;l++){var c=null!=arguments[l]?arguments[l]:{};l%2?n(Object(c),!0).forEach(function(n){t(o,n,c[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(c)):n(Object(c)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(c,t))})}return o}var l=r(d[1]),c=r(d[2]),u=r(d[3]),f=o(o({},c),{},{color:l,fontFamily:u.string,fontSize:u.number,fontStyle:u.oneOf(['normal','italic']),fontWeight:u.oneOf(['normal','bold','100','200','300','400','500','600','700','800','900']),fontVariant:u.arrayOf(u.oneOf(['small-caps','oldstyle-nums','lining-nums','tabular-nums','proportional-nums'])),textShadowOffset:u.shape({width:u.number,height:u.number}),textShadowRadius:u.number,textShadowColor:l,letterSpacing:u.number,lineHeight:u.number,textAlign:u.oneOf(['auto','left','right','center','justify']),textAlignVertical:u.oneOf(['auto','top','bottom','center']),includeFontPadding:u.bool,textDecorationLine:u.oneOf(['none','underline','line-through','underline line-through']),textDecorationStyle:u.oneOf(['solid','double','dotted','dashed']),textDecorationColor:l,textTransform:u.oneOf(['none','capitalize','uppercase','lowercase']),writingDirection:u.oneOf(['auto','ltr','rtl'])});m.exports=f},84,[54,68,85,73]);
__d(function(g,r,i,a,m,e,d){'use strict';var o=r(d[0]);function t(o,t){var b=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable})),b.push.apply(b,n)}return b}function b(b){for(var n=1;n<arguments.length;n++){var u=null!=arguments[n]?arguments[n]:{};n%2?t(Object(u),!0).forEach(function(t){o(b,t,u[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(u)):t(Object(u)).forEach(function(o){Object.defineProperty(b,o,Object.getOwnPropertyDescriptor(u,o))})}return b}var n=r(d[1]),u=r(d[2]),c=r(d[3]),s=r(d[4]),p=r(d[5]),l=b(b(b(b({},u),c),s),{},{backfaceVisibility:p.oneOf(['visible','hidden']),backgroundColor:n,borderColor:n,borderTopColor:n,borderRightColor:n,borderBottomColor:n,borderLeftColor:n,borderStartColor:n,borderEndColor:n,borderRadius:p.number,borderTopLeftRadius:p.number,borderTopRightRadius:p.number,borderTopStartRadius:p.number,borderTopEndRadius:p.number,borderBottomLeftRadius:p.number,borderBottomRightRadius:p.number,borderBottomStartRadius:p.number,borderBottomEndRadius:p.number,borderStyle:p.oneOf(['solid','dotted','dashed']),borderWidth:p.number,borderTopWidth:p.number,borderRightWidth:p.number,borderBottomWidth:p.number,borderLeftWidth:p.number,opacity:p.number,elevation:p.number});m.exports=l},85,[54,68,72,76,77,73]);
__d(function(g,r,i,a,m,e,d){'use strict';r(d[0]),r(d[1]),r(d[2]),r(d[3]).default;m.exports=function(t){return t}},86,[87,57,6,34]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o={createIdentityMatrix:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},createCopy:function(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]},createOrthographic:function(t,n,o,u,s,c){return[2/(n-t),0,0,0,0,2/(u-o),0,0,0,0,-2/(c-s),0,-(n+t)/(n-t),-(u+o)/(u-o),-(c+s)/(c-s),1]},createFrustum:function(t,n,o,u,s,c){var v=1/(n-t),f=1/(u-o),h=1/(s-c);return[s*v*2,0,0,0,0,s*f*2,0,0,(n+t)*v,(u+o)*f,(c+s)*h,-1,0,0,c*s*h*2,0]},createPerspective:function(t,n,o,u){var s=1/Math.tan(t/2),c=1/(o-u);return[s/n,0,0,0,0,s,0,0,0,0,(u+o)*c,-1,0,0,u*o*c*2,0]},createTranslate2d:function(t,n){var u=o.createIdentityMatrix();return o.reuseTranslate2dCommand(u,t,n),u},reuseTranslate2dCommand:function(t,n,o){t[12]=n,t[13]=o},reuseTranslate3dCommand:function(t,n,o,u){t[12]=n,t[13]=o,t[14]=u},createScale:function(t){var n=o.createIdentityMatrix();return o.reuseScaleCommand(n,t),n},reuseScaleCommand:function(t,n){t[0]=n,t[5]=n},reuseScale3dCommand:function(t,n,o,u){t[0]=n,t[5]=o,t[10]=u},reusePerspectiveCommand:function(t,n){t[11]=-1/n},reuseScaleXCommand:function(t,n){t[0]=n},reuseScaleYCommand:function(t,n){t[5]=n},reuseScaleZCommand:function(t,n){t[10]=n},reuseRotateXCommand:function(t,n){t[5]=Math.cos(n),t[6]=Math.sin(n),t[9]=-Math.sin(n),t[10]=Math.cos(n)},reuseRotateYCommand:function(t,n){t[0]=Math.cos(n),t[2]=-Math.sin(n),t[8]=Math.sin(n),t[10]=Math.cos(n)},reuseRotateZCommand:function(t,n){t[0]=Math.cos(n),t[1]=Math.sin(n),t[4]=-Math.sin(n),t[5]=Math.cos(n)},createRotateZ:function(t){var n=o.createIdentityMatrix();return o.reuseRotateZCommand(n,t),n},reuseSkewXCommand:function(t,n){t[4]=Math.tan(n)},reuseSkewYCommand:function(t,n){t[1]=Math.tan(n)},multiplyInto:function(t,n,o){var u=n[0],s=n[1],c=n[2],v=n[3],f=n[4],h=n[5],M=n[6],l=n[7],C=n[8],p=n[9],x=n[10],T=n[11],y=n[12],S=n[13],D=n[14],P=n[15],q=o[0],X=o[1],Y=o[2],I=o[3];t[0]=q*u+X*f+Y*C+I*y,t[1]=q*s+X*h+Y*p+I*S,t[2]=q*c+X*M+Y*x+I*D,t[3]=q*v+X*l+Y*T+I*P,q=o[4],X=o[5],Y=o[6],I=o[7],t[4]=q*u+X*f+Y*C+I*y,t[5]=q*s+X*h+Y*p+I*S,t[6]=q*c+X*M+Y*x+I*D,t[7]=q*v+X*l+Y*T+I*P,q=o[8],X=o[9],Y=o[10],I=o[11],t[8]=q*u+X*f+Y*C+I*y,t[9]=q*s+X*h+Y*p+I*S,t[10]=q*c+X*M+Y*x+I*D,t[11]=q*v+X*l+Y*T+I*P,q=o[12],X=o[13],Y=o[14],I=o[15],t[12]=q*u+X*f+Y*C+I*y,t[13]=q*s+X*h+Y*p+I*S,t[14]=q*c+X*M+Y*x+I*D,t[15]=q*v+X*l+Y*T+I*P},determinant:function(n){var o=t(n,16),u=o[0],s=o[1],c=o[2],v=o[3],f=o[4],h=o[5],M=o[6],l=o[7],C=o[8],p=o[9],x=o[10],T=o[11],y=o[12],S=o[13],D=o[14],P=o[15];return v*M*p*y-c*l*p*y-v*h*x*y+s*l*x*y+c*h*T*y-s*M*T*y-v*M*C*S+c*l*C*S+v*f*x*S-u*l*x*S-c*f*T*S+u*M*T*S+v*h*C*D-s*l*C*D-v*f*p*D+u*l*p*D+s*f*T*D-u*h*T*D-c*h*C*P+s*M*C*P+c*f*p*P-u*M*p*P-s*f*x*P+u*h*x*P},inverse:function(n){var u=o.determinant(n);if(!u)return n;var s=t(n,16),c=s[0],v=s[1],f=s[2],h=s[3],M=s[4],l=s[5],C=s[6],p=s[7],x=s[8],T=s[9],y=s[10],S=s[11],D=s[12],P=s[13],q=s[14],X=s[15];return[(C*S*P-p*y*P+p*T*q-l*S*q-C*T*X+l*y*X)/u,(h*y*P-f*S*P-h*T*q+v*S*q+f*T*X-v*y*X)/u,(f*p*P-h*C*P+h*l*q-v*p*q-f*l*X+v*C*X)/u,(h*C*T-f*p*T-h*l*y+v*p*y+f*l*S-v*C*S)/u,(p*y*D-C*S*D-p*x*q+M*S*q+C*x*X-M*y*X)/u,(f*S*D-h*y*D+h*x*q-c*S*q-f*x*X+c*y*X)/u,(h*C*D-f*p*D-h*M*q+c*p*q+f*M*X-c*C*X)/u,(f*p*x-h*C*x+h*M*y-c*p*y-f*M*S+c*C*S)/u,(l*S*D-p*T*D+p*x*P-M*S*P-l*x*X+M*T*X)/u,(h*T*D-v*S*D-h*x*P+c*S*P+v*x*X-c*T*X)/u,(v*p*D-h*l*D+h*M*P-c*p*P-v*M*X+c*l*X)/u,(h*l*x-v*p*x-h*M*T+c*p*T+v*M*S-c*l*S)/u,(C*T*D-l*y*D-C*x*P+M*y*P+l*x*q-M*T*q)/u,(v*y*D-f*T*D+f*x*P-c*y*P-v*x*q+c*T*q)/u,(f*l*D-v*C*D-f*M*P+c*C*P+v*M*q-c*l*q)/u,(v*C*x-f*l*x+f*M*T-c*C*T-v*M*y+c*l*y)/u]},transpose:function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},multiplyVectorByMatrix:function(n,o){var u=t(n,4),s=u[0],c=u[1],v=u[2],f=u[3];return[s*o[0]+c*o[4]+v*o[8]+f*o[12],s*o[1]+c*o[5]+v*o[9]+f*o[13],s*o[2]+c*o[6]+v*o[10]+f*o[14],s*o[3]+c*o[7]+v*o[11]+f*o[15]]},v3Length:function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])},v3Normalize:function(t,n){var u=1/(n||o.v3Length(t));return[t[0]*u,t[1]*u,t[2]*u]},v3Dot:function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]},v3Combine:function(t,n,o,u){return[o*t[0]+u*n[0],o*t[1]+u*n[1],o*t[2]+u*n[2]]},v3Cross:function(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]},quaternionToDegreesXYZ:function(n,u,s){var c=t(n,4),v=c[0],f=c[1],h=c[2],M=c[3],l=v*v,C=f*f,p=h*h,x=v*f+h*M,T=M*M+l+C+p,y=180/Math.PI;return x>.49999*T?[0,2*Math.atan2(v,M)*y,90]:x<-.49999*T?[0,-2*Math.atan2(v,M)*y,-90]:[o.roundTo3Places(Math.atan2(2*v*M-2*f*h,1-2*l-2*p)*y),o.roundTo3Places(Math.atan2(2*f*M-2*v*h,1-2*C-2*p)*y),o.roundTo3Places(Math.asin(2*v*f+2*h*M)*y)]},roundTo3Places:function(t){var n=t.toString().split('e');return.001*Math.round(n[0]+'e'+(n[1]?+n[1]-3:3))},decomposeMatrix:function(t){n(16===t.length,'Matrix decomposition needs a list of 3d matrix values, received %s',t);var u=[],s=[],c=[],v=[],f=[];if(t[15]){for(var h=[],M=[],l=0;l<4;l++){h.push([]);for(var C=0;C<4;C++){var p=t[4*l+C]/t[15];h[l].push(p),M.push(3===C?0:p)}}if(M[15]=1,o.determinant(M)){if(0!==h[0][3]||0!==h[1][3]||0!==h[2][3]){var x=[h[0][3],h[1][3],h[2][3],h[3][3]],T=o.inverse(M),y=o.transpose(T);u=o.multiplyVectorByMatrix(x,y)}else u[0]=u[1]=u[2]=0,u[3]=1;for(var S=0;S<3;S++)f[S]=h[3][S];for(var D=[],P=0;P<3;P++)D[P]=[h[P][0],h[P][1],h[P][2]];c[0]=o.v3Length(D[0]),D[0]=o.v3Normalize(D[0],c[0]),v[0]=o.v3Dot(D[0],D[1]),D[1]=o.v3Combine(D[1],D[0],1,-v[0]),v[0]=o.v3Dot(D[0],D[1]),D[1]=o.v3Combine(D[1],D[0],1,-v[0]),c[1]=o.v3Length(D[1]),D[1]=o.v3Normalize(D[1],c[1]),v[0]/=c[1],v[1]=o.v3Dot(D[0],D[2]),D[2]=o.v3Combine(D[2],D[0],1,-v[1]),v[2]=o.v3Dot(D[1],D[2]),D[2]=o.v3Combine(D[2],D[1],1,-v[2]),c[2]=o.v3Length(D[2]),D[2]=o.v3Normalize(D[2],c[2]),v[1]/=c[2],v[2]/=c[2];var q,X=o.v3Cross(D[1],D[2]);if(o.v3Dot(D[0],X)<0)for(var Y=0;Y<3;Y++)c[Y]*=-1,D[Y][0]*=-1,D[Y][1]*=-1,D[Y][2]*=-1;return s[0]=.5*Math.sqrt(Math.max(1+D[0][0]-D[1][1]-D[2][2],0)),s[1]=.5*Math.sqrt(Math.max(1-D[0][0]+D[1][1]-D[2][2],0)),s[2]=.5*Math.sqrt(Math.max(1-D[0][0]-D[1][1]+D[2][2],0)),s[3]=.5*Math.sqrt(Math.max(1+D[0][0]+D[1][1]+D[2][2],0)),D[2][1]>D[1][2]&&(s[0]=-s[0]),D[0][2]>D[2][0]&&(s[1]=-s[1]),D[1][0]>D[0][1]&&(s[2]=-s[2]),{rotationDegrees:q=s[0]<.001&&s[0]>=0&&s[1]<.001&&s[1]>=0?[0,0,o.roundTo3Places(180*Math.atan2(D[0][1],D[0][0])/Math.PI)]:o.quaternionToDegreesXYZ(s,h,D),perspective:u,quaternion:s,scale:c,skew:v,translation:f,rotate:q[2],rotateX:q[0],rotateY:q[1],scaleX:c[0],scaleY:c[1],translateX:f[0],translateY:f[1]}}}}};m.exports=o},87,[17,6]);
__d(function(g,r,i,a,m,e,d){'use strict';var t={width:void 0,height:void 0};m.exports=function(h,n){return(h=h||t)!==(n=n||t)&&(h.width!==n.width||h.height!==n.height)}},88,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),u=(r(d[2]),r(d[3]),r(d[4]),r(d[5]),(function(){function u(){t(this,u)}return n(u,null,[{key:"validateStyleProp",value:function(t,n,u){}},{key:"validateStyle",value:function(t,n){}},{key:"addValidStylePropTypes",value:function(t){}}]),u})());m.exports=u},89,[29,30,67,84,85,6]);
__d(function(g,r,i,a,m,e,d){'use strict';m.exports=function t(n){if(null!==n&&'object'==typeof n){if(!Array.isArray(n))return n;for(var f={},o=0,u=n.length;o<u;++o){var c=t(n[o]);if(c)for(var s in c)f[s]=c[s]}return f}}},90,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),f=t(r(d[1])),n=t(r(d[2])),u=r(d[3]),l=r(d[4]),c=u.forwardRef(function(t,c){return u.createElement(l.Provider,{value:!1},u.createElement(n.default,(0,f.default)({},t,{ref:c})))});c.displayName='View',m.exports=c},91,[1,16,92,59,203]);
__d(function(g,r,i,a,m,e,d){'use strict';var s=r(d[0]),t=r(d[1]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Commands=e.__INTERNAL_VIEW_CONFIG=void 0;t(r(d[2]));var _,o,C=s(r(d[3])),u=(r(d[4]),r(d[5]),r(d[6])),N=r(d[7]);g.RN$Bridgeless?(o={},u('RCTView',{uiViewClassName:'RCTView'}),_='RCTView'):_=N('RCTView');var l=o;e.__INTERNAL_VIEW_CONFIG=l;var v=(0,C.default)({supportedCommands:['hotspotUpdate','setPressed']});e.Commands=v;var R=_;e.default=R},92,[1,12,59,93,57,194,201,181]);
__d(function(g,r,i,a,m,e,d){'use strict';Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(d[0]);var t=function(t){var o={};return t.supportedCommands.forEach(function(t){o[t]=function(o){for(var u=arguments.length,f=new Array(u>1?u-1:0),c=1;c<u;c++)f[c-1]=arguments[c];(0,n.dispatchCommand)(o,t,f)}}),o};e.default=t},93,[94]);
__d(function(g,r,i,a,m,e,d){'use strict';var t;t=r(d[0]),m.exports=t},94,[95]);
__d(function(e,t,n,r,i,l,a){"use strict";var o=t(a[0]);t(a[1]);var u=t(a[2]),s=t(a[3]),c=t(a[4]);function f(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function d(e,t,n){for(var r=[];e;)r.push(e),e=f(e);for(e=r.length;0<e--;)t(r[e],"captured",n);for(e=0;e<r.length;e++)t(r[e],"bubbled",n)}function p(e,t,n,r,i,l,a,o,u){var s=Array.prototype.slice.call(arguments,3);try{t.apply(n,s)}catch(e){this.onError(e)}}var h=!1,m=null,g=!1,v=null,y={onError:function(e){h=!0,m=e}};function b(e,t,n,r,i,l,a,o,u){h=!1,m=null,p.apply(y,arguments)}function T(e,t,n,r,i,l,a,o,u){if(b.apply(this,arguments),h){if(!h)throw Error("clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.");var s=m;h=!1,m=null,g||(g=!0,v=s)}}var x=null,E=null,S=null;function w(e,t,n){var r=e.type||"unknown-event";e.currentTarget=S(n),T(r,t,void 0,e),e.currentTarget=null}function k(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))throw Error("executeDirectDispatch(...): Invalid `event`.");return e.currentTarget=t?S(n):null,t=t?t(e):null,e.currentTarget=null,e._dispatchListeners=null,e._dispatchInstances=null,t}function P(e,t){var n=e.stateNode;if(!n)return null;var r=x(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error("Expected `"+t+"` listener to be a function, instead got a value of `"+typeof n+"` type.");return n}function R(e,t){if(null==t)throw Error("accumulateInto(...): Accumulated items must not be null or undefined.");return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function _(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}function C(e,t,n){(t=P(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=R(n._dispatchListeners,t),n._dispatchInstances=R(n._dispatchInstances,e))}function N(e){e&&e.dispatchConfig.phasedRegistrationNames&&d(e._targetInst,C,e)}function z(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst;d(t=t?f(t):null,C,e)}}function I(e){if(e&&e.dispatchConfig.registrationName){var t=e._targetInst;if(t&&e&&e.dispatchConfig.registrationName){var n=P(t,e.dispatchConfig.registrationName);n&&(e._dispatchListeners=R(e._dispatchListeners,n),e._dispatchInstances=R(e._dispatchInstances,t))}}}function M(){return!0}function A(){return!1}function U(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?M:A,this.isPropagationStopped=A,this}function D(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function F(e){if(!(e instanceof this))throw Error("Trying to release an event instance into a pool of a different type.");e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Q(e){e.eventPool=[],e.getPooled=D,e.release=F}o(U.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=M)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=M)},persist:function(){this.isPersistent=M},isPersistent:A,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=A,this._dispatchInstances=this._dispatchListeners=null}}),U.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},U.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var i=new t;return o(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=o({},r.Interface,e),n.extend=r.extend,Q(n),n},Q(U);var O=U.extend({touchHistory:function(){return null}});function j(e){return"topTouchStart"===e}function H(e){return"topTouchMove"===e}var W=["topTouchStart"],L=["topTouchMove"],B=["topTouchCancel","topTouchEnd"],V=[],Y={touchBank:V,numberActiveTouches:0,indexOfSingleActiveTouch:-1,mostRecentTimeStamp:0};function q(e){return e.timeStamp||e.timestamp}function X(e){if(null==(e=e.identifier))throw Error("Touch object is missing identifier.");return e}function $(e){var t=X(e),n=V[t];n?(n.touchActive=!0,n.startPageX=e.pageX,n.startPageY=e.pageY,n.startTimeStamp=q(e),n.currentPageX=e.pageX,n.currentPageY=e.pageY,n.currentTimeStamp=q(e),n.previousPageX=e.pageX,n.previousPageY=e.pageY,n.previousTimeStamp=q(e)):(n={touchActive:!0,startPageX:e.pageX,startPageY:e.pageY,startTimeStamp:q(e),currentPageX:e.pageX,currentPageY:e.pageY,currentTimeStamp:q(e),previousPageX:e.pageX,previousPageY:e.pageY,previousTimeStamp:q(e)},V[t]=n),Y.mostRecentTimeStamp=q(e)}function K(e){var t=V[X(e)];t&&(t.touchActive=!0,t.previousPageX=t.currentPageX,t.previousPageY=t.currentPageY,t.previousTimeStamp=t.currentTimeStamp,t.currentPageX=e.pageX,t.currentPageY=e.pageY,t.currentTimeStamp=q(e),Y.mostRecentTimeStamp=q(e))}function G(e){var t=V[X(e)];t&&(t.touchActive=!1,t.previousPageX=t.currentPageX,t.previousPageY=t.currentPageY,t.previousTimeStamp=t.currentTimeStamp,t.currentPageX=e.pageX,t.currentPageY=e.pageY,t.currentTimeStamp=q(e),Y.mostRecentTimeStamp=q(e))}var J={recordTouchTrack:function(e,t){if(H(e))t.changedTouches.forEach(K);else if(j(e))t.changedTouches.forEach($),Y.numberActiveTouches=t.touches.length,1===Y.numberActiveTouches&&(Y.indexOfSingleActiveTouch=t.touches[0].identifier);else if(("topTouchEnd"===e||"topTouchCancel"===e)&&(t.changedTouches.forEach(G),Y.numberActiveTouches=t.touches.length,1===Y.numberActiveTouches))for(e=0;e<V.length;e++)if(null!=(t=V[e])&&t.touchActive){Y.indexOfSingleActiveTouch=e;break}},touchHistory:Y};function Z(e,t){if(null==t)throw Error("accumulate(...): Accumulated items must not be null or undefined.");return null==e?t:Array.isArray(e)?e.concat(t):Array.isArray(t)?[e].concat(t):[e,t]}var ee=null,te=0;function ne(e,t){var n=ee;ee=e,null!==ie.GlobalResponderHandler&&ie.GlobalResponderHandler.onChange(n,e,t)}var re={startShouldSetResponder:{phasedRegistrationNames:{bubbled:"onStartShouldSetResponder",captured:"onStartShouldSetResponderCapture"},dependencies:W},scrollShouldSetResponder:{phasedRegistrationNames:{bubbled:"onScrollShouldSetResponder",captured:"onScrollShouldSetResponderCapture"},dependencies:["topScroll"]},selectionChangeShouldSetResponder:{phasedRegistrationNames:{bubbled:"onSelectionChangeShouldSetResponder",captured:"onSelectionChangeShouldSetResponderCapture"},dependencies:["topSelectionChange"]},moveShouldSetResponder:{phasedRegistrationNames:{bubbled:"onMoveShouldSetResponder",captured:"onMoveShouldSetResponderCapture"},dependencies:L},responderStart:{registrationName:"onResponderStart",dependencies:W},responderMove:{registrationName:"onResponderMove",dependencies:L},responderEnd:{registrationName:"onResponderEnd",dependencies:B},responderRelease:{registrationName:"onResponderRelease",dependencies:B},responderTerminationRequest:{registrationName:"onResponderTerminationRequest",dependencies:[]},responderGrant:{registrationName:"onResponderGrant",dependencies:[]},responderReject:{registrationName:"onResponderReject",dependencies:[]},responderTerminate:{registrationName:"onResponderTerminate",dependencies:[]}},ie={_getResponder:function(){return ee},eventTypes:re,extractEvents:function(e,t,n,r){if(j(e))te+=1;else if("topTouchEnd"===e||"topTouchCancel"===e){if(!(0<=te))return null;--te}if(J.recordTouchTrack(e,n),t&&("topScroll"===e&&!n.responderIgnoreScroll||0<te&&"topSelectionChange"===e||j(e)||H(e))){var i=j(e)?re.startShouldSetResponder:H(e)?re.moveShouldSetResponder:"topSelectionChange"===e?re.selectionChangeShouldSetResponder:re.scrollShouldSetResponder;if(ee)e:{for(var l=ee,a=0,o=l;o;o=f(o))a++;o=0;for(var u=t;u;u=f(u))o++;for(;0<a-o;)l=f(l),a--;for(;0<o-a;)t=f(t),o--;for(;a--;){if(l===t||l===t.alternate)break e;l=f(l),t=f(t)}l=null}else l=t;t=l===ee,(l=O.getPooled(i,l,n,r)).touchHistory=J.touchHistory,_(l,t?z:N);e:{if(i=l._dispatchListeners,t=l._dispatchInstances,Array.isArray(i)){for(a=0;a<i.length&&!l.isPropagationStopped();a++)if(i[a](l,t[a])){i=t[a];break e}}else if(i&&i(l,t)){i=t;break e}i=null}if(l._dispatchInstances=null,l._dispatchListeners=null,l.isPersistent()||l.constructor.release(l),i&&i!==ee)if((l=O.getPooled(re.responderGrant,i,n,r)).touchHistory=J.touchHistory,_(l,I),t=!0===k(l),ee)if((a=O.getPooled(re.responderTerminationRequest,ee,n,r)).touchHistory=J.touchHistory,_(a,I),o=!a._dispatchListeners||k(a),a.isPersistent()||a.constructor.release(a),o){(a=O.getPooled(re.responderTerminate,ee,n,r)).touchHistory=J.touchHistory,_(a,I);var s=Z(s,[l,a]);ne(i,t)}else(i=O.getPooled(re.responderReject,i,n,r)).touchHistory=J.touchHistory,_(i,I),s=Z(s,i);else s=Z(s,l),ne(i,t);else s=null}else s=null;if(i=ee&&j(e),l=ee&&H(e),t=ee&&("topTouchEnd"===e||"topTouchCancel"===e),(i=i?re.responderStart:l?re.responderMove:t?re.responderEnd:null)&&((i=O.getPooled(i,ee,n,r)).touchHistory=J.touchHistory,_(i,I),s=Z(s,i)),i=ee&&"topTouchCancel"===e,e=ee&&!i&&("topTouchEnd"===e||"topTouchCancel"===e))e:{if((e=n.touches)&&0!==e.length)for(l=0;l<e.length;l++)if(null!==(t=e[l].target)&&void 0!==t&&0!==t){a=E(t);t:{for(t=ee;a;){if(t===a||t===a.alternate){t=!0;break t}a=f(a)}t=!1}if(t){e=!1;break e}}e=!0}return(e=i?re.responderTerminate:e?re.responderRelease:null)&&((n=O.getPooled(e,ee,n,r)).touchHistory=J.touchHistory,_(n,I),s=Z(s,n),ne(null)),s},GlobalResponderHandler:null,injection:{injectGlobalResponderHandler:function(e){ie.GlobalResponderHandler=e}}},le=null,ae={};function oe(){if(le)for(var e in ae){var t=ae[e],n=le.indexOf(e);if(!(-1<n))throw Error("EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `"+e+"`.");if(!se[n]){if(!t.extractEvents)throw Error("EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `"+e+"` does not.");for(var r in se[n]=t,n=t.eventTypes){var i=void 0,l=n[r],a=t,o=r;if(ce.hasOwnProperty(o))throw Error("EventPluginRegistry: More than one plugin attempted to publish the same event name, `"+o+"`.");ce[o]=l;var u=l.phasedRegistrationNames;if(u){for(i in u)u.hasOwnProperty(i)&&ue(u[i],a);i=!0}else l.registrationName?(ue(l.registrationName,a),i=!0):i=!1;if(!i)throw Error("EventPluginRegistry: Failed to publish event `"+r+"` for plugin `"+e+"`.")}}}}function ue(e,t){if(fe[e])throw Error("EventPluginRegistry: More than one plugin attempted to publish the same registration name, `"+e+"`.");fe[e]=t}var se=[],ce={},fe={},de=u.ReactNativeViewConfigRegistry.customBubblingEventTypes,pe=u.ReactNativeViewConfigRegistry.customDirectEventTypes;if(le)throw Error("EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React.");le=Array.prototype.slice.call(["ResponderEventPlugin","ReactNativeBridgeEventPlugin"]),oe();var he,me={ResponderEventPlugin:ie,ReactNativeBridgeEventPlugin:{eventTypes:{},extractEvents:function(e,t,n,r){if(null==t)return null;var i=de[e],l=pe[e];if(!i&&!l)throw Error('Unsupported top level event type "'+e+'" dispatched');if(e=U.getPooled(i||l,t,n,r),i)_(e,N);else{if(!l)return null;_(e,I)}return e}}},ge=!1;for(he in me)if(me.hasOwnProperty(he)){var ve=me[he];if(!ae.hasOwnProperty(he)||ae[he]!==ve){if(ae[he])throw Error("EventPluginRegistry: Cannot inject two different event plugins using the same name, `"+he+"`.");ae[he]=ve,ge=!0}}ge&&oe();var ye=new Map,be=new Map;function Te(e){return ye.get(e)||null}function xe(e,t){return e(t)}var Ee=!1;function Se(e,t){if(Ee)return e(t);Ee=!0;try{return xe(e,t)}finally{Ee=!1}}var we=null;function ke(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)w(e,t[r],n[r]);else t&&w(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}var Pe={};function Re(e,t,n){var r=n||Pe,i=Te(e),l=null;null!=i&&(l=i.stateNode),Se(function(){for(var e=l,n=null,a=0;a<se.length;a++){var o=se[a];o&&(o=o.extractEvents(t,i,r,e,1))&&(n=R(n,o))}if(null!==(e=n)&&(we=R(we,e)),e=we,we=null,e){if(_(e,ke),we)throw Error("processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented.");if(g)throw e=v,g=!1,v=null,e}})}u.RCTEventEmitter.register({receiveEvent:function(e,t,n){Re(e,t,n)},receiveTouches:function(e,t,n){if("topTouchEnd"===e||"topTouchCancel"===e){for(var r=[],i=0;i<n.length;i++){var l=n[i];r.push(t[l]),t[l]=null}for(i=n=0;i<t.length;i++)null!==(l=t[i])&&(t[n++]=l);t.length=n}else for(r=[],i=0;i<n.length;i++)r.push(t[n[i]]);for(n=0;n<r.length;n++){(i=r[n]).changedTouches=r,i.touches=t,l=null;var a=i.target;null===a||void 0===a||1>a||(l=a),Re(l,e,i)}}}),x=function(e){return be.get(e._nativeTag)||null},E=Te,S=function(e){var t=(e=e.stateNode)._nativeTag;if(void 0===t&&(t=(e=e.canonical)._nativeTag),!t)throw Error("All native instances should have a tag.");return e},ie.injection.injectGlobalResponderHandler({onChange:function(e,t,n){null!==t?u.UIManager.setJSResponder(t.stateNode._nativeTag,n):u.UIManager.clearJSResponder()}});var _e=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;_e.hasOwnProperty("ReactCurrentDispatcher")||(_e.ReactCurrentDispatcher={current:null}),_e.hasOwnProperty("ReactCurrentBatchConfig")||(_e.ReactCurrentBatchConfig={suspense:null});var Ce="function"==typeof Symbol&&Symbol.for,Ne=Ce?Symbol.for("react.element"):60103,ze=Ce?Symbol.for("react.portal"):60106,Ie=Ce?Symbol.for("react.fragment"):60107,Me=Ce?Symbol.for("react.strict_mode"):60108,Ae=Ce?Symbol.for("react.profiler"):60114,Ue=Ce?Symbol.for("react.provider"):60109,De=Ce?Symbol.for("react.context"):60110,Fe=Ce?Symbol.for("react.concurrent_mode"):60111,Qe=Ce?Symbol.for("react.forward_ref"):60112,Oe=Ce?Symbol.for("react.suspense"):60113,je=Ce?Symbol.for("react.suspense_list"):60120,He=Ce?Symbol.for("react.memo"):60115,We=Ce?Symbol.for("react.lazy"):60116,Le=Ce?Symbol.for("react.block"):60121,Be="function"==typeof Symbol&&Symbol.iterator;function Ve(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Be&&e[Be]||e["@@iterator"])?e:null}function Ye(e){if(-1===e._status){var t=e._result;t||(t=e._ctor),t=t(),e._status=0,e._result=t,t.then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)})}}function qe(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Ie:return"Fragment";case ze:return"Portal";case Ae:return"Profiler";case Me:return"StrictMode";case Oe:return"Suspense";case je:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case De:return(e.displayName||"Context")+".Consumer";case Ue:return(e._context.displayName||"Context")+".Provider";case Qe:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case He:return qe(e.type);case Le:return qe(e.render);case We:if(e=1===e._status?e._result:null)return qe(e)}return null}function Xe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(Xe(e)!==e)throw Error("Unable to find node on an unmounted component.")}function Ke(e){var t=e.alternate;if(!t){if(null===(t=Xe(e)))throw Error("Unable to find node on an unmounted component.");return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var l=i.alternate;if(null===l){if(null!==(r=i.return)){n=r;continue}break}if(i.child===l.child){for(l=i.child;l;){if(l===n)return $e(i),e;if(l===r)return $e(i),t;l=l.sibling}throw Error("Unable to find node on an unmounted component.")}if(n.return!==r.return)n=i,r=l;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=l;break}if(o===r){a=!0,r=i,n=l;break}o=o.sibling}if(!a){for(o=l.child;o;){if(o===n){a=!0,n=l,r=i;break}if(o===r){a=!0,r=l,n=i;break}o=o.sibling}if(!a)throw Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(n.alternate!==r)throw Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(3!==n.tag)throw Error("Unable to find node on an unmounted component.");return n.stateNode.current===n?e:t}function Ge(e){if(!(e=Ke(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var Je={},Ze=null,et=0,tt={unsafelyIgnoreFunctions:!0};function nt(e,t){return"object"!=typeof t||null===t||u.deepDiffer(e,t,tt)}function rt(e,t,n){if(Array.isArray(t))for(var r=t.length;r--&&0<et;)rt(e,t[r],n);else if(t&&0<et)for(r in Ze)if(Ze[r]){var i=t[r];if(void 0!==i){var l=n[r];l&&("function"==typeof i&&(i=!0),void 0===i&&(i=null),"object"!=typeof l?e[r]=i:"function"!=typeof l.diff&&"function"!=typeof l.process||(i="function"==typeof l.process?l.process(i):i,e[r]=i),Ze[r]=!1,et--)}}}function it(e,t,n,r){if(!e&&t===n)return e;if(!t||!n)return n?lt(e,n,r):t?at(e,t,r):e;if(!Array.isArray(t)&&!Array.isArray(n))return ot(e,t,n,r);if(Array.isArray(t)&&Array.isArray(n)){var i,l=t.length<n.length?t.length:n.length;for(i=0;i<l;i++)e=it(e,t[i],n[i],r);for(;i<t.length;i++)e=at(e,t[i],r);for(;i<n.length;i++)e=lt(e,n[i],r);return e}return Array.isArray(t)?ot(e,u.flattenStyle(t),n,r):ot(e,t,u.flattenStyle(n),r)}function lt(e,t,n){if(!t)return e;if(!Array.isArray(t))return ot(e,Je,t,n);for(var r=0;r<t.length;r++)e=lt(e,t[r],n);return e}function at(e,t,n){if(!t)return e;if(!Array.isArray(t))return ot(e,t,Je,n);for(var r=0;r<t.length;r++)e=at(e,t[r],n);return e}function ot(e,t,n,r){var i,l;for(l in n)if(i=r[l]){var a=t[l],o=n[l];"function"==typeof o&&(o=!0,"function"==typeof a&&(a=!0)),void 0===o&&(o=null,void 0===a&&(a=null)),Ze&&(Ze[l]=!1),e&&void 0!==e[l]?"object"!=typeof i?e[l]=o:"function"!=typeof i.diff&&"function"!=typeof i.process||(i="function"==typeof i.process?i.process(o):o,e[l]=i):a!==o&&("object"!=typeof i?nt(a,o)&&((e||(e={}))[l]=o):"function"==typeof i.diff||"function"==typeof i.process?(void 0===a||("function"==typeof i.diff?i.diff(a,o):nt(a,o)))&&(i="function"==typeof i.process?i.process(o):o,(e||(e={}))[l]=i):(Ze=null,et=0,e=it(e,a,o,i),0<et&&e&&(rt(e,o,i),Ze=null)))}for(var u in t)void 0===n[u]&&(!(i=r[u])||e&&void 0!==e[u]||void 0!==(a=t[u])&&("object"!=typeof i||"function"==typeof i.diff||"function"==typeof i.process?((e||(e={}))[u]=null,Ze||(Ze={}),Ze[u]||(Ze[u]=!0,et++)):e=at(e,a,i)));return e}function ut(e,t){return function(){if(t&&("boolean"!=typeof e.__isMounted||e.__isMounted))return t.apply(e,arguments)}}var st=(function(){function e(e,t){this._nativeTag=e,this._children=[],this.viewConfig=t}var t=e.prototype;return t.blur=function(){u.TextInputState.blurTextInput(this)},t.focus=function(){u.TextInputState.focusTextInput(this)},t.measure=function(e){u.UIManager.measure(this._nativeTag,ut(this,e))},t.measureInWindow=function(e){u.UIManager.measureInWindow(this._nativeTag,ut(this,e))},t.measureLayout=function(e,t,n){if("number"==typeof e)var r=e;else e._nativeTag&&(r=e._nativeTag);null!=r&&u.UIManager.measureLayout(this._nativeTag,r,ut(this,n),ut(this,t))},t.setNativeProps=function(e){null!=(e=ot(null,Je,e,this.viewConfig.validAttributes))&&u.UIManager.updateView(this._nativeTag,this.viewConfig.uiViewClassName,e)},e})();function ct(){throw Error("The current renderer does not support hydration. This error is likely caused by a bug in React. Please file an issue.")}var ft=u.ReactNativeViewConfigRegistry.get,dt={},pt=3;function ht(){var e=pt;return 1==e%10&&(e+=2),pt=e+2,e}function mt(e){if("number"==typeof e)ye.delete(e),be.delete(e);else{var t=e._nativeTag;ye.delete(t),be.delete(t),e._children.forEach(mt)}}function gt(e){if(0===e._children.length)return!1;var t=e._children.map(function(e){return"number"==typeof e?e:e._nativeTag});return u.UIManager.setChildren(e._nativeTag,t),!1}var vt=setTimeout,yt=clearTimeout,bt=[],Tt=-1;function xt(e){0>Tt||(e.current=bt[Tt],bt[Tt]=null,Tt--)}function Et(e,t){bt[++Tt]=e.current,e.current=t}var St={},wt={current:St},kt={current:!1},Pt=St;function Rt(e,t){var n=e.type.contextTypes;if(!n)return St;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,l={};for(i in n)l[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function _t(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ct(){xt(kt),xt(wt)}function Nt(e,t,n){if(wt.current!==St)throw Error("Unexpected context found on stack. This error is likely caused by a bug in React. Please file an issue.");Et(wt,t),Et(kt,n)}function zt(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error((qe(t)||"Unknown")+'.getChildContext(): key "'+i+'" is not defined in childContextTypes.');return o({},n,{},r)}function It(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||St,Pt=wt.current,Et(wt,e),Et(kt,kt.current),!0}function Mt(e,t,n){var r=e.stateNode;if(!r)throw Error("Expected to have an instance by this point. This error is likely caused by a bug in React. Please file an issue.");n?(e=zt(e,t,Pt),r.__reactInternalMemoizedMergedChildContext=e,xt(kt),xt(wt),Et(wt,e)):xt(kt),Et(kt,n)}var At=c.unstable_runWithPriority,Ut=c.unstable_scheduleCallback,Dt=c.unstable_cancelCallback,Ft=c.unstable_requestPaint,Qt=c.unstable_now,Ot=c.unstable_getCurrentPriorityLevel,jt=c.unstable_ImmediatePriority,Ht=c.unstable_UserBlockingPriority,Wt=c.unstable_NormalPriority,Lt=c.unstable_LowPriority,Bt=c.unstable_IdlePriority,Vt={},Yt=c.unstable_shouldYield,qt=void 0!==Ft?Ft:function(){},Xt=null,$t=null,Kt=!1,Gt=Qt(),Jt=1e4>Gt?Qt:function(){return Qt()-Gt};function Zt(){switch(Ot()){case jt:return 99;case Ht:return 98;case Wt:return 97;case Lt:return 96;case Bt:return 95;default:throw Error("Unknown priority level.")}}function en(e){switch(e){case 99:return jt;case 98:return Ht;case 97:return Wt;case 96:return Lt;case 95:return Bt;default:throw Error("Unknown priority level.")}}function tn(e,t){return e=en(e),At(e,t)}function nn(e,t,n){return e=en(e),Ut(e,t,n)}function rn(e){return null===Xt?(Xt=[e],$t=Ut(jt,an)):Xt.push(e),Vt}function ln(){if(null!==$t){var e=$t;$t=null,Dt(e)}an()}function an(){if(!Kt&&null!==Xt){Kt=!0;var e=0;try{var t=Xt;tn(99,function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}}),Xt=null}catch(t){throw null!==Xt&&(Xt=Xt.slice(e+1)),Ut(jt,ln),t}finally{Kt=!1}}}var on="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},un=Object.prototype.hasOwnProperty;function sn(e,t){if(on(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!un.call(t,n[r])||!on(e[n[r]],t[n[r]]))return!1;return!0}var cn=/^(.*)[\\\/]/;function fn(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,l=qe(e.type);n=null,r&&(n=qe(r.type)),r=l,l="",i?l=" (at "+i.fileName.replace(cn,"")+":"+i.lineNumber+")":n&&(l=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+l}t+=n,e=e.return}while(e);return t}function dn(e,t){if(e&&e.defaultProps)for(var n in t=o({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var pn={current:null},hn=null,mn=null,gn=null;function vn(){gn=mn=hn=null}function yn(e){var t=pn.current;xt(pn),e.type._context._currentValue=t}function bn(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function Tn(e,t){hn=e,gn=mn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Or=!0),e.firstContext=null)}function xn(e,t){if(gn!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(gn=e,t=1073741823),t={context:e,observedBits:t,next:null},null===mn){if(null===hn)throw Error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");mn=t,hn.dependencies={expirationTime:0,firstContext:t,responders:null}}else mn=mn.next=t;return e._currentValue}var En=!1;function Sn(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function wn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function kn(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function Pn(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function Rn(e,t){var n=e.alternate;null!==n&&wn(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function _n(e,t,n,r){var i=e.updateQueue;En=!1;var l=i.baseQueue,a=i.shared.pending;if(null!==a){if(null!==l){var u=l.next;l.next=a.next,a.next=u}l=a,i.shared.pending=null,null!==(u=e.alternate)&&(null!==(u=u.updateQueue)&&(u.baseQueue=a))}if(null!==l){u=l.next;var s=i.baseState,c=0,f=null,d=null,p=null;if(null!==u)for(var h=u;;){if((a=h.expirationTime)<r){var m={expirationTime:h.expirationTime,suspenseConfig:h.suspenseConfig,tag:h.tag,payload:h.payload,callback:h.callback,next:null};null===p?(d=p=m,f=s):p=p.next=m,a>c&&(c=a)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:h.suspenseConfig,tag:h.tag,payload:h.payload,callback:h.callback,next:null}),wl(a,h.suspenseConfig);e:{var g=e,v=h;switch(a=t,m=n,v.tag){case 1:if("function"==typeof(g=v.payload)){s=g.call(m,s,a);break e}s=g;break e;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null===(a="function"==typeof(g=v.payload)?g.call(m,s,a):g)||void 0===a)break e;s=o({},s,a);break e;case 2:En=!0}}null!==h.callback&&(e.effectTag|=32,null===(a=i.effects)?i.effects=[h]:a.push(h))}if(null===(h=h.next)||h===u){if(null===(a=i.shared.pending))break;h=l.next=a.next,a.next=u,i.baseQueue=l=a,i.shared.pending=null}}null===p?f=s:p.next=d,i.baseState=f,i.baseQueue=p,kl(c),e.expirationTime=c,e.memoizedState=s}}function Cn(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,"function"!=typeof i)throw Error("Invalid argument passed as callback. Expected a function. Instead received: "+i);i.call(n)}}}var Nn=_e.ReactCurrentBatchConfig,zn=(new s.Component).refs;function In(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:o({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var Mn={isMounted:function(e){return!!(e=e._reactInternalFiber)&&Xe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=pl(),i=Nn.suspense;(i=kn(r=hl(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),Pn(e,i),ml(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=pl(),i=Nn.suspense;(i=kn(r=hl(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),Pn(e,i),ml(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=pl(),r=Nn.suspense;(r=kn(n=hl(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),Pn(e,r),ml(e,n)}};function An(e,t,n,r,i,l,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,l,a):!t.prototype||!t.prototype.isPureReactComponent||(!sn(n,r)||!sn(i,l))}function Un(e,t,n){var r=!1,i=St,l=t.contextType;return"object"==typeof l&&null!==l?l=xn(l):(i=_t(t)?Pt:wt.current,l=(r=null!==(r=t.contextTypes)&&void 0!==r)?Rt(e,i):St),t=new t(n,l),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Mn,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=l),t}function Dn(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Mn.enqueueReplaceState(t,t.state,null)}function Fn(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=zn,Sn(e);var l=t.contextType;"object"==typeof l&&null!==l?i.context=xn(l):(l=_t(t)?Pt:wt.current,i.context=Rt(e,l)),_n(e,n,i,r),i.state=e.memoizedState,"function"==typeof(l=t.getDerivedStateFromProps)&&(In(e,t,l,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Mn.enqueueReplaceState(i,i.state,null),_n(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var Qn=Array.isArray;function On(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error("Function components cannot have string refs. We recommend using useRef() instead. Learn more about using refs safely here: https://fb.me/react-strict-mode-string-ref");var r=n.stateNode}if(!r)throw Error("Missing owner for string ref "+e+". This error is likely caused by a bug in React. Please file an issue.");var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===zn&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error("Expected ref to be a function, a string, an object returned by React.createRef(), or null.");if(!n._owner)throw Error("Element ref was specified as a string ("+e+") but no owner was set. This could happen for one of the following reasons:\n1. You may be adding a ref to a function component\n2. You may be adding a ref to a component that was not created inside a component's render method\n3. You have multiple copies of React loaded\nSee https://fb.me/react-refs-must-have-owner for more information.")}return e}function jn(e,t){if("textarea"!==e.type)throw Error("Objects are not valid as a React child (found: "+("[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t)+").")}function Hn(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=ql(e,t)).index=0,e.sibling=null,e}function l(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function o(e,t,n,r){return null===t||6!==t.tag?((t=Kl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=On(e,t,n),r.return=e,r):((r=Xl(n.type,n.key,n.props,null,e.mode,r)).ref=On(e,t,n),r.return=e,r)}function s(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Gl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function c(e,t,n,r,l){return null===t||7!==t.tag?((t=$l(n,e.mode,r,l)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Kl(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Ne:return(n=Xl(t.type,t.key,t.props,null,e.mode,n)).ref=On(e,null,t),n.return=e,n;case ze:return(t=Gl(t,e.mode,n)).return=e,t}if(Qn(t)||Ve(t))return(t=$l(t,e.mode,n,null)).return=e,t;jn(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:o(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Ne:return n.key===i?n.type===Ie?c(e,t,n.props.children,r,i):u(e,t,n,r):null;case ze:return n.key===i?s(e,t,n,r):null}if(Qn(n)||Ve(n))return null!==i?null:c(e,t,n,r,null);jn(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return o(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Ne:return e=e.get(null===r.key?n:r.key)||null,r.type===Ie?c(t,e,r.props.children,i,r.key):u(t,e,r,i);case ze:return s(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Qn(r)||Ve(r))return c(t,e=e.get(n)||null,r,i,null);jn(t,r)}return null}function h(i,a,o,u){for(var s=null,c=null,h=a,m=a=0,g=null;null!==h&&m<o.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=d(i,h,o[m],u);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),a=l(v,a,m),null===c?s=v:c.sibling=v,c=v,h=g}if(m===o.length)return n(i,h),s;if(null===h){for(;m<o.length;m++)null!==(h=f(i,o[m],u))&&(a=l(h,a,m),null===c?s=h:c.sibling=h,c=h);return s}for(h=r(i,h);m<o.length;m++)null!==(g=p(h,i,m,o[m],u))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),a=l(g,a,m),null===c?s=g:c.sibling=g,c=g);return e&&h.forEach(function(e){return t(i,e)}),s}function m(i,a,o,u){var s=Ve(o);if("function"!=typeof s)throw Error("An object is not an iterable. This error is likely caused by a bug in React. Please file an issue.");if(null==(o=s.call(o)))throw Error("An iterable object provided no iterator.");for(var c=s=null,h=a,m=a=0,g=null,v=o.next();null!==h&&!v.done;m++,v=o.next()){h.index>m?(g=h,h=null):g=h.sibling;var y=d(i,h,v.value,u);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),a=l(y,a,m),null===c?s=y:c.sibling=y,c=y,h=g}if(v.done)return n(i,h),s;if(null===h){for(;!v.done;m++,v=o.next())null!==(v=f(i,v.value,u))&&(a=l(v,a,m),null===c?s=v:c.sibling=v,c=v);return s}for(h=r(i,h);!v.done;m++,v=o.next())null!==(v=p(h,i,m,v.value,u))&&(e&&null!==v.alternate&&h.delete(null===v.key?m:v.key),a=l(v,a,m),null===c?s=v:c.sibling=v,c=v);return e&&h.forEach(function(e){return t(i,e)}),s}return function(e,r,l,o){var u="object"==typeof l&&null!==l&&l.type===Ie&&null===l.key;u&&(l=l.props.children);var s="object"==typeof l&&null!==l;if(s)switch(l.$$typeof){case Ne:e:{for(s=l.key,u=r;null!==u;){if(u.key===s){switch(u.tag){case 7:if(l.type===Ie){n(e,u.sibling),(r=i(u,l.props.children)).return=e,e=r;break e}break;default:if(u.elementType===l.type){n(e,u.sibling),(r=i(u,l.props)).ref=On(e,u,l),r.return=e,e=r;break e}}n(e,u);break}t(e,u),u=u.sibling}l.type===Ie?((r=$l(l.props.children,e.mode,o,l.key)).return=e,e=r):((o=Xl(l.type,l.key,l.props,null,e.mode,o)).ref=On(e,r,l),o.return=e,e=o)}return a(e);case ze:e:{for(u=l.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===l.containerInfo&&r.stateNode.implementation===l.implementation){n(e,r.sibling),(r=i(r,l.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Gl(l,e.mode,o)).return=e,e=r}return a(e)}if("string"==typeof l||"number"==typeof l)return l=""+l,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,l)).return=e,e=r):(n(e,r),(r=Kl(l,e.mode,o)).return=e,e=r),a(e);if(Qn(l))return h(e,r,l,o);if(Ve(l))return m(e,r,l,o);if(s&&jn(e,l),void 0===l&&!u)switch(e.tag){case 1:case 0:throw e=e.type,Error((e.displayName||e.name||"Component")+"(...): Nothing was returned from render. This usually means a return statement is missing. Or, to render nothing, return null.")}return n(e,r)}}var Wn=Hn(!0),Ln=Hn(!1),Bn={},Vn={current:Bn},Yn={current:Bn},qn={current:Bn};function Xn(e){if(e===Bn)throw Error("Expected host context to exist. This error is likely caused by a bug in React. Please file an issue.");return e}function $n(e,t){Et(qn,t),Et(Yn,e),Et(Vn,Bn),xt(Vn),Et(Vn,{isInAParentText:!1})}function Kn(){xt(Vn),xt(Yn),xt(qn)}function Gn(e){Xn(qn.current);var t=Xn(Vn.current),n=e.type;n="AndroidTextInput"===n||"RCTMultilineTextInputView"===n||"RCTSinglelineTextInputView"===n||"RCTText"===n||"RCTVirtualText"===n,t!==(n=t.isInAParentText!==n?{isInAParentText:n}:t)&&(Et(Yn,e),Et(Vn,n))}function Jn(e){Yn.current===e&&(xt(Vn),xt(Yn))}var Zn={current:0};function er(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===n.dehydrated||ct()||ct()))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function tr(e,t){return{responder:e,props:t}}var nr=_e.ReactCurrentDispatcher,rr=_e.ReactCurrentBatchConfig,ir=0,lr=null,ar=null,or=null,ur=!1;function sr(){throw Error("Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://fb.me/react-invalid-hook-call for tips about how to debug and fix this problem.")}function cr(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!on(e[n],t[n]))return!1;return!0}function fr(e,t,n,r,i,l){if(ir=l,lr=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,nr.current=null===e||null===e.memoizedState?Ur:Dr,e=n(r,i),t.expirationTime===ir){l=0;do{if(t.expirationTime=0,!(25>l))throw Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");l+=1,or=ar=null,t.updateQueue=null,nr.current=Fr,e=n(r,i)}while(t.expirationTime===ir)}if(nr.current=Ar,t=null!==ar&&null!==ar.next,ir=0,or=ar=lr=null,ur=!1,t)throw Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return e}function dr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===or?lr.memoizedState=or=e:or=or.next=e,or}function pr(){if(null===ar){var e=lr.alternate;e=null!==e?e.memoizedState:null}else e=ar.next;var t=null===or?lr.memoizedState:or.next;if(null!==t)or=t,ar=e;else{if(null===e)throw Error("Rendered more hooks than during the previous render.");e={memoizedState:(ar=e).memoizedState,baseState:ar.baseState,baseQueue:ar.baseQueue,queue:ar.queue,next:null},null===or?lr.memoizedState=or=e:or=or.next=e}return or}function hr(e,t){return"function"==typeof t?t(e):t}function mr(e){var t=pr(),n=t.queue;if(null===n)throw Error("Should have a queue. This is likely a bug in React. Please file an issue.");n.lastRenderedReducer=e;var r=ar,i=r.baseQueue,l=n.pending;if(null!==l){if(null!==i){var a=i.next;i.next=l.next,l.next=a}r.baseQueue=i=l,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var o=a=l=null,u=i;do{var s=u.expirationTime;if(s<ir){var c={expirationTime:u.expirationTime,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===o?(a=o=c,l=r):o=o.next=c,s>lr.expirationTime&&(lr.expirationTime=s,kl(s))}else null!==o&&(o=o.next={expirationTime:1073741823,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),wl(s,u.suspenseConfig),r=u.eagerReducer===e?u.eagerState:e(r,u.action);u=u.next}while(null!==u&&u!==i);null===o?l=r:o.next=a,on(r,t.memoizedState)||(Or=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=o,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function gr(e){var t=pr(),n=t.queue;if(null===n)throw Error("Should have a queue. This is likely a bug in React. Please file an issue.");n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,l=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{l=e(l,a.action),a=a.next}while(a!==i);on(l,t.memoizedState)||(Or=!0),t.memoizedState=l,null===t.baseQueue&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function vr(e){var t=dr();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:hr,lastRenderedState:e}).dispatch=Ir.bind(null,lr,e),[t.memoizedState,e]}function yr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=lr.updateQueue)?(t={lastEffect:null},lr.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function br(){return pr().memoizedState}function Tr(e,t,n,r){var i=dr();lr.effectTag|=e,i.memoizedState=yr(1|t,n,void 0,void 0===r?null:r)}function xr(e,t,n,r){var i=pr();r=void 0===r?null:r;var l=void 0;if(null!==ar){var a=ar.memoizedState;if(l=a.destroy,null!==r&&cr(r,a.deps))return void yr(t,n,l,r)}lr.effectTag|=e,i.memoizedState=yr(1|t,n,l,r)}function Er(e,t){return Tr(516,4,e,t)}function Sr(e,t){return xr(516,4,e,t)}function wr(e,t){return xr(4,2,e,t)}function kr(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Pr(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,xr(4,2,kr.bind(null,t,e),n)}function Rr(){}function _r(e,t){return dr().memoizedState=[e,void 0===t?null:t],e}function Cr(e,t){var n=pr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&cr(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Nr(e,t){var n=pr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&cr(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function zr(e,t,n){var r=Zt();tn(98>r?98:r,function(){e(!0)}),tn(97<r?97:r,function(){var r=rr.suspense;rr.suspense=void 0===t?null:t;try{e(!1),n()}finally{rr.suspense=r}})}function Ir(e,t,n){var r=pl(),i=Nn.suspense;i={expirationTime:r=hl(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var l=t.pending;if(null===l?i.next=i:(i.next=l.next,l.next=i),t.pending=i,l=e.alternate,e===lr||null!==l&&l===lr)ur=!0,i.expirationTime=ir,lr.expirationTime=ir;else{if(0===e.expirationTime&&(null===l||0===l.expirationTime)&&null!==(l=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=l(a,n);if(i.eagerReducer=l,i.eagerState=o,on(o,a))return}catch(e){}ml(e,r)}}function Mr(){}var Ar={readContext:xn,useCallback:sr,useContext:sr,useEffect:sr,useImperativeHandle:sr,useLayoutEffect:sr,useMemo:sr,useReducer:sr,useRef:sr,useState:sr,useDebugValue:sr,useResponder:sr,useDeferredValue:sr,useTransition:sr,useEvent:sr},Ur={readContext:xn,useCallback:_r,useContext:xn,useEffect:Er,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Tr(4,2,kr.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Tr(4,2,e,t)},useMemo:function(e,t){var n=dr();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=dr();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ir.bind(null,lr,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},dr().memoizedState=e},useState:vr,useDebugValue:Rr,useResponder:tr,useDeferredValue:function(e,t){var n=vr(e),r=n[0],i=n[1];return Er(function(){var n=rr.suspense;rr.suspense=void 0===t?null:t;try{i(e)}finally{rr.suspense=n}},[e,t]),r},useTransition:function(e){var t=vr(!1),n=t[0];return t=t[1],[_r(zr.bind(null,t,e),[t,e]),n]},useEvent:function(){}},Dr={readContext:xn,useCallback:Cr,useContext:xn,useEffect:Sr,useImperativeHandle:Pr,useLayoutEffect:wr,useMemo:Nr,useReducer:mr,useRef:br,useState:function(){return mr(hr)},useDebugValue:Rr,useResponder:tr,useDeferredValue:function(e,t){var n=mr(hr),r=n[0],i=n[1];return Sr(function(){var n=rr.suspense;rr.suspense=void 0===t?null:t;try{i(e)}finally{rr.suspense=n}},[e,t]),r},useTransition:function(e){var t=mr(hr),n=t[0];return t=t[1],[Cr(zr.bind(null,t,e),[t,e]),n]},useEvent:Mr},Fr={readContext:xn,useCallback:Cr,useContext:xn,useEffect:Sr,useImperativeHandle:Pr,useLayoutEffect:wr,useMemo:Nr,useReducer:gr,useRef:br,useState:function(){return gr(hr)},useDebugValue:Rr,useResponder:tr,useDeferredValue:function(e,t){var n=gr(hr),r=n[0],i=n[1];return Sr(function(){var n=rr.suspense;rr.suspense=void 0===t?null:t;try{i(e)}finally{rr.suspense=n}},[e,t]),r},useTransition:function(e){var t=gr(hr),n=t[0];return t=t[1],[Cr(zr.bind(null,t,e),[t,e]),n]},useEvent:Mr},Qr=_e.ReactCurrentOwner,Or=!1;function jr(e,t,n,r){t.child=null===e?Ln(t,null,n,r):Wn(t,e.child,n,r)}function Hr(e,t,n,r,i){n=n.render;var l=t.ref;return Tn(t,i),r=fr(e,t,n,r,l,i),null===e||Or?(t.effectTag|=1,jr(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ii(e,t,i))}function Wr(e,t,n,r,i,l){if(null===e){var a=n.type;return"function"!=typeof a||Vl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Xl(n.type,null,r,null,t.mode,l)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Lr(e,t,a,r,i,l))}return a=e.child,i<l&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:sn)(i,r)&&e.ref===t.ref)?ii(e,t,l):(t.effectTag|=1,(e=ql(a,r)).ref=t.ref,e.return=t,t.child=e)}function Lr(e,t,n,r,i,l){return null!==e&&sn(e.memoizedProps,r)&&e.ref===t.ref&&(Or=!1,i<l)?(t.expirationTime=e.expirationTime,ii(e,t,l)):Vr(e,t,n,r,l)}function Br(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Vr(e,t,n,r,i){var l=_t(n)?Pt:wt.current;return l=Rt(t,l),Tn(t,i),n=fr(e,t,n,r,l,i),null===e||Or?(t.effectTag|=1,jr(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ii(e,t,i))}function Yr(e,t,n,r,i){if(_t(n)){var l=!0;It(t)}else l=!1;if(Tn(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Un(t,n,r),Fn(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var u=a.context,s=n.contextType;"object"==typeof s&&null!==s?s=xn(s):s=Rt(t,s=_t(n)?Pt:wt.current);var c=n.getDerivedStateFromProps,f="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;f||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==r||u!==s)&&Dn(t,a,r,s),En=!1;var d=t.memoizedState;a.state=d,_n(t,r,a,i),u=t.memoizedState,o!==r||d!==u||kt.current||En?("function"==typeof c&&(In(t,n,c,r),u=t.memoizedState),(o=En||An(t,n,o,r,d,u,s))?(f||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.effectTag|=4)):("function"==typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=s,r=o):("function"==typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,wn(e,t),o=t.memoizedProps,a.props=t.type===t.elementType?o:dn(t.type,o),u=a.context,"object"==typeof(s=n.contextType)&&null!==s?s=xn(s):s=Rt(t,s=_t(n)?Pt:wt.current),(f="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==r||u!==s)&&Dn(t,a,r,s),En=!1,u=t.memoizedState,a.state=u,_n(t,r,a,i),d=t.memoizedState,o!==r||u!==d||kt.current||En?("function"==typeof c&&(In(t,n,c,r),d=t.memoizedState),(c=En||An(t,n,o,r,u,d,s))?(f||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,d,s),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,d,s)),"function"==typeof a.componentDidUpdate&&(t.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=d),a.props=r,a.state=d,a.context=s,r=c):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return qr(e,t,n,r,l,i)}function qr(e,t,n,r,i,l){Br(e,t);var a=0!=(64&t.effectTag);if(!r&&!a)return i&&Mt(t,n,!1),ii(e,t,l);r=t.stateNode,Qr.current=t;var o=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=Wn(t,e.child,null,l),t.child=Wn(t,null,o,l)):jr(e,t,o,l),t.memoizedState=r.state,i&&Mt(t,n,!0),t.child}function Xr(e){var t=e.stateNode;t.pendingContext?Nt(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Nt(0,t.context,!1),$n(e,t.containerInfo)}var $r,Kr,Gr,Jr,Zr={dehydrated:null,retryTime:0};function ei(e,t,n){var r,i=t.mode,l=t.pendingProps,a=Zn.current,o=!1;if((r=0!=(64&t.effectTag))||(r=0!=(2&a)&&(null===e||null!==e.memoizedState)),r?(o=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===l.fallback||!0===l.unstable_avoidThisFallback||(a|=1),Et(Zn,1&a),null===e){if(o){if(o=l.fallback,(l=$l(null,i,0,null)).return=t,0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,l.child=e;null!==e;)e.return=l,e=e.sibling;return(n=$l(o,i,n,null)).return=t,l.sibling=n,t.memoizedState=Zr,t.child=l,n}return i=l.children,t.memoizedState=null,t.child=Ln(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,o){if(l=l.fallback,(n=ql(e,e.pendingProps)).return=t,0==(2&t.mode)&&(o=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=o;null!==o;)o.return=n,o=o.sibling;return(i=ql(i,l)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=Zr,t.child=n,i}return n=Wn(t,e.child,l.children,n),t.memoizedState=null,t.child=n}if(e=e.child,o){if(o=l.fallback,(l=$l(null,i,0,null)).return=t,l.child=e,null!==e&&(e.return=l),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,l.child=e;null!==e;)e.return=l,e=e.sibling;return(n=$l(o,i,n,null)).return=t,l.sibling=n,n.effectTag|=2,l.childExpirationTime=0,t.memoizedState=Zr,t.child=l,n}return t.memoizedState=null,t.child=Wn(t,e,l.children,n)}function ti(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),bn(e.return,t)}function ni(e,t,n,r,i,l){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:l}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=l)}function ri(e,t,n){var r=t.pendingProps,i=r.revealOrder,l=r.tail;if(jr(e,t,r.children,n),0!=(2&(r=Zn.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ti(e,n);else if(19===e.tag)ti(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Et(Zn,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===er(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ni(t,!1,i,n,l,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===er(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ni(t,!0,n,null,l,t.lastEffect);break;case"together":ni(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ii(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&kl(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error("Resuming work not yet implemented.");if(null!==t.child){for(n=ql(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=ql(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function li(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ai(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return _t(t.type)&&Ct(),null;case 3:return Kn(),xt(kt),xt(wt),(e=t.stateNode).pendingContext&&(e.context=e.pendingContext,e.pendingContext=null),Kr(t),null;case 5:Jn(t);var i=Xn(qn.current);if(n=t.type,null!==e&&null!=t.stateNode)Gr(e,t,n,r,i),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return null}Xn(Vn.current),e=ht(),n=ft(n);var l=ot(null,Je,r,n.validAttributes);u.UIManager.createView(e,n.uiViewClassName,i,l),i=new st(e,n,t),ye.set(e,t),be.set(e,r),$r(i,t,!1,!1),t.stateNode=i,gt(i)&&(t.effectTag|=4),null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Jr(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");if(e=Xn(qn.current),!Xn(Vn.current).isInAParentText)throw Error("Text strings must be rendered within a <Text> component.");i=ht(),u.UIManager.createView(i,"RCTRawText",e,{text:r}),ye.set(i,t),t.stateNode=i}return null;case 13:return xt(Zn),r=t.memoizedState,0!=(64&t.effectTag)?(t.expirationTime=n,t):(r=null!==r,i=!1,null!==e&&(i=null!==(n=e.memoizedState),r||null===n||null!==(n=e.child.sibling)&&(null!==(l=t.firstEffect)?(t.firstEffect=n,n.nextEffect=l):(t.firstEffect=t.lastEffect=n,n.nextEffect=null),n.effectTag=8)),r&&!i&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Zn.current)?qi===Fi&&(qi=ji):(qi!==Fi&&qi!==ji||(qi=Hi),0!==Ji&&null!==Bi&&(ea(Bi,Yi),ta(Bi,Ji)))),(r||i)&&(t.effectTag|=4),null);case 4:return Kn(),Kr(t),null;case 10:return yn(t),null;case 17:return _t(t.type)&&Ct(),null;case 19:if(xt(Zn),null===(r=t.memoizedState))return null;if(i=0!=(64&t.effectTag),null===(l=r.rendering)){if(i)li(r,!1);else if(qi!==Fi||null!==e&&0!=(64&e.effectTag))for(e=t.child;null!==e;){if(null!==(l=er(e))){for(t.effectTag|=64,li(r,!1),null!==(e=l.updateQueue)&&(t.updateQueue=e,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,e=n,r=t.child;null!==r;)n=e,(i=r).effectTag&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,null===(l=i.alternate)?(i.childExpirationTime=0,i.expirationTime=n,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null):(i.childExpirationTime=l.childExpirationTime,i.expirationTime=l.expirationTime,i.child=l.child,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,n=l.dependencies,i.dependencies=null===n?null:{expirationTime:n.expirationTime,firstContext:n.firstContext,responders:n.responders}),r=r.sibling;return Et(Zn,1&Zn.current|2),t.child}e=e.sibling}}else{if(!i)if(null!==(e=er(l))){if(t.effectTag|=64,i=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.effectTag|=4),li(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Jt()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,i=!0,li(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(l.sibling=t.child,t.child=l):(null!==(e=r.last)?e.sibling=l:t.child=l,r.last=l)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Jt()+500),e=r.tail,r.rendering=e,r.tail=e.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Jt(),e.sibling=null,t=Zn.current,Et(Zn,i?1&t|2:1&t),e):null}throw Error("Unknown unit of work tag ("+t.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function oi(e){switch(e.tag){case 1:_t(e.type)&&Ct();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Kn(),xt(kt),xt(wt),0!=(64&(t=e.effectTag)))throw Error("The root failed to unmount after an error. This is likely a bug in React. Please file an issue.");return e.effectTag=-4097&t|64,e;case 5:return Jn(e),null;case 13:return xt(Zn),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return xt(Zn),null;case 4:return Kn(),null;case 10:return yn(e),null;default:return null}}function ui(e,t){return{value:e,source:t,stack:fn(t)}}if($r=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e._children.push(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Kr=function(){},Gr=function(e,t,n,r){e.memoizedProps!==r&&(Xn(Vn.current),t.updateQueue=dt)&&(t.effectTag|=4)},Jr=function(e,t,n,r){n!==r&&(t.effectTag|=4)},"function"!=typeof u.ReactFiberErrorDialog.showErrorDialog)throw Error("Expected ReactFiberErrorDialog.showErrorDialog to be a function.");var si="function"==typeof WeakSet?WeakSet:Set;function ci(e,t){var n,r=t.source,i=t.stack;null===i&&null!==r&&(i=fn(r)),t={componentName:null!==r?qe(r.type):null,componentStack:null!==i?i:"",error:t.value,errorBoundary:null,errorBoundaryName:null,errorBoundaryFound:!1,willRetry:!1},null!==e&&1===e.tag&&(t.errorBoundary=e.stateNode,t.errorBoundaryName=qe(e.type),t.errorBoundaryFound=!0,t.willRetry=!0);try{n=t,!1!==u.ReactFiberErrorDialog.showErrorDialog(n)&&console.error(n.error)}catch(e){setTimeout(function(){throw e})}}function fi(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Ql(e,t)}}function di(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Ql(e,t)}else t.current=null}function pi(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:dn(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}function hi(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function mi(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function gi(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void mi(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:dn(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&Cn(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}Cn(n,t,e)}return;case 5:case 6:case 4:case 12:case 13:return;case 19:case 17:case 20:case 21:return}throw Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}function vi(e,t,n){switch("function"==typeof Wl&&Wl(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;tn(97<n?97:n,function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(e){Ql(i,e)}}e=e.next}while(e!==r)})}break;case 1:di(t),"function"==typeof(n=t.stateNode).componentWillUnmount&&fi(t,n);break;case 5:di(t);break;case 4:Si(e,t,n)}}function yi(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&yi(t)}function bi(e){return 5===e.tag||3===e.tag||4===e.tag}function Ti(e){e:{for(var t=e.return;null!==t;){if(bi(t)){var n=t;break e}t=t.return}throw Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.")}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error("Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}16&n.effectTag&&(n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||bi(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?xi(e,n,t):Ei(e,n,t)}function xi(e,t,n){var r=e.tag,i=5===r||6===r;if(i)if(e=i?e.stateNode:e.stateNode.instance,t){if("number"==typeof n)throw Error("Container does not support insertBefore operation")}else u.UIManager.setChildren(n,["number"==typeof e?e:e._nativeTag]);else if(4!==r&&null!==(e=e.child))for(xi(e,t,n),e=e.sibling;null!==e;)xi(e,t,n),e=e.sibling}function Ei(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?0<=(i=(r=n._children).indexOf(e))?(r.splice(i,1),t=r.indexOf(t),r.splice(t,0,e),u.UIManager.manageChildren(n._nativeTag,[i],[t],[],[],[])):(t=r.indexOf(t),r.splice(t,0,e),u.UIManager.manageChildren(n._nativeTag,[],[],["number"==typeof e?e:e._nativeTag],[t],[])):(t="number"==typeof e?e:e._nativeTag,0<=(i=(r=n._children).indexOf(e))?(r.splice(i,1),r.push(e),u.UIManager.manageChildren(n._nativeTag,[i],[r.length-1],[],[],[])):(r.push(e),u.UIManager.manageChildren(n._nativeTag,[],[],[t],[r.length-1],[])));else if(4!==r&&null!==(e=e.child))for(Ei(e,t,n),e=e.sibling;null!==e;)Ei(e,t,n),e=e.sibling}function Si(e,t,n){for(var r,i,l=t,a=!1;;){if(!a){a=l.return;e:for(;;){if(null===a)throw Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.");switch(r=a.stateNode,a.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}a=a.return}a=!0}if(5===l.tag||6===l.tag){e:for(var o=e,s=l,c=n,f=s;;)if(vi(o,f,c),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===s)break e;for(;null===f.sibling;){if(null===f.return||f.return===s)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(o=r,mt(l.stateNode),u.UIManager.manageChildren(o,[],[],[],[],[0])):(o=r,mt(c=l.stateNode),c=(s=o._children).indexOf(c),s.splice(c,1),u.UIManager.manageChildren(o._nativeTag,[],[],[],[],[c]))}else if(4===l.tag){if(null!==l.child){r=l.stateNode.containerInfo,i=!0,l.child.return=l,l=l.child;continue}}else if(vi(e,l,n),null!==l.child){l.child.return=l,l=l.child;continue}if(l===t)break;for(;null===l.sibling;){if(null===l.return||l.return===t)return;4===(l=l.return).tag&&(a=!1)}l.sibling.return=l.return,l=l.sibling}}function wi(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void hi(3,t);case 1:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.updateQueue;t.updateQueue=null,null!==i&&(t=n.viewConfig,be.set(n._nativeTag,r),null!=(r=ot(null,e,r,t.validAttributes))&&u.UIManager.updateView(n._nativeTag,t.uiViewClassName,r))}return;case 6:if(null===t.stateNode)throw Error("This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");return void u.UIManager.updateView(t.stateNode,"RCTRawText",{text:t.memoizedProps});case 3:case 12:return;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,el=Jt()),null!==n)e:for(e=n;;){if(5===e.tag)if(i=e.stateNode,r){var l=i.viewConfig,a=ot(null,Je,{style:{display:"none"}},l.validAttributes);u.UIManager.updateView(i._nativeTag,l.uiViewClassName,a)}else{i=e.stateNode,a=e.memoizedProps,l=i.viewConfig,a=ot(null,o({},a,{style:[a.style,{display:"none"}]}),a,l.validAttributes),u.UIManager.updateView(i._nativeTag,l.uiViewClassName,a)}else{if(6===e.tag)throw Error("Not yet implemented.");if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(i=e.child.sibling).return=e,e=i;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void ki(t);case 19:return void ki(t);case 17:return}throw Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}function ki(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new si),t.forEach(function(t){var r=jl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}var Pi="function"==typeof WeakMap?WeakMap:Map;function Ri(e,t,n){(n=kn(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){rl||(rl=!0,il=r),ci(e,t)},n}function _i(e,t,n){(n=kn(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return ci(e,t),r(i)}}var l=e.stateNode;return null!==l&&"function"==typeof l.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===ll?ll=new Set([this]):ll.add(this),ci(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Ci,Ni=Math.ceil,zi=_e.ReactCurrentDispatcher,Ii=_e.ReactCurrentOwner,Mi=0,Ai=8,Ui=16,Di=32,Fi=0,Qi=1,Oi=2,ji=3,Hi=4,Wi=5,Li=Mi,Bi=null,Vi=null,Yi=0,qi=Fi,Xi=null,$i=1073741823,Ki=1073741823,Gi=null,Ji=0,Zi=!1,el=0,tl=500,nl=null,rl=!1,il=null,ll=null,al=!1,ol=null,ul=90,sl=null,cl=0,fl=null,dl=0;function pl(){return(48&Li)!==Mi?1073741821-(Jt()/10|0):0!==dl?dl:dl=1073741821-(Jt()/10|0)}function hl(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var r=Zt();if(0==(4&t))return 99===r?1073741823:1073741822;if((Li&Ui)!==Mi)return Yi;if(null!==n)e=1073741821-25*(1+((1073741821-e+(0|n.timeoutMs||5e3)/10)/25|0));else switch(r){case 99:e=1073741823;break;case 98:e=1073741821-10*(1+((1073741821-e+15)/10|0));break;case 97:case 96:e=1073741821-25*(1+((1073741821-e+500)/25|0));break;case 95:e=2;break;default:throw Error("Expected a valid priority level")}return null!==Bi&&e===Yi&&--e,e}function ml(e,t){if(50<cl)throw cl=0,fl=null,Error("Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.");if(null!==(e=gl(e,t))){var n=Zt();1073741823===t?(Li&Ai)!==Mi&&(48&Li)===Mi?Tl(e):(yl(e),Li===Mi&&ln()):yl(e),(4&Li)===Mi||98!==n&&99!==n||(null===sl?sl=new Map([[e,t]]):(void 0===(n=sl.get(e))||n>t)&&sl.set(e,t))}}function gl(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Bi===i&&(kl(t),qi===Hi&&ea(i,Yi)),ta(i,t)),i}function vl(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Zl(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function yl(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=rn(Tl.bind(null,e));else{var t=vl(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=pl();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Vt&&Dt(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?rn(Tl.bind(null,e)):nn(r,bl.bind(null,e),{timeout:10*(1073741821-t)-Jt()}),e.callbackNode=t}}}function bl(e,t){if(dl=0,t){t=pl();var n=e.lastExpiredTime;return(0===n||n>t)&&(e.lastExpiredTime=t),yl(e),null}if(0===(n=vl(e)))return null;if(t=e.callbackNode,(48&Li)!==Mi)throw Error("Should not already be working.");Ul();var r=n,i=Li;Li|=Ui;var l=Sl();for(e===Bi&&r===Yi||xl(e,r);;)try{_l();break}catch(t){El(e,t)}if(vn(),zi.current=l,Li=i,null!==Vi?i=Fi:(Bi=null,i=qi),i!==Fi){if(i===Oi&&(i=Pl(e,n=2<n?2:n)),i===Qi)throw t=Xi,xl(e,n),ea(e,n),yl(e),t;switch(r=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,i){case Fi:case Qi:throw Error("Root did not complete. This is a bug in React.");case Oi:Il(e);break;case ji:if(ea(e,n),n===(i=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=zl(r)),1073741823===$i&&10<(r=el+tl-Jt())){if(Zi&&(0===(l=e.lastPingedTime)||l>=n)){e.lastPingedTime=n,xl(e,n);break}if(0!==(l=vl(e))&&l!==n)break;if(0!==i&&i!==n){e.lastPingedTime=i;break}e.timeoutHandle=vt(Il.bind(null,e),r);break}Il(e);break;case Hi:if(ea(e,n),n===(i=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=zl(r)),Zi&&(0===(r=e.lastPingedTime)||r>=n)){e.lastPingedTime=n,xl(e,n);break}if(0!==(r=vl(e))&&r!==n)break;if(0!==i&&i!==n){e.lastPingedTime=i;break}if(1073741823!==Ki?r=10*(1073741821-Ki)-Jt():1073741823===$i?r=0:(r=10*(1073741821-$i)-5e3,n=10*(1073741821-n)-(i=Jt()),0>(r=i-r)&&(r=0),n<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ni(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=vt(Il.bind(null,e),r);break}Il(e);break;case Wi:if(1073741823!==$i&&null!==Gi){l=$i;var a=Gi;if(0>=(r=0|a.busyMinDurationMs)?r=0:(i=0|a.busyDelayMs,r=(l=Jt()-(10*(1073741821-l)-(0|a.timeoutMs||5e3)))<=i?0:i+r-l),10<r){ea(e,n),e.timeoutHandle=vt(Il.bind(null,e),r);break}}Il(e);break;default:throw Error("Unknown root exit status.")}}return yl(e),e.callbackNode===t?bl.bind(null,e):null}function Tl(e){if((48&Li)!==Mi)throw Error("Should not already be working.");Ul();var t=e.lastExpiredTime,n=Pl(e,t=0!==t?e===Bi&&Yi>=t?Yi:t:1073741823);if(0!==e.tag&&n===Oi&&(n=Pl(e,t=2<t?2:t)),n===Qi)throw n=Xi,xl(e,t),ea(e,t),yl(e),n;return e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Il(e),yl(e),null}function xl(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,yt(n)),null!==Vi)for(n=Vi.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ct();break;case 3:Kn(),xt(kt),xt(wt);break;case 5:Jn(r);break;case 4:Kn();break;case 13:case 19:xt(Zn);break;case 10:yn(r)}n=n.return}Bi=e,Vi=ql(e.current,null),Yi=t,qi=Fi,Xi=null,Ki=$i=1073741823,Gi=null,Ji=0,Zi=!1}function El(e,t){for(;;){try{if(vn(),nr.current=Ar,ur)for(var n=lr.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(ir=0,or=ar=lr=null,ur=!1,null===Vi||null===Vi.return)return qi=Qi,Xi=t,Vi=null;e:{var i=e,l=Vi.return,a=Vi,o=t;if(t=Yi,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==o&&"object"==typeof o&&"function"==typeof o.then){var u=o;if(0==(2&a.mode)){var s=a.alternate;s?(a.updateQueue=s.updateQueue,a.memoizedState=s.memoizedState,a.expirationTime=s.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var c=0!=(1&Zn.current),f=l;do{var d;if(d=13===f.tag){var p=f.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var h=f.memoizedProps;d=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!c)}}if(d){var m=f.updateQueue;if(null===m){var g=new Set;g.add(u),f.updateQueue=g}else m.add(u);if(0==(2&f.mode)){if(f.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var v=kn(1073741823,null);v.tag=2,Pn(a,v)}a.expirationTime=1073741823;break e}o=void 0,a=t;var y=i.pingCache;if(null===y?(y=i.pingCache=new Pi,o=new Set,y.set(u,o)):void 0===(o=y.get(u))&&(o=new Set,y.set(u,o)),!o.has(a)){o.add(a);var b=Ol.bind(null,i,u,a);u.then(b,b)}f.effectTag|=4096,f.expirationTime=t;break e}f=f.return}while(null!==f);o=Error((qe(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+fn(a))}qi!==Wi&&(qi=Oi),o=ui(o,a),f=l;do{switch(f.tag){case 3:u=o,f.effectTag|=4096,f.expirationTime=t,Rn(f,Ri(f,u,t));break e;case 1:u=o;var T=f.type,x=f.stateNode;if(0==(64&f.effectTag)&&("function"==typeof T.getDerivedStateFromError||null!==x&&"function"==typeof x.componentDidCatch&&(null===ll||!ll.has(x)))){f.effectTag|=4096,f.expirationTime=t,Rn(f,_i(f,u,t));break e}}f=f.return}while(null!==f)}Vi=Nl(Vi)}catch(e){t=e;continue}break}}function Sl(){var e=zi.current;return zi.current=Ar,null===e?Ar:e}function wl(e,t){e<$i&&2<e&&($i=e),null!==t&&e<Ki&&2<e&&(Ki=e,Gi=t)}function kl(e){e>Ji&&(Ji=e)}function Pl(e,t){var n=Li;Li|=Ui;var r=Sl();for(e===Bi&&t===Yi||xl(e,t);;)try{Rl();break}catch(t){El(e,t)}if(vn(),Li=n,zi.current=r,null!==Vi)throw Error("Cannot commit an incomplete root. This error is likely caused by a bug in React. Please file an issue.");return Bi=null,qi}function Rl(){for(;null!==Vi;)Vi=Cl(Vi)}function _l(){for(;null!==Vi&&!Yt();)Vi=Cl(Vi)}function Cl(e){var t=Ci(e.alternate,e,Yi);return e.memoizedProps=e.pendingProps,null===t&&(t=Nl(e)),Ii.current=null,t}function Nl(e){Vi=e;do{var t=Vi.alternate;if(e=Vi.return,0==(2048&Vi.effectTag)){if(t=ai(t,Vi,Yi),1===Yi||1!==Vi.childExpirationTime){for(var n=0,r=Vi.child;null!==r;){var i=r.expirationTime,l=r.childExpirationTime;i>n&&(n=i),l>n&&(n=l),r=r.sibling}Vi.childExpirationTime=n}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Vi.firstEffect),null!==Vi.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Vi.firstEffect),e.lastEffect=Vi.lastEffect),1<Vi.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Vi:e.firstEffect=Vi,e.lastEffect=Vi))}else{if(null!==(t=oi(Vi)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Vi.sibling))return t;Vi=e}while(null!==Vi);return qi===Fi&&(qi=Wi),null}function zl(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Il(e){var t=Zt();return tn(99,Ml.bind(null,e,t)),null}function Ml(e,t){do{Ul()}while(null!==ol);if((48&Li)!==Mi)throw Error("Should not already be working.");var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error("Cannot commit the same tree as before. This error is likely caused by a bug in React. Please file an issue.");e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=zl(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Bi&&(Vi=Bi=null,Yi=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var l=Li;Li|=Di,Ii.current=null,nl=i;do{try{Al()}catch(e){if(null===nl)throw Error("Should be working on an effect.");Ql(nl,e),nl=nl.nextEffect}}while(null!==nl);nl=i;do{try{for(var a=e,o=t;null!==nl;){var u=nl.effectTag;if(128&u){var s=nl.alternate;if(null!==s){var c=s.ref;null!==c&&("function"==typeof c?c(null):c.current=null)}}switch(1038&u){case 2:Ti(nl),nl.effectTag&=-3;break;case 6:Ti(nl),nl.effectTag&=-3,wi(nl.alternate,nl);break;case 1024:nl.effectTag&=-1025;break;case 1028:nl.effectTag&=-1025,wi(nl.alternate,nl);break;case 4:wi(nl.alternate,nl);break;case 8:var f=nl;Si(a,f,o),yi(f)}nl=nl.nextEffect}}catch(e){if(null===nl)throw Error("Should be working on an effect.");Ql(nl,e),nl=nl.nextEffect}}while(null!==nl);e.current=n,nl=i;do{try{for(u=e;null!==nl;){var d=nl.effectTag;if(36&d&&gi(u,nl.alternate,nl),128&d){s=void 0;var p=nl.ref;if(null!==p){var h=nl.stateNode;switch(nl.tag){case 5:s=h;break;default:s=h}"function"==typeof p?p(s):p.current=s}}nl=nl.nextEffect}}catch(e){if(null===nl)throw Error("Should be working on an effect.");Ql(nl,e),nl=nl.nextEffect}}while(null!==nl);nl=null,qt(),Li=l}else e.current=n;if(al)al=!1,ol=e,ul=t;else for(nl=i;null!==nl;)t=nl.nextEffect,nl.nextEffect=null,nl=t;if(0===(t=e.firstPendingTime)&&(ll=null),1073741823===t?e===fl?cl++:(cl=0,fl=e):cl=0,"function"==typeof Hl&&Hl(n.stateNode,r),yl(e),rl)throw rl=!1,e=il,il=null,e;return(Li&Ai)!==Mi?null:(ln(),null)}function Al(){for(;null!==nl;){var e=nl.effectTag;0!=(256&e)&&pi(nl.alternate,nl),0==(512&e)||al||(al=!0,nn(97,function(){return Ul(),null})),nl=nl.nextEffect}}function Ul(){if(90!==ul){var e=97<ul?97:ul;return ul=90,tn(e,Dl)}}function Dl(){if(null===ol)return!1;var e=ol;if(ol=null,(48&Li)!==Mi)throw Error("Cannot flush passive effects while already rendering.");var t=Li;for(Li|=Di,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:hi(5,n),mi(5,n)}}catch(t){if(null===e)throw Error("Should be working on an effect.");Ql(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return Li=t,ln(),!0}function Fl(e,t,n){Pn(e,t=Ri(e,t=ui(n,t),1073741823)),null!==(e=gl(e,1073741823))&&yl(e)}function Ql(e,t){if(3===e.tag)Fl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Fl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===ll||!ll.has(r))){Pn(n,e=_i(n,e=ui(t,e),1073741823)),null!==(n=gl(n,1073741823))&&yl(n);break}}n=n.return}}function Ol(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Bi===e&&Yi===n?qi===Hi||qi===ji&&1073741823===$i&&Jt()-el<tl?xl(e,Yi):Zi=!0:Zl(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,yl(e)))}function jl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=hl(t=pl(),e,null)),null!==(e=gl(e,t))&&yl(e)}Ci=function(e,t,n){var r=t.expirationTime;if(null!==e)if(e.memoizedProps!==t.pendingProps||kt.current)Or=!0;else{if(r<n){switch(Or=!1,t.tag){case 3:Xr(t);break;case 5:Gn(t);break;case 1:_t(t.type)&&It(t);break;case 4:$n(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;Et(pn,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?ei(e,t,n):(Et(Zn,1&Zn.current),null!==(t=ii(e,t,n))?t.sibling:null);Et(Zn,1&Zn.current);break;case 19:if(r=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(r)return ri(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),Et(Zn,Zn.current),!r)return null}return ii(e,t,n)}Or=!1}else Or=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=Rt(t,wt.current),Tn(t,n),i=fr(null,t,r,e,i,n),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,_t(r)){var l=!0;It(t)}else l=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Sn(t);var a=r.getDerivedStateFromProps;"function"==typeof a&&In(t,r,a,e),i.updater=Mn,t.stateNode=i,i._reactInternalFiber=t,Fn(t,r,e,n),t=qr(null,t,r,!0,l,n)}else t.tag=0,jr(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,Ye(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,l=t.tag=Yl(i),e=dn(i,e),l){case 0:t=Vr(null,t,i,e,n);break e;case 1:t=Yr(null,t,i,e,n);break e;case 11:t=Hr(null,t,i,e,n);break e;case 14:t=Wr(null,t,i,dn(i.type,e),r,n);break e}throw Error("Element type is invalid. Received a promise that resolves to: "+i+". Lazy element type must resolve to a class or function.")}return t;case 0:return r=t.type,i=t.pendingProps,Vr(e,t,r,i=t.elementType===r?i:dn(r,i),n);case 1:return r=t.type,i=t.pendingProps,Yr(e,t,r,i=t.elementType===r?i:dn(r,i),n);case 3:if(Xr(t),r=t.updateQueue,null===e||null===r)throw Error("If the root does not have an updateQueue, we should have already bailed out. This error is likely caused by a bug in React. Please file an issue.");return r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,wn(e,t),_n(t,r,null,n),(r=t.memoizedState.element)===i?t=ii(e,t,n):(jr(e,t,r,n),t=t.child),t;case 5:return Gn(t),r=t.pendingProps.children,Br(e,t),jr(e,t,r,n),t=t.child;case 6:return null;case 13:return ei(e,t,n);case 4:return $n(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Wn(t,null,r,n):jr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Hr(e,t,r,i=t.elementType===r?i:dn(r,i),n);case 7:return jr(e,t,t.pendingProps,n),t.child;case 8:case 12:return jr(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,l=i.value;var o=t.type._context;if(Et(pn,o._currentValue),o._currentValue=l,null!==a)if(o=a.value,0===(l=on(o,l)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(o,l):1073741823))){if(a.children===i.children&&!kt.current){t=ii(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){a=o.child;for(var s=u.firstContext;null!==s;){if(s.context===r&&0!=(s.observedBits&l)){1===o.tag&&((s=kn(n,null)).tag=2,Pn(o,s)),o.expirationTime<n&&(o.expirationTime=n),null!==(s=o.alternate)&&s.expirationTime<n&&(s.expirationTime=n),bn(o.return,n),u.expirationTime<n&&(u.expirationTime=n);break}s=s.next}}else a=10===o.tag&&o.type===t.type?null:o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}jr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(l=t.pendingProps).children,Tn(t,n),r=r(i=xn(i,l.unstable_observedBits)),t.effectTag|=1,jr(e,t,r,n),t.child;case 14:return l=dn(i=t.type,t.pendingProps),Wr(e,t,i,l=dn(i.type,l),r,n);case 15:return Lr(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:dn(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,_t(r)?(e=!0,It(t)):e=!1,Tn(t,n),Un(t,r,i),Fn(t,r,i,n),qr(null,t,r,!0,e,n);case 19:return ri(e,t,n)}throw Error("Unknown unit of work tag ("+t.tag+"). This error is likely caused by a bug in React. Please file an issue.")};var Hl=null,Wl=null;function Ll(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Hl=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},Wl=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}return!0}function Bl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Vl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Yl(e){if("function"==typeof e)return Vl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===Qe)return 11;if(e===He)return 14}return 2}function ql(e,t){var n=e.alternate;return null===n?((n=new Bl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Xl(e,t,n,r,i,l){var a=2;if(r=e,"function"==typeof e)Vl(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case Ie:return $l(n.children,i,l,t);case Fe:a=8,i|=7;break;case Me:a=8,i|=1;break;case Ae:return(e=new Bl(12,n,t,8|i)).elementType=Ae,e.type=Ae,e.expirationTime=l,e;case Oe:return(e=new Bl(13,n,t,i)).type=Oe,e.elementType=Oe,e.expirationTime=l,e;case je:return(e=new Bl(19,n,t,i)).elementType=je,e.expirationTime=l,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Ue:a=10;break e;case De:a=9;break e;case Qe:a=11;break e;case He:a=14;break e;case We:a=16,r=null;break e;case Le:a=22;break e}throw Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: "+(null==e?e:typeof e)+".")}return(t=new Bl(a,n,t,i)).elementType=e,t.type=r,t.expirationTime=l,t}function $l(e,t,n,r){return(e=new Bl(7,e,r,t)).expirationTime=n,e}function Kl(e,t,n){return(e=new Bl(6,e,null,t)).expirationTime=n,e}function Gl(e,t,n){return(t=new Bl(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jl(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Zl(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function ea(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function ta(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function na(e){var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error("Unable to find node on an unmounted component.");throw Error("Argument appears to not be a ReactComponent. Keys: "+Object.keys(e))}return null===(e=Ge(t))?null:e.stateNode}function ra(e,t,n,r){var i=t.current,l=pl(),a=Nn.suspense;l=hl(l,i,a);e:if(n){n=n._reactInternalFiber;t:{if(Xe(n)!==n||1!==n.tag)throw Error("Expected subtree parent to be a mounted class component. This error is likely caused by a bug in React. Please file an issue.");var o=n;do{switch(o.tag){case 3:o=o.stateNode.context;break t;case 1:if(_t(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break t}}o=o.return}while(null!==o);throw Error("Found unexpected detached subtree parent. This error is likely caused by a bug in React. Please file an issue.")}if(1===n.tag){var u=n.type;if(_t(u)){n=zt(n,u,o);break e}}n=o}else n=St;return null===t.context?t.context=n:t.pendingContext=n,(t=kn(l,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),Pn(i,t),ml(i,l),l}function ia(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ze,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function la(e){return null==e?null:"number"==typeof e?e:e._nativeTag?e._nativeTag:e.canonical&&e.canonical._nativeTag?e.canonical._nativeTag:null==(e=na(e))?e:e.canonical?e.canonical._nativeTag:e._nativeTag}function aa(e){var t=sa.get(e);t&&ra(null,t,null,function(){sa.delete(e)})}xe=function(e,t){var n=Li;Li|=1;try{return e(t)}finally{(Li=n)===Mi&&ln()}};var oa,ua,sa=new Map;oa={findFiberByHostInstance:Te,bundleType:0,version:"16.13.0",rendererPackageName:"react-native-renderer",rendererConfig:{getInspectorDataForViewTag:function(){throw Error("getInspectorDataForViewTag() is not available in production")},getInspectorDataForViewAtPoint:function(){throw Error("getInspectorDataForViewAtPoint() is not available in production.")}.bind(null,la)}},ua=oa.findFiberByHostInstance,Ll({bundleType:oa.bundleType,version:oa.version,rendererPackageName:oa.rendererPackageName,rendererConfig:oa.rendererConfig,overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_e.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:function(e){return ua?ua(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}),l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={computeComponentStackForErrorReporting:function(e){return(e=Te(e))?fn(e):""}},l.createPortal=function(e,t){return ia(e,t,null,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},l.dispatchCommand=function(e,t,n){null!=e._nativeTag&&(e._internalInstanceHandle?nativeFabricUIManager.dispatchCommand(e._internalInstanceHandle.stateNode.node,t,n):u.UIManager.dispatchViewManagerCommand(e._nativeTag,t,n))},l.findHostInstance_DEPRECATED=function(e){return null==e?null:e._nativeTag?e:e.canonical&&e.canonical._nativeTag?e.canonical:null==(e=na(e))?e:e.canonical?e.canonical:e},l.findNodeHandle=la,l.render=function(e,t,n){var r=sa.get(t);if(!r){r=new Jl(t,0,!1);var i=new Bl(3,null,null,0);r.current=i,i.stateNode=r,Sn(i),sa.set(t,r)}ra(e,r,null,n);e:if(e=r.current,e.child)switch(e.child.tag){case 5:e=e.child.stateNode;break e;default:e=e.child.stateNode}else e=null;return e},l.unmountComponentAtNode=aa,l.unmountComponentAtNodeAndRemoveContainer=function(e){aa(e),u.UIManager.removeRootView(e)},l.unstable_batchedUpdates=Se},95,[16,96,176,59,199]);
__d(function(g,r,i,a,m,e,d){r(d[0])},96,[97]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=Date.now();r(d[0]),r(d[1]),r(d[2]),r(d[3]),r(d[4]),r(d[5]),r(d[6]),r(d[7]),r(d[8]),r(d[9]),r(d[10]),r(d[11]);var n=r(d[12]);n.markPoint('initializeCore_start',n.currentTimestamp()-(Date.now()-t)),n.markPoint('initializeCore_end')},97,[98,99,100,101,124,126,127,133,158,163,164,174,140]);
__d(function(g,r,i,a,m,e,d){'use strict';void 0===g.GLOBAL&&(g.GLOBAL=g),void 0===g.window&&(g.window=g),void 0===g.self&&(g.self=g),g.process=g.process||{},g.process.env=g.process.env||{},g.process.env.NODE_ENV||(g.process.env.NODE_ENV='production')},98,[]);
__d(function(g,r,i,a,m,e,d){'use strict';g.performance||(g.performance={}),'function'!=typeof g.performance.now&&(g.performance.now=function(){return(g.nativePerformanceNow||Date.now)()})},99,[]);
__d(function(g,r,i,a,m,e,d){'use strict';if(g.__RCTProfileIsProfiling){var t=r(d[0]);t.installReactHook(),t.setEnabled(!0)}},100,[32]);
__d(function(g,r,i,a,m,e,d){'use strict';var o=r(d[0]);if(o.installConsoleErrorReporter(),!g.__fbDisableExceptionsManager){r(d[1]).setGlobalHandler(function(t,n){try{o.handleException(t,n)}catch(o){throw console.log('Failed to print error: ',o.message),t}})}},101,[102,31]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=n(r(d[2])),c=n(r(d[3])),s=n(r(d[4])),l=n(r(d[5])),u=n(r(d[6])),f=n(r(d[7])),p=t(r(d[8]));function y(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);n&&(c=c.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,c)}return o}function E(t){for(var n=1;n<arguments.length;n++){var c=null!=arguments[n]?arguments[n]:{};n%2?y(Object(c),!0).forEach(function(n){(0,o.default)(t,n,c[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):y(Object(c)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(c,n))})}return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var O,b=(function(t){(0,s.default)(p,t);var n,o,f=(n=p,o=v(),function(){var t,c=(0,u.default)(n);if(o){var s=(0,u.default)(this).constructor;t=Reflect.construct(c,arguments,s)}else t=c.apply(this,arguments);return(0,l.default)(this,t)});function p(){var t;(0,c.default)(this,p);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=f.call.apply(f,[this].concat(o))).name='',t}return p})((0,f.default)(Error)),h=!1;function j(t){if(O&&!h){h=!0;try{return O(t)}catch(t){}finally{h=!1}}return t}var x=0;function k(t,n,o){var c=r(d[9]).default;if(c){var s=r(d[10])(t),l=++x,u=t.message||'',f=u;null!=t.componentStack&&(f+="\n\nThis error is located at:"+t.componentStack);var y=null==t.name||''===t.name?'':t.name+": ";f.startsWith(y)||(f=y+f),f=null==t.jsEngine?f:f+", js engine: "+t.jsEngine;var v=!0!==t.forceRedbox,O=j({message:f,originalMessage:f===u?null:u,name:null==t.name||''===t.name?null:t.name,componentStack:'string'==typeof t.componentStack?t.componentStack:null,stack:s,id:l,isFatal:n,extraData:{jsEngine:t.jsEngine,rawStack:t.stack,suppressRedBox:v}});o&&console.error(O.message),v&&p.addException(E(E({},O),{},{isComponentError:!!t.isComponentError})),c.reportException(O)}else o&&console.error(t)}var w=!1;function S(){if(console._errorOriginal.apply(console,arguments),console.reportErrorsAsExceptions&&!w)if(arguments[0]&&arguments[0].stack)k(arguments[0],!1,!1);else{var t=r(d[11]).default,n=Array.prototype.map.call(arguments,function(n){return'string'==typeof n?n:t(n)}).join(' ');if('Warning: '===n.slice(0,9))return;var o=new b(n);o.name='console.error',k(o,!1,!1)}}m.exports={handleException:function(t,n){var o;o=t instanceof Error?t:new b(t);try{w=!0,k(o,n,!0)}finally{w=!1}},installConsoleErrorReporter:function(){console._errorOriginal||(console._errorOriginal=console.error.bind(console),console.error=S,void 0===console.reportErrorsAsExceptions&&(console.reportErrorsAsExceptions=!0))},SyntheticError:b,unstable_setExceptionDecorator:function(t){O=t}}},102,[12,1,54,29,45,47,44,103,107,123,119,34]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]),n=r(d[1]),o=r(d[2]),u=r(d[3]);function c(f){var p="function"==typeof Map?new Map:void 0;return m.exports=c=function(c){if(null===c||!o(c))return c;if("function"!=typeof c)throw new TypeError("Super expression must either be null or a function");if(void 0!==p){if(p.has(c))return p.get(c);p.set(c,f)}function f(){return u(c,arguments,t(this).constructor)}return f.prototype=Object.create(c.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),n(f,c)},c(f)}m.exports=c},103,[44,46,104,105]);
__d(function(g,r,i,a,m,e,d){m.exports=function(n){return-1!==Function.toString.call(n).indexOf("[native code]")}},104,[]);
__d(function(g,r,i,a,m,e,d){var n=r(d[0]),t=r(d[1]);function p(o,u,l){return t()?m.exports=p=Reflect.construct:m.exports=p=function(t,p,o){var u=[null];u.push.apply(u,p);var l=new(Function.bind.apply(t,u));return o&&n(l,o.prototype),l},p.apply(null,arguments)}m.exports=p},105,[46,106]);
__d(function(g,r,i,a,m,e,d){m.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}},106,[]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]),n=r(d[1]);Object.defineProperty(e,"__esModule",{value:!0}),e.reportLogBoxError=M,e.isLogBoxErrorMessage=function(t){return'string'==typeof t&&t.includes(z)},e.isMessageIgnored=N,e.addLog=function(t){var n=new Error;setImmediate(function(){try{var o=(0,p.default)(n);P(new v.default({level:t.level,message:t.message,isComponentError:!1,stack:o,category:t.category,componentStack:t.componentStack}))}catch(t){M(t)}})},e.addException=function(t){setImmediate(function(){try{P(new v.default((0,y.parseLogBoxException)(t)))}catch(t){M(t)}})},e.symbolicateLogNow=function(t){t.symbolicate(function(){B()})},e.retrySymbolicateLogNow=function(t){t.retrySymbolicate(function(){B()})},e.symbolicateLogLazy=function(t){t.symbolicate()},e.clear=function(){I.size>0&&(I=new Set,j(-1))},e.setSelectedLog=j,e.clearWarnings=function(){var t=Array.from(I).filter(function(t){return'warn'!==t.level});t.length!==I.size&&(I=new Set(t),j(-1),B())},e.clearErrors=function(){var t=Array.from(I).filter(function(t){return'error'!==t.level&&'fatal'!==t.level});t.length!==I.size&&(I=new Set(t),j(-1))},e.dismiss=F,e.setWarningFilter=function(t){R=t},e.setAppInfo=function(t){L=t},e.getAppInfo=function(){return null!=L?L():null},e.checkWarningFilter=function(t){return R(t)},e.addIgnorePatterns=function(t){var n=t.filter(function(t){if(t instanceof RegExp){for(var n,o=S(A.entries());!(n=o()).done;){var u=n.value;if(u instanceof RegExp&&u.toString()===t.toString())return!1}return!0}return!A.has(t)});if(0===n.length)return;for(var o,u=S(n);!(o=u()).done;){var l=o.value;A.add(l),I=new Set(Array.from(I).filter(function(t){return!N(t.message.content)}))}B()},e.setDisabled=function(t){if(t===k)return;k=t,B()},e.isDisabled=function(){return k},e.observe=T,e.withSubscription=function(t){return(function(n){(0,l.default)(h,n);var v,y,p=(v=h,y=b(),function(){var t,n=(0,c.default)(v);if(y){var o=(0,c.default)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,s.default)(this,t)});function h(){var t;(0,o.default)(this,h);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(t=p.call.apply(p,[this].concat(u))).state={logs:new Set,isDisabled:!1,hasError:!1,selectedLogIndex:-1},t._handleDismiss=function(){var n=t.state,o=n.selectedLogIndex,u=n.logs,l=Array.from(u);null!=o&&(l.length-1<=0?j(-1):o>=l.length-1&&j(o-1),F(l[o]))},t._handleMinimize=function(){j(-1)},t._handleSetSelectedLog=function(t){j(t)},t}return(0,u.default)(h,[{key:"componentDidCatch",value:function(t,n){M(t,n.componentStack)}},{key:"render",value:function(){return this.state.hasError?null:f.createElement(t,{logs:Array.from(this.state.logs),isDisabled:this.state.isDisabled,selectedLogIndex:this.state.selectedLogIndex})}},{key:"componentDidMount",value:function(){var t=this;this._subscription=T(function(n){t.setState(n)})}},{key:"componentWillUnmount",value:function(){null!=this._subscription&&this._subscription.unsubscribe()}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),h})(f.Component)};var o=n(r(d[2])),u=n(r(d[3])),l=n(r(d[4])),s=n(r(d[5])),c=n(r(d[6])),f=t(r(d[7])),v=n(r(d[8])),y=r(d[9]),p=n(r(d[10])),h=n(r(d[11]));function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function S(t,n){var o;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=w(t))||n&&t&&"number"==typeof t.length){o&&(t=o);var u=0;return function(){return u>=t.length?{done:!0}:{done:!1,value:t[u++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(o=t[Symbol.iterator]()).next.bind(o)}function w(t,n){if(t){if("string"==typeof t)return E(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?E(t,n):void 0}}function E(t,n){(null==n||n>t.length)&&(n=t.length);for(var o=0,u=new Array(n);o<n;o++)u[o]=t[o];return u}var x=new Set,A=new Set,L=null,I=new Set,D=null,k=!1,_=-1,R=function(t){return{finalFormat:t,forceDialogImmediately:!1,suppressDialog_LEGACY:!0,suppressCompletely:!1,monitorEvent:'unknown',monitorListVersion:0,monitorSampleRate:1}},z='An error was thrown when attempting to render log messages via LogBox.';function C(){return{logs:I,isDisabled:k,selectedLogIndex:_}}function M(t,n){var o=r(d[12]);t.forceRedbox=!0,t.message="An error was thrown when attempting to render log messages via LogBox.\n\n"+t.message,null!=n&&(t.componentStack=n),o.handleException(t,!0)}function N(t){for(var n,o=S(A);!(n=o()).done;){var u=n.value;if(u instanceof RegExp&&u.test(t)||'string'==typeof u&&t.includes(u))return!0}return!1}function B(){null==D&&(D=setImmediate(function(){D=null;var t=C();x.forEach(function(n){return(0,n.observer)(t)})}))}function P(t){if(!N(t.message.content)){var n=Array.from(I).pop();if(n&&n.category===t.category)return n.incrementCount(),void B();if('fatal'===t.level){var o=function(){I.add(t),_<=0?j(I.size-1):B(),o=null},u=setTimeout(function(){o&&o()},1e3);t.symbolicate(function(t){o&&'PENDING'!==t?(o(),clearTimeout(u)):'PENDING'!==t&&B()})}else'syntax'===t.level?(I.add(t),j(I.size-1)):(I.add(t),B())}}function j(t){for(var n=_,o=t,u=Array.from(I),l=u.length-1;l>=0;){if('syntax'===u[l].level){o=l;break}l-=1}_=o,B(),h.default&&setTimeout(function(){n<0&&o>=0?h.default.show():n>=0&&o<0&&h.default.hide()},0)}function F(t){I.has(t)&&(I.delete(t),B())}function T(t){var n={observer:t};return x.add(n),t(C()),{unsubscribe:function(){x.delete(n)}}}},107,[12,1,29,30,45,47,44,59,108,117,119,122,102]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),s=r(d[1]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=s(r(d[2])),u=s(r(d[3])),n=t(r(d[4])),c=(function(){function t(s){(0,l.default)(this,t),this.symbolicated={error:null,stack:null,status:'NONE'},this.level=s.level,this.type=s.type,this.message=s.message,this.stack=s.stack,this.category=s.category,this.componentStack=s.componentStack,this.codeFrame=s.codeFrame,this.isComponentError=s.isComponentError,this.count=1}return(0,u.default)(t,[{key:"incrementCount",value:function(){this.count+=1}},{key:"getAvailableStack",value:function(){return'COMPLETE'===this.symbolicated.status?this.symbolicated.stack:this.stack}},{key:"retrySymbolicate",value:function(t){'COMPLETE'!==this.symbolicated.status&&(n.deleteStack(this.stack),this.handleSymbolicate(t))}},{key:"symbolicate",value:function(t){'NONE'===this.symbolicated.status&&this.handleSymbolicate(t)}},{key:"handleSymbolicate",value:function(t){var s=this;'PENDING'!==this.symbolicated.status&&(this.updateStatus(null,null,null,t),n.symbolicate(this.stack).then(function(l){s.updateStatus(null,null==l?void 0:l.stack,null==l?void 0:l.codeFrame,t)},function(l){s.updateStatus(l,null,null,t)}))}},{key:"updateStatus",value:function(t,s,l,u){var n=this.symbolicated.status;null!=t?this.symbolicated={error:t,stack:null,status:'FAILED'}:null!=s?(l&&(this.codeFrame=l),this.symbolicated={error:null,stack:s,status:'COMPLETE'}):this.symbolicated={error:null,stack:null,status:'PENDING'},u&&n!==this.symbolicated.status&&u(this.symbolicated.status)}}]),t})();e.default=c},108,[12,1,29,30,109]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.deleteStack=function(t){u.delete(t)},e.symbolicate=function(t){var o=u.get(t);null==o&&(o=(0,n.default)(t).then(f),u.set(t,o));return o};var n=t(r(d[1]));function o(t,n){var o;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=l(t))||n&&t&&"number"==typeof t.length){o&&(t=o);var c=0;return function(){return c>=t.length?{done:!0}:{done:!1,value:t[c++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(o=t[Symbol.iterator]()).next.bind(o)}function l(t,n){if(t){if("string"==typeof t)return c(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?c(t,n):void 0}}function c(t,n){(null==n||n>t.length)&&(n=t.length);for(var o=0,l=new Array(n);o<n;o++)l[o]=t[o];return l}var u=new Map,f=function(t){var n=t.stack,l=t.codeFrame;if(!Array.isArray(n))throw new Error('Expected stack to be an array.');for(var c,u=[],f=o(n);!(c=f()).done;){var s=c.value,y=!1;if('collapse'in s){if('boolean'!=typeof s.collapse)throw new Error('Expected stack frame `collapse` to be a boolean.');y=s.collapse}u.push({column:s.column,file:s.file,lineNumber:s.lineNumber,methodName:s.methodName,collapse:y})}return{stack:u,codeFrame:l}}},109,[1,110]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=t(r(d[1])),o=t(r(d[2])),c=t(r(d[3]));function s(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);n&&(c=c.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,c)}return o}function u(t){for(var n=1;n<arguments.length;n++){var c=null!=arguments[n]?arguments[n]:{};n%2?s(Object(c),!0).forEach(function(n){(0,o.default)(t,n,c[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):s(Object(c)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(c,n))})}return t}var f,l=r(d[4]);m.exports=function(t){var o,s,p,b,O,y;return n.default.async(function(j){for(;;)switch(j.prev=j.next){case 0:if(f||(f=g.fetch||r(d[5]).fetch),(o=l()).bundleLoadedFromServer){j.next=4;break}throw new Error('Bundle was not loaded from the packager');case 4:return s=t,p=c.default.getConstants(),(b=p.scriptURL)&&(O=!1,s=t.map(function(t){return null==t.file?t:O||(n=t.file,/^http/.test(n)||!/[\\/]/.test(n))?(O=!0,t):u(u({},t),{},{file:b});var n})),j.next=9,n.default.awrap(f(o.url+'symbolicate',{method:'POST',body:JSON.stringify({stack:s})}));case 9:return y=j.sent,j.next=12,n.default.awrap(y.json());case 12:return j.abrupt("return",j.sent);case 13:case"end":return j.stop()}},null,null,null,Promise)}},110,[1,111,54,113,114,115]);
__d(function(g,r,i,a,m,e,d){m.exports=r(d[0])},111,[112]);
__d(function(g,r,i,a,m,e,d){var t=(function(t){"use strict";var n,o=Object.prototype,c=o.hasOwnProperty,u="function"==typeof Symbol?Symbol:{},h=u.iterator||"@@iterator",f=u.asyncIterator||"@@asyncIterator",l=u.toStringTag||"@@toStringTag";function s(t,n,o){return Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,o){return t[n]=o}}function p(t,n,o,c){var u=n&&n.prototype instanceof E?n:E,h=Object.create(u.prototype),f=new R(c||[]);return h._invoke=S(t,o,f),h}function y(t,n,o){try{return{type:"normal",arg:t.call(n,o)}}catch(t){return{type:"throw",arg:t}}}t.wrap=p;var v="suspendedStart",w="suspendedYield",L="executing",x="completed",b={};function E(){}function _(){}function j(){}var O={};O[h]=function(){return this};var k=Object.getPrototypeOf,G=k&&k(k(Y([])));G&&G!==o&&c.call(G,h)&&(O=G);var N=j.prototype=E.prototype=Object.create(O);function F(t){["next","throw","return"].forEach(function(n){s(t,n,function(t){return this._invoke(n,t)})})}function P(t,n){function o(u,h,f,l){var s=y(t[u],t,h);if("throw"!==s.type){var p=s.arg,v=p.value;return v&&"object"==typeof v&&c.call(v,"__await")?n.resolve(v.__await).then(function(t){o("next",t,f,l)},function(t){o("throw",t,f,l)}):n.resolve(v).then(function(t){p.value=t,f(p)},function(t){return o("throw",t,f,l)})}l(s.arg)}var u;this._invoke=function(t,c){function h(){return new n(function(n,u){o(t,c,n,u)})}return u=u?u.then(h,h):h()}}function S(t,n,o){var c=v;return function(u,h){if(c===L)throw new Error("Generator is already running");if(c===x){if("throw"===u)throw h;return q()}for(o.method=u,o.arg=h;;){var f=o.delegate;if(f){var l=T(f,o);if(l){if(l===b)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(c===v)throw c=x,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);c=L;var s=y(t,n,o);if("normal"===s.type){if(c=o.done?x:w,s.arg===b)continue;return{value:s.arg,done:o.done}}"throw"===s.type&&(c=x,o.method="throw",o.arg=s.arg)}}}function T(t,o){var c=t.iterator[o.method];if(c===n){if(o.delegate=null,"throw"===o.method){if(t.iterator.return&&(o.method="return",o.arg=n,T(t,o),"throw"===o.method))return b;o.method="throw",o.arg=new TypeError("The iterator does not provide a 'throw' method")}return b}var u=y(c,t.iterator,o.arg);if("throw"===u.type)return o.method="throw",o.arg=u.arg,o.delegate=null,b;var h=u.arg;return h?h.done?(o[t.resultName]=h.value,o.next=t.nextLoc,"return"!==o.method&&(o.method="next",o.arg=n),o.delegate=null,b):h:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,b)}function I(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function A(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function Y(t){if(t){var o=t[h];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var u=-1,f=function o(){for(;++u<t.length;)if(c.call(t,u))return o.value=t[u],o.done=!1,o;return o.value=n,o.done=!0,o};return f.next=f}}return{next:q}}function q(){return{value:n,done:!0}}return _.prototype=N.constructor=j,j.constructor=_,_.displayName=s(j,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===_||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,j):(t.__proto__=j,s(t,l,"GeneratorFunction")),t.prototype=Object.create(N),t},t.awrap=function(t){return{__await:t}},F(P.prototype),P.prototype[f]=function(){return this},t.AsyncIterator=P,t.async=function(o,c,u,h,f){f===n&&(f=Promise);var l=new P(p(o,c,u,h),f);return t.isGeneratorFunction(c)?l:l.next().then(function(t){return t.done?t.value:l.next()})},F(N),s(N,l,"Generator"),N[h]=function(){return this},N.toString=function(){return"[object Generator]"},t.keys=function(t){var n=[];for(var o in t)n.push(o);return n.reverse(),function o(){for(;n.length;){var c=n.pop();if(c in t)return o.value=c,o.done=!1,o}return o.done=!0,o}},t.values=Y,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(A),!t)for(var o in this)"t"===o.charAt(0)&&c.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var o=this;function u(c,u){return l.type="throw",l.arg=t,o.next=c,u&&(o.method="next",o.arg=n),!!u}for(var h=this.tryEntries.length-1;h>=0;--h){var f=this.tryEntries[h],l=f.completion;if("root"===f.tryLoc)return u("end");if(f.tryLoc<=this.prev){var s=c.call(f,"catchLoc"),p=c.call(f,"finallyLoc");if(s&&p){if(this.prev<f.catchLoc)return u(f.catchLoc,!0);if(this.prev<f.finallyLoc)return u(f.finallyLoc)}else if(s){if(this.prev<f.catchLoc)return u(f.catchLoc,!0)}else{if(!p)throw new Error("try statement without catch or finally");if(this.prev<f.finallyLoc)return u(f.finallyLoc)}}}},abrupt:function(t,n){for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o];if(u.tryLoc<=this.prev&&c.call(u,"finallyLoc")&&this.prev<u.finallyLoc){var h=u;break}}h&&("break"===t||"continue"===t)&&h.tryLoc<=n&&n<=h.finallyLoc&&(h=null);var f=h?h.completion:{};return f.type=t,f.arg=n,h?(this.method="next",this.next=h.finallyLoc,b):this.complete(f)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),b},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.finallyLoc===t)return this.complete(o.completion,o.afterLoc),A(o),b}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc===t){var c=o.completion;if("throw"===c.type){var u=c.arg;A(o)}return u}}throw new Error("illegal catch attempt")},delegateYield:function(t,o,c){return this.delegate={iterator:Y(t),resultName:o,nextLoc:c},"next"===this.method&&(this.arg=n),b}},t})("object"==typeof m?m.exports:{});try{regeneratorRuntime=t}catch(n){Function("r","regeneratorRuntime = r")(t)}},112,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t(r(d[1])).getEnforcing('SourceCode');e.default=o},113,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var t,n=r(d[0])(r(d[1])),l='http://localhost:8081/';m.exports=function(){if(void 0===t){var o=n.default.getConstants().scriptURL.match(/^https?:\/\/.*?\//);t=o?o[0]:null}return{url:t||l,bundleLoadedFromServer:null!==t}}},114,[1,113]);
__d(function(g,r,i,a,m,e,d){'use strict';r(d[0]),m.exports={fetch:fetch,Headers:Headers,Request:Request,Response:Response}},115,[116]);
__d(function(g,r,i,a,m,e,d){var t,o;t=this,o=function(t){'use strict';var o='undefined'!=typeof globalThis&&globalThis||'undefined'!=typeof self&&self||void 0!==o&&o,n={searchParams:'URLSearchParams'in o,iterable:'Symbol'in o&&'iterator'in Symbol,blob:'FileReader'in o&&'Blob'in o&&(function(){try{return new Blob,!0}catch(t){return!1}})(),formData:'FormData'in o,arrayBuffer:'ArrayBuffer'in o};if(n.arrayBuffer)var s=['[object Int8Array]','[object Uint8Array]','[object Uint8ClampedArray]','[object Int16Array]','[object Uint16Array]','[object Int32Array]','[object Uint32Array]','[object Float32Array]','[object Float64Array]'],h=ArrayBuffer.isView||function(t){return t&&s.indexOf(Object.prototype.toString.call(t))>-1};function f(t){if('string'!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||''===t)throw new TypeError('Invalid character in header field name');return t.toLowerCase()}function u(t){return'string'!=typeof t&&(t=String(t)),t}function c(t){var o={next:function(){var o=t.shift();return{done:void 0===o,value:o}}};return n.iterable&&(o[Symbol.iterator]=function(){return o}),o}function y(t){this.map={},t instanceof y?t.forEach(function(t,o){this.append(o,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(o){this.append(o,t[o])},this)}function l(t){if(t.bodyUsed)return Promise.reject(new TypeError('Already read'));t.bodyUsed=!0}function p(t){return new Promise(function(o,n){t.onload=function(){o(t.result)},t.onerror=function(){n(t.error)}})}function b(t){var o=new FileReader,n=p(o);return o.readAsArrayBuffer(t),n}function w(t){for(var o=new Uint8Array(t),n=new Array(o.length),s=0;s<o.length;s++)n[s]=String.fromCharCode(o[s]);return n.join('')}function v(t){if(t.slice)return t.slice(0);var o=new Uint8Array(t.byteLength);return o.set(new Uint8Array(t)),o.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(t){var o;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?'string'==typeof t?this._bodyText=t:n.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:n.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():n.arrayBuffer&&n.blob&&((o=t)&&DataView.prototype.isPrototypeOf(o))?(this._bodyArrayBuffer=v(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||h(t))?this._bodyArrayBuffer=v(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText='',this.headers.get('content-type')||('string'==typeof t?this.headers.set('content-type','text/plain;charset=UTF-8'):this._bodyBlob&&this._bodyBlob.type?this.headers.set('content-type',this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set('content-type','application/x-www-form-urlencoded;charset=UTF-8'))},n.blob&&(this.blob=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error('could not read FormData body as blob');return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=l(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(b)}),this.text=function(){var t,o,n,s=l(this);if(s)return s;if(this._bodyBlob)return t=this._bodyBlob,o=new FileReader,n=p(o),o.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(w(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error('could not read FormData body as text');return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(A)}),this.json=function(){return this.text().then(JSON.parse)},this}y.prototype.append=function(t,o){t=f(t),o=u(o);var n=this.map[t];this.map[t]=n?n+', '+o:o},y.prototype.delete=function(t){delete this.map[f(t)]},y.prototype.get=function(t){return t=f(t),this.has(t)?this.map[t]:null},y.prototype.has=function(t){return this.map.hasOwnProperty(f(t))},y.prototype.set=function(t,o){this.map[f(t)]=u(o)},y.prototype.forEach=function(t,o){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(o,this.map[n],n,this)},y.prototype.keys=function(){var t=[];return this.forEach(function(o,n){t.push(n)}),c(t)},y.prototype.values=function(){var t=[];return this.forEach(function(o){t.push(o)}),c(t)},y.prototype.entries=function(){var t=[];return this.forEach(function(o,n){t.push([n,o])}),c(t)},n.iterable&&(y.prototype[Symbol.iterator]=y.prototype.entries);var E=['DELETE','GET','HEAD','OPTIONS','POST','PUT'];function T(t,o){if(!(this instanceof T))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,s,h=(o=o||{}).body;if(t instanceof T){if(t.bodyUsed)throw new TypeError('Already read');this.url=t.url,this.credentials=t.credentials,o.headers||(this.headers=new y(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,h||null==t._bodyInit||(h=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=o.credentials||this.credentials||'same-origin',!o.headers&&this.headers||(this.headers=new y(o.headers)),this.method=(n=o.method||this.method||'GET',s=n.toUpperCase(),E.indexOf(s)>-1?s:n),this.mode=o.mode||this.mode||null,this.signal=o.signal||this.signal,this.referrer=null,('GET'===this.method||'HEAD'===this.method)&&h)throw new TypeError('Body not allowed for GET or HEAD requests');if(this._initBody(h),!('GET'!==this.method&&'HEAD'!==this.method||'no-store'!==o.cache&&'no-cache'!==o.cache)){var f=/([?&])_=[^&]*/;if(f.test(this.url))this.url=this.url.replace(f,'$1_='+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?'&':'?')+'_='+(new Date).getTime()}}}function A(t){var o=new FormData;return t.trim().split('&').forEach(function(t){if(t){var n=t.split('='),s=n.shift().replace(/\+/g,' '),h=n.join('=').replace(/\+/g,' ');o.append(decodeURIComponent(s),decodeURIComponent(h))}}),o}function B(t,o){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');o||(o={}),this.type='default',this.status=void 0===o.status?200:o.status,this.ok=this.status>=200&&this.status<300,this.statusText='statusText'in o?o.statusText:'',this.headers=new y(o.headers),this.url=o.url||'',this._initBody(t)}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})},_.call(T.prototype),_.call(B.prototype),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new y(this.headers),url:this.url})},B.error=function(){var t=new B(null,{status:0,statusText:''});return t.type='error',t};var x=[301,302,303,307,308];B.redirect=function(t,o){if(-1===x.indexOf(o))throw new RangeError('Invalid status code');return new B(null,{status:o,headers:{location:t}})},t.DOMException=o.DOMException;try{new t.DOMException}catch(o){t.DOMException=function(t,o){this.message=t,this.name=o;var n=Error(t);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function O(s,h){return new Promise(function(f,c){var l=new T(s,h);if(l.signal&&l.signal.aborted)return c(new t.DOMException('Aborted','AbortError'));var p=new XMLHttpRequest;function b(){p.abort()}p.onload=function(){var t,o,n={status:p.status,statusText:p.statusText,headers:(t=p.getAllResponseHeaders()||'',o=new y,t.replace(/\r?\n[\t ]+/g,' ').split(/\r?\n/).forEach(function(t){var n=t.split(':'),s=n.shift().trim();if(s){var h=n.join(':').trim();o.append(s,h)}}),o)};n.url='responseURL'in p?p.responseURL:n.headers.get('X-Request-URL');var s='response'in p?p.response:p.responseText;setTimeout(function(){f(new B(s,n))},0)},p.onerror=function(){setTimeout(function(){c(new TypeError('Network request failed'))},0)},p.ontimeout=function(){setTimeout(function(){c(new TypeError('Network request failed'))},0)},p.onabort=function(){setTimeout(function(){c(new t.DOMException('Aborted','AbortError'))},0)},p.open(l.method,(function(t){try{return''===t&&o.location.href?o.location.href:t}catch(o){return t}})(l.url),!0),'include'===l.credentials?p.withCredentials=!0:'omit'===l.credentials&&(p.withCredentials=!1),'responseType'in p&&(n.blob?p.responseType='blob':n.arrayBuffer&&l.headers.get('Content-Type')&&-1!==l.headers.get('Content-Type').indexOf('application/octet-stream')&&(p.responseType='arraybuffer')),!h||'object'!=typeof h.headers||h.headers instanceof y?l.headers.forEach(function(t,o){p.setRequestHeader(o,t)}):Object.getOwnPropertyNames(h.headers).forEach(function(t){p.setRequestHeader(t,u(h.headers[t]))}),l.signal&&(l.signal.addEventListener('abort',b),p.onreadystatechange=function(){4===p.readyState&&l.signal.removeEventListener('abort',b)}),p.send(void 0===l._bodyInit?null:l._bodyInit)})}O.polyfill=!0,o.fetch||(o.fetch=O,o.Headers=y,o.Request=T,o.Response=B),t.Headers=y,t.Request=T,t.Response=B,t.fetch=O,Object.defineProperty(t,'__esModule',{value:!0})},'object'==typeof e&&void 0!==m?o(e):'function'==typeof define&&define.amd?define(['exports'],o):o(t.WHATWGFetch={})},116,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.parseInterpolation=B,e.parseComponentStack=h,e.parseLogBoxException=function(t){var u=null!=t.originalMessage?t.originalMessage:'Unknown',o=u.match(C);if(o){var F=o.slice(1),s=(0,n.default)(F,5),D=s[0],l=s[1],f=s[2],p=s[3],E=s[4];return{level:'fatal',type:'Metro Error',stack:[],isComponentError:!1,componentStack:[],codeFrame:{fileName:l,location:{row:parseInt(f,10),column:parseInt(p,10)},content:E},message:{content:D,substitutions:[]},category:l+"-"+f+"-"+p}}var k=u.match(y);if(k){var x=k.slice(1),O=(0,n.default)(x,5),S=O[0],j=O[1],w=O[2],A=O[3],I=O[4];return{level:'syntax',stack:[],isComponentError:!1,componentStack:[],codeFrame:{fileName:S,location:{row:parseInt(w,10),column:parseInt(A,10)},content:I},message:{content:j,substitutions:[]},category:S+"-"+w+"-"+A}}var P=u.match(v);if(P){var M=P.slice(1),N=(0,n.default)(M,3),T=N[0],_=N[1],L=N[2];return{level:'syntax',stack:[],isComponentError:!1,componentStack:[],codeFrame:{fileName:T,location:null,content:L},message:{content:_,substitutions:[]},category:T+"-1-1"}}if(u.match(/^TransformError /))return{level:'syntax',stack:t.stack,isComponentError:t.isComponentError,componentStack:[],message:{content:u,substitutions:[]},category:u};var U=t.componentStack;if(t.isFatal||t.isComponentError)return c({level:'fatal',stack:t.stack,isComponentError:t.isComponentError,componentStack:null!=U?h(U):[]},B([u]));if(null!=U)return c({level:'error',stack:t.stack,isComponentError:t.isComponentError,componentStack:h(U)},B([u]));return c({level:'error',stack:t.stack,isComponentError:t.isComponentError},b([u]))},e.parseLogBoxLog=b;var u=t(r(d[1])),n=t(r(d[2])),o=t(r(d[3])),F=t(r(d[4])),s=t(r(d[5]));function D(t,u){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);u&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),n.push.apply(n,o)}return n}function c(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?D(Object(o),!0).forEach(function(n){(0,u.default)(t,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):D(Object(o)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(o,u))})}return t}function l(t,u){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=f(t))||u&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function f(t,u){if(t){if("string"==typeof t)return p(t,u);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,u):void 0}}function p(t,u){(null==u||u>t.length)&&(u=t.length);for(var n=0,o=new Array(u);n<u;n++)o[n]=t[n];return o}var y=/^(?:TransformError )?(?:SyntaxError: |ReferenceError: )(.*): (.*) \((\d+):(\d+)\)\n\n([\s\S]+)/,v=/^(?:TransformError )?(?:(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*):? (?:(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)(\/(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*): ((?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+?)\n([ >]{2}[\t-\r 0-9\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+ \|(?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+|\x1B(?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)/,C=/^(?:InternalError Metro has encountered an error:) ((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*): ((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*) \(([0-9]+):([0-9]+)\)\n\n((?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)/,E=F.default.BOM+'%s';function B(t){var u=[],n=[],F=[],D=(0,o.default)(t);if('string'==typeof D[0]){for(var c,f=String(D.shift()).split('%s'),p=f.length-1,y=D.splice(0,p),v='',C='',B=0,h=l(f);!(c=h()).done;){var b=c.value;if(v+=b,C+=b,B<p){if(B<y.length){var k='string'==typeof y[B]?y[B]:(0,s.default)(y[B]);F.push({length:k.length,offset:C.length}),v+=E,C+=k}else F.push({length:2,offset:C.length}),v+='%s',C+='%s';B++}}u.push(v),n.push(C)}var x=D.map(function(t){return'string'==typeof t?t:(0,s.default)(t)});return u.push.apply(u,(0,o.default)(x)),n.push.apply(n,(0,o.default)(x)),{category:u.join(' '),message:{content:n.join(' '),substitutions:F}}}function h(t){return t.split(/\n {4}in /g).map(function(t){if(!t)return null;var u=t.match(/(.*) \(at (.*\.js):([\d]+)\)/);if(!u)return null;var o=u.slice(1),F=(0,n.default)(o,3),s=F[0],D=F[1],c=F[2];return{content:s,fileName:D,location:{column:-1,row:parseInt(c,10)}}}).filter(Boolean)}function b(t){var u=t[0],n=[],o=[];if('string'==typeof u&&'%s'===u.slice(-2)&&t.length>0){var F=t[t.length-1];'string'==typeof F&&/\s{4}in/.test(F)&&((n=t.slice(0,-1))[0]=u.slice(0,-2),o=h(F))}if(0===o.length)for(var s,D=l(t);!(s=D()).done;){var f=s.value;if('string'==typeof f&&/\n {4}in /.exec(f)){var p=f.indexOf('\n    in ');p>0&&n.push(f.slice(0,p)),o=h(f)}else n.push(f)}return c(c({},B(n)),{},{componentStack:o})}},117,[1,54,17,25,118,34]);
__d(function(g,r,i,a,m,e,d){'use strict';var A=r(d[0])({BOM:"\ufeff",BULLET:"\u2022",BULLET_SP:"\xa0\u2022\xa0",MIDDOT:"\xb7",MIDDOT_SP:"\xa0\xb7\xa0",MIDDOT_KATAKANA:"\u30fb",MDASH:"\u2014",MDASH_SP:"\xa0\u2014\xa0",NDASH:"\u2013",NDASH_SP:"\xa0\u2013\xa0",NBSP:"\xa0",PIZZA:"\ud83c\udf55",TRIANGLE_LEFT:"\u25c0",TRIANGLE_RIGHT:"\u25b6"});m.exports=A},118,[33]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);function n(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);n&&(c=c.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,c)}return o}function o(o){for(var c=1;c<arguments.length;c++){var u=null!=arguments[c]?arguments[c]:{};c%2?n(Object(u),!0).forEach(function(n){t(o,n,u[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(u)):n(Object(u)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(u,t))})}return o}function c(t,n){var o;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=u(t))||n&&t&&"number"==typeof t.length){o&&(t=o);var c=0;return function(){return c>=t.length?{done:!0}:{done:!1,value:t[c++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(o=t[Symbol.iterator]()).next.bind(o)}function u(t,n){if(t){if("string"==typeof t)return l(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?l(t,n):void 0}}function l(t,n){(null==n||n>t.length)&&(n=t.length);for(var o=0,c=new Array(n);o<n;o++)c[o]=t[o];return c}var s=r(d[1]);function f(t){for(var n,o=[],u=c(t.entries);!(n=u()).done;){var l=n.value;if('FRAME'===l.type){var s=l.location,f=l.functionName;'NATIVE'!==s.type&&o.push({methodName:f,file:s.sourceUrl,lineNumber:s.line1Based,column:'SOURCE'===s.type?s.column1Based-1:s.virtualOffset0Based})}}return o}m.exports=function(t){if(!t||!t.stack)return[];var n=r(d[2]);return Array.isArray(t.stack)?t.stack:g.HermesInternal?f(s(t.stack)):n.parse(t.stack).map(function(t){return o(o({},t),{},{column:null!=t.column?t.column-1:null})})}},119,[54,120,121]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=/^ {4}at (.+?)(?: \((native)\)?| \((address at )?(.+?):(\d+):(\d+)\))$/,n=/^ {4}... skipping (\d+) frames$/;function s(s){var u=s.match(t);if(u)return{type:'FRAME',functionName:u[1],location:'native'===u[2]?{type:'NATIVE'}:'address at '===u[3]?{type:'BYTECODE',sourceUrl:u[4],line1Based:Number.parseInt(u[5],10),virtualOffset0Based:Number.parseInt(u[6],10)}:{type:'SOURCE',sourceUrl:u[4],line1Based:Number.parseInt(u[5],10),column1Based:Number.parseInt(u[6],10)}};var p=s.match(n);return p?{type:'SKIPPED',count:Number.parseInt(p[1],10)}:void 0}m.exports=function(t){for(var n=t.split(/\n/),u=[],p=-1,o=0;o<n.length;++o){var c=n[o];if(c){var f=s(c);f?u.push(f):(p=o,u=[])}}return{message:n.slice(0,p+1).join('\n'),entries:u}}},120,[]);
__d(function(g,r,i,a,m,e,d){'use strict';Object.defineProperty(e,'__esModule',{value:!0});var n='<unknown>';var l=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/|[a-z]:\\|\\\\).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,u=/\((\S*)(?::(\d+))(?::(\d+))\)/;function t(t){var o=l.exec(t);if(!o)return null;var c=o[2]&&0===o[2].indexOf('native'),s=o[2]&&0===o[2].indexOf('eval'),v=u.exec(o[2]);return s&&null!=v&&(o[2]=v[1],o[3]=v[2],o[4]=v[3]),{file:c?null:o[2],methodName:o[1]||n,arguments:c?[o[2]]:[],lineNumber:o[3]?+o[3]:null,column:o[4]?+o[4]:null}}var o=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function c(l){var u=o.exec(l);return u?{file:u[2],methodName:u[1]||n,arguments:[],lineNumber:+u[3],column:u[4]?+u[4]:null}:null}var s=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,v=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function f(l){var u=s.exec(l);if(!u)return null;var t=u[3]&&u[3].indexOf(' > eval')>-1,o=v.exec(u[3]);return t&&null!=o&&(u[3]=o[1],u[4]=o[2],u[5]=null),{file:u[3],methodName:u[1]||n,arguments:u[2]?u[2].split(','):[],lineNumber:u[4]?+u[4]:null,column:u[5]?+u[5]:null}}var b=/^\s*(?:([^@]*)(?:\((.*?)\))?@)?(\S.*?):(\d+)(?::(\d+))?\s*$/i;function p(l){var u=b.exec(l);return u?{file:u[3],methodName:u[1]||n,arguments:[],lineNumber:+u[4],column:u[5]?+u[5]:null}:null}var x=/^\s*at (?:((?:\[object object\])?[^\\/]+(?: \[as \S+\])?) )?\(?(.*?):(\d+)(?::(\d+))?\)?\s*$/i;function h(l){var u=x.exec(l);return u?{file:u[2],methodName:u[1]||n,arguments:[],lineNumber:+u[3],column:u[4]?+u[4]:null}:null}e.parse=function(n){return n.split('\n').reduce(function(n,l){var u=t(l)||c(l)||f(l)||h(l)||p(l);return u&&n.push(u),n},[])}},121,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t(r(d[1])).get('LogBox');e.default=o},122,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t(r(d[1])),n=(r(d[2]),o.getEnforcing('ExceptionsManager')),p={reportFatalException:function(t,o,p){n.reportFatalException(t,o,p)},reportSoftException:function(t,o,p){n.reportSoftException(t,o,p)},updateExceptionMessage:function(t,o,p){n.updateExceptionMessage(t,o,p)},dismissRedbox:function(){},reportException:function(t){n.reportException?n.reportException(t):t.isFatal?p.reportFatalException(t.message,t.stack,t.id):p.reportSoftException(t.message,t.stack,t.id)}},c=p;e.default=c},123,[12,14,57]);
__d(function(g,r,i,a,m,e,d){'use strict';(0,r(d[0]).polyfillGlobal)('Promise',function(){return r(d[1])})},124,[125,36]);
__d(function(g,r,i,a,m,e,d){'use strict';var l=r(d[0]);function o(o,t,n){var c=Object.getOwnPropertyDescriptor(o,t),b=c||{},f=b.enumerable,u=b.writable,p=b.configurable;!c||p?l(o,t,{get:n,enumerable:!1!==f,writable:!1!==u}):console.error('Failed to set polyfill. '+t+' is not configurable.')}m.exports={polyfillObjectProperty:o,polyfillGlobal:function(l,t){o(g,l,t)}}},125,[35]);
__d(function(g,r,i,a,m,e,d){'use strict';(0,r(d[0]).polyfillGlobal)('regeneratorRuntime',function(){return delete g.regeneratorRuntime,r(d[1])})},126,[125,112]);
__d(function(g,r,i,a,m,e,d){'use strict';if(!g.RN$Bridgeless){var l=r(d[0]).polyfillGlobal,t=function(t){l(t,function(){return r(d[1])[t]})};t('setTimeout'),t('setInterval'),t('setImmediate'),t('clearTimeout'),t('clearInterval'),t('clearImmediate'),t('requestAnimationFrame'),t('cancelAnimationFrame'),t('requestIdleCallback'),t('cancelIdleCallback')}},127,[125,128]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0])(r(d[1])),n=r(d[2]),l=(r(d[3]),r(d[4]),r(d[5])),u=null;function o(){return u||(u=r(d[6])),u()}var c=16.666666666666668,f=[],s=[],v=[],h=[],I=[],T={},b=1,p=null,w=!1;function k(){var t=v.indexOf(null);return-1===t&&(t=v.length),t}function x(t,n){var l=b++,u=k();return v[u]=l,f[u]=t,s[u]=n,l}function y(t,n,l){r(d[7])(t<=b,'Tried to call timer with ID %s but no such timer exists.',t);var u=v.indexOf(t);if(-1!==u){var h=s[u],I=f[u];if(I&&h){'setInterval'!==h&&q(u);try{'setTimeout'===h||'setInterval'===h||'setImmediate'===h?I():'requestAnimationFrame'===h?I(o()):'requestIdleCallback'===h?I({timeRemaining:function(){return Math.max(0,c-(o()-n))},didTimeout:!!l}):console.error('Tried to call a callback with invalid type: '+h)}catch(t){p?p.push(t):p=[t]}}else console.error('No callback found for timerID '+t)}}function C(){if(0===h.length)return!1;var t=h;h=[];for(var n=0;n<t.length;++n)y(t[n],0);return h.length>0}function q(t){v[t]=null,f[t]=null,s[t]=null}function A(t){if(null!=t){var n=v.indexOf(t);if(-1!==n){var l=s[n];q(n),'setImmediate'!==l&&'requestIdleCallback'!==l&&N(t)}}}var D,O={setTimeout:function(t,n){for(var l=arguments.length,u=new Array(l>2?l-2:0),o=2;o<l;o++)u[o-2]=arguments[o];var c=x(function(){return t.apply(void 0,u)},'setTimeout');return F(c,n||0,Date.now(),!1),c},setInterval:function(t,n){for(var l=arguments.length,u=new Array(l>2?l-2:0),o=2;o<l;o++)u[o-2]=arguments[o];var c=x(function(){return t.apply(void 0,u)},'setInterval');return F(c,n||0,Date.now(),!0),c},setImmediate:function(t){for(var n=arguments.length,l=new Array(n>1?n-1:0),u=1;u<n;u++)l[u-1]=arguments[u];var o=x(function(){return t.apply(void 0,l)},'setImmediate');return h.push(o),o},requestAnimationFrame:function(t){var n=x(t,'requestAnimationFrame');return F(n,1,Date.now(),!1),n},requestIdleCallback:function(t,n){0===I.length&&E(!0);var l=n&&n.timeout,u=x(null!=l?function(n){var l=T[u];return l&&(O.clearTimeout(l),delete T[u]),t(n)}:t,'requestIdleCallback');if(I.push(u),null!=l){var c=O.setTimeout(function(){var t=I.indexOf(u);t>-1&&(I.splice(t,1),y(u,o(),!0)),delete T[u],0===I.length&&E(!1)},l);T[u]=c}return u},cancelIdleCallback:function(t){A(t);var n=I.indexOf(t);-1!==n&&I.splice(n,1);var l=T[t];l&&(O.clearTimeout(l),delete T[t]),0===I.length&&E(!1)},clearTimeout:function(t){A(t)},clearInterval:function(t){A(t)},clearImmediate:function(t){A(t);var n=h.indexOf(t);-1!==n&&h.splice(n,1)},cancelAnimationFrame:function(t){A(t)},callTimers:function(t){l(0!==t.length,'Cannot call `callTimers` with an empty list of IDs.'),p=null;for(var n=0;n<t.length;n++)y(t[n],0);if(p){var u=p.length;if(u>1)for(var o=1;o<u;o++)O.setTimeout(function(t){throw t}.bind(null,p[o]),0);throw p[0]}},callIdleCallbacks:function(t){if(!(c-(o()-t)<1)){if(p=null,I.length>0){var n=I;I=[];for(var l=0;l<n.length;++l)y(n[l],t)}0===I.length&&E(!1),p&&p.forEach(function(t){return O.setTimeout(function(){throw t},0)})}},callImmediates:function(){for(p=null;C(););p&&p.forEach(function(t){return O.setTimeout(function(){throw t},0)})},emitTimeDriftWarning:function(t){w||(w=!0,console.warn(t))}};function F(n,u,o,c){l(t.default,'NativeTiming is available'),t.default.createTimer(n,u,o,c)}function N(n){l(t.default,'NativeTiming is available'),t.default.deleteTimer(n)}function E(n){l(t.default,'NativeTiming is available'),t.default.setSendIdleEvents(n)}t.default?D=O:(console.warn("Timing native module is not available, can't set timers."),D={callImmediates:O.callImmediates,setImmediate:O.setImmediate}),n.setImmediatesCallback(O.callImmediates),m.exports=D},128,[1,129,23,57,32,6,130,8]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])).get('Timing');e.default=u},129,[12,14]);
__d(function(g,r,i,a,m,e,d){"use strict";var n,t=r(d[0]);n=t.now?function(){return t.now()}:function(){return Date.now()},m.exports=n},130,[131]);
__d(function(g,r,i,a,m,e,d){'use strict';var n;r(d[0]).canUseDOM&&(n=window.performance||window.msPerformance||window.webkitPerformance),m.exports=n||{}},131,[132]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=!('undefined'==typeof window||!window.document||!window.document.createElement),t={canUseDOM:n,canUseWorkers:'undefined'!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};m.exports=t},132,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]).polyfillGlobal;n('XMLHttpRequest',function(){return r(d[1])}),n('FormData',function(){return r(d[2])}),n('fetch',function(){return r(d[3]).fetch}),n('Headers',function(){return r(d[3]).Headers}),n('Request',function(){return r(d[3]).Request}),n('Response',function(){return r(d[3]).Response}),n('WebSocket',function(){return r(d[4])}),n('Blob',function(){return r(d[5])}),n('File',function(){return r(d[6])}),n('FileReader',function(){return r(d[7])}),n('URL',function(){return r(d[8]).URL}),n('URLSearchParams',function(){return r(d[8]).URLSearchParams}),n('AbortController',function(){return r(d[9]).AbortController}),n('AbortSignal',function(){return r(d[9]).AbortSignal})},133,[125,134,149,115,150,137,153,154,156,157]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),s=r(d[1]),n=r(d[2]),o=r(d[3]),h=r(d[4]),p=r(d[5]),u=r(d[6]);function c(t){var s=_();return function(){var n,o=u(t);if(s){var h=u(this).constructor;n=Reflect.construct(o,arguments,h)}else n=o.apply(this,arguments);return p(this,n)}}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var l=r(d[7]),y=r(d[8]),f=r(d[9]),v=r(d[10]),R=r(d[11]),E=r(d[12]),b=r(d[13]);l.isAvailable&&l.addNetworkingHandler();var k=0,N=1,w=2,S=3,D=4,T={arraybuffer:'function'==typeof g.ArrayBuffer,blob:'function'==typeof g.Blob,document:!1,json:!0,text:!0,'':!0},q=['abort','error','load','loadstart','progress','timeout','loadend'],O=q.concat('readystatechange'),I=(function(t){h(n,t);var s=c(n);function n(){return o(this,n),s.apply(this,arguments)}return n})(y.apply(void 0,q)),L=(function(p){h(y,p);var _=c(y);function y(){var t;return o(this,y),(t=_.call(this)).UNSENT=k,t.OPENED=N,t.HEADERS_RECEIVED=w,t.LOADING=S,t.DONE=D,t.readyState=k,t.status=0,t.timeout=0,t.withCredentials=!0,t.upload=new I,t._aborted=!1,t._hasError=!1,t._method=null,t._perfKey=null,t._response='',t._url=null,t._timedOut=!1,t._trackingName='unknown',t._incrementalEvents=!1,t._reset(),t}return n(y,null,[{key:"setInterceptor",value:function(t){y._interceptor=t}}]),n(y,[{key:"_reset",value:function(){this.readyState=this.UNSENT,this.responseHeaders=void 0,this.status=0,delete this.responseURL,this._requestId=null,this._cachedResponse=void 0,this._hasError=!1,this._headers={},this._response='',this._responseType='',this._sent=!1,this._lowerCaseResponseHeaders={},this._clearSubscriptions(),this._timedOut=!1}},{key:"__didCreateRequest",value:function(t){this._requestId=t,y._interceptor&&y._interceptor.requestSent(t,this._url||'',this._method||'GET',this._headers)}},{key:"__didUploadProgress",value:function(t,s,n){t===this._requestId&&this.upload.dispatchEvent({type:'progress',lengthComputable:!0,loaded:s,total:n})}},{key:"__didReceiveResponse",value:function(t,s,n,o){t===this._requestId&&(null!=this._perfKey&&f.stopTimespan(this._perfKey),this.status=s,this.setResponseHeaders(n),this.setReadyState(this.HEADERS_RECEIVED),o||''===o?this.responseURL=o:delete this.responseURL,y._interceptor&&y._interceptor.responseReceived(t,o||this._url||'',s,n||{}))}},{key:"__didReceiveData",value:function(t,s){t===this._requestId&&(this._response=s,this._cachedResponse=void 0,this.setReadyState(this.LOADING),y._interceptor&&y._interceptor.dataReceived(t,s))}},{key:"__didReceiveIncrementalData",value:function(t,s,n,o){t===this._requestId&&(this._response?this._response+=s:this._response=s,y._interceptor&&y._interceptor.dataReceived(t,s),this.setReadyState(this.LOADING),this.__didReceiveDataProgress(t,n,o))}},{key:"__didReceiveDataProgress",value:function(t,s,n){t===this._requestId&&this.dispatchEvent({type:'progress',lengthComputable:n>=0,loaded:s,total:n})}},{key:"__didCompleteResponse",value:function(t,s,n){t===this._requestId&&(s&&(''!==this._responseType&&'text'!==this._responseType||(this._response=s),this._hasError=!0,n&&(this._timedOut=!0)),this._clearSubscriptions(),this._requestId=null,this.setReadyState(this.DONE),s?y._interceptor&&y._interceptor.loadingFailed(t,s):y._interceptor&&y._interceptor.loadingFinished(t,this._response.length))}},{key:"_clearSubscriptions",value:function(){(this._subscriptions||[]).forEach(function(t){t&&t.remove()}),this._subscriptions=[]}},{key:"getAllResponseHeaders",value:function(){if(!this.responseHeaders)return null;var t=this.responseHeaders||{};return Object.keys(t).map(function(s){return s+': '+t[s]}).join('\r\n')}},{key:"getResponseHeader",value:function(t){var s=this._lowerCaseResponseHeaders[t.toLowerCase()];return void 0!==s?s:null}},{key:"setRequestHeader",value:function(t,s){if(this.readyState!==this.OPENED)throw new Error('Request has not been opened');this._headers[t.toLowerCase()]=String(s)}},{key:"setTrackingName",value:function(t){return this._trackingName=t,this}},{key:"open",value:function(t,s,n){if(this.readyState!==this.UNSENT)throw new Error('Cannot open, already sending');if(void 0!==n&&!n)throw new Error('Synchronous http requests are not supported');if(!s)throw new Error('Cannot load an empty url');this._method=t.toUpperCase(),this._url=s,this._aborted=!1,this.setReadyState(this.OPENED)}},{key:"send",value:function(s){var n=this;if(this.readyState!==this.OPENED)throw new Error('Request has not been opened');if(this._sent)throw new Error('Request has already been sent');this._sent=!0;var o=this._incrementalEvents||!!this.onreadystatechange||!!this.onprogress;this._subscriptions.push(v.addListener('didSendNetworkData',function(s){return n.__didUploadProgress.apply(n,t(s))})),this._subscriptions.push(v.addListener('didReceiveNetworkResponse',function(s){return n.__didReceiveResponse.apply(n,t(s))})),this._subscriptions.push(v.addListener('didReceiveNetworkData',function(s){return n.__didReceiveData.apply(n,t(s))})),this._subscriptions.push(v.addListener('didReceiveNetworkIncrementalData',function(s){return n.__didReceiveIncrementalData.apply(n,t(s))})),this._subscriptions.push(v.addListener('didReceiveNetworkDataProgress',function(s){return n.__didReceiveDataProgress.apply(n,t(s))})),this._subscriptions.push(v.addListener('didCompleteNetworkResponse',function(s){return n.__didCompleteResponse.apply(n,t(s))}));var h='text';'arraybuffer'===this._responseType&&(h='base64'),'blob'===this._responseType&&(h='blob');var p;p='unknown'!==n._trackingName?n._trackingName:n._url,n._perfKey='network_XMLHttpRequest_'+String(p),f.startTimespan(n._perfKey),E(n._method,'XMLHttpRequest method needs to be defined (%s).',p),E(n._url,'XMLHttpRequest URL needs to be defined (%s).',p),v.sendRequest(n._method,n._trackingName,n._url,n._headers,s,h,o,n.timeout,n.__didCreateRequest.bind(n),n.withCredentials)}},{key:"abort",value:function(){this._aborted=!0,this._requestId&&v.abortRequest(this._requestId),this.readyState===this.UNSENT||this.readyState===this.OPENED&&!this._sent||this.readyState===this.DONE||(this._reset(),this.setReadyState(this.DONE)),this._reset()}},{key:"setResponseHeaders",value:function(t){this.responseHeaders=t||null;var s=t||{};this._lowerCaseResponseHeaders=Object.keys(s).reduce(function(t,n){return t[n.toLowerCase()]=s[n],t},{})}},{key:"setReadyState",value:function(t){this.readyState=t,this.dispatchEvent({type:'readystatechange'}),t===this.DONE&&(this._aborted?this.dispatchEvent({type:'abort'}):this._hasError?this._timedOut?this.dispatchEvent({type:'timeout'}):this.dispatchEvent({type:'error'}):this.dispatchEvent({type:'load'}),this.dispatchEvent({type:'loadend'}))}},{key:"addEventListener",value:function(t,n){'readystatechange'!==t&&'progress'!==t||(this._incrementalEvents=!0),s(u(y.prototype),"addEventListener",this).call(this,t,n)}},{key:"responseType",get:function(){return this._responseType},set:function(t){if(this._sent)throw new Error("Failed to set the 'responseType' property on 'XMLHttpRequest': The response type cannot be set after the request has been sent.");T.hasOwnProperty(t)?(E(T[t]||'document'===t,"The provided value '"+t+"' is unsupported in this environment."),'blob'===t&&E(l.isAvailable,'Native module BlobModule is required for blob support'),this._responseType=t):b(!1,"The provided value '"+t+"' is not a valid 'responseType'.")}},{key:"responseText",get:function(){if(''!==this._responseType&&'text'!==this._responseType)throw new Error("The 'responseText' property is only available if 'responseType' is set to '' or 'text', but it is '"+this._responseType+"'.");return this.readyState<S?'':this._response}},{key:"response",get:function(){var t=this.responseType;if(''===t||'text'===t)return this.readyState<S||this._hasError?'':this._response;if(this.readyState!==D)return null;if(void 0!==this._cachedResponse)return this._cachedResponse;switch(t){case'document':this._cachedResponse=null;break;case'arraybuffer':this._cachedResponse=R.toByteArray(this._response).buffer;break;case'blob':if('object'==typeof this._response&&this._response)this._cachedResponse=l.createFromOptions(this._response);else{if(''!==this._response)throw new Error("Invalid response for blob: "+this._response);this._cachedResponse=l.createFromParts([])}break;case'json':try{this._cachedResponse=JSON.parse(this._response)}catch(t){this._cachedResponse=null}break;default:this._cachedResponse=null}return this._cachedResponse}}]),y})(y.apply(void 0,t(O)));L.UNSENT=k,L.OPENED=N,L.HEADERS_RECEIVED=w,L.LOADING=S,L.DONE=D,L._interceptor=null,m.exports=L},134,[25,42,30,29,45,47,44,135,139,140,143,148,6,8]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),l=t(r(d[1])),o=t(r(d[2])),n=t(r(d[3])),u=t(r(d[4])),f=t(r(d[5])),c=t(r(d[6]));function b(t,l){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);l&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),o.push.apply(o,n)}return o}function s(t){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{};o%2?b(Object(n),!0).forEach(function(o){(0,l.default)(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}var v=r(d[7]),x=r(d[8]);var y=(function(){function t(){(0,n.default)(this,t)}return(0,u.default)(t,null,[{key:"createFromParts",value:function(l,o){(0,c.default)(f.default,'NativeBlobModule is available.');var n='xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(t){var l=16*Math.random()|0;return('x'==t?l:3&l|8).toString(16)}),u=l.map(function(t){if(t instanceof ArrayBuffer||g.ArrayBufferView&&t instanceof g.ArrayBufferView)throw new Error("Creating blobs from 'ArrayBuffer' and 'ArrayBufferView' are not supported");return t instanceof v?{data:t.data,type:'blob'}:{data:String(t),type:'string'}}),b=u.reduce(function(t,l){return'string'===l.type?t+g.unescape(encodeURI(l.data)).length:t+l.data.size},0);return f.default.createFromParts(u,n),t.createFromOptions({blobId:n,offset:0,size:b,type:o?o.type:'',lastModified:o?o.lastModified:Date.now()})}},{key:"createFromOptions",value:function(t){return x.register(t.blobId),(0,o.default)(Object.create(v.prototype),{data:null==t.__collector?s(s({},t),{},{__collector:(l=t.blobId,null==g.__blobCollectorProvider?null:g.__blobCollectorProvider(l))}):t});var l}},{key:"release",value:function(t){(0,c.default)(f.default,'NativeBlobModule is available.'),x.unregister(t),x.has(t)||f.default.release(t)}},{key:"addNetworkingHandler",value:function(){(0,c.default)(f.default,'NativeBlobModule is available.'),f.default.addNetworkingHandler()}},{key:"addWebSocketHandler",value:function(t){(0,c.default)(f.default,'NativeBlobModule is available.'),f.default.addWebSocketHandler(t)}},{key:"removeWebSocketHandler",value:function(t){(0,c.default)(f.default,'NativeBlobModule is available.'),f.default.removeWebSocketHandler(t)}},{key:"sendOverSocket",value:function(t,l){(0,c.default)(f.default,'NativeBlobModule is available.'),f.default.sendOverSocket(t.data,l)}}]),t})();y.isAvailable=!!f.default,m.exports=y},135,[1,54,16,29,30,136,6,137,138]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])).get('BlobModule');e.default=u},136,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),s=(function(){function s(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0;t(this,s);var u=r(d[2]);this.data=u.createFromParts(n,o).data}return n(s,[{key:"slice",value:function(t,n){var s=r(d[2]),o=this.data,u=o.offset,l=o.size;return'number'==typeof t&&(t>l&&(t=l),u+=t,l-=t,'number'==typeof n&&(n<0&&(n=this.size+n),l=n-t)),s.createFromOptions({blobId:this.data.blobId,offset:u,size:l})}},{key:"close",value:function(){r(d[2]).release(this.data.blobId),this.data=null}},{key:"data",set:function(t){this._data=t},get:function(){if(!this._data)throw new Error('Blob has been closed and is no longer available');return this._data}},{key:"size",get:function(){return this.data.size}},{key:"type",get:function(){return this.data.type||''}}]),s})();m.exports=s},137,[29,30,135]);
__d(function(g,r,i,a,m,e,d){var n={};m.exports={register:function(t){n[t]?n[t]++:n[t]=1},unregister:function(t){n[t]&&(n[t]--,n[t]<=0&&delete n[t])},has:function(t){return n[t]&&n[t]>0}}},138,[]);
__d(function(g,r,i,a,m,e,d){'use strict';Object.defineProperty(e,'__esModule',{value:!0});var t=new WeakMap,n=new WeakMap;function o(n){var o=t.get(n);return console.assert(null!=o,"'this' is expected an Event object, but got",n),o}function l(t){null==t.passiveListener?t.event.cancelable&&(t.canceled=!0,"function"==typeof t.event.preventDefault&&t.event.preventDefault()):"undefined"!=typeof console&&"function"==typeof console.error&&console.error("Unable to preventDefault inside passive event listener invocation.",t.passiveListener)}function u(n,o){t.set(this,{eventTarget:n,event:o,eventPhase:2,currentTarget:n,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:o.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});for(var l=Object.keys(o),u=0;u<l.length;++u){var p=l[u];p in this||Object.defineProperty(this,p,s(p))}}function s(t){return{get:function(){return o(this).event[t]},set:function(n){o(this).event[t]=n},configurable:!0,enumerable:!0}}function p(t){return{value:function(){var n=o(this).event;return n[t].apply(n,arguments)},configurable:!0,enumerable:!0}}function c(t,n){var o=Object.keys(n);if(0===o.length)return t;function l(n,o){t.call(this,n,o)}l.prototype=Object.create(t.prototype,{constructor:{value:l,configurable:!0,writable:!0}});for(var u=0;u<o.length;++u){var c=o[u];if(!(c in t.prototype)){var f="function"==typeof Object.getOwnPropertyDescriptor(n,c).value;Object.defineProperty(l.prototype,c,f?p(c):s(c))}}return l}function f(t){if(null==t||t===Object.prototype)return u;var o=n.get(t);return null==o&&(o=c(f(Object.getPrototypeOf(t)),t),n.set(t,o)),o}function v(t,n){return new(f(Object.getPrototypeOf(n)))(t,n)}function y(t){return o(t).immediateStopped}function b(t,n){o(t).eventPhase=n}function h(t,n){o(t).currentTarget=n}function w(t,n){o(t).passiveListener=n}u.prototype={get type(){return o(this).event.type},get target(){return o(this).eventTarget},get currentTarget(){return o(this).currentTarget},composedPath:function(){var t=o(this).currentTarget;return null==t?[]:[t]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return o(this).eventPhase},stopPropagation:function(){var t=o(this);t.stopped=!0,"function"==typeof t.event.stopPropagation&&t.event.stopPropagation()},stopImmediatePropagation:function(){var t=o(this);t.stopped=!0,t.immediateStopped=!0,"function"==typeof t.event.stopImmediatePropagation&&t.event.stopImmediatePropagation()},get bubbles(){return Boolean(o(this).event.bubbles)},get cancelable(){return Boolean(o(this).event.cancelable)},preventDefault:function(){l(o(this))},get defaultPrevented(){return o(this).canceled},get composed(){return Boolean(o(this).event.composed)},get timeStamp(){return o(this).timeStamp},get srcElement(){return o(this).eventTarget},get cancelBubble(){return o(this).stopped},set cancelBubble(t){if(t){var n=o(this);n.stopped=!0,"boolean"==typeof n.event.cancelBubble&&(n.event.cancelBubble=!0)}},get returnValue(){return!o(this).canceled},set returnValue(t){t||l(o(this))},initEvent:function(){}},Object.defineProperty(u.prototype,"constructor",{value:u,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.Event&&(Object.setPrototypeOf(u.prototype,window.Event.prototype),n.set(window.Event.prototype,u));var T=new WeakMap,P=3;function x(t){return null!==t&&"object"==typeof t}function E(t){var n=T.get(t);if(null==n)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return n}function O(t){return{get:function(){for(var n=E(this).get(t);null!=n;){if(n.listenerType===P)return n.listener;n=n.next}return null},set:function(n){"function"==typeof n||x(n)||(n=null);for(var o=E(this),l=null,u=o.get(t);null!=u;)u.listenerType===P?null!==l?l.next=u.next:null!==u.next?o.set(t,u.next):o.delete(t):l=u,u=u.next;if(null!==n){var s={listener:n,listenerType:P,passive:!1,once:!1,next:null};null===l?o.set(t,s):l.next=s}},configurable:!0,enumerable:!0}}function j(t,n){Object.defineProperty(t,"on"+n,O(n))}function B(t){function n(){A.call(this)}n.prototype=Object.create(A.prototype,{constructor:{value:n,configurable:!0,writable:!0}});for(var o=0;o<t.length;++o)j(n.prototype,t[o]);return n}function A(){if(!(this instanceof A)){if(1===arguments.length&&Array.isArray(arguments[0]))return B(arguments[0]);if(arguments.length>0){for(var t=new Array(arguments.length),n=0;n<arguments.length;++n)t[n]=arguments[n];return B(t)}throw new TypeError("Cannot call a class as a function")}T.set(this,new Map)}A.prototype={addEventListener:function(t,n,o){if(null!=n){if("function"!=typeof n&&!x(n))throw new TypeError("'listener' should be a function or an object.");var l=E(this),u=x(o),s=(u?Boolean(o.capture):Boolean(o))?1:2,p={listener:n,listenerType:s,passive:u&&Boolean(o.passive),once:u&&Boolean(o.once),next:null},c=l.get(t);if(void 0!==c){for(var f=null;null!=c;){if(c.listener===n&&c.listenerType===s)return;f=c,c=c.next}f.next=p}else l.set(t,p)}},removeEventListener:function(t,n,o){if(null!=n)for(var l=E(this),u=(x(o)?Boolean(o.capture):Boolean(o))?1:2,s=null,p=l.get(t);null!=p;){if(p.listener===n&&p.listenerType===u)return void(null!==s?s.next=p.next:null!==p.next?l.set(t,p.next):l.delete(t));s=p,p=p.next}},dispatchEvent:function(t){if(null==t||"string"!=typeof t.type)throw new TypeError('"event.type" should be a string.');var n=E(this),o=t.type,l=n.get(o);if(null==l)return!0;for(var u=v(this,t),s=null;null!=l;){if(l.once?null!==s?s.next=l.next:null!==l.next?n.set(o,l.next):n.delete(o):s=l,w(u,l.passive?l.listener:null),"function"==typeof l.listener)try{l.listener.call(this,u)}catch(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t)}else l.listenerType!==P&&"function"==typeof l.listener.handleEvent&&l.listener.handleEvent(u);if(y(u))break;l=l.next}return w(u,null),b(u,0),h(u,null),!u.defaultPrevented}},Object.defineProperty(A.prototype,"constructor",{value:A,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.EventTarget&&Object.setPrototypeOf(A.prototype,window.EventTarget.prototype),e.defineEventAttribute=j,e.EventTarget=A,e.default=A,m.exports=A,m.exports.EventTarget=m.exports.default=A,m.exports.defineEventAttribute=j},139,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0])();m.exports=t},140,[141]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),s=(r(d[1]),g.nativeQPLTimestamp||g.nativePerformanceNow||r(d[2])),n={};m.exports=function(){return{_timespans:{},_extras:{},_points:{},addTimespan:function(t,s,n){this._timespans[t]||(this._timespans[t]={description:n,totalTime:s})},startTimespan:function(o,p){this._timespans[o]||(this._timespans[o]={description:p,startTime:s()},n[o]=t.beginAsyncEvent(o))},stopTimespan:function(o,p){var u=this._timespans[o];u&&u.startTime&&(!u.endTime||(null==p?void 0:p.update))&&(u.endTime=s(),u.totalTime=u.endTime-(u.startTime||0),null!=n[o]&&(t.endAsyncEvent(o,n[o]),delete n[o]))},clear:function(){this._timespans={},this._extras={},this._points={}},clearCompleted:function(){for(var t in this._timespans)this._timespans[t].totalTime&&delete this._timespans[t];this._extras={},this._points={}},clearExceptTimespans:function(t){this._timespans=Object.keys(this._timespans).reduce(function(s,n){return-1!==t.indexOf(n)&&(s[n]=this._timespans[n]),s},{}),this._extras={},this._points={}},currentTimestamp:function(){return s()},getTimespans:function(){return this._timespans},hasTimespan:function(t){return!!this._timespans[t]},logTimespans:function(){},addTimespans:function(t,s){for(var n=0,o=t.length;n<o;n+=2){var p=s[n/2];this.addTimespan(p,t[n+1]-t[n],p)}},setExtra:function(t,s){this._extras[t]||(this._extras[t]=s)},getExtras:function(){return this._extras},removeExtra:function(t){var s=this._extras[t];return delete this._extras[t],s},logExtras:function(){},markPoint:function(t,n){this._points[t]||(this._points[t]=null!=n?n:s())},getPoints:function(){return this._points},logPoints:function(){},logEverything:function(){this.logTimespans(),this.logExtras(),this.logPoints()}}}},141,[32,142,130]);
__d(function(g,r,i,a,m,e,d){'use strict';m.exports=function(){var n;return(n=console).log.apply(n,arguments)}},142,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=t(r(d[1])),c=t(r(d[2])),u=t(r(d[3])),o=t(r(d[4])),f=t(r(d[5])),s=t(r(d[6])),l=t(r(d[7]));function p(t,n){var c=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),c.push.apply(c,u)}return c}function y(t){for(var c=1;c<arguments.length;c++){var u=null!=arguments[c]?arguments[c]:{};c%2?p(Object(u),!0).forEach(function(c){(0,n.default)(t,c,u[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(u)):p(Object(u)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(u,n))})}return t}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var b=r(d[8]),h=r(d[9]),v=(function(t){(0,o.default)(v,t);var n,p,b=(n=v,p=O(),function(){var t,c=(0,s.default)(n);if(p){var u=(0,s.default)(this).constructor;t=Reflect.construct(c,arguments,u)}else t=c.apply(this,arguments);return(0,f.default)(this,t)});function v(){return(0,c.default)(this,v),b.call(this,l.default)}return(0,u.default)(v,[{key:"sendRequest",value:function(t,n,c,u,o,f,s,p,O,b){var v=h(o);l.default.sendRequest({method:t,url:c,data:y(y({},v),{},{trackingName:n}),headers:u,responseType:f,incrementalUpdates:s,timeout:p,withCredentials:b},O)}},{key:"abortRequest",value:function(t){l.default.abortRequest(t)}},{key:"clearCookies",value:function(t){l.default.clearCookies(t)}}]),v})(b);m.exports=new v},143,[1,54,29,30,45,47,44,144,145,146]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r(d[1])).getEnforcing('Networking');e.default=n},144,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]),u=r(d[4]),l=r(d[5]);function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var v=r(d[6]),f=(r(d[7]),r(d[8])),h=r(d[9]),p=(function(p){s(M,v);var y,_,L=(y=M,_=c(),function(){var t,n=l(y);if(_){var o=l(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return u(this,t)});function M(n){var o;return t(this,M),o=L.call(this,f.sharedSubscriber),h(n,'Native module cannot be null.'),o._nativeModule=n,o}return n(M,[{key:"addListener",value:function(t,n,s){return null!=this._nativeModule&&this._nativeModule.addListener(t),o(l(M.prototype),"addListener",this).call(this,t,n,s)}},{key:"removeAllListeners",value:function(t){h(t,'eventType argument is required.');var n=this.listeners(t).length;null!=this._nativeModule&&this._nativeModule.removeListeners(n),o(l(M.prototype),"removeAllListeners",this).call(this,t)}},{key:"removeSubscription",value:function(t){null!=this._nativeModule&&this._nativeModule.removeListeners(1),o(l(M.prototype),"removeSubscription",this).call(this,t)}}]),M})();m.exports=p},145,[29,30,42,45,47,44,49,57,41,6]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),f=r(d[2]);m.exports=function(s){return'string'==typeof s?{string:s}:s instanceof n?{blob:s.data}:s instanceof f?{formData:s.getParts()}:s instanceof ArrayBuffer||ArrayBuffer.isView(s)?{base64:t(s)}:s}},146,[147,137,149]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);m.exports=function(f){if(f instanceof ArrayBuffer&&(f=new Uint8Array(f)),f instanceof Uint8Array)return t.fromByteArray(f);if(!ArrayBuffer.isView(f))throw new Error('data must be ArrayBuffer or typed array');var n=f,y=n.buffer,o=n.byteOffset,u=n.byteLength;return t.fromByteArray(new Uint8Array(y,o,u))}},147,[148]);
__d(function(g,r,i,a,m,e,d){'use strict';e.byteLength=function(t){var n=f(t),o=n[0],h=n[1];return 3*(o+h)/4-h},e.toByteArray=function(t){var h,u,c=f(t),C=c[0],y=c[1],s=new o(A(t,C,y)),v=0,l=y>0?C-4:C;for(u=0;u<l;u+=4)h=n[t.charCodeAt(u)]<<18|n[t.charCodeAt(u+1)]<<12|n[t.charCodeAt(u+2)]<<6|n[t.charCodeAt(u+3)],s[v++]=h>>16&255,s[v++]=h>>8&255,s[v++]=255&h;2===y&&(h=n[t.charCodeAt(u)]<<2|n[t.charCodeAt(u+1)]>>4,s[v++]=255&h);1===y&&(h=n[t.charCodeAt(u)]<<10|n[t.charCodeAt(u+1)]<<4|n[t.charCodeAt(u+2)]>>2,s[v++]=h>>8&255,s[v++]=255&h);return s},e.fromByteArray=function(n){for(var o,h=n.length,u=h%3,c=[],f=0,A=h-u;f<A;f+=16383)c.push(C(n,f,f+16383>A?A:f+16383));1===u?(o=n[h-1],c.push(t[o>>2]+t[o<<4&63]+'==')):2===u&&(o=(n[h-2]<<8)+n[h-1],c.push(t[o>>10]+t[o>>4&63]+t[o<<2&63]+'='));return c.join('')};for(var t=[],n=[],o='undefined'!=typeof Uint8Array?Uint8Array:Array,h='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',u=0,c=h.length;u<c;++u)t[u]=h[u],n[h.charCodeAt(u)]=u;function f(t){var n=t.length;if(n%4>0)throw new Error('Invalid string. Length must be a multiple of 4');var o=t.indexOf('=');return-1===o&&(o=n),[o,o===n?0:4-o%4]}function A(t,n,o){return 3*(n+o)/4-o}function C(n,o,h){for(var u,c,f=[],A=o;A<h;A+=3)u=(n[A]<<16&16711680)+(n[A+1]<<8&65280)+(255&n[A+2]),f.push(t[(c=u)>>18&63]+t[c>>12&63]+t[c>>6&63]+t[63&c]);return f.join('')}n['-'.charCodeAt(0)]=62,n['_'.charCodeAt(0)]=63},148,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=r(d[2]),c=r(d[3]);function s(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);n&&(c=c.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,c)}return o}function p(n){for(var o=1;o<arguments.length;o++){var c=null!=arguments[o]?arguments[o]:{};o%2?s(Object(c),!0).forEach(function(o){t(n,o,c[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(c)):s(Object(c)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(c,t))})}return n}var f=(function(){function t(){o(this,t),this._parts=[]}return c(t,[{key:"append",value:function(t,n){this._parts.push([t,n])}},{key:"getParts",value:function(){return this._parts.map(function(t){var o=n(t,2),c=o[0],s=o[1],f={'content-disposition':'form-data; name="'+c+'"'};return'object'==typeof s&&s?('string'==typeof s.name&&(f['content-disposition']+='; filename="'+s.name+'"'),'string'==typeof s.type&&(f['content-type']=s.type),p(p({},s),{},{headers:f,fieldName:c})):{string:String(s),headers:f,fieldName:c}})}}]),t})();m.exports=f},149,[54,17,29,30]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),s=t(r(d[1])),n=t(r(d[2])),o=t(r(d[3])),c=t(r(d[4])),u=t(r(d[5])),l=t(r(d[6])),f=t(r(d[7]));function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var y=r(d[8]),b=r(d[9]),p=r(d[10]),v=r(d[11]),_=r(d[12]),E=r(d[13]),k=r(d[14]),S=r(d[15]),I=0,N=1,w=2,O=3,C=0,L=(function(t){(0,c.default)(A,t);var p,L,T=(p=A,L=h(),function(){var t,s=(0,l.default)(p);if(L){var n=(0,l.default)(this).constructor;t=Reflect.construct(s,arguments,n)}else t=s.apply(this,arguments);return(0,u.default)(this,t)});function A(t,o,c){var u;(0,n.default)(this,A),(u=T.call(this)).CONNECTING=I,u.OPEN=N,u.CLOSING=w,u.CLOSED=O,u.readyState=I,'string'==typeof o&&(o=[o]);var l=c||{},h=l.headers,y=void 0===h?{}:h,b=(0,s.default)(l,["headers"]);return b&&'string'==typeof b.origin&&(console.warn('Specifying `origin` as a WebSocket connection option is deprecated. Include it under `headers` instead.'),y.origin=b.origin,delete b.origin),Object.keys(b).length>0&&console.warn('Unrecognized WebSocket connection option(s) `'+Object.keys(b).join('`, `')+"`. Did you mean to put these under `headers`?"),Array.isArray(o)||(o=null),u._eventEmitter=new v(f.default),u._socketId=C++,u._registerEvents(),f.default.connect(t,o,{headers:y},u._socketId),u}return(0,o.default)(A,[{key:"close",value:function(t,s){this.readyState!==this.CLOSING&&this.readyState!==this.CLOSED&&(this.readyState=this.CLOSING,this._close(t,s))}},{key:"send",value:function(t){if(this.readyState===this.CONNECTING)throw new Error('INVALID_STATE_ERR');if(t instanceof y)return S(b.isAvailable,'Native module BlobModule is required for blob support'),void b.sendOverSocket(t,this._socketId);if('string'!=typeof t){if(!(t instanceof ArrayBuffer||ArrayBuffer.isView(t)))throw new Error('Unsupported data type');f.default.sendBinary(k(t),this._socketId)}else f.default.send(t,this._socketId)}},{key:"ping",value:function(){if(this.readyState===this.CONNECTING)throw new Error('INVALID_STATE_ERR');f.default.ping(this._socketId)}},{key:"_close",value:function(t,s){var n='number'==typeof t?t:1e3,o='string'==typeof s?s:'';f.default.close(n,o,this._socketId),b.isAvailable&&'blob'===this._binaryType&&b.removeWebSocketHandler(this._socketId)}},{key:"_unregisterEvents",value:function(){this._subscriptions.forEach(function(t){return t.remove()}),this._subscriptions=[]}},{key:"_registerEvents",value:function(){var t=this;this._subscriptions=[this._eventEmitter.addListener('websocketMessage',function(s){if(s.id===t._socketId){var n=s.data;switch(s.type){case'binary':n=E.toByteArray(s.data).buffer;break;case'blob':n=b.createFromOptions(s.data)}t.dispatchEvent(new _('message',{data:n}))}}),this._eventEmitter.addListener('websocketOpen',function(s){s.id===t._socketId&&(t.readyState=t.OPEN,t.protocol=s.protocol,t.dispatchEvent(new _('open')))}),this._eventEmitter.addListener('websocketClosed',function(s){s.id===t._socketId&&(t.readyState=t.CLOSED,t.dispatchEvent(new _('close',{code:s.code,reason:s.reason})),t._unregisterEvents(),t.close())}),this._eventEmitter.addListener('websocketFailed',function(s){s.id===t._socketId&&(t.readyState=t.CLOSED,t.dispatchEvent(new _('error',{message:s.message})),t.dispatchEvent(new _('close',{message:s.message})),t._unregisterEvents(),t.close())})]}},{key:"binaryType",get:function(){return this._binaryType},set:function(t){if('blob'!==t&&'arraybuffer'!==t)throw new Error("binaryType must be either 'blob' or 'arraybuffer'");'blob'!==this._binaryType&&'blob'!==t||(S(b.isAvailable,'Native module BlobModule is required for blob support'),'blob'===t?b.addWebSocketHandler(this._socketId):b.removeWebSocketHandler(this._socketId)),this._binaryType=t}}]),A})(p.apply(void 0,['close','error','message','open']));L.CONNECTING=I,L.OPEN=N,L.CLOSING=w,L.CLOSED=O,m.exports=L},150,[1,55,29,30,45,47,44,151,137,135,139,145,152,148,147,6]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t(r(d[1])).getEnforcing('WebSocketModule');e.default=o},151,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),s=r(d[1]);m.exports=function n(o,c){s(this,n),this.type=o.toString(),t(this,c)}},152,[16,29]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),u=r(d[2]),c=r(d[3]),s=r(d[4]);function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var f=r(d[5]),l=r(d[6]),h=(function(h){u(R,f);var p,y,v=(p=R,y=o(),function(){var t,n=s(p);if(y){var u=s(this).constructor;t=Reflect.construct(n,arguments,u)}else t=n.apply(this,arguments);return c(this,t)});function R(n,u,c){var s;return t(this,R),l(null!=n&&null!=u,'Failed to construct `File`: Must pass both `parts` and `name` arguments.'),(s=v.call(this,n,c)).data.name=u,s}return n(R,[{key:"name",get:function(){return l(null!=this.data.name,'Files must have a name set.'),this.data.name}},{key:"lastModified",get:function(){return this.data.lastModified||0}}]),R})();m.exports=h},153,[29,30,45,47,44,137,6]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=t(r(d[1])),s=t(r(d[2])),o=t(r(d[3])),u=t(r(d[4])),c=t(r(d[5])),l=t(r(d[6]));function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}r(d[7]);var h=0,y=1,_=2,p=(function(t){(0,o.default)(R,t);var p,v,b=(p=R,v=f(),function(){var t,n=(0,c.default)(p);if(v){var s=(0,c.default)(this).constructor;t=Reflect.construct(n,arguments,s)}else t=n.apply(this,arguments);return(0,u.default)(this,t)});function R(){var t;return(0,n.default)(this,R),(t=b.call(this)).EMPTY=h,t.LOADING=y,t.DONE=_,t._aborted=!1,t._subscriptions=[],t._reset(),t}return(0,s.default)(R,[{key:"_reset",value:function(){this._readyState=h,this._error=null,this._result=null}},{key:"_clearSubscriptions",value:function(){this._subscriptions.forEach(function(t){return t.remove()}),this._subscriptions=[]}},{key:"_setReadyState",value:function(t){this._readyState=t,this.dispatchEvent({type:'readystatechange'}),t===_&&(this._aborted?this.dispatchEvent({type:'abort'}):this._error?this.dispatchEvent({type:'error'}):this.dispatchEvent({type:'load'}),this.dispatchEvent({type:'loadend'}))}},{key:"readAsArrayBuffer",value:function(){throw new Error('FileReader.readAsArrayBuffer is not implemented')}},{key:"readAsDataURL",value:function(t){var n=this;if(this._aborted=!1,null==t)throw new TypeError("Failed to execute 'readAsDataURL' on 'FileReader': parameter 1 is not of type 'Blob'");l.default.readAsDataURL(t.data).then(function(t){n._aborted||(n._result=t,n._setReadyState(_))},function(t){n._aborted||(n._error=t,n._setReadyState(_))})}},{key:"readAsText",value:function(t){var n=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:'UTF-8';if(this._aborted=!1,null==t)throw new TypeError("Failed to execute 'readAsText' on 'FileReader': parameter 1 is not of type 'Blob'");l.default.readAsText(t.data,s).then(function(t){n._aborted||(n._result=t,n._setReadyState(_))},function(t){n._aborted||(n._error=t,n._setReadyState(_))})}},{key:"abort",value:function(){this._aborted=!0,this._readyState!==h&&this._readyState!==_&&(this._reset(),this._setReadyState(_)),this._reset()}},{key:"readyState",get:function(){return this._readyState}},{key:"error",get:function(){return this._error}},{key:"result",get:function(){return this._result}}]),R})(r(d[8]).apply(void 0,['abort','error','load','loadstart','loadend','progress']));p.EMPTY=h,p.LOADING=y,p.DONE=_,m.exports=p},154,[1,29,30,45,47,44,155,137,139]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])).getEnforcing('FileReaderModule');e.default=u},155,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.URL=e.URLSearchParams=void 0;var n,o=t(r(d[1])),u=t(r(d[2])),s=t(r(d[3])),f=(r(d[4]),null);if(s.default&&'string'==typeof s.default.getConstants().BLOB_URI_SCHEME){var h=s.default.getConstants();f=h.BLOB_URI_SCHEME+':','string'==typeof h.BLOB_URI_HOST&&(f+="//"+h.BLOB_URI_HOST+"/")}n=Symbol.iterator;var l=(function(){function t(n){var u=this;(0,o.default)(this,t),this._searchParams=[],'object'==typeof n&&Object.keys(n).forEach(function(t){return u.append(t,n[t])})}return(0,u.default)(t,[{key:"append",value:function(t,n){this._searchParams.push([t,n])}},{key:"delete",value:function(t){throw new Error('not implemented')}},{key:"get",value:function(t){throw new Error('not implemented')}},{key:"getAll",value:function(t){throw new Error('not implemented')}},{key:"has",value:function(t){throw new Error('not implemented')}},{key:"set",value:function(t,n){throw new Error('not implemented')}},{key:"sort",value:function(){throw new Error('not implemented')}},{key:n,value:function(){return this._searchParams[Symbol.iterator]()}},{key:"toString",value:function(){if(0===this._searchParams.length)return'';var t=this._searchParams.length-1;return this._searchParams.reduce(function(n,o,u){return n+o.join('=')+(u===t?'':'&')},'')}}]),t})();function c(t){return/^(?:(?:(?:https?|ftp):)?\/\/)(?:(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(t)}e.URLSearchParams=l;var w=(function(){function t(n,u){(0,o.default)(this,t),this._searchParamsInstance=null;var s=null;if(!u||c(n))this._url=n,this._url.endsWith('/')||(this._url+='/');else{if('string'==typeof u){if(!c(s=u))throw new TypeError("Invalid base URL: "+s)}else'object'==typeof u&&(s=u.toString());s.endsWith('/')&&(s=s.slice(0,s.length-1)),n.startsWith('/')||(n="/"+n),s.endsWith(n)&&(n=''),this._url=""+s+n}}return(0,u.default)(t,null,[{key:"createObjectURL",value:function(t){if(null===f)throw new Error('Cannot create URL for blob!');return""+f+t.data.blobId+"?offset="+t.data.offset+"&size="+t.size}},{key:"revokeObjectURL",value:function(t){}}]),(0,u.default)(t,[{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){if(null===this._searchParamsInstance)return this._url;var t=this._url.indexOf('?')>-1?'&':'?';return this._url+t+this._searchParamsInstance.toString()}},{key:"hash",get:function(){throw new Error('not implemented')}},{key:"host",get:function(){throw new Error('not implemented')}},{key:"hostname",get:function(){throw new Error('not implemented')}},{key:"href",get:function(){return this.toString()}},{key:"origin",get:function(){throw new Error('not implemented')}},{key:"password",get:function(){throw new Error('not implemented')}},{key:"pathname",get:function(){throw new Error('not implemented')}},{key:"port",get:function(){throw new Error('not implemented')}},{key:"protocol",get:function(){throw new Error('not implemented')}},{key:"search",get:function(){throw new Error('not implemented')}},{key:"searchParams",get:function(){return null==this._searchParamsInstance&&(this._searchParamsInstance=new l),this._searchParamsInstance}},{key:"username",get:function(){throw new Error('not implemented')}}]),t})();e.URL=w},156,[1,29,30,136,137]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),o=r(d[1]),n=r(d[2]),l=r(d[3]),c=r(d[4]);function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}Object.defineProperty(e,'__esModule',{value:!0});var f=r(d[5]),b=(function(f){n(h,f);var b,s,y=(b=h,s=u(),function(){var t,o=c(b);if(s){var n=c(this).constructor;t=Reflect.construct(o,arguments,n)}else t=o.apply(this,arguments);return l(this,t)});function h(){throw t(this,h),y.call(this),new TypeError("AbortSignal cannot be constructed directly")}return o(h,[{key:"aborted",get:function(){var t=p.get(this);if("boolean"!=typeof t)throw new TypeError("Expected 'this' to be an 'AbortSignal' object, but got "+(null===this?"null":typeof this));return t}}]),h})(f.EventTarget);f.defineEventAttribute(b.prototype,"abort");var p=new WeakMap;Object.defineProperties(b.prototype,{aborted:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(b.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});var s=(function(){function n(){var o;t(this,n),y.set(this,(o=Object.create(b.prototype),f.EventTarget.call(o),p.set(o,!1),o))}return o(n,[{key:"abort",value:function(){var t;t=h(this),!1===p.get(t)&&(p.set(t,!0),t.dispatchEvent({type:"abort"}))}},{key:"signal",get:function(){return h(this)}}]),n})(),y=new WeakMap;function h(t){var o=y.get(t);if(null==o)throw new TypeError("Expected 'this' to be an 'AbortController' object, but got "+(null===t?"null":typeof t));return o}Object.defineProperties(s.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(s.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"}),e.AbortController=s,e.AbortSignal=b,e.default=s,m.exports=s,m.exports.AbortController=m.exports.default=s,m.exports.AbortSignal=b},157,[29,30,45,47,44,139]);
__d(function(g,r,i,a,m,e,d){'use strict';g.alert||(g.alert=function(t){r(d[0]).alert('Alert',''+t)})},158,[159]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=t(r(d[1])),o=t(r(d[2])),s=t(r(d[3])),l=t(r(d[4])),u=t(r(d[5])),c=(function(){function t(){(0,n.default)(this,t)}return(0,o.default)(t,null,[{key:"alert",value:function(n,o,u,c){if('ios'===s.default.OS)t.prompt(n,o,u,'default');else if('android'===s.default.OS){if(!l.default)return;var f=l.default.getConstants(),v={title:n||'',message:o||'',cancelable:!1};c&&c.cancelable&&(v.cancelable=c.cancelable);var p=u?u.slice(0,3):[{text:"OK"}],b=p.pop(),y=p.pop(),h=p.pop();h&&(v.buttonNeutral=h.text||''),y&&(v.buttonNegative=y.text||''),b&&(v.buttonPositive=b.text||"OK");l.default.showAlert(v,function(t){return console.warn(t)},function(t,n){t===f.buttonClicked?n===f.buttonNeutral?h.onPress&&h.onPress():n===f.buttonNegative?y.onPress&&y.onPress():n===f.buttonPositive&&b.onPress&&b.onPress():t===f.dismissed&&c&&c.onDismiss&&c.onDismiss()})}}},{key:"prompt",value:function(t,n,o){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:'plain-text',c=arguments.length>4?arguments[4]:void 0,f=arguments.length>5?arguments[5]:void 0;if('ios'===s.default.OS){var v,p,b=[],y=[];'function'==typeof o?b=[o]:Array.isArray(o)&&o.forEach(function(t,n){if(b[n]=t.onPress,'cancel'===t.style?v=String(n):'destructive'===t.style&&(p=String(n)),t.text||n<(o||[]).length-1){var s={};s[n]=t.text||'',y.push(s)}}),u.default.alertWithArgs({title:t||'',message:n||void 0,buttons:y,type:l||void 0,defaultValue:c,cancelButtonKey:v,destructiveButtonKey:p,keyboardType:f},function(t,n){var o=b[t];o&&o(n)})}}}]),t})();m.exports=c},159,[1,29,30,57,160,161]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t(r(d[1])).get('DialogManagerAndroid');e.default=o},160,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0])(r(d[1]));m.exports={alertWithArgs:function(l,u){null!=t.default&&t.default.alertWithArgs(l,u)}}},161,[1,162]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])).get('AlertManager');e.default=u},162,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]).polyfillObjectProperty,o=g.navigator;void 0===o&&(g.navigator=o={}),t(o,'product',function(){return'ReactNative'})},163,[125]);
__d(function(g,r,i,a,m,e,d){'use strict';var n;if(g.RN$Bridgeless&&g.RN$registerCallableModule)n=g.RN$registerCallableModule;else{var t=r(d[0]);n=function(n,u){return t.registerLazyCallableModule(n,u)}}n('Systrace',function(){return r(d[1])}),n('JSTimers',function(){return r(d[2])}),n('HeapCapture',function(){return r(d[3])}),n('SamplingProfiler',function(){return r(d[4])}),n('RCTLog',function(){return r(d[5])}),n('RCTDeviceEventEmitter',function(){return r(d[6])}),n('RCTNativeAppEventEmitter',function(){return r(d[7])}),n('GlobalPerformanceLogger',function(){return r(d[8])}),n('JSDevSupportModule',function(){return r(d[9])}),n('HMRClient',function(){return r(d[10])})},164,[23,32,128,165,167,169,41,170,140,171,173]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0])(r(d[1])),p={captureHeap:function(p){var u=null;try{g.nativeCaptureHeap(p),console.log('HeapCapture.captureHeap succeeded: '+p)}catch(t){console.log('HeapCapture.captureHeap error: '+t.toString()),u=t.toString()}t.default&&t.default.captureComplete(p,u)}};m.exports=p},165,[1,166]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])).get('JSCHeapCapture');e.default=u},166,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var o={poke:function(o){var l=null,n=null;try{null===(n=g.pokeSamplingProfiler())?console.log('The JSC Sampling Profiler has started'):console.log('The JSC Sampling Profiler has stopped')}catch(o){console.log('Error occurred when restarting Sampling Profiler: '+o.toString()),l=o.toString()}var t=r(d[0]).default;t&&t.operationComplete(o,n,l)}};m.exports=o},167,[168]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=t(r(d[1])).get('JSCSamplingProfiler');e.default=l},168,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var o=r(d[0]),n={log:'log',info:'info',warn:'warn',error:'error',fatal:'error'},l=null,t={logIfNoNativeHook:function(o){for(var n=arguments.length,f=new Array(n>1?n-1:0),c=1;c<n;c++)f[c-1]=arguments[c];void 0===g.nativeLoggingHook?t.logToConsole.apply(t,[o].concat(f)):l&&'warn'===o&&l.apply(void 0,f)},logToConsole:function(l){var t,f=n[l];o(f,'Level "'+l+'" not one of '+Object.keys(n).toString());for(var c=arguments.length,v=new Array(c>1?c-1:0),s=1;s<c;s++)v[s-1]=arguments[s];(t=console)[f].apply(t,v)},setWarningHandler:function(o){l=o}};m.exports=t},169,[6]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);m.exports=t},170,[41]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0])(r(d[1])),_=r(d[2]),o={getJSHierarchy:function(o){if(t.default){var n=t.default.getConstants();try{var E=(0,_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.computeComponentStackForErrorReporting)(o);E?t.default.onSuccess(E):t.default.onFailure(n.ERROR_CODE_VIEW_NOT_FOUND,"Component stack doesn't exist for tag "+o)}catch(_){t.default.onFailure(n.ERROR_CODE_EXCEPTION,_.message)}}}};m.exports=o},171,[1,172,94]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])).get('JSDevSupport');e.default=u},172,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var n={setup:function(){},enable:function(){console.error("Fast Refresh is disabled in JavaScript bundles built in production mode. Did you forget to run Metro?")},disable:function(){},registerBundle:function(){},log:function(){}};m.exports=n},173,[]);
__d(function(g,r,i,a,m,e,d){'use strict';g.__fetchSegment=function(t,n,c){r(d[0]).default.fetchSegment(t,n,function(t){if(t){var n=new Error(t.message);n.code=t.code,c(n)}c(null)})},g.__getSegment=function(t,n,c){var f=r(d[0]).default;if(!f.getSegment)throw new Error('SegmentFetcher.getSegment must be defined');f.getSegment(t,n,function(t,n){if(t){var f=new Error(t.message);f.code=t.code,c(f)}c(null,n)})}},174,[175]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r(d[1])).getEnforcing('SegmentFetcher');e.default=n},175,[12,14]);
__d(function(g,r,i,a,m,e,d){m.exports={get BatchedBridge(){return r(d[0])},get ExceptionsManager(){return r(d[1])},get Platform(){return r(d[2])},get RCTEventEmitter(){return r(d[3])},get ReactNativeViewConfigRegistry(){return r(d[4])},get TextInputState(){return r(d[5])},get UIManager(){return r(d[6])},get deepDiffer(){return r(d[7])},get deepFreezeAndThrowOnMutationInDev(){return r(d[8])},get flattenStyle(){return r(d[9])},get ReactFiberErrorDialog(){return r(d[10])}}},176,[23,102,57,177,178,179,79,197,33,90,198]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n={register:function(n){t.registerCallableModule('RCTEventEmitter',n)}};m.exports=n},177,[23]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n={},o={};e.customBubblingEventTypes=n,e.customDirectEventTypes=o;var s=new Map,u=new Map;function l(t){var s=t.bubblingEventTypes,u=t.directEventTypes;if(null!=s)for(var l in s)null==n[l]&&(n[l]=s[l]);if(null!=u)for(var c in u)null==o[c]&&(o[c]=u[c])}e.register=function(n,o){return t(!s.has(n),'Tried to register two views with the same name %s',n),t('function'==typeof o,'View config getter callback for component `%s` must be a function (received `%s`)',n,null===o?'null':typeof o),s.set(n,o),n},e.get=function(n){var o;if(u.has(n))o=u.get(n);else{var c=s.get(n);'function'!=typeof c&&t(!1,'View config getter callback for component `%s` must be a function (received `%s`).%s',n,null===c?'null':typeof c,'string'==typeof n[0]&&/[a-z]/.test(n[0])?' Make sure to start component names with a capital letter.':''),l(o=c()),u.set(n,o),s.set(n,null)}return t(o,'View config not found for name %s',n),o}},178,[6]);
__d(function(g,r,i,a,m,e,d){'use strict';r(d[0]);var n=r(d[1]),u=(r(d[2]),r(d[3]),r(d[4]).findNodeHandle),t=null,o=new Set;function l(n){t!==n&&null!=n&&(t=n)}function f(n){t===n&&null!=n&&(t=null)}m.exports={currentlyFocusedInput:function(){return t},focusInput:l,blurInput:f,currentlyFocusedField:function(){return u(t)},focusField:function(n){},blurField:function(n){},focusTextInput:function(u){'number'!=typeof u&&t!==u&&null!=u&&(l(u),n.Commands.focus(u))},blurTextInput:function(u){'number'!=typeof u&&t===u&&null!=u&&(f(u),n.Commands.blur(u))},registerInput:function(n){'number'!=typeof n&&o.add(n)},unregisterInput:function(n){'number'!=typeof n&&o.delete(n)},isTextInput:function(n){return'number'!=typeof n&&o.has(n)}}},179,[180,195,59,57,94]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Commands=void 0;var u,o=n(r(d[2])),s=n(r(d[3])),l=(t(r(d[4])),n(r(d[5]))),f=r(d[6]),c=(0,s.default)({supportedCommands:['focus','blur','setTextAndSelection']});e.Commands=c,g.RN$Bridgeless?(f.register('AndroidTextInput',function(){return l.default}),u='AndroidTextInput'):u=(0,o.default)('AndroidTextInput');var p=u;e.default=p},180,[12,1,181,93,59,192,178]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]),t=r(d[1]);m.exports=function(u){return n(u,function(){return t(u)})}},181,[182,183]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]).ReactNativeViewConfigRegistry.register;m.exports=function(n,s){return t(n,s)}},182,[176]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]);function o(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,s)}return o}function s(t){for(var s=1;s<arguments.length;s++){var c=null!=arguments[s]?arguments[s]:{};s%2?o(Object(c),!0).forEach(function(o){n(t,o,c[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):o(Object(c)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(c,n))})}return t}var c=r(d[2]),u=r(d[3]),l=r(d[4]),p=r(d[5]),b=r(d[6]),v=r(d[7]),f=r(d[8]),y=r(d[9]),O=r(d[10]),C=r(d[11]),E=r(d[12]);var w=!1;function T(t){var n=u.getConstants();n.ViewManagerNames||n.LazyViewManagersEnabled?t=P(t,u.getDefaultEventTypes()):(t.bubblingEventTypes=P(t.bubblingEventTypes,n.genericBubblingEventTypes),t.directEventTypes=P(t.directEventTypes,n.genericDirectEventTypes))}function P(t,n){if(!n)return t;if(!t)return n;for(var o in n)if(n.hasOwnProperty(o)){var s=n[o];if(t.hasOwnProperty(o)){var c=t[o];'object'==typeof s&&'object'==typeof c&&(s=P(c,s))}t[o]=s}return t}function j(t){switch(t){case'CATransform3D':return b;case'CGPoint':return v;case'CGSize':return C;case'UIEdgeInsets':return l}return null}function h(t){switch(t){case'CGColor':case'UIColor':return f;case'CGColorArray':case'UIColorArray':return y;case'CGImage':case'UIImage':case'RCTImageSource':return O;case'Color':return f;case'ColorArray':return y}return null}m.exports=function(n){var o=u.getViewManagerConfig(n);p(null!=o&&null!=o.NativeProps,'requireNativeComponent: "%s" was not found in the UIManager.',n);for(var l=o.baseModuleName,b=o.bubblingEventTypes,v=o.directEventTypes,f=o.NativeProps;l;){var y=u.getViewManagerConfig(l);y?(b=s(s({},y.bubblingEventTypes),b),v=s(s({},y.directEventTypes),v),f=s(s({},y.NativeProps),f),l=y.baseModuleName):(E(!1,'Base module "%s" does not exist',l),l=null)}var O={};for(var C in f){var P=f[C],I=j(P),N=h(P);O[C]=null==I&&null==N||{diff:I,process:N}}return O.style=c,t(o,{uiViewClassName:n,validAttributes:O,bubblingEventTypes:b,directEventTypes:v}),w||(T(o),w=!0),o}},183,[16,54,66,79,184,6,185,186,71,187,188,88,8]);
__d(function(g,r,i,a,m,e,d){'use strict';var t={top:void 0,left:void 0,right:void 0,bottom:void 0};m.exports=function(o,f){return(o=o||t)!==(f=f||t)&&(o.top!==f.top||o.left!==f.left||o.right!==f.right||o.bottom!==f.bottom)}},184,[]);
__d(function(g,r,i,a,m,e,d){'use strict';m.exports=function(t,n){return!(t===n||t&&n&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[5]===n[5]&&t[10]===n[10]&&t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[11]===n[11]&&t[15]===n[15])}},185,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t={x:void 0,y:void 0};m.exports=function(n,o){return(n=n||t)!==(o=o||t)&&(n.x!==o.x||n.y!==o.y)}},186,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]);m.exports=function(t){return null==t?null:t.map(n)}},187,[71]);
__d(function(g,r,i,a,m,e,d){'use strict';var t,n,s,u,o=r(d[0]),f=r(d[1]);function c(){if(u)return u;var t=g.nativeExtensions&&g.nativeExtensions.SourceCode;return t||(t=r(d[2]).default),u=t.getConstants().scriptURL}function l(){if(void 0===n){var t=c(),s=t&&t.match(/^https?:\/\/.*?\//);n=s?s[0]:null}return n}function v(t){if(t){if(t.startsWith('assets://'))return null;(t=t.substring(0,t.lastIndexOf('/')+1)).includes('://')||(t='file://'+t)}return t}m.exports=function(n){if('object'==typeof n)return n;var u=o.getAssetByID(n);if(!u)return null;var p=new f(l(),(void 0===s&&(s=v(c())),s),u);return t?t(p):p.defaultAsset()},m.exports.pickScale=f.pickScale,m.exports.setCustomSourceTransformer=function(n){t=n}},188,[189,190,113]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=[];m.exports={registerAsset:function(s){return t.push(s)},getAssetByID:function(s){return t[s-1]}}},189,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),s=r(d[1]),n=r(d[2]),u=(r(d[3]),r(d[4])),o=r(d[5]);function l(t){var s=h.pickScale(t.scales,n.get()),o=1===s?'':'@'+s+'x';return u.getBasePath(t)+'/'+t.name+o+'.'+t.type}function c(t){var s=h.pickScale(t.scales,n.get());return u.getAndroidResourceFolderName(t,s)+'/'+u.getAndroidResourceIdentifier(t)+'.'+t.type}var h=(function(){function h(s,n,u){t(this,h),this.serverUrl=s,this.jsbundleUrl=n,this.asset=u}return s(h,[{key:"isLoadedFromServer",value:function(){return!!this.serverUrl}},{key:"isLoadedFromFileSystem",value:function(){return!(!this.jsbundleUrl||!this.jsbundleUrl.startsWith('file://'))}},{key:"defaultAsset",value:function(){return this.isLoadedFromServer()?this.assetServerURL():this.scaledAssetURLNearBundle()}},{key:"assetServerURL",value:function(){return o(!!this.serverUrl,'need server to load from'),this.fromSource(this.serverUrl+l(this.asset)+"?platform=ios&hash="+this.asset.hash)}},{key:"scaledAssetPath",value:function(){return this.fromSource(l(this.asset))}},{key:"scaledAssetURLNearBundle",value:function(){var t=this.jsbundleUrl||'file://';return this.fromSource(t+l(this.asset).replace(/\.\.\//g,'_'))}},{key:"resourceIdentifierWithoutScale",value:function(){return o(!1,'resource identifiers work on Android'),this.fromSource(u.getAndroidResourceIdentifier(this.asset))}},{key:"drawableFolderInBundle",value:function(){var t=this.jsbundleUrl||'file://';return this.fromSource(t+c(this.asset))}},{key:"fromSource",value:function(t){return{__packager_asset:!0,width:this.asset.width,height:this.asset.height,uri:t,scale:h.pickScale(this.asset.scales,n.get())}}}],[{key:"pickScale",value:function(t,s){for(var n=0;n<t.length;n++)if(t[n]>=s)return t[n];return t[t.length-1]||1}}]),h})();m.exports=h},190,[29,30,63,57,191,6]);
__d(function(g,r,i,a,m,e,d){'use strict';var t={.75:'ldpi',1:'mdpi',1.5:'hdpi',2:'xhdpi',3:'xxhdpi',4:'xxxhdpi'};function n(n){if(n.toString()in t)return t[n.toString()];throw new Error('no such scale '+n.toString())}var o=new Set(['gif','jpeg','jpg','png','svg','webp','xml']);function s(t){var n=t.httpServerLocation;return'/'===n[0]&&(n=n.substr(1)),n}m.exports={getAndroidAssetSuffix:n,getAndroidResourceFolderName:function(s,u){if(!o.has(s.type))return'raw';var c=n(u);if(!c)throw new Error("Don't know which android drawable suffix to use for scale: "+u+'\nAsset: '+JSON.stringify(s,null,'\t')+'\nPossible scales are:'+JSON.stringify(t,null,'\t'));return'drawable-'+c},getAndroidResourceIdentifier:function(t){return(s(t)+'/'+t.name).toLowerCase().replace(/\//g,'_').replace(/([^a-z0-9_])/g,'').replace(/^assets_/,'')},getBasePath:s}},191,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=t(r(d[1]));function o(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);n&&(l=l.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,l)}return o}function l(t){for(var l=1;l<arguments.length;l++){var c=null!=arguments[l]?arguments[l]:{};l%2?o(Object(c),!0).forEach(function(o){(0,n.default)(t,o,c[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):o(Object(c)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(c,n))})}return t}var c={uiViewClassName:'AndroidTextInput',bubblingEventTypes:{topTextInput:{phasedRegistrationNames:{bubbled:'onTextInput',captured:'onTextInputCapture'}}},directEventTypes:{},validAttributes:l(l({},t(r(d[2])).default.validAttributes),{},{maxFontSizeMultiplier:!0,placeholder:!0,inlineImagePadding:!0,contextMenuHidden:!0,textShadowColor:{process:r(d[3])},maxLength:!0,selectTextOnFocus:!0,textShadowRadius:!0,underlineColorAndroid:{process:r(d[3])},textDecorationLine:!0,blurOnSubmit:!0,textAlignVertical:!0,fontStyle:!0,textShadowOffset:!0,selectionColor:{process:r(d[3])},selection:!0,placeholderTextColor:{process:r(d[3])},importantForAutofill:!0,lineHeight:!0,textTransform:!0,returnKeyType:!0,keyboardType:!0,multiline:!0,color:!0,autoCompleteType:!0,numberOfLines:!0,letterSpacing:!0,returnKeyLabel:!0,fontSize:!0,onKeyPress:!0,cursorColor:{process:r(d[3])},text:!0,showSoftInputOnFocus:!0,textAlign:!0,autoCapitalize:!0,autoCorrect:!0,caretHidden:!0,secureTextEntry:!0,textBreakStrategy:!0,onScroll:!0,onContentSizeChange:!0,disableFullscreenUI:!0,includeFontPadding:!0,fontWeight:!0,fontFamily:!0,allowFontScaling:!0,onSelectionChange:!0,mostRecentEventCount:!0,inlineImageLeft:!0,editable:!0,fontVariant:!0})};m.exports=c},192,[1,54,193,71]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),o=t(r(d[1])),s=t(r(d[2])),n=r(d[3]);function c(t,o){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);o&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),s.push.apply(s,n)}return s}function l(t){for(var s=1;s<arguments.length;s++){var n=null!=arguments[s]?arguments[s]:{};s%2?c(Object(n),!0).forEach(function(s){(0,o.default)(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}var p={uiViewClassName:'RCTView',baseModuleName:null,Manager:'ViewManager',Commands:{},Constants:{},bubblingEventTypes:l(l({},s.default.bubblingEventTypes),{},{topBlur:{phasedRegistrationNames:{bubbled:'onBlur',captured:'onBlurCapture'}},topChange:{phasedRegistrationNames:{bubbled:'onChange',captured:'onChangeCapture'}},topEndEditing:{phasedRegistrationNames:{bubbled:'onEndEditing',captured:'onEndEditingCapture'}},topFocus:{phasedRegistrationNames:{bubbled:'onFocus',captured:'onFocusCapture'}},topKeyPress:{phasedRegistrationNames:{bubbled:'onKeyPress',captured:'onKeyPressCapture'}},topPress:{phasedRegistrationNames:{bubbled:'onPress',captured:'onPressCapture'}},topSubmitEditing:{phasedRegistrationNames:{bubbled:'onSubmitEditing',captured:'onSubmitEditingCapture'}},topTouchCancel:{phasedRegistrationNames:{bubbled:'onTouchCancel',captured:'onTouchCancelCapture'}},topTouchEnd:{phasedRegistrationNames:{bubbled:'onTouchEnd',captured:'onTouchEndCapture'}},topTouchMove:{phasedRegistrationNames:{bubbled:'onTouchMove',captured:'onTouchMoveCapture'}},topTouchStart:{phasedRegistrationNames:{bubbled:'onTouchStart',captured:'onTouchStartCapture'}}}),directEventTypes:l(l({},s.default.directEventTypes),{},{topAccessibilityAction:{registrationName:'onAccessibilityAction'},topAccessibilityEscape:{registrationName:'onAccessibilityEscape'},topAccessibilityTap:{registrationName:'onAccessibilityTap'},topLayout:{registrationName:'onLayout'},topMagicTap:{registrationName:'onMagicTap'},onGestureHandlerEvent:{registrationName:'onGestureHandlerEvent'},onGestureHandlerStateChange:{registrationName:'onGestureHandlerStateChange'}}),validAttributes:l(l({},s.default.validAttributes),{},{accessibilityActions:!0,accessibilityElementsHidden:!0,accessibilityHint:!0,accessibilityIgnoresInvertColors:!0,accessibilityLabel:!0,accessibilityLiveRegion:!0,accessibilityRole:!0,accessibilityStates:!0,accessibilityState:!0,accessibilityValue:!0,accessibilityViewIsModal:!0,accessible:!0,alignContent:!0,alignItems:!0,alignSelf:!0,aspectRatio:!0,backfaceVisibility:!0,backgroundColor:{process:r(d[4])},borderBottomColor:{process:r(d[4])},borderBottomEndRadius:!0,borderBottomLeftRadius:!0,borderBottomRightRadius:!0,borderBottomStartRadius:!0,borderBottomWidth:!0,borderColor:{process:r(d[4])},borderEndColor:{process:r(d[4])},borderEndWidth:!0,borderLeftColor:{process:r(d[4])},borderLeftWidth:!0,borderRadius:!0,borderRightColor:{process:r(d[4])},borderRightWidth:!0,borderStartColor:{process:r(d[4])},borderStartWidth:!0,borderStyle:!0,borderTopColor:{process:r(d[4])},borderTopEndRadius:!0,borderTopLeftRadius:!0,borderTopRightRadius:!0,borderTopStartRadius:!0,borderTopWidth:!0,borderWidth:!0,bottom:!0,clickable:!0,collapsable:!0,direction:!0,display:!0,elevation:!0,end:!0,flex:!0,flexBasis:!0,flexDirection:!0,flexGrow:!0,flexShrink:!0,flexWrap:!0,height:!0,hitSlop:{diff:r(d[5])},importantForAccessibility:!0,justifyContent:!0,left:!0,margin:!0,marginBottom:!0,marginEnd:!0,marginHorizontal:!0,marginLeft:!0,marginRight:!0,marginStart:!0,marginTop:!0,marginVertical:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,nativeID:!0,needsOffscreenAlphaCompositing:!0,onAccessibilityAction:!0,onAccessibilityEscape:!0,onAccessibilityTap:!0,onLayout:!0,onMagicTap:!0,opacity:!0,overflow:!0,padding:!0,paddingBottom:!0,paddingEnd:!0,paddingHorizontal:!0,paddingLeft:!0,paddingRight:!0,paddingStart:!0,paddingTop:!0,paddingVertical:!0,pointerEvents:!0,position:!0,removeClippedSubviews:!0,renderToHardwareTextureAndroid:!0,right:!0,rotation:!0,scaleX:!0,scaleY:!0,shadowColor:{process:r(d[4])},shadowOffset:{diff:r(d[6])},shadowOpacity:!0,shadowRadius:!0,shouldRasterizeIOS:!0,start:!0,style:{alignContent:!0,alignItems:!0,alignSelf:!0,aspectRatio:!0,backfaceVisibility:!0,backgroundColor:{process:r(d[4])},borderBottomColor:{process:r(d[4])},borderBottomEndRadius:!0,borderBottomLeftRadius:!0,borderBottomRightRadius:!0,borderBottomStartRadius:!0,borderBottomWidth:!0,borderColor:{process:r(d[4])},borderEndColor:{process:r(d[4])},borderEndWidth:!0,borderLeftColor:{process:r(d[4])},borderLeftWidth:!0,borderRadius:!0,borderRightColor:{process:r(d[4])},borderRightWidth:!0,borderStartColor:{process:r(d[4])},borderStartWidth:!0,borderStyle:!0,borderTopColor:{process:r(d[4])},borderTopEndRadius:!0,borderTopLeftRadius:!0,borderTopRightRadius:!0,borderTopStartRadius:!0,borderTopWidth:!0,borderWidth:!0,bottom:!0,color:{process:r(d[4])},decomposedMatrix:!0,direction:!0,display:!0,elevation:!0,end:!0,flex:!0,flexBasis:!0,flexDirection:!0,flexGrow:!0,flexShrink:!0,flexWrap:!0,fontFamily:!0,fontSize:!0,fontStyle:!0,fontVariant:!0,fontWeight:!0,height:!0,includeFontPadding:!0,justifyContent:!0,left:!0,letterSpacing:!0,lineHeight:!0,margin:!0,marginBottom:!0,marginEnd:!0,marginHorizontal:!0,marginLeft:!0,marginRight:!0,marginStart:!0,marginTop:!0,marginVertical:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,opacity:!0,overflow:!0,overlayColor:{process:r(d[4])},padding:!0,paddingBottom:!0,paddingEnd:!0,paddingHorizontal:!0,paddingLeft:!0,paddingRight:!0,paddingStart:!0,paddingTop:!0,paddingVertical:!0,position:!0,resizeMode:!0,right:!0,rotation:!0,scaleX:!0,scaleY:!0,shadowColor:{process:r(d[4])},shadowOffset:{diff:r(d[6])},shadowOpacity:!0,shadowRadius:!0,start:!0,textAlign:!0,textAlignVertical:!0,textDecorationColor:{process:r(d[4])},textDecorationLine:!0,textDecorationStyle:!0,textShadowColor:{process:r(d[4])},textShadowOffset:!0,textShadowRadius:!0,textTransform:!0,tintColor:{process:r(d[4])},top:!0,transform:'ios'===n.Platform.OS?{diff:r(d[7])}:{process:r(d[8])},transformMatrix:!0,translateX:!0,translateY:!0,width:!0,writingDirection:!0,zIndex:!0},testID:!0,top:!0,transform:'ios'===n.Platform.OS?{diff:r(d[7])}:{process:r(d[8])},translateX:!0,translateY:!0,width:!0,zIndex:!0})};m.exports=p},193,[1,54,194,5,71,184,88,185,86]);
__d(function(g,r,i,a,m,e,d){'use strict';m.exports={uiViewClassName:'RCTView',bubblingEventTypes:{topSelect:{phasedRegistrationNames:{bubbled:'onSelect',captured:'onSelectCapture'}}},directEventTypes:{topClick:{registrationName:'onClick'},topContentSizeChange:{registrationName:'onContentSizeChange'},topLoadingError:{registrationName:'onLoadingError'},topLoadingFinish:{registrationName:'onLoadingFinish'},topLoadingStart:{registrationName:'onLoadingStart'},topMessage:{registrationName:'onMessage'},topMomentumScrollBegin:{registrationName:'onMomentumScrollBegin'},topMomentumScrollEnd:{registrationName:'onMomentumScrollEnd'},topScroll:{registrationName:'onScroll'},topScrollBeginDrag:{registrationName:'onScrollBeginDrag'},topScrollEndDrag:{registrationName:'onScrollEndDrag'},topSelectionChange:{registrationName:'onSelectionChange'}},validAttributes:{hasTVPreferredFocus:!0,focusable:!0,nativeBackgroundAndroid:!0,nativeForegroundAndroid:!0,nextFocusDown:!0,nextFocusForward:!0,nextFocusLeft:!0,nextFocusRight:!0,nextFocusUp:!0}}},194,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Commands=void 0;var u,l=n(r(d[2])),s=n(r(d[3])),o=(t(r(d[4])),n(r(d[5]))),f=r(d[6]),T=(0,s.default)({supportedCommands:['focus','blur','setTextAndSelection']});e.Commands=T,g.RN$Bridgeless?(f.register('RCTSinglelineTextInputView',function(){return o.default}),u='RCTSinglelineTextInputView'):u=(0,l.default)('RCTSinglelineTextInputView');var c=u;e.default=c},195,[12,1,181,93,59,196,178]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),o=t(r(d[1]));function n(t,o){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);o&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,s)}return n}function s(t){for(var s=1;s<arguments.length;s++){var u=null!=arguments[s]?arguments[s]:{};s%2?n(Object(u),!0).forEach(function(n){(0,o.default)(t,n,u[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(u)):n(Object(u)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(u,o))})}return t}var u={uiViewClassName:'RCTSinglelineTextInputView',bubblingEventTypes:{topBlur:{phasedRegistrationNames:{bubbled:'onBlur',captured:'onBlurCapture'}},topChange:{phasedRegistrationNames:{bubbled:'onChange',captured:'onChangeCapture'}},topEndEditing:{phasedRegistrationNames:{bubbled:'onEndEditing',captured:'onEndEditingCapture'}},topFocus:{phasedRegistrationNames:{bubbled:'onFocus',captured:'onFocusCapture'}},topKeyPress:{phasedRegistrationNames:{bubbled:'onKeyPress',captured:'onKeyPressCapture'}},topSubmitEditing:{phasedRegistrationNames:{bubbled:'onSubmitEditing',captured:'onSubmitEditingCapture'}},topTouchCancel:{phasedRegistrationNames:{bubbled:'onTouchCancel',captured:'onTouchCancelCapture'}},topTouchEnd:{phasedRegistrationNames:{bubbled:'onTouchEnd',captured:'onTouchEndCapture'}},topTouchMove:{phasedRegistrationNames:{bubbled:'onTouchMove',captured:'onTouchMoveCapture'}}},directEventTypes:{},validAttributes:s(s({},t(r(d[2])).default.validAttributes),{},{fontSize:!0,fontWeight:!0,fontVariant:!0,textShadowOffset:{diff:r(d[3])},allowFontScaling:!0,fontStyle:!0,textTransform:!0,textAlign:!0,fontFamily:!0,lineHeight:!0,isHighlighted:!0,writingDirection:!0,textDecorationLine:!0,textShadowRadius:!0,letterSpacing:!0,textDecorationStyle:!0,textDecorationColor:{process:r(d[4])},color:{process:r(d[4])},maxFontSizeMultiplier:!0,textShadowColor:{process:r(d[4])},editable:!0,inputAccessoryViewID:!0,caretHidden:!0,enablesReturnKeyAutomatically:!0,placeholderTextColor:{process:r(d[4])},onSelectionChange:!0,clearButtonMode:!0,onContentSizeChange:!0,keyboardType:!0,selection:!0,returnKeyType:!0,blurOnSubmit:!0,mostRecentEventCount:!0,onChange:!0,scrollEnabled:!0,selectionColor:{process:r(d[4])},contextMenuHidden:!0,secureTextEntry:!0,onTextInput:!0,placeholder:!0,autoCorrect:!0,onScroll:!0,multiline:!0,textContentType:!0,maxLength:!0,autoCapitalize:!0,keyboardAppearance:!0,passwordRules:!0,spellCheck:!0,selectTextOnFocus:!0,text:!0,clearTextOnFocus:!0})};m.exports=u},196,[1,54,193,88,71]);
__d(function(g,r,i,a,m,e,d){'use strict';var n;m.exports=function t(o,u){var f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,s=arguments.length>3?arguments[3]:void 0,c='number'==typeof f?s:f,l='number'==typeof f?f:-1;if(0===l)return!0;if(o===u)return!1;if('function'==typeof o&&'function'==typeof u){var v=null==c?void 0:c.unsafelyIgnoreFunctions;return null==v&&(!n||!n.onDifferentFunctionsIgnored||c&&'unsafelyIgnoreFunctions'in c||n.onDifferentFunctionsIgnored(o.name,u.name),v=!0),!v}if('object'!=typeof o||null===o)return o!==u;if('object'!=typeof u||null===u)return!0;if(o.constructor!==u.constructor)return!0;if(Array.isArray(o)){var y=o.length;if(u.length!==y)return!0;for(var p=0;p<y;p++)if(t(o[p],u[p],l-1,c))return!0}else{for(var b in o)if(t(o[b],u[b],l-1,c))return!0;for(var h in u)if(void 0===o[h]&&void 0!==u[h])return!0}return!1},m.exports.unstable_setLogListeners=function(t){n=t}},197,[]);
__d(function(g,r,i,a,m,e,d){var n=r(d[0]);m.exports={showErrorDialog:function(o){var t,c=o.componentStack,p=o.error;t=p instanceof Error?p:'string'==typeof p?new n.SyntheticError(p):new n.SyntheticError('Unspecified error');try{t.componentStack=c,t.isComponentError=!0}catch(n){}return(0,n.handleException)(t,!1),!1}}},198,[102]);
__d(function(g,r,i,a,m,e,d){'use strict';m.exports=r(d[0])},199,[200]);
__d(function(g,r,i,a,m,e,d){'use strict';var n,t,o,l,u;if("undefined"==typeof window||"function"!=typeof MessageChannel){var s=null,c=null,f=function n(){if(null!==s)try{var t=e.unstable_now();s(!0,t),s=null}catch(t){throw setTimeout(n,0),t}},b=Date.now();e.unstable_now=function(){return Date.now()-b},n=function(t){null!==s?setTimeout(n,0,t):(s=t,setTimeout(f,0))},t=function(n,t){c=setTimeout(n,t)},o=function(){clearTimeout(c)},l=function(){return!1},u=e.unstable_forceFrameRate=function(){}}else{var p=window.performance,v=window.Date,w=window.setTimeout,y=window.clearTimeout;if("undefined"!=typeof console){var _=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof _&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof p&&"function"==typeof p.now)e.unstable_now=function(){return p.now()};else{var h=v.now();e.unstable_now=function(){return v.now()-h}}var k=!1,T=null,x=-1,P=5,F=0;l=function(){return e.unstable_now()>=F},u=function(){},e.unstable_forceFrameRate=function(n){0>n||125<n?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):P=0<n?Math.floor(1e3/n):5};var I=new MessageChannel,M=I.port2;I.port1.onmessage=function(){if(null!==T){var n=e.unstable_now();F=n+P;try{T(!0,n)?M.postMessage(null):(k=!1,T=null)}catch(n){throw M.postMessage(null),n}}else k=!1},n=function(n){T=n,k||(k=!0,M.postMessage(null))},t=function(n,t){x=w(function(){n(e.unstable_now())},t)},o=function(){y(x),x=-1}}function C(n,t){var o=n.length;n.push(t);n:for(;;){var l=o-1>>>1,u=n[l];if(!(void 0!==u&&0<q(u,t)))break n;n[l]=t,n[o]=u,o=l}}function A(n){return void 0===(n=n[0])?null:n}function L(n){var t=n[0];if(void 0!==t){var o=n.pop();if(o!==t){n[0]=o;n:for(var l=0,u=n.length;l<u;){var s=2*(l+1)-1,c=n[s],f=s+1,b=n[f];if(void 0!==c&&0>q(c,o))void 0!==b&&0>q(b,c)?(n[l]=b,n[f]=o,l=f):(n[l]=c,n[s]=o,l=s);else{if(!(void 0!==b&&0>q(b,o)))break n;n[l]=b,n[f]=o,l=f}}}return t}return null}function q(n,t){var o=n.sortIndex-t.sortIndex;return 0!==o?o:n.id-t.id}var D=[],R=[],j=1,E=null,N=3,B=!1,U=!1,W=!1;function Y(n){for(var t=A(R);null!==t;){if(null===t.callback)L(R);else{if(!(t.startTime<=n))break;L(R),t.sortIndex=t.expirationTime,C(D,t)}t=A(R)}}function z(o){if(W=!1,Y(o),!U)if(null!==A(D))U=!0,n(G);else{var l=A(R);null!==l&&t(z,l.startTime-o)}}function G(n,u){U=!1,W&&(W=!1,o()),B=!0;var s=N;try{for(Y(u),E=A(D);null!==E&&(!(E.expirationTime>u)||n&&!l());){var c=E.callback;if(null!==c){E.callback=null,N=E.priorityLevel;var f=c(E.expirationTime<=u);u=e.unstable_now(),"function"==typeof f?E.callback=f:E===A(D)&&L(D),Y(u)}else L(D);E=A(D)}if(null!==E)var b=!0;else{var p=A(R);null!==p&&t(z,p.startTime-u),b=!1}return b}finally{E=null,N=s,B=!1}}function H(n){switch(n){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var J=u;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(n){n.callback=null},e.unstable_continueExecution=function(){U||B||(U=!0,n(G))},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_getFirstCallbackNode=function(){return A(D)},e.unstable_next=function(n){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var o=N;N=t;try{return n()}finally{N=o}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=J,e.unstable_runWithPriority=function(n,t){switch(n){case 1:case 2:case 3:case 4:case 5:break;default:n=3}var o=N;N=n;try{return t()}finally{N=o}},e.unstable_scheduleCallback=function(l,u,s){var c=e.unstable_now();if("object"==typeof s&&null!==s){var f=s.delay;f="number"==typeof f&&0<f?c+f:c,s="number"==typeof s.timeout?s.timeout:H(l)}else s=H(l),f=c;return l={id:j++,callback:u,priorityLevel:l,startTime:f,expirationTime:s=f+s,sortIndex:-1},f>c?(l.sortIndex=f,C(R,l),null===A(D)&&l===A(R)&&(W?o():W=!0,t(z,f-c))):(l.sortIndex=s,C(D,l),U||B||(U=!0,n(G))),l},e.unstable_shouldYield=function(){var n=e.unstable_now();Y(n);var t=A(D);return t!==E&&null!==E&&null!==t&&null!==t.callback&&t.startTime<=n&&t.expirationTime<E.expirationTime||l()},e.unstable_wrapCallback=function(n){var t=N;return function(){var o=N;N=t;try{return n.apply(this,arguments)}finally{N=o}}}},200,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=t(r(d[1])),c=t(r(d[2]));function o(t,n){var c=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),c.push.apply(c,o)}return c}function s(t){for(var c=1;c<arguments.length;c++){var s=null!=arguments[c]?arguments[c]:{};c%2?o(Object(s),!0).forEach(function(c){(0,n.default)(t,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}var b=r(d[3]),u=r(d[4]);m.exports=function(t,n){var o={uiViewClassName:t,Commands:{},bubblingEventTypes:s(s({},u.bubblingEventTypes),n.bubblingEventTypes||{}),directEventTypes:s(s({},u.directEventTypes),n.directEventTypes||{}),validAttributes:s(s({},u.validAttributes),n.validAttributes||{})};b.register(t,function(){return(0,c.default)(t,o),o})}},201,[1,54,202,178,193]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.lefthandObjectDiff=u,e.getConfigWithoutViewProps=function(t,f){if(!t[f])return{};return Object.keys(t[f]).filter(function(t){return!n.default[f][t]}).reduce(function(n,o){return n[o]=t[f][o],n},{})},e.stringifyViewConfig=function(t){return JSON.stringify(t,function(t,n){return'function'==typeof n?"\u0192 "+n.name:n},2)},e.default=void 0;var n=t(r(d[1])),f=r(d[2]),o=['transform','hitSlop'];function u(t,n){var f={};function c(t,n,o){if(typeof t==typeof n||null==t)if('object'!=typeof t)t===n||(f[o]=n);else{var c=u(t,n);Object.keys(c).length>1&&(f[o]=c)}else f[o]=n}for(var s in t)o.includes(s)||(n?t.hasOwnProperty(s)&&c(t[s],n[s],s):f[s]={});return f}var c=function(t,n){if(!g.RN$Bridgeless){var o=f(t);['validAttributes','bubblingEventTypes','directEventTypes'].forEach(function(f){var c=Object.keys(u(o[f],n[f]));c.length&&console.error(t+" generated view config for "+f+" does not match native, missing: "+c.join(' '))})}};e.default=c},202,[1,193,183]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);m.exports=t.createContext(!1)},203,[59]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=(0,t(r(d[1])).default)('ActivityIndicatorView',{paperComponentName:'RCTActivityIndicatorView'});e.default=o},204,[1,205]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(r(d[1])),o=n(r(d[2]));var p=function(n,p){var f=p&&p.paperComponentName?p.paperComponentName:n;if(null!=p&&null!=p.paperComponentNameDeprecated)if(o.default.getViewManagerConfig(n))f=n;else{if(null==p.paperComponentNameDeprecated||!o.default.getViewManagerConfig(p.paperComponentNameDeprecated))throw new Error("Failed to find native component for either "+n+" or "+(p.paperComponentNameDeprecated||'(unknown)'));f=p.paperComponentNameDeprecated}return(0,t.default)(f)};e.default=p},205,[1,181,79]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=r(d[2]),c=r(d[3]),s=r(d[4]),u=r(d[5]);function l(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);n&&(c=c.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,c)}return o}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}r(d[6]);var b=r(d[7]),p=r(d[8]),y=r(d[9]),h=(r(d[10]),r(d[11])),x=r(d[12]),O=r(d[13]),D=(function(t){c(v,t);var l,p,D=(l=v,p=f(),function(){var t,n=u(l);if(p){var o=u(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return s(this,t)});function v(){return n(this,v),D.apply(this,arguments)}return o(v,[{key:"render",value:function(){var t=this.props,n=t.accessibilityLabel,o=t.color,c=t.onPress,s=t.touchSoundDisabled,u=t.title,l=t.hasTVPreferredFocus,f=t.nextFocusDown,p=t.nextFocusForward,D=t.nextFocusLeft,v=t.nextFocusRight,P=t.nextFocusUp,j=t.disabled,w=t.testID,R=[F.button],S=[F.text];o&&S.push({color:o});var E={};j&&(R.push(F.buttonDisabled),S.push(F.textDisabled),E.disabled=!0),O('string'==typeof u,'The title prop of a Button must be a string');var L=u,T=h;return b.createElement(T,{accessibilityLabel:n,accessibilityRole:"button",accessibilityState:E,hasTVPreferredFocus:l,nextFocusDown:f,nextFocusForward:p,nextFocusLeft:D,nextFocusRight:v,nextFocusUp:P,testID:w,disabled:j,onPress:c,touchSoundDisabled:s},b.createElement(x,{style:R},b.createElement(y,{style:S,disabled:j},L)))}}]),v})(b.Component),F=p.create({button:{},text:(function(n){for(var o=1;o<arguments.length;o++){var c=null!=arguments[o]?arguments[o]:{};o%2?l(Object(c),!0).forEach(function(o){t(n,o,c[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(c)):l(Object(c)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(c,t))})}return n})({textAlign:'center',margin:8},{color:'#007AFF',fontSize:18}),buttonDisabled:{},textDisabled:{color:'#cdcdcd'}});m.exports=D},206,[54,29,30,45,47,44,57,59,62,207,224,230,91,6]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]),l=r(d[4]),u=r(d[5]),p=r(d[6]),c=r(d[7]);function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function h(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,s)}return o}function R(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?h(Object(o),!0).forEach(function(n){c(t,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):h(Object(o)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))})}return t}var b=r(d[8]),v=r(d[9]),y=r(d[10]),H=r(d[11]),T=r(d[12]),P=r(d[13]),w=r(d[14]),O=r(d[15]),S=r(d[16]),x={top:20,left:20,right:20,bottom:30},C={validAttributes:R(R({},y.UIView),{},{isHighlighted:!0,numberOfLines:!0,ellipsizeMode:!0,allowFontScaling:!0,maxFontSizeMultiplier:!0,disabled:!0,selectable:!0,selectionColor:!0,adjustsFontSizeToFit:!0,minimumFontScale:!0,textBreakStrategy:!0,onTextLayout:!0,onInlineViewLayout:!0,dataDetectorType:!0}),directEventTypes:{topTextLayout:{registrationName:'onTextLayout'},topInlineViewLayout:{registrationName:'onInlineViewLayout'}},uiViewClassName:'RCTText'},M=(function(c){l(P,c);var h,b,y=(h=P,b=f(),function(){var t,n=p(h);if(b){var o=p(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return u(this,t)});function P(){var t;n(this,P);for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];return(t=y.call.apply(y,[this].concat(l))).state=R(R({},T.Mixin.touchableGetInitialState()),{},{isHighlighted:!1,createResponderHandlers:t._createResponseHandlers.bind(s(t)),responseHandlers:null}),t}return o(P,[{key:"render",value:function(){var n=this.props;return j(n)&&(n=R(R(R({},n),this.state.responseHandlers),{},{isHighlighted:this.state.isHighlighted})),null!=n.selectionColor&&(n=R(R({},n),{},{selectionColor:S(n.selectionColor)})),v.createElement(H.Consumer,null,function(o){return o?v.createElement(L,t({},n,{ref:n.forwardedRef})):v.createElement(H.Provider,{value:!0},v.createElement(V,t({},n,{ref:n.forwardedRef})))})}},{key:"_createResponseHandlers",value:function(){var t=this;return{onStartShouldSetResponder:function(){var n=t.props.onStartShouldSetResponder,o=null!=n&&n()||j(t.props);return o&&t._attachTouchHandlers(),o},onResponderGrant:function(n,o){O(t.touchableHandleResponderGrant)(n,o),null!=t.props.onResponderGrant&&t.props.onResponderGrant.call(t,n,o)},onResponderMove:function(n){O(t.touchableHandleResponderMove)(n),null!=t.props.onResponderMove&&t.props.onResponderMove.call(t,n)},onResponderRelease:function(n){O(t.touchableHandleResponderRelease)(n),null!=t.props.onResponderRelease&&t.props.onResponderRelease.call(t,n)},onResponderTerminate:function(n){O(t.touchableHandleResponderTerminate)(n),null!=t.props.onResponderTerminate&&t.props.onResponderTerminate.call(t,n)},onResponderTerminationRequest:function(){var n=t.props.onResponderTerminationRequest;return!!O(t.touchableHandleResponderTerminationRequest)()&&(null==n||n())}}}},{key:"_attachTouchHandlers",value:function(){var t=this;if(null==this.touchableGetPressRectOffset){for(var n in T.Mixin)'function'==typeof T.Mixin[n]&&(this[n]=T.Mixin[n].bind(this));this.touchableHandleActivePressIn=function(){!t.props.suppressHighlighting&&j(t.props)&&t.setState({isHighlighted:!0})},this.touchableHandleActivePressOut=function(){!t.props.suppressHighlighting&&j(t.props)&&t.setState({isHighlighted:!1})},this.touchableHandlePress=function(n){null!=t.props.onPress&&t.props.onPress(n)},this.touchableHandleLongPress=function(n){null!=t.props.onLongPress&&t.props.onLongPress(n)},this.touchableGetPressRectOffset=function(){return null==t.props.pressRetentionOffset?x:t.props.pressRetentionOffset}}}}],[{key:"getDerivedStateFromProps",value:function(t,n){return null==n.responseHandlers&&j(t)?{responseHandlers:n.createResponderHandlers()}:null}}]),P})(v.Component);M.defaultProps={accessible:!0,allowFontScaling:!0,ellipsizeMode:'tail'},M.viewConfig=C;var j=function(t){return null!=t.onPress||null!=t.onLongPress||null!=t.onStartShouldSetResponder},V=w(C.uiViewClassName,function(){return C}),L=null==P.getViewManagerConfig('RCTVirtualText')?V:w('RCTVirtualText',function(){return{validAttributes:R(R({},y.UIView),{},{isHighlighted:!0,maxFontSizeMultiplier:!0}),uiViewClassName:'RCTVirtualText'}}),D=v.forwardRef(function(n,o){return v.createElement(M,t({},n,{forwardedRef:o}))});D.displayName='Text',D.propTypes=b,m.exports=D},207,[16,29,30,48,45,47,44,54,208,59,212,203,213,79,182,223,71]);
__d(function(g,r,i,a,m,e,d){'use strict';var o=r(d[0]),n=r(d[1]),t=r(d[2]),l=r(d[3]),s=t(r(d[4]));m.exports={ellipsizeMode:l.oneOf(['head','middle','tail','clip']),numberOfLines:l.number,textBreakStrategy:l.oneOf(['simple','highQuality','balanced']),onLayout:l.func,onPress:l.func,onLongPress:l.func,pressRetentionOffset:n,selectable:l.bool,selectionColor:o,suppressHighlighting:l.bool,style:s,testID:l.string,nativeID:l.string,allowFontScaling:l.bool,maxFontSizeMultiplier:l.number,accessible:l.bool,adjustsFontSizeToFit:l.bool,minimumFontScale:l.number,disabled:l.bool,dataDetectorType:l.oneOf(['phoneNumber','link','email','none','all'])}},208,[68,209,210,73,84]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=t.shape({top:t.number,left:t.number,bottom:t.number,right:t.number});m.exports=n},209,[73]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]),t=r(d[1]);m.exports=function(o){var c=n(o);return function(n,o,u,v){var f=n;n[o]&&((f={})[o]=t(n[o]));for(var p=arguments.length,s=new Array(p>4?p-4:0),l=4;l<p;l++)s[l-4]=arguments[l];return c.apply(void 0,[f,o,u,v].concat(s))}}},210,[211,90]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);function n(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);n&&(c=c.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,c)}return o}function o(o){for(var c=1;c<arguments.length;c++){var p=null!=arguments[c]?arguments[c]:{};c%2?n(Object(p),!0).forEach(function(n){t(o,n,p[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(p)):n(Object(p)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(p,t))})}return o}var c=r(d[1]);m.exports=function(t){function n(n,p,s,u,f){if(p[s]){var l=p[s],y=typeof l;'object'!==y&&c(!1,"Invalid "+(f||'(unknown)')+" `"+s+"` of type `"+y+"` supplied to `"+u+"`, expected `object`.");for(var b=o(o({},p[s]),t),O=arguments.length,j=new Array(O>5?O-5:0),v=5;v<O;v++)j[v-5]=arguments[v];for(var w in b){var P=t[w];P||c(!1,"Invalid props."+s+" key `"+w+"` supplied to `"+u+"`.\nBad object: "+JSON.stringify(p[s],null,'  ')+'\nValid keys: '+JSON.stringify(Object.keys(t),null,'  '));var h=P.apply(void 0,[l,w,u,f].concat(j));h&&c(!1,h.message+'\nBad object: '+JSON.stringify(p[s],null,'  '))}}else n&&c(!1,"Required object `"+s+"` was not specified in `"+u+"`.")}function p(t,o,c,p){for(var s=arguments.length,u=new Array(s>4?s-4:0),f=4;f<s;f++)u[f-4]=arguments[f];return n.apply(void 0,[!1,t,o,c,p].concat(u))}return p.isRequired=n.bind(null,!0),p}},211,[54,6]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);function c(t,c){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);c&&(n=n.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),s.push.apply(s,n)}return s}function s(s){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?c(Object(o),!0).forEach(function(c){t(s,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach(function(t){Object.defineProperty(s,t,Object.getOwnPropertyDescriptor(o,t))})}return s}var n={pointerEvents:!0,accessible:!0,accessibilityActions:!0,accessibilityLabel:!0,accessibilityLiveRegion:!0,accessibilityRole:!0,accessibilityState:!0,accessibilityValue:!0,accessibilityHint:!0,importantForAccessibility:!0,nativeID:!0,testID:!0,renderToHardwareTextureAndroid:!0,shouldRasterizeIOS:!0,onLayout:!0,onAccessibilityAction:!0,onAccessibilityTap:!0,onMagicTap:!0,onAccessibilityEscape:!0,collapsable:!0,needsOffscreenAlphaCompositing:!0,style:r(d[1])},o={UIView:n,RCTView:s(s({},n),{},{removeClippedSubviews:!0})};m.exports=o},212,[54,66]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),E=r(d[1]);function R(t,E){var R=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);E&&(o=o.filter(function(E){return Object.getOwnPropertyDescriptor(t,E).enumerable})),R.push.apply(R,o)}return R}function o(t){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?R(Object(s),!0).forEach(function(R){E(t,R,s[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):R(Object(s)).forEach(function(E){Object.defineProperty(t,E,Object.getOwnPropertyDescriptor(s,E))})}return t}var s=r(d[2]),n=r(d[3]),_=r(d[4]),S=(r(d[5]),r(d[6])),l=r(d[7]),h=r(d[8]),u=r(d[9]),O=(r(d[10]),r(d[11]),r(d[12])),N=(r(d[13]),function(t){var E=t.touches,R=t.changedTouches,o=E&&E.length>0,s=R&&R.length>0;return!o&&s?R[0]:o?E[0]:t}),P=O({NOT_RESPONDER:null,RESPONDER_INACTIVE_PRESS_IN:null,RESPONDER_INACTIVE_PRESS_OUT:null,RESPONDER_ACTIVE_PRESS_IN:null,RESPONDER_ACTIVE_PRESS_OUT:null,RESPONDER_ACTIVE_LONG_PRESS_IN:null,RESPONDER_ACTIVE_LONG_PRESS_OUT:null,ERROR:null}),T={NOT_RESPONDER:!1,RESPONDER_INACTIVE_PRESS_IN:!1,RESPONDER_INACTIVE_PRESS_OUT:!1,RESPONDER_ACTIVE_PRESS_IN:!1,RESPONDER_ACTIVE_PRESS_OUT:!1,RESPONDER_ACTIVE_LONG_PRESS_IN:!1,RESPONDER_ACTIVE_LONG_PRESS_OUT:!1,ERROR:!1},c=o(o({},T),{},{RESPONDER_ACTIVE_PRESS_OUT:!0,RESPONDER_ACTIVE_PRESS_IN:!0}),D=o(o({},T),{},{RESPONDER_INACTIVE_PRESS_IN:!0,RESPONDER_ACTIVE_PRESS_IN:!0,RESPONDER_ACTIVE_LONG_PRESS_IN:!0}),I=o(o({},T),{},{RESPONDER_ACTIVE_LONG_PRESS_IN:!0}),A=O({DELAY:null,RESPONDER_GRANT:null,RESPONDER_RELEASE:null,RESPONDER_TERMINATED:null,ENTER_PRESS_RECT:null,LEAVE_PRESS_RECT:null,LONG_PRESS_DETECTED:null}),b={NOT_RESPONDER:{DELAY:P.ERROR,RESPONDER_GRANT:P.RESPONDER_INACTIVE_PRESS_IN,RESPONDER_RELEASE:P.ERROR,RESPONDER_TERMINATED:P.ERROR,ENTER_PRESS_RECT:P.ERROR,LEAVE_PRESS_RECT:P.ERROR,LONG_PRESS_DETECTED:P.ERROR},RESPONDER_INACTIVE_PRESS_IN:{DELAY:P.RESPONDER_ACTIVE_PRESS_IN,RESPONDER_GRANT:P.ERROR,RESPONDER_RELEASE:P.NOT_RESPONDER,RESPONDER_TERMINATED:P.NOT_RESPONDER,ENTER_PRESS_RECT:P.RESPONDER_INACTIVE_PRESS_IN,LEAVE_PRESS_RECT:P.RESPONDER_INACTIVE_PRESS_OUT,LONG_PRESS_DETECTED:P.ERROR},RESPONDER_INACTIVE_PRESS_OUT:{DELAY:P.RESPONDER_ACTIVE_PRESS_OUT,RESPONDER_GRANT:P.ERROR,RESPONDER_RELEASE:P.NOT_RESPONDER,RESPONDER_TERMINATED:P.NOT_RESPONDER,ENTER_PRESS_RECT:P.RESPONDER_INACTIVE_PRESS_IN,LEAVE_PRESS_RECT:P.RESPONDER_INACTIVE_PRESS_OUT,LONG_PRESS_DETECTED:P.ERROR},RESPONDER_ACTIVE_PRESS_IN:{DELAY:P.ERROR,RESPONDER_GRANT:P.ERROR,RESPONDER_RELEASE:P.NOT_RESPONDER,RESPONDER_TERMINATED:P.NOT_RESPONDER,ENTER_PRESS_RECT:P.RESPONDER_ACTIVE_PRESS_IN,LEAVE_PRESS_RECT:P.RESPONDER_ACTIVE_PRESS_OUT,LONG_PRESS_DETECTED:P.RESPONDER_ACTIVE_LONG_PRESS_IN},RESPONDER_ACTIVE_PRESS_OUT:{DELAY:P.ERROR,RESPONDER_GRANT:P.ERROR,RESPONDER_RELEASE:P.NOT_RESPONDER,RESPONDER_TERMINATED:P.NOT_RESPONDER,ENTER_PRESS_RECT:P.RESPONDER_ACTIVE_PRESS_IN,LEAVE_PRESS_RECT:P.RESPONDER_ACTIVE_PRESS_OUT,LONG_PRESS_DETECTED:P.ERROR},RESPONDER_ACTIVE_LONG_PRESS_IN:{DELAY:P.ERROR,RESPONDER_GRANT:P.ERROR,RESPONDER_RELEASE:P.NOT_RESPONDER,RESPONDER_TERMINATED:P.NOT_RESPONDER,ENTER_PRESS_RECT:P.RESPONDER_ACTIVE_LONG_PRESS_IN,LEAVE_PRESS_RECT:P.RESPONDER_ACTIVE_LONG_PRESS_OUT,LONG_PRESS_DETECTED:P.RESPONDER_ACTIVE_LONG_PRESS_IN},RESPONDER_ACTIVE_LONG_PRESS_OUT:{DELAY:P.ERROR,RESPONDER_GRANT:P.ERROR,RESPONDER_RELEASE:P.NOT_RESPONDER,RESPONDER_TERMINATED:P.NOT_RESPONDER,ENTER_PRESS_RECT:P.RESPONDER_ACTIVE_LONG_PRESS_IN,LEAVE_PRESS_RECT:P.RESPONDER_ACTIVE_LONG_PRESS_OUT,LONG_PRESS_DETECTED:P.ERROR},error:{DELAY:P.NOT_RESPONDER,RESPONDER_GRANT:P.RESPONDER_INACTIVE_PRESS_IN,RESPONDER_RELEASE:P.NOT_RESPONDER,RESPONDER_TERMINATED:P.NOT_RESPONDER,ENTER_PRESS_RECT:P.NOT_RESPONDER,LEAVE_PRESS_RECT:P.NOT_RESPONDER,LONG_PRESS_DETECTED:P.NOT_RESPONDER}},p={componentDidMount:function(){n.isTV&&(this._tvEventHandler=new h,this._tvEventHandler.enable(this,function(t,E){var R=S.findNodeHandle(t);E.dispatchConfig={},R===E.tag&&('focus'===E.eventType?t.touchableHandleFocus(E):'blur'===E.eventType?t.touchableHandleBlur(E):'select'===E.eventType&&t.touchableHandlePress&&!t.props.disabled&&t.touchableHandlePress(E))}))},componentWillUnmount:function(){this._tvEventHandler&&(this._tvEventHandler.disable(),delete this._tvEventHandler),this.touchableDelayTimeout&&clearTimeout(this.touchableDelayTimeout),this.longPressDelayTimeout&&clearTimeout(this.longPressDelayTimeout),this.pressOutDelayTimeout&&clearTimeout(this.pressOutDelayTimeout)},touchableGetInitialState:function(){return{touchable:{touchState:void 0,responderID:null}}},touchableHandleResponderTerminationRequest:function(){return!this.props.rejectResponderTermination},touchableHandleStartShouldSetResponder:function(){return!this.props.disabled},touchableLongPressCancelsPress:function(){return!0},touchableHandleResponderGrant:function(t){var E=t.currentTarget;t.persist(),this.pressOutDelayTimeout&&clearTimeout(this.pressOutDelayTimeout),this.pressOutDelayTimeout=null,this.state.touchable.touchState=P.NOT_RESPONDER,this.state.touchable.responderID=E,this._receiveSignal(A.RESPONDER_GRANT,t);var R=void 0!==this.touchableGetHighlightDelayMS?Math.max(this.touchableGetHighlightDelayMS(),0):130;0!==(R=isNaN(R)?130:R)?this.touchableDelayTimeout=setTimeout(this._handleDelay.bind(this,t),R):this._handleDelay(t);var o=void 0!==this.touchableGetLongPressDelayMS?Math.max(this.touchableGetLongPressDelayMS(),10):370;o=isNaN(o)?370:o,this.longPressDelayTimeout=setTimeout(this._handleLongDelay.bind(this,t),o+R)},touchableHandleResponderRelease:function(t){this.pressInLocation=null,this._receiveSignal(A.RESPONDER_RELEASE,t)},touchableHandleResponderTerminate:function(t){this.pressInLocation=null,this._receiveSignal(A.RESPONDER_TERMINATED,t)},touchableHandleResponderMove:function(t){if(this.state.touchable.positionOnActivate){var E=this.state.touchable.positionOnActivate,R=this.state.touchable.dimensionsOnActivate,o=this.touchableGetPressRectOffset?this.touchableGetPressRectOffset():{left:20,right:20,top:20,bottom:20},s=o.left,n=o.top,_=o.right,S=o.bottom,l=this.touchableGetHitSlop?this.touchableGetHitSlop():null;l&&(s+=l.left||0,n+=l.top||0,_+=l.right||0,S+=l.bottom||0);var h=N(t.nativeEvent),u=h&&h.pageX,O=h&&h.pageY;if(this.pressInLocation)this._getDistanceBetweenPoints(u,O,this.pressInLocation.pageX,this.pressInLocation.pageY)>10&&this._cancelLongPressDelayTimeout();if(u>E.left-s&&O>E.top-n&&u<E.left+R.width+_&&O<E.top+R.height+S){var T=this.state.touchable.touchState;this._receiveSignal(A.ENTER_PRESS_RECT,t),this.state.touchable.touchState===P.RESPONDER_INACTIVE_PRESS_IN&&T!==P.RESPONDER_INACTIVE_PRESS_IN&&this._cancelLongPressDelayTimeout()}else this._cancelLongPressDelayTimeout(),this._receiveSignal(A.LEAVE_PRESS_RECT,t)}},touchableHandleFocus:function(t){this.props.onFocus&&this.props.onFocus(t)},touchableHandleBlur:function(t){this.props.onBlur&&this.props.onBlur(t)},_remeasureMetricsOnActivation:function(){var t=this.state.touchable.responderID;null!=t&&('number'==typeof t?u.measure(t,this._handleQueryLayout):t.measure(this._handleQueryLayout))},_handleQueryLayout:function(t,E,R,o,n,S){(t||E||R||o||n||S)&&(this.state.touchable.positionOnActivate&&_.release(this.state.touchable.positionOnActivate),this.state.touchable.dimensionsOnActivate&&s.release(this.state.touchable.dimensionsOnActivate),this.state.touchable.positionOnActivate=_.getPooled(n,S),this.state.touchable.dimensionsOnActivate=s.getPooled(R,o))},_handleDelay:function(t){this.touchableDelayTimeout=null,this._receiveSignal(A.DELAY,t)},_handleLongDelay:function(t){this.longPressDelayTimeout=null;var E=this.state.touchable.touchState;E!==P.RESPONDER_ACTIVE_PRESS_IN&&E!==P.RESPONDER_ACTIVE_LONG_PRESS_IN||this._receiveSignal(A.LONG_PRESS_DETECTED,t)},_receiveSignal:function(t,E){var R=this.state.touchable.responderID,o=this.state.touchable.touchState,s=b[o]&&b[o][t];if(R||t!==A.RESPONDER_RELEASE){if(!s)throw new Error('Unrecognized signal `'+t+'` or state `'+o+'` for Touchable responder `'+typeof this.state.touchable.responderID=='number'?this.state.touchable.responderID:"host component`");if(s===P.ERROR)throw new Error('Touchable cannot transition from `'+o+'` to `'+t+'` for responder `'+typeof this.state.touchable.responderID=='number'?this.state.touchable.responderID:"<<host component>>`");o!==s&&(this._performSideEffectsForTransition(o,s,t,E),this.state.touchable.touchState=s)}},_cancelLongPressDelayTimeout:function(){this.longPressDelayTimeout&&clearTimeout(this.longPressDelayTimeout),this.longPressDelayTimeout=null},_isHighlight:function(t){return t===P.RESPONDER_ACTIVE_PRESS_IN||t===P.RESPONDER_ACTIVE_LONG_PRESS_IN},_savePressInLocation:function(t){var E=N(t.nativeEvent),R=E&&E.pageX,o=E&&E.pageY,s=E&&E.locationX,n=E&&E.locationY;this.pressInLocation={pageX:R,pageY:o,locationX:s,locationY:n}},_getDistanceBetweenPoints:function(t,E,R,o){var s=t-R,n=E-o;return Math.sqrt(s*s+n*n)},_performSideEffectsForTransition:function(t,E,R,o){var s=this._isHighlight(t),n=this._isHighlight(E);(R===A.RESPONDER_TERMINATED||R===A.RESPONDER_RELEASE)&&this._cancelLongPressDelayTimeout();var _=t===P.NOT_RESPONDER&&E===P.RESPONDER_INACTIVE_PRESS_IN,S=!c[t]&&c[E];if((_||S)&&this._remeasureMetricsOnActivation(),D[t]&&R===A.LONG_PRESS_DETECTED&&this.touchableHandleLongPress&&this.touchableHandleLongPress(o),n&&!s?this._startHighlight(o):!n&&s&&this._endHighlight(o),D[t]&&R===A.RESPONDER_RELEASE){var l=!!this.props.onLongPress,h=I[t]&&(!l||!this.touchableLongPressCancelsPress());(!I[t]||h)&&this.touchableHandlePress&&(n||s||(this._startHighlight(o),this._endHighlight(o)),this.touchableHandlePress(o))}this.touchableDelayTimeout&&clearTimeout(this.touchableDelayTimeout),this.touchableDelayTimeout=null},_startHighlight:function(t){this._savePressInLocation(t),this.touchableHandleActivePressIn&&this.touchableHandleActivePressIn(t)},_endHighlight:function(t){var E=this;this.touchableHandleActivePressOut&&(this.touchableGetPressOutDelayMS&&this.touchableGetPressOutDelayMS()?this.pressOutDelayTimeout=setTimeout(function(){E.touchableHandleActivePressOut(t)},this.touchableGetPressOutDelayMS()):this.touchableHandleActivePressOut(t))},withoutDefaultFocusAndBlur:{}},C=(p.touchableHandleFocus,p.touchableHandleBlur,t(p,["touchableHandleFocus","touchableHandleBlur"]));p.withoutDefaultFocusAndBlur=C;var L={Mixin:p,TOUCH_TARGET_DEBUG:!1,renderDebugView:function(t){t.color,t.hitSlop;if(!L.TOUCH_TARGET_DEBUG)return null;throw Error('Touchable.TOUCH_TARGET_DEBUG should not be enabled in prod!')}};l.create({debug:{position:'absolute',borderWidth:1,borderStyle:'dashed'}});m.exports=L},213,[55,54,214,57,216,59,94,62,217,79,91,219,221,69]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),o=t.twoArgumentPooler;function n(t,o){this.width=t,this.height=o}n.prototype.destructor=function(){this.width=null,this.height=null},n.getPooledFromElement=function(t){return n.getPooled(t.offsetWidth,t.offsetHeight)},t.addPoolingTo(n,o),m.exports=n},214,[215]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=function(t){if(this.instancePool.length){var n=this.instancePool.pop();return this.call(n,t),n}return new this(t)},o=function(n){t(n instanceof this,'Trying to release an instance into a pool of a different type.'),n.destructor(),this.instancePool.length<this.poolSize&&this.instancePool.push(n)},s=n,l={addPoolingTo:function(t,n){var l=t;return l.instancePool=[],l.getPooled=n||s,l.poolSize||(l.poolSize=10),l.release=o,l},oneArgumentPooler:n,twoArgumentPooler:function(t,n){if(this.instancePool.length){var o=this.instancePool.pop();return this.call(o,t,n),o}return new this(t,n)},threeArgumentPooler:function(t,n,o){if(this.instancePool.length){var s=this.instancePool.pop();return this.call(s,t,n,o),s}return new this(t,n,o)},fourArgumentPooler:function(t,n,o,s){if(this.instancePool.length){var l=this.instancePool.pop();return this.call(l,t,n,o,s),l}return new this(t,n,o,s)}};m.exports=l},215,[6]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),o=t.twoArgumentPooler;function n(t,o){this.left=t,this.top=o}n.prototype.destructor=function(){this.left=null,this.top=null},t.addPoolingTo(n,o),m.exports=n},216,[215]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=t(r(d[1])),v=t(r(d[2])),_=t(r(d[3])),s=(r(d[4]),r(d[5])),o=(function(){function t(){(0,n.default)(this,t),this.__nativeTVNavigationEventListener=null,this.__nativeTVNavigationEventEmitter=null}return(0,v.default)(t,[{key:"enable",value:function(t,n){_.default&&(this.__nativeTVNavigationEventEmitter=new s(_.default),this.__nativeTVNavigationEventListener=this.__nativeTVNavigationEventEmitter.addListener('onHWKeyEvent',function(v){n&&n(t,v)}))}},{key:"disable",value:function(){this.__nativeTVNavigationEventListener&&(this.__nativeTVNavigationEventListener.remove(),delete this.__nativeTVNavigationEventListener),this.__nativeTVNavigationEventEmitter&&delete this.__nativeTVNavigationEventEmitter}}]),t})();m.exports=o},217,[1,29,30,218,57,145]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])).get('TVNavigationEventEmitter');e.default=u},218,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var u=r(d[0])(r(d[1])),o={playTouchSound:function(){u.default&&u.default.playTouchSound()}};m.exports=o},219,[1,220]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])).get('SoundManager');e.default=u},220,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]);m.exports=function(t){var o,s={};for(o in t instanceof Object&&!Array.isArray(t)||n(!1),t)t.hasOwnProperty(o)&&(s[o]=o);return s}},221,[222]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=function(n){if(void 0===n)throw new Error('invariant(...): Second argument must be a string.')};m.exports=function(o,t){for(var f=arguments.length,s=new Array(f>2?f-2:0),u=2;u<f;u++)s[u-2]=arguments[u];if(n(t),!o){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var v=0;(c=new Error(t.replace(/%s/g,function(){return String(s[v++])}))).name='Invariant Violation'}throw c.framesToPop=1,c}}},222,[]);
__d(function(g,r,i,a,m,e,d){'use strict';function t(t,o){if(null!=t)return t;var n=new Error(void 0!==o?o:'Got unexpected '+t);throw n.framesToPop=1,n}m.exports=t,m.exports.default=t,Object.defineProperty(m.exports,'__esModule',{value:!0})},223,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),s=r(d[1]),o=s(r(d[2])),n=s(r(d[3])),c=s(r(d[4])),l=s(r(d[5])),p=s(r(d[6])),u=s(r(d[7])),f=s(r(d[8])),h=s(r(d[9])),b=(r(d[10]),s(r(d[11]))),y=r(d[12]),v=s(r(d[13])),P=s(r(d[14])),O=(s(r(d[15])),s(r(d[16]))),F=t(r(d[17])),S=s(r(d[18]));function R(t,s){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),o.push.apply(o,n)}return o}function D(t){for(var s=1;s<arguments.length;s++){var n=null!=arguments[s]?arguments[s]:{};s%2?R(Object(n),!0).forEach(function(s){(0,o.default)(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var w=(function(t){(0,p.default)(S,t);var s,o,O=(s=S,o=A(),function(){var t,n=(0,f.default)(s);if(o){var c=(0,f.default)(this).constructor;t=Reflect.construct(n,arguments,c)}else t=n.apply(this,arguments);return(0,u.default)(this,t)});function S(){var t;(0,c.default)(this,S);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(t=O.call.apply(O,[this].concat(o))).state={pressability:new h.default(t._createPressabilityConfig())},t}return(0,l.default)(S,[{key:"_createPressabilityConfig",value:function(){var t=this;return{cancelable:!this.props.rejectResponderTermination,disabled:this.props.disabled,hitSlop:this.props.hitSlop,delayLongPress:this.props.delayLongPress,delayPressIn:this.props.delayPressIn,delayPressOut:this.props.delayPressOut,minPressDuration:0,pressRectOffset:this.props.pressRetentionOffset,android_disableSound:this.props.touchSoundDisabled,onLongPress:this.props.onLongPress,onPress:this.props.onPress,onPressIn:function(s){'android'===P.default.OS&&(t._dispatchPressedStateChange(!0),t._dispatchHotspotUpdate(s)),null!=t.props.onPressIn&&t.props.onPressIn(s)},onPressMove:function(s){'android'===P.default.OS&&t._dispatchHotspotUpdate(s)},onPressOut:function(s){'android'===P.default.OS&&t._dispatchPressedStateChange(!1),null!=t.props.onPressOut&&t.props.onPressOut(s)}}}},{key:"_dispatchPressedStateChange",value:function(t){if('android'===P.default.OS){var s=v.default.findHostInstance_DEPRECATED(this);null==s?console.warn("Touchable: Unable to find HostComponent instance. Has your Touchable component been unmounted?"):y.Commands.setPressed(s,t)}}},{key:"_dispatchHotspotUpdate",value:function(t){if('android'===P.default.OS){var s=t.nativeEvent,o=s.locationX,n=s.locationY,c=v.default.findHostInstance_DEPRECATED(this);null==c?console.warn("Touchable: Unable to find HostComponent instance. Has your Touchable component been unmounted?"):y.Commands.hotspotUpdate(c,null!=o?o:0,null!=n?n:0)}}},{key:"render",value:function(){var t=F.Children.only(this.props.children),s=[t.props.children],o=this.state.pressability.getEventHandlers(),c=(o.onBlur,o.onFocus,(0,n.default)(o,["onBlur","onFocus"]));return F.cloneElement.apply(F,[t,D(D(D({},c),_(void 0===this.props.background?S.SelectableBackground():this.props.background,!0===this.props.useForeground)),{},{accessible:!1!==this.props.accessible,accessibilityLabel:this.props.accessibilityLabel,accessibilityRole:this.props.accessibilityRole,accessibilityState:this.props.accessibilityState,accessibilityActions:this.props.accessibilityActions,onAccessibilityAction:this.props.onAccessibilityAction,accessibilityValue:this.props.accessibilityValue,importantForAccessibility:this.props.importantForAccessibility,accessibilityLiveRegion:this.props.accessibilityLiveRegion,accessibilityViewIsModal:this.props.accessibilityViewIsModal,accessibilityElementsHidden:this.props.accessibilityElementsHidden,hasTVPreferredFocus:this.props.hasTVPreferredFocus,hitSlop:this.props.hitSlop,focusable:!1!==this.props.focusable&&void 0!==this.props.onPress&&!this.props.disabled,nativeID:this.props.nativeID,nextFocusDown:this.props.nextFocusDown,nextFocusForward:this.props.nextFocusForward,nextFocusLeft:this.props.nextFocusLeft,nextFocusRight:this.props.nextFocusRight,nextFocusUp:this.props.nextFocusUp,onLayout:this.props.onLayout,testID:this.props.testID})].concat(s))}},{key:"componentDidMount",value:function(){var t=this;P.default.isTV&&(this._tvTouchable=new b.default(this,{getDisabled:function(){return!0===t.props.disabled},onBlur:function(s){null!=t.props.onBlur&&t.props.onBlur(s)},onFocus:function(s){null!=t.props.onFocus&&t.props.onFocus(s)},onPress:function(s){null!=t.props.onPress&&t.props.onPress(s)}}))}},{key:"componentDidUpdate",value:function(t,s){this.state.pressability.configure(this._createPressabilityConfig())}},{key:"componentWillUnmount",value:function(){P.default.isTV&&null!=this._tvTouchable&&this._tvTouchable.destroy(),this.state.pressability.reset()}}]),S})(F.Component);w.SelectableBackground=function(t){return{type:'ThemeAttrAndroid',attribute:'selectableItemBackground',rippleRadius:t}},w.SelectableBackgroundBorderless=function(t){return{type:'ThemeAttrAndroid',attribute:'selectableItemBackgroundBorderless',rippleRadius:t}},w.Ripple=function(t,s,o){var n=(0,O.default)(t);return(0,S.default)(null==n||'number'==typeof n,'Unexpected color given for Ripple color'),{type:'RippleAndroid',color:n,borderless:s,rippleRadius:o}},w.canUseNativeForeground=function(){return'android'===P.default.OS&&P.default.Version>=23};var _='android'===P.default.OS?function(t,s){return s&&w.canUseNativeForeground()?{nativeForegroundAndroid:t}:{nativeBackgroundAndroid:t}}:function(t,s){return null};m.exports=w},224,[12,1,54,55,29,30,45,47,44,225,228,229,92,94,57,91,71,59,6]);
__d(function(g,r,i,a,m,e,d){'use strict';var E=r(d[0]),t=r(d[1]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r(d[2])),R=t(r(d[3])),_=t(r(d[4])),o=r(d[5]),l=t(r(d[6])),u=t(r(d[7])),s=r(d[8]),S=t(r(d[9])),T=t(r(d[10]));E(r(d[11]));function P(E,t){var n=Object.keys(E);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(E);t&&(R=R.filter(function(t){return Object.getOwnPropertyDescriptor(E,t).enumerable})),n.push.apply(n,R)}return n}function O(E){for(var t=1;t<arguments.length;t++){var R=null!=arguments[t]?arguments[t]:{};t%2?P(Object(R),!0).forEach(function(t){(0,n.default)(E,t,R[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(R)):P(Object(R)).forEach(function(t){Object.defineProperty(E,t,Object.getOwnPropertyDescriptor(R,t))})}return E}var c=Object.freeze({NOT_RESPONDER:{DELAY:'ERROR',RESPONDER_GRANT:'RESPONDER_INACTIVE_PRESS_IN',RESPONDER_RELEASE:'ERROR',RESPONDER_TERMINATED:'ERROR',ENTER_PRESS_RECT:'ERROR',LEAVE_PRESS_RECT:'ERROR',LONG_PRESS_DETECTED:'ERROR'},RESPONDER_INACTIVE_PRESS_IN:{DELAY:'RESPONDER_ACTIVE_PRESS_IN',RESPONDER_GRANT:'ERROR',RESPONDER_RELEASE:'NOT_RESPONDER',RESPONDER_TERMINATED:'NOT_RESPONDER',ENTER_PRESS_RECT:'RESPONDER_INACTIVE_PRESS_IN',LEAVE_PRESS_RECT:'RESPONDER_INACTIVE_PRESS_OUT',LONG_PRESS_DETECTED:'ERROR'},RESPONDER_INACTIVE_PRESS_OUT:{DELAY:'RESPONDER_ACTIVE_PRESS_OUT',RESPONDER_GRANT:'ERROR',RESPONDER_RELEASE:'NOT_RESPONDER',RESPONDER_TERMINATED:'NOT_RESPONDER',ENTER_PRESS_RECT:'RESPONDER_INACTIVE_PRESS_IN',LEAVE_PRESS_RECT:'RESPONDER_INACTIVE_PRESS_OUT',LONG_PRESS_DETECTED:'ERROR'},RESPONDER_ACTIVE_PRESS_IN:{DELAY:'ERROR',RESPONDER_GRANT:'ERROR',RESPONDER_RELEASE:'NOT_RESPONDER',RESPONDER_TERMINATED:'NOT_RESPONDER',ENTER_PRESS_RECT:'RESPONDER_ACTIVE_PRESS_IN',LEAVE_PRESS_RECT:'RESPONDER_ACTIVE_PRESS_OUT',LONG_PRESS_DETECTED:'RESPONDER_ACTIVE_LONG_PRESS_IN'},RESPONDER_ACTIVE_PRESS_OUT:{DELAY:'ERROR',RESPONDER_GRANT:'ERROR',RESPONDER_RELEASE:'NOT_RESPONDER',RESPONDER_TERMINATED:'NOT_RESPONDER',ENTER_PRESS_RECT:'RESPONDER_ACTIVE_PRESS_IN',LEAVE_PRESS_RECT:'RESPONDER_ACTIVE_PRESS_OUT',LONG_PRESS_DETECTED:'ERROR'},RESPONDER_ACTIVE_LONG_PRESS_IN:{DELAY:'ERROR',RESPONDER_GRANT:'ERROR',RESPONDER_RELEASE:'NOT_RESPONDER',RESPONDER_TERMINATED:'NOT_RESPONDER',ENTER_PRESS_RECT:'RESPONDER_ACTIVE_LONG_PRESS_IN',LEAVE_PRESS_RECT:'RESPONDER_ACTIVE_LONG_PRESS_OUT',LONG_PRESS_DETECTED:'RESPONDER_ACTIVE_LONG_PRESS_IN'},RESPONDER_ACTIVE_LONG_PRESS_OUT:{DELAY:'ERROR',RESPONDER_GRANT:'ERROR',RESPONDER_RELEASE:'NOT_RESPONDER',RESPONDER_TERMINATED:'NOT_RESPONDER',ENTER_PRESS_RECT:'RESPONDER_ACTIVE_LONG_PRESS_IN',LEAVE_PRESS_RECT:'RESPONDER_ACTIVE_LONG_PRESS_OUT',LONG_PRESS_DETECTED:'ERROR'},ERROR:{DELAY:'NOT_RESPONDER',RESPONDER_GRANT:'RESPONDER_INACTIVE_PRESS_IN',RESPONDER_RELEASE:'NOT_RESPONDER',RESPONDER_TERMINATED:'NOT_RESPONDER',ENTER_PRESS_RECT:'NOT_RESPONDER',LEAVE_PRESS_RECT:'NOT_RESPONDER',LONG_PRESS_DETECTED:'NOT_RESPONDER'}}),D=function(E){return'RESPONDER_ACTIVE_PRESS_IN'===E||'RESPONDER_ACTIVE_LONG_PRESS_IN'===E},N=function(E){return'RESPONDER_ACTIVE_PRESS_OUT'===E||'RESPONDER_ACTIVE_PRESS_IN'===E},h=function(E){return'RESPONDER_INACTIVE_PRESS_IN'===E||'RESPONDER_ACTIVE_PRESS_IN'===E||'RESPONDER_ACTIVE_LONG_PRESS_IN'===E},v=function(E){return'RESPONDER_TERMINATED'===E||'RESPONDER_RELEASE'===E},f=30,I=20,A=20,y=20,p=(function(){function E(t){var n=this;(0,R.default)(this,E),this._eventHandlers=null,this._hoverInDelayTimeout=null,this._hoverOutDelayTimeout=null,this._isHovered=!1,this._longPressDelayTimeout=null,this._pressDelayTimeout=null,this._pressOutDelayTimeout=null,this._responderID=null,this._responderRegion=null,this._touchState='NOT_RESPONDER',this._measureCallback=function(E,t,R,_,o,l){(E||t||R||_||o||l)&&(n._responderRegion={bottom:l+_,left:o,right:o+R,top:l})},this.configure(t)}return(0,_.default)(E,[{key:"configure",value:function(E){this._config=E}},{key:"reset",value:function(){this._cancelHoverInDelayTimeout(),this._cancelHoverOutDelayTimeout(),this._cancelLongPressDelayTimeout(),this._cancelPressDelayTimeout(),this._cancelPressOutDelayTimeout()}},{key:"getEventHandlers",value:function(){return null==this._eventHandlers&&(this._eventHandlers=this._createEventHandlers()),this._eventHandlers}},{key:"_createEventHandlers",value:function(){var E=this,t={onBlur:function(t){var n=E._config.onBlur;null!=n&&n(t)},onFocus:function(t){var n=E._config.onFocus;null!=n&&n(t)}},n={onStartShouldSetResponder:function(){var t=E._config.disabled;if(null==t){var n=E._config.onStartShouldSetResponder_DEPRECATED;return null==n||n()}return!t},onResponderGrant:function(t){t.persist(),E._cancelPressOutDelayTimeout(),E._responderID=t.currentTarget,E._touchState='NOT_RESPONDER',E._receiveSignal('RESPONDER_GRANT',t);var n=C(E._config.delayPressIn);n>0?E._pressDelayTimeout=setTimeout(function(){E._receiveSignal('DELAY',t)},n):E._receiveSignal('DELAY',t);var R=C(E._config.delayLongPress,10,500-n);E._longPressDelayTimeout=setTimeout(function(){E._handleLongPress(t)},R+n)},onResponderMove:function(t){null!=E._config.onPressMove&&E._config.onPressMove(t);var n=E._responderRegion;if(null!=n){var R=L(t);if(null==R)return E._cancelLongPressDelayTimeout(),void E._receiveSignal('LEAVE_PRESS_RECT',t);if(null!=E._touchActivatePosition){var _=E._touchActivatePosition.pageX-R.pageX,o=E._touchActivatePosition.pageY-R.pageY;Math.hypot(_,o)>10&&E._cancelLongPressDelayTimeout()}E._isTouchWithinResponderRegion(R,n)?E._receiveSignal('ENTER_PRESS_RECT',t):(E._cancelLongPressDelayTimeout(),E._receiveSignal('LEAVE_PRESS_RECT',t))}},onResponderRelease:function(t){E._receiveSignal('RESPONDER_RELEASE',t)},onResponderTerminate:function(t){E._receiveSignal('RESPONDER_TERMINATED',t)},onResponderTerminationRequest:function(){var t=E._config.cancelable;if(null==t){var n=E._config.onResponderTerminationRequest_DEPRECATED;return null==n||n()}return t},onClick:function(t){var n=E._config.onPress;null!=n&&n(t)}},R='ios'===S.default.OS||'android'===S.default.OS?null:{onMouseEnter:function(t){if((0,o.isHoverEnabled)()){E._isHovered=!0,E._cancelHoverOutDelayTimeout();var n=E._config.onHoverIn;if(null!=n){var R=C(E._config.delayHoverIn);R>0?E._hoverInDelayTimeout=setTimeout(function(){n(t)},R):n(t)}}},onMouseLeave:function(t){if(E._isHovered){E._isHovered=!1,E._cancelHoverInDelayTimeout();var n=E._config.onHoverOut;if(null!=n){var R=C(E._config.delayHoverOut);R>0?E._hoverInDelayTimeout=setTimeout(function(){n(t)},R):n(t)}}}};return O(O(O({},t),n),R)}},{key:"_receiveSignal",value:function(E,t){var n,R=this._touchState,_=null==(n=c[R])?void 0:n[E];null==this._responderID&&'RESPONDER_RELEASE'===E||((0,l.default)(null!=_&&'ERROR'!==_,'Pressability: Invalid signal `%s` for state `%s` on responder: %s',E,R,'number'==typeof this._responderID?this._responderID:'<<host component>>'),R!==_&&(this._performTransitionSideEffects(R,_,E,t),this._touchState=_))}},{key:"_performTransitionSideEffects",value:function(E,t,n,R){v(n)&&(this._touchActivatePosition=null,this._cancelLongPressDelayTimeout());var _='NOT_RESPONDER'===E&&'RESPONDER_INACTIVE_PRESS_IN'===t,o=!N(E)&&N(t);if((_||o)&&this._measureResponderRegion(),h(E)&&'LONG_PRESS_DETECTED'===n){var l=this._config.onLongPress;null!=l&&l(R)}var s=D(E),T=D(t);if(!s&&T?this._activate(R):s&&!T&&this._deactivate(R),h(E)&&'RESPONDER_RELEASE'===n){var P=this._config,O=P.onLongPress,c=P.onPress,f=P.android_disableSound;if(null!=c)null!=O&&'RESPONDER_ACTIVE_LONG_PRESS_IN'===E&&this._shouldLongPressCancelPress()||(T||s||(this._activate(R),this._deactivate(R)),'android'===S.default.OS&&!0!==f&&u.default.playTouchSound(),c(R))}this._cancelPressDelayTimeout()}},{key:"_activate",value:function(E){var t=this._config.onPressIn,n=L(E);this._touchActivatePosition={pageX:n.pageX,pageY:n.pageY},this._touchActivateTime=Date.now(),null!=t&&t(E)}},{key:"_deactivate",value:function(E){var t=this._config.onPressOut;if(null!=t){var n,R=C(this._config.minPressDuration,0,130),_=Date.now()-(null!=(n=this._touchActivateTime)?n:0),o=Math.max(R-_,C(this._config.delayPressOut));o>0?this._pressOutDelayTimeout=setTimeout(function(){t(E)},o):t(E)}this._touchActivateTime=null}},{key:"_measureResponderRegion",value:function(){null!=this._responderID&&('number'==typeof this._responderID?T.default.measure(this._responderID,this._measureCallback):this._responderID.measure(this._measureCallback))}},{key:"_isTouchWithinResponderRegion",value:function(E,t){var n,R,_,o,l=(0,s.normalizeRect)(this._config.hitSlop),u=(0,s.normalizeRect)(this._config.pressRectOffset),S=t.bottom,T=t.left,P=t.right,O=t.top;return null!=l&&(null!=l.bottom&&(S+=l.bottom),null!=l.left&&(T-=l.left),null!=l.right&&(P+=l.right),null!=l.top&&(O-=l.top)),S+=null!=(n=null==u?void 0:u.bottom)?n:f,T-=null!=(R=null==u?void 0:u.left)?R:I,P+=null!=(_=null==u?void 0:u.right)?_:A,O-=null!=(o=null==u?void 0:u.top)?o:y,E.pageX>T&&E.pageX<P&&E.pageY>O&&E.pageY<S}},{key:"_handleLongPress",value:function(E){'RESPONDER_ACTIVE_PRESS_IN'!==this._touchState&&'RESPONDER_ACTIVE_LONG_PRESS_IN'!==this._touchState||this._receiveSignal('LONG_PRESS_DETECTED',E)}},{key:"_shouldLongPressCancelPress",value:function(){return null==this._config.onLongPressShouldCancelPress_DEPRECATED||this._config.onLongPressShouldCancelPress_DEPRECATED()}},{key:"_cancelHoverInDelayTimeout",value:function(){null!=this._hoverInDelayTimeout&&(clearTimeout(this._hoverInDelayTimeout),this._hoverInDelayTimeout=null)}},{key:"_cancelHoverOutDelayTimeout",value:function(){null!=this._hoverOutDelayTimeout&&(clearTimeout(this._hoverOutDelayTimeout),this._hoverOutDelayTimeout=null)}},{key:"_cancelLongPressDelayTimeout",value:function(){null!=this._longPressDelayTimeout&&(clearTimeout(this._longPressDelayTimeout),this._longPressDelayTimeout=null)}},{key:"_cancelPressDelayTimeout",value:function(){null!=this._pressDelayTimeout&&(clearTimeout(this._pressDelayTimeout),this._pressDelayTimeout=null)}},{key:"_cancelPressOutDelayTimeout",value:function(){null!=this._pressOutDelayTimeout&&(clearTimeout(this._pressOutDelayTimeout),this._pressOutDelayTimeout=null)}}]),E})();function C(E){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.max(t,null!=E?E:n)}e.default=p;var L=function(E){var t=E.nativeEvent,n=t.changedTouches,R=t.touches;return null!=R&&R.length>0?R[0]:null!=n&&n.length>0?n[0]:E.nativeEvent}},225,[12,1,54,29,30,226,6,219,227,57,79,59]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.isHoverEnabled=function(){return t};var t=!1;if('web'===n(r(d[1])).default.OS&&Boolean('undefined'!=typeof window&&window.document&&window.document.createElement)){var o=0,u=function(){o=Date.now(),t&&(t=!1)};document.addEventListener('touchstart',u,!0),document.addEventListener('touchmove',u,!0),document.addEventListener('mousemove',function(){t||Date.now()-o<1e3||(t=!0)},!0)}},226,[1,57]);
__d(function(g,r,i,a,m,e,d){'use strict';function t(t){return{bottom:t,left:t,right:t,top:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.createSquare=t,e.normalizeRect=function(n){return'number'==typeof n?t(n):n}},227,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]),t=r(d[1]);Object.defineProperty(e,"__esModule",{value:!0}),e.PressabilityDebugView=function(n){n.color,n.hitSlop;return null},e.isEnabled=function(){return!1};t(r(d[2])),t(r(d[3])),t(r(d[4])),n(r(d[5]))},228,[12,1,69,213,91,59]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r(d[1])),u=t(r(d[2])),l=t(r(d[3])),s=t(r(d[4])),f=t(r(d[5])),o=t(r(d[6])),v=(function(){function t(u,v){(0,n.default)(this,t),(0,l.default)(f.default.isTV,'TVTouchable: Requires `Platform.isTV`.'),this._tvEventHandler=new o.default,this._tvEventHandler.enable(u,function(t,n){n.dispatchConfig={},s.default.findNodeHandle(u)===n.tag&&('focus'===n.eventType?v.onFocus(n):'blur'===n.eventType?v.onBlur(n):'select'===n.eventType&&(v.getDisabled()||v.onPress(n)))})}return(0,u.default)(t,[{key:"destroy",value:function(){this._tvEventHandler.disable()}}]),t})();e.default=v},229,[1,29,30,6,94,57,217]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),s=r(d[1]),o=s(r(d[2])),n=s(r(d[3])),c=s(r(d[4])),l=s(r(d[5])),p=s(r(d[6])),u=s(r(d[7])),h=s(r(d[8])),f=s(r(d[9])),y=(r(d[10]),s(r(d[11]))),b=s(r(d[12])),v=s(r(d[13])),P=s(r(d[14])),F=s(r(d[15])),_=t(r(d[16]));function R(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var D=(function(t){(0,p.default)(O,t);var s,D,I=(s=O,D=R(),function(){var t,o=(0,h.default)(s);if(D){var n=(0,h.default)(this).constructor;t=Reflect.construct(o,arguments,n)}else t=o.apply(this,arguments);return(0,u.default)(this,t)});function O(){var t;(0,c.default)(this,O);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(t=I.call.apply(I,[this].concat(o))).state={anim:new b.default.Value(t._getChildStyleOpacityWithDefault()),pressability:new f.default(t._createPressabilityConfig())},t}return(0,l.default)(O,[{key:"_createPressabilityConfig",value:function(){var t=this;return{cancelable:!this.props.rejectResponderTermination,disabled:this.props.disabled,hitSlop:this.props.hitSlop,delayLongPress:this.props.delayLongPress,delayPressIn:this.props.delayPressIn,delayPressOut:this.props.delayPressOut,minPressDuration:0,pressRectOffset:this.props.pressRetentionOffset,onBlur:function(s){F.default.isTV&&t._opacityInactive(250),null!=t.props.onBlur&&t.props.onBlur(s)},onFocus:function(s){F.default.isTV&&t._opacityActive(150),null!=t.props.onFocus&&t.props.onFocus(s)},onLongPress:this.props.onLongPress,onPress:this.props.onPress,onPressIn:function(s){t._opacityActive('onResponderGrant'===s.dispatchConfig.registrationName?0:150),null!=t.props.onPressIn&&t.props.onPressIn(s)},onPressOut:function(s){t._opacityInactive(250),null!=t.props.onPressOut&&t.props.onPressOut(s)}}}},{key:"_setOpacityTo",value:function(t,s){b.default.timing(this.state.anim,{toValue:t,duration:s,easing:v.default.inOut(v.default.quad),useNativeDriver:!0}).start()}},{key:"_opacityActive",value:function(t){var s;this._setOpacityTo(null!=(s=this.props.activeOpacity)?s:.2,t)}},{key:"_opacityInactive",value:function(t){this._setOpacityTo(this._getChildStyleOpacityWithDefault(),t)}},{key:"_getChildStyleOpacityWithDefault",value:function(){var t,s=null==(t=(0,P.default)(this.props.style))?void 0:t.opacity;return'number'==typeof s?s:1}},{key:"render",value:function(){var t=this.state.pressability.getEventHandlers(),s=(t.onBlur,t.onFocus,(0,n.default)(t,["onBlur","onFocus"]));return _.createElement(b.default.View,(0,o.default)({accessible:!1!==this.props.accessible,accessibilityLabel:this.props.accessibilityLabel,accessibilityHint:this.props.accessibilityHint,accessibilityRole:this.props.accessibilityRole,accessibilityState:this.props.accessibilityState,accessibilityActions:this.props.accessibilityActions,onAccessibilityAction:this.props.onAccessibilityAction,accessibilityValue:this.props.accessibilityValue,importantForAccessibility:this.props.importantForAccessibility,accessibilityLiveRegion:this.props.accessibilityLiveRegion,accessibilityViewIsModal:this.props.accessibilityViewIsModal,accessibilityElementsHidden:this.props.accessibilityElementsHidden,style:[this.props.style,{opacity:this.state.anim}],nativeID:this.props.nativeID,testID:this.props.testID,onLayout:this.props.onLayout,nextFocusDown:this.props.nextFocusDown,nextFocusForward:this.props.nextFocusForward,nextFocusLeft:this.props.nextFocusLeft,nextFocusRight:this.props.nextFocusRight,nextFocusUp:this.props.nextFocusUp,hasTVPreferredFocus:this.props.hasTVPreferredFocus,hitSlop:this.props.hitSlop,focusable:!1!==this.props.focusable&&void 0!==this.props.onPress,ref:this.props.hostRef},s),this.props.children,null)}},{key:"componentDidMount",value:function(){var t=this;F.default.isTV&&(this._tvTouchable=new y.default(this,{getDisabled:function(){return!0===t.props.disabled},onBlur:function(s){null!=t.props.onBlur&&t.props.onBlur(s)},onFocus:function(s){null!=t.props.onFocus&&t.props.onFocus(s)},onPress:function(s){null!=t.props.onPress&&t.props.onPress(s)}}))}},{key:"componentDidUpdate",value:function(t,s){this.state.pressability.configure(this._createPressabilityConfig()),this.props.disabled!==t.disabled&&this._opacityInactive(250)}},{key:"componentWillUnmount",value:function(){F.default.isTV&&null!=this._tvTouchable&&this._tvTouchable.destroy(),this.state.pressability.reset()}}]),O})(_.Component);m.exports=_.forwardRef(function(t,s){return _.createElement(D,(0,o.default)({},t,{hostRef:s}))})},230,[12,1,16,55,29,30,45,47,44,225,228,229,231,259,90,57,59]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=t(r(d[1])),c=t(r(d[2]));function o(t,n){var c=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),c.push.apply(c,o)}return c}r(d[3]),r(d[4]);var u=r(d[5]),s=r(d[6]),O=c.default.isTesting||g.RN$Bridgeless?u:s;m.exports=(function(t){for(var c=1;c<arguments.length;c++){var u=null!=arguments[c]?arguments[c]:{};c%2?o(Object(u),!0).forEach(function(c){(0,n.default)(t,c,u[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(u)):o(Object(u)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(u,n))})}return t})({get FlatList(){return r(d[7])},get Image(){return r(d[8])},get ScrollView(){return r(d[9])},get SectionList(){return r(d[10])},get Text(){return r(d[11])},get View(){return r(d[12])}},O)},231,[1,54,57,91,59,232,242,263,290,297,298,301,302]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);function n(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,u)}return o}function o(o){for(var u=1;u<arguments.length;u++){var c=null!=arguments[u]?arguments[u]:{};u%2?n(Object(c),!0).forEach(function(n){t(o,n,c[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(c)):n(Object(c)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(c,t))})}return o}var u=r(d[1]),c=u.AnimatedEvent,f=u.attachNativeEvent,s=r(d[2]),l=r(d[3]),p=r(d[4]),v=r(d[5]),O=r(d[6]),b=r(d[7]),y=r(d[8]),j={start:function(){},stop:function(){},reset:function(){},_startNativeLoop:function(){},_isUsingNativeDriver:function(){return!1}};m.exports={Value:O,ValueXY:b,Interpolation:l,Node:p,decay:function(t,n){return j},timing:function(t,n){var u=t;return o(o({},j),{},{start:function(t){u.setValue(n.toValue),t&&t({finished:!0})}})},spring:function(t,n){var u=t;return o(o({},j),{},{start:function(t){u.setValue(n.toValue),t&&t({finished:!0})}})},add:s.add,subtract:s.subtract,divide:s.divide,multiply:s.multiply,modulo:s.modulo,diffClamp:s.diffClamp,delay:function(t){return j},sequence:function(t){return j},parallel:function(t,n){return j},stagger:function(t,n){return j},loop:function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).iterations;return j},event:function(t,n){return null},createAnimatedComponent:y,attachNativeEvent:f,forkEvent:s.forkEvent,unforkEvent:s.unforkEvent,Event:c,__PropsOnlyForTests:v}},232,[54,233,242,235,236,248,234,253,261]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),s=r(d[2]),v=r(d[3]),o=r(d[4]),c=r(d[5]),l=r(d[3]).shouldUseNativeDriver;function u(t,n,l){var u=[];c(l[0]&&l[0].nativeEvent,'Native driven events only support animated values contained inside `nativeEvent`.'),(function t(n,v){if(n instanceof s)n.__makeNative(),u.push({nativeEventPath:v,animatedValueTag:n.__getNativeTag()});else if('object'==typeof n)for(var o in n)t(n[o],v.concat(o))})(l[0].nativeEvent,[]);var h=o.findNodeHandle(t);return null!=h&&u.forEach(function(t){v.API.addAnimatedEventToView(h,n,t)}),{detach:function(){null!=h&&u.forEach(function(t){v.API.removeAnimatedEventFromView(h,n,t.animatedValueTag)})}}}var h=(function(){function v(n,s){t(this,v),this._listeners=[],this._argMapping=n,null==s&&(console.warn('Animated.event now requires a second argument for options'),s={useNativeDriver:!1}),s.listener&&this.__addListener(s.listener),this._callListeners=this._callListeners.bind(this),this._attachedEvent=null,this.__isNative=l(s)}return n(v,[{key:"__addListener",value:function(t){this._listeners.push(t)}},{key:"__removeListener",value:function(t){this._listeners=this._listeners.filter(function(n){return n!==t})}},{key:"__attach",value:function(t,n){c(this.__isNative,'Only native driven events need to be attached.'),this._attachedEvent=u(t,n,this._argMapping)}},{key:"__detach",value:function(t,n){c(this.__isNative,'Only native driven events need to be detached.'),this._attachedEvent&&this._attachedEvent.detach()}},{key:"__getHandler",value:function(){var t=this;if(this.__isNative)return this._callListeners;return function(){for(var n=arguments.length,v=new Array(n),o=0;o<n;o++)v[o]=arguments[o];var c=function t(n,v,o){if(n instanceof s)'number'==typeof v&&n.setValue(v);else if('object'==typeof n)for(var c in n)t(n[c],v[c],c)};t._argMapping.forEach(function(t,n){c(t,v[n])}),t._callListeners.apply(t,v)}}},{key:"_callListeners",value:function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];this._listeners.forEach(function(t){return t.apply(void 0,n)})}}]),v})();m.exports={AnimatedEvent:h,attachNativeEvent:u}},233,[29,30,234,237,94,6]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),s=r(d[2]),u=r(d[3]),o=r(d[4]),l=r(d[5]);function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var _=r(d[6]),c=r(d[7]),h=r(d[8]),v=r(d[9]).API;function p(t){var n=new Set;!(function t(s){'function'==typeof s.update?n.add(s):s.__getChildren().forEach(t)})(t),n.forEach(function(t){return t.update()})}var y=(function(y){u(V,c);var k,A,N=(k=V,A=f(),function(){var t,n=l(k);if(A){var s=l(this).constructor;t=Reflect.construct(n,arguments,s)}else t=n.apply(this,arguments);return o(this,t)});function V(n){var s;if(t(this,V),s=N.call(this),'number'!=typeof n)throw new Error('AnimatedValue: Attempting to set value to undefined');return s._startingValue=s._value=n,s._offset=0,s._animation=null,s}return n(V,[{key:"__detach",value:function(){this.stopAnimation(),s(l(V.prototype),"__detach",this).call(this)}},{key:"__getValue",value:function(){return this._value+this._offset}},{key:"setValue",value:function(t){this._animation&&(this._animation.stop(),this._animation=null),this._updateValue(t,!this.__isNative),this.__isNative&&v.setAnimatedNodeValue(this.__getNativeTag(),t)}},{key:"setOffset",value:function(t){this._offset=t,this.__isNative&&v.setAnimatedNodeOffset(this.__getNativeTag(),t)}},{key:"flattenOffset",value:function(){this._value+=this._offset,this._offset=0,this.__isNative&&v.flattenAnimatedNodeOffset(this.__getNativeTag())}},{key:"extractOffset",value:function(){this._offset+=this._value,this._value=0,this.__isNative&&v.extractAnimatedNodeOffset(this.__getNativeTag())}},{key:"stopAnimation",value:function(t){this.stopTracking(),this._animation&&this._animation.stop(),this._animation=null,t&&t(this.__getValue())}},{key:"resetAnimation",value:function(t){this.stopAnimation(t),this._value=this._startingValue}},{key:"_onAnimatedValueUpdateReceived",value:function(t){this._updateValue(t,!1)}},{key:"interpolate",value:function(t){return new _(this,t)}},{key:"animate",value:function(t,n){var s=this,u=null;t.__isInteraction&&(u=h.createInteractionHandle());var o=this._animation;this._animation&&this._animation.stop(),this._animation=t,t.start(this._value,function(t){s._updateValue(t,!0)},function(t){s._animation=null,null!==u&&h.clearInteractionHandle(u),n&&n(t)},o,this)}},{key:"stopTracking",value:function(){this._tracking&&this._tracking.__detach(),this._tracking=null}},{key:"track",value:function(t){this.stopTracking(),this._tracking=t}},{key:"_updateValue",value:function(t,n){if(void 0===t)throw new Error('AnimatedValue: Attempting to set value to undefined');this._value=t,n&&p(this),s(l(V.prototype),"__callListeners",this).call(this,this.__getValue())}},{key:"__getNativeConfig",value:function(){return{type:'value',value:this._value,offset:this._offset}}}]),V})();m.exports=y},234,[29,30,42,45,47,44,235,239,240,237]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=r(d[2]),u=r(d[3]),c=r(d[4]),p=r(d[5]),f=r(d[6]);function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function h(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,u)}return o}function s(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?h(Object(o),!0).forEach(function(n){f(t,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):h(Object(o)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))})}return t}r(d[7]);var v=r(d[8]),_=r(d[9]),y=r(d[10]),R=r(d[11]),b=function(t){return t};function x(t){if(t.outputRange&&'string'==typeof t.outputRange[0])return w(t);var n=t.outputRange;E('outputRange',n);var o=t.inputRange;E('inputRange',o),C(o),y(o.length===n.length,'inputRange ('+o.length+') and outputRange ('+n.length+') must have the same length');var u=t.easing||b,c='extend';void 0!==t.extrapolateLeft?c=t.extrapolateLeft:void 0!==t.extrapolate&&(c=t.extrapolate);var p='extend';return void 0!==t.extrapolateRight?p=t.extrapolateRight:void 0!==t.extrapolate&&(p=t.extrapolate),function(t){y('number'==typeof t,'Cannot interpolation an input which is not a number');var f=P(t,o);return O(t,o[f],o[f+1],n[f],n[f+1],u,c,p)}}function O(t,n,o,u,c,p,f,l){var h=t;if(h<n){if('identity'===f)return h;'clamp'===f&&(h=n)}if(h>o){if('identity'===l)return h;'clamp'===l&&(h=o)}return u===c?u:n===o?t<=n?u:c:(n===-1/0?h=-h:o===1/0?h-=n:h=(h-n)/(o-n),h=p(h),u===-1/0?h=-h:c===1/0?h+=u:h=h*(c-u)+u,h)}function j(t){var n=R(t);return null===n||'number'!=typeof n?t:"rgba("+((4278190080&(n=n||0))>>>24)+", "+((16711680&n)>>>16)+", "+((65280&n)>>>8)+", "+(255&n)/255+")"}var k=/[+-]?(?:\d+\.?\d*|\.\d+)(?:[eE][+-]?\d+)?/g;function w(t){var n=t.outputRange;y(n.length>=2,'Bad output range'),D(n=n.map(j));var o=n[0].match(k).map(function(){return[]});n.forEach(function(t){t.match(k).forEach(function(t,n){o[n].push(+t)})});var u,c=n[0].match(k).map(function(n,u){return x(s(s({},t),{},{outputRange:o[u]}))}),p='string'==typeof(u=n[0])&&u.startsWith('rgb');return function(t){var o=0;return n[0].replace(k,function(){var n=+c[o++](t);return p&&(n=o<4?Math.round(n):Math.round(1e3*n)/1e3),String(n)})}}function D(t){for(var n=t[0].replace(k,''),o=1;o<t.length;++o)y(n===t[o].replace(k,''),'invalid pattern '+t[0]+' and '+t[o])}function P(t,n){var o;for(o=1;o<n.length-1&&!(n[o]>=t);++o);return o-1}function C(t){y(t.length>=2,'inputRange must have at least 2 elements');for(var n=1;n<t.length;++n)y(t[n]>=t[n-1],'inputRange must be monotonically non-decreasing '+t)}function E(t,n){y(n.length>=2,t+' must have at least 2 elements'),y(2!==n.length||n[0]!==-1/0||n[1]!==1/0,t+'cannot be ]-infinity;+infinity[ '+n)}var L=(function(f){u(b,v);var h,s,R=(h=b,s=l(),function(){var t,n=p(h);if(s){var o=p(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return c(this,t)});function b(n,o){var u;return t(this,b),(u=R.call(this))._parent=n,u._config=o,u._interpolation=x(o),u}return n(b,[{key:"__makeNative",value:function(){this._parent.__makeNative(),o(p(b.prototype),"__makeNative",this).call(this)}},{key:"__getValue",value:function(){var t=this._parent.__getValue();return y('number'==typeof t,'Cannot interpolate an input which is not a number.'),this._interpolation(t)}},{key:"interpolate",value:function(t){return new b(this,t)}},{key:"__attach",value:function(){this._parent.__addChild(this)}},{key:"__detach",value:function(){this._parent.__removeChild(this),o(p(b.prototype),"__detach",this).call(this)}},{key:"__transformDataType",value:function(t){return t.map(_.transformDataType)}},{key:"__getNativeConfig",value:function(){return{inputRange:this._config.inputRange,outputRange:this.__transformDataType(this._config.outputRange),extrapolateLeft:this._config.extrapolateLeft||this._config.extrapolate||'extend',extrapolateRight:this._config.extrapolateRight||this._config.extrapolate||'extend',type:'interpolation'}}}]),b})();L.__createInterpolation=x,m.exports=L},235,[29,30,42,45,47,44,54,236,239,237,6,69]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),s=r(d[2]),_=s.API,u=r(d[3]),o=1,v=(function(){function v(){t(this,v),this._listeners={}}return n(v,[{key:"__attach",value:function(){}},{key:"__detach",value:function(){this.__isNative&&null!=this.__nativeTag&&(s.API.dropAnimatedNode(this.__nativeTag),this.__nativeTag=void 0)}},{key:"__getValue",value:function(){}},{key:"__getAnimatedValue",value:function(){return this.__getValue()}},{key:"__addChild",value:function(t){}},{key:"__removeChild",value:function(t){}},{key:"__getChildren",value:function(){return[]}}]),n(v,[{key:"__makeNative",value:function(){if(!this.__isNative)throw new Error('This node cannot be made a "native" animated node');this.hasListeners()&&this._startListeningToNativeValueUpdates()}},{key:"addListener",value:function(t){var n=String(o++);return this._listeners[n]=t,this.__isNative&&this._startListeningToNativeValueUpdates(),n}},{key:"removeListener",value:function(t){delete this._listeners[t],this.__isNative&&!this.hasListeners()&&this._stopListeningForNativeValueUpdates()}},{key:"removeAllListeners",value:function(){this._listeners={},this.__isNative&&this._stopListeningForNativeValueUpdates()}},{key:"hasListeners",value:function(){return!!Object.keys(this._listeners).length}},{key:"_startListeningToNativeValueUpdates",value:function(){var t=this;this.__nativeAnimatedValueListener&&!this.__shouldUpdateListenersForNewNativeTag||(this.__shouldUpdateListenersForNewNativeTag&&(this.__shouldUpdateListenersForNewNativeTag=!1,this._stopListeningForNativeValueUpdates()),_.startListeningToAnimatedNodeValue(this.__getNativeTag()),this.__nativeAnimatedValueListener=s.nativeEventEmitter.addListener('onAnimatedValueUpdate',function(n){n.tag===t.__getNativeTag()&&t._onAnimatedValueUpdateReceived(n.value)}))}},{key:"_onAnimatedValueUpdateReceived",value:function(t){this.__callListeners(t)}},{key:"__callListeners",value:function(t){for(var n in this._listeners)this._listeners[n]({value:t})}},{key:"_stopListeningForNativeValueUpdates",value:function(){this.__nativeAnimatedValueListener&&(this.__nativeAnimatedValueListener.remove(),this.__nativeAnimatedValueListener=null,_.stopListeningToAnimatedNodeValue(this.__getNativeTag()))}},{key:"__getNativeTag",value:function(){var t;s.assertNativeAnimatedModule(),u(this.__isNative,'Attempt to get native tag from node not marked as "native"');var n=null!=(t=this.__nativeTag)?t:s.generateNewNodeTag();return null==this.__nativeTag&&(this.__nativeTag=n,s.API.createAnimatedNode(n,this.__getNativeConfig()),this.__shouldUpdateListenersForNewNativeTag=!0),n}},{key:"__getNativeConfig",value:function(){throw new Error('This JS animated node type cannot be used as native animated node')}},{key:"toJSON",value:function(){return this.__getValue()}}]),v})();m.exports=v},236,[29,30,237,6]);
__d(function(g,r,i,a,m,e,d){'use strict';var t,n=r(d[0]),o=n(r(d[1])),l=n(r(d[2])),u=n(r(d[3])),s=1,f=1,v=!1,c=[],N={enableQueue:function(){v=!0},disableQueue:function(){(0,u.default)(l.default,'Native animated module is not available'),v=!1;for(var t=0,n=c.length;t<n;t++){var o=c[t];l.default.connectAnimatedNodes(o[0],o[1])}c.length=0},createAnimatedNode:function(t,n){(0,u.default)(l.default,'Native animated module is not available'),l.default.createAnimatedNode(t,n)},startListeningToAnimatedNodeValue:function(t){(0,u.default)(l.default,'Native animated module is not available'),l.default.startListeningToAnimatedNodeValue(t)},stopListeningToAnimatedNodeValue:function(t){(0,u.default)(l.default,'Native animated module is not available'),l.default.stopListeningToAnimatedNodeValue(t)},connectAnimatedNodes:function(t,n){(0,u.default)(l.default,'Native animated module is not available'),v?c.push([t,n]):l.default.connectAnimatedNodes(t,n)},disconnectAnimatedNodes:function(t,n){(0,u.default)(l.default,'Native animated module is not available'),l.default.disconnectAnimatedNodes(t,n)},startAnimatingNode:function(t,n,o,s){(0,u.default)(l.default,'Native animated module is not available'),l.default.startAnimatingNode(t,n,o,s)},stopAnimation:function(t){(0,u.default)(l.default,'Native animated module is not available'),l.default.stopAnimation(t)},setAnimatedNodeValue:function(t,n){(0,u.default)(l.default,'Native animated module is not available'),l.default.setAnimatedNodeValue(t,n)},setAnimatedNodeOffset:function(t,n){(0,u.default)(l.default,'Native animated module is not available'),l.default.setAnimatedNodeOffset(t,n)},flattenAnimatedNodeOffset:function(t){(0,u.default)(l.default,'Native animated module is not available'),l.default.flattenAnimatedNodeOffset(t)},extractAnimatedNodeOffset:function(t){(0,u.default)(l.default,'Native animated module is not available'),l.default.extractAnimatedNodeOffset(t)},connectAnimatedNodeToView:function(t,n){(0,u.default)(l.default,'Native animated module is not available'),l.default.connectAnimatedNodeToView(t,n)},disconnectAnimatedNodeFromView:function(t,n){(0,u.default)(l.default,'Native animated module is not available'),l.default.disconnectAnimatedNodeFromView(t,n)},restoreDefaultValues:function(t){(0,u.default)(l.default,'Native animated module is not available'),null!=l.default.restoreDefaultValues&&l.default.restoreDefaultValues(t)},dropAnimatedNode:function(t){(0,u.default)(l.default,'Native animated module is not available'),l.default.dropAnimatedNode(t)},addAnimatedEventToView:function(t,n,o){(0,u.default)(l.default,'Native animated module is not available'),l.default.addAnimatedEventToView(t,n,o)},removeAnimatedEventFromView:function(t,n,o){(0,u.default)(l.default,'Native animated module is not available'),l.default.removeAnimatedEventFromView(t,n,o)}},p={opacity:!0,transform:!0,borderRadius:!0,borderBottomEndRadius:!0,borderBottomLeftRadius:!0,borderBottomRightRadius:!0,borderBottomStartRadius:!0,borderTopEndRadius:!0,borderTopLeftRadius:!0,borderTopRightRadius:!0,borderTopStartRadius:!0,elevation:!0,zIndex:!0,shadowOpacity:!0,shadowRadius:!0,scaleX:!0,scaleY:!0,translateX:!0,translateY:!0},b={translateX:!0,translateY:!0,scale:!0,scaleX:!0,scaleY:!0,rotate:!0,rotateX:!0,rotateY:!0,rotateZ:!0,perspective:!0},A={inputRange:!0,outputRange:!0,extrapolate:!0,extrapolateRight:!0,extrapolateLeft:!0};var h=!1;m.exports={API:N,addWhitelistedStyleProp:function(t){p[t]=!0},addWhitelistedTransformProp:function(t){b[t]=!0},addWhitelistedInterpolationParam:function(t){A[t]=!0},validateStyles:function(t){for(var n in t)if(!p.hasOwnProperty(n))throw new Error("Style property '"+n+"' is not supported by native animated module")},validateTransform:function(t){t.forEach(function(t){if(!b.hasOwnProperty(t.property))throw new Error("Property '"+t.property+"' is not supported by native animated module")})},validateInterpolation:function(t){for(var n in t)if(!A.hasOwnProperty(n))throw new Error("Interpolation property '"+n+"' is not supported by native animated module")},generateNewNodeTag:function(){return s++},generateNewAnimationId:function(){return f++},assertNativeAnimatedModule:function(){(0,u.default)(l.default,'Native animated module is not available')},shouldUseNativeDriver:function(t){return null==t.useNativeDriver&&console.warn("Animated: `useNativeDriver` was not specified. This is a required option and must be explicitly set to `true` or `false`"),!0!==t.useNativeDriver||l.default?t.useNativeDriver||!1:(h||(console.warn("Animated: `useNativeDriver` is not supported because the native animated module is missing. Falling back to JS-based animation. To resolve this, add `RCTAnimation` module to this app, or remove `useNativeDriver`. Make sure to run `pod install` first. Read more about autolinking: https://github.com/react-native-community/cli/blob/master/docs/autolinking.md"),h=!0),!1)},transformDataType:function(t){return'string'!=typeof t?t:/deg$/.test(t)?(parseFloat(t)||0)*Math.PI/180:t},get nativeEventEmitter(){return t||(t=new o.default(l.default)),t}}},237,[1,145,238,6]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])).get('NativeAnimatedModule');e.default=u},238,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=r(d[2]),c=r(d[3]),s=r(d[4]),l=r(d[5]);function _(t,n){var o;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=u(t))||n&&t&&"number"==typeof t.length){o&&(t=o);var c=0;return function(){return c>=t.length?{done:!0}:{done:!1,value:t[c++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(o=t[Symbol.iterator]()).next.bind(o)}function u(t,n){if(t){if("string"==typeof t)return h(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?h(t,n):void 0}}function h(t,n){(null==n||n>t.length)&&(n=t.length);for(var o=0,c=new Array(n);o<n;o++)c[o]=t[o];return c}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var f=r(d[6]),y=r(d[7]),p=(function(u){c(b,f);var h,p,N=(h=b,p=v(),function(){var t,n=l(h);if(p){var o=l(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return s(this,t)});function b(){var n;return t(this,b),(n=N.call(this))._children=[],n}return n(b,[{key:"__makeNative",value:function(){if(!this.__isNative){this.__isNative=!0;for(var t,n=_(this._children);!(t=n()).done;){var c=t.value;c.__makeNative(),y.API.connectAnimatedNodes(this.__getNativeTag(),c.__getNativeTag())}}o(l(b.prototype),"__makeNative",this).call(this)}},{key:"__addChild",value:function(t){0===this._children.length&&this.__attach(),this._children.push(t),this.__isNative&&(t.__makeNative(),y.API.connectAnimatedNodes(this.__getNativeTag(),t.__getNativeTag()))}},{key:"__removeChild",value:function(t){var n=this._children.indexOf(t);-1!==n?(this.__isNative&&t.__isNative&&y.API.disconnectAnimatedNodes(this.__getNativeTag(),t.__getNativeTag()),this._children.splice(n,1),0===this._children.length&&this.__detach()):console.warn("Trying to remove a child that doesn't exist")}},{key:"__getChildren",value:function(){return this._children}},{key:"__callListeners",value:function(t){if(o(l(b.prototype),"__callListeners",this).call(this,t),!this.__isNative)for(var n,c=_(this._children);!(n=c()).done;){var s=n.value;s.__getValue&&s.__callListeners(s.__getValue())}}}]),b})();m.exports=p},239,[29,30,42,45,47,44,236,237]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]),t=r(d[1]),o=r(d[2]),c=(r(d[3]),r(d[4])),s=r(d[5]),u=new t,l={Events:s({interactionStart:!0,interactionComplete:!0}),runAfterInteractions:function(n){var t=[],o=new Promise(function(o){k(),n&&t.push(n),t.push({run:o,name:'resolve '+(n&&n.name||'?')}),h.enqueueTasks(t)});return{then:o.then.bind(o),done:function(){if(o.done)return o.done.apply(o,arguments);console.warn('Tried to call done when not supported by current Promise implementation.')},cancel:function(){h.cancelTasks(t)}}},createInteractionHandle:function(){k();var n=++T;return p.add(n),n},clearInteractionHandle:function(n){c(!!n,'InteractionManager: Must provide a handle to clear.'),k(),p.delete(n),v.add(n)},addListener:u.addListener.bind(u),setDeadline:function(n){E=n}},f=new Set,p=new Set,v=new Set,h=new o({onMoreTasks:k}),w=0,T=0,E=-1;function k(){w||(w=E>0?setTimeout(I,0):setImmediate(I))}function I(){w=0;var t=f.size;p.forEach(function(n){return f.add(n)}),v.forEach(function(n){return f.delete(n)});var o=f.size;if(0!==t&&0===o?u.emit(l.Events.interactionComplete):0===t&&0!==o&&u.emit(l.Events.interactionStart),0===o)for(;h.hasTasksToProcess();)if(h.processNext(),E>0&&n.getEventLoopRunningTime()>=E){k();break}p.clear(),v.clear()}m.exports=l},240,[23,49,241,142,6,221]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),u=r(d[2]);function s(t,n){var u=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),u.push.apply(u,s)}return u}function o(n){for(var u=1;u<arguments.length;u++){var o=null!=arguments[u]?arguments[u]:{};u%2?s(Object(o),!0).forEach(function(u){t(n,u,o[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}r(d[3]);var c=r(d[4]),h=(function(){function t(u){var s=u.onMoreTasks;n(this,t),this._onMoreTasks=s,this._queueStack=[{tasks:[],popable:!1}]}return u(t,[{key:"enqueue",value:function(t){this._getCurrentQueue().push(t)}},{key:"enqueueTasks",value:function(t){var n=this;t.forEach(function(t){return n.enqueue(t)})}},{key:"cancelTasks",value:function(t){this._queueStack=this._queueStack.map(function(n){return o(o({},n),{},{tasks:n.tasks.filter(function(n){return-1===t.indexOf(n)})})}).filter(function(t,n){return t.tasks.length>0||0===n})}},{key:"hasTasksToProcess",value:function(){return this._getCurrentQueue().length>0}},{key:"processNext",value:function(){var t=this._getCurrentQueue();if(t.length){var n=t.shift();try{n.gen?this._genPromise(n):n.run?n.run():(c('function'==typeof n,'Expected Function, SimpleTask, or PromiseTask, but got:\n'+JSON.stringify(n,null,2)),n())}catch(t){throw t.message='TaskQueue: Error with task '+(n.name||'')+': '+t.message,t}}}},{key:"_getCurrentQueue",value:function(){var t=this._queueStack.length-1,n=this._queueStack[t];return n.popable&&0===n.tasks.length&&this._queueStack.length>1?(this._queueStack.pop(),this._getCurrentQueue()):n.tasks}},{key:"_genPromise",value:function(t){var n=this;this._queueStack.push({tasks:[],popable:!1});var u=this._queueStack.length-1;t.gen().then(function(){n._queueStack[u].popable=!0,n.hasTasksToProcess()&&n._onMoreTasks()}).catch(function(n){throw n.message="TaskQueue: Error resolving Promise in task "+t.name+": "+n.message,n}).done()}}]),t})();m.exports=h},241,[54,29,30,142,6]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);function n(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,u)}return o}function o(o){for(var u=1;u<arguments.length;u++){var s=null!=arguments[u]?arguments[u]:{};u%2?n(Object(s),!0).forEach(function(n){t(o,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(s,t))})}return o}var u=r(d[1]),s=u.AnimatedEvent,c=u.attachNativeEvent,f=r(d[2]),v=r(d[3]),p=r(d[4]),l=r(d[5]),h=r(d[6]),_=r(d[7]),w=r(d[8]),y=r(d[9]),N=r(d[10]),O=r(d[11]),D=r(d[12]),b=r(d[13]),E=r(d[14]),L=r(d[15]),j=r(d[16]),A=r(d[17]),P=function(t,n){return t&&n.onComplete?function(){n.onComplete&&n.onComplete.apply(n,arguments),t&&t.apply(void 0,arguments)}:t||n.onComplete},k=function(t,n,u){if(t instanceof b){var s=o({},n),c=o({},n);for(var f in n){var v=n[f],p=v.x,l=v.y;void 0!==p&&void 0!==l&&(s[f]=p,c[f]=l)}var h=u(t.x,s),_=u(t.y,c);return C([h,_],{stopTogether:!1})}return null},U=function t(n,u){var s=function(t,n,o){o=P(o,n);var u=t,s=n;u.stopTracking(),n.toValue instanceof w?u.track(new O(u,n.toValue,j,s,o)):u.animate(new j(s),o)};return k(n,u,t)||{start:function(t){s(n,u,t)},stop:function(){n.stopAnimation()},reset:function(){n.resetAnimation()},_startNativeLoop:function(t){var c=o(o({},u),{},{iterations:t});s(n,c)},_isUsingNativeDriver:function(){return u.useNativeDriver||!1}}},V=function(t){var n=0;return{start:function(o){0===t.length?o&&o({finished:!0}):t[n].start(function u(s){s.finished&&++n!==t.length?t[n].start(u):o&&o(s)})},stop:function(){n<t.length&&t[n].stop()},reset:function(){t.forEach(function(t,o){o<=n&&t.reset()}),n=0},_startNativeLoop:function(){throw new Error('Loops run using the native driver cannot contain Animated.sequence animations')},_isUsingNativeDriver:function(){return!1}}},C=function(t,n){var o=0,u={},s=!(n&&!1===n.stopTogether),c={start:function(n){o!==t.length?t.forEach(function(f,v){var p=function(f){if(u[v]=!0,++o===t.length)return o=0,void(n&&n(f));!f.finished&&s&&c.stop()};f?f.start(p):p({finished:!0})}):n&&n({finished:!0})},stop:function(){t.forEach(function(t,n){!u[n]&&t.stop(),u[n]=!0})},reset:function(){t.forEach(function(t,n){t.reset(),u[n]=!1,o=0})},_startNativeLoop:function(){throw new Error('Loops run using the native driver cannot contain Animated.parallel animations')},_isUsingNativeDriver:function(){return!1}};return c},T=function(t){return U(new D(0),{toValue:0,delay:t,duration:0,useNativeDriver:!1})};m.exports={Value:D,ValueXY:b,Interpolation:l,Node:w,decay:function t(n,u){var s=function(t,n,o){o=P(o,n);var u=t,s=n;u.stopTracking(),u.animate(new E(s),o)};return k(n,u,t)||{start:function(t){s(n,u,t)},stop:function(){n.stopAnimation()},reset:function(){n.resetAnimation()},_startNativeLoop:function(t){var c=o(o({},u),{},{iterations:t});s(n,c)},_isUsingNativeDriver:function(){return u.useNativeDriver||!1}}},timing:U,spring:function t(n,u){var s=function(t,n,o){o=P(o,n);var u=t,s=n;u.stopTracking(),n.toValue instanceof w?u.track(new O(u,n.toValue,L,s,o)):u.animate(new L(s),o)};return k(n,u,t)||{start:function(t){s(n,u,t)},stop:function(){n.stopAnimation()},reset:function(){n.resetAnimation()},_startNativeLoop:function(t){var c=o(o({},u),{},{iterations:t});s(n,c)},_isUsingNativeDriver:function(){return u.useNativeDriver||!1}}},add:function(t,n){return new f(t,n)},subtract:function(t,n){return new N(t,n)},divide:function(t,n){return new p(t,n)},multiply:function(t,n){return new _(t,n)},modulo:function(t,n){return new h(t,n)},diffClamp:function(t,n,o){return new v(t,n,o)},delay:T,sequence:V,parallel:C,stagger:function(t,n){return C(n.map(function(n,o){return V([T(t*o),n])}))},loop:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.iterations,u=void 0===o?-1:o,s=n.resetBeforeIteration,c=void 0===s||s,f=!1,v=0;return{start:function(n){t&&0!==u?t._isUsingNativeDriver()?t._startNativeLoop(u):(function o(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{finished:!0};f||v===u||!1===s.finished?n&&n(s):(v++,c&&t.reset(),t.start(o))})():n&&n({finished:!0})},stop:function(){f=!0,t.stop()},reset:function(){v=0,f=!1,t.reset()},_startNativeLoop:function(){throw new Error('Loops run using the native driver cannot contain Animated.loop animations')},_isUsingNativeDriver:function(){return t._isUsingNativeDriver()}}},event:function(t,n){var o=new s(t,n);return o.__isNative?o:o.__getHandler()},createAnimatedComponent:A,attachNativeEvent:c,forkEvent:function(t,n){return t?t instanceof s?(t.__addListener(n),t):function(){'function'==typeof t&&t.apply(void 0,arguments),n.apply(void 0,arguments)}:n},unforkEvent:function(t,n){t&&t instanceof s&&t.__removeListener(n)},Event:s,__PropsOnlyForTests:y}},242,[54,233,243,244,245,235,246,247,236,248,251,252,234,253,254,256,258,261]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),_=r(d[2]),u=r(d[3]),c=r(d[4]),o=r(d[5]);function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var h=r(d[6]),l=(r(d[7]),r(d[8])),f=r(d[9]),v=(function(v){u(b,f);var y,p,k=(y=b,p=s(),function(){var t,n=o(y);if(p){var _=o(this).constructor;t=Reflect.construct(n,arguments,_)}else t=n.apply(this,arguments);return c(this,t)});function b(n,_){var u;return t(this,b),(u=k.call(this))._a='number'==typeof n?new l(n):n,u._b='number'==typeof _?new l(_):_,u}return n(b,[{key:"__makeNative",value:function(){this._a.__makeNative(),this._b.__makeNative(),_(o(b.prototype),"__makeNative",this).call(this)}},{key:"__getValue",value:function(){return this._a.__getValue()+this._b.__getValue()}},{key:"interpolate",value:function(t){return new h(this,t)}},{key:"__attach",value:function(){this._a.__addChild(this),this._b.__addChild(this)}},{key:"__detach",value:function(){this._a.__removeChild(this),this._b.__removeChild(this),_(o(b.prototype),"__detach",this).call(this)}},{key:"__getNativeConfig",value:function(){return{type:'addition',input:[this._a.__getNativeTag(),this._b.__getNativeTag()]}}}]),b})();m.exports=v},243,[29,30,42,45,47,44,235,236,234,239]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),u=r(d[2]),_=r(d[3]),c=r(d[4]),s=r(d[5]);function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var h=r(d[6]),o=(r(d[7]),r(d[8])),f=(function(f){_(k,o);var v,p,y=(v=k,p=l(),function(){var t,n=s(v);if(p){var u=s(this).constructor;t=Reflect.construct(n,arguments,u)}else t=n.apply(this,arguments);return c(this,t)});function k(n,u,_){var c;return t(this,k),(c=y.call(this))._a=n,c._min=u,c._max=_,c._value=c._lastValue=c._a.__getValue(),c}return n(k,[{key:"__makeNative",value:function(){this._a.__makeNative(),u(s(k.prototype),"__makeNative",this).call(this)}},{key:"interpolate",value:function(t){return new h(this,t)}},{key:"__getValue",value:function(){var t=this._a.__getValue(),n=t-this._lastValue;return this._lastValue=t,this._value=Math.min(Math.max(this._value+n,this._min),this._max),this._value}},{key:"__attach",value:function(){this._a.__addChild(this)}},{key:"__detach",value:function(){this._a.__removeChild(this),u(s(k.prototype),"__detach",this).call(this)}},{key:"__getNativeConfig",value:function(){return{type:'diffclamp',input:this._a.__getNativeTag(),min:this._min,max:this._max}}}]),k})();m.exports=f},244,[29,30,42,45,47,44,235,236,239]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),_=r(d[2]),o=r(d[3]),u=r(d[4]),c=r(d[5]);function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var h=r(d[6]),l=(r(d[7]),r(d[8])),f=r(d[9]),v=(function(v){o(b,f);var y,p,k=(y=b,p=s(),function(){var t,n=c(y);if(p){var _=c(this).constructor;t=Reflect.construct(n,arguments,_)}else t=n.apply(this,arguments);return u(this,t)});function b(n,_){var o;return t(this,b),(o=k.call(this))._a='number'==typeof n?new l(n):n,o._b='number'==typeof _?new l(_):_,o}return n(b,[{key:"__makeNative",value:function(){this._a.__makeNative(),this._b.__makeNative(),_(c(b.prototype),"__makeNative",this).call(this)}},{key:"__getValue",value:function(){var t=this._a.__getValue(),n=this._b.__getValue();return 0===n&&console.error('Detected division by zero in AnimatedDivision'),t/n}},{key:"interpolate",value:function(t){return new h(this,t)}},{key:"__attach",value:function(){this._a.__addChild(this),this._b.__addChild(this)}},{key:"__detach",value:function(){this._a.__removeChild(this),this._b.__removeChild(this),_(c(b.prototype),"__detach",this).call(this)}},{key:"__getNativeConfig",value:function(){return{type:'division',input:[this._a.__getNativeTag(),this._b.__getNativeTag()]}}}]),b})();m.exports=v},245,[29,30,42,45,47,44,235,236,234,239]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),u=r(d[1]),n=r(d[2]),o=r(d[3]),c=r(d[4]),s=r(d[5]);function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var l=r(d[6]),h=(r(d[7]),r(d[8])),f=(function(f){o(k,h);var v,y,p=(v=k,y=_(),function(){var t,u=s(v);if(y){var n=s(this).constructor;t=Reflect.construct(u,arguments,n)}else t=u.apply(this,arguments);return c(this,t)});function k(u,n){var o;return t(this,k),(o=p.call(this))._a=u,o._modulus=n,o}return u(k,[{key:"__makeNative",value:function(){this._a.__makeNative(),n(s(k.prototype),"__makeNative",this).call(this)}},{key:"__getValue",value:function(){return(this._a.__getValue()%this._modulus+this._modulus)%this._modulus}},{key:"interpolate",value:function(t){return new l(this,t)}},{key:"__attach",value:function(){this._a.__addChild(this)}},{key:"__detach",value:function(){this._a.__removeChild(this),n(s(k.prototype),"__detach",this).call(this)}},{key:"__getNativeConfig",value:function(){return{type:'modulus',input:this._a.__getNativeTag(),modulus:this._modulus}}}]),k})();m.exports=f},246,[29,30,42,45,47,44,235,236,239]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),_=r(d[2]),u=r(d[3]),c=r(d[4]),o=r(d[5]);function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var h=r(d[6]),l=(r(d[7]),r(d[8])),f=r(d[9]),v=(function(v){u(b,f);var p,y,k=(p=b,y=s(),function(){var t,n=o(p);if(y){var _=o(this).constructor;t=Reflect.construct(n,arguments,_)}else t=n.apply(this,arguments);return c(this,t)});function b(n,_){var u;return t(this,b),(u=k.call(this))._a='number'==typeof n?new l(n):n,u._b='number'==typeof _?new l(_):_,u}return n(b,[{key:"__makeNative",value:function(){this._a.__makeNative(),this._b.__makeNative(),_(o(b.prototype),"__makeNative",this).call(this)}},{key:"__getValue",value:function(){return this._a.__getValue()*this._b.__getValue()}},{key:"interpolate",value:function(t){return new h(this,t)}},{key:"__attach",value:function(){this._a.__addChild(this),this._b.__addChild(this)}},{key:"__detach",value:function(){this._a.__removeChild(this),this._b.__removeChild(this),_(o(b.prototype),"__detach",this).call(this)}},{key:"__getNativeConfig",value:function(){return{type:'multiplication',input:[this._a.__getNativeTag(),this._b.__getNativeTag()]}}}]),b})();m.exports=v},247,[29,30,42,45,47,44,235,236,234,239]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]),c=r(d[4]),_=r(d[5]),u=r(d[6]);function v(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,s)}return o}function f(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?v(Object(s),!0).forEach(function(o){t(n,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(s,t))})}return n}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var p=r(d[7]).AnimatedEvent,h=r(d[8]),y=r(d[9]),w=r(d[10]),N=r(d[11]),b=r(d[12]),V=(function(t){c(O,h);var v,V,k=(v=O,V=l(),function(){var t,n=u(v);if(V){var o=u(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return _(this,t)});function O(t,o){var s;return n(this,O),s=k.call(this),t.style&&(t=f(f({},t),{},{style:new y(t.style)})),s._props=t,s._callback=o,s.__attach(),s}return o(O,[{key:"__getValue",value:function(){var t={};for(var n in this._props){var o=this._props[n];o instanceof h?(!o.__isNative||o instanceof y)&&(t[n]=o.__getValue()):t[n]=o instanceof p?o.__getHandler():o}return t}},{key:"__getAnimatedValue",value:function(){var t={};for(var n in this._props){var o=this._props[n];o instanceof h&&(t[n]=o.__getAnimatedValue())}return t}},{key:"__attach",value:function(){for(var t in this._props){var n=this._props[t];n instanceof h&&n.__addChild(this)}}},{key:"__detach",value:function(){for(var t in this.__isNative&&this._animatedView&&this.__disconnectAnimatedView(),this._props){var n=this._props[t];n instanceof h&&n.__removeChild(this)}s(u(O.prototype),"__detach",this).call(this)}},{key:"update",value:function(){this._callback()}},{key:"__makeNative",value:function(){if(!this.__isNative){for(var t in this.__isNative=!0,this._props){var n=this._props[t];n instanceof h&&n.__makeNative()}this._animatedView&&this.__connectAnimatedView()}}},{key:"setNativeView",value:function(t){this._animatedView!==t&&(this._animatedView=t,this.__isNative&&this.__connectAnimatedView())}},{key:"__connectAnimatedView",value:function(){b(this.__isNative,'Expected node to be marked as "native"');var t=N.findNodeHandle(this._animatedView);b(null!=t,'Unable to locate attached view in the native tree'),w.API.connectAnimatedNodeToView(this.__getNativeTag(),t)}},{key:"__disconnectAnimatedView",value:function(){b(this.__isNative,'Expected node to be marked as "native"');var t=N.findNodeHandle(this._animatedView);b(null!=t,'Unable to locate attached view in the native tree'),w.API.disconnectAnimatedNodeFromView(this.__getNativeTag(),t)}},{key:"__restoreDefaultValues",value:function(){this.__isNative&&w.API.restoreDefaultValues(this.__getNativeTag())}},{key:"__getNativeConfig",value:function(){var t={};for(var n in this._props){var o=this._props[n];o instanceof h&&(o.__makeNative(),t[n]=o.__getNativeTag())}return{type:'props',props:t}}}]),O})();m.exports=V},248,[54,29,30,42,45,47,44,233,236,249,237,94,6]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]),l=r(d[4]),c=r(d[5]),u=r(d[6]);function f(t,n){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,o)}return s}function y(n){for(var s=1;s<arguments.length;s++){var o=null!=arguments[s]?arguments[s]:{};s%2?f(Object(o),!0).forEach(function(s){t(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var v=r(d[7]),h=r(d[8]),p=r(d[9]),k=r(d[10]),O=r(d[11]),b=(function(t){l(j,p);var f,b,A=(f=j,b=_(),function(){var t,n=u(f);if(b){var s=u(this).constructor;t=Reflect.construct(n,arguments,s)}else t=n.apply(this,arguments);return c(this,t)});function j(t){var s;return n(this,j),s=A.call(this),(t=O(t)||{}).transform&&(t=y(y({},t),{},{transform:new h(t.transform)})),s._style=t,s}return s(j,[{key:"_walkStyleAndGetValues",value:function(t){var n={};for(var s in t){var o=t[s];o instanceof v?o.__isNative||(n[s]=o.__getValue()):o&&!Array.isArray(o)&&'object'==typeof o?n[s]=this._walkStyleAndGetValues(o):n[s]=o}return n}},{key:"__getValue",value:function(){return this._walkStyleAndGetValues(this._style)}},{key:"_walkStyleAndGetAnimatedValues",value:function(t){var n={};for(var s in t){var o=t[s];o instanceof v?n[s]=o.__getAnimatedValue():o&&!Array.isArray(o)&&'object'==typeof o&&(n[s]=this._walkStyleAndGetAnimatedValues(o))}return n}},{key:"__getAnimatedValue",value:function(){return this._walkStyleAndGetAnimatedValues(this._style)}},{key:"__attach",value:function(){for(var t in this._style){var n=this._style[t];n instanceof v&&n.__addChild(this)}}},{key:"__detach",value:function(){for(var t in this._style){var n=this._style[t];n instanceof v&&n.__removeChild(this)}o(u(j.prototype),"__detach",this).call(this)}},{key:"__makeNative",value:function(){for(var t in this._style){var n=this._style[t];n instanceof v&&n.__makeNative()}o(u(j.prototype),"__makeNative",this).call(this)}},{key:"__getNativeConfig",value:function(){var t={};for(var n in this._style)if(this._style[n]instanceof v){var s=this._style[n];s.__makeNative(),t[n]=s.__getNativeTag()}return k.validateStyles(t),{type:'style',style:t}}}]),j})();m.exports=b},249,[54,29,30,42,45,47,44,236,250,239,237,90]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=r(d[2]),f=r(d[3]),c=r(d[4]),s=r(d[5]);function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var v=r(d[6]),_=r(d[7]),h=r(d[8]),l=(function(l){f(N,_);var p,y,k=(p=N,y=u(),function(){var t,n=s(p);if(y){var o=s(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return c(this,t)});function N(n){var o;return t(this,N),(o=k.call(this))._transforms=n,o}return n(N,[{key:"__makeNative",value:function(){this._transforms.forEach(function(t){for(var n in t){var o=t[n];o instanceof v&&o.__makeNative()}}),o(s(N.prototype),"__makeNative",this).call(this)}},{key:"__getValue",value:function(){return this._transforms.map(function(t){var n={};for(var o in t){var f=t[o];n[o]=f instanceof v?f.__getValue():f}return n})}},{key:"__getAnimatedValue",value:function(){return this._transforms.map(function(t){var n={};for(var o in t){var f=t[o];n[o]=f instanceof v?f.__getAnimatedValue():f}return n})}},{key:"__attach",value:function(){var t=this;this._transforms.forEach(function(n){for(var o in n){var f=n[o];f instanceof v&&f.__addChild(t)}})}},{key:"__detach",value:function(){var t=this;this._transforms.forEach(function(n){for(var o in n){var f=n[o];f instanceof v&&f.__removeChild(t)}}),o(s(N.prototype),"__detach",this).call(this)}},{key:"__getNativeConfig",value:function(){var t=[];return this._transforms.forEach(function(n){for(var o in n){var f=n[o];f instanceof v?t.push({type:'animated',property:o,nodeTag:f.__getNativeTag()}):t.push({type:'static',property:o,value:h.transformDataType(f)})}}),h.validateTransform(t),{type:'transform',transforms:t}}}]),N})();m.exports=l},250,[29,30,42,45,47,44,236,239,237]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),_=r(d[2]),u=r(d[3]),c=r(d[4]),o=r(d[5]);function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var h=r(d[6]),l=(r(d[7]),r(d[8])),f=r(d[9]),v=(function(v){u(b,f);var y,p,k=(y=b,p=s(),function(){var t,n=o(y);if(p){var _=o(this).constructor;t=Reflect.construct(n,arguments,_)}else t=n.apply(this,arguments);return c(this,t)});function b(n,_){var u;return t(this,b),(u=k.call(this))._a='number'==typeof n?new l(n):n,u._b='number'==typeof _?new l(_):_,u}return n(b,[{key:"__makeNative",value:function(){this._a.__makeNative(),this._b.__makeNative(),_(o(b.prototype),"__makeNative",this).call(this)}},{key:"__getValue",value:function(){return this._a.__getValue()-this._b.__getValue()}},{key:"interpolate",value:function(t){return new h(this,t)}},{key:"__attach",value:function(){this._a.__addChild(this),this._b.__addChild(this)}},{key:"__detach",value:function(){this._a.__removeChild(this),this._b.__removeChild(this),_(o(b.prototype),"__detach",this).call(this)}},{key:"__getNativeConfig",value:function(){return{type:'subtraction',input:[this._a.__getNativeTag(),this._b.__getNativeTag()]}}}]),b})();m.exports=v},251,[29,30,42,45,47,44,235,236,234,239]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=r(d[2]),c=r(d[3]),u=r(d[4]),_=r(d[5]),s=r(d[6]);function l(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);n&&(c=c.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,c)}return o}function f(n){for(var o=1;o<arguments.length;o++){var c=null!=arguments[o]?arguments[o]:{};o%2?l(Object(c),!0).forEach(function(o){t(n,o,c[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(c)):l(Object(c)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(c,t))})}return n}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}r(d[7]);var v=r(d[8]),p=r(d[9]),y=p.generateNewAnimationId,O=p.shouldUseNativeDriver,b=(function(t){u(k,v);var l,p,b=(l=k,p=h(),function(){var t,n=s(l);if(p){var o=s(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return _(this,t)});function k(t,o,c,u,_){var s;return n(this,k),(s=b.call(this))._value=t,s._parent=o,s._animationClass=c,s._animationConfig=u,s._useNativeDriver=O(u),s._callback=_,s.__attach(),s}return o(k,[{key:"__makeNative",value:function(){this.__isNative=!0,this._parent.__makeNative(),c(s(k.prototype),"__makeNative",this).call(this),this._value.__makeNative()}},{key:"__getValue",value:function(){return this._parent.__getValue()}},{key:"__attach",value:function(){this._parent.__addChild(this),this._useNativeDriver&&this.__makeNative()}},{key:"__detach",value:function(){this._parent.__removeChild(this),c(s(k.prototype),"__detach",this).call(this)}},{key:"update",value:function(){this._value.animate(new this._animationClass(f(f({},this._animationConfig),{},{toValue:this._animationConfig.toValue.__getValue()})),this._callback)}},{key:"__getNativeConfig",value:function(){var t=new this._animationClass(f(f({},this._animationConfig),{},{toValue:void 0})).__getNativeAnimationConfig();return{type:'tracking',animationId:y(),animationConfig:t,toValue:this._parent.__getNativeTag(),value:this._value.__getNativeTag()}}}]),k})();m.exports=b},252,[54,29,30,42,45,47,44,234,236,237]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),s=r(d[2]),u=r(d[3]),f=r(d[4]);function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var l=r(d[5]),c=r(d[6]),y=r(d[7]),h=1,x=(function(x){s(k,c);var v,_,p=(v=k,_=o(),function(){var t,n=f(v);if(_){var s=f(this).constructor;t=Reflect.construct(n,arguments,s)}else t=n.apply(this,arguments);return u(this,t)});function k(n){var s;t(this,k),s=p.call(this);var u=n||{x:0,y:0};return'number'==typeof u.x&&'number'==typeof u.y?(s.x=new l(u.x),s.y=new l(u.y)):(y(u.x instanceof l&&u.y instanceof l,"AnimatedValueXY must be initialized with an object of numbers or AnimatedValues."),s.x=u.x,s.y=u.y),s._listeners={},s}return n(k,[{key:"setValue",value:function(t){this.x.setValue(t.x),this.y.setValue(t.y)}},{key:"setOffset",value:function(t){this.x.setOffset(t.x),this.y.setOffset(t.y)}},{key:"flattenOffset",value:function(){this.x.flattenOffset(),this.y.flattenOffset()}},{key:"extractOffset",value:function(){this.x.extractOffset(),this.y.extractOffset()}},{key:"__getValue",value:function(){return{x:this.x.__getValue(),y:this.y.__getValue()}}},{key:"resetAnimation",value:function(t){this.x.resetAnimation(),this.y.resetAnimation(),t&&t(this.__getValue())}},{key:"stopAnimation",value:function(t){this.x.stopAnimation(),this.y.stopAnimation(),t&&t(this.__getValue())}},{key:"addListener",value:function(t){var n=this,s=String(h++),u=function(s){s.value;t(n.__getValue())};return this._listeners[s]={x:this.x.addListener(u),y:this.y.addListener(u)},s}},{key:"removeListener",value:function(t){this.x.removeListener(this._listeners[t].x),this.y.removeListener(this._listeners[t].y),delete this._listeners[t]}},{key:"removeAllListeners",value:function(){this.x.removeAllListeners(),this.y.removeAllListeners(),this._listeners={}}},{key:"getLayout",value:function(){return{left:this.x,top:this.y}}},{key:"getTranslateTransform",value:function(){return[{translateX:this.x},{translateY:this.y}]}}]),k})();m.exports=x},253,[29,30,45,47,44,234,239,6]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]),c=r(d[4]),u=r(d[5]);function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var h=r(d[6]),l=r(d[7]).shouldUseNativeDriver,v=(function(v){o(D,h);var f,p,y=(f=D,p=_(),function(){var t,n=u(f);if(p){var s=u(this).constructor;t=Reflect.construct(n,arguments,s)}else t=n.apply(this,arguments);return c(this,t)});function D(n){var s,o,c,u;return t(this,D),(u=y.call(this))._deceleration=null!=(s=n.deceleration)?s:.998,u._velocity=n.velocity,u._useNativeDriver=l(n),u.__isInteraction=null!=(o=n.isInteraction)?o:!u._useNativeDriver,u.__iterations=null!=(c=n.iterations)?c:1,u}return n(D,[{key:"__getNativeAnimationConfig",value:function(){return{type:'decay',deceleration:this._deceleration,velocity:this._velocity,iterations:this.__iterations}}},{key:"start",value:function(t,n,s,o,c){this.__active=!0,this._lastValue=t,this._fromValue=t,this._onUpdate=n,this.__onEnd=s,this._startTime=Date.now(),this._useNativeDriver?this.__startNativeAnimation(c):this._animationFrame=requestAnimationFrame(this.onUpdate.bind(this))}},{key:"onUpdate",value:function(){var t=Date.now(),n=this._fromValue+this._velocity/(1-this._deceleration)*(1-Math.exp(-(1-this._deceleration)*(t-this._startTime)));this._onUpdate(n),Math.abs(this._lastValue-n)<.1?this.__debouncedOnEnd({finished:!0}):(this._lastValue=n,this.__active&&(this._animationFrame=requestAnimationFrame(this.onUpdate.bind(this))))}},{key:"stop",value:function(){s(u(D.prototype),"stop",this).call(this),this.__active=!1,g.cancelAnimationFrame(this._animationFrame),this.__debouncedOnEnd({finished:!1})}}]),D})();m.exports=v},254,[29,30,42,45,47,44,255,237]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]),t=r(d[1]),o=r(d[2]),_=(function(){function _(){n(this,_)}return t(_,[{key:"start",value:function(n,t,o,_,u){}},{key:"stop",value:function(){this.__nativeId&&o.API.stopAnimation(this.__nativeId)}},{key:"__getNativeAnimationConfig",value:function(){throw new Error('This animation type cannot be offloaded to native')}},{key:"__debouncedOnEnd",value:function(n){var t=this.__onEnd;this.__onEnd=null,t&&t(n)}},{key:"__startNativeAnimation",value:function(n){o.API.enableQueue(),n.__makeNative(),o.API.disableQueue(),this.__nativeId=o.generateNewAnimationId(),o.API.startAnimatingNode(this.__nativeId,n.__getNativeTag(),this.__getNativeAnimationConfig(),this.__debouncedOnEnd.bind(this))}}]),_})();m.exports=_},255,[29,30,237]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),s=r(d[1]),n=r(d[2]),o=r(d[3]),l=r(d[4]),h=r(d[5]);function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}r(d[6]),r(d[7]),r(d[8]);var u=r(d[9]),f=r(d[10]),c=r(d[11]),v=r(d[12]).shouldUseNativeDriver,p=(function(p){o(b,u);var y,V,T=(y=b,V=_(),function(){var t,s=h(y);if(V){var n=h(this).constructor;t=Reflect.construct(s,arguments,n)}else t=s.apply(this,arguments);return l(this,t)});function b(s){var n,o,l,h,_,u,p,y,V,D,M,P;if(t(this,b),(V=T.call(this))._overshootClamping=null!=(n=s.overshootClamping)&&n,V._restDisplacementThreshold=null!=(o=s.restDisplacementThreshold)?o:.001,V._restSpeedThreshold=null!=(l=s.restSpeedThreshold)?l:.001,V._initialVelocity=null!=(h=s.velocity)?h:0,V._lastVelocity=null!=(_=s.velocity)?_:0,V._toValue=s.toValue,V._delay=null!=(u=s.delay)?u:0,V._useNativeDriver=v(s),V.__isInteraction=null!=(p=s.isInteraction)?p:!V._useNativeDriver,V.__iterations=null!=(y=s.iterations)?y:1,void 0!==s.stiffness||void 0!==s.damping||void 0!==s.mass)c(void 0===s.bounciness&&void 0===s.speed&&void 0===s.tension&&void 0===s.friction,'You can define one of bounciness/speed, tension/friction, or stiffness/damping/mass, but not more than one'),V._stiffness=null!=(D=s.stiffness)?D:100,V._damping=null!=(M=s.damping)?M:10,V._mass=null!=(P=s.mass)?P:1;else if(void 0!==s.bounciness||void 0!==s.speed){var S,U;c(void 0===s.tension&&void 0===s.friction&&void 0===s.stiffness&&void 0===s.damping&&void 0===s.mass,'You can define one of bounciness/speed, tension/friction, or stiffness/damping/mass, but not more than one');var A=f.fromBouncinessAndSpeed(null!=(S=s.bounciness)?S:8,null!=(U=s.speed)?U:12);V._stiffness=A.stiffness,V._damping=A.damping,V._mass=1}else{var C,N,k=f.fromOrigamiTensionAndFriction(null!=(C=s.tension)?C:40,null!=(N=s.friction)?N:7);V._stiffness=k.stiffness,V._damping=k.damping,V._mass=1}return c(V._stiffness>0,'Stiffness value must be greater than 0'),c(V._damping>0,'Damping value must be greater than 0'),c(V._mass>0,'Mass value must be greater than 0'),V}return s(b,[{key:"__getNativeAnimationConfig",value:function(){var t;return{type:'spring',overshootClamping:this._overshootClamping,restDisplacementThreshold:this._restDisplacementThreshold,restSpeedThreshold:this._restSpeedThreshold,stiffness:this._stiffness,damping:this._damping,mass:this._mass,initialVelocity:null!=(t=this._initialVelocity)?t:this._lastVelocity,toValue:this._toValue,iterations:this.__iterations}}},{key:"start",value:function(t,s,n,o,l){var h=this;if(this.__active=!0,this._startPosition=t,this._lastPosition=this._startPosition,this._onUpdate=s,this.__onEnd=n,this._lastTime=Date.now(),this._frameTime=0,o instanceof b){var _=o.getInternalState();this._lastPosition=_.lastPosition,this._lastVelocity=_.lastVelocity,this._initialVelocity=this._lastVelocity,this._lastTime=_.lastTime}var u=function(){h._useNativeDriver?h.__startNativeAnimation(l):h.onUpdate()};this._delay?this._timeout=setTimeout(u,this._delay):u()}},{key:"getInternalState",value:function(){return{lastPosition:this._lastPosition,lastVelocity:this._lastVelocity,lastTime:this._lastTime}}},{key:"onUpdate",value:function(){var t=Date.now();t>this._lastTime+64&&(t=this._lastTime+64);var s=(t-this._lastTime)/1e3;this._frameTime+=s;var n=this._damping,o=this._mass,l=this._stiffness,h=-this._initialVelocity,_=n/(2*Math.sqrt(l*o)),u=Math.sqrt(l/o),f=u*Math.sqrt(1-_*_),c=this._toValue-this._startPosition,v=0,p=0,y=this._frameTime;if(_<1){var V=Math.exp(-_*u*y);v=this._toValue-V*((h+_*u*c)/f*Math.sin(f*y)+c*Math.cos(f*y)),p=_*u*V*(Math.sin(f*y)*(h+_*u*c)/f+c*Math.cos(f*y))-V*(Math.cos(f*y)*(h+_*u*c)-f*c*Math.sin(f*y))}else{var T=Math.exp(-u*y);v=this._toValue-T*(c+(h+u*c)*y),p=T*(h*(y*u-1)+y*c*(u*u))}if(this._lastTime=t,this._lastPosition=v,this._lastVelocity=p,this._onUpdate(v),this.__active){var b=!1;this._overshootClamping&&0!==this._stiffness&&(b=this._startPosition<this._toValue?v>this._toValue:v<this._toValue);var D=Math.abs(p)<=this._restSpeedThreshold,M=!0;if(0!==this._stiffness&&(M=Math.abs(this._toValue-v)<=this._restDisplacementThreshold),b||D&&M)return 0!==this._stiffness&&(this._lastPosition=this._toValue,this._lastVelocity=0,this._onUpdate(this._toValue)),void this.__debouncedOnEnd({finished:!0});this._animationFrame=requestAnimationFrame(this.onUpdate.bind(this))}}},{key:"stop",value:function(){n(h(b.prototype),"stop",this).call(this),this.__active=!1,clearTimeout(this._timeout),g.cancelAnimationFrame(this._animationFrame),this.__debouncedOnEnd({finished:!1})}}]),b})();m.exports=p},256,[29,30,42,45,47,44,234,253,235,255,257,6,237]);
__d(function(g,r,i,a,m,e,d){'use strict';function n(n){return 3.62*(n-30)+194}function t(n){return 3*(n-8)+25}m.exports={fromOrigamiTensionAndFriction:function(o,u){return{stiffness:n(o),damping:t(u)}},fromBouncinessAndSpeed:function(o,u){function f(n,t,o){return(n-t)/(o-t)}function c(n,t,o){return t+n*(o-t)}function s(n,t,o){return n*o+(1-n)*t}function p(n){return 44e-6*Math.pow(n,3)-.006*Math.pow(n,2)+.36*n+2}function h(n){return 4.5e-7*Math.pow(n,3)-332e-6*Math.pow(n,2)+.1078*n+5.84}var w=f(o/1.7,0,20);w=c(w,0,.8);var M,v,A,_,x=c(f(u/1.7,0,20),.5,200),B=(M=w,v=(A=x)<=18?(_=A,7e-4*Math.pow(_,3)-.031*Math.pow(_,2)+.64*_+1.28):A>18&&A<=44?p(A):h(A),s(2*M-M*M,v,.01));return{stiffness:n(x),damping:t(B)}}}},257,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]),u=r(d[4]),_=r(d[5]);function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}r(d[6]),r(d[7]),r(d[8]);var l,c=r(d[9]),f=r(d[10]).shouldUseNativeDriver;function v(){if(!l){var t=r(d[11]);l=t.inOut(t.ease)}return l}var p=(function(l){o(D,c);var p,y,V=(p=D,y=h(),function(){var t,n=_(p);if(y){var s=_(this).constructor;t=Reflect.construct(n,arguments,s)}else t=n.apply(this,arguments);return u(this,t)});function D(n){var s,o,u,_,h,l;return t(this,D),(l=V.call(this))._toValue=n.toValue,l._easing=null!=(s=n.easing)?s:v(),l._duration=null!=(o=n.duration)?o:500,l._delay=null!=(u=n.delay)?u:0,l.__iterations=null!=(_=n.iterations)?_:1,l._useNativeDriver=f(n),l.__isInteraction=null!=(h=n.isInteraction)?h:!l._useNativeDriver,l}return n(D,[{key:"__getNativeAnimationConfig",value:function(){for(var t=[],n=Math.round(this._duration/16.666666666666668),s=0;s<n;s++)t.push(this._easing(s/n));return t.push(this._easing(1)),{type:'frames',frames:t,toValue:this._toValue,iterations:this.__iterations}}},{key:"start",value:function(t,n,s,o,u){var _=this;this.__active=!0,this._fromValue=t,this._onUpdate=n,this.__onEnd=s;var h=function(){0!==_._duration||_._useNativeDriver?(_._startTime=Date.now(),_._useNativeDriver?_.__startNativeAnimation(u):_._animationFrame=requestAnimationFrame(_.onUpdate.bind(_))):(_._onUpdate(_._toValue),_.__debouncedOnEnd({finished:!0}))};this._delay?this._timeout=setTimeout(h,this._delay):h()}},{key:"onUpdate",value:function(){var t=Date.now();if(t>=this._startTime+this._duration)return 0===this._duration?this._onUpdate(this._toValue):this._onUpdate(this._fromValue+this._easing(1)*(this._toValue-this._fromValue)),void this.__debouncedOnEnd({finished:!0});this._onUpdate(this._fromValue+this._easing((t-this._startTime)/this._duration)*(this._toValue-this._fromValue)),this.__active&&(this._animationFrame=requestAnimationFrame(this.onUpdate.bind(this)))}},{key:"stop",value:function(){s(_(D.prototype),"stop",this).call(this),this.__active=!1,clearTimeout(this._timeout),g.cancelAnimationFrame(this._animationFrame),this.__debouncedOnEnd({finished:!1})}}]),D})();m.exports=p},258,[29,30,42,45,47,44,234,253,235,255,237,259]);
__d(function(g,r,i,a,m,e,d){'use strict';var n,u=r(d[0]),t=r(d[1]),o=(function(){function o(){u(this,o)}return t(o,null,[{key:"step0",value:function(n){return n>0?1:0}},{key:"step1",value:function(n){return n>=1?1:0}},{key:"linear",value:function(n){return n}},{key:"ease",value:function(u){return n||(n=o.bezier(.42,0,1,1)),n(u)}},{key:"quad",value:function(n){return n*n}},{key:"cubic",value:function(n){return n*n*n}},{key:"poly",value:function(n){return function(u){return Math.pow(u,n)}}},{key:"sin",value:function(n){return 1-Math.cos(n*Math.PI/2)}},{key:"circle",value:function(n){return 1-Math.sqrt(1-n*n)}},{key:"exp",value:function(n){return Math.pow(2,10*(n-1))}},{key:"elastic",value:function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)*Math.PI;return function(u){return 1-Math.pow(Math.cos(u*Math.PI/2),3)*Math.cos(u*n)}}},{key:"back",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1.70158;return function(u){return u*u*((n+1)*u-n)}}},{key:"bounce",value:function(n){if(n<.36363636363636365)return 7.5625*n*n;if(n<.7272727272727273){var u=n-.5454545454545454;return 7.5625*u*u+.75}if(n<.9090909090909091){var t=n-.8181818181818182;return 7.5625*t*t+.9375}var o=n-.9545454545454546;return 7.5625*o*o+.984375}},{key:"bezier",value:function(n,u,t,o){return r(d[2])(n,u,t,o)}},{key:"in",value:function(n){return n}},{key:"out",value:function(n){return function(u){return 1-n(1-u)}}},{key:"inOut",value:function(n){return function(u){return u<.5?n(2*u)/2:1-n(2*(1-u))/2}}}]),o})();m.exports=o},259,[29,30,260]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=4,t=.001,u=1e-7,o=10,f=.1,c='function'==typeof Float32Array;function v(n,t){return 1-3*t+3*n}function s(n,t){return 3*t-6*n}function w(n){return 3*n}function l(n,t,u){return((v(t,u)*n+s(t,u))*n+w(t))*n}function y(n,t,u){return 3*v(t,u)*n*n+2*s(t,u)*n+w(t)}function b(n,t,f,c,v){var s,w,y=0,b=t,h=f;do{(s=l(w=b+(h-b)/2,c,v)-n)>0?h=w:b=w}while(Math.abs(s)>u&&++y<o);return w}function h(t,u,o,f){for(var c=u,v=0;v<n;++v){var s=y(c,o,f);if(0===s)return c;c-=(l(c,o,f)-t)/s}return c}m.exports=function(n,u,o,v){if(!(n>=0&&n<=1&&o>=0&&o<=1))throw new Error('bezier x values must be in [0, 1] range');var s=c?new Float32Array(11):new Array(11);if(n!==u||o!==v)for(var w=0;w<11;++w)s[w]=l(w*f,n,o);function A(u){for(var c=0,v=1;10!==v&&s[v]<=u;++v)c+=f;var w=c+(u-s[--v])/(s[v+1]-s[v])*f,l=y(w,n,o);return l>=t?h(u,w,n,o):0===l?w:b(u,c,c+f,n,o)}return function(t){return n===u&&o===v?t:0===t?0:1===t?1:l(A(t),u,v)}}},260,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=r(d[2]),l=r(d[3]),c=r(d[4]),s=r(d[5]);function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var u=r(d[6]).AnimatedEvent,_=r(d[7]),v=r(d[8]),f=r(d[9]),h=r(d[10]);m.exports=function(N){f('function'!=typeof N||N.prototype&&N.prototype.isReactComponent,"`createAnimatedComponent` does not support stateless functional components; use a class component instead.");var y=(function(f){l(k,f);var y,R,A=(y=k,R=p(),function(){var t,n=s(y);if(R){var o=s(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return c(this,t)});function k(){var t;n(this,k);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(t=A.call.apply(A,[this].concat(l)))._invokeAnimatedPropsCallbackOnMount=!1,t._eventDetachers=[],t._animatedPropsCallback=function(){var n,o,l,c,s,p;if(null==t._component)t._invokeAnimatedPropsCallbackOnMount=!0;else if('function'!=typeof t._component.setNativeProps||null!=(null==(n=t._component._internalInstanceHandle)?void 0:null==(o=n.stateNode)?void 0:o.canonical)||null!=t._component.getNativeScrollRef&&null!=t._component.getNativeScrollRef()&&null!=(null==(l=t._component.getNativeScrollRef()._internalInstanceHandle)?void 0:null==(c=l.stateNode)?void 0:c.canonical)||null!=t._component.getScrollResponder&&null!=t._component.getScrollResponder().getNativeScrollRef&&null!=t._component.getScrollResponder().getNativeScrollRef()&&null!=(null==(s=t._component.getScrollResponder().getNativeScrollRef()._internalInstanceHandle)?void 0:null==(p=s.stateNode)?void 0:p.canonical))t.forceUpdate();else{if(t._propsAnimated.__isNative)throw new Error("Attempting to run JS driven animation on animated node that has been moved to \"native\" earlier by starting an animation with `useNativeDriver: true`");t._component.setNativeProps(t._propsAnimated.__getAnimatedValue())}},t._setComponentRef=h({getForwardedRef:function(){return t.props.forwardedRef},setLocalRef:function(n){t._prevComponent=t._component,t._component=n,null!=n&&null==n.getNode&&(n.getNode=function(){var t;return console.warn("%s: Calling `getNode()` on the ref of an Animated component is no longer necessary. You can now directly use the ref instead. This method will be removed in a future release.",null!=(t=n.constructor.name)?t:'<<anonymous>>'),n})}}),t}return o(k,[{key:"_attachNativeEvents",value:function(){var t,n=this,o=(null==(t=this._component)?void 0:t.getScrollableNode)?this._component.getScrollableNode():this._component,l=function(t){var l=n.props[t];l instanceof u&&l.__isNative&&(l.__attach(o,t),n._eventDetachers.push(function(){return l.__detach(o,t)}))};for(var c in this.props)l(c)}},{key:"_detachNativeEvents",value:function(){this._eventDetachers.forEach(function(t){return t()}),this._eventDetachers=[]}},{key:"_attachProps",value:function(t){var n=this._propsAnimated;this._propsAnimated=new _(t,this._animatedPropsCallback),n&&(n.__restoreDefaultValues(),n.__detach())}},{key:"render",value:function(){var n=this._propsAnimated.__getValue();return v.createElement(N,t({},n,{ref:this._setComponentRef,collapsable:!this._propsAnimated.__isNative&&n.collapsable}))}},{key:"UNSAFE_componentWillMount",value:function(){this._attachProps(this.props)}},{key:"componentDidMount",value:function(){this._invokeAnimatedPropsCallbackOnMount&&(this._invokeAnimatedPropsCallbackOnMount=!1,this._animatedPropsCallback()),this._propsAnimated.setNativeView(this._component),this._attachNativeEvents()}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){this._attachProps(t)}},{key:"componentDidUpdate",value:function(t){this._component!==this._prevComponent&&this._propsAnimated.setNativeView(this._component),this._component===this._prevComponent&&t===this.props||(this._detachNativeEvents(),this._attachNativeEvents())}},{key:"componentWillUnmount",value:function(){this._propsAnimated&&this._propsAnimated.__detach(),this._detachNativeEvents()}}]),k})(v.Component);return v.forwardRef(function(n,o){return v.createElement(y,t({},n,null==o?null:{forwardedRef:o}))})}},261,[16,29,30,45,47,44,233,248,59,6,262]);
__d(function(g,r,i,a,m,e,d){'use strict';m.exports=function(t){var n=t.getForwardedRef,o=t.setLocalRef;return function(t){var c=n();o(t),'function'==typeof c?c(t):'object'==typeof c&&null!=c&&(c.current=t)}}},262,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1])(r(d[2])),f=t(r(d[3])),o=r(d[4]),c=r(d[5]),l=f.forwardRef(function(t,c){return f.createElement(o,(0,n.default)({scrollEventThrottle:1e-4},t,{ref:c}))});m.exports=c(l)},263,[12,1,16,59,264,261]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=t(r(d[1])),o=t(r(d[2])),s=t(r(d[3])),l=t(r(d[4])),u=t(r(d[5])),c=t(r(d[6])),f=t(r(d[7])),p=t(r(d[8]));function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function y(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,s)}return o}function v(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?y(Object(o),!0).forEach(function(n){(0,p.default)(t,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):y(Object(o)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))})}return t}r(d[9]);var C=r(d[10]),b=r(d[11]),w=r(d[12]),_=r(d[13]),k=r(d[14]),I=r(d[15]),R=v(v({},_.defaultProps),{},{numColumns:1,removeClippedSubviews:!1}),P=(function(t){(0,u.default)(x,t);var y,R,P=(y=x,R=h(),function(){var t,n=(0,f.default)(y);if(R){var o=(0,f.default)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,c.default)(this,t)});function x(t){var n;return(0,s.default)(this,x),(n=P.call(this,t))._virtualizedListPairs=[],n._captureRef=function(t){n._listRef=t},n._getItem=function(t,o){var s=n.props.numColumns;if(s>1){for(var l=[],u=0;u<s;u++){var c=t[o*s+u];null!=c&&l.push(c)}return l}return t[o]},n._getItemCount=function(t){if(t){var o=n.props.numColumns;return o>1?Math.ceil(t.length/o):t.length}return 0},n._keyExtractor=function(t,o){var s=n.props,l=s.keyExtractor,u=s.numColumns;return u>1?(I(Array.isArray(t),"FlatList: Encountered internal consistency error, expected each item to consist of an array with 1-%s columns; instead, received a single item.",u),t.map(function(t,n){return l(t,o*u+n)}).join(':')):l(t,o)},n._renderer=function(){var t=n.props,o=t.ListItemComponent,s=t.renderItem,l=t.numColumns,u=t.columnWrapperStyle,c=o?'ListItemComponent':'renderItem',f=function(t){return o?b.createElement(o,t):s?s(t):null};return(0,p.default)({},c,function(t){if(l>1){var n=t.item,o=t.index;return I(Array.isArray(n),'Expected array of items with numColumns > 1'),b.createElement(w,{style:k.compose(O.row,u)},n.map(function(n,s){var u=f({item:n,index:o*l+s,separators:t.separators});return null!=u?b.createElement(b.Fragment,{key:s},u):null}))}return f(t)})},n._checkProps(n.props),n.props.viewabilityConfigCallbackPairs?n._virtualizedListPairs=n.props.viewabilityConfigCallbackPairs.map(function(t){return{viewabilityConfig:t.viewabilityConfig,onViewableItemsChanged:n._createOnViewableItemsChanged(t.onViewableItemsChanged)}}):n.props.onViewableItemsChanged&&n._virtualizedListPairs.push({viewabilityConfig:n.props.viewabilityConfig,onViewableItemsChanged:n._createOnViewableItemsChanged(n.props.onViewableItemsChanged)}),n}return(0,l.default)(x,[{key:"scrollToEnd",value:function(t){this._listRef&&this._listRef.scrollToEnd(t)}},{key:"scrollToIndex",value:function(t){this._listRef&&this._listRef.scrollToIndex(t)}},{key:"scrollToItem",value:function(t){this._listRef&&this._listRef.scrollToItem(t)}},{key:"scrollToOffset",value:function(t){this._listRef&&this._listRef.scrollToOffset(t)}},{key:"recordInteraction",value:function(){this._listRef&&this._listRef.recordInteraction()}},{key:"flashScrollIndicators",value:function(){this._listRef&&this._listRef.flashScrollIndicators()}},{key:"getScrollResponder",value:function(){if(this._listRef)return this._listRef.getScrollResponder()}},{key:"getNativeScrollRef",value:function(){if(this._listRef)return this._listRef.getScrollRef()}},{key:"getScrollableNode",value:function(){if(this._listRef)return this._listRef.getScrollableNode()}},{key:"setNativeProps",value:function(t){this._listRef&&this._listRef.setNativeProps(t)}}]),(0,l.default)(x,[{key:"componentDidUpdate",value:function(t){I(t.numColumns===this.props.numColumns,"Changing numColumns on the fly is not supported. Change the key prop on FlatList when changing the number of columns to force a fresh render of the component."),I(t.onViewableItemsChanged===this.props.onViewableItemsChanged,'Changing onViewableItemsChanged on the fly is not supported'),I(!C(t.viewabilityConfig,this.props.viewabilityConfig),'Changing viewabilityConfig on the fly is not supported'),I(t.viewabilityConfigCallbackPairs===this.props.viewabilityConfigCallbackPairs,'Changing viewabilityConfigCallbackPairs on the fly is not supported'),this._checkProps(this.props)}},{key:"_checkProps",value:function(t){var n=t.getItem,o=t.getItemCount,s=t.horizontal,l=t.numColumns,u=t.columnWrapperStyle,c=t.onViewableItemsChanged,f=t.viewabilityConfigCallbackPairs;I(!n&&!o,'FlatList does not support custom data formats.'),l>1?I(!s,'numColumns does not support horizontal.'):I(!u,'columnWrapperStyle not supported for single column lists'),I(!(c&&f),"FlatList does not support setting both onViewableItemsChanged and viewabilityConfigCallbackPairs.")}},{key:"_pushMultiColumnViewable",value:function(t,n){var o=this.props,s=o.numColumns,l=o.keyExtractor;n.item.forEach(function(o,u){I(null!=n.index,'Missing index!');var c=n.index*s+u;t.push(v(v({},n),{},{item:o,key:l(o,c),index:c}))})}},{key:"_createOnViewableItemsChanged",value:function(t){var n=this;return function(o){var s=n.props.numColumns;if(t)if(s>1){var l=[],u=[];o.viewableItems.forEach(function(t){return n._pushMultiColumnViewable(u,t)}),o.changed.forEach(function(t){return n._pushMultiColumnViewable(l,t)}),t({viewableItems:u,changed:l})}else t(o)}}},{key:"render",value:function(){var t=this.props,s=(t.numColumns,t.columnWrapperStyle,(0,o.default)(t,["numColumns","columnWrapperStyle"]));return b.createElement(_,(0,n.default)({},s,{getItem:this._getItem,getItemCount:this._getItemCount,keyExtractor:this._keyExtractor,ref:this._captureRef,viewabilityConfigCallbackPairs:this._virtualizedListPairs},this._renderer()))}}]),x})(b.PureComponent);P.defaultProps=R;var O=k.create({row:{flexDirection:'row'}});m.exports=P},264,[1,16,55,29,30,45,47,44,54,57,197,59,91,265,62,6]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),s=r(d[1]),n=r(d[2]),o=r(d[3]),l=r(d[4]),c=r(d[5]),h=r(d[6]),u=r(d[7]);function p(t,s){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=f(t))||s&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function f(t,s){if(t){if("string"==typeof t)return y(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,s):void 0}}function y(t,s){(null==s||s>t.length)&&(s=t.length);for(var n=0,o=new Array(s);n<s;n++)o[n]=t[n];return o}function _(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);s&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,o)}return n}function v(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?_(Object(o),!0).forEach(function(n){s(t,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):_(Object(o)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(o,s))})}return t}function C(t){var s=L();return function(){var n,o=u(t);if(s){var l=u(this).constructor;n=Reflect.construct(o,arguments,l)}else n=o.apply(this,arguments);return h(this,n)}}function L(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var b=r(d[8]),S=r(d[9]),I=r(d[10]),R=r(d[11]),x=r(d[12]),M=r(d[13]),k=r(d[14]),w=r(d[15]),E=r(d[16]),z=r(d[17]),O=(r(d[18]),r(d[19])),T=r(d[20]),K=(r(d[21]),r(d[22]).computeWindowedRenderLimits),P=!1,F='',V=(function(h){c(f,h);var u=C(f);function f(s,l){var c;n(this,f),(c=u.call(this,s,l))._getScrollMetrics=function(){return c._scrollMetrics},c._getOutermostParentListRef=function(){return c._isNestedWithSameOrientation()?c.context.virtualizedList.getOutermostParentListRef():o(c)},c._getNestedChildState=function(t){var s=c._nestedChildLists.get(t);return s&&s.state},c._registerAsNestedChild=function(t){var s=c._cellKeysToChildListKeys.get(t.cellKey)||new Set;s.add(t.key),c._cellKeysToChildListKeys.set(t.cellKey,s);var n=c._nestedChildLists.get(t.key);n&&null!==n.ref&&console.error("A VirtualizedList contains a cell which itself contains more than one VirtualizedList of the same orientation as the parent list. You must pass a unique listKey prop to each sibling list.\n\n"+A(v(v({},t),{},{horizontal:!!t.ref.props.horizontal}))),c._nestedChildLists.set(t.key,{ref:t.ref,state:null}),c._hasInteracted&&t.ref.recordInteraction()},c._unregisterAsNestedChild=function(t){c._nestedChildLists.set(t.key,{ref:null,state:t.state})},c._onUpdateSeparators=function(t,s){t.forEach(function(t){var n=null!=t&&c._cellRefs[t];n&&n.updateSeparatorProps(s)})},c._averageCellLength=0,c._cellKeysToChildListKeys=new Map,c._cellRefs={},c._frames={},c._footerLength=0,c._hasDoneInitialScroll=!1,c._hasInteracted=!1,c._hasMore=!1,c._hasWarned={},c._headerLength=0,c._hiPriInProgress=!1,c._highestMeasuredFrameIndex=0,c._indicesToKeys=new Map,c._nestedChildLists=new Map,c._offsetFromParentVirtualizedList=0,c._prevParentOffset=0,c._scrollMetrics={contentLength:0,dOffset:0,dt:10,offset:0,timestamp:0,velocity:0,visibleLength:0},c._scrollRef=null,c._sentEndForContentLength=0,c._totalCellLength=0,c._totalCellsMeasured=0,c._viewabilityTuples=[],c._captureScrollRef=function(t){c._scrollRef=t},c._defaultRenderScrollComponent=function(s){var n=s.onRefresh;return c._isNestedWithSameOrientation()?R.createElement(E,s):n?(T('boolean'==typeof s.refreshing,'`refreshing` prop must be set as a boolean in order to use `onRefresh`, but got `'+JSON.stringify(s.refreshing)+'`'),R.createElement(k,t({},s,{refreshControl:null==s.refreshControl?R.createElement(M,{refreshing:s.refreshing,onRefresh:n,progressViewOffset:s.progressViewOffset}):s.refreshControl}))):R.createElement(k,s)},c._onCellUnmount=function(t){var s=c._frames[t];s&&(c._frames[t]=v(v({},s),{},{inLayout:!1}))},c._onLayout=function(t){c._isNestedWithSameOrientation()?c.measureLayoutRelativeToContainingList():c._scrollMetrics.visibleLength=c._selectLength(t.nativeEvent.layout),c.props.onLayout&&c.props.onLayout(t),c._scheduleCellsToRenderUpdate(),c._maybeCallOnEndReached()},c._onLayoutEmpty=function(t){c.props.onLayout&&c.props.onLayout(t)},c._onLayoutFooter=function(t){c._triggerRemeasureForChildListsInCell(c._getFooterCellKey()),c._footerLength=c._selectLength(t.nativeEvent.layout)},c._onLayoutHeader=function(t){c._headerLength=c._selectLength(t.nativeEvent.layout)},c._onContentSizeChange=function(t,s){t>0&&s>0&&null!=c.props.initialScrollIndex&&c.props.initialScrollIndex>0&&!c._hasDoneInitialScroll&&(c.scrollToIndex({animated:!1,index:c.props.initialScrollIndex}),c._hasDoneInitialScroll=!0),c.props.onContentSizeChange&&c.props.onContentSizeChange(t,s),c._scrollMetrics.contentLength=c._selectLength({height:s,width:t}),c._scheduleCellsToRenderUpdate(),c._maybeCallOnEndReached()},c._convertParentScrollMetrics=function(t){var s=t.offset-c._offsetFromParentVirtualizedList,n=t.visibleLength,o=s-c._scrollMetrics.offset;return{visibleLength:n,contentLength:c._scrollMetrics.contentLength,offset:s,dOffset:o}},c._onScroll=function(t){c._nestedChildLists.forEach(function(s){s.ref&&s.ref._onScroll(t)}),c.props.onScroll&&c.props.onScroll(t);var s=t.timeStamp,n=c._selectLength(t.nativeEvent.layoutMeasurement),o=c._selectLength(t.nativeEvent.contentSize),l=c._selectOffset(t.nativeEvent.contentOffset),h=l-c._scrollMetrics.offset;if(c._isNestedWithSameOrientation()){if(0===c._scrollMetrics.contentLength)return;var u=c._convertParentScrollMetrics({visibleLength:n,offset:l});n=u.visibleLength,o=u.contentLength,l=u.offset,h=u.dOffset}var p=c._scrollMetrics.timestamp?Math.max(1,s-c._scrollMetrics.timestamp):1,f=h/p;p>500&&c._scrollMetrics.dt>500&&o>5*n&&!c._hasWarned.perf&&(O("VirtualizedList: You have a large list that is slow to update - make sure your renderItem function renders components that follow React performance best practices like PureComponent, shouldComponentUpdate, etc.",{dt:p,prevDt:c._scrollMetrics.dt,contentLength:o}),c._hasWarned.perf=!0),c._scrollMetrics={contentLength:o,dt:p,dOffset:h,offset:l,timestamp:s,velocity:f,visibleLength:n},c._updateViewableItems(c.props.data),c.props&&(c._maybeCallOnEndReached(),0!==f&&c._fillRateHelper.activate(),c._computeBlankness(),c._scheduleCellsToRenderUpdate())},c._onScrollBeginDrag=function(t){c._nestedChildLists.forEach(function(s){s.ref&&s.ref._onScrollBeginDrag(t)}),c._viewabilityTuples.forEach(function(t){t.viewabilityHelper.recordInteraction()}),c._hasInteracted=!0,c.props.onScrollBeginDrag&&c.props.onScrollBeginDrag(t)},c._onScrollEndDrag=function(t){var s=t.nativeEvent.velocity;s&&(c._scrollMetrics.velocity=c._selectOffset(s)),c._computeBlankness(),c.props.onScrollEndDrag&&c.props.onScrollEndDrag(t)},c._onMomentumScrollEnd=function(t){c._scrollMetrics.velocity=0,c._computeBlankness(),c.props.onMomentumScrollEnd&&c.props.onMomentumScrollEnd(t)},c._updateCellsToRender=function(){var t=c.props,s=t.data,n=t.getItemCount,o=t.onEndReachedThreshold,l=c._isVirtualizationDisabled();c._updateViewableItems(s),s&&c.setState(function(t){var h,u=c._scrollMetrics,f=u.contentLength,y=u.offset,_=u.visibleLength;if(l){var v=f-_-y<o*_?c.props.maxToRenderPerBatch:0;h={first:0,last:Math.min(t.last+v,n(s)-1)}}else _>0&&f>0&&(c.props.initialScrollIndex&&!c._scrollMetrics.offset||(h=K(c.props,t,c._getFrameMetricsApprox,c._scrollMetrics)));if(h&&c._nestedChildLists.size>0)for(var C=h.first,L=h.last,b=C;b<=L;b++){var S=c._indicesToKeys.get(b),I=S&&c._cellKeysToChildListKeys.get(S);if(I){for(var R,x=!1,M=p(I);!(R=M()).done;){var k=R.value,w=c._nestedChildLists.get(k);if(w&&w.ref&&w.ref.hasMore()){x=!0;break}}if(x){h.last=b;break}}}return null!=h&&h.first===t.first&&h.last===t.last&&(h=null),h})},c._createViewToken=function(t,s){var n=c.props,o=n.data,l=n.getItem,h=n.keyExtractor,u=l(o,t);return{index:t,item:u,key:h(u,t),isViewable:s}},c._getFrameMetricsApprox=function(t){var s=c._getFrameMetrics(t);if(s&&s.index===t)return s;var n=c.props.getItemLayout;return T(!n,'Should not have to estimate frames when a measurement metrics function is provided'),{length:c._averageCellLength,offset:c._averageCellLength*t}},c._getFrameMetrics=function(t){var s=c.props,n=s.data,o=s.getItem,l=s.getItemCount,h=s.getItemLayout,u=s.keyExtractor;T(l(n)>t,'Tried to get frame for out of range index '+t);var p=o(n,t),f=p&&c._frames[u(p,t)];return f&&f.index===t||h&&(f=h(n,t)),f},T(!s.onScroll||!s.onScroll.__isNative,"Components based on VirtualizedList must be wrapped with Animated.createAnimatedComponent to support native onScroll events with useNativeDriver"),T(s.windowSize>0,'VirtualizedList: The windowSize prop must be present and set to a value greater than 0.'),c._fillRateHelper=new S(c._getFrameMetrics),c._updateCellsToRenderBatcher=new b(c._updateCellsToRender,c.props.updateCellsBatchingPeriod),c.props.viewabilityConfigCallbackPairs?c._viewabilityTuples=c.props.viewabilityConfigCallbackPairs.map(function(t){return{viewabilityHelper:new z(t.viewabilityConfig),onViewableItemsChanged:t.onViewableItemsChanged}}):c.props.onViewableItemsChanged&&c._viewabilityTuples.push({viewabilityHelper:new z(c.props.viewabilityConfig),onViewableItemsChanged:c.props.onViewableItemsChanged});var h={first:c.props.initialScrollIndex||0,last:Math.min(c.props.getItemCount(c.props.data),(c.props.initialScrollIndex||0)+c.props.initialNumToRender)-1};if(c._isNestedWithSameOrientation()){var y=c.context.virtualizedList.getNestedChildState(c._getListKey());y&&(h=y,c.state=y,c._frames=y.frames)}return c.state=h,c}return l(f,[{key:"scrollToEnd",value:function(t){var s=!t||t.animated,n=this.props.getItemCount(this.props.data)-1,o=this._getFrameMetricsApprox(n),l=Math.max(0,o.offset+o.length+this._footerLength-this._scrollMetrics.visibleLength);null!=this._scrollRef&&this._scrollRef.scrollTo(this.props.horizontal?{x:l,animated:s}:{y:l,animated:s})}},{key:"scrollToIndex",value:function(t){var s=this.props,n=s.data,o=s.horizontal,l=s.getItemCount,c=s.getItemLayout,h=s.onScrollToIndexFailed,u=t.animated,p=t.index,f=t.viewOffset,y=t.viewPosition;if(T(p>=0&&p<l(n),"scrollToIndex out of range: requested index "+p+" but maximum is "+(l(n)-1)),!c&&p>this._highestMeasuredFrameIndex)return T(!!h,"scrollToIndex should be used in conjunction with getItemLayout or onScrollToIndexFailed, otherwise there is no way to know the location of offscreen indices or handle failures."),void h({averageItemLength:this._averageCellLength,highestMeasuredFrameIndex:this._highestMeasuredFrameIndex,index:p});var _=this._getFrameMetricsApprox(p),v=Math.max(0,_.offset-(y||0)*(this._scrollMetrics.visibleLength-_.length))-(f||0);null!=this._scrollRef&&this._scrollRef.scrollTo(o?{x:v,animated:u}:{y:v,animated:u})}},{key:"scrollToItem",value:function(t){for(var s=t.item,n=this.props,o=n.data,l=n.getItem,c=(0,n.getItemCount)(o),h=0;h<c;h++)if(l(o,h)===s){this.scrollToIndex(v(v({},t),{},{index:h}));break}}},{key:"scrollToOffset",value:function(t){var s=t.animated,n=t.offset;null!=this._scrollRef&&this._scrollRef.scrollTo(this.props.horizontal?{x:n,animated:s}:{y:n,animated:s})}},{key:"recordInteraction",value:function(){this._nestedChildLists.forEach(function(t){t.ref&&t.ref.recordInteraction()}),this._viewabilityTuples.forEach(function(t){t.viewabilityHelper.recordInteraction()}),this._updateViewableItems(this.props.data)}},{key:"flashScrollIndicators",value:function(){null!=this._scrollRef&&this._scrollRef.flashScrollIndicators()}},{key:"getScrollResponder",value:function(){if(this._scrollRef&&this._scrollRef.getScrollResponder)return this._scrollRef.getScrollResponder()}},{key:"getScrollableNode",value:function(){return this._scrollRef&&this._scrollRef.getScrollableNode?this._scrollRef.getScrollableNode():x.findNodeHandle(this._scrollRef)}},{key:"getScrollRef",value:function(){return this._scrollRef&&this._scrollRef.getScrollRef?this._scrollRef.getScrollRef():this._scrollRef}},{key:"setNativeProps",value:function(t){this._scrollRef&&this._scrollRef.setNativeProps(t)}},{key:"getChildContext",value:function(){return{virtualizedList:{getScrollMetrics:this._getScrollMetrics,horizontal:this.props.horizontal,getOutermostParentListRef:this._getOutermostParentListRef,getNestedChildState:this._getNestedChildState,registerAsNestedChild:this._registerAsNestedChild,unregisterAsNestedChild:this._unregisterAsNestedChild,debugInfo:this._getDebugInfo()}}}},{key:"_getCellKey",value:function(){return this.context.virtualizedCell&&this.context.virtualizedCell.cellKey||'rootList'}},{key:"_getListKey",value:function(){return this.props.listKey||this._getCellKey()}},{key:"_getDebugInfo",value:function(){return{listKey:this._getListKey(),cellKey:this._getCellKey(),horizontal:!!this.props.horizontal,parent:this.context.virtualizedList?this.context.virtualizedList.debugInfo:null}}},{key:"hasMore",value:function(){return this._hasMore}}]),l(f,[{key:"componentDidMount",value:function(){this._isNestedWithSameOrientation()&&this.context.virtualizedList.registerAsNestedChild({cellKey:this._getCellKey(),key:this._getListKey(),ref:this,parentDebugInfo:this.context.virtualizedList.debugInfo})}},{key:"componentWillUnmount",value:function(){this._isNestedWithSameOrientation()&&this.context.virtualizedList.unregisterAsNestedChild({key:this._getListKey(),state:{first:this.state.first,last:this.state.last,frames:this._frames}}),this._updateViewableItems(null),this._updateCellsToRenderBatcher.dispose({abort:!0}),this._viewabilityTuples.forEach(function(t){t.viewabilityHelper.dispose()}),this._fillRateHelper.deactivateAndFlush()}},{key:"_pushCells",value:function(t,s,n,o,l,c){var h,u=this,p=this.props,f=p.CellRendererComponent,y=p.ItemSeparatorComponent,_=p.data,v=p.getItem,C=p.getItemCount,L=p.horizontal,b=p.keyExtractor,S=this.props.ListHeaderComponent?1:0,I=C(_)-1;l=Math.min(I,l);for(var x=function(o){var l=v(_,o),p=b(l,o);u._indicesToKeys.set(o,p),n.has(o+S)&&s.push(t.length),t.push(R.createElement(D,{CellRendererComponent:f,ItemSeparatorComponent:o<I?y:void 0,cellKey:p,fillRateHelper:u._fillRateHelper,horizontal:L,index:o,inversionStyle:c,item:l,key:p,prevCellKey:h,onUpdateSeparators:u._onUpdateSeparators,onLayout:function(t){return u._onCellLayout(t,p,o)},onUnmount:u._onCellUnmount,parentProps:u.props,ref:function(t){u._cellRefs[p]=t}})),h=p},M=o;M<=l;M++)x(M)}},{key:"_isVirtualizationDisabled",value:function(){return this.props.disableVirtualization||!1}},{key:"_isNestedWithSameOrientation",value:function(){var t=this.context.virtualizedList;return!(!t||!!t.horizontal!=!!this.props.horizontal)}},{key:"render",value:function(){var t=this,n=this.props,o=n.ListEmptyComponent,l=n.ListFooterComponent,c=n.ListHeaderComponent,h=this.props,u=h.data,p=h.horizontal,f=this._isVirtualizationDisabled(),y=this.props.inverted?this.props.horizontal?B.horizontallyInverted:B.verticallyInverted:null,_=[],C=new Set(this.props.stickyHeaderIndices),L=[];if(c){C.has(0)&&L.push(0);var b=R.isValidElement(c)?c:R.createElement(c,null);_.push(R.createElement(N,{cellKey:this._getCellKey()+'-header',key:"$header"},R.createElement(E,{onLayout:this._onLayoutHeader,style:w.compose(y,this.props.ListHeaderComponentStyle)},b)))}var S=this.props.getItemCount(u);if(S>0){P=!1,F='';var I=p?'width':'height',x=this.props.initialScrollIndex?-1:this.props.initialNumToRender-1,M=this.state,k=M.first,z=M.last;this._pushCells(_,L,C,0,x,y);var O=Math.max(x+1,k);if(!f&&k>x+1){var T=!1;if(C.size>0)for(var K=c?1:0,V=O-1;V>x;V--)if(C.has(V+K)){var D=this._getFrameMetricsApprox(x),A=this._getFrameMetricsApprox(V),H=A.offset-D.offset-(this.props.initialScrollIndex?0:D.length);_.push(R.createElement(E,{key:"$sticky_lead",style:s({},I,H)})),this._pushCells(_,L,C,V,V,y);var U=this._getFrameMetricsApprox(k).offset-(A.offset+A.length);_.push(R.createElement(E,{key:"$sticky_trail",style:s({},I,U)})),T=!0;break}if(!T){var W=this._getFrameMetricsApprox(x),j=this._getFrameMetricsApprox(k).offset-(W.offset+W.length);_.push(R.createElement(E,{key:"$lead_spacer",style:s({},I,j)}))}}if(this._pushCells(_,L,C,O,z,y),!this._hasWarned.keys&&P&&(console.warn("VirtualizedList: missing keys for items, make sure to specify a key or id property on each item or provide a custom keyExtractor.",F),this._hasWarned.keys=!0),!f&&z<S-1){var $=this._getFrameMetricsApprox(z),q=this.props.getItemLayout?S-1:Math.min(S-1,this._highestMeasuredFrameIndex),Y=this._getFrameMetricsApprox(q),J=Y.offset+Y.length-($.offset+$.length);_.push(R.createElement(E,{key:"$tail_spacer",style:s({},I,J)}))}}else if(o){var X=R.isValidElement(o)?o:R.createElement(o,null);_.push(R.cloneElement(X,{key:'$empty',onLayout:function(s){t._onLayoutEmpty(s),X.props.onLayout&&X.props.onLayout(s)},style:w.compose(y,X.props.style)}))}if(l){var G=R.isValidElement(l)?l:R.createElement(l,null);_.push(R.createElement(N,{cellKey:this._getFooterCellKey(),key:"$footer"},R.createElement(E,{onLayout:this._onLayoutFooter,style:w.compose(y,this.props.ListFooterComponentStyle)},G)))}var Q=v(v({},this.props),{},{onContentSizeChange:this._onContentSizeChange,onLayout:this._onLayout,onScroll:this._onScroll,onScrollBeginDrag:this._onScrollBeginDrag,onScrollEndDrag:this._onScrollEndDrag,onMomentumScrollEnd:this._onMomentumScrollEnd,scrollEventThrottle:this.props.scrollEventThrottle,invertStickyHeaders:void 0!==this.props.invertStickyHeaders?this.props.invertStickyHeaders:this.props.inverted,stickyHeaderIndices:L,style:y?[y,this.props.style]:this.props.style});this._hasMore=this.state.last<this.props.getItemCount(this.props.data)-1;var Z=R.cloneElement((this.props.renderScrollComponent||this._defaultRenderScrollComponent)(Q),{ref:this._captureScrollRef},_);return this.props.debug?R.createElement(E,{style:B.debug},Z,this._renderDebugOverlay()):Z}},{key:"componentDidUpdate",value:function(t){var s=this.props,n=s.data,o=s.extraData;n===t.data&&o===t.extraData||this._viewabilityTuples.forEach(function(t){t.viewabilityHelper.resetViewableIndices()});var l=this._hiPriInProgress;this._scheduleCellsToRenderUpdate(),l&&(this._hiPriInProgress=!1)}},{key:"_computeBlankness",value:function(){this._fillRateHelper.computeBlankness(this.props,this.state,this._scrollMetrics)}},{key:"_onCellLayout",value:function(t,s,n){var o=t.nativeEvent.layout,l={offset:this._selectOffset(o),length:this._selectLength(o),index:n,inLayout:!0},c=this._frames[s];c&&l.offset===c.offset&&l.length===c.length&&n===c.index?this._frames[s].inLayout=!0:(this._totalCellLength+=l.length-(c?c.length:0),this._totalCellsMeasured+=c?0:1,this._averageCellLength=this._totalCellLength/this._totalCellsMeasured,this._frames[s]=l,this._highestMeasuredFrameIndex=Math.max(this._highestMeasuredFrameIndex,n),this._scheduleCellsToRenderUpdate()),this._triggerRemeasureForChildListsInCell(s),this._computeBlankness(),this._updateViewableItems(this.props.data)}},{key:"_triggerRemeasureForChildListsInCell",value:function(t){var s=this._cellKeysToChildListKeys.get(t);if(s)for(var n,o=p(s);!(n=o()).done;){var l=n.value,c=this._nestedChildLists.get(l);c&&c.ref&&c.ref.measureLayoutRelativeToContainingList()}}},{key:"measureLayoutRelativeToContainingList",value:function(){var t=this;try{if(!this._scrollRef)return;this._scrollRef.measureLayout(this.context.virtualizedList.getOutermostParentListRef().getScrollRef(),function(s,n,o,l){t._offsetFromParentVirtualizedList=t._selectOffset({x:s,y:n}),t._scrollMetrics.contentLength=t._selectLength({width:o,height:l});var c=t._convertParentScrollMetrics(t.context.virtualizedList.getScrollMetrics());t._scrollMetrics.visibleLength=c.visibleLength,t._scrollMetrics.offset=c.offset},function(t){console.warn("VirtualizedList: Encountered an error while measuring a list's offset from its containing VirtualizedList.")})}catch(t){console.warn('measureLayoutRelativeToContainingList threw an error',t.stack)}}},{key:"_getFooterCellKey",value:function(){return this._getCellKey()+'-footer'}},{key:"_renderDebugOverlay",value:function(){for(var t=this._scrollMetrics.visibleLength/(this._scrollMetrics.contentLength||1),s=[],n=this.props.getItemCount(this.props.data),o=0;o<n;o++){var l=this._getFrameMetricsApprox(o);l.inLayout&&s.push(l)}var c=this._getFrameMetricsApprox(this.state.first).offset,h=this._getFrameMetricsApprox(this.state.last),u=h.offset+h.length-c,p=this._scrollMetrics.offset,f=this._scrollMetrics.visibleLength;return R.createElement(E,{style:[B.debugOverlayBase,B.debugOverlay]},s.map(function(s,n){return R.createElement(E,{key:'f'+n,style:[B.debugOverlayBase,B.debugOverlayFrame,{top:s.offset*t,height:s.length*t}]})}),R.createElement(E,{style:[B.debugOverlayBase,B.debugOverlayFrameLast,{top:c*t,height:u*t}]}),R.createElement(E,{style:[B.debugOverlayBase,B.debugOverlayFrameVis,{top:p*t,height:f*t}]}))}},{key:"_selectLength",value:function(t){return this.props.horizontal?t.width:t.height}},{key:"_selectOffset",value:function(t){return this.props.horizontal?t.x:t.y}},{key:"_maybeCallOnEndReached",value:function(){var t=this.props,s=t.data,n=t.getItemCount,o=t.onEndReached,l=t.onEndReachedThreshold,c=this._scrollMetrics,h=c.contentLength,u=c.visibleLength,p=h-u-c.offset,f=l?l*u:0;o&&this.state.last===n(s)-1&&p<f&&this._scrollMetrics.contentLength!==this._sentEndForContentLength?(this._sentEndForContentLength=this._scrollMetrics.contentLength,o({distanceFromEnd:p})):p>f&&(this._sentEndForContentLength=0)}},{key:"_scheduleCellsToRenderUpdate",value:function(){var t=this.state,s=t.first,n=t.last,o=this._scrollMetrics,l=o.offset,c=o.visibleLength,h=o.velocity,u=this.props.getItemCount(this.props.data),p=!1,f=this.props.onEndReachedThreshold*c/2;if(s>0){var y=l-this._getFrameMetricsApprox(s).offset;p=p||y<0||h<-2&&y<f}if(n<u-1){var _=this._getFrameMetricsApprox(n).offset-(l+c);p=p||_<0||h>2&&_<f}if(p&&(this._averageCellLength||this.props.getItemLayout)&&!this._hiPriInProgress)return this._hiPriInProgress=!0,this._updateCellsToRenderBatcher.dispose({abort:!0}),void this._updateCellsToRender();this._updateCellsToRenderBatcher.schedule()}},{key:"_updateViewableItems",value:function(t){var s=this,n=this.props.getItemCount;this._viewabilityTuples.forEach(function(o){o.viewabilityHelper.onUpdate(n(t),s._scrollMetrics.offset,s._scrollMetrics.visibleLength,s._getFrameMetrics,s._createViewToken,o.onViewableItemsChanged,s.state)})}}],[{key:"getDerivedStateFromProps",value:function(t,s){var n=t.data,o=t.getItemCount,l=t.maxToRenderPerBatch;return{first:Math.max(0,Math.min(s.first,o(n)-1-l)),last:Math.max(0,Math.min(s.last,o(n)-1))}}}]),f})(R.PureComponent);V.defaultProps={disableVirtualization:!1,horizontal:!1,initialNumToRender:10,keyExtractor:function(t,s){return null!=t.key?t.key:null!=t.id?t.id:(P=!0,t.type&&t.type.displayName&&(F=t.type.displayName),String(s))},maxToRenderPerBatch:10,onEndReachedThreshold:2,scrollEventThrottle:50,updateCellsBatchingPeriod:50,windowSize:21},V.contextTypes={virtualizedCell:I.shape({cellKey:I.string}),virtualizedList:I.shape({getScrollMetrics:I.func,horizontal:I.bool,getOutermostParentListRef:I.func,getNestedChildState:I.func,registerAsNestedChild:I.func,unregisterAsNestedChild:I.func,debugInfo:I.shape({listKey:I.string,cellKey:I.string})})},V.childContextTypes={virtualizedList:I.shape({getScrollMetrics:I.func,horizontal:I.bool,getOutermostParentListRef:I.func,getNestedChildState:I.func,registerAsNestedChild:I.func,unregisterAsNestedChild:I.func})};var D=(function(s){c(h,s);var o=C(h);function h(){var t;n(this,h);for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];return(t=o.call.apply(o,[this].concat(l))).state={separatorProps:{highlighted:!1,leadingItem:t.props.item}},t._separators={highlight:function(){var s=t.props,n=s.cellKey,o=s.prevCellKey;t.props.onUpdateSeparators([n,o],{highlighted:!0})},unhighlight:function(){var s=t.props,n=s.cellKey,o=s.prevCellKey;t.props.onUpdateSeparators([n,o],{highlighted:!1})},updateProps:function(s,n){var o=t.props,l=o.cellKey,c=o.prevCellKey;t.props.onUpdateSeparators(['leading'===s?c:l],n)}},t}return l(h,[{key:"getChildContext",value:function(){return{virtualizedCell:{cellKey:this.props.cellKey}}}},{key:"updateSeparatorProps",value:function(t){this.setState(function(s){return{separatorProps:v(v({},s.separatorProps),t)}})}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.props.cellKey)}},{key:"_renderElement",value:function(t,s,n,o){return t&&s&&console.warn("VirtualizedList: Both ListItemComponent and renderItem props are present. ListItemComponent will take precedence over renderItem."),s?R.createElement(s,{item:n,index:o,separators:this._separators}):t?t({item:n,index:o,separators:this._separators}):void T(!1,'VirtualizedList: Either ListItemComponent or renderItem props are required but none were found.')}},{key:"render",value:function(){var s=this.props,n=s.CellRendererComponent,o=s.ItemSeparatorComponent,l=s.fillRateHelper,c=s.horizontal,h=s.item,u=s.index,p=s.inversionStyle,f=s.parentProps,y=f.renderItem,_=f.getItemLayout,v=f.ListItemComponent,C=this._renderElement(y,v,h,u),L=!_||f.debug||l.enabled()?this.props.onLayout:void 0,b=o&&R.createElement(o,this.state.separatorProps),S=p?c?[B.rowReverse,p]:[B.columnReverse,p]:c?[B.row,p]:p;return n?R.createElement(n,t({},this.props,{style:S,onLayout:L}),C,b):R.createElement(E,{style:S,onLayout:L},C,b)}}],[{key:"getDerivedStateFromProps",value:function(t,s){return{separatorProps:v(v({},s.separatorProps),{},{leadingItem:t.item})}}}]),h})(R.Component);D.childContextTypes={virtualizedCell:I.shape({cellKey:I.string})};var N=(function(t){c(o,t);var s=C(o);function o(){return n(this,o),s.apply(this,arguments)}return l(o,[{key:"getChildContext",value:function(){return{virtualizedCell:{cellKey:this.props.cellKey}}}},{key:"render",value:function(){return this.props.children}}]),o})(R.Component);function A(t){for(var s="VirtualizedList trace:\n  Child ("+(t.horizontal?'horizontal':'vertical')+"):\n    listKey: "+t.key+"\n    cellKey: "+t.cellKey,n=t.parentDebugInfo;n;)s+="\n  Parent ("+(n.horizontal?'horizontal':'vertical')+"):\n    listKey: "+n.listKey+"\n    cellKey: "+n.cellKey,n=n.parent;return s}N.childContextTypes={virtualizedCell:I.shape({cellKey:I.string})};var B=w.create({verticallyInverted:{transform:[{scaleY:-1}]},horizontallyInverted:{transform:[{scaleX:-1}]},row:{flexDirection:'row'},rowReverse:{flexDirection:'row-reverse'},columnReverse:{flexDirection:'column-reverse'},debug:{flex:1},debugOverlayBase:{position:'absolute',top:0,right:0},debugOverlay:{bottom:0,width:20,borderColor:'blue',borderWidth:1},debugOverlayFrame:{left:0,backgroundColor:'orange'},debugOverlayFrameLast:{left:0,borderColor:'green',borderWidth:2},debugOverlayFrameVis:{left:0,borderColor:'red',borderWidth:2}});m.exports=V},265,[16,54,29,48,30,45,47,44,266,267,73,59,94,268,271,62,91,288,90,142,6,8,289]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),l=r(d[2]),s=(function(){function s(n,l){t(this,s),this._delay=l,this._callback=n}return n(s,[{key:"dispose",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{abort:!1};this._taskHandle&&(this._taskHandle.cancel(),t.abort||this._callback(),this._taskHandle=null)}},{key:"schedule",value:function(){var t=this;if(!this._taskHandle){var n=setTimeout(function(){t._taskHandle=l.runAfterInteractions(function(){t._taskHandle=null,t._callback()})},this._delay);this._taskHandle={cancel:function(){return clearTimeout(n)}}}}}]),s})();m.exports=s},266,[29,30,240]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),s=r(d[2]);function l(t,n){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);n&&(l=l.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,l)}return s}function o(n){for(var s=1;s<arguments.length;s++){var o=null!=arguments[s]?arguments[s]:{};s%2?l(Object(o),!0).forEach(function(s){t(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}var _=r(d[3]),h=r(d[4]),u=function t(){s(this,t),this.any_blank_count=0,this.any_blank_ms=0,this.any_blank_speed_sum=0,this.mostly_blank_count=0,this.mostly_blank_ms=0,this.pixels_blank=0,this.pixels_sampled=0,this.pixels_scrolled=0,this.total_time_spent=0,this.sample_count=0},f=[],c=10,y=null,p=(function(){function t(n){s(this,t),this._anyBlankStartTime=null,this._enabled=!1,this._info=new u,this._mostlyBlankStartTime=null,this._samplesStartTime=null,this._getFrameMetrics=n,this._enabled=(y||0)>Math.random(),this._resetData()}return n(t,null,[{key:"addListener",value:function(t){return h(null!==y,'Call `FillRateHelper.setSampleRate` before `addListener`.'),f.push(t),{remove:function(){f=f.filter(function(n){return t!==n})}}}},{key:"setSampleRate",value:function(t){y=t}},{key:"setMinSampleCount",value:function(t){c=t}}]),n(t,[{key:"activate",value:function(){this._enabled&&null==this._samplesStartTime&&(this._samplesStartTime=_())}},{key:"deactivateAndFlush",value:function(){if(this._enabled){var t=this._samplesStartTime;if(null!=t)if(this._info.sample_count<c)this._resetData();else{var n=_()-t,s=o(o({},this._info),{},{total_time_spent:n});f.forEach(function(t){return t(s)}),this._resetData()}}}},{key:"computeBlankness",value:function(t,n,s){if(!this._enabled||0===t.getItemCount(t.data)||null==this._samplesStartTime)return 0;var l=s.dOffset,o=s.offset,h=s.velocity,u=s.visibleLength;this._info.sample_count++,this._info.pixels_sampled+=Math.round(u),this._info.pixels_scrolled+=Math.round(Math.abs(l));var f=Math.round(1e3*Math.abs(h)),c=_();null!=this._anyBlankStartTime&&(this._info.any_blank_ms+=c-this._anyBlankStartTime),this._anyBlankStartTime=null,null!=this._mostlyBlankStartTime&&(this._info.mostly_blank_ms+=c-this._mostlyBlankStartTime),this._mostlyBlankStartTime=null;for(var y=0,p=n.first,b=this._getFrameMetrics(p);p<=n.last&&(!b||!b.inLayout);)b=this._getFrameMetrics(p),p++;b&&p>0&&(y=Math.min(u,Math.max(0,b.offset-o)));for(var k=0,v=n.last,S=this._getFrameMetrics(v);v>=n.first&&(!S||!S.inLayout);)S=this._getFrameMetrics(v),v--;if(S&&v<t.getItemCount(t.data)-1){var M=S.offset+S.length;k=Math.min(u,Math.max(0,o+u-M))}var O=Math.round(y+k),T=O/u;return T>0?(this._anyBlankStartTime=c,this._info.any_blank_speed_sum+=f,this._info.any_blank_count++,this._info.pixels_blank+=O,T>.5&&(this._mostlyBlankStartTime=c,this._info.mostly_blank_count++)):(f<.01||Math.abs(l)<1)&&this.deactivateAndFlush(),T}},{key:"enabled",value:function(){return this._enabled}},{key:"_resetData",value:function(){this._anyBlankStartTime=null,this._info=new u,this._mostlyBlankStartTime=null,this._samplesStartTime=null}}]),t})();m.exports=p},267,[54,30,29,130,8]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),s=r(d[1]),n=s(r(d[2])),f=s(r(d[3])),o=s(r(d[4])),u=s(r(d[5])),c=s(r(d[6])),h=s(r(d[7])),l=s(r(d[8])),p=(t(r(d[9])),t(r(d[10])));function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}r(d[11]);var R,_=r(d[12]);R={SIZE:{}};var y=(function(t){(0,c.default)(N,t);var s,R,y=(s=N,R=v(),function(){var t,n=(0,l.default)(s);if(R){var f=(0,l.default)(this).constructor;t=Reflect.construct(n,arguments,f)}else t=n.apply(this,arguments);return(0,h.default)(this,t)});function N(){var t;(0,o.default)(this,N);for(var s=arguments.length,n=new Array(s),f=0;f<s;f++)n[f]=arguments[f];return(t=y.call.apply(y,[this].concat(n)))._lastNativeRefreshing=!1,t._onRefresh=function(){t._lastNativeRefreshing=!0,t.props.onRefresh&&t.props.onRefresh(),t.forceUpdate()},t._setNativeRef=function(s){t._nativeRef=s},t}return(0,u.default)(N,[{key:"componentDidMount",value:function(){this._lastNativeRefreshing=this.props.refreshing}},{key:"componentDidUpdate",value:function(t){this.props.refreshing!==t.refreshing?this._lastNativeRefreshing=this.props.refreshing:this.props.refreshing!==this._lastNativeRefreshing&&this._nativeRef&&(p.Commands.setNativeRefreshing(this._nativeRef,this.props.refreshing),this._lastNativeRefreshing=this.props.refreshing)}},{key:"render",value:function(){var t=this.props,s=(t.enabled,t.colors,t.progressBackgroundColor,t.size,t.progressViewOffset,(0,f.default)(t,["enabled","colors","progressBackgroundColor","size","progressViewOffset"]));return _.createElement(p.default,(0,n.default)({},s,{ref:this._setNativeRef,onRefresh:this._onRefresh}))}}]),N})(_.Component);y.SIZE=R.SIZE,m.exports=y},268,[12,1,16,55,29,30,45,47,44,269,270,57,59]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),o=r(d[1]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Commands=void 0;o(r(d[2]));var s=t(r(d[3])),u=t(r(d[4])),f=(0,s.default)({supportedCommands:['setNativeRefreshing']});e.Commands=f;var n=(0,u.default)('AndroidSwipeRefreshLayout');e.default=n},269,[1,12,59,93,205]);
__d(function(g,r,i,a,m,e,d){'use strict';var o=r(d[0]),t=r(d[1]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Commands=void 0;t(r(d[2]));var l=o(r(d[3])),n=(0,o(r(d[4])).default)({supportedCommands:['setNativeRefreshing']});e.Commands=n;var s=(0,l.default)('PullToRefreshView',{paperComponentName:'RCTRefreshControl',excludedPlatform:'android'});e.default=s},270,[1,12,59,205,93]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=t(r(d[1])),o=t(r(d[2])),l=t(r(d[3])),s=t(r(d[4])),c=t(r(d[5])),p=t(r(d[6])),u=t(r(d[7])),h=t(r(d[8])),f=t(r(d[9])),R=t(r(d[10]));t(r(d[11])),t(r(d[12]));function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function v(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);n&&(l=l.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,l)}return o}function S(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?v(Object(o),!0).forEach(function(n){(0,h.default)(t,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):v(Object(o)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))})}return t}var _=r(d[13]),w=r(d[14]),H=r(d[15]),V=r(d[16]);r(d[16]);var E,b,T=r(d[17]),k=r(d[18]),C=r(d[19]),x=(r(d[20]),r(d[21]),r(d[22]),r(d[23])),A=r(d[24]),I=r(d[25]),O=(r(d[26]),r(d[27]));function N(t){var n=S({},T.Mixin);for(var o in n)'function'==typeof n[o]&&(n[o]=n[o].bind(t));return n}E=f.default,b=R.default;var M=H.createContext(null),z=Object.freeze({horizontal:!0}),D=Object.freeze({horizontal:!1}),L=(function(t){(0,c.default)(v,t);var h,f,R=(h=v,f=y(),function(){var t,n=(0,u.default)(h);if(f){var o=(0,u.default)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,p.default)(this,t)});function v(t){var n;for(var l in(0,o.default)(this,v),(n=R.call(this,t))._scrollResponder=N((0,s.default)(n)),n._scrollAnimatedValue=new _.Value(0),n._scrollAnimatedValueAttachment=null,n._stickyHeaderRefs=new Map,n._headerLayoutYs=new Map,n.state=S({layoutHeight:null},T.Mixin.scrollResponderMixinGetInitialState()),n._setNativeRef=O({getForwardedRef:function(){return n.props.scrollViewRef},setLocalRef:function(t){n._scrollViewRef=t,t&&(t.getScrollResponder=n.getScrollResponder,t.getScrollableNode=n.getScrollableNode,t.getInnerViewNode=n.getInnerViewNode,t.getInnerViewRef=n.getInnerViewRef,t.getNativeScrollRef=n.getNativeScrollRef,t.scrollTo=n.scrollTo,t.scrollToEnd=n.scrollToEnd,t.flashScrollIndicators=n.flashScrollIndicators,t.scrollResponderZoomTo=n.scrollResponderZoomTo,t.scrollResponderScrollNativeHandleToKeyboard=n.scrollResponderScrollNativeHandleToKeyboard)}}),n.getScrollResponder=function(){return(0,s.default)(n)},n.getScrollableNode=function(){return V.findNodeHandle(n._scrollViewRef)},n.getNativeScrollRef=function(){return n._scrollViewRef},n.scrollTo=function(t,o,l){var s,c,p;'number'==typeof t?(console.warn("`scrollTo(y, x, animated)` is deprecated. Use `scrollTo({x: 5, y: 5, animated: true})` instead."),c=t,s=o,p=l):t&&(c=t.y,s=t.x,p=t.animated),n._scrollResponder.scrollResponderScrollTo({x:s||0,y:c||0,animated:!1!==p})},n.scrollToEnd=function(t){var o=!1!==(t&&t.animated);n._scrollResponder.scrollResponderScrollToEnd({animated:o})},n.flashScrollIndicators=function(){n._scrollResponder.scrollResponderFlashScrollIndicators()},n._handleScroll=function(t){n._scrollResponder.scrollResponderHandleScroll(t)},n._handleLayout=function(t){!0===n.props.invertStickyHeaders&&n.setState({layoutHeight:t.nativeEvent.layout.height}),n.props.onLayout&&n.props.onLayout(t)},n._handleContentOnLayout=function(t){var o=t.nativeEvent.layout,l=o.width,s=o.height;n.props.onContentSizeChange&&n.props.onContentSizeChange(l,s)},n._scrollViewRef=null,n._innerViewRef=null,n._setInnerViewRef=O({getForwardedRef:function(){return n.props.innerViewRef},setLocalRef:function(t){n._innerViewRef=t}}),T.Mixin)'function'==typeof T.Mixin[l]&&l.startsWith('scrollResponder')&&((0,s.default)(n)[l]=T.Mixin[l].bind((0,s.default)(n)));return Object.keys(T.Mixin).filter(function(t){return'function'!=typeof T.Mixin[t]}).forEach(function(t){(0,s.default)(n)[t]=T.Mixin[t]}),n}return(0,l.default)(v,[{key:"UNSAFE_componentWillMount",value:function(){var t,n,o,l;this._scrollResponder.UNSAFE_componentWillMount(),this._scrollAnimatedValue=new _.Value(null!=(t=null==(n=this.props.contentOffset)?void 0:n.y)?t:0),this._scrollAnimatedValue.setOffset(null!=(o=null==(l=this.props.contentInset)?void 0:l.top)?o:0),this._stickyHeaderRefs=new Map,this._headerLayoutYs=new Map}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){var n=this.props.contentInset?this.props.contentInset.top:0,o=t.contentInset?t.contentInset.top:0;n!==o&&this._scrollAnimatedValue.setOffset(o||0)}},{key:"componentDidMount",value:function(){this._updateAnimatedNodeAttachment()}},{key:"componentDidUpdate",value:function(){this._updateAnimatedNodeAttachment()}},{key:"componentWillUnmount",value:function(){this._scrollResponder.componentWillUnmount(),this._scrollAnimatedValueAttachment&&this._scrollAnimatedValueAttachment.detach()}},{key:"getInnerViewNode",value:function(){return V.findNodeHandle(this._innerViewRef)}},{key:"getInnerViewRef",value:function(){return this._innerViewRef}},{key:"_getKeyForIndex",value:function(t,n){var o=n[t];return o&&o.key}},{key:"_updateAnimatedNodeAttachment",value:function(){this._scrollAnimatedValueAttachment&&this._scrollAnimatedValueAttachment.detach(),this.props.stickyHeaderIndices&&this.props.stickyHeaderIndices.length>0&&(this._scrollAnimatedValueAttachment=_.attachNativeEvent(this._scrollViewRef,'onScroll',[{nativeEvent:{contentOffset:{y:this._scrollAnimatedValue}}}]))}},{key:"_setStickyHeaderRef",value:function(t,n){n?this._stickyHeaderRefs.set(t,n):this._stickyHeaderRefs.delete(t)}},{key:"_onStickyHeaderLayout",value:function(t,n,o){var l=this.props.stickyHeaderIndices;if(l){var s=H.Children.toArray(this.props.children);if(o===this._getKeyForIndex(t,s)){var c=n.nativeEvent.layout.y;this._headerLayoutYs.set(o,c);var p=l[l.indexOf(t)-1];if(null!=p){var u=this._stickyHeaderRefs.get(this._getKeyForIndex(p,s));u&&u.setNextHeaderY&&u.setNextHeaderY(c)}}}}},{key:"render",value:function(){var t,o,l=this;o=b,x(void 0!==(t=E),'ScrollViewClass must not be undefined'),x(void 0!==o,'ScrollContentContainerViewClass must not be undefined');var s=[!0===this.props.horizontal&&j.contentContainerHorizontal,this.props.contentContainerStyle],c={};this.props.onContentSizeChange&&(c={onLayout:this._handleContentOnLayout});var p=this.props.stickyHeaderIndices,u=this.props.children;if(null!=p&&p.length>0){var h=H.Children.toArray(this.props.children);u=h.map(function(t,n){var o=t?p.indexOf(n):-1;if(o>-1){var s=t.key,c=p[o+1],u=l.props.StickyHeaderComponent||k;return H.createElement(u,{key:s,ref:function(t){return l._setStickyHeaderRef(s,t)},nextHeaderLayoutY:l._headerLayoutYs.get(l._getKeyForIndex(c,h)),onLayout:function(t){return l._onStickyHeaderLayout(n,t,s)},scrollAnimatedValue:l._scrollAnimatedValue,inverted:l.props.invertStickyHeaders,scrollViewHeight:l.state.layoutHeight},t)}return t})}u=H.createElement(M.Provider,{value:!0===this.props.horizontal?z:D},u);var f=Array.isArray(p)&&p.length>0,R=H.createElement(o,(0,n.default)({},c,{ref:this._setInnerViewRef,style:s,removeClippedSubviews:this.props.removeClippedSubviews,collapsable:!1}),u),y=void 0!==this.props.alwaysBounceHorizontal?this.props.alwaysBounceHorizontal:this.props.horizontal,v=void 0!==this.props.alwaysBounceVertical?this.props.alwaysBounceVertical:!this.props.horizontal,_=!!this.props.DEPRECATED_sendUpdatedChildFrames,V=!0===this.props.horizontal?j.baseHorizontal:j.baseVertical,T=S(S({},this.props),{},{alwaysBounceHorizontal:y,alwaysBounceVertical:v,style:[V,this.props.style],onContentSizeChange:null,onLayout:this._handleLayout,onMomentumScrollBegin:this._scrollResponder.scrollResponderHandleMomentumScrollBegin,onMomentumScrollEnd:this._scrollResponder.scrollResponderHandleMomentumScrollEnd,onResponderGrant:this._scrollResponder.scrollResponderHandleResponderGrant,onResponderReject:this._scrollResponder.scrollResponderHandleResponderReject,onResponderRelease:this._scrollResponder.scrollResponderHandleResponderRelease,onResponderTerminationRequest:this._scrollResponder.scrollResponderHandleTerminationRequest,onScrollBeginDrag:this._scrollResponder.scrollResponderHandleScrollBeginDrag,onScrollEndDrag:this._scrollResponder.scrollResponderHandleScrollEndDrag,onScrollShouldSetResponder:this._scrollResponder.scrollResponderHandleScrollShouldSetResponder,onStartShouldSetResponder:this._scrollResponder.scrollResponderHandleStartShouldSetResponder,onStartShouldSetResponderCapture:this._scrollResponder.scrollResponderHandleStartShouldSetResponderCapture,onTouchEnd:this._scrollResponder.scrollResponderHandleTouchEnd,onTouchMove:this._scrollResponder.scrollResponderHandleTouchMove,onTouchStart:this._scrollResponder.scrollResponderHandleTouchStart,onTouchCancel:this._scrollResponder.scrollResponderHandleTouchCancel,onScroll:this._handleScroll,scrollBarThumbImage:I(this.props.scrollBarThumbImage),scrollEventThrottle:f?1:this.props.scrollEventThrottle,sendMomentumEvents:!(!this.props.onMomentumScrollBegin&&!this.props.onMomentumScrollEnd),DEPRECATED_sendUpdatedChildFrames:_,snapToStart:!1!==this.props.snapToStart,snapToEnd:!1!==this.props.snapToEnd,pagingEnabled:!0===this.props.pagingEnabled&&null==this.props.snapToInterval&&null==this.props.snapToOffsets}),C=this.props.decelerationRate;null!=C&&(T.decelerationRate=A(C));var O=this.props.refreshControl;return O?H.createElement(t,(0,n.default)({},T,{ref:this._setNativeRef}),w.isTV?null:O,R):H.createElement(t,(0,n.default)({},T,{ref:this._setNativeRef}),R)}}]),v})(H.Component);L.Context=M;var j=C.create({baseVertical:{flexGrow:1,flexShrink:1,flexDirection:'column',overflow:'scroll'},baseHorizontal:{flexGrow:1,flexShrink:1,flexDirection:'row',overflow:'scroll'},contentContainerHorizontal:{flexDirection:'row'}});function B(t,o){return H.createElement(L,(0,n.default)({},t,{scrollViewRef:o}))}B.displayName='ScrollView';var P=H.forwardRef(B);P.Context=M,P.displayName='ScrollView',m.exports=P},271,[1,16,29,30,48,45,47,44,54,272,274,275,276,242,57,59,94,277,285,62,91,284,90,6,286,188,287,262]);
__d(function(g,r,i,a,m,e,d){'use strict';var l=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,o=l(r(d[1])),u=r(d[2]),c=r(d[3]);g.RN$Bridgeless?(u('RCTScrollView',o.default),t='RCTScrollView'):t=c('RCTScrollView');var f=t;e.default=f},272,[1,273,201,181]);
__d(function(g,r,i,a,m,e,d){'use strict';var o={uiViewClassName:'RCTScrollView',bubblingEventTypes:{},directEventTypes:{topScrollToTop:{registrationName:'onScrollToTop'}},validAttributes:{alwaysBounceHorizontal:!0,alwaysBounceVertical:!0,automaticallyAdjustContentInsets:!0,bounces:!0,bouncesZoom:!0,canCancelContentTouches:!0,centerContent:!0,contentInset:{diff:r(d[0])},contentOffset:{diff:r(d[0])},contentInsetAdjustmentBehavior:!0,decelerationRate:!0,directionalLockEnabled:!0,disableIntervalMomentum:!0,endFillColor:{process:r(d[1])},fadingEdgeLength:!0,indicatorStyle:!0,keyboardDismissMode:!0,maintainVisibleContentPosition:!0,maximumZoomScale:!0,minimumZoomScale:!0,nestedScrollEnabled:!0,onMomentumScrollBegin:!0,onMomentumScrollEnd:!0,onScroll:!0,onScrollBeginDrag:!0,onScrollEndDrag:!0,onScrollToTop:!0,overScrollMode:!0,pagingEnabled:!0,persistentScrollbar:!0,pinchGestureEnabled:!0,scrollEnabled:!0,scrollEventThrottle:!0,scrollIndicatorInsets:{diff:r(d[0])},scrollPerfTag:!0,scrollToOverflowEnabled:!0,scrollsToTop:!0,sendMomentumEvents:!0,showsHorizontalScrollIndicator:!0,showsVerticalScrollIndicator:!0,snapToAlignment:!0,snapToEnd:!0,snapToInterval:!0,snapToOffsets:!0,snapToStart:!0,zoomScale:!0,DEPRECATED_sendUpdatedChildFrames:!0}};m.exports=o},273,[186,71]);
__d(function(g,r,i,a,m,e,d){'use strict';Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,l=r(d[0]),n=r(d[1]);g.RN$Bridgeless?(l('RCTScrollContentView',{uiViewClassName:'RCTScrollContentView',bubblingEventTypes:{},directEventTypes:{},validAttributes:{}}),t='RCTScrollContentView'):t=n('RCTScrollContentView');var o=t;e.default=o},274,[201,181]);
__d(function(g,r,i,a,m,e,d){'use strict';Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l,o=r(d[0]),n=r(d[1]),t={uiViewClassName:'AndroidHorizontalScrollView',bubblingEventTypes:{},directEventTypes:{},validAttributes:{decelerationRate:!0,disableIntervalMomentum:!0,endFillColor:{process:r(d[2])},fadingEdgeLength:!0,nestedScrollEnabled:!0,overScrollMode:!0,pagingEnabled:!0,persistentScrollbar:!0,scrollEnabled:!0,scrollPerfTag:!0,sendMomentumEvents:!0,showsHorizontalScrollIndicator:!0,snapToEnd:!0,snapToInterval:!0,snapToStart:!0,snapToOffsets:!0}};g.RN$Bridgeless?(o('AndroidHorizontalScrollView',t),l='AndroidHorizontalScrollView'):l=n('AndroidHorizontalScrollView');var s=l;e.default=s},275,[201,181,71]);
__d(function(g,r,i,a,m,e,d){'use strict';Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,o=r(d[0]),n=r(d[1]);g.RN$Bridgeless?(o('AndroidHorizontalScrollContentView',{uiViewClassName:'AndroidHorizontalScrollContentView',bubblingEventTypes:{},directEventTypes:{},validAttributes:{}}),t='AndroidHorizontalScrollContentView'):t=n('AndroidHorizontalScrollContentView');var l=t;e.default=l},276,[201,181]);
__d(function(g,r,i,a,m,e,d){'use strict';var o=r(d[0])(r(d[1])),l=(r(d[2]),r(d[3])),s=r(d[4]),n=r(d[5]),t=r(d[6]),c=r(d[7]),p=r(d[8]),u=(r(d[9]),r(d[10])),h=r(d[11]),S={Mixin:{_subscriptionKeyboardWillShow:null,_subscriptionKeyboardWillHide:null,_subscriptionKeyboardDidShow:null,_subscriptionKeyboardDidHide:null,scrollResponderMixinGetInitialState:function(){return{isTouching:!1,lastMomentumScrollBeginTime:0,lastMomentumScrollEndTime:0,observedScrollSinceBecomingResponder:!1,becameResponderWhileAnimating:!1}},scrollResponderHandleScrollShouldSetResponder:function(){return!0!==this.props.disableScrollViewPanResponder&&this.state.isTouching},scrollResponderHandleStartShouldSetResponder:function(o){if(!0===this.props.disableScrollViewPanResponder)return!1;var l=c.currentlyFocusedInput();return'handled'===this.props.keyboardShouldPersistTaps&&null!=l&&o.target!==l},scrollResponderHandleStartShouldSetResponderCapture:function(o){if(this.scrollResponderIsAnimating())return!0;if(!0===this.props.disableScrollViewPanResponder)return!1;var l=c.currentlyFocusedInput(),s=this.props.keyboardShouldPersistTaps,n=!s||'never'===s;return'number'!=typeof o.target&&!(!n||null==l||null==o.target||c.isTextInput(o.target))},scrollResponderHandleResponderReject:function(){},scrollResponderHandleTerminationRequest:function(){return!this.state.observedScrollSinceBecomingResponder},scrollResponderHandleTouchEnd:function(o){var l=o.nativeEvent;this.state.isTouching=0!==l.touches.length,this.props.onTouchEnd&&this.props.onTouchEnd(o)},scrollResponderHandleTouchCancel:function(o){this.state.isTouching=!1,this.props.onTouchCancel&&this.props.onTouchCancel(o)},scrollResponderHandleResponderRelease:function(o){if(this.props.onResponderRelease&&this.props.onResponderRelease(o),'number'!=typeof o.target){var l=c.currentlyFocusedInput();!0===this.props.keyboardShouldPersistTaps||'always'===this.props.keyboardShouldPersistTaps||null==l||o.target===l||this.state.observedScrollSinceBecomingResponder||this.state.becameResponderWhileAnimating||(this.props.onScrollResponderKeyboardDismissed&&this.props.onScrollResponderKeyboardDismissed(o),c.blurTextInput(l))}},scrollResponderHandleScroll:function(o){this.state.observedScrollSinceBecomingResponder=!0,this.props.onScroll&&this.props.onScroll(o)},scrollResponderHandleResponderGrant:function(o){this.state.observedScrollSinceBecomingResponder=!1,this.props.onResponderGrant&&this.props.onResponderGrant(o),this.state.becameResponderWhileAnimating=this.scrollResponderIsAnimating()},scrollResponderHandleScrollBeginDrag:function(o){s.beginScroll(),this.props.onScrollBeginDrag&&this.props.onScrollBeginDrag(o)},scrollResponderHandleScrollEndDrag:function(o){var l=o.nativeEvent.velocity;this.scrollResponderIsAnimating()||l&&(0!==l.x||0!==l.y)||s.endScroll(),this.props.onScrollEndDrag&&this.props.onScrollEndDrag(o)},scrollResponderHandleMomentumScrollBegin:function(o){this.state.lastMomentumScrollBeginTime=h(),this.props.onMomentumScrollBegin&&this.props.onMomentumScrollBegin(o)},scrollResponderHandleMomentumScrollEnd:function(o){s.endScroll(),this.state.lastMomentumScrollEndTime=h(),this.props.onMomentumScrollEnd&&this.props.onMomentumScrollEnd(o)},scrollResponderHandleTouchStart:function(o){this.state.isTouching=!0,this.props.onTouchStart&&this.props.onTouchStart(o)},scrollResponderHandleTouchMove:function(o){this.props.onTouchMove&&this.props.onTouchMove(o)},scrollResponderIsAnimating:function(){return h()-this.state.lastMomentumScrollEndTime<16||this.state.lastMomentumScrollEndTime<this.state.lastMomentumScrollBeginTime},scrollResponderGetScrollableNode:function(){return this.getScrollableNode?this.getScrollableNode():t.findNodeHandle(this)},scrollResponderScrollTo:function(l,s,n){if('number'==typeof l)console.warn('`scrollResponderScrollTo(x, y, animated)` is deprecated. Use `scrollResponderScrollTo({x: 5, y: 5, animated: true})` instead.');else{var t=l||{};l=t.x,s=t.y,n=t.animated}u(null!=this.getNativeScrollRef,'Expected scrollTo to be called on a scrollViewRef. If this exception occurs it is likely a bug in React Native');var c=this.getNativeScrollRef();null!=c&&o.default.scrollTo(c,l||0,s||0,!1!==n)},scrollResponderScrollToEnd:function(l){var s=!1!==(l&&l.animated);u(null!=this.getNativeScrollRef,'Expected scrollToEnd to be called on a scrollViewRef. If this exception occurs it is likely a bug in React Native');var n=this.getNativeScrollRef();null!=n&&o.default.scrollToEnd(n,s)},scrollResponderZoomTo:function(l,s){u(!0,'zoomToRect is not implemented'),'animated'in l?(s=l.animated,delete l.animated):void 0!==s&&console.warn('`scrollResponderZoomTo` `animated` argument is deprecated. Use `options.animated` instead');u(null!=this.getNativeScrollRef,'Expected zoomToRect to be called on a scrollViewRef. If this exception occurs it is likely a bug in React Native');var n=this.getNativeScrollRef();null!=n&&o.default.zoomToRect(n,l,!1!==s)},scrollResponderFlashScrollIndicators:function(){u(null!=this.getNativeScrollRef,'Expected flashScrollIndicators to be called on a scrollViewRef. If this exception occurs it is likely a bug in React Native');var l=this.getNativeScrollRef();null!=l&&o.default.flashScrollIndicators(l)},scrollResponderScrollNativeHandleToKeyboard:function(o,l,s){if(this.additionalScrollOffset=l||0,this.preventNegativeScrollOffset=!!s,'number'==typeof o)p.measureLayout(o,t.findNodeHandle(this.getInnerViewNode()),this.scrollResponderTextInputFocusError,this.scrollResponderInputMeasureAndScrollToKeyboard);else{var n=this.getInnerViewRef();if(null==n)return;o.measureLayout(n,this.scrollResponderInputMeasureAndScrollToKeyboard,this.scrollResponderTextInputFocusError)}},scrollResponderInputMeasureAndScrollToKeyboard:function(o,s,n,t){var c=l.get('window').height;this.keyboardWillOpenTo&&(c=this.keyboardWillOpenTo.endCoordinates.screenY);var p=s-c+t+this.additionalScrollOffset;this.preventNegativeScrollOffset&&(p=Math.max(0,p)),this.scrollResponderScrollTo({x:0,y:p,animated:!0}),this.additionalOffset=0,this.preventNegativeScrollOffset=!1},scrollResponderTextInputFocusError:function(o){console.error('Error measuring text field: ',o)},UNSAFE_componentWillMount:function(){var o=this.props.keyboardShouldPersistTaps;'boolean'==typeof o&&console.warn("'keyboardShouldPersistTaps={"+(!0===o?'true':'false')+"}' is deprecated. Use 'keyboardShouldPersistTaps=\""+(o?'always':'never')+"\"' instead"),this.keyboardWillOpenTo=null,this.additionalScrollOffset=0,this._subscriptionKeyboardWillShow=n.addListener('keyboardWillShow',this.scrollResponderKeyboardWillShow),this._subscriptionKeyboardWillHide=n.addListener('keyboardWillHide',this.scrollResponderKeyboardWillHide),this._subscriptionKeyboardDidShow=n.addListener('keyboardDidShow',this.scrollResponderKeyboardDidShow),this._subscriptionKeyboardDidHide=n.addListener('keyboardDidHide',this.scrollResponderKeyboardDidHide)},componentWillUnmount:function(){null!=this._subscriptionKeyboardWillShow&&this._subscriptionKeyboardWillShow.remove(),null!=this._subscriptionKeyboardWillHide&&this._subscriptionKeyboardWillHide.remove(),null!=this._subscriptionKeyboardDidShow&&this._subscriptionKeyboardDidShow.remove(),null!=this._subscriptionKeyboardDidHide&&this._subscriptionKeyboardDidHide.remove()},scrollResponderKeyboardWillShow:function(o){this.keyboardWillOpenTo=o,this.props.onKeyboardWillShow&&this.props.onKeyboardWillShow(o)},scrollResponderKeyboardWillHide:function(o){this.keyboardWillOpenTo=null,this.props.onKeyboardWillHide&&this.props.onKeyboardWillHide(o)},scrollResponderKeyboardDidShow:function(o){o&&(this.keyboardWillOpenTo=o),this.props.onKeyboardDidShow&&this.props.onKeyboardDidShow(o)},scrollResponderKeyboardDidHide:function(o){this.keyboardWillOpenTo=null,this.props.onKeyboardDidHide&&this.props.onKeyboardDidHide(o)}}};m.exports=S},277,[1,278,59,64,279,281,94,179,79,57,6,130]);
__d(function(g,r,i,a,m,e,d){var o=r(d[0]),l=r(d[1]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=l(r(d[2])),c=(o(r(d[3])),(0,t.default)({supportedCommands:['flashScrollIndicators','scrollTo','scrollToEnd','zoomToRect']}));e.default=c},278,[12,1,93,59]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0])(r(d[1])),o=r(d[2]),l={setGlobalOptions:function(l){if(void 0!==l.debug&&o(t.default,'Trying to debug FrameRateLogger without the native module!'),t.default){var u={debug:!!l.debug,reportStackTraces:!!l.reportStackTraces};t.default.setGlobalOptions(u)}},setContext:function(o){t.default&&t.default.setContext(o)},beginScroll:function(){t.default&&t.default.beginScroll()},endScroll:function(){t.default&&t.default.endScroll()}};m.exports=l},279,[1,280,6]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t(r(d[1])).get('FrameRateLogger');e.default=o},280,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0])(r(d[1])),t=r(d[2]),u=r(d[3]),o=r(d[4]),s=(r(d[5]),new u(n.default));s.dismiss=o,s.scheduleLayoutAnimation=function(n){var u=n.duration,o=n.easing;null!=u&&0!==u&&t.configureNext({duration:u,update:{duration:u,type:null!=o&&t.Types[o]||'keyboard'}})},m.exports=s},281,[1,282,283,145,284,6]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])).get('KeyboardObserver');e.default=u},282,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0])(r(d[1])),t=r(d[2]);function s(s,o){n.default.isTesting||t.configureNextLayoutAnimation(s,null!=o?o:function(){},function(){})}function o(n,t,s){return{duration:n,create:{type:t,property:s},update:{type:t},delete:{type:t,property:s}}}var p={easeInEaseOut:o(300,'easeInEaseOut','opacity'),linear:o(500,'linear','opacity'),spring:{duration:700,create:{type:'linear',property:'opacity'},update:{type:'spring',springDamping:.4},delete:{type:'linear',property:'opacity'}}},c={configureNext:s,create:o,Types:Object.freeze({spring:'spring',linear:'linear',easeInEaseOut:'easeInEaseOut',easeIn:'easeIn',easeOut:'easeOut',keyboard:'keyboard'}),Properties:Object.freeze({opacity:'opacity',scaleX:'scaleX',scaleY:'scaleY',scaleXY:'scaleXY'}),checkConfig:function(){console.error('LayoutAnimation.checkConfig(...) has been disabled.')},Presets:p,easeInEaseOut:s.bind(null,p.easeInEaseOut),linear:s.bind(null,p.linear),spring:s.bind(null,p.spring)};m.exports=c},283,[1,57,79]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);m.exports=function(){t.blurTextInput(t.currentlyFocusedInput())}},284,[179]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=r(d[2]),u=r(d[3]),s=r(d[4]);function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var p=r(d[5]),c=r(d[6]),h=r(d[7]),y=r(d[8]),f=p.createAnimatedComponent(y),v=(function(p){o(x,p);var h,y,v=(h=x,y=l(),function(){var t,n=s(h);if(y){var o=s(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return u(this,t)});function x(){var n;t(this,x);for(var o=arguments.length,u=new Array(o),s=0;s<o;s++)u[s]=arguments[s];return(n=v.call.apply(v,[this].concat(u))).state={measured:!1,layoutY:0,layoutHeight:0,nextHeaderLayoutY:n.props.nextHeaderLayoutY},n._onLayout=function(t){n.setState({measured:!0,layoutY:t.nativeEvent.layout.y,layoutHeight:t.nativeEvent.layout.height}),n.props.onLayout(t);var o=c.Children.only(n.props.children);o.props.onLayout&&o.props.onLayout(t)},n}return n(x,[{key:"setNextHeaderY",value:function(t){this.setState({nextHeaderLayoutY:t})}},{key:"render",value:function(){var t=this.props,n=t.inverted,o=t.scrollViewHeight,u=this.state,s=u.measured,l=u.layoutHeight,p=u.layoutY,h=u.nextHeaderLayoutY,y=[-1,0],v=[0,0];if(s)if(n){if(null!=o){var x=p+l-o;if(x>0){y.push(x),v.push(0),y.push(x+1),v.push(1);var H=(h||0)-l-o;H>x&&(y.push(H,H+1),v.push(H-x,H-x))}}}else{y.push(p),v.push(0);var Y=(h||0)-l;Y>=p?(y.push(Y,Y+1),v.push(Y-p,Y-p)):(y.push(p+1),v.push(1))}var R=this.props.scrollAnimatedValue.interpolate({inputRange:y,outputRange:v}),C=c.Children.only(this.props.children);return c.createElement(f,{collapsable:!1,onLayout:this._onLayout,style:[C.props.style,L.header,{transform:[{translateY:R}]}]},c.cloneElement(C,{style:L.fill,onLayout:void 0}))}}]),x})(c.Component),L=h.create({header:{zIndex:10},fill:{flex:1}});m.exports=v},285,[29,30,45,47,44,242,59,62,91]);
__d(function(g,r,i,a,m,e,d){'use strict';r(d[0]);m.exports=function(t){return'normal'===t?.998:'fast'===t?.99:t}},286,[57]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0])(Object.create(null),{margin:!0,marginHorizontal:!0,marginVertical:!0,marginBottom:!0,marginTop:!0,marginLeft:!0,marginRight:!0,flex:!0,flexGrow:!0,flexShrink:!0,flexBasis:!0,alignSelf:!0,height:!0,minHeight:!0,maxHeight:!0,width:!0,minWidth:!0,maxWidth:!0,position:!0,left:!0,right:!0,bottom:!0,top:!0,transform:!0});m.exports=function(n){var o={},f={};return n&&Object.keys(n).forEach(function(h){var l=n[h];t[h]?f[h]=l:o[h]=l}),{outer:f,inner:o}}},287,[16]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]);function c(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,s)}return o}function l(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?c(Object(s),!0).forEach(function(o){t(n,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(s,t))})}return n}function u(t,n){var o;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=f(t))||n&&t&&"number"==typeof t.length){o&&(t=o);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(o=t[Symbol.iterator]()).next.bind(o)}function f(t,n){if(t){if("string"==typeof t)return h(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?h(t,n):void 0}}function h(t,n){(null==n||n>t.length)&&(n=t.length);for(var o=0,s=new Array(n);o<n;o++)s[o]=t[o];return s}var v=r(d[4]),b=(function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{viewAreaCoveragePercentThreshold:0};o(this,t),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=n}return s(t,[{key:"dispose",value:function(){this._timers.forEach(clearTimeout)}},{key:"computeViewableItems",value:function(t,n,o,s,c){var l=this._config,u=l.itemVisiblePercentThreshold,f=l.viewAreaCoveragePercentThreshold,h=null!=f,b=h?f:u;v(null!=b&&null!=u!=(null!=f),'Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold');var p=[];if(0===t)return p;var w=-1,_=c||{first:0,last:t-1},I=_.first,O=_.last;if(O>=t)return console.warn('Invalid render range computing viewability '+JSON.stringify({renderRange:c,itemCount:t})),[];for(var j=I;j<=O;j++){var P=s(j);if(P){var S=P.offset-n,A=S+P.length;if(S<o&&A>0)w=j,y(h,b,S,A,o,P.length)&&p.push(j);else if(w>=0)break}}return p}},{key:"onUpdate",value:function(t,n,o,s,c,l,u){var f=this;if((!this._config.waitForInteraction||this._hasInteracted)&&0!==t&&s(0)){var h=[];if(t&&(h=this.computeViewableItems(t,n,o,s,u)),this._viewableIndices.length!==h.length||!this._viewableIndices.every(function(t,n){return t===h[n]}))if(this._viewableIndices=h,this._config.minimumViewTime){var v=setTimeout(function(){f._timers.delete(v),f._onUpdateSync(h,l,c)},this._config.minimumViewTime);this._timers.add(v)}else this._onUpdateSync(h,l,c)}}},{key:"resetViewableIndices",value:function(){this._viewableIndices=[]}},{key:"recordInteraction",value:function(){this._hasInteracted=!0}},{key:"_onUpdateSync",value:function(t,o,s){var c=this;t=t.filter(function(t){return c._viewableIndices.includes(t)});for(var f,h=this._viewableItems,v=new Map(t.map(function(t){var n=s(t,!0);return[n.key,n]})),b=[],y=u(v);!(f=y()).done;){var p=f.value,w=n(p,2),_=w[0],I=w[1];h.has(_)||b.push(I)}for(var O,j=u(h);!(O=j()).done;){var P=O.value,S=n(P,2),A=S[0],T=S[1];v.has(A)||b.push(l(l({},T),{},{isViewable:!1}))}b.length>0&&(this._viewableItems=v,o({viewableItems:Array.from(v.values()),changed:b,viewabilityConfig:this._config}))}}]),t})();function y(t,n,o,s,c,l){if(w(o,s,c))return!0;var u=p(o,s,c);return 100*(t?u/c:u/l)>=n}function p(t,n,o){var s=Math.min(n,o)-Math.max(t,0);return Math.max(0,s)}function w(t,n,o){return t>=0&&n<=o&&n>t}m.exports=b},288,[54,17,29,30,6]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]);function s(t,s,f){for(var l=[],o=0,u=0;u<s;u++)for(var h=f(u),v=h.offset+h.length,c=0;c<t.length;c++)if(null==l[c]&&v>=t[c]&&(l[c]=u,o++,c===t.length-1))return n(o===t.length,'bad offsets input, should be in increasing order: %s',JSON.stringify(t)),l;return l}function f(t,n){return n.last-n.first+1-Math.max(0,1+Math.min(n.last,t.last)-Math.max(n.first,t.first))}var l={computeWindowedRenderLimits:function(n,l,o,u){var h=n.data,v=n.getItemCount,c=n.maxToRenderPerBatch,x=n.windowSize,M=v(h);if(0===M)return l;var w=u.offset,b=u.velocity,p=u.visibleLength,C=Math.max(0,w),O=C+p,y=(x-1)*p,L=b>1?'after':b<-1?'before':'none',R=Math.max(0,C-.5*y),S=Math.max(0,O+.5*y);if(o(M-1).offset<R)return{first:Math.max(0,M-1-c),last:M-1};var B=s([R,C,O,S],n.getItemCount(n.data),o),I=t(B,4),J=I[0],N=I[1],T=I[2],_=I[3];J=null==J?0:J,N=null==N?Math.max(0,J):N,_=null==_?M-1:_;for(var k={first:N,last:T=null==T?Math.min(_,N+c-1):T},z=f(l,k);!(N<=J&&T>=_);){var E=z>=c,F=N<=l.first||N>l.last,P=N>J&&(!E||!F),W=T>=l.last||T<l.first,j=T<_&&(!E||!W);if(E&&!P&&!j)break;!P||'after'===L&&j&&W||(F&&z++,N--),!j||'before'===L&&P&&F||(W&&z++,T++)}if(!(T>=N&&N>=0&&T<M&&N>=J&&T<=_&&N<=k.first&&T>=k.last))throw new Error('Bad window calculation '+JSON.stringify({first:N,last:T,itemCount:M,overscanFirst:J,overscanLast:_,visible:k}));return{first:N,last:T}},elementsThatOverlapOffsets:s,newRangeCount:f};m.exports=l},289,[17,6]);
__d(function(g,r,i,a,m,e,d){'use strict';r(d[0])(r(d[1]));var t=r(d[2]),s=r(d[3]);m.exports=s(t)},290,[12,59,291,261]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=t(r(d[1])),o=t(r(d[2])),u=t(r(d[3])),c=t(r(d[4])),s=t(r(d[5])),l=r(d[6]),h=r(d[7]),f=(r(d[8]),r(d[9])),p=r(d[10]),w=r(d[11]);var v=function(t,o){var u,c,l=w(t.source)||{uri:void 0,width:void 0,height:void 0};if(Array.isArray(l))c=p([y.base,t.style])||{},u=l;else{var f=l.width,v=l.height,z=l.uri;c=p([{width:f,height:v},y.base,t.style])||{},u=[l],''===z&&console.warn('source.uri should not be an empty string')}var b=t.resizeMode||c.resizeMode||'cover',I=c.tintColor;if(null!=t.src&&console.warn('The <Image> component requires a `source` property rather than `src`.'),null!=t.children)throw new Error('The <Image> component cannot contain children. If you want to render content on top of the image, consider using the <ImageBackground> component or absolute positioning.');return h.createElement(s.default,(0,n.default)({},t,{ref:o,style:c,resizeMode:b,tintColor:I,source:u}))};(v=h.forwardRef(v)).displayName='Image',v.getSize=function(t,n,o){c.default.getSize(t).then(function(t){var o=(0,u.default)(t,2),c=o[0],s=o[1];return n(c,s)}).catch(o||function(){console.warn('Failed to get size for image '+t)})},v.getSizeWithHeaders=function(t,n,o,u){return c.default.getSizeWithHeaders(t,n).then(function(t){o(t.width,t.height)}).catch(u||function(){console.warn('Failed to get size for image: '+t)})},v.prefetch=function(t){return c.default.prefetchImage(t)},v.queryCache=function(t){return o.default.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.default.awrap(c.default.queryCache(t));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},null,null,null,Promise)},v.resolveAssetSource=w,v.propTypes=l;var y=f.create({base:{overflow:'hidden'}});m.exports=v},291,[1,16,111,17,292,293,295,59,94,62,90,188]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t(r(d[1])).getEnforcing('ImageLoader');e.default=o},292,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u,f=t(r(d[1])),l=r(d[2]),n=r(d[3]);g.RN$Bridgeless?(n.register('RCTImageView',function(){return f.default}),u='RCTImageView'):u=l('RCTImageView');var s=u;e.default=s},293,[1,294,181,178]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),o=t(r(d[1]));function n(t,o){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);o&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,s)}return n}function s(t){for(var s=1;s<arguments.length;s++){var c=null!=arguments[s]?arguments[s]:{};s%2?n(Object(c),!0).forEach(function(n){(0,o.default)(t,n,c[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):n(Object(c)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(c,o))})}return t}var c={uiViewClassName:'RCTImageView',bubblingEventTypes:{},directEventTypes:{topLoadStart:{registrationName:'onLoadStart'},topProgress:{registrationName:'onProgress'},topError:{registrationName:'onError'},topPartialLoad:{registrationName:'onPartialLoad'},topLoad:{registrationName:'onLoad'},topLoadEnd:{registrationName:'onLoadEnd'}},validAttributes:s(s({},t(r(d[2])).default.validAttributes),{},{blurRadius:!0,capInsets:{diff:r(d[3])},defaultSource:{process:r(d[4])},defaultSrc:!0,fadeDuration:!0,headers:!0,loadingIndicatorSrc:!0,onError:!0,onLoad:!0,onLoadEnd:!0,onLoadStart:!0,onPartialLoad:!0,onProgress:!0,overlayColor:{process:r(d[5])},progressiveRenderingEnabled:!0,resizeMethod:!0,resizeMode:!0,shouldNotifyLoadEvents:!0,source:!0,src:!0,tintColor:{process:r(d[5])}})};m.exports=c},294,[1,54,193,184,188,71]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]),o=r(d[1]),t=r(d[2]),s=r(d[3]),c=r(d[4]);m.exports={style:s(t),source:o,defaultSource:c.oneOfType([c.shape({uri:c.string,width:c.number,height:c.number,scale:c.number}),c.number]),accessible:c.bool,accessibilityLabel:c.node,blurRadius:c.number,capInsets:n,resizeMethod:c.oneOf(['auto','resize','scale']),resizeMode:c.oneOf(['cover','contain','stretch','repeat','center']),testID:c.string,onLayout:c.func,onLoadStart:c.func,onProgress:c.func,onError:c.func,onPartialLoad:c.func,onLoad:c.func,onLoadEnd:c.func}},295,[209,296,67,210,73]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]),t=n.shape({uri:n.string,bundle:n.string,method:n.string,headers:n.objectOf(n.string),body:n.string,cache:n.oneOf(['default','reload','force-cache','only-if-cached']),width:n.number,height:n.number,scale:n.number}),c=n.oneOfType([t,n.number,n.arrayOf(t)]);m.exports=c},296,[73]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1])(r(d[2])),f=t(r(d[3])),o=r(d[4]),c=r(d[5]),l=f.forwardRef(function(t,c){return f.createElement(o,(0,n.default)({scrollEventThrottle:1e-4},t,{ref:c}))});m.exports=c(l)},297,[12,1,16,59,271,261]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1])(r(d[2])),f=t(r(d[3])),o=r(d[4]),c=r(d[5]),l=f.forwardRef(function(t,c){return f.createElement(o,(0,n.default)({scrollEventThrottle:1e-4},t,{ref:c}))});m.exports=c(l)},298,[12,1,16,59,299,261]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=r(d[2]),c=r(d[3]),s=r(d[4]),f=r(d[5]),u=r(d[6]);function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function l(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);n&&(c=c.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,c)}return o}function h(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?l(Object(o),!0).forEach(function(n){u(t,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))})}return t}r(d[7]);var y=r(d[8]),R=r(d[9]),v=h(h({},R.defaultProps),{},{stickySectionHeadersEnabled:!0}),w=(function(u){c(w,u);var l,h,v=(l=w,h=p(),function(){var t,n=f(l);if(h){var o=f(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return s(this,t)});function w(){var t;n(this,w);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(t=v.call.apply(v,[this].concat(c)))._captureRef=function(n){t._wrapperListRef=n},t}return o(w,[{key:"scrollToLocation",value:function(t){null!=this._wrapperListRef&&this._wrapperListRef.scrollToLocation(t)}},{key:"recordInteraction",value:function(){var t=this._wrapperListRef&&this._wrapperListRef.getListRef();t&&t.recordInteraction()}},{key:"flashScrollIndicators",value:function(){var t=this._wrapperListRef&&this._wrapperListRef.getListRef();t&&t.flashScrollIndicators()}},{key:"getScrollResponder",value:function(){var t=this._wrapperListRef&&this._wrapperListRef.getListRef();if(t)return t.getScrollResponder()}},{key:"getScrollableNode",value:function(){var t=this._wrapperListRef&&this._wrapperListRef.getListRef();if(t)return t.getScrollableNode()}},{key:"setNativeProps",value:function(t){var n=this._wrapperListRef&&this._wrapperListRef.getListRef();n&&n.setNativeProps(t)}},{key:"render",value:function(){return y.createElement(R,t({},this.props,{ref:this._captureRef,getItemCount:function(t){return t.length},getItem:function(t,n){return t[n]}}))}}]),w})(y.PureComponent);w.defaultProps=v,m.exports=w},299,[16,29,30,45,47,44,54,57,59,300]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]),c=r(d[4]),p=r(d[5]),l=r(d[6]),u=r(d[7]),f=r(d[8]);function h(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,s)}return o}function S(t){for(var n=1;n<arguments.length;n++){var s=null!=arguments[n]?arguments[n]:{};n%2?h(Object(s),!0).forEach(function(n){o(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function v(t){var n=I();return function(){var o,s=f(t);if(n){var c=f(this).constructor;o=Reflect.construct(s,arguments,c)}else o=s.apply(this,arguments);return u(this,o)}}function I(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var y=r(d[9]),_=r(d[10]),x=r(d[11]),b=r(d[12]),k=(function(o){l(f,o);var u=v(f);function f(t,n){var o;return s(this,f),(o=u.call(this,t,n))._getItem=function(t,n,o){if(!n)return null;for(var s=o-1,c=0;c<n.length;c++){var p=n[c],l=p.data,u=t.getItemCount(l);if(-1===s||s===u)return p;if(s<u)return t.getItem(l,s);s-=u+2}return null},o._keyExtractor=function(t,n){var s=o._subExtractor(n);return s&&s.key||String(n)},o._convertViewable=function(t){b(null!=t.index,'Received a broken ViewToken');var n=o._subExtractor(t.index);if(!n)return null;var s=n.section.keyExtractor||o.props.keyExtractor;return S(S({},t),{},{index:n.index,key:s(t.item,n.index),section:n.section})},o._onViewableItemsChanged=function(t){var n=t.viewableItems,s=t.changed,p=o.props.onViewableItemsChanged;null!=p&&p({viewableItems:n.map(o._convertViewable,c(o)).filter(Boolean),changed:s.map(o._convertViewable,c(o)).filter(Boolean)})},o._renderItem=function(t){var n=t.item,s=t.index,c=o._subExtractor(s);if(!c)return null;var p=c.index;if(null==p){var l=c.section;if(!0===c.header){var u=o.props.renderSectionHeader;return u?u({section:l}):null}var f=o.props.renderSectionFooter;return f?f({section:l}):null}var h=c.section.renderItem||o.props.renderItem,S=o._getSeparatorComponent(s,c);return b(h,'no renderItem!'),y.createElement(P,{SeparatorComponent:S,LeadingSeparatorComponent:0===p?o.props.SectionSeparatorComponent:void 0,cellKey:c.key,index:p,item:n,leadingItem:c.leadingItem,leadingSection:c.leadingSection,onUpdateSeparator:o._onUpdateSeparator,prevCellKey:(o._subExtractor(s-1)||{}).key,ref:function(t){o._cellRefs[c.key]=t},renderItem:h,section:c.section,trailingItem:c.trailingItem,trailingSection:c.trailingSection,inverted:!!o.props.inverted})},o._onUpdateSeparator=function(t,n){var s=o._cellRefs[t];s&&s.updateSeparatorProps(n)},o._cellRefs={},o._captureRef=function(t){o._listRef=t},o.state=o._computeState(t),o}return p(f,[{key:"scrollToLocation",value:function(t){for(var n=t.itemIndex,o=0;o<t.sectionIndex;o++)n+=this.props.getItemCount(this.props.sections[o].data)+2;var s=t.viewOffset||0;t.itemIndex>0&&this.props.stickySectionHeadersEnabled&&(s+=this._listRef._getFrameMetricsApprox(n-t.itemIndex).length);var c=S(S({},t),{},{viewOffset:s,index:n});this._listRef.scrollToIndex(c)}},{key:"getListRef",value:function(){return this._listRef}}]),p(f,[{key:"UNSAFE_componentWillReceiveProps",value:function(t){this.setState(this._computeState(t))}},{key:"_computeState",value:function(t){var o=this,s=t.ListHeaderComponent?1:0,c=[],p=t.sections?t.sections.reduce(function(n,o){return c.push(n+s),n+t.getItemCount(o.data)+2},0):0;t.SectionSeparatorComponent,t.renderItem,t.renderSectionFooter,t.renderSectionHeader,t.sections,t.stickySectionHeadersEnabled;return{childProps:S(S({},n(t,["SectionSeparatorComponent","renderItem","renderSectionFooter","renderSectionHeader","sections","stickySectionHeadersEnabled"])),{},{renderItem:this._renderItem,ItemSeparatorComponent:void 0,data:t.sections,getItemCount:function(){return p},getItem:function(n,s){return o._getItem(t,n,s)},keyExtractor:this._keyExtractor,onViewableItemsChanged:t.onViewableItemsChanged?this._onViewableItemsChanged:void 0,stickyHeaderIndices:t.stickySectionHeadersEnabled?c:void 0})}}},{key:"render",value:function(){return y.createElement(x,t({},this.state.childProps,{ref:this._captureRef}))}},{key:"_subExtractor",value:function(t){for(var n=t,o=this.props,s=o.getItem,c=o.getItemCount,p=o.keyExtractor,l=o.sections,u=0;u<l.length;u++){var f=l[u],h=f.data,S=f.key||String(u);if((n-=1)>=c(h)+1)n-=c(h)+1;else return-1===n?{section:f,key:S+':header',index:null,header:!0,trailingSection:l[u+1]}:n===c(h)?{section:f,key:S+':footer',index:null,header:!1,trailingSection:l[u+1]}:{section:f,key:S+':'+(f.keyExtractor||p)(s(h,n),n),index:n,leadingItem:s(h,n-1),leadingSection:l[u-1],trailingItem:s(h,n+1),trailingSection:l[u+1]}}}},{key:"_getSeparatorComponent",value:function(t,n){if(!(n=n||this._subExtractor(t)))return null;var o=n.section.ItemSeparatorComponent||this.props.ItemSeparatorComponent,s=this.props.SectionSeparatorComponent,c=t===this.state.childProps.getItemCount()-1,p=n.index===this.props.getItemCount(n.section.data)-1;return s&&p?s:!o||p||c?null:o}}]),f})(y.PureComponent);k.defaultProps=S(S({},x.defaultProps),{},{data:[]});var P=(function(t){l(o,t);var n=v(o);function o(){var t;s(this,o);for(var c=arguments.length,p=new Array(c),l=0;l<c;l++)p[l]=arguments[l];return(t=n.call.apply(n,[this].concat(p))).state={separatorProps:{highlighted:!1,leadingItem:t.props.item,leadingSection:t.props.leadingSection,section:t.props.section,trailingItem:t.props.trailingItem,trailingSection:t.props.trailingSection},leadingSeparatorProps:{highlighted:!1,leadingItem:t.props.leadingItem,leadingSection:t.props.leadingSection,section:t.props.section,trailingItem:t.props.item,trailingSection:t.props.trailingSection}},t._separators={highlight:function(){['leading','trailing'].forEach(function(n){return t._separators.updateProps(n,{highlighted:!0})})},unhighlight:function(){['leading','trailing'].forEach(function(n){return t._separators.updateProps(n,{highlighted:!1})})},updateProps:function(n,o){var s=t.props,c=s.LeadingSeparatorComponent,p=s.cellKey,l=s.prevCellKey;'leading'===n&&null!=c?t.setState(function(t){return{leadingSeparatorProps:S(S({},t.leadingSeparatorProps),o)}}):t.props.onUpdateSeparator('leading'===n&&l||p,o)}},t}return p(o,[{key:"updateSeparatorProps",value:function(t){this.setState(function(n){return{separatorProps:S(S({},n.separatorProps),t)}})}},{key:"render",value:function(){var t=this.props,n=t.LeadingSeparatorComponent,o=t.SeparatorComponent,s=t.item,c=t.index,p=t.section,l=t.inverted,u=this.props.renderItem({item:s,index:c,section:p,separators:this._separators}),f=n&&y.createElement(n,this.state.leadingSeparatorProps),h=o&&y.createElement(o,this.state.separatorProps);return f||h?y.createElement(_,null,l?h:f,u,l?f:h):u}}],[{key:"getDerivedStateFromProps",value:function(t,n){return{separatorProps:S(S({},n.separatorProps),{},{leadingItem:t.item,leadingSection:t.leadingSection,section:t.section,trailingItem:t.trailingItem,trailingSection:t.trailingSection}),leadingSeparatorProps:S(S({},n.leadingSeparatorProps),{},{leadingItem:t.leadingItem,leadingSection:t.leadingSection,section:t.section,trailingItem:t.item,trailingSection:t.trailingSection})}}}]),o})(y.Component);m.exports=k},300,[16,55,54,29,48,30,45,47,44,59,91,265,6]);
__d(function(g,r,i,a,m,e,d){'use strict';r(d[0])(r(d[1]));var t=r(d[2]),s=r(d[3]);m.exports=s(t)},301,[12,59,207,261]);
__d(function(g,r,i,a,m,e,d){'use strict';r(d[0])(r(d[1]));var t=r(d[2]),s=r(d[3]);m.exports=s(t)},302,[12,59,91,261]);
__d(function(g,r,i,a,m,e,d){'use strict';m.exports=r(d[0])},303,[304]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),c=r(d[2]),u=r(d[3]),o=r(d[4]);function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var f=r(d[5]),l=r(d[6]),p=(function(l){c(R,l);var p,y,v=(p=R,y=s(),function(){var t,n=o(p);if(y){var c=o(this).constructor;t=Reflect.construct(n,arguments,c)}else t=n.apply(this,arguments);return u(this,t)});function R(){return t(this,R),v.apply(this,arguments)}return n(R,[{key:"render",value:function(){var t=r(d[7]);return f.createElement(t,{style:[h.unimplementedView,this.props.style]},this.props.children)}}]),R})(f.Component),h=l.create({unimplementedView:{}});m.exports=p},304,[29,30,45,47,44,59,62,91]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=n(r(d[2])),u=n(r(d[3])),c=n(r(d[4])),l=n(r(d[5])),s=n(r(d[6])),f=t(r(d[7]));function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var h=r(d[8]),v=r(d[9]),D=r(d[10]),y=r(d[11]),C=(function(t){(0,c.default)(I,t);var n,v,C=(n=I,v=p(),function(){var t,o=(0,s.default)(n);if(v){var u=(0,s.default)(this).constructor;t=Reflect.construct(o,arguments,u)}else t=o.apply(this,arguments);return(0,l.default)(this,t)});function I(){var t;(0,o.default)(this,I);for(var n=arguments.length,u=new Array(n),c=0;c<n;c++)u[c]=arguments[c];return(t=C.call.apply(C,[this].concat(u)))._picker=null,t._onChange=function(n){var o=n.nativeEvent.timestamp;t.props.onDateChange&&t.props.onDateChange(new Date(o)),t.props.onChange&&t.props.onChange(n),t.forceUpdate()},t}return(0,u.default)(I,[{key:"componentDidUpdate",value:function(){if(this.props.date){var t=this.props.date.getTime();this._picker&&f.Commands.setNativeDate(this._picker,t)}}},{key:"render",value:function(){var t=this,n=this.props;return y(n.date||n.initialDate,'A selected date or initial date should be specified.'),h.createElement(D,{style:n.style},h.createElement(f.default,{testID:n.testID,ref:function(n){t._picker=n},style:k.datePickerIOS,date:n.date?n.date.getTime():n.initialDate?n.initialDate.getTime():void 0,locale:null!=n.locale&&''!==n.locale?n.locale:void 0,maximumDate:n.maximumDate?n.maximumDate.getTime():void 0,minimumDate:n.minimumDate?n.minimumDate.getTime():void 0,mode:n.mode,minuteInterval:n.minuteInterval,timeZoneOffsetInMinutes:n.timeZoneOffsetInMinutes,onChange:this._onChange,onStartShouldSetResponder:function(){return!0},onResponderTerminationRequest:function(){return!1}}))}}]),I})(h.Component);C.DefaultProps={mode:'datetime'};var k=v.create({datePickerIOS:{height:216}});m.exports=C},305,[12,1,29,30,45,47,44,306,59,62,91,6]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),o=r(d[1]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Commands=void 0;var u=o(r(d[2])),n=o(r(d[3])),l=(t(r(d[4])),(0,u.default)({supportedCommands:['setNativeDate']}));e.Commands=l;var s=(0,n.default)('DatePicker',{paperComponentName:'RCTDatePicker',excludedPlatform:'android'});e.default=s},306,[12,1,93,205,59]);
__d(function(g,r,i,a,m,e,d){'use strict';m.exports=r(d[0])},307,[304]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),c=r(d[2]),o=r(d[3]),f=r(d[4]),l=r(d[5]),s=r(d[6]);function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var h=r(d[7]),v=r(d[8]),y=r(d[9]),p=r(d[10]),R=(function(R){f(S,R);var _,w,P=(_=S,w=u(),function(){var t,n=s(_);if(w){var c=s(this).constructor;t=Reflect.construct(n,arguments,c)}else t=n.apply(this,arguments);return l(this,t)});function S(){var t;c(this,S);for(var n=arguments.length,o=new Array(n),f=0;f<n;f++)o[f]=arguments[f];return(t=P.call.apply(P,[this].concat(o)))._viewRef=null,t._captureRef=function(n){t._viewRef=n},t}return o(S,[{key:"setNativeProps",value:function(t){var n=this._viewRef;n&&n.setNativeProps(t)}},{key:"render",value:function(){var c=this.props,o=c.children,f=c.style,l=c.imageStyle,s=c.imageRef,u=n(c,["children","style","imageStyle","imageRef"]);return v.createElement(p,{accessibilityIgnoresInvertColors:!0,style:f,ref:this._captureRef},v.createElement(h,t({},u,{style:[y.absoluteFill,{width:f.width,height:f.height},l],ref:s})),o)}}]),S})(v.Component);m.exports=R},308,[16,55,29,30,45,47,44,291,59,62,91]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=t(r(d[1])),o=t(r(d[2])),u=t(r(d[3])),c=t(r(d[4])),l=t(r(d[5])),s=t(r(d[6]));function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}r(d[7]);var p=r(d[8]),h=r(d[9]),y=(function(t){(0,u.default)(C,t);var h,y,R=(h=C,y=f(),function(){var t,n=(0,l.default)(h);if(y){var o=(0,l.default)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,c.default)(this,t)});function C(){return(0,n.default)(this,C),R.apply(this,arguments)}return(0,o.default)(C,[{key:"render",value:function(){return 0===p.Children.count(this.props.children)?null:p.createElement(s.default,{style:[this.props.style,v.container],nativeID:this.props.nativeID,backgroundColor:this.props.backgroundColor},this.props.children)}}]),C})(p.Component),v=h.create({container:{position:'absolute'}});m.exports=y},309,[1,29,30,45,47,44,310,57,59,62]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=(0,t(r(d[1])).default)('RCTInputAccessoryView');e.default=u},310,[1,205]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]),u=r(d[4]),c=r(d[5]),l=r(d[6]);function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var h=r(d[7]),y=r(d[8]),p=(r(d[9]),r(d[10])),v=r(d[11]),b=r(d[12]),_=(function(_){u(C,_);var R,k,L=(R=C,k=f(),function(){var t,n=l(R);if(k){var o=l(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return c(this,t)});function C(t){var n;return o(this,C),(n=L.call(this,t))._frame=null,n._subscriptions=[],n._initialFrameHeight=0,n._onKeyboardChange=function(t){if(null!=t){var o=t.duration,s=t.easing,u=t.endCoordinates,c=n._relativeKeyboardHeight(u);n.state.bottom!==c&&(o&&s&&y.configureNext({duration:o>10?o:10,update:{duration:o>10?o:10,type:y.Types[s]||'keyboard'}}),n.setState({bottom:c}))}else n.setState({bottom:0})},n._onLayout=function(t){n._frame=t.nativeEvent.layout,n._initialFrameHeight||(n._initialFrameHeight=n._frame.height)},n.state={bottom:0},n.viewRef=p.createRef(),n}return s(C,[{key:"_relativeKeyboardHeight",value:function(t){var n=this._frame;if(!n||!t)return 0;var o=t.screenY-this.props.keyboardVerticalOffset;return Math.max(n.y+n.height-o,0)}},{key:"componentDidMount",value:function(){this._subscriptions=[h.addListener('keyboardWillChangeFrame',this._onKeyboardChange)]}},{key:"componentWillUnmount",value:function(){this._subscriptions.forEach(function(t){t.remove()})}},{key:"render",value:function(){var o=this.props,s=o.behavior,u=o.children,c=o.contentContainerStyle,l=o.enabled,f=(o.keyboardVerticalOffset,o.style),h=n(o,["behavior","children","contentContainerStyle","enabled","keyboardVerticalOffset","style"]),y=l?this.state.bottom:0;switch(s){case'height':var _;return null!=this._frame&&this.state.bottom>0&&(_={height:this._initialFrameHeight-y,flex:0}),p.createElement(b,t({ref:this.viewRef,style:v.compose(f,_),onLayout:this._onLayout},h),u);case'position':return p.createElement(b,t({ref:this.viewRef,style:f,onLayout:this._onLayout},h),p.createElement(b,{style:v.compose(c,{bottom:y})},u));case'padding':return p.createElement(b,t({ref:this.viewRef,style:v.compose(f,{paddingBottom:y}),onLayout:this._onLayout},h),u);default:return p.createElement(b,t({ref:this.viewRef,onLayout:this._onLayout,style:f},h),u)}}}]),C})(p.Component);_.defaultProps={enabled:!0,keyboardVerticalOffset:0},m.exports=_},311,[16,55,29,30,45,47,44,281,283,57,59,62,91]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]),n=t(r(d[1])),l=t(r(d[2])),c=t(r(d[3])),s=t(r(d[4])),o=t(r(d[5])),u=t(r(d[6])),f=t(r(d[7]));function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var h=r(d[8]),v=r(d[9]),k=r(d[10]),y=(function(t){(0,s.default)(w,t);var y,E,R=(y=w,E=p(),function(){var t,n=(0,u.default)(y);if(E){var l=(0,u.default)(this).constructor;t=Reflect.construct(n,arguments,l)}else t=n.apply(this,arguments);return(0,o.default)(this,t)});function w(){var t;(0,l.default)(this,w);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(t=R.call.apply(R,[this].concat(c)))._hasWarnedInvalidRenderMask=!1,t}return(0,c.default)(w,[{key:"render",value:function(){var t=this.props,l=t.maskElement,c=t.children,s=(0,n.default)(t,["maskElement","children"]);return h.isValidElement(l)?h.createElement(f.default,s,h.createElement(k,{pointerEvents:"none",style:v.absoluteFill},l),c):(this._hasWarnedInvalidRenderMask||(console.warn("MaskedView: Invalid `maskElement` prop was passed to MaskedView. Expected a React Element. No mask will render."),this._hasWarnedInvalidRenderMask=!0),h.createElement(k,s,c))}}]),w})(h.Component);m.exports=y},312,[1,55,29,30,45,47,44,313,59,62,91]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=(0,t(r(d[1])).default)('RCTMaskedView');e.default=u},313,[1,205]);
__d(function(g,r,i,a,m,e,d){'use strict';var t,n=r(d[0]),o=n(r(d[1])),s=n(r(d[2])),l=n(r(d[3])),u=n(r(d[4])),p=n(r(d[5])),c=n(r(d[6])),f=n(r(d[7]));function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}r(d[8]);var v=r(d[9]),y=r(d[10]),S=r(d[11]),R=r(d[12]),C=r(d[13]),_=r(d[14]),w=0,T=(function(t){(0,u.default)(y,t);var n,o,v=(n=y,o=h(),function(){var t,s=(0,c.default)(n);if(o){var l=(0,c.default)(this).constructor;t=Reflect.construct(s,arguments,l)}else t=s.apply(this,arguments);return(0,p.default)(this,t)});function y(t){var n;return(0,s.default)(this,y),n=v.call(this,t),y._confirmProps(t),n._identifier=w++,n}return(0,l.default)(y,[{key:"getChildContext",value:function(){return{virtualizedList:null}}},{key:"componentWillUnmount",value:function(){null!=this.props.onDismiss&&this.props.onDismiss()}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){y._confirmProps(t)}},{key:"render",value:function(){if(!0!==this.props.visible)return null;var t={backgroundColor:this.props.transparent?'transparent':'white'},n=this.props.animationType||'none',o=this.props.presentationStyle;o||(o='fullScreen',this.props.transparent&&(o='overFullScreen'));var s=this.props.children;return S.createElement(f.default,{animationType:n,presentationStyle:o,transparent:this.props.transparent,hardwareAccelerated:this.props.hardwareAccelerated,onRequestClose:this.props.onRequestClose,onShow:this.props.onShow,statusBarTranslucent:this.props.statusBarTranslucent,identifier:this._identifier,style:x.modal,onStartShouldSetResponder:this._shouldSetResponder,supportedOrientations:this.props.supportedOrientations,onOrientationChange:this.props.onOrientationChange},S.createElement(R.Context.Provider,{value:null},S.createElement(_,{style:[x.container,t]},s)))}},{key:"_shouldSetResponder",value:function(){return!0}}],[{key:"_confirmProps",value:function(t){t.presentationStyle&&'overFullScreen'!==t.presentationStyle&&t.transparent&&console.warn("Modal with '"+t.presentationStyle+"' presentation style and 'transparent' value is not supported.")}}]),y})(S.Component);T.defaultProps={visible:!0,hardwareAccelerated:!1},T.contextTypes={rootTag:y.number},T.childContextTypes={virtualizedList:y.object};var k=v.getConstants().isRTL?'right':'left',x=C.create({modal:{position:'absolute'},container:(t={},(0,o.default)(t,k,0),(0,o.default)(t,"top",0),(0,o.default)(t,"flex",1),t)});m.exports=T},314,[1,54,29,30,45,47,44,315,316,318,73,59,271,62,91]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=(0,t(r(d[1])).default)('ModalHostView',{interfaceOnly:!0,paperComponentName:'RCTModalHostView'});e.default=o},315,[1,205]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=r(d[2]),c=r(d[3]),s=r(d[4]);function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}r(d[5]);var l=r(d[6]),p=(r(d[7]),r(d[8])),f=r(d[9]),h=r(d[10]),v=r(d[11]),y=(function(l){o(C,l);var h,y,E=(h=C,y=u(),function(){var t,n=s(h);if(y){var o=s(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return c(this,t)});function C(){var n;t(this,C);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(n=E.call.apply(E,[this].concat(c))).state={inspector:null,mainKey:1,hasError:!1},n._subscription=null,n}return n(C,[{key:"getChildContext",value:function(){return{rootTag:this.props.rootTag}}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){null!=this._subscription&&this._subscription.remove()}},{key:"render",value:function(){var t=this,n=p.createElement(v,{collapsable:!this.state.inspector,key:this.state.mainKey,pointerEvents:"box-none",style:b.appContainer,ref:function(n){t._mainRef=n}},this.props.children),o=this.props.WrapperComponent;return null!=o&&(n=p.createElement(o,{fabric:!0===this.props.fabric,showArchitectureIndicator:!0===this.props.showArchitectureIndicator},n)),p.createElement(f.Provider,{value:this.props.rootTag},p.createElement(v,{style:b.appContainer,pointerEvents:"box-none"},!this.state.hasError&&n,this.state.inspector,null))}}]),C})(p.Component);y.getDerivedStateFromError=void 0,y.childContextTypes={rootTag:l.number};var b=h.create({appContainer:{flex:1}});m.exports=y},316,[29,30,45,47,44,50,73,41,59,317,62,91]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);m.exports=t.createContext(0)},317,[59]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0])(r(d[1])),n=t.default?t.default.getConstants():{isRTL:!1,doLeftAndRightSwapInRTL:!0};m.exports={getConstants:function(){return n},allowRTL:function(n){t.default&&t.default.allowRTL(n)},forceRTL:function(n){t.default&&t.default.forceRTL(n)},swapLeftAndRightInRTL:function(n){t.default&&t.default.swapLeftAndRightInRTL(n)},isRTL:n.isRTL,doLeftAndRightSwapInRTL:n.doLeftAndRightSwapInRTL}},318,[1,319]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])).get('I18nManager');e.default=u},319,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=r(d[2]),u=r(d[3]),c=r(d[4]);function f(t){var n=s();return function(){var o,f=c(t);if(n){var s=c(this).constructor;o=Reflect.construct(f,arguments,s)}else o=f.apply(this,arguments);return u(this,o)}}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}r(d[5]);var l=r(d[6]),p=(r(d[7]),r(d[8])),h=(r(d[9]),(function(u){o(s,u);var c=f(s);function s(){return t(this,s),c.apply(this,arguments)}return n(s,[{key:"render",value:function(){throw null}}]),s})(p.Component)),y=(function(u){o(s,u);var c=f(s);function s(){return t(this,s),c.apply(this,arguments)}return n(s,[{key:"render",value:function(){return p.createElement(l,this.props,this.props.children)}}]),s})(p.Component);y.MODE_DIALOG="dialog",y.MODE_DROPDOWN='dropdown',y.Item=h,y.defaultProps={mode:"dialog"},m.exports=y},320,[29,30,45,47,44,321,322,57,59,304]);
__d(function(g,r,i,a,m,e,d){'use strict';m.exports=r(d[0])},321,[304]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),l=n(r(d[2])),s=n(r(d[3])),o=n(r(d[4])),c=n(r(d[5])),u=n(r(d[6])),p=t(r(d[7]));function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var h=r(d[8]),v=r(d[9]),y=r(d[10]),I=r(d[11]),x=r(d[12]),C=(function(t){(0,o.default)(k,t);var n,v,C=(n=k,v=f(),function(){var t,l=(0,u.default)(n);if(v){var s=(0,u.default)(this).constructor;t=Reflect.construct(l,arguments,s)}else t=l.apply(this,arguments);return(0,c.default)(this,t)});function k(){var t;(0,l.default)(this,k);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(t=C.call.apply(C,[this].concat(s)))._picker=null,t.state={selectedIndex:0,items:[]},t._onChange=function(n){t.props.onChange&&t.props.onChange(n),t.props.onValueChange&&t.props.onValueChange(n.nativeEvent.newValue,n.nativeEvent.newIndex),t._lastNativeValue=n.nativeEvent.newIndex,t.forceUpdate()},t}return(0,s.default)(k,[{key:"render",value:function(){var t=this;return h.createElement(y,{style:this.props.style},h.createElement(p.default,{ref:function(n){t._picker=n},testID:this.props.testID,style:[_.pickerIOS,this.props.itemStyle],items:this.state.items,selectedIndex:this.state.selectedIndex,onChange:this._onChange,accessibilityLabel:this.props.accessibilityLabel}))}},{key:"componentDidUpdate",value:function(){this._picker&&void 0!==this._lastNativeValue&&this._lastNativeValue!==this.state.selectedIndex&&p.Commands.setNativeSelectedIndex(this._picker,this.state.selectedIndex)}}],[{key:"getDerivedStateFromProps",value:function(t){var n=0,l=[];return h.Children.toArray(t.children).filter(function(t){return null!==t}).forEach(function(s,o){s.props.value===t.selectedValue&&(n=o);var c=x(s.props.color);I(null==c||'number'==typeof c,'Unexpected color given for PickerIOSItem color'),l.push({value:s.props.value,label:s.props.label,textColor:c})}),{selectedIndex:n,items:l}}}]),k})(h.Component);C.Item=function(t){return null};var _=v.create({pickerIOS:{height:216}});m.exports=C},322,[12,1,29,30,45,47,44,323,59,62,91,6,71]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),o=r(d[1]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Commands=void 0;var s=o(r(d[2])),u=(t(r(d[3])),r(d[4])),n=(0,s.default)({supportedCommands:['setNativeSelectedIndex']});e.Commands=n;var l=u('RCTPicker');e.default=l},323,[12,1,93,59,181]);
__d(function(g,r,i,a,m,e,d){'use strict';var s=r(d[0]),n=r(d[1]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(r(d[2])),l=n(r(d[3])),t=n(r(d[4])),u=s(r(d[5])),f=n(r(d[6])),c=(r(d[7]),n(r(d[8]))),P=r(d[9]),p=n(r(d[10]));function v(s){var n=(0,u.useState)(!1),o=(0,l.default)(n,2),t=o[0],f=o[1];return[t||s,f]}var b=u.memo(u.forwardRef(function(s,n){var b=s.accessible,y=s.android_disableSound,_=s.android_ripple,O=s.children,S=s.delayLongPress,L=s.disabled,R=s.focusable,h=s.onLongPress,I=s.onPress,M=s.onPressIn,w=s.onPressOut,j=s.pressRetentionOffset,z=s.style,E=s.testOnly_pressed,H=(0,t.default)(s,["accessible","android_disableSound","android_ripple","children","delayLongPress","disabled","focusable","onLongPress","onPress","onPressIn","onPressOut","pressRetentionOffset","style","testOnly_pressed"]),N=(0,u.useRef)(null);(0,u.useImperativeHandle)(n,function(){return N.current});var k=(0,f.default)(_,N),q=v(!0===E),x=(0,l.default)(q,2),A=x[0],B=x[1],C=(0,P.normalizeRect)(s.hitSlop),D=(0,u.useMemo)(function(){return{disabled:L,hitSlop:C,pressRectOffset:j,android_disableSound:y,delayLongPress:S,onLongPress:h,onPress:I,onPressIn:function(s){null!=k&&k.onPressIn(s),B(!0),null!=M&&M(s)},onPressMove:null==k?void 0:k.onPressMove,onPressOut:function(s){null!=k&&k.onPressOut(s),B(!1),null!=w&&w(s)}}},[y,k,S,L,C,h,I,M,w,j,B]),F=(0,c.default)(D);return u.createElement(p.default,(0,o.default)({},H,F,null==k?void 0:k.viewProps,{accessible:!1!==b,focusable:!1!==R,hitSlop:C,ref:N,style:'function'==typeof z?z({pressed:A}):z}),'function'==typeof O?O({pressed:A}):O,null)}));b.displayName='Pressable';var y=b;e.default=y},324,[12,1,16,17,55,59,325,228,326,227,91]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]),o=r(d[1]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n,o){var c=null!=n?n:{},v=c.color,p=c.borderless,f=c.radius,P=!0===p;return(0,s.useMemo)(function(){if('android'===u.Platform.OS&&u.Platform.Version>=21&&(null!=v||P||null!=f)){var n=(0,u.processColor)(v);return(0,t.default)(null==n||'number'==typeof n,'Unexpected color given for Ripple color'),{viewProps:{nativeBackgroundAndroid:{type:'RippleAndroid',color:n,borderless:P,rippleRadius:f}},onPressIn:function(n){var t,u,s=o.current;null!=s&&(l.Commands.setPressed(s,!0),l.Commands.hotspotUpdate(s,null!=(t=n.nativeEvent.locationX)?t:0,null!=(u=n.nativeEvent.locationY)?u:0))},onPressMove:function(n){var t,u,s=o.current;null!=s&&l.Commands.hotspotUpdate(s,null!=(t=n.nativeEvent.locationX)?t:0,null!=(u=n.nativeEvent.locationY)?u:0)},onPressOut:function(n){var t=o.current;null!=t&&l.Commands.setPressed(t,!1)}}}return null},[v,P,f,o])};var t=o(r(d[2])),l=r(d[3]),u=r(d[4]),s=n(r(d[5]))},325,[12,1,6,92,5,59]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n){var f=(0,u.useRef)(null);null==f.current&&(f.current=new t.default(n));var c=f.current;return(0,u.useEffect)(function(){c.configure(n)},[n,c]),(0,u.useEffect)(function(){return function(){c.reset()}},[c]),c.getEventHandlers()};var t=n(r(d[1])),u=r(d[2])},326,[1,225,59]);
__d(function(g,r,i,a,m,e,d){'use strict';m.exports=r(d[0])},327,[304]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),s=t(r(d[1])),f=t(r(d[2])),n=r(d[3]),o=r(d[4]).create({progressView:{height:2}}),u=n.forwardRef(function(t,u){return n.createElement(f.default,(0,s.default)({},t,{style:[o.progressView,t.style],ref:u}))});m.exports=u},328,[1,16,329,59,62]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=(0,t(r(d[1])).default)('RCTProgressView');e.default=u},329,[1,205]);
__d(function(g,r,i,a,m,e,d){var t,n=r(d[0]),f=(r(d[1]),r(d[2]),r(d[3])),u=(r(d[4]),r(d[5]).default);t=f.forwardRef(function(t,o){return f.createElement(u,n({emulateUnlessSupported:!0},t,{ref:o}))}),m.exports=t},330,[16,55,57,59,91,331]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var f=(0,t(r(d[1])).default)('SafeAreaView',{paperComponentName:'RCTSafeAreaView',interfaceOnly:!0});e.default=f},331,[1,205]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=n(r(d[2])),u=n(r(d[3])),f=n(r(d[4])),l=n(r(d[5])),c=n(r(d[6])),s=n(r(d[7])),h=n(r(d[8])),p=t(r(d[9])),v=n(r(d[10])),y=n(r(d[11]));function C(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var R=(function(t){(0,c.default)(V,t);var n,v,R=(n=V,v=C(),function(){var t,o=(0,h.default)(n);if(v){var u=(0,h.default)(this).constructor;t=Reflect.construct(o,arguments,u)}else t=o.apply(this,arguments);return(0,s.default)(this,t)});function V(){var t;(0,f.default)(this,V);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(t=R.call.apply(R,[this].concat(o)))._onChange=function(n){t.props.onChange&&t.props.onChange(n),t.props.onValueChange&&t.props.onValueChange(n.nativeEvent.value)},t}return(0,l.default)(V,[{key:"render",value:function(){var t=this.props,n=t.forwardedRef,f=(t.onValueChange,t.style),l=(0,u.default)(t,["forwardedRef","onValueChange","style"]);return p.createElement(y.default,(0,o.default)({},l,{ref:n,style:[w.segmentedControl,f],onChange:this._onChange}))}}]),V})(p.Component);R.defaultProps={values:[],enabled:!0};var w=v.default.create({segmentedControl:{height:28}}),V=p.forwardRef(function(t,n){return p.createElement(R,(0,o.default)({},t,{forwardedRef:n}))});m.exports=V},332,[12,1,16,55,29,30,45,47,44,59,62,333]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=(0,t(r(d[1])).default)('RCTSegmentedControl');e.default=u},333,[1,205]);
__d(function(g,r,i,a,m,e,d){'use strict';var n,l=r(d[0]),u=l(r(d[1])),t=l(r(d[2])),o=l(r(d[3])),s=(r(d[4]),r(d[5])),v=r(d[6]),f=s.forwardRef(function(l,f){var c=v.compose(n.slider,l.style),p=l.disabled,V=void 0!==p&&p,h=l.value,C=void 0===h?.5:h,S=l.minimumValue,b=void 0===S?0:S,x=l.maximumValue,R=void 0===x?1:x,E=l.step,y=void 0===E?0:E,_=l.onValueChange,q=l.onSlidingComplete,w=(0,t.default)(l,["disabled","value","minimumValue","maximumValue","step","onValueChange","onSlidingComplete"]),T=_?function(n){_(n.nativeEvent.value)}:null,j=T,k=q?function(n){q(n.nativeEvent.value)}:null;return s.createElement(o.default,(0,u.default)({},w,{enabled:!V,disabled:V,maximumValue:R,minimumValue:b,onChange:j,onResponderTerminationRequest:function(){return!1},onSlidingComplete:k,onStartShouldSetResponder:function(){return!0},onValueChange:T,ref:f,step:y,style:c,value:C}))});n=v.create({slider:{height:40}}),m.exports=f},334,[1,16,55,335,57,59,62]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=(0,t(r(d[1])).default)('Slider',{interfaceOnly:!0,paperComponentName:'RCTSlider'});e.default=l},335,[1,205]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=n(r(d[2])),l=n(r(d[3])),u=n(r(d[4])),s=n(r(d[5])),c=n(r(d[6])),h=n(r(d[7])),f=n(r(d[8])),v=n(r(d[9])),p=t(r(d[10])),C=n(r(d[11])),R=t(r(d[12])),y=t(r(d[13]));function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var S=(function(t){(0,c.default)(V,t);var n,S,k=(n=V,S=b(),function(){var t,o=(0,f.default)(n);if(S){var l=(0,f.default)(this).constructor;t=Reflect.construct(o,arguments,l)}else t=o.apply(this,arguments);return(0,h.default)(this,t)});function V(){var t;(0,u.default)(this,V);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(t=k.call.apply(k,[this].concat(o)))._handleChange=function(n){null!=t.props.onChange&&t.props.onChange(n),null!=t.props.onValueChange&&t.props.onValueChange(n.nativeEvent.value),t._lastNativeValue=n.nativeEvent.value,t.forceUpdate()},t._handleSwitchNativeComponentRef=function(n){t._nativeSwitchRef=n},t}return(0,s.default)(V,[{key:"render",value:function(){var t,n=this.props,u=n.disabled,s=n.ios_backgroundColor,c=(n.onChange,n.onValueChange,n.style),h=n.thumbColor,f=n.trackColor,b=n.value,S=(0,l.default)(n,["disabled","ios_backgroundColor","onChange","onValueChange","style","thumbColor","trackColor","value"]),k=null==f?void 0:f.false,V=null==f?void 0:f.true;if('android'===v.default.OS){var N,T={enabled:!0!==u,on:!0===b,style:c,thumbTintColor:h,trackColorForFalse:k,trackColorForTrue:V,trackTintColor:!0===b?V:k};return p.createElement(R.default,(0,o.default)({},S,T,{accessibilityRole:null!=(N=S.accessibilityRole)?N:'switch',onChange:this._handleChange,onResponderTerminationRequest:_,onStartShouldSetResponder:w,ref:this._handleSwitchNativeComponentRef}))}var E={disabled:u,onTintColor:V,style:C.default.compose({height:31,width:51},C.default.compose(c,null==s?null:{backgroundColor:s,borderRadius:16})),thumbTintColor:h,tintColor:k,value:!0===b};return p.createElement(y.default,(0,o.default)({},S,E,{accessibilityRole:null!=(t=S.accessibilityRole)?t:'switch',onChange:this._handleChange,onResponderTerminationRequest:_,onStartShouldSetResponder:w,ref:this._handleSwitchNativeComponentRef}))}},{key:"componentDidUpdate",value:function(){var t={},n=!0===this.props.value;this._lastNativeValue!==n&&(t.value=n),Object.keys(t).length>0&&this._nativeSwitchRef&&this._nativeSwitchRef.setNativeProps&&('android'===v.default.OS?R.Commands.setNativeValue(this._nativeSwitchRef,t.value):y.Commands.setValue(this._nativeSwitchRef,t.value))}}]),V})(p.Component),_=function(){return!1},w=function(){return!0};m.exports=S},336,[12,1,16,55,29,30,45,47,44,57,59,62,337,338]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),u=r(d[1]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Commands=void 0;u(r(d[2]));var n=t(r(d[3])),o=t(r(d[4])),l=(0,n.default)({supportedCommands:['setNativeValue']});e.Commands=l;var s=(0,o.default)('AndroidSwitch',{interfaceOnly:!0});e.default=s},337,[1,12,59,93,205]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),o=r(d[1]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Commands=void 0;o(r(d[2]));var u=t(r(d[3])),l=(0,t(r(d[4])).default)({supportedCommands:['setValue']});e.Commands=l;var n=(0,u.default)('Switch',{paperComponentName:'RCTSwitch',excludedPlatform:'android'});e.default=n},338,[1,12,59,205,93]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=t(r(d[1])),l=t(r(d[2])),u=t(r(d[3])),o=t(r(d[4])),c=t(r(d[5])),s=t(r(d[6])),f=(t(r(d[7])),t(r(d[8])));function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}r(d[9]);var y=r(d[10]);r(d[11]),r(d[12]);function k(t){return{backgroundColor:null!=t.backgroundColor?{value:t.backgroundColor,animated:t.animated}:null,barStyle:null!=t.barStyle?{value:t.barStyle,animated:t.animated}:null,translucent:t.translucent,hidden:null!=t.hidden?{value:t.hidden,animated:t.animated,transition:t.showHideTransition}:null,networkActivityIndicatorVisible:t.networkActivityIndicatorVisible}}var v=(function(t){(0,u.default)(h,t);var s,y,v=(s=h,y=p(),function(){var t,n=(0,c.default)(s);if(y){var l=(0,c.default)(this).constructor;t=Reflect.construct(n,arguments,l)}else t=n.apply(this,arguments);return(0,o.default)(this,t)});function h(){var t;(0,n.default)(this,h);for(var l=arguments.length,u=new Array(l),o=0;o<l;o++)u[o]=arguments[o];return(t=v.call.apply(v,[this].concat(u)))._stackEntry=null,t}return(0,l.default)(h,[{key:"componentDidMount",value:function(){this._stackEntry=h.pushStackEntry(this.props)}},{key:"componentWillUnmount",value:function(){h.popStackEntry(this._stackEntry)}},{key:"componentDidUpdate",value:function(){this._stackEntry=h.replaceStackEntry(this._stackEntry,this.props)}},{key:"render",value:function(){return null}}],[{key:"setHidden",value:function(t,n){n=n||'none',h._defaultProps.hidden.value=t,f.default.setHidden(t,n)}},{key:"setBarStyle",value:function(t,n){n=n||!1,h._defaultProps.barStyle.value=t,f.default.setStyle(t,n)}},{key:"setNetworkActivityIndicatorVisible",value:function(t){h._defaultProps.networkActivityIndicatorVisible=t,f.default.setNetworkActivityIndicatorVisible(t)}},{key:"setBackgroundColor",value:function(t,n){console.warn('`setBackgroundColor` is only available on Android')}},{key:"setTranslucent",value:function(t){console.warn('`setTranslucent` is only available on Android')}},{key:"pushStackEntry",value:function(t){var n=k(t);return h._propsStack.push(n),h._updatePropsStack(),n}},{key:"popStackEntry",value:function(t){var n=h._propsStack.indexOf(t);-1!==n&&h._propsStack.splice(n,1),h._updatePropsStack()}},{key:"replaceStackEntry",value:function(t,n){var l=k(n),u=h._propsStack.indexOf(t);return-1!==u&&(h._propsStack[u]=l),h._updatePropsStack(),l}}]),h})(y.Component);v._propsStack=[],v._defaultProps=k({animated:!1,showHideTransition:'fade',backgroundColor:'black',barStyle:'default',translucent:!1,hidden:!1,networkActivityIndicatorVisible:!1}),v._updateImmediate=null,v._currentValues=null,v.currentHeight=null,v.defaultProps={animated:!1,showHideTransition:'fade'},v._updatePropsStack=function(){clearImmediate(v._updateImmediate),v._updateImmediate=setImmediate(function(){var t,n,l=v._currentValues,u=(t=v._propsStack,n=v._defaultProps,t.reduce(function(t,n){for(var l in n)null!=n[l]&&(t[l]=n[l]);return t},(0,s.default)({},n)));l&&l.barStyle.value===u.barStyle.value||f.default.setStyle(u.barStyle.value,u.barStyle.animated||!1),l&&l.hidden.value===u.hidden.value||f.default.setHidden(u.hidden.value,u.hidden.animated?u.hidden.transition:'none'),l&&l.networkActivityIndicatorVisible===u.networkActivityIndicatorVisible||f.default.setNetworkActivityIndicatorVisible(u.networkActivityIndicatorVisible),v._currentValues=u})},m.exports=v},339,[1,29,30,45,47,44,16,340,341,57,59,6,71]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])).getEnforcing('StatusBarManager');e.default=u},340,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])).getEnforcing('StatusBarManager');e.default=u},341,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=r(d[2]);function u(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,u)}return o}function l(t){for(var o=1;o<arguments.length;o++){var l=null!=arguments[o]?arguments[o]:{};o%2?u(Object(l),!0).forEach(function(o){n(t,o,l[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):u(Object(l)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(l,n))})}return t}var c,s,f,p,v,y=r(d[3]),b=(r(d[4]),r(d[5])),C=(r(d[6]),r(d[7])),S=(r(d[8]),r(d[9])),O=r(d[10]),R=r(d[11]),h=(r(d[12]),r(d[13])),I=r(d[14]),j=b.useEffect,E=b.useRef,T=b.useState;s=r(d[15]).default,f=r(d[15]).Commands,p=r(d[16]).default,v=r(d[16]).Commands;var F=function(){return!0};function x(n){var u,y,C=E(null),x=null==n.selection?null:{start:n.selection.start,end:null!=(u=n.selection.end)?u:n.selection.start},w=T(0),D=o(w,2),L=D[0],A=D[1],B=T(n.value),V=o(B,2),k=V[0],z=V[1],_=T({selection:x,mostRecentEventCount:L}),N=o(_,2),q=N[0],G=N[1],H=q.selection;q.mostRecentEventCount<L&&(x=null),y=c||(n.multiline?v:f);var J='string'==typeof n.value?n.value:'string'==typeof n.defaultValue?n.defaultValue:'';function K(){null!=C.current&&y.setTextAndSelection(C.current,L,'',0,0)}function M(){return O.currentlyFocusedInput()===C.current}function Q(){return C.current}j(function(){var t,o,u,l,c={};(k!==n.value&&'string'==typeof n.value&&(c.text=n.value,z(n.value)),x&&H&&(H.start!==x.start||H.end!==x.end)&&(c.selection=x,G({selection:x,mostRecentEventCount:L})),0!==Object.keys(c).length)&&(null!=C.current&&y.setTextAndSelection(C.current,L,J,null!=(t=null==(o=x)?void 0:o.start)?t:-1,null!=(u=null==(l=x)?void 0:l.end)?u:-1))},[L,C,n.value,n.defaultValue,k,x,H,J,y]),j(function(){var t=C.current;if(null!=t)return O.registerInput(t),function(){O.unregisterInput(t)}},[C]),j(function(){return function(){M()&&h(C.current).blur()}},[C]);var U,W=I({getForwardedRef:function(){return n.forwardedRef},setLocalRef:function(t){C.current=t,t&&(t.clear=K,t.isFocused=M,t.getNativeRef=Q)}}),X=l({},null),Y=n.multiline?p:s,Z=n.multiline?[P.multilineInput,n.style]:n.style;return X.rejectResponderTermination=n.rejectResponderTermination,U=b.createElement(Y,t({ref:W},n,{dataDetectorTypes:n.dataDetectorTypes,mostRecentEventCount:L,onBlur:function(t){O.blurInput(C.current),n.onBlur&&n.onBlur(t)},onChange:function(t){var o=t.nativeEvent.text;n.onChange&&n.onChange(t),n.onChangeText&&n.onChangeText(o),null!=C.current&&(z(o),A(t.nativeEvent.eventCount))},onContentSizeChange:n.onContentSizeChange,onFocus:function(t){O.focusInput(C.current),n.onFocus&&n.onFocus(t)},onScroll:function(t){n.onScroll&&n.onScroll(t)},onSelectionChange:function(t){n.onSelectionChange&&n.onSelectionChange(t),null!=C.current&&G({selection:t.nativeEvent.selection,mostRecentEventCount:L})},onSelectionChangeShouldSetResponder:F,selection:x,style:Z,text:J})),b.createElement(S.Provider,{value:!0},b.createElement(R,t({onLayout:n.onLayout,onPress:function(t){(n.editable||void 0===n.editable)&&h(C.current).focus()},accessible:n.accessible,accessibilityLabel:n.accessibilityLabel,accessibilityRole:n.accessibilityRole,accessibilityState:n.accessibilityState,nativeID:n.nativeID,testID:n.testID},X),U))}var w=b.forwardRef(function(n,o){return b.createElement(x,t({},n,{forwardedRef:o}))});w.defaultProps={allowFontScaling:!0,rejectResponderTermination:!0,underlineColorAndroid:'transparent'},w.propTypes=y,w.State={currentlyFocusedInput:O.currentlyFocusedInput,currentlyFocusedField:O.currentlyFocusedField,focusTextInput:O.focusTextInput,blurTextInput:O.blurTextInput};var P=C.create({multilineInput:{paddingTop:5}});m.exports=w},342,[16,54,17,343,57,59,94,62,207,203,179,346,6,223,262,195,347]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]);function o(n,o){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);o&&(l=l.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,l)}return t}function t(t){for(var l=1;l<arguments.length;l++){var s=null!=arguments[l]?arguments[l]:{};l%2?o(Object(s),!0).forEach(function(o){n(t,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}var l=r(d[1]),s=r(d[2]),c=r(d[3]),u=r(d[4]),b=['phoneNumber','link','address','calendarEvent','none','all'];m.exports=t(t({},s),{},{autoCapitalize:c.oneOf(['none','sentences','words','characters']),autoCompleteType:c.oneOf(['cc-csc','cc-exp','cc-exp-month','cc-exp-year','cc-number','email','name','password','postal-code','street-address','tel','username','off']),autoCorrect:c.bool,spellCheck:c.bool,autoFocus:c.bool,allowFontScaling:c.bool,maxFontSizeMultiplier:c.number,editable:c.bool,keyboardType:c.oneOf(['default','email-address','numeric','phone-pad','number-pad','ascii-capable','numbers-and-punctuation','url','name-phone-pad','decimal-pad','twitter','web-search','ascii-capable-number-pad','visible-password']),keyboardAppearance:c.oneOf(['default','light','dark']),returnKeyType:c.oneOf(['done','go','next','search','send','none','previous','default','emergency-call','google','join','route','yahoo']),returnKeyLabel:c.string,maxLength:c.number,numberOfLines:c.number,disableFullscreenUI:c.bool,enablesReturnKeyAutomatically:c.bool,multiline:c.bool,textBreakStrategy:c.oneOf(['simple','highQuality','balanced']),onBlur:c.func,onFocus:c.func,onChange:c.func,onChangeText:c.func,onContentSizeChange:c.func,onTextInput:c.func,onEndEditing:c.func,onSelectionChange:c.func,onSubmitEditing:c.func,onKeyPress:c.func,onLayout:c.func,onScroll:c.func,placeholder:c.string,placeholderTextColor:l,scrollEnabled:c.bool,secureTextEntry:c.bool,selectionColor:l,selection:c.shape({start:c.number.isRequired,end:c.number}),value:c.string,defaultValue:c.string,clearButtonMode:c.oneOf(['never','while-editing','unless-editing','always']),clearTextOnFocus:c.bool,selectTextOnFocus:c.bool,blurOnSubmit:c.bool,style:u.propTypes.style,underlineColorAndroid:l,inlineImageLeft:c.string,inlineImagePadding:c.number,rejectResponderTermination:c.bool,dataDetectorTypes:c.oneOfType([c.oneOf(b),c.arrayOf(c.oneOf(b))]),caretHidden:c.bool,contextMenuHidden:c.bool,inputAccessoryViewID:c.string,textContentType:c.oneOf(['none','URL','addressCity','addressCityAndState','addressState','countryName','creditCardNumber','emailAddress','familyName','fullStreetAddress','givenName','jobTitle','location','middleName','name','namePrefix','nameSuffix','nickname','organizationName','postalCode','streetAddressLine1','streetAddressLine2','sublocality','telephoneNumber','username','password','newPassword','oneTimeCode']),showSoftInputOnFocus:c.bool})},343,[54,68,344,73,207]);
__d(function(g,r,i,a,m,e,d){'use strict';var o=r(d[0]),n=r(d[1]),s=r(d[2]),t=r(d[3]),c=r(d[4]).DeprecatedAccessibilityRoles,l=n(s);m.exports={accessible:t.bool,accessibilityLabel:t.node,accessibilityHint:t.string,accessibilityActions:t.arrayOf(t.string),accessibilityIgnoresInvertColors:t.bool,accessibilityRole:t.oneOf(c),accessibilityState:t.object,accessibilityValue:t.object,accessibilityLiveRegion:t.oneOf(['none','polite','assertive']),importantForAccessibility:t.oneOf(['auto','yes','no','no-hide-descendants']),accessibilityViewIsModal:t.bool,accessibilityElementsHidden:t.bool,onAccessibilityAction:t.func,onAccessibilityTap:t.func,onMagicTap:t.func,testID:t.string,nativeID:t.string,onResponderGrant:t.func,onResponderMove:t.func,onResponderReject:t.func,onResponderRelease:t.func,onResponderTerminate:t.func,onResponderTerminationRequest:t.func,onStartShouldSetResponder:t.func,onStartShouldSetResponderCapture:t.func,onMoveShouldSetResponder:t.func,onMoveShouldSetResponderCapture:t.func,hitSlop:o,onLayout:t.func,pointerEvents:t.oneOf(['box-none','none','box-only','auto']),style:l,removeClippedSubviews:t.bool,renderToHardwareTextureAndroid:t.bool,shouldRasterizeIOS:t.bool,collapsable:t.bool,needsOffscreenAlphaCompositing:t.bool}},344,[209,210,85,73,345]);
__d(function(g,r,i,a,m,e,d){'use strict';m.exports={DeprecatedAccessibilityRoles:['none','button','link','search','image','keyboardkey','text','adjustable','imagebutton','header','summary','alert','checkbox','combobox','menu','menubar','menuitem','progressbar','radio','radiogroup','scrollbar','spinbutton','switch','tab','tablist','timer','toolbar']}},345,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=n(r(d[2])),s=n(r(d[3])),c=n(r(d[4])),l=n(r(d[5])),u=n(r(d[6])),p=n(r(d[7])),f=n(r(d[8])),y=n(r(d[9])),b=(r(d[10]),n(r(d[11]))),h=n(r(d[12])),v=(n(r(d[13])),t(r(d[14])));function P(t,n){var o;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=O(t))||n&&t&&"number"==typeof t.length){o&&(t=o);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(o=t[Symbol.iterator]()).next.bind(o)}function O(t,n){if(t){if("string"==typeof t)return j(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?j(t,n):void 0}}function j(t,n){(null==n||n>t.length)&&(n=t.length);for(var o=0,s=new Array(n);o<n;o++)s[o]=t[o];return s}function S(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,s)}return o}function w(t){for(var n=1;n<arguments.length;n++){var s=null!=arguments[n]?arguments[n]:{};n%2?S(Object(s),!0).forEach(function(n){(0,o.default)(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):S(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function D(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var I=['accessibilityActions','accessibilityElementsHidden','accessibilityHint','accessibilityIgnoresInvertColors','accessibilityLabel','accessibilityLiveRegion','accessibilityRole','accessibilityState','accessibilityValue','accessibilityViewIsModal','hitSlop','importantForAccessibility','nativeID','onAccessibilityAction','onBlur','onFocus','onLayout','testID'],A=(function(t){(0,u.default)(j,t);var n,o,O=(n=j,o=D(),function(){var t,s=(0,f.default)(n);if(o){var c=(0,f.default)(this).constructor;t=Reflect.construct(s,arguments,c)}else t=s.apply(this,arguments);return(0,p.default)(this,t)});function j(){var t;(0,c.default)(this,j);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=O.call.apply(O,[this].concat(o))).state={pressability:new y.default(R(t.props))},t}return(0,l.default)(j,[{key:"render",value:function(){for(var t,n=v.Children.only(this.props.children),o=[n.props.children],c=this.state.pressability.getEventHandlers(),l=(c.onBlur,c.onFocus,w(w({},(0,s.default)(c,["onBlur","onFocus"])),{},{accessible:!1!==this.props.accessible,focusable:!1!==this.props.focusable&&void 0!==this.props.onPress})),u=P(I);!(t=u()).done;){var p=t.value;void 0!==this.props[p]&&(l[p]=this.props[p])}return v.cloneElement.apply(v,[n,l].concat(o))}},{key:"componentDidMount",value:function(){var t=this;h.default.isTV&&(this._tvTouchable=new b.default(this,{getDisabled:function(){return!0===t.props.disabled},onBlur:function(n){null!=t.props.onBlur&&t.props.onBlur(n)},onFocus:function(n){null!=t.props.onFocus&&t.props.onFocus(n)},onPress:function(n){null!=t.props.onPress&&t.props.onPress(n)}}))}},{key:"componentDidUpdate",value:function(){this.state.pressability.configure(R(this.props))}},{key:"componentWillUnmount",value:function(){h.default.isTV&&null!=this._tvTouchable&&this._tvTouchable.destroy(),this.state.pressability.reset()}}]),j})(v.Component);function R(t){return{cancelable:!t.rejectResponderTermination,disabled:t.disabled,hitSlop:t.hitSlop,delayLongPress:t.delayLongPress,delayPressIn:t.delayPressIn,delayPressOut:t.delayPressOut,minPressDuration:0,pressRectOffset:t.pressRetentionOffset,android_disableSound:t.touchSoundDisabled,onBlur:t.onBlur,onFocus:t.onFocus,onLongPress:t.onLongPress,onPress:t.onPress,onPressIn:t.onPressIn,onPressOut:t.onPressOut}}m.exports=A},346,[12,1,54,55,29,30,45,47,44,225,228,229,57,91,59]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),u=r(d[1]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Commands=void 0;var l=u(r(d[2])),n=u(r(d[3])),o=(t(r(d[4])),(0,n.default)({supportedCommands:['focus','blur','setTextAndSelection']}));e.Commands=o;var s=(0,l.default)('RCTMultilineTextInputView');e.default=s},347,[12,1,181,93,59]);
__d(function(g,r,i,a,m,e,d){'use strict';var s=r(d[0]),t=r(d[1]),o=t(r(d[2])),n=t(r(d[3])),l=t(r(d[4])),u=t(r(d[5])),p=t(r(d[6])),c=t(r(d[7])),h=t(r(d[8])),y=t(r(d[9])),f=(r(d[10]),t(r(d[11]))),b=t(r(d[12])),_=t(r(d[13])),P=t(r(d[14])),v=s(r(d[15]));function T(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(s){return!1}}var F=(function(s){(0,p.default)(x,s);var t,F,S=(t=x,F=T(),function(){var s,o=(0,h.default)(t);if(F){var n=(0,h.default)(this).constructor;s=Reflect.construct(o,arguments,n)}else s=o.apply(this,arguments);return(0,c.default)(this,s)});function x(){var s;(0,l.default)(this,x);for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return(s=S.call.apply(S,[this].concat(o)))._isMounted=!1,s.state={pressability:new y.default(s._createPressabilityConfig()),extraStyles:!0===s.props.testOnly_pressed?s._createExtraStyles():null},s}return(0,u.default)(x,[{key:"_createPressabilityConfig",value:function(){var s=this;return{cancelable:!this.props.rejectResponderTermination,disabled:this.props.disabled,hitSlop:this.props.hitSlop,delayLongPress:this.props.delayLongPress,delayPressIn:this.props.delayPressIn,delayPressOut:this.props.delayPressOut,minPressDuration:0,pressRectOffset:this.props.pressRetentionOffset,android_disableSound:this.props.touchSoundDisabled,onBlur:function(t){_.default.isTV&&s._hideUnderlay(),null!=s.props.onBlur&&s.props.onBlur(t)},onFocus:function(t){_.default.isTV&&s._showUnderlay(),null!=s.props.onFocus&&s.props.onFocus(t)},onLongPress:function(t){null!=s.props.onLongPress&&s.props.onLongPress(t)},onPress:function(t){var o;(null!=s._hideTimeout&&clearTimeout(s._hideTimeout),_.default.isTV)||(s._showUnderlay(),s._hideTimeout=setTimeout(function(){s._hideUnderlay()},null!=(o=s.props.delayPressOut)?o:0));null!=s.props.onPress&&s.props.onPress(t)},onPressIn:function(t){null!=s._hideTimeout&&(clearTimeout(s._hideTimeout),s._hideTimeout=null),s._showUnderlay(),null!=s.props.onPressIn&&s.props.onPressIn(t)},onPressOut:function(t){null==s._hideTimeout&&s._hideUnderlay(),null!=s.props.onPressOut&&s.props.onPressOut(t)}}}},{key:"_createExtraStyles",value:function(){var s;return{child:{opacity:null!=(s=this.props.activeOpacity)?s:.85},underlay:{backgroundColor:void 0===this.props.underlayColor?'black':this.props.underlayColor}}}},{key:"_showUnderlay",value:function(){this._isMounted&&this._hasPressHandler()&&(this.setState({extraStyles:this._createExtraStyles()}),null!=this.props.onShowUnderlay&&this.props.onShowUnderlay())}},{key:"_hideUnderlay",value:function(){null!=this._hideTimeout&&(clearTimeout(this._hideTimeout),this._hideTimeout=null),!0!==this.props.testOnly_pressed&&this._hasPressHandler()&&(this.setState({extraStyles:null}),null!=this.props.onHideUnderlay&&this.props.onHideUnderlay())}},{key:"_hasPressHandler",value:function(){return null!=this.props.onPress||null!=this.props.onPressIn||null!=this.props.onPressOut||null!=this.props.onLongPress}},{key:"render",value:function(){var s,t,l=v.Children.only(this.props.children),u=this.state.pressability.getEventHandlers(),p=(u.onBlur,u.onFocus,(0,n.default)(u,["onBlur","onFocus"]));return v.createElement(P.default,(0,o.default)({accessible:!1!==this.props.accessible,accessibilityLabel:this.props.accessibilityLabel,accessibilityHint:this.props.accessibilityHint,accessibilityRole:this.props.accessibilityRole,accessibilityState:this.props.accessibilityState,accessibilityValue:this.props.accessibilityValue,accessibilityActions:this.props.accessibilityActions,onAccessibilityAction:this.props.onAccessibilityAction,importantForAccessibility:this.props.importantForAccessibility,accessibilityLiveRegion:this.props.accessibilityLiveRegion,accessibilityViewIsModal:this.props.accessibilityViewIsModal,accessibilityElementsHidden:this.props.accessibilityElementsHidden,style:f.default.compose(this.props.style,null==(s=this.state.extraStyles)?void 0:s.underlay),onLayout:this.props.onLayout,hitSlop:this.props.hitSlop,hasTVPreferredFocus:this.props.hasTVPreferredFocus,nextFocusDown:this.props.nextFocusDown,nextFocusForward:this.props.nextFocusForward,nextFocusLeft:this.props.nextFocusLeft,nextFocusRight:this.props.nextFocusRight,nextFocusUp:this.props.nextFocusUp,focusable:!1!==this.props.focusable&&void 0!==this.props.onPress,nativeID:this.props.nativeID,testID:this.props.testID,ref:this.props.hostRef},p),v.cloneElement(l,{style:f.default.compose(l.props.style,null==(t=this.state.extraStyles)?void 0:t.child)}),null)}},{key:"componentDidMount",value:function(){var s=this;this._isMounted=!0,_.default.isTV&&(this._tvTouchable=new b.default(this,{getDisabled:function(){return!0===s.props.disabled},onBlur:function(t){null!=s.props.onBlur&&s.props.onBlur(t)},onFocus:function(t){null!=s.props.onFocus&&s.props.onFocus(t)},onPress:function(t){null!=s.props.onPress&&s.props.onPress(t)}}))}},{key:"componentDidUpdate",value:function(s,t){this.state.pressability.configure(this._createPressabilityConfig())}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,null!=this._hideTimeout&&clearTimeout(this._hideTimeout),_.default.isTV&&null!=this._tvTouchable&&this._tvTouchable.destroy(),this.state.pressability.reset()}}]),x})(v.Component);m.exports=v.forwardRef(function(s,t){return v.createElement(F,(0,o.default)({},s,{hostRef:t}))})},348,[12,1,16,55,29,30,45,47,44,225,228,62,229,57,91,59]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),o=t(r(d[1])),n=t(r(d[2])),c=t(r(d[3]));function s(t,o){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);o&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,c)}return n}function u(t){for(var n=1;n<arguments.length;n++){var c=null!=arguments[n]?arguments[n]:{};n%2?s(Object(c),!0).forEach(function(n){(0,o.default)(t,n,c[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):s(Object(c)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(c,o))})}return t}var l=r(d[4]),p=r(d[5]),f={showActionSheetWithOptions:function(t,o){l('object'==typeof t&&null!==t,'Options must be a valid object'),l('function'==typeof o,'Must provide a valid callback'),l(c.default,"ActionSheetManager does't exist");var s=t.tintColor,f=t.destructiveButtonIndex,b=(0,n.default)(t,["tintColor","destructiveButtonIndex"]),O=null;Array.isArray(f)?O=f:'number'==typeof f&&(O=[f]);var h=p(s);l(null==h||'number'==typeof h,'Unexpected color given for ActionSheetIOS.showActionSheetWithOptions tintColor'),c.default.showActionSheetWithOptions(u(u({},b),{},{tintColor:h,destructiveButtonIndices:O}),o)},showShareActionSheetWithOptions:function(t,o,n){l('object'==typeof t&&null!==t,'Options must be a valid object'),l('function'==typeof o,'Must provide a valid failureCallback'),l('function'==typeof n,'Must provide a valid successCallback'),l(c.default,"ActionSheetManager does't exist"),c.default.showShareActionSheetWithOptions(u(u({},t),{},{tintColor:p(t.tintColor)}),o,n)}};m.exports=f},349,[1,54,55,350,6,71]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])).get('ActionSheetManager');e.default=u},350,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]),t=n(r(d[1])),l=n(r(d[2])),o=n(r(d[3])),c=n(r(d[4])),u=(r(d[5]),new t.default);o.default&&new l.default(o.default).addListener('appearanceChanged',function(n){var t=n.colorScheme;(0,c.default)('dark'===t||'light'===t||null==t,"Unrecognized color scheme. Did you mean 'dark' or 'light'?"),u.emit('change',{colorScheme:t})});m.exports={getColorScheme:function(){var n=null==o.default?null:o.default.getColorScheme()||null;return(0,c.default)('dark'===n||'light'===n||null==n,"Unrecognized color scheme. Did you mean 'dark' or 'light'?"),n},addChangeListener:function(n){u.addListener('change',n)},removeChangeListener:function(n){u.removeListener('change',n)}}},351,[1,49,145,352,6,353]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])).get('Appearance');e.default=u},352,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';Object.defineProperty(e,"__esModule",{value:!0}),e.isAsyncDebugging=void 0;e.isAsyncDebugging=!1},353,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]),t=n(r(d[1])),o=n(r(d[2])),s=n(r(d[3]));function c(n,t){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),o.push.apply(o,s)}return o}function u(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?c(Object(s),!0).forEach(function(o){(0,t.default)(n,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(s,t))})}return n}var f,l=r(d[4]),p=r(d[5]),y=r(d[6]),b=r(d[7]),h=r(d[8]),k=r(d[9]),O=r(d[10]),v=r(d[11]),C={},w=1,j={},A=new Map,T=new Map,P=function(n){return n()},R=!1,S={setWrapperComponentProvider:function(n){f=n},enableArchitectureIndicator:function(n){R=n},registerConfig:function(n){n.forEach(function(n){n.run?S.registerRunnable(n.appKey,n.run):(k(null!=n.component,"AppRegistry.registerConfig(...): Every config is expected to set either `run` or `component`, but `%s` has neither.",n.appKey),S.registerComponent(n.appKey,n.component,n.section))})},registerComponent:function(n,t,o){var s=v();return C[n]={componentProvider:t,run:function(o){O(P(t,s),o.initialProps,o.rootTag,f&&f(o),o.fabric,R,s,'LogBox'===n)}},o&&(j[n]=C[n]),n},registerRunnable:function(n,t){return C[n]={run:t},n},registerSection:function(n,t){S.registerComponent(n,t,!0)},getAppKeys:function(){return Object.keys(C)},getSectionKeys:function(){return Object.keys(j)},getSections:function(){return u({},j)},getRunnable:function(n){return C[n]},getRegistry:function(){return{sections:S.getSectionKeys(),runnables:u({},C)}},setComponentProviderInstrumentationHook:function(n){P=n},runApplication:function(n,t){if('LogBox'!==n){var o='Running "'+n+'" with '+JSON.stringify(t);h(o),p.addSource('AppRegistry.runApplication'+w++,function(){return o})}k(C[n]&&C[n].run,"\""+n+"\" has not been registered. This can happen if:\n* Metro (the local dev server) is run from the wrong folder. Check if Metro is running, stop it and restart it in the current project.\n* A module failed to load due to an error and `AppRegistry.registerComponent` wasn't called."),b.setActiveScene({name:n}),C[n].run(t)},unmountApplicationComponentAtRootTag:function(n){y.unmountComponentAtNodeAndRemoveContainer(n)},registerHeadlessTask:function(n,t){this.registerCancellableHeadlessTask(n,t,function(){return function(){}})},registerCancellableHeadlessTask:function(n,t,o){A.has(n)&&console.warn("registerHeadlessTask or registerCancellableHeadlessTask called multiple times for same key '"+n+"'"),A.set(n,t),T.set(n,o)},startHeadlessTask:function(n,t,c){var u=A.get(t);if(!u)return console.warn("No task registered for key "+t),void(o.default&&o.default.notifyTaskFinished(n));u()(c).then(function(){o.default&&o.default.notifyTaskFinished(n)}).catch(function(t){console.error(t),o.default&&t instanceof s.default&&o.default.notifyTaskRetry(n).then(function(t){t||o.default.notifyTaskFinished(n)})})},cancelHeadlessTask:function(n,t){var o=T.get(t);if(!o)throw new Error("No task canceller registered for key '"+t+"'");o()()}};l.registerCallableModule('AppRegistry',S),S.registerComponent('LogBox',function(){return function(){return null}}),m.exports=S},354,[1,54,355,356,23,357,94,361,142,6,362,141]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=t(r(d[1])).get('HeadlessJsTaskSupport');e.default=s},355,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])),n=t(r(d[2])),f=t(r(d[3])),c=t(r(d[4]));function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var l=(function(t){(0,n.default)(v,t);var l,s,p=(l=v,s=o(),function(){var t,u=(0,c.default)(l);if(s){var n=(0,c.default)(this).constructor;t=Reflect.construct(u,arguments,n)}else t=u.apply(this,arguments);return(0,f.default)(this,t)});function v(){return(0,u.default)(this,v),p.apply(this,arguments)}return v})((0,t(r(d[5])).default)(Error));e.default=l},356,[1,29,45,47,44,103]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=t(r(d[1])),o=t(r(d[2])),u=t(r(d[3])),l=t(r(d[4])),c=t(r(d[5]));function s(t,n){var o;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=f(t))||n&&t&&"number"==typeof t.length){o&&(t=o);var u=0;return function(){return u>=t.length?{done:!0}:{done:!1,value:t[u++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(o=t[Symbol.iterator]()).next.bind(o)}function f(t,n){if(t){if("string"==typeof t)return y(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?y(t,n):void 0}}function y(t,n){(null==n||n>t.length)&&(n=t.length);for(var o=0,u=new Array(n);o<n;o++)u[o]=t[o];return u}var b=r(d[6]);function v(){p.addFileSource('react_hierarchy.txt',function(){return r(d[7])()})}var p=(function(){function t(){(0,o.default)(this,t)}return(0,u.default)(t,null,[{key:"_maybeInit",value:function(){t._subscription||(t._subscription=b.addListener('collectBugExtraData',t.collectExtraData,null),v()),t._redboxSubscription||(t._redboxSubscription=b.addListener('collectRedBoxExtraData',t.collectExtraData,null))}},{key:"addSource",value:function(n,o){return this._addSource(n,o,t._extraSources)}},{key:"addFileSource",value:function(n,o){return this._addSource(n,o,t._fileSources)}},{key:"_addSource",value:function(n,o,u){return t._maybeInit(),u.has(n)&&console.warn("BugReporting.add* called multiple times for same key '"+n+"'"),u.set(n,o),{remove:function(){u.delete(n)}}}},{key:"collectExtraData",value:function(){for(var o,u={},f=s(t._extraSources);!(o=f()).done;){var y=o.value,b=(0,n.default)(y,2),v=b[0],p=b[1];u[v]=p()}for(var S,x={},_=s(t._fileSources);!(S=_()).done;){var h=S.value,E=(0,n.default)(h,2),D=E[0],k=E[1];x[D]=k()}return null!=l.default&&null!=l.default.setExtraData&&l.default.setExtraData(u,x),null!=c.default&&null!=c.default.setExtraData&&c.default.setExtraData(u,'From BugReporting.js'),{extras:u,files:x}}}]),t})();p._extraSources=new Map,p._fileSources=new Map,p._subscription=null,p._redboxSubscription=null,m.exports=p},357,[1,17,29,30,358,359,41,360]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])).get('BugReporting');e.default=u},358,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])).get('RedBox');e.default=u},359,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';m.exports=function(){try{return"React tree dumps have been temporarily disabled while React is upgraded to Fiber."}catch(t){return'Failed to dump react tree: '+t}}},360,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=[],t={name:'default'},c={setActiveScene:function(c){t=c,n.forEach(function(n){return n(t)})},getActiveScene:function(){return t},addActiveSceneChangedListener:function(t){return n.push(t),{remove:function(){n=n.filter(function(n){return t!==n})}}}};m.exports=c},361,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=t(r(d[1])),o=t(r(d[2])),c=t(r(d[3])),l=r(d[4]),p=r(d[5]),u=r(d[6]);r(d[7]),m.exports=function(t,s,f,_,v,T,x,E){u(f,'Expect to have a valid rootTag, instead got ',f);var h=p.createElement(c.default.Provider,{value:null!=x?x:o.default},p.createElement(l,{rootTag:f,fabric:v,showArchitectureIndicator:T,WrapperComponent:_,internal_excludeLogBox:E},p.createElement(t,(0,n.default)({},s,{rootTag:f}))));o.default.startTimespan('renderApplication_React_render'),v?r(d[8]).render(h,f):r(d[9]).render(h,f),o.default.stopTimespan('renderApplication_React_render')}},362,[1,16,140,363,316,59,6,364,365,94]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),c=r(d[1])(r(d[2])),n=t(r(d[3])),o=c.createContext(n.default);m.exports=o},363,[1,12,59,140]);
__d(function(g,r,i,a,m,e,d){'use strict';var n,t=r(d[0]),o=r(d[1]);function v(){}if(t.isTV){var u=new o,f=new Set;u.enable(this,function(t,o){if(o&&'menu'===o.eventType){for(var v=!0,u=Array.from(f.values()).reverse(),s=0;s<u.length;++s)if(u[s]()){v=!1;break}v&&n.exitApp()}}),n={exitApp:v,addEventListener:function(t,o){return f.add(o),{remove:function(){return n.removeEventListener(t,o)}}},removeEventListener:function(n,t){f.delete(t)}}}else n={exitApp:v,addEventListener:function(n,t){return{remove:v}},removeEventListener:function(n,t){}};m.exports=n},364,[57,217]);
__d(function(g,r,i,a,m,e,d){'use strict';var t,s=r(d[0]);t=r(d[1]),g.RN$Bridgeless?g.RN$stopSurface=t.stopSurface:s.BatchedBridge.registerCallableModule('ReactFabric',t),m.exports=t},365,[176,366]);
__d(function(e,n,t,r,i,l,a){"use strict";var o=n(a[0]);n(a[1]);var u=n(a[2]),s=n(a[3]),c=n(a[4]);function f(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function d(e,n,t){for(var r=[];e;)r.push(e),e=f(e);for(e=r.length;0<e--;)n(r[e],"captured",t);for(e=0;e<r.length;e++)n(r[e],"bubbled",t)}function p(e,n,t,r,i,l,a,o,u){var s=Array.prototype.slice.call(arguments,3);try{n.apply(t,s)}catch(e){this.onError(e)}}var h=!1,m=null,g=!1,v=null,y={onError:function(e){h=!0,m=e}};function b(e,n,t,r,i,l,a,o,u){h=!1,m=null,p.apply(y,arguments)}function T(e,n,t,r,i,l,a,o,u){if(b.apply(this,arguments),h){if(!h)throw Error("clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.");var s=m;h=!1,m=null,g||(g=!0,v=s)}}var x=null,S=null,E=null;function k(e,n,t){var r=e.type||"unknown-event";e.currentTarget=E(t),T(r,n,void 0,e),e.currentTarget=null}function w(e){var n=e._dispatchListeners,t=e._dispatchInstances;if(Array.isArray(n))throw Error("executeDirectDispatch(...): Invalid `event`.");return e.currentTarget=n?E(t):null,n=n?n(e):null,e.currentTarget=null,e._dispatchListeners=null,e._dispatchInstances=null,n}function P(e,n){var t=e.stateNode;if(!t)return null;var r=x(t);if(!r)return null;t=r[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(t&&"function"!=typeof t)throw Error("Expected `"+n+"` listener to be a function, instead got a value of `"+typeof t+"` type.");return t}function R(e,n){if(null==n)throw Error("accumulateInto(...): Accumulated items must not be null or undefined.");return null==e?n:Array.isArray(e)?Array.isArray(n)?(e.push.apply(e,n),e):(e.push(n),e):Array.isArray(n)?[e].concat(n):[e,n]}function C(e,n,t){Array.isArray(e)?e.forEach(n,t):e&&n.call(t,e)}function _(e,n,t){(n=P(e,t.dispatchConfig.phasedRegistrationNames[n]))&&(t._dispatchListeners=R(t._dispatchListeners,n),t._dispatchInstances=R(t._dispatchInstances,e))}function N(e){e&&e.dispatchConfig.phasedRegistrationNames&&d(e._targetInst,_,e)}function z(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var n=e._targetInst;d(n=n?f(n):null,_,e)}}function I(e){if(e&&e.dispatchConfig.registrationName){var n=e._targetInst;if(n&&e&&e.dispatchConfig.registrationName){var t=P(n,e.dispatchConfig.registrationName);t&&(e._dispatchListeners=R(e._dispatchListeners,t),e._dispatchInstances=R(e._dispatchInstances,n))}}}function A(){return!0}function M(){return!1}function D(e,n,t,r){for(var i in this.dispatchConfig=e,this._targetInst=n,this.nativeEvent=t,e=this.constructor.Interface)e.hasOwnProperty(i)&&((n=e[i])?this[i]=n(t):"target"===i?this.target=r:this[i]=t[i]);return this.isDefaultPrevented=(null!=t.defaultPrevented?t.defaultPrevented:!1===t.returnValue)?A:M,this.isPropagationStopped=M,this}function U(e,n,t,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,n,t,r),i}return new this(e,n,t,r)}function F(e){if(!(e instanceof this))throw Error("Trying to release an event instance into a pool of a different type.");e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Q(e){e.eventPool=[],e.getPooled=U,e.release=F}o(D.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=A)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=A)},persist:function(){this.isPersistent=A},isPersistent:M,destructor:function(){var e,n=this.constructor.Interface;for(e in n)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=M,this._dispatchInstances=this._dispatchListeners=null}}),D.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},D.extend=function(e){function n(){}function t(){return r.apply(this,arguments)}var r=this;n.prototype=r.prototype;var i=new n;return o(i,t.prototype),t.prototype=i,t.prototype.constructor=t,t.Interface=o({},r.Interface,e),t.extend=r.extend,Q(t),t},Q(D);var H=D.extend({touchHistory:function(){return null}});function j(e){return"topTouchStart"===e}function W(e){return"topTouchMove"===e}var O=["topTouchStart"],B=["topTouchMove"],L=["topTouchCancel","topTouchEnd"],V=[],Y={touchBank:V,numberActiveTouches:0,indexOfSingleActiveTouch:-1,mostRecentTimeStamp:0};function q(e){return e.timeStamp||e.timestamp}function X(e){if(null==(e=e.identifier))throw Error("Touch object is missing identifier.");return e}function $(e){var n=X(e),t=V[n];t?(t.touchActive=!0,t.startPageX=e.pageX,t.startPageY=e.pageY,t.startTimeStamp=q(e),t.currentPageX=e.pageX,t.currentPageY=e.pageY,t.currentTimeStamp=q(e),t.previousPageX=e.pageX,t.previousPageY=e.pageY,t.previousTimeStamp=q(e)):(t={touchActive:!0,startPageX:e.pageX,startPageY:e.pageY,startTimeStamp:q(e),currentPageX:e.pageX,currentPageY:e.pageY,currentTimeStamp:q(e),previousPageX:e.pageX,previousPageY:e.pageY,previousTimeStamp:q(e)},V[n]=t),Y.mostRecentTimeStamp=q(e)}function K(e){var n=V[X(e)];n&&(n.touchActive=!0,n.previousPageX=n.currentPageX,n.previousPageY=n.currentPageY,n.previousTimeStamp=n.currentTimeStamp,n.currentPageX=e.pageX,n.currentPageY=e.pageY,n.currentTimeStamp=q(e),Y.mostRecentTimeStamp=q(e))}function G(e){var n=V[X(e)];n&&(n.touchActive=!1,n.previousPageX=n.currentPageX,n.previousPageY=n.currentPageY,n.previousTimeStamp=n.currentTimeStamp,n.currentPageX=e.pageX,n.currentPageY=e.pageY,n.currentTimeStamp=q(e),Y.mostRecentTimeStamp=q(e))}var J={recordTouchTrack:function(e,n){if(W(e))n.changedTouches.forEach(K);else if(j(e))n.changedTouches.forEach($),Y.numberActiveTouches=n.touches.length,1===Y.numberActiveTouches&&(Y.indexOfSingleActiveTouch=n.touches[0].identifier);else if(("topTouchEnd"===e||"topTouchCancel"===e)&&(n.changedTouches.forEach(G),Y.numberActiveTouches=n.touches.length,1===Y.numberActiveTouches))for(e=0;e<V.length;e++)if(null!=(n=V[e])&&n.touchActive){Y.indexOfSingleActiveTouch=e;break}},touchHistory:Y};function Z(e,n){if(null==n)throw Error("accumulate(...): Accumulated items must not be null or undefined.");return null==e?n:Array.isArray(e)?e.concat(n):Array.isArray(n)?[e].concat(n):[e,n]}var ee=null,ne=0;function te(e,n){var t=ee;ee=e,null!==ie.GlobalResponderHandler&&ie.GlobalResponderHandler.onChange(t,e,n)}var re={startShouldSetResponder:{phasedRegistrationNames:{bubbled:"onStartShouldSetResponder",captured:"onStartShouldSetResponderCapture"},dependencies:O},scrollShouldSetResponder:{phasedRegistrationNames:{bubbled:"onScrollShouldSetResponder",captured:"onScrollShouldSetResponderCapture"},dependencies:["topScroll"]},selectionChangeShouldSetResponder:{phasedRegistrationNames:{bubbled:"onSelectionChangeShouldSetResponder",captured:"onSelectionChangeShouldSetResponderCapture"},dependencies:["topSelectionChange"]},moveShouldSetResponder:{phasedRegistrationNames:{bubbled:"onMoveShouldSetResponder",captured:"onMoveShouldSetResponderCapture"},dependencies:B},responderStart:{registrationName:"onResponderStart",dependencies:O},responderMove:{registrationName:"onResponderMove",dependencies:B},responderEnd:{registrationName:"onResponderEnd",dependencies:L},responderRelease:{registrationName:"onResponderRelease",dependencies:L},responderTerminationRequest:{registrationName:"onResponderTerminationRequest",dependencies:[]},responderGrant:{registrationName:"onResponderGrant",dependencies:[]},responderReject:{registrationName:"onResponderReject",dependencies:[]},responderTerminate:{registrationName:"onResponderTerminate",dependencies:[]}},ie={_getResponder:function(){return ee},eventTypes:re,extractEvents:function(e,n,t,r){if(j(e))ne+=1;else if("topTouchEnd"===e||"topTouchCancel"===e){if(!(0<=ne))return null;--ne}if(J.recordTouchTrack(e,t),n&&("topScroll"===e&&!t.responderIgnoreScroll||0<ne&&"topSelectionChange"===e||j(e)||W(e))){var i=j(e)?re.startShouldSetResponder:W(e)?re.moveShouldSetResponder:"topSelectionChange"===e?re.selectionChangeShouldSetResponder:re.scrollShouldSetResponder;if(ee)e:{for(var l=ee,a=0,o=l;o;o=f(o))a++;o=0;for(var u=n;u;u=f(u))o++;for(;0<a-o;)l=f(l),a--;for(;0<o-a;)n=f(n),o--;for(;a--;){if(l===n||l===n.alternate)break e;l=f(l),n=f(n)}l=null}else l=n;n=l===ee,(l=H.getPooled(i,l,t,r)).touchHistory=J.touchHistory,C(l,n?z:N);e:{if(i=l._dispatchListeners,n=l._dispatchInstances,Array.isArray(i)){for(a=0;a<i.length&&!l.isPropagationStopped();a++)if(i[a](l,n[a])){i=n[a];break e}}else if(i&&i(l,n)){i=n;break e}i=null}if(l._dispatchInstances=null,l._dispatchListeners=null,l.isPersistent()||l.constructor.release(l),i&&i!==ee)if((l=H.getPooled(re.responderGrant,i,t,r)).touchHistory=J.touchHistory,C(l,I),n=!0===w(l),ee)if((a=H.getPooled(re.responderTerminationRequest,ee,t,r)).touchHistory=J.touchHistory,C(a,I),o=!a._dispatchListeners||w(a),a.isPersistent()||a.constructor.release(a),o){(a=H.getPooled(re.responderTerminate,ee,t,r)).touchHistory=J.touchHistory,C(a,I);var s=Z(s,[l,a]);te(i,n)}else(i=H.getPooled(re.responderReject,i,t,r)).touchHistory=J.touchHistory,C(i,I),s=Z(s,i);else s=Z(s,l),te(i,n);else s=null}else s=null;if(i=ee&&j(e),l=ee&&W(e),n=ee&&("topTouchEnd"===e||"topTouchCancel"===e),(i=i?re.responderStart:l?re.responderMove:n?re.responderEnd:null)&&((i=H.getPooled(i,ee,t,r)).touchHistory=J.touchHistory,C(i,I),s=Z(s,i)),i=ee&&"topTouchCancel"===e,e=ee&&!i&&("topTouchEnd"===e||"topTouchCancel"===e))e:{if((e=t.touches)&&0!==e.length)for(l=0;l<e.length;l++)if(null!==(n=e[l].target)&&void 0!==n&&0!==n){a=S(n);n:{for(n=ee;a;){if(n===a||n===a.alternate){n=!0;break n}a=f(a)}n=!1}if(n){e=!1;break e}}e=!0}return(e=i?re.responderTerminate:e?re.responderRelease:null)&&((t=H.getPooled(e,ee,t,r)).touchHistory=J.touchHistory,C(t,I),s=Z(s,t),te(null)),s},GlobalResponderHandler:null,injection:{injectGlobalResponderHandler:function(e){ie.GlobalResponderHandler=e}}},le=null,ae={};function oe(){if(le)for(var e in ae){var n=ae[e],t=le.indexOf(e);if(!(-1<t))throw Error("EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `"+e+"`.");if(!se[t]){if(!n.extractEvents)throw Error("EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `"+e+"` does not.");for(var r in se[t]=n,t=n.eventTypes){var i=void 0,l=t[r],a=n,o=r;if(ce.hasOwnProperty(o))throw Error("EventPluginRegistry: More than one plugin attempted to publish the same event name, `"+o+"`.");ce[o]=l;var u=l.phasedRegistrationNames;if(u){for(i in u)u.hasOwnProperty(i)&&ue(u[i],a);i=!0}else l.registrationName?(ue(l.registrationName,a),i=!0):i=!1;if(!i)throw Error("EventPluginRegistry: Failed to publish event `"+r+"` for plugin `"+e+"`.")}}}}function ue(e,n){if(fe[e])throw Error("EventPluginRegistry: More than one plugin attempted to publish the same registration name, `"+e+"`.");fe[e]=n}var se=[],ce={},fe={},de=u.ReactNativeViewConfigRegistry.customBubblingEventTypes,pe=u.ReactNativeViewConfigRegistry.customDirectEventTypes;if(le)throw Error("EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React.");le=Array.prototype.slice.call(["ResponderEventPlugin","ReactNativeBridgeEventPlugin"]),oe();var he,me={ResponderEventPlugin:ie,ReactNativeBridgeEventPlugin:{eventTypes:{},extractEvents:function(e,n,t,r){if(null==n)return null;var i=de[e],l=pe[e];if(!i&&!l)throw Error('Unsupported top level event type "'+e+'" dispatched');if(e=D.getPooled(i||l,n,t,r),i)C(e,N);else{if(!l)return null;C(e,I)}return e}}},ge=!1;for(he in me)if(me.hasOwnProperty(he)){var ve=me[he];if(!ae.hasOwnProperty(he)||ae[he]!==ve){if(ae[he])throw Error("EventPluginRegistry: Cannot inject two different event plugins using the same name, `"+he+"`.");ae[he]=ve,ge=!0}}function ye(e){return e}ge&&oe(),x=function(e){return e.canonical.currentProps},S=ye,E=function(e){if(!(e=e.stateNode.canonical)._nativeTag)throw Error("All native instances should have a tag.");return e},ie.injection.injectGlobalResponderHandler({onChange:function(e,n,t){null!==n?u.UIManager.setJSResponder(n.stateNode.canonical._nativeTag,t):u.UIManager.clearJSResponder()}});var be=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;be.hasOwnProperty("ReactCurrentDispatcher")||(be.ReactCurrentDispatcher={current:null}),be.hasOwnProperty("ReactCurrentBatchConfig")||(be.ReactCurrentBatchConfig={suspense:null});var Te="function"==typeof Symbol&&Symbol.for,xe=Te?Symbol.for("react.element"):60103,Se=Te?Symbol.for("react.portal"):60106,Ee=Te?Symbol.for("react.fragment"):60107,ke=Te?Symbol.for("react.strict_mode"):60108,we=Te?Symbol.for("react.profiler"):60114,Pe=Te?Symbol.for("react.provider"):60109,Re=Te?Symbol.for("react.context"):60110,Ce=Te?Symbol.for("react.concurrent_mode"):60111,_e=Te?Symbol.for("react.forward_ref"):60112,Ne=Te?Symbol.for("react.suspense"):60113,ze=Te?Symbol.for("react.suspense_list"):60120,Ie=Te?Symbol.for("react.memo"):60115,Ae=Te?Symbol.for("react.lazy"):60116,Me=Te?Symbol.for("react.block"):60121,De="function"==typeof Symbol&&Symbol.iterator;function Ue(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=De&&e[De]||e["@@iterator"])?e:null}function Fe(e){if(-1===e._status){var n=e._result;n||(n=e._ctor),n=n(),e._status=0,e._result=n,n.then(function(n){0===e._status&&(n=n.default,e._status=1,e._result=n)},function(n){0===e._status&&(e._status=2,e._result=n)})}}function Qe(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Ee:return"Fragment";case Se:return"Portal";case we:return"Profiler";case ke:return"StrictMode";case Ne:return"Suspense";case ze:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Re:return(e.displayName||"Context")+".Consumer";case Pe:return(e._context.displayName||"Context")+".Provider";case _e:var n=e.render;return n=n.displayName||n.name||"",e.displayName||(""!==n?"ForwardRef("+n+")":"ForwardRef");case Ie:return Qe(e.type);case Me:return Qe(e.render);case Ae:if(e=1===e._status?e._result:null)return Qe(e)}return null}function He(e){var n=e,t=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do{0!=(1026&(n=e).effectTag)&&(t=n.return),e=n.return}while(e)}return 3===n.tag?t:null}function je(e){if(He(e)!==e)throw Error("Unable to find node on an unmounted component.")}function We(e){var n=e.alternate;if(!n){if(null===(n=He(e)))throw Error("Unable to find node on an unmounted component.");return n!==e?null:e}for(var t=e,r=n;;){var i=t.return;if(null===i)break;var l=i.alternate;if(null===l){if(null!==(r=i.return)){t=r;continue}break}if(i.child===l.child){for(l=i.child;l;){if(l===t)return je(i),e;if(l===r)return je(i),n;l=l.sibling}throw Error("Unable to find node on an unmounted component.")}if(t.return!==r.return)t=i,r=l;else{for(var a=!1,o=i.child;o;){if(o===t){a=!0,t=i,r=l;break}if(o===r){a=!0,r=i,t=l;break}o=o.sibling}if(!a){for(o=l.child;o;){if(o===t){a=!0,t=l,r=i;break}if(o===r){a=!0,r=l,t=i;break}o=o.sibling}if(!a)throw Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(t.alternate!==r)throw Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(3!==t.tag)throw Error("Unable to find node on an unmounted component.");return t.stateNode.current===t?e:n}function Oe(e){if(!(e=We(e)))return null;for(var n=e;;){if(5===n.tag||6===n.tag)return n;if(n.child)n.child.return=n,n=n.child;else{if(n===e)break;for(;!n.sibling;){if(!n.return||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}}return null}function Be(e,n){return function(){if(n&&("boolean"!=typeof e.__isMounted||e.__isMounted))return n.apply(e,arguments)}}var Le={},Ve=null,Ye=0,qe={unsafelyIgnoreFunctions:!0};function Xe(e,n){return"object"!=typeof n||null===n||u.deepDiffer(e,n,qe)}function $e(e,n,t){if(Array.isArray(n))for(var r=n.length;r--&&0<Ye;)$e(e,n[r],t);else if(n&&0<Ye)for(r in Ve)if(Ve[r]){var i=n[r];if(void 0!==i){var l=t[r];l&&("function"==typeof i&&(i=!0),void 0===i&&(i=null),"object"!=typeof l?e[r]=i:"function"!=typeof l.diff&&"function"!=typeof l.process||(i="function"==typeof l.process?l.process(i):i,e[r]=i),Ve[r]=!1,Ye--)}}}function Ke(e,n,t,r){if(!e&&n===t)return e;if(!n||!t)return t?Ge(e,t,r):n?Je(e,n,r):e;if(!Array.isArray(n)&&!Array.isArray(t))return Ze(e,n,t,r);if(Array.isArray(n)&&Array.isArray(t)){var i,l=n.length<t.length?n.length:t.length;for(i=0;i<l;i++)e=Ke(e,n[i],t[i],r);for(;i<n.length;i++)e=Je(e,n[i],r);for(;i<t.length;i++)e=Ge(e,t[i],r);return e}return Array.isArray(n)?Ze(e,u.flattenStyle(n),t,r):Ze(e,n,u.flattenStyle(t),r)}function Ge(e,n,t){if(!n)return e;if(!Array.isArray(n))return Ze(e,Le,n,t);for(var r=0;r<n.length;r++)e=Ge(e,n[r],t);return e}function Je(e,n,t){if(!n)return e;if(!Array.isArray(n))return Ze(e,n,Le,t);for(var r=0;r<n.length;r++)e=Je(e,n[r],t);return e}function Ze(e,n,t,r){var i,l;for(l in t)if(i=r[l]){var a=n[l],o=t[l];"function"==typeof o&&(o=!0,"function"==typeof a&&(a=!0)),void 0===o&&(o=null,void 0===a&&(a=null)),Ve&&(Ve[l]=!1),e&&void 0!==e[l]?"object"!=typeof i?e[l]=o:"function"!=typeof i.diff&&"function"!=typeof i.process||(i="function"==typeof i.process?i.process(o):o,e[l]=i):a!==o&&("object"!=typeof i?Xe(a,o)&&((e||(e={}))[l]=o):"function"==typeof i.diff||"function"==typeof i.process?(void 0===a||("function"==typeof i.diff?i.diff(a,o):Xe(a,o)))&&(i="function"==typeof i.process?i.process(o):o,(e||(e={}))[l]=i):(Ve=null,Ye=0,e=Ke(e,a,o,i),0<Ye&&e&&($e(e,o,i),Ve=null)))}for(var u in n)void 0===t[u]&&(!(i=r[u])||e&&void 0!==e[u]||void 0!==(a=n[u])&&("object"!=typeof i||"function"==typeof i.diff||"function"==typeof i.process?((e||(e={}))[u]=null,Ve||(Ve={}),Ve[u]||(Ve[u]=!0,Ye++)):e=Je(e,a,i)));return e}function en(e,n){return e(n)}var nn=!1;function tn(e,n){if(nn)return e(n);nn=!0;try{return en(e,n)}finally{nn=!1}}var rn=null;function ln(e){if(e){var n=e._dispatchListeners,t=e._dispatchInstances;if(Array.isArray(n))for(var r=0;r<n.length&&!e.isPropagationStopped();r++)k(e,n[r],t[r]);else n&&k(e,n,t);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function an(){throw Error("The current renderer does not support hydration. This error is likely caused by a bug in React. Please file an issue.")}var on=nativeFabricUIManager,un=on.createNode,sn=on.cloneNode,cn=on.cloneNodeWithNewChildren,fn=on.cloneNodeWithNewChildrenAndProps,dn=on.cloneNodeWithNewProps,pn=on.createChildSet,hn=on.appendChild,mn=on.appendChildToSet,gn=on.completeRoot,vn=on.registerEventHandler,yn=on.measure,bn=on.measureInWindow,Tn=on.measureLayout,xn=u.ReactNativeViewConfigRegistry.get,Sn=2;vn&&vn(function(e,n,t){var r=null;if(null!=e){var i=e.stateNode;null!=i&&(r=i.canonical)}tn(function(){for(var i=r,l=null,a=0;a<se.length;a++){var o=se[a];o&&(o=o.extractEvents(n,e,t,i,1))&&(l=R(l,o))}if(null!==(i=l)&&(rn=R(rn,i)),i=rn,rn=null,i){if(C(i,ln),rn)throw Error("processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented.");if(g)throw i=v,g=!1,v=null,i}})});var En=(function(){function e(e,n,t,r){this._nativeTag=e,this.viewConfig=n,this.currentProps=t,this._internalInstanceHandle=r}var n=e.prototype;return n.blur=function(){u.TextInputState.blurTextInput(this)},n.focus=function(){u.TextInputState.focusTextInput(this)},n.measure=function(e){yn(this._internalInstanceHandle.stateNode.node,Be(this,e))},n.measureInWindow=function(e){bn(this._internalInstanceHandle.stateNode.node,Be(this,e))},n.measureLayout=function(n,t,r){"number"!=typeof n&&n instanceof e&&Tn(this._internalInstanceHandle.stateNode.node,n._internalInstanceHandle.stateNode.node,Be(this,r),Be(this,t))},n.setNativeProps=function(){},e})();function kn(e,n,t,r){if(!t.isInAParentText)throw Error("Text strings must be rendered within a <Text> component.");return t=Sn,Sn+=2,{node:un(t,"RCTRawText",n,{text:e},r)}}var wn=setTimeout,Pn=clearTimeout;function Rn(e){var n=e.node,t=Ze(null,Le,{style:{display:"none"}},e.canonical.viewConfig.validAttributes);return{node:dn(n,t),canonical:e.canonical}}var Cn=[],_n=-1;function Nn(e){0>_n||(e.current=Cn[_n],Cn[_n]=null,_n--)}function zn(e,n){Cn[++_n]=e.current,e.current=n}var In={},An={current:In},Mn={current:!1},Dn=In;function Un(e,n){var t=e.type.contextTypes;if(!t)return In;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===n)return r.__reactInternalMemoizedMaskedChildContext;var i,l={};for(i in t)l[i]=n[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=l),l}function Fn(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Qn(){Nn(Mn),Nn(An)}function Hn(e,n,t){if(An.current!==In)throw Error("Unexpected context found on stack. This error is likely caused by a bug in React. Please file an issue.");zn(An,n),zn(Mn,t)}function jn(e,n,t){var r=e.stateNode;if(e=n.childContextTypes,"function"!=typeof r.getChildContext)return t;for(var i in r=r.getChildContext())if(!(i in e))throw Error((Qe(n)||"Unknown")+'.getChildContext(): key "'+i+'" is not defined in childContextTypes.');return o({},t,{},r)}function Wn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||In,Dn=An.current,zn(An,e),zn(Mn,Mn.current),!0}function On(e,n,t){var r=e.stateNode;if(!r)throw Error("Expected to have an instance by this point. This error is likely caused by a bug in React. Please file an issue.");t?(e=jn(e,n,Dn),r.__reactInternalMemoizedMergedChildContext=e,Nn(Mn),Nn(An),zn(An,e)):Nn(Mn),zn(Mn,t)}var Bn=c.unstable_runWithPriority,Ln=c.unstable_scheduleCallback,Vn=c.unstable_cancelCallback,Yn=c.unstable_requestPaint,qn=c.unstable_now,Xn=c.unstable_getCurrentPriorityLevel,$n=c.unstable_ImmediatePriority,Kn=c.unstable_UserBlockingPriority,Gn=c.unstable_NormalPriority,Jn=c.unstable_LowPriority,Zn=c.unstable_IdlePriority,et={},nt=c.unstable_shouldYield,tt=void 0!==Yn?Yn:function(){},rt=null,it=null,lt=!1,at=qn(),ot=1e4>at?qn:function(){return qn()-at};function ut(){switch(Xn()){case $n:return 99;case Kn:return 98;case Gn:return 97;case Jn:return 96;case Zn:return 95;default:throw Error("Unknown priority level.")}}function st(e){switch(e){case 99:return $n;case 98:return Kn;case 97:return Gn;case 96:return Jn;case 95:return Zn;default:throw Error("Unknown priority level.")}}function ct(e,n){return e=st(e),Bn(e,n)}function ft(e,n,t){return e=st(e),Ln(e,n,t)}function dt(e){return null===rt?(rt=[e],it=Ln($n,ht)):rt.push(e),et}function pt(){if(null!==it){var e=it;it=null,Vn(e)}ht()}function ht(){if(!lt&&null!==rt){lt=!0;var e=0;try{var n=rt;ct(99,function(){for(;e<n.length;e++){var t=n[e];do{t=t(!0)}while(null!==t)}}),rt=null}catch(n){throw null!==rt&&(rt=rt.slice(e+1)),Ln($n,pt),n}finally{lt=!1}}}var mt="function"==typeof Object.is?Object.is:function(e,n){return e===n&&(0!==e||1/e==1/n)||e!=e&&n!=n},gt=Object.prototype.hasOwnProperty;function vt(e,n){if(mt(e,n))return!0;if("object"!=typeof e||null===e||"object"!=typeof n||null===n)return!1;var t=Object.keys(e),r=Object.keys(n);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++)if(!gt.call(n,t[r])||!mt(e[t[r]],n[t[r]]))return!1;return!0}var yt=/^(.*)[\\\/]/;function bt(e){var n="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var t="";break e;default:var r=e._debugOwner,i=e._debugSource,l=Qe(e.type);t=null,r&&(t=Qe(r.type)),r=l,l="",i?l=" (at "+i.fileName.replace(yt,"")+":"+i.lineNumber+")":t&&(l=" (created by "+t+")"),t="\n    in "+(r||"Unknown")+l}n+=t,e=e.return}while(e);return n}function Tt(e,n){if(e&&e.defaultProps)for(var t in n=o({},n),e=e.defaultProps)void 0===n[t]&&(n[t]=e[t]);return n}var xt={current:null},St=null,Et=null,kt=null;function wt(){kt=Et=St=null}function Pt(e){var n=xt.current;Nn(xt),e.type._context._currentValue2=n}function Rt(e,n){for(;null!==e;){var t=e.alternate;if(e.childExpirationTime<n)e.childExpirationTime=n,null!==t&&t.childExpirationTime<n&&(t.childExpirationTime=n);else{if(!(null!==t&&t.childExpirationTime<n))break;t.childExpirationTime=n}e=e.return}}function Ct(e,n){St=e,kt=Et=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=n&&(qr=!0),e.firstContext=null)}function _t(e,n){if(kt!==e&&!1!==n&&0!==n)if("number"==typeof n&&1073741823!==n||(kt=e,n=1073741823),n={context:e,observedBits:n,next:null},null===Et){if(null===St)throw Error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");Et=n,St.dependencies={expirationTime:0,firstContext:n,responders:null}}else Et=Et.next=n;return e._currentValue2}var Nt=!1;function zt(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function It(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function At(e,n){return(e={expirationTime:e,suspenseConfig:n,tag:0,payload:null,callback:null,next:null}).next=e}function Mt(e,n){if(null!==(e=e.updateQueue)){var t=(e=e.shared).pending;null===t?n.next=n:(n.next=t.next,t.next=n),e.pending=n}}function Dt(e,n){var t=e.alternate;null!==t&&It(t,e),null===(t=(e=e.updateQueue).baseQueue)?(e.baseQueue=n.next=n,n.next=n):(n.next=t.next,t.next=n)}function Ut(e,n,t,r){var i=e.updateQueue;Nt=!1;var l=i.baseQueue,a=i.shared.pending;if(null!==a){if(null!==l){var u=l.next;l.next=a.next,a.next=u}l=a,i.shared.pending=null,null!==(u=e.alternate)&&(null!==(u=u.updateQueue)&&(u.baseQueue=a))}if(null!==l){u=l.next;var s=i.baseState,c=0,f=null,d=null,p=null;if(null!==u)for(var h=u;;){if((a=h.expirationTime)<r){var m={expirationTime:h.expirationTime,suspenseConfig:h.suspenseConfig,tag:h.tag,payload:h.payload,callback:h.callback,next:null};null===p?(d=p=m,f=s):p=p.next=m,a>c&&(c=a)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:h.suspenseConfig,tag:h.tag,payload:h.payload,callback:h.callback,next:null}),Cl(a,h.suspenseConfig);e:{var g=e,v=h;switch(a=n,m=t,v.tag){case 1:if("function"==typeof(g=v.payload)){s=g.call(m,s,a);break e}s=g;break e;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null===(a="function"==typeof(g=v.payload)?g.call(m,s,a):g)||void 0===a)break e;s=o({},s,a);break e;case 2:Nt=!0}}null!==h.callback&&(e.effectTag|=32,null===(a=i.effects)?i.effects=[h]:a.push(h))}if(null===(h=h.next)||h===u){if(null===(a=i.shared.pending))break;h=l.next=a.next,a.next=u,i.baseQueue=l=a,i.shared.pending=null}}null===p?f=s:p.next=d,i.baseState=f,i.baseQueue=p,_l(c),e.expirationTime=c,e.memoizedState=s}}function Ft(e,n,t){if(e=n.effects,n.effects=null,null!==e)for(n=0;n<e.length;n++){var r=e[n],i=r.callback;if(null!==i){if(r.callback=null,"function"!=typeof i)throw Error("Invalid argument passed as callback. Expected a function. Instead received: "+i);i.call(t)}}}var Qt=be.ReactCurrentBatchConfig,Ht=(new s.Component).refs;function jt(e,n,t,r){t=null===(t=t(r,n=e.memoizedState))||void 0===t?n:o({},n,t),e.memoizedState=t,0===e.expirationTime&&(e.updateQueue.baseState=t)}var Wt={isMounted:function(e){return!!(e=e._reactInternalFiber)&&He(e)===e},enqueueSetState:function(e,n,t){e=e._reactInternalFiber;var r=vl(),i=Qt.suspense;(i=At(r=yl(r,e,i),i)).payload=n,void 0!==t&&null!==t&&(i.callback=t),Mt(e,i),bl(e,r)},enqueueReplaceState:function(e,n,t){e=e._reactInternalFiber;var r=vl(),i=Qt.suspense;(i=At(r=yl(r,e,i),i)).tag=1,i.payload=n,void 0!==t&&null!==t&&(i.callback=t),Mt(e,i),bl(e,r)},enqueueForceUpdate:function(e,n){e=e._reactInternalFiber;var t=vl(),r=Qt.suspense;(r=At(t=yl(t,e,r),r)).tag=2,void 0!==n&&null!==n&&(r.callback=n),Mt(e,r),bl(e,t)}};function Ot(e,n,t,r,i,l,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,l,a):!n.prototype||!n.prototype.isPureReactComponent||(!vt(t,r)||!vt(i,l))}function Bt(e,n,t){var r=!1,i=In,l=n.contextType;return"object"==typeof l&&null!==l?l=_t(l):(i=Fn(n)?Dn:An.current,l=(r=null!==(r=n.contextTypes)&&void 0!==r)?Un(e,i):In),n=new n(t,l),e.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,n.updater=Wt,e.stateNode=n,n._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=l),n}function Lt(e,n,t,r){e=n.state,"function"==typeof n.componentWillReceiveProps&&n.componentWillReceiveProps(t,r),"function"==typeof n.UNSAFE_componentWillReceiveProps&&n.UNSAFE_componentWillReceiveProps(t,r),n.state!==e&&Wt.enqueueReplaceState(n,n.state,null)}function Vt(e,n,t,r){var i=e.stateNode;i.props=t,i.state=e.memoizedState,i.refs=Ht,zt(e);var l=n.contextType;"object"==typeof l&&null!==l?i.context=_t(l):(l=Fn(n)?Dn:An.current,i.context=Un(e,l)),Ut(e,t,i,r),i.state=e.memoizedState,"function"==typeof(l=n.getDerivedStateFromProps)&&(jt(e,n,l,t),i.state=e.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(n=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),n!==i.state&&Wt.enqueueReplaceState(i,i.state,null),Ut(e,t,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var Yt=Array.isArray;function qt(e,n,t){if(null!==(e=t.ref)&&"function"!=typeof e&&"object"!=typeof e){if(t._owner){if(t=t._owner){if(1!==t.tag)throw Error("Function components cannot have string refs. We recommend using useRef() instead. Learn more about using refs safely here: https://fb.me/react-strict-mode-string-ref");var r=t.stateNode}if(!r)throw Error("Missing owner for string ref "+e+". This error is likely caused by a bug in React. Please file an issue.");var i=""+e;return null!==n&&null!==n.ref&&"function"==typeof n.ref&&n.ref._stringRef===i?n.ref:((n=function(e){var n=r.refs;n===Ht&&(n=r.refs={}),null===e?delete n[i]:n[i]=e})._stringRef=i,n)}if("string"!=typeof e)throw Error("Expected ref to be a function, a string, an object returned by React.createRef(), or null.");if(!t._owner)throw Error("Element ref was specified as a string ("+e+") but no owner was set. This could happen for one of the following reasons:\n1. You may be adding a ref to a function component\n2. You may be adding a ref to a component that was not created inside a component's render method\n3. You have multiple copies of React loaded\nSee https://fb.me/react-refs-must-have-owner for more information.")}return e}function Xt(e,n){if("textarea"!==e.type)throw Error("Objects are not valid as a React child (found: "+("[object Object]"===Object.prototype.toString.call(n)?"object with keys {"+Object.keys(n).join(", ")+"}":n)+").")}function $t(e){function n(n,t){if(e){var r=n.lastEffect;null!==r?(r.nextEffect=t,n.lastEffect=t):n.firstEffect=n.lastEffect=t,t.nextEffect=null,t.effectTag=8}}function t(t,r){if(!e)return null;for(;null!==r;)n(t,r),r=r.sibling;return null}function r(e,n){for(e=new Map;null!==n;)null!==n.key?e.set(n.key,n):e.set(n.index,n),n=n.sibling;return e}function i(e,n){return(e=Gl(e,n)).index=0,e.sibling=null,e}function l(n,t,r){return n.index=r,e?null!==(r=n.alternate)?(r=r.index)<t?(n.effectTag=2,t):r:(n.effectTag=2,t):t}function a(n){return e&&null===n.alternate&&(n.effectTag=2),n}function o(e,n,t,r){return null===n||6!==n.tag?((n=ea(t,e.mode,r)).return=e,n):((n=i(n,t)).return=e,n)}function u(e,n,t,r){return null!==n&&n.elementType===t.type?((r=i(n,t.props)).ref=qt(e,n,t),r.return=e,r):((r=Jl(t.type,t.key,t.props,null,e.mode,r)).ref=qt(e,n,t),r.return=e,r)}function s(e,n,t,r){return null===n||4!==n.tag||n.stateNode.containerInfo!==t.containerInfo||n.stateNode.implementation!==t.implementation?((n=na(t,e.mode,r)).return=e,n):((n=i(n,t.children||[])).return=e,n)}function c(e,n,t,r,l){return null===n||7!==n.tag?((n=Zl(t,e.mode,r,l)).return=e,n):((n=i(n,t)).return=e,n)}function f(e,n,t){if("string"==typeof n||"number"==typeof n)return(n=ea(""+n,e.mode,t)).return=e,n;if("object"==typeof n&&null!==n){switch(n.$$typeof){case xe:return(t=Jl(n.type,n.key,n.props,null,e.mode,t)).ref=qt(e,null,n),t.return=e,t;case Se:return(n=na(n,e.mode,t)).return=e,n}if(Yt(n)||Ue(n))return(n=Zl(n,e.mode,t,null)).return=e,n;Xt(e,n)}return null}function d(e,n,t,r){var i=null!==n?n.key:null;if("string"==typeof t||"number"==typeof t)return null!==i?null:o(e,n,""+t,r);if("object"==typeof t&&null!==t){switch(t.$$typeof){case xe:return t.key===i?t.type===Ee?c(e,n,t.props.children,r,i):u(e,n,t,r):null;case Se:return t.key===i?s(e,n,t,r):null}if(Yt(t)||Ue(t))return null!==i?null:c(e,n,t,r,null);Xt(e,t)}return null}function p(e,n,t,r,i){if("string"==typeof r||"number"==typeof r)return o(n,e=e.get(t)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case xe:return e=e.get(null===r.key?t:r.key)||null,r.type===Ee?c(n,e,r.props.children,i,r.key):u(n,e,r,i);case Se:return s(n,e=e.get(null===r.key?t:r.key)||null,r,i)}if(Yt(r)||Ue(r))return c(n,e=e.get(t)||null,r,i,null);Xt(n,r)}return null}function h(i,a,o,u){for(var s=null,c=null,h=a,m=a=0,g=null;null!==h&&m<o.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=d(i,h,o[m],u);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&n(i,h),a=l(v,a,m),null===c?s=v:c.sibling=v,c=v,h=g}if(m===o.length)return t(i,h),s;if(null===h){for(;m<o.length;m++)null!==(h=f(i,o[m],u))&&(a=l(h,a,m),null===c?s=h:c.sibling=h,c=h);return s}for(h=r(i,h);m<o.length;m++)null!==(g=p(h,i,m,o[m],u))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),a=l(g,a,m),null===c?s=g:c.sibling=g,c=g);return e&&h.forEach(function(e){return n(i,e)}),s}function m(i,a,o,u){var s=Ue(o);if("function"!=typeof s)throw Error("An object is not an iterable. This error is likely caused by a bug in React. Please file an issue.");if(null==(o=s.call(o)))throw Error("An iterable object provided no iterator.");for(var c=s=null,h=a,m=a=0,g=null,v=o.next();null!==h&&!v.done;m++,v=o.next()){h.index>m?(g=h,h=null):g=h.sibling;var y=d(i,h,v.value,u);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&n(i,h),a=l(y,a,m),null===c?s=y:c.sibling=y,c=y,h=g}if(v.done)return t(i,h),s;if(null===h){for(;!v.done;m++,v=o.next())null!==(v=f(i,v.value,u))&&(a=l(v,a,m),null===c?s=v:c.sibling=v,c=v);return s}for(h=r(i,h);!v.done;m++,v=o.next())null!==(v=p(h,i,m,v.value,u))&&(e&&null!==v.alternate&&h.delete(null===v.key?m:v.key),a=l(v,a,m),null===c?s=v:c.sibling=v,c=v);return e&&h.forEach(function(e){return n(i,e)}),s}return function(e,r,l,o){var u="object"==typeof l&&null!==l&&l.type===Ee&&null===l.key;u&&(l=l.props.children);var s="object"==typeof l&&null!==l;if(s)switch(l.$$typeof){case xe:e:{for(s=l.key,u=r;null!==u;){if(u.key===s){switch(u.tag){case 7:if(l.type===Ee){t(e,u.sibling),(r=i(u,l.props.children)).return=e,e=r;break e}break;default:if(u.elementType===l.type){t(e,u.sibling),(r=i(u,l.props)).ref=qt(e,u,l),r.return=e,e=r;break e}}t(e,u);break}n(e,u),u=u.sibling}l.type===Ee?((r=Zl(l.props.children,e.mode,o,l.key)).return=e,e=r):((o=Jl(l.type,l.key,l.props,null,e.mode,o)).ref=qt(e,r,l),o.return=e,e=o)}return a(e);case Se:e:{for(u=l.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===l.containerInfo&&r.stateNode.implementation===l.implementation){t(e,r.sibling),(r=i(r,l.children||[])).return=e,e=r;break e}t(e,r);break}n(e,r),r=r.sibling}(r=na(l,e.mode,o)).return=e,e=r}return a(e)}if("string"==typeof l||"number"==typeof l)return l=""+l,null!==r&&6===r.tag?(t(e,r.sibling),(r=i(r,l)).return=e,e=r):(t(e,r),(r=ea(l,e.mode,o)).return=e,e=r),a(e);if(Yt(l))return h(e,r,l,o);if(Ue(l))return m(e,r,l,o);if(s&&Xt(e,l),void 0===l&&!u)switch(e.tag){case 1:case 0:throw e=e.type,Error((e.displayName||e.name||"Component")+"(...): Nothing was returned from render. This usually means a return statement is missing. Or, to render nothing, return null.")}return t(e,r)}}var Kt=$t(!0),Gt=$t(!1),Jt={},Zt={current:Jt},er={current:Jt},nr={current:Jt};function tr(e){if(e===Jt)throw Error("Expected host context to exist. This error is likely caused by a bug in React. Please file an issue.");return e}function rr(e,n){zn(nr,n),zn(er,e),zn(Zt,Jt),Nn(Zt),zn(Zt,{isInAParentText:!1})}function ir(){Nn(Zt),Nn(er),Nn(nr)}function lr(e){tr(nr.current);var n=tr(Zt.current),t=e.type;t="AndroidTextInput"===t||"RCTMultilineTextInputView"===t||"RCTSinglelineTextInputView"===t||"RCTText"===t||"RCTVirtualText"===t,n!==(t=n.isInAParentText!==t?{isInAParentText:t}:n)&&(zn(er,e),zn(Zt,t))}function ar(e){er.current===e&&(Nn(Zt),Nn(er))}var or={current:0};function ur(e){for(var n=e;null!==n;){if(13===n.tag){var t=n.memoizedState;if(null!==t&&(null===t.dehydrated||an()||an()))return n}else if(19===n.tag&&void 0!==n.memoizedProps.revealOrder){if(0!=(64&n.effectTag))return n}else if(null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function sr(e,n){return{responder:e,props:n}}var cr=be.ReactCurrentDispatcher,fr=be.ReactCurrentBatchConfig,dr=0,pr=null,hr=null,mr=null,gr=!1;function vr(){throw Error("Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://fb.me/react-invalid-hook-call for tips about how to debug and fix this problem.")}function yr(e,n){if(null===n)return!1;for(var t=0;t<n.length&&t<e.length;t++)if(!mt(e[t],n[t]))return!1;return!0}function br(e,n,t,r,i,l){if(dr=l,pr=n,n.memoizedState=null,n.updateQueue=null,n.expirationTime=0,cr.current=null===e||null===e.memoizedState?Br:Lr,e=t(r,i),n.expirationTime===dr){l=0;do{if(n.expirationTime=0,!(25>l))throw Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");l+=1,mr=hr=null,n.updateQueue=null,cr.current=Vr,e=t(r,i)}while(n.expirationTime===dr)}if(cr.current=Or,n=null!==hr&&null!==hr.next,dr=0,mr=hr=pr=null,gr=!1,n)throw Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return e}function Tr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mr?pr.memoizedState=mr=e:mr=mr.next=e,mr}function xr(){if(null===hr){var e=pr.alternate;e=null!==e?e.memoizedState:null}else e=hr.next;var n=null===mr?pr.memoizedState:mr.next;if(null!==n)mr=n,hr=e;else{if(null===e)throw Error("Rendered more hooks than during the previous render.");e={memoizedState:(hr=e).memoizedState,baseState:hr.baseState,baseQueue:hr.baseQueue,queue:hr.queue,next:null},null===mr?pr.memoizedState=mr=e:mr=mr.next=e}return mr}function Sr(e,n){return"function"==typeof n?n(e):n}function Er(e){var n=xr(),t=n.queue;if(null===t)throw Error("Should have a queue. This is likely a bug in React. Please file an issue.");t.lastRenderedReducer=e;var r=hr,i=r.baseQueue,l=t.pending;if(null!==l){if(null!==i){var a=i.next;i.next=l.next,l.next=a}r.baseQueue=i=l,t.pending=null}if(null!==i){i=i.next,r=r.baseState;var o=a=l=null,u=i;do{var s=u.expirationTime;if(s<dr){var c={expirationTime:u.expirationTime,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===o?(a=o=c,l=r):o=o.next=c,s>pr.expirationTime&&(pr.expirationTime=s,_l(s))}else null!==o&&(o=o.next={expirationTime:1073741823,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),Cl(s,u.suspenseConfig),r=u.eagerReducer===e?u.eagerState:e(r,u.action);u=u.next}while(null!==u&&u!==i);null===o?l=r:o.next=a,mt(r,n.memoizedState)||(qr=!0),n.memoizedState=r,n.baseState=l,n.baseQueue=o,t.lastRenderedState=r}return[n.memoizedState,t.dispatch]}function kr(e){var n=xr(),t=n.queue;if(null===t)throw Error("Should have a queue. This is likely a bug in React. Please file an issue.");t.lastRenderedReducer=e;var r=t.dispatch,i=t.pending,l=n.memoizedState;if(null!==i){t.pending=null;var a=i=i.next;do{l=e(l,a.action),a=a.next}while(a!==i);mt(l,n.memoizedState)||(qr=!0),n.memoizedState=l,null===n.baseQueue&&(n.baseState=l),t.lastRenderedState=l}return[l,r]}function wr(e){var n=Tr();return"function"==typeof e&&(e=e()),n.memoizedState=n.baseState=e,e=(e=n.queue={pending:null,dispatch:null,lastRenderedReducer:Sr,lastRenderedState:e}).dispatch=jr.bind(null,pr,e),[n.memoizedState,e]}function Pr(e,n,t,r){return e={tag:e,create:n,destroy:t,deps:r,next:null},null===(n=pr.updateQueue)?(n={lastEffect:null},pr.updateQueue=n,n.lastEffect=e.next=e):null===(t=n.lastEffect)?n.lastEffect=e.next=e:(r=t.next,t.next=e,e.next=r,n.lastEffect=e),e}function Rr(){return xr().memoizedState}function Cr(e,n,t,r){var i=Tr();pr.effectTag|=e,i.memoizedState=Pr(1|n,t,void 0,void 0===r?null:r)}function _r(e,n,t,r){var i=xr();r=void 0===r?null:r;var l=void 0;if(null!==hr){var a=hr.memoizedState;if(l=a.destroy,null!==r&&yr(r,a.deps))return void Pr(n,t,l,r)}pr.effectTag|=e,i.memoizedState=Pr(1|n,t,l,r)}function Nr(e,n){return Cr(516,4,e,n)}function zr(e,n){return _r(516,4,e,n)}function Ir(e,n){return _r(4,2,e,n)}function Ar(e,n){return"function"==typeof n?(e=e(),n(e),function(){n(null)}):null!==n&&void 0!==n?(e=e(),n.current=e,function(){n.current=null}):void 0}function Mr(e,n,t){return t=null!==t&&void 0!==t?t.concat([e]):null,_r(4,2,Ar.bind(null,n,e),t)}function Dr(){}function Ur(e,n){return Tr().memoizedState=[e,void 0===n?null:n],e}function Fr(e,n){var t=xr();n=void 0===n?null:n;var r=t.memoizedState;return null!==r&&null!==n&&yr(n,r[1])?r[0]:(t.memoizedState=[e,n],e)}function Qr(e,n){var t=xr();n=void 0===n?null:n;var r=t.memoizedState;return null!==r&&null!==n&&yr(n,r[1])?r[0]:(e=e(),t.memoizedState=[e,n],e)}function Hr(e,n,t){var r=ut();ct(98>r?98:r,function(){e(!0)}),ct(97<r?97:r,function(){var r=fr.suspense;fr.suspense=void 0===n?null:n;try{e(!1),t()}finally{fr.suspense=r}})}function jr(e,n,t){var r=vl(),i=Qt.suspense;i={expirationTime:r=yl(r,e,i),suspenseConfig:i,action:t,eagerReducer:null,eagerState:null,next:null};var l=n.pending;if(null===l?i.next=i:(i.next=l.next,l.next=i),n.pending=i,l=e.alternate,e===pr||null!==l&&l===pr)gr=!0,i.expirationTime=dr,pr.expirationTime=dr;else{if(0===e.expirationTime&&(null===l||0===l.expirationTime)&&null!==(l=n.lastRenderedReducer))try{var a=n.lastRenderedState,o=l(a,t);if(i.eagerReducer=l,i.eagerState=o,mt(o,a))return}catch(e){}bl(e,r)}}function Wr(){}var Or={readContext:_t,useCallback:vr,useContext:vr,useEffect:vr,useImperativeHandle:vr,useLayoutEffect:vr,useMemo:vr,useReducer:vr,useRef:vr,useState:vr,useDebugValue:vr,useResponder:vr,useDeferredValue:vr,useTransition:vr,useEvent:vr},Br={readContext:_t,useCallback:Ur,useContext:_t,useEffect:Nr,useImperativeHandle:function(e,n,t){return t=null!==t&&void 0!==t?t.concat([e]):null,Cr(4,2,Ar.bind(null,n,e),t)},useLayoutEffect:function(e,n){return Cr(4,2,e,n)},useMemo:function(e,n){var t=Tr();return n=void 0===n?null:n,e=e(),t.memoizedState=[e,n],e},useReducer:function(e,n,t){var r=Tr();return n=void 0!==t?t(n):n,r.memoizedState=r.baseState=n,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:n}).dispatch=jr.bind(null,pr,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Tr().memoizedState=e},useState:wr,useDebugValue:Dr,useResponder:sr,useDeferredValue:function(e,n){var t=wr(e),r=t[0],i=t[1];return Nr(function(){var t=fr.suspense;fr.suspense=void 0===n?null:n;try{i(e)}finally{fr.suspense=t}},[e,n]),r},useTransition:function(e){var n=wr(!1),t=n[0];return n=n[1],[Ur(Hr.bind(null,n,e),[n,e]),t]},useEvent:function(){}},Lr={readContext:_t,useCallback:Fr,useContext:_t,useEffect:zr,useImperativeHandle:Mr,useLayoutEffect:Ir,useMemo:Qr,useReducer:Er,useRef:Rr,useState:function(){return Er(Sr)},useDebugValue:Dr,useResponder:sr,useDeferredValue:function(e,n){var t=Er(Sr),r=t[0],i=t[1];return zr(function(){var t=fr.suspense;fr.suspense=void 0===n?null:n;try{i(e)}finally{fr.suspense=t}},[e,n]),r},useTransition:function(e){var n=Er(Sr),t=n[0];return n=n[1],[Fr(Hr.bind(null,n,e),[n,e]),t]},useEvent:Wr},Vr={readContext:_t,useCallback:Fr,useContext:_t,useEffect:zr,useImperativeHandle:Mr,useLayoutEffect:Ir,useMemo:Qr,useReducer:kr,useRef:Rr,useState:function(){return kr(Sr)},useDebugValue:Dr,useResponder:sr,useDeferredValue:function(e,n){var t=kr(Sr),r=t[0],i=t[1];return zr(function(){var t=fr.suspense;fr.suspense=void 0===n?null:n;try{i(e)}finally{fr.suspense=t}},[e,n]),r},useTransition:function(e){var n=kr(Sr),t=n[0];return n=n[1],[Fr(Hr.bind(null,n,e),[n,e]),t]},useEvent:Wr},Yr=be.ReactCurrentOwner,qr=!1;function Xr(e,n,t,r){n.child=null===e?Gt(n,null,t,r):Kt(n,e.child,t,r)}function $r(e,n,t,r,i){t=t.render;var l=n.ref;return Ct(n,i),r=br(e,n,t,r,l,i),null===e||qr?(n.effectTag|=1,Xr(e,n,r,i),n.child):(n.updateQueue=e.updateQueue,n.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),di(e,n,i))}function Kr(e,n,t,r,i,l){if(null===e){var a=t.type;return"function"!=typeof a||$l(a)||void 0!==a.defaultProps||null!==t.compare||void 0!==t.defaultProps?((e=Jl(t.type,null,r,null,n.mode,l)).ref=n.ref,e.return=n,n.child=e):(n.tag=15,n.type=a,Gr(e,n,a,r,i,l))}return a=e.child,i<l&&(i=a.memoizedProps,(t=null!==(t=t.compare)?t:vt)(i,r)&&e.ref===n.ref)?di(e,n,l):(n.effectTag|=1,(e=Gl(a,r)).ref=n.ref,e.return=n,n.child=e)}function Gr(e,n,t,r,i,l){return null!==e&&vt(e.memoizedProps,r)&&e.ref===n.ref&&(qr=!1,i<l)?(n.expirationTime=e.expirationTime,di(e,n,l)):Zr(e,n,t,r,l)}function Jr(e,n){var t=n.ref;(null===e&&null!==t||null!==e&&e.ref!==t)&&(n.effectTag|=128)}function Zr(e,n,t,r,i){var l=Fn(t)?Dn:An.current;return l=Un(n,l),Ct(n,i),t=br(e,n,t,r,l,i),null===e||qr?(n.effectTag|=1,Xr(e,n,t,i),n.child):(n.updateQueue=e.updateQueue,n.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),di(e,n,i))}function ei(e,n,t,r,i){if(Fn(t)){var l=!0;Wn(n)}else l=!1;if(Ct(n,i),null===n.stateNode)null!==e&&(e.alternate=null,n.alternate=null,n.effectTag|=2),Bt(n,t,r),Vt(n,t,r,i),r=!0;else if(null===e){var a=n.stateNode,o=n.memoizedProps;a.props=o;var u=a.context,s=t.contextType;"object"==typeof s&&null!==s?s=_t(s):s=Un(n,s=Fn(t)?Dn:An.current);var c=t.getDerivedStateFromProps,f="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;f||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==r||u!==s)&&Lt(n,a,r,s),Nt=!1;var d=n.memoizedState;a.state=d,Ut(n,r,a,i),u=n.memoizedState,o!==r||d!==u||Mn.current||Nt?("function"==typeof c&&(jt(n,t,c,r),u=n.memoizedState),(o=Nt||Ot(n,t,o,r,d,u,s))?(f||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(n.effectTag|=4)):("function"==typeof a.componentDidMount&&(n.effectTag|=4),n.memoizedProps=r,n.memoizedState=u),a.props=r,a.state=u,a.context=s,r=o):("function"==typeof a.componentDidMount&&(n.effectTag|=4),r=!1)}else a=n.stateNode,It(e,n),o=n.memoizedProps,a.props=n.type===n.elementType?o:Tt(n.type,o),u=a.context,"object"==typeof(s=t.contextType)&&null!==s?s=_t(s):s=Un(n,s=Fn(t)?Dn:An.current),(f="function"==typeof(c=t.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==r||u!==s)&&Lt(n,a,r,s),Nt=!1,u=n.memoizedState,a.state=u,Ut(n,r,a,i),d=n.memoizedState,o!==r||u!==d||Mn.current||Nt?("function"==typeof c&&(jt(n,t,c,r),d=n.memoizedState),(c=Nt||Ot(n,t,o,r,u,d,s))?(f||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,d,s),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,d,s)),"function"==typeof a.componentDidUpdate&&(n.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(n.effectTag|=256)):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&u===e.memoizedState||(n.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&u===e.memoizedState||(n.effectTag|=256),n.memoizedProps=r,n.memoizedState=d),a.props=r,a.state=d,a.context=s,r=c):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&u===e.memoizedState||(n.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&u===e.memoizedState||(n.effectTag|=256),r=!1);return ni(e,n,t,r,l,i)}function ni(e,n,t,r,i,l){Jr(e,n);var a=0!=(64&n.effectTag);if(!r&&!a)return i&&On(n,t,!1),di(e,n,l);r=n.stateNode,Yr.current=n;var o=a&&"function"!=typeof t.getDerivedStateFromError?null:r.render();return n.effectTag|=1,null!==e&&a?(n.child=Kt(n,e.child,null,l),n.child=Kt(n,null,o,l)):Xr(e,n,o,l),n.memoizedState=r.state,i&&On(n,t,!0),n.child}function ti(e){var n=e.stateNode;n.pendingContext?Hn(0,n.pendingContext,n.pendingContext!==n.context):n.context&&Hn(0,n.context,!1),rr(e,n.containerInfo)}var ri,ii,li,ai,oi={dehydrated:null,retryTime:0};function ui(e,n,t){var r,i=n.mode,l=n.pendingProps,a=or.current,o=!1;if((r=0!=(64&n.effectTag))||(r=0!=(2&a)&&(null===e||null!==e.memoizedState)),r?(o=!0,n.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===l.fallback||!0===l.unstable_avoidThisFallback||(a|=1),zn(or,1&a),null===e){if(o){if(o=l.fallback,(l=Zl(null,i,0,null)).return=n,0==(2&n.mode))for(e=null!==n.memoizedState?n.child.child:n.child,l.child=e;null!==e;)e.return=l,e=e.sibling;return(t=Zl(o,i,t,null)).return=n,l.sibling=t,n.memoizedState=oi,n.child=l,t}return i=l.children,n.memoizedState=null,n.child=Gt(n,null,i,t)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,o){if(l=l.fallback,(t=Gl(e,e.pendingProps)).return=n,0==(2&n.mode)&&(o=null!==n.memoizedState?n.child.child:n.child)!==e.child)for(t.child=o;null!==o;)o.return=t,o=o.sibling;return(i=Gl(i,l)).return=n,t.sibling=i,t.childExpirationTime=0,n.memoizedState=oi,n.child=t,i}return t=Kt(n,e.child,l.children,t),n.memoizedState=null,n.child=t}if(e=e.child,o){if(o=l.fallback,(l=Zl(null,i,0,null)).return=n,l.child=e,null!==e&&(e.return=l),0==(2&n.mode))for(e=null!==n.memoizedState?n.child.child:n.child,l.child=e;null!==e;)e.return=l,e=e.sibling;return(t=Zl(o,i,t,null)).return=n,l.sibling=t,t.effectTag|=2,l.childExpirationTime=0,n.memoizedState=oi,n.child=l,t}return n.memoizedState=null,n.child=Kt(n,e,l.children,t)}function si(e,n){e.expirationTime<n&&(e.expirationTime=n);var t=e.alternate;null!==t&&t.expirationTime<n&&(t.expirationTime=n),Rt(e.return,n)}function ci(e,n,t,r,i,l){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:t,tailExpiration:0,tailMode:i,lastEffect:l}:(a.isBackwards=n,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=t,a.tailExpiration=0,a.tailMode=i,a.lastEffect=l)}function fi(e,n,t){var r=n.pendingProps,i=r.revealOrder,l=r.tail;if(Xr(e,n,r.children,t),0!=(2&(r=or.current)))r=1&r|2,n.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=n.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&si(e,t);else if(19===e.tag)si(e,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(zn(or,r),0==(2&n.mode))n.memoizedState=null;else switch(i){case"forwards":for(t=n.child,i=null;null!==t;)null!==(e=t.alternate)&&null===ur(e)&&(i=t),t=t.sibling;null===(t=i)?(i=n.child,n.child=null):(i=t.sibling,t.sibling=null),ci(n,!1,i,t,l,n.lastEffect);break;case"backwards":for(t=null,i=n.child,n.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ur(e)){n.child=i;break}e=i.sibling,i.sibling=t,t=i,i=e}ci(n,!0,t,null,l,n.lastEffect);break;case"together":ci(n,!1,null,null,void 0,n.lastEffect);break;default:n.memoizedState=null}return n.child}function di(e,n,t){null!==e&&(n.dependencies=e.dependencies);var r=n.expirationTime;if(0!==r&&_l(r),n.childExpirationTime<t)return null;if(null!==e&&n.child!==e.child)throw Error("Resuming work not yet implemented.");if(null!==n.child){for(t=Gl(e=n.child,e.pendingProps),n.child=t,t.return=n;null!==e.sibling;)e=e.sibling,(t=t.sibling=Gl(e,e.pendingProps)).return=n;t.sibling=null}return n.child}function pi(e,n,t,r){for(var i=n.child;null!==i;){if(5===i.tag){var l=i.stateNode;t&&r&&(l=Rn(l)),mn(e,l.node)}else if(6===i.tag){if(l=i.stateNode,t&&r)throw Error("Not yet implemented.");mn(e,l.node)}else if(4!==i.tag){if(13===i.tag&&0!=(4&i.effectTag)&&(l=null!==i.memoizedState)){var a=i.child;if(null!==a&&(null!==a.child&&(a.child.return=a,pi(e,a,!0,l)),null!==(l=a.sibling))){l.return=i,i=l;continue}}if(null!==i.child){i.child.return=i,i=i.child;continue}}if(i===n)break;for(;null===i.sibling;){if(null===i.return||i.return===n)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function hi(e,n){switch(e.tailMode){case"hidden":n=e.tail;for(var t=null;null!==n;)null!==n.alternate&&(t=n),n=n.sibling;null===t?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?n||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function mi(e,n,t){var r=n.pendingProps;switch(n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Fn(n.type)&&Qn(),null;case 3:return ir(),Nn(Mn),Nn(An),(e=n.stateNode).pendingContext&&(e.context=e.pendingContext,e.pendingContext=null),ii(n),null;case 5:ar(n);var i=tr(nr.current);if(t=n.type,null!==e&&null!=n.stateNode)li(e,n,t,r,i),e.ref!==n.ref&&(n.effectTag|=128);else{if(!r){if(null===n.stateNode)throw Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return null}tr(Zt.current),e=Sn,Sn+=2,t=xn(t);var l=Ze(null,Le,r,t.validAttributes);i=un(e,t.uiViewClassName,i,l,n),e=new En(e,t,r,n),ri(e={node:i,canonical:e},n,!1,!1),n.stateNode=e,null!==n.ref&&(n.effectTag|=128)}return null;case 6:if(e&&null!=n.stateNode)ai(e,n,e.memoizedProps,r);else{if("string"!=typeof r&&null===n.stateNode)throw Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");e=tr(nr.current),i=tr(Zt.current),n.stateNode=kn(r,e,i,n)}return null;case 13:return Nn(or),r=n.memoizedState,0!=(64&n.effectTag)?(n.expirationTime=t,n):(r=null!==r,i=!1,null!==e&&(i=null!==(t=e.memoizedState),r||null===t||null!==(t=e.child.sibling)&&(null!==(l=n.firstEffect)?(n.firstEffect=t,t.nextEffect=l):(n.firstEffect=n.lastEffect=t,t.nextEffect=null),t.effectTag=8)),r&&!i&&0!=(2&n.mode)&&(null===e&&!0!==n.memoizedProps.unstable_avoidThisFallback||0!=(1&or.current)?Gi===Wi&&(Gi=Li):(Gi!==Wi&&Gi!==Li||(Gi=Vi),0!==tl&&null!==Xi&&(ia(Xi,Ki),la(Xi,tl)))),r&&(n.effectTag|=4),null);case 4:return ir(),ii(n),null;case 10:return Pt(n),null;case 17:return Fn(n.type)&&Qn(),null;case 19:if(Nn(or),null===(r=n.memoizedState))return null;if(i=0!=(64&n.effectTag),null===(l=r.rendering)){if(i)hi(r,!1);else if(Gi!==Wi||null!==e&&0!=(64&e.effectTag))for(e=n.child;null!==e;){if(null!==(l=ur(e))){for(n.effectTag|=64,hi(r,!1),null!==(e=l.updateQueue)&&(n.updateQueue=e,n.effectTag|=4),null===r.lastEffect&&(n.firstEffect=null),n.lastEffect=r.lastEffect,e=t,r=n.child;null!==r;)t=e,(i=r).effectTag&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,null===(l=i.alternate)?(i.childExpirationTime=0,i.expirationTime=t,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null):(i.childExpirationTime=l.childExpirationTime,i.expirationTime=l.expirationTime,i.child=l.child,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,t=l.dependencies,i.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders}),r=r.sibling;return zn(or,1&or.current|2),n.child}e=e.sibling}}else{if(!i)if(null!==(e=ur(l))){if(n.effectTag|=64,i=!0,null!==(e=e.updateQueue)&&(n.updateQueue=e,n.effectTag|=4),hi(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate)return null!==(n=n.lastEffect=r.lastEffect)&&(n.nextEffect=null),null}else 2*ot()-r.renderingStartTime>r.tailExpiration&&1<t&&(n.effectTag|=64,i=!0,hi(r,!1),n.expirationTime=n.childExpirationTime=t-1);r.isBackwards?(l.sibling=n.child,n.child=l):(null!==(e=r.last)?e.sibling=l:n.child=l,r.last=l)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=ot()+500),e=r.tail,r.rendering=e,r.tail=e.sibling,r.lastEffect=n.lastEffect,r.renderingStartTime=ot(),e.sibling=null,n=or.current,zn(or,i?1&n|2:1&n),e):null}throw Error("Unknown unit of work tag ("+n.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function gi(e){switch(e.tag){case 1:Fn(e.type)&&Qn();var n=e.effectTag;return 4096&n?(e.effectTag=-4097&n|64,e):null;case 3:if(ir(),Nn(Mn),Nn(An),0!=(64&(n=e.effectTag)))throw Error("The root failed to unmount after an error. This is likely a bug in React. Please file an issue.");return e.effectTag=-4097&n|64,e;case 5:return ar(e),null;case 13:return Nn(or),4096&(n=e.effectTag)?(e.effectTag=-4097&n|64,e):null;case 19:return Nn(or),null;case 4:return ir(),null;case 10:return Pt(e),null;default:return null}}function vi(e,n){return{value:e,source:n,stack:bt(n)}}if(ri=function(e,n,t,r){for(var i=n.child;null!==i;){if(5===i.tag){var l=i.stateNode;t&&r&&(l=Rn(l)),hn(e.node,l.node)}else if(6===i.tag){if(l=i.stateNode,t&&r)throw Error("Not yet implemented.");hn(e.node,l.node)}else if(4!==i.tag){if(13===i.tag&&0!=(4&i.effectTag)&&(l=null!==i.memoizedState)){var a=i.child;if(null!==a&&(null!==a.child&&(a.child.return=a,ri(e,a,!0,l)),null!==(l=a.sibling))){l.return=i,i=l;continue}}if(null!==i.child){i.child.return=i,i=i.child;continue}}if(i===n)break;for(;null===i.sibling;){if(null===i.return||i.return===n)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},ii=function(e){var n=e.stateNode;if(null!==e.firstEffect){var t=n.containerInfo,r=pn(t);pi(r,e,!1,!1),n.pendingChildren=r,e.effectTag|=4,gn(t,r)}},li=function(e,n,t,r){t=e.stateNode;var i=e.memoizedProps;if((e=null===n.firstEffect)&&i===r)n.stateNode=t;else{var l=n.stateNode;tr(Zt.current);var a=null;i!==r&&(i=Ze(null,i,r,l.canonical.viewConfig.validAttributes),l.canonical.currentProps=r,a=i),e&&null===a?n.stateNode=t:(r=a,l=t.node,t={node:e?null!==r?dn(l,r):sn(l):null!==r?fn(l,r):cn(l),canonical:t.canonical},n.stateNode=t,e?n.effectTag|=4:ri(t,n,!1,!1))}},ai=function(e,n,t,r){t!==r?(e=tr(nr.current),t=tr(Zt.current),n.stateNode=kn(r,e,t,n),n.effectTag|=4):n.stateNode=e.stateNode},"function"!=typeof u.ReactFiberErrorDialog.showErrorDialog)throw Error("Expected ReactFiberErrorDialog.showErrorDialog to be a function.");var yi="function"==typeof WeakSet?WeakSet:Set;function bi(e,n){var t,r=n.source,i=n.stack;null===i&&null!==r&&(i=bt(r)),n={componentName:null!==r?Qe(r.type):null,componentStack:null!==i?i:"",error:n.value,errorBoundary:null,errorBoundaryName:null,errorBoundaryFound:!1,willRetry:!1},null!==e&&1===e.tag&&(n.errorBoundary=e.stateNode,n.errorBoundaryName=Qe(e.type),n.errorBoundaryFound=!0,n.willRetry=!0);try{t=n,!1!==u.ReactFiberErrorDialog.showErrorDialog(t)&&console.error(t.error)}catch(e){setTimeout(function(){throw e})}}function Ti(e,n){try{n.props=e.memoizedProps,n.state=e.memoizedState,n.componentWillUnmount()}catch(n){Ol(e,n)}}function xi(e){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){Ol(e,n)}else n.current=null}function Si(e,n){switch(n.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&n.effectTag&&null!==e){var t=e.memoizedProps,r=e.memoizedState;n=(e=n.stateNode).getSnapshotBeforeUpdate(n.elementType===n.type?t:Tt(n.type,t),r),e.__reactInternalSnapshotBeforeUpdate=n}return;case 3:case 5:case 6:case 4:case 17:return}throw Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}function Ei(e,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var t=n=n.next;do{if((t.tag&e)===e){var r=t.destroy;t.destroy=void 0,void 0!==r&&r()}t=t.next}while(t!==n)}}function ki(e,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var t=n=n.next;do{if((t.tag&e)===e){var r=t.create;t.destroy=r()}t=t.next}while(t!==n)}}function wi(e,n,t){switch(t.tag){case 0:case 11:case 15:case 22:return void ki(3,t);case 1:if(e=t.stateNode,4&t.effectTag)if(null===n)e.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:Tt(t.type,n.memoizedProps);e.componentDidUpdate(r,n.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(n=t.updateQueue)&&Ft(t,n,e));case 3:if(null!==(n=t.updateQueue)){if(e=null,null!==t.child)switch(t.child.tag){case 5:e=t.child.stateNode.canonical;break;case 1:e=t.child.stateNode}Ft(t,n,e)}return;case 5:if(null===n&&4&t.effectTag)throw Error("The current renderer does not support mutation. This error is likely caused by a bug in React. Please file an issue.");return;case 6:case 4:case 12:case 13:return;case 19:case 17:case 20:case 21:return}throw Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}function Pi(e,n,t){switch("function"==typeof Yl&&Yl(n),n.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=n.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;ct(97<t?97:t,function(){var e=r;do{var t=e.destroy;if(void 0!==t){var i=n;try{t()}catch(e){Ol(i,e)}}e=e.next}while(e!==r)})}break;case 1:xi(n),"function"==typeof(t=n.stateNode).componentWillUnmount&&Ti(n,t);break;case 5:xi(n);break;case 4:pn(n.stateNode.containerInfo)}}function Ri(e){var n=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==n&&Ri(n)}function Ci(e,n){switch(n.tag){case 0:case 11:case 14:case 15:case 22:return void Ei(3,n);case 12:return;case 13:return null!==n.memoizedState&&(il=ot()),void _i(n);case 19:return void _i(n)}e:{switch(n.tag){case 1:case 5:case 6:case 20:break e;case 3:case 4:break e}throw Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}}function _i(e){var n=e.updateQueue;if(null!==n){e.updateQueue=null;var t=e.stateNode;null===t&&(t=e.stateNode=new yi),n.forEach(function(n){var r=Ll.bind(null,e,n);t.has(n)||(t.add(n),n.then(r,r))})}}var Ni="function"==typeof WeakMap?WeakMap:Map;function zi(e,n,t){(t=At(t,null)).tag=3,t.payload={element:null};var r=n.value;return t.callback=function(){ol||(ol=!0,ul=r),bi(e,n)},t}function Ii(e,n,t){(t=At(t,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=n.value;t.payload=function(){return bi(e,n),r(i)}}var l=e.stateNode;return null!==l&&"function"==typeof l.componentDidCatch&&(t.callback=function(){"function"!=typeof r&&(null===sl?sl=new Set([this]):sl.add(this),bi(e,n));var t=n.stack;this.componentDidCatch(n.value,{componentStack:null!==t?t:""})}),t}var Ai,Mi=Math.ceil,Di=be.ReactCurrentDispatcher,Ui=be.ReactCurrentOwner,Fi=0,Qi=8,Hi=16,ji=32,Wi=0,Oi=1,Bi=2,Li=3,Vi=4,Yi=5,qi=Fi,Xi=null,$i=null,Ki=0,Gi=Wi,Ji=null,Zi=1073741823,el=1073741823,nl=null,tl=0,rl=!1,il=0,ll=500,al=null,ol=!1,ul=null,sl=null,cl=!1,fl=null,dl=90,pl=null,hl=0,ml=null,gl=0;function vl(){return(48&qi)!==Fi?1073741821-(ot()/10|0):0!==gl?gl:gl=1073741821-(ot()/10|0)}function yl(e,n,t){if(0==(2&(n=n.mode)))return 1073741823;var r=ut();if(0==(4&n))return 99===r?1073741823:1073741822;if((qi&Hi)!==Fi)return Ki;if(null!==t)e=1073741821-25*(1+((1073741821-e+(0|t.timeoutMs||5e3)/10)/25|0));else switch(r){case 99:e=1073741823;break;case 98:e=1073741821-10*(1+((1073741821-e+15)/10|0));break;case 97:case 96:e=1073741821-25*(1+((1073741821-e+500)/25|0));break;case 95:e=2;break;default:throw Error("Expected a valid priority level")}return null!==Xi&&e===Ki&&--e,e}function bl(e,n){if(50<hl)throw hl=0,ml=null,Error("Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.");if(null!==(e=Tl(e,n))){var t=ut();1073741823===n?(qi&Qi)!==Fi&&(48&qi)===Fi?kl(e):(Sl(e),qi===Fi&&pt()):Sl(e),(4&qi)===Fi||98!==t&&99!==t||(null===pl?pl=new Map([[e,n]]):(void 0===(t=pl.get(e))||t>n)&&pl.set(e,n))}}function Tl(e,n){e.expirationTime<n&&(e.expirationTime=n);var t=e.alternate;null!==t&&t.expirationTime<n&&(t.expirationTime=n);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(t=r.alternate,r.childExpirationTime<n&&(r.childExpirationTime=n),null!==t&&t.childExpirationTime<n&&(t.childExpirationTime=n),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Xi===i&&(_l(n),Gi===Vi&&ia(i,Ki)),la(i,n)),i}function xl(e){var n=e.lastExpiredTime;if(0!==n)return n;if(!ra(e,n=e.firstPendingTime))return n;var t=e.lastPingedTime;return 2>=(e=t>(e=e.nextKnownPendingLevel)?t:e)&&n!==e?0:e}function Sl(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=dt(kl.bind(null,e));else{var n=xl(e),t=e.callbackNode;if(0===n)null!==t&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=vl();if(1073741823===n?r=99:1===n||2===n?r=95:r=0>=(r=10*(1073741821-n)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==t){var i=e.callbackPriority;if(e.callbackExpirationTime===n&&i>=r)return;t!==et&&Vn(t)}e.callbackExpirationTime=n,e.callbackPriority=r,n=1073741823===n?dt(kl.bind(null,e)):ft(r,El.bind(null,e),{timeout:10*(1073741821-n)-ot()}),e.callbackNode=n}}}function El(e,n){if(gl=0,n){n=vl();var t=e.lastExpiredTime;return(0===t||t>n)&&(e.lastExpiredTime=n),Sl(e),null}if(0===(t=xl(e)))return null;if(n=e.callbackNode,(48&qi)!==Fi)throw Error("Should not already be working.");Hl();var r=t,i=qi;qi|=Hi;var l=Rl();for(e===Xi&&r===Ki||wl(e,r);;)try{Il();break}catch(n){Pl(e,n)}if(wt(),Di.current=l,qi=i,null!==$i?i=Wi:(Xi=null,i=Gi),i!==Wi){if(i===Bi&&(i=Nl(e,t=2<t?2:t)),i===Oi)throw n=Ji,wl(e,t),ia(e,t),Sl(e),n;switch(r=e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,i){case Wi:case Oi:throw Error("Root did not complete. This is a bug in React.");case Bi:Ul(e);break;case Li:if(ia(e,t),t===(i=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Dl(r)),1073741823===Zi&&10<(r=il+ll-ot())){if(rl&&(0===(l=e.lastPingedTime)||l>=t)){e.lastPingedTime=t,wl(e,t);break}if(0!==(l=xl(e))&&l!==t)break;if(0!==i&&i!==t){e.lastPingedTime=i;break}e.timeoutHandle=wn(Ul.bind(null,e),r);break}Ul(e);break;case Vi:if(ia(e,t),t===(i=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Dl(r)),rl&&(0===(r=e.lastPingedTime)||r>=t)){e.lastPingedTime=t,wl(e,t);break}if(0!==(r=xl(e))&&r!==t)break;if(0!==i&&i!==t){e.lastPingedTime=i;break}if(1073741823!==el?r=10*(1073741821-el)-ot():1073741823===Zi?r=0:(r=10*(1073741821-Zi)-5e3,t=10*(1073741821-t)-(i=ot()),0>(r=i-r)&&(r=0),t<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Mi(r/1960))-r)&&(r=t)),10<r){e.timeoutHandle=wn(Ul.bind(null,e),r);break}Ul(e);break;case Yi:if(1073741823!==Zi&&null!==nl){l=Zi;var a=nl;if(0>=(r=0|a.busyMinDurationMs)?r=0:(i=0|a.busyDelayMs,r=(l=ot()-(10*(1073741821-l)-(0|a.timeoutMs||5e3)))<=i?0:i+r-l),10<r){ia(e,t),e.timeoutHandle=wn(Ul.bind(null,e),r);break}}Ul(e);break;default:throw Error("Unknown root exit status.")}}return Sl(e),e.callbackNode===n?El.bind(null,e):null}function kl(e){if((48&qi)!==Fi)throw Error("Should not already be working.");Hl();var n=e.lastExpiredTime,t=Nl(e,n=0!==n?e===Xi&&Ki>=n?Ki:n:1073741823);if(0!==e.tag&&t===Bi&&(t=Nl(e,n=2<n?2:n)),t===Oi)throw t=Ji,wl(e,n),ia(e,n),Sl(e),t;return e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,Ul(e),Sl(e),null}function wl(e,n){e.finishedWork=null,e.finishedExpirationTime=0;var t=e.timeoutHandle;if(-1!==t&&(e.timeoutHandle=-1,Pn(t)),null!==$i)for(t=$i.return;null!==t;){var r=t;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Qn();break;case 3:ir(),Nn(Mn),Nn(An);break;case 5:ar(r);break;case 4:ir();break;case 13:case 19:Nn(or);break;case 10:Pt(r)}t=t.return}Xi=e,$i=Gl(e.current,null),Ki=n,Gi=Wi,Ji=null,el=Zi=1073741823,nl=null,tl=0,rl=!1}function Pl(e,n){for(;;){try{if(wt(),cr.current=Or,gr)for(var t=pr.memoizedState;null!==t;){var r=t.queue;null!==r&&(r.pending=null),t=t.next}if(dr=0,mr=hr=pr=null,gr=!1,null===$i||null===$i.return)return Gi=Oi,Ji=n,$i=null;e:{var i=e,l=$i.return,a=$i,o=n;if(n=Ki,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==o&&"object"==typeof o&&"function"==typeof o.then){var u=o;if(0==(2&a.mode)){var s=a.alternate;s?(a.updateQueue=s.updateQueue,a.memoizedState=s.memoizedState,a.expirationTime=s.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var c=0!=(1&or.current),f=l;do{var d;if(d=13===f.tag){var p=f.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var h=f.memoizedProps;d=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!c)}}if(d){var m=f.updateQueue;if(null===m){var g=new Set;g.add(u),f.updateQueue=g}else m.add(u);if(0==(2&f.mode)){if(f.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var v=At(1073741823,null);v.tag=2,Mt(a,v)}a.expirationTime=1073741823;break e}o=void 0,a=n;var y=i.pingCache;if(null===y?(y=i.pingCache=new Ni,o=new Set,y.set(u,o)):void 0===(o=y.get(u))&&(o=new Set,y.set(u,o)),!o.has(a)){o.add(a);var b=Bl.bind(null,i,u,a);u.then(b,b)}f.effectTag|=4096,f.expirationTime=n;break e}f=f.return}while(null!==f);o=Error((Qe(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+bt(a))}Gi!==Yi&&(Gi=Bi),o=vi(o,a),f=l;do{switch(f.tag){case 3:u=o,f.effectTag|=4096,f.expirationTime=n,Dt(f,zi(f,u,n));break e;case 1:u=o;var T=f.type,x=f.stateNode;if(0==(64&f.effectTag)&&("function"==typeof T.getDerivedStateFromError||null!==x&&"function"==typeof x.componentDidCatch&&(null===sl||!sl.has(x)))){f.effectTag|=4096,f.expirationTime=n,Dt(f,Ii(f,u,n));break e}}f=f.return}while(null!==f)}$i=Ml($i)}catch(e){n=e;continue}break}}function Rl(){var e=Di.current;return Di.current=Or,null===e?Or:e}function Cl(e,n){e<Zi&&2<e&&(Zi=e),null!==n&&e<el&&2<e&&(el=e,nl=n)}function _l(e){e>tl&&(tl=e)}function Nl(e,n){var t=qi;qi|=Hi;var r=Rl();for(e===Xi&&n===Ki||wl(e,n);;)try{zl();break}catch(n){Pl(e,n)}if(wt(),qi=t,Di.current=r,null!==$i)throw Error("Cannot commit an incomplete root. This error is likely caused by a bug in React. Please file an issue.");return Xi=null,Gi}function zl(){for(;null!==$i;)$i=Al($i)}function Il(){for(;null!==$i&&!nt();)$i=Al($i)}function Al(e){var n=Ai(e.alternate,e,Ki);return e.memoizedProps=e.pendingProps,null===n&&(n=Ml(e)),Ui.current=null,n}function Ml(e){$i=e;do{var n=$i.alternate;if(e=$i.return,0==(2048&$i.effectTag)){if(n=mi(n,$i,Ki),1===Ki||1!==$i.childExpirationTime){for(var t=0,r=$i.child;null!==r;){var i=r.expirationTime,l=r.childExpirationTime;i>t&&(t=i),l>t&&(t=l),r=r.sibling}$i.childExpirationTime=t}if(null!==n)return n;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=$i.firstEffect),null!==$i.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=$i.firstEffect),e.lastEffect=$i.lastEffect),1<$i.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=$i:e.firstEffect=$i,e.lastEffect=$i))}else{if(null!==(n=gi($i)))return n.effectTag&=2047,n;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(n=$i.sibling))return n;$i=e}while(null!==$i);return Gi===Wi&&(Gi=Yi),null}function Dl(e){var n=e.expirationTime;return n>(e=e.childExpirationTime)?n:e}function Ul(e){var n=ut();return ct(99,Fl.bind(null,e,n)),null}function Fl(e,n){do{Hl()}while(null!==fl);if((48&qi)!==Fi)throw Error("Should not already be working.");var t=e.finishedWork,r=e.finishedExpirationTime;if(null===t)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,t===e.current)throw Error("Cannot commit the same tree as before. This error is likely caused by a bug in React. Please file an issue.");e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=Dl(t);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Xi&&($i=Xi=null,Ki=0),1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t,i=t.firstEffect):i=t:i=t.firstEffect,null!==i){var l=qi;qi|=ji,Ui.current=null,al=i;do{try{Ql()}catch(e){if(null===al)throw Error("Should be working on an effect.");Ol(al,e),al=al.nextEffect}}while(null!==al);al=i;do{try{for(var a=e,o=n;null!==al;){var u=al.effectTag;if(128&u){var s=al.alternate;if(null!==s){var c=s.ref;null!==c&&("function"==typeof c?c(null):c.current=null)}}switch(1038&u){case 2:al.effectTag&=-3;break;case 6:al.effectTag&=-3,Ci(al.alternate,al);break;case 1024:al.effectTag&=-1025;break;case 1028:al.effectTag&=-1025,Ci(al.alternate,al);break;case 4:Ci(al.alternate,al);break;case 8:var f=al;e:for(var d=a,p=f,h=o,m=p;;)if(Pi(d,m,h),null!==m.child)m.child.return=m,m=m.child;else{if(m===p)break;for(;null===m.sibling;){if(null===m.return||m.return===p)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}Ri(f)}al=al.nextEffect}}catch(e){if(null===al)throw Error("Should be working on an effect.");Ol(al,e),al=al.nextEffect}}while(null!==al);e.current=t,al=i;do{try{for(u=e;null!==al;){var g=al.effectTag;if(36&g&&wi(u,al.alternate,al),128&g){s=void 0;var v=al.ref;if(null!==v){var y=al.stateNode;switch(al.tag){case 5:s=y.canonical;break;default:s=y}"function"==typeof v?v(s):v.current=s}}al=al.nextEffect}}catch(e){if(null===al)throw Error("Should be working on an effect.");Ol(al,e),al=al.nextEffect}}while(null!==al);al=null,tt(),qi=l}else e.current=t;if(cl)cl=!1,fl=e,dl=n;else for(al=i;null!==al;)n=al.nextEffect,al.nextEffect=null,al=n;if(0===(n=e.firstPendingTime)&&(sl=null),1073741823===n?e===ml?hl++:(hl=0,ml=e):hl=0,"function"==typeof Vl&&Vl(t.stateNode,r),Sl(e),ol)throw ol=!1,e=ul,ul=null,e;return(qi&Qi)!==Fi?null:(pt(),null)}function Ql(){for(;null!==al;){var e=al.effectTag;0!=(256&e)&&Si(al.alternate,al),0==(512&e)||cl||(cl=!0,ft(97,function(){return Hl(),null})),al=al.nextEffect}}function Hl(){if(90!==dl){var e=97<dl?97:dl;return dl=90,ct(e,jl)}}function jl(){if(null===fl)return!1;var e=fl;if(fl=null,(48&qi)!==Fi)throw Error("Cannot flush passive effects while already rendering.");var n=qi;for(qi|=ji,e=e.current.firstEffect;null!==e;){try{var t=e;if(0!=(512&t.effectTag))switch(t.tag){case 0:case 11:case 15:case 22:Ei(5,t),ki(5,t)}}catch(n){if(null===e)throw Error("Should be working on an effect.");Ol(e,n)}t=e.nextEffect,e.nextEffect=null,e=t}return qi=n,pt(),!0}function Wl(e,n,t){Mt(e,n=zi(e,n=vi(t,n),1073741823)),null!==(e=Tl(e,1073741823))&&Sl(e)}function Ol(e,n){if(3===e.tag)Wl(e,e,n);else for(var t=e.return;null!==t;){if(3===t.tag){Wl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===sl||!sl.has(r))){Mt(t,e=Ii(t,e=vi(n,e),1073741823)),null!==(t=Tl(t,1073741823))&&Sl(t);break}}t=t.return}}function Bl(e,n,t){var r=e.pingCache;null!==r&&r.delete(n),Xi===e&&Ki===t?Gi===Vi||Gi===Li&&1073741823===Zi&&ot()-il<ll?wl(e,Ki):rl=!0:ra(e,t)&&(0!==(n=e.lastPingedTime)&&n<t||(e.lastPingedTime=t,Sl(e)))}function Ll(e,n){var t=e.stateNode;null!==t&&t.delete(n),0===(n=0)&&(n=yl(n=vl(),e,null)),null!==(e=Tl(e,n))&&Sl(e)}Ai=function(e,n,t){var r=n.expirationTime;if(null!==e)if(e.memoizedProps!==n.pendingProps||Mn.current)qr=!0;else{if(r<t){switch(qr=!1,n.tag){case 3:ti(n);break;case 5:lr(n);break;case 1:Fn(n.type)&&Wn(n);break;case 4:rr(n,n.stateNode.containerInfo);break;case 10:r=n.memoizedProps.value;var i=n.type._context;zn(xt,i._currentValue2),i._currentValue2=r;break;case 13:if(null!==n.memoizedState)return 0!==(r=n.child.childExpirationTime)&&r>=t?ui(e,n,t):(zn(or,1&or.current),null!==(n=di(e,n,t))?n.sibling:null);zn(or,1&or.current);break;case 19:if(r=n.childExpirationTime>=t,0!=(64&e.effectTag)){if(r)return fi(e,n,t);n.effectTag|=64}if(null!==(i=n.memoizedState)&&(i.rendering=null,i.tail=null),zn(or,or.current),!r)return null}return di(e,n,t)}qr=!1}else qr=!1;switch(n.expirationTime=0,n.tag){case 2:if(r=n.type,null!==e&&(e.alternate=null,n.alternate=null,n.effectTag|=2),e=n.pendingProps,i=Un(n,An.current),Ct(n,t),i=br(null,n,r,e,i,t),n.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(n.tag=1,n.memoizedState=null,n.updateQueue=null,Fn(r)){var l=!0;Wn(n)}else l=!1;n.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,zt(n);var a=r.getDerivedStateFromProps;"function"==typeof a&&jt(n,r,a,e),i.updater=Wt,n.stateNode=i,i._reactInternalFiber=n,Vt(n,r,e,t),n=ni(null,n,r,!0,l,t)}else n.tag=0,Xr(null,n,i,t),n=n.child;return n;case 16:e:{if(i=n.elementType,null!==e&&(e.alternate=null,n.alternate=null,n.effectTag|=2),e=n.pendingProps,Fe(i),1!==i._status)throw i._result;switch(i=i._result,n.type=i,l=n.tag=Kl(i),e=Tt(i,e),l){case 0:n=Zr(null,n,i,e,t);break e;case 1:n=ei(null,n,i,e,t);break e;case 11:n=$r(null,n,i,e,t);break e;case 14:n=Kr(null,n,i,Tt(i.type,e),r,t);break e}throw Error("Element type is invalid. Received a promise that resolves to: "+i+". Lazy element type must resolve to a class or function.")}return n;case 0:return r=n.type,i=n.pendingProps,Zr(e,n,r,i=n.elementType===r?i:Tt(r,i),t);case 1:return r=n.type,i=n.pendingProps,ei(e,n,r,i=n.elementType===r?i:Tt(r,i),t);case 3:if(ti(n),r=n.updateQueue,null===e||null===r)throw Error("If the root does not have an updateQueue, we should have already bailed out. This error is likely caused by a bug in React. Please file an issue.");return r=n.pendingProps,i=null!==(i=n.memoizedState)?i.element:null,It(e,n),Ut(n,r,null,t),(r=n.memoizedState.element)===i?n=di(e,n,t):(Xr(e,n,r,t),n=n.child),n;case 5:return lr(n),r=n.pendingProps.children,Jr(e,n),Xr(e,n,r,t),n=n.child;case 6:return null;case 13:return ui(e,n,t);case 4:return rr(n,n.stateNode.containerInfo),r=n.pendingProps,null===e?n.child=Kt(n,null,r,t):Xr(e,n,r,t),n.child;case 11:return r=n.type,i=n.pendingProps,$r(e,n,r,i=n.elementType===r?i:Tt(r,i),t);case 7:return Xr(e,n,n.pendingProps,t),n.child;case 8:case 12:return Xr(e,n,n.pendingProps.children,t),n.child;case 10:e:{r=n.type._context,i=n.pendingProps,a=n.memoizedProps,l=i.value;var o=n.type._context;if(zn(xt,o._currentValue2),o._currentValue2=l,null!==a)if(o=a.value,0===(l=mt(o,l)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(o,l):1073741823))){if(a.children===i.children&&!Mn.current){n=di(e,n,t);break e}}else for(null!==(o=n.child)&&(o.return=n);null!==o;){var u=o.dependencies;if(null!==u){a=o.child;for(var s=u.firstContext;null!==s;){if(s.context===r&&0!=(s.observedBits&l)){1===o.tag&&((s=At(t,null)).tag=2,Mt(o,s)),o.expirationTime<t&&(o.expirationTime=t),null!==(s=o.alternate)&&s.expirationTime<t&&(s.expirationTime=t),Rt(o.return,t),u.expirationTime<t&&(u.expirationTime=t);break}s=s.next}}else a=10===o.tag&&o.type===n.type?null:o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===n){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Xr(e,n,i.children,t),n=n.child}return n;case 9:return i=n.type,r=(l=n.pendingProps).children,Ct(n,t),r=r(i=_t(i,l.unstable_observedBits)),n.effectTag|=1,Xr(e,n,r,t),n.child;case 14:return l=Tt(i=n.type,n.pendingProps),Kr(e,n,i,l=Tt(i.type,l),r,t);case 15:return Gr(e,n,n.type,n.pendingProps,r,t);case 17:return r=n.type,i=n.pendingProps,i=n.elementType===r?i:Tt(r,i),null!==e&&(e.alternate=null,n.alternate=null,n.effectTag|=2),n.tag=1,Fn(r)?(e=!0,Wn(n)):e=!1,Ct(n,t),Bt(n,r,i),Vt(n,r,i,t),ni(null,n,r,!0,e,t);case 19:return fi(e,n,t)}throw Error("Unknown unit of work tag ("+n.tag+"). This error is likely caused by a bug in React. Please file an issue.")};var Vl=null,Yl=null;function ql(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var n=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(n.isDisabled||!n.supportsFiber)return!0;try{var t=n.inject(e);Vl=function(e){try{n.onCommitFiberRoot(t,e,void 0,64==(64&e.current.effectTag))}catch(e){}},Yl=function(e){try{n.onCommitFiberUnmount(t,e)}catch(e){}}}catch(e){}return!0}function Xl(e,n,t,r){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function $l(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Kl(e){if("function"==typeof e)return $l(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===_e)return 11;if(e===Ie)return 14}return 2}function Gl(e,n){var t=e.alternate;return null===t?((t=new Xl(e.tag,n,e.key,e.mode)).elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=n,t.effectTag=0,t.nextEffect=null,t.firstEffect=null,t.lastEffect=null),t.childExpirationTime=e.childExpirationTime,t.expirationTime=e.expirationTime,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,n=e.dependencies,t.dependencies=null===n?null:{expirationTime:n.expirationTime,firstContext:n.firstContext,responders:n.responders},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function Jl(e,n,t,r,i,l){var a=2;if(r=e,"function"==typeof e)$l(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case Ee:return Zl(t.children,i,l,n);case Ce:a=8,i|=7;break;case ke:a=8,i|=1;break;case we:return(e=new Xl(12,t,n,8|i)).elementType=we,e.type=we,e.expirationTime=l,e;case Ne:return(e=new Xl(13,t,n,i)).type=Ne,e.elementType=Ne,e.expirationTime=l,e;case ze:return(e=new Xl(19,t,n,i)).elementType=ze,e.expirationTime=l,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Pe:a=10;break e;case Re:a=9;break e;case _e:a=11;break e;case Ie:a=14;break e;case Ae:a=16,r=null;break e;case Me:a=22;break e}throw Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: "+(null==e?e:typeof e)+".")}return(n=new Xl(a,t,n,i)).elementType=e,n.type=r,n.expirationTime=l,n}function Zl(e,n,t,r){return(e=new Xl(7,e,r,n)).expirationTime=t,e}function ea(e,n,t){return(e=new Xl(6,e,null,n)).expirationTime=t,e}function na(e,n,t){return(n=new Xl(4,null!==e.children?e.children:[],e.key,n)).expirationTime=t,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function ta(e,n,t){this.tag=n,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=t,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function ra(e,n){var t=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==t&&t>=n&&e<=n}function ia(e,n){var t=e.firstSuspendedTime,r=e.lastSuspendedTime;t<n&&(e.firstSuspendedTime=n),(r>n||0===t)&&(e.lastSuspendedTime=n),n<=e.lastPingedTime&&(e.lastPingedTime=0),n<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function la(e,n){n>e.firstPendingTime&&(e.firstPendingTime=n);var t=e.firstSuspendedTime;0!==t&&(n>=t?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:n>=e.lastSuspendedTime&&(e.lastSuspendedTime=n+1),n>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=n))}function aa(e){var n=e._reactInternalFiber;if(void 0===n){if("function"==typeof e.render)throw Error("Unable to find node on an unmounted component.");throw Error("Argument appears to not be a ReactComponent. Keys: "+Object.keys(e))}return null===(e=Oe(n))?null:e.stateNode}function oa(e,n,t,r){var i=n.current,l=vl(),a=Qt.suspense;l=yl(l,i,a);e:if(t){t=t._reactInternalFiber;n:{if(He(t)!==t||1!==t.tag)throw Error("Expected subtree parent to be a mounted class component. This error is likely caused by a bug in React. Please file an issue.");var o=t;do{switch(o.tag){case 3:o=o.stateNode.context;break n;case 1:if(Fn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break n}}o=o.return}while(null!==o);throw Error("Found unexpected detached subtree parent. This error is likely caused by a bug in React. Please file an issue.")}if(1===t.tag){var u=t.type;if(Fn(u)){t=jn(t,u,o);break e}}t=o}else t=In;return null===n.context?n.context=t:n.pendingContext=t,(n=At(l,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(n.callback=r),Mt(i,n),bl(i,l),l}function ua(e,n,t){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Se,key:null==r?null:""+r,children:e,containerInfo:n,implementation:t}}function sa(e){return null==e?null:"number"==typeof e?e:e._nativeTag?e._nativeTag:e.canonical&&e.canonical._nativeTag?e.canonical._nativeTag:null==(e=aa(e))?e:e.canonical?e.canonical._nativeTag:e._nativeTag}en=function(e,n){var t=qi;qi|=1;try{return e(n)}finally{(qi=t)===Fi&&pt()}};var ca,fa,da=new Map;ca={findFiberByHostInstance:ye,bundleType:0,version:"16.13.0",rendererPackageName:"react-native-renderer",rendererConfig:{getInspectorDataForViewTag:function(){throw Error("getInspectorDataForViewTag() is not available in production")},getInspectorDataForViewAtPoint:function(){throw Error("getInspectorDataForViewAtPoint() is not available in production.")}.bind(null,sa)}},fa=ca.findFiberByHostInstance,ql({bundleType:ca.bundleType,version:ca.version,rendererPackageName:ca.rendererPackageName,rendererConfig:ca.rendererConfig,overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:be.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Oe(e))?null:e.stateNode},findFiberByHostInstance:function(e){return fa?fa(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}),l.createPortal=function(e,n){return ua(e,n,null,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},l.dispatchCommand=function(e,n,t){null!=e._nativeTag&&(e._internalInstanceHandle?nativeFabricUIManager.dispatchCommand(e._internalInstanceHandle.stateNode.node,n,t):u.UIManager.dispatchViewManagerCommand(e._nativeTag,n,t))},l.findHostInstance_DEPRECATED=function(e){return null==e?null:e._nativeTag?e:e.canonical&&e.canonical._nativeTag?e.canonical:null==(e=aa(e))?e:e.canonical?e.canonical:e},l.findNodeHandle=sa,l.render=function(e,n,t){var r=da.get(n);if(!r){r=new ta(n,0,!1);var i=new Xl(3,null,null,0);r.current=i,i.stateNode=r,zt(i),da.set(n,r)}oa(e,r,null,t);e:if(e=r.current,e.child)switch(e.child.tag){case 5:e=e.child.stateNode.canonical;break e;default:e=e.child.stateNode}else e=null;return e},l.stopSurface=function(e){var n=da.get(e);n&&oa(null,n,null,function(){da.delete(e)})},l.unmountComponentAtNode=function(e){this.stopSurface(e)}},366,[16,96,176,59,199]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=t(r(d[1])),u=t(r(d[2])),s=t(r(d[3])),c=t(r(d[4])),o=t(r(d[5])),l=t(r(d[6]));function f(t){var n=v();return function(){var u,s=(0,o.default)(t);if(n){var l=(0,o.default)(this).constructor;u=Reflect.construct(s,arguments,l)}else u=s.apply(this,arguments);return(0,c.default)(this,u)}}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var p=r(d[7]),h=r(d[8]),y=r(d[9]),_=r(d[10]),S=(function(t){(0,s.default)(o,t);var c=f(o);function o(){var t;(0,n.default)(this,o),(t=c.call(this,l.default))._supportedEvents=['change','memoryWarning','blur','focus'],t.isAvailable=!0,t._eventHandlers=t._supportedEvents.reduce(function(t,n){return t[n]=new Map,t},{}),t.currentState=l.default.getConstants().initialAppState;var u=!1;return t.addListener('appStateDidChange',function(n){u=!0,t.currentState=n.app_state}),l.default.getCurrentAppState(function(n){u||t.currentState===n.app_state||(t.currentState=n.app_state,t.emit('appStateDidChange',n))},_),t}return(0,u.default)(o,[{key:"addEventListener",value:function(t,n){switch(y(-1!==this._supportedEvents.indexOf(t),'Trying to subscribe to unknown event: "%s"',t),t){case'change':this._eventHandlers[t].set(n,this.addListener('appStateDidChange',function(t){n(t.app_state)}));break;case'memoryWarning':this._eventHandlers[t].set(n,this.addListener('memoryWarning',n));break;case'blur':case'focus':this._eventHandlers[t].set(n,this.addListener('appStateFocusChange',function(u){'blur'!==t||u||n(),'focus'===t&&u&&n()}))}}},{key:"removeEventListener",value:function(t,n){y(-1!==this._supportedEvents.indexOf(t),'Trying to remove listener for unknown event: "%s"',t),this._eventHandlers[t].has(n)&&(this._eventHandlers[t].get(n).remove(),this._eventHandlers[t].delete(n))}}]),o})(h);function b(){y(!1,"Cannot use AppState module when native RCTAppState is not included in the build.\nEither include it, or check AppState.isAvailable before calling any methods.")}var k=(function(t){(0,s.default)(o,t);var c=f(o);function o(){var t;(0,n.default)(this,o);for(var u=arguments.length,s=new Array(u),l=0;l<u;l++)s[l]=arguments[l];return(t=c.call.apply(c,[this].concat(s))).isAvailable=!1,t.currentState=null,t}return(0,u.default)(o,[{key:"addEventListener",value:function(t,n){b()}},{key:"removeEventListener",value:function(t,n){b()}},{key:"addListener",value:function(){b()}},{key:"removeAllListeners",value:function(){b()}},{key:"removeSubscription",value:function(){b()}}]),o})(p),A=l.default?new S:new k;m.exports=A},367,[1,29,30,45,47,44,368,49,145,6,369]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])).getEnforcing('AppState');e.default=u},368,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';m.exports=function(){for(var o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];if(1===n.length&&n[0]instanceof Error){var t=n[0];console.error('Error: "'+t.message+'".  Stack:\n'+t.stack)}else console.error.apply(console,n)}},369,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=t(r(d[1])),u=t(r(d[2])),l=t(r(d[3])),o=u.default,s={_getRequests:[],_getKeys:[],_immediate:null,getItem:function(t,n){return(0,l.default)(o,'RCTAsyncStorage not available'),new Promise(function(u,l){o.multiGet([t],function(t,o){var s=o&&o[0]&&o[0][1]?o[0][1]:null,f=c(t);n&&n(f&&f[0],s),f?l(f[0]):u(s)})})},setItem:function(t,n,u){return(0,l.default)(o,'RCTAsyncStorage not available'),new Promise(function(l,s){o.multiSet([[t,n]],function(t){var n=c(t);u&&u(n&&n[0]),n?s(n[0]):l(null)})})},removeItem:function(t,n){return(0,l.default)(o,'RCTAsyncStorage not available'),new Promise(function(u,l){o.multiRemove([t],function(t){var o=c(t);n&&n(o&&o[0]),o?l(o[0]):u(null)})})},mergeItem:function(t,n,u){return(0,l.default)(o,'RCTAsyncStorage not available'),new Promise(function(l,s){o.multiMerge([[t,n]],function(t){var n=c(t);u&&u(n&&n[0]),n?s(n[0]):l(null)})})},clear:function(t){return(0,l.default)(o,'RCTAsyncStorage not available'),new Promise(function(n,u){o.clear(function(l){t&&t(f(l)),l&&f(l)?u(f(l)):n(null)})})},getAllKeys:function(t){return(0,l.default)(o,'RCTAsyncStorage not available'),new Promise(function(n,u){o.getAllKeys(function(l,o){t&&t(f(l),o),l?u(f(l)):n(o)})})},flushGetRequests:function(){var t=this._getRequests,u=this._getKeys;this._getRequests=[],this._getKeys=[],(0,l.default)(o,'RCTAsyncStorage not available'),o.multiGet(u,function(u,l){var o={};l&&l.forEach(function(t){var u=(0,n.default)(t,2),l=u[0],s=u[1];return o[l]=s,s});for(var s=t.length,c=0;c<s;c++){var f=t[c],v=f.keys.map(function(t){return[t,o[t]]});f.callback&&f.callback(null,v),f.resolve&&f.resolve(v)}})},multiGet:function(t,n){var u=this;this._immediate||(this._immediate=setImmediate(function(){u._immediate=null,u.flushGetRequests()}));var l={keys:t,callback:n,keyIndex:this._getKeys.length,resolve:null,reject:null},o=new Promise(function(t,n){l.resolve=t,l.reject=n});return this._getRequests.push(l),t.forEach(function(t){-1===u._getKeys.indexOf(t)&&u._getKeys.push(t)}),o},multiSet:function(t,n){return(0,l.default)(o,'RCTAsyncStorage not available'),new Promise(function(u,l){o.multiSet(t,function(t){var o=c(t);n&&n(o),o?l(o):u(null)})})},multiRemove:function(t,n){return(0,l.default)(o,'RCTAsyncStorage not available'),new Promise(function(u,l){o.multiRemove(t,function(t){var o=c(t);n&&n(o),o?l(o):u(null)})})},multiMerge:function(t,n){return(0,l.default)(o,'RCTAsyncStorage not available'),new Promise(function(u,l){o.multiMerge(t,function(t){var o=c(t);n&&n(o),o?l(o):u(null)})})}};function c(t){return t?(Array.isArray(t)?t:[t]).map(function(t){return f(t)}):null}function f(t){if(!t)return null;var n=new Error(t.message);return n.key=t.key,n}o.multiMerge||(delete s.mergeItem,delete s.multiMerge),m.exports=s},370,[1,17,371,6]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t(r(d[1])),c=o.get('AsyncSQLiteDBStorage')||o.get('AsyncLocalStorage');e.default=c},371,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0])(r(d[1]));m.exports={getString:function(){return t.default.getString()},setString:function(n){t.default.setString(n)}}},372,[1,373]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t(r(d[1])).getEnforcing('Clipboard');e.default=o},373,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]),t=r(d[1]),o=r(d[2]),s=(function(){function s(){t(this,s)}return o(s,null,[{key:"open",value:function(t){return n.async(function(n){for(;;)switch(n.prev=n.next){case 0:throw new Error('DatePickerAndroid is not supported on this platform.');case 1:case"end":return n.stop()}},null,null,null,Promise)}}]),s})();s.dateSetAction='dateSetAction',s.dismissedAction='dismissedAction',m.exports=s},374,[111,29,30]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0])(r(d[1]));m.exports=t.default},375,[1,65]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]),n=t(r(d[1])),u=t(r(d[2])),f=t(r(d[3])),o=t(r(d[4])),l=t(r(d[5])),c=t(r(d[6]));function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}!(function(t){(0,f.default)(p,t);var h,v,y=(h=p,v=s(),function(){var t,n=(0,l.default)(h);if(v){var u=(0,l.default)(this).constructor;t=Reflect.construct(n,arguments,u)}else t=n.apply(this,arguments);return(0,o.default)(this,t)});function p(){var t;return(0,n.default)(this,p),(t=y.call(this,c.default))._menuItems=new Map,t}(0,u.default)(p,[{key:"addMenuItem",value:function(t,n){var u=this._menuItems.get(t);null!=u?this.removeListener('didPressMenuItem',u):c.default.addMenuItem(t),this._menuItems.set(t,n),this.addListener('didPressMenuItem',function(u){u.title===t&&n()})}},{key:"reload",value:function(t){'function'==typeof c.default.reloadWithReason?c.default.reloadWithReason(t||'Uncategorized from JS'):c.default.reload()}},{key:"onFastRefresh",value:function(){'function'==typeof c.default.onFastRefresh&&c.default.onFastRefresh()}}])})(t(r(d[7])).default);var h=(function(){function t(){(0,n.default)(this,t)}return(0,u.default)(t,[{key:"addMenuItem",value:function(t,n){}},{key:"reload",value:function(){}}]),t})();m.exports=new h},376,[1,29,30,45,47,44,377,145]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r(d[1])).getEnforcing('DevSettings');e.default=n},377,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var o=r(d[0]),n=o(r(d[1])),l=o(r(d[2])),t={canRecordVideos:function(o){return(0,l.default)(n.default,'ImagePickerIOS is not available'),n.default.canRecordVideos(o)},canUseCamera:function(o){return(0,l.default)(n.default,'ImagePickerIOS is not available'),n.default.canUseCamera(o)},openCameraDialog:function(o,t,u){(0,l.default)(n.default,'ImagePickerIOS is not available');var s={videoMode:!0,unmirrorFrontFacingCamera:!1};return null!=o.videoMode&&(s.videoMode=o.videoMode),null!=o.unmirrorFrontFacingCamera&&(s.unmirrorFrontFacingCamera=o.unmirrorFrontFacingCamera),n.default.openCameraDialog(s,t,u)},openSelectDialog:function(o,t,u){(0,l.default)(n.default,'ImagePickerIOS is not available');var s={showImages:!0,showVideos:!1};return null!=o.showImages&&(s.showImages=o.showImages),null!=o.showVideos&&(s.showVideos=o.showVideos),n.default.openSelectDialog(s,t,u)},removePendingVideo:function(o){(0,l.default)(n.default,'ImagePickerIOS is not available'),n.default.removePendingVideo(o)},clearAllPendingVideos:function(){(0,l.default)(n.default,'ImagePickerIOS is not available'),n.default.clearAllPendingVideos()}};m.exports=t},378,[1,379,6]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])).get('ImagePickerIOS');e.default=u},379,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=t(r(d[1])),u=t(r(d[2])),o=t(r(d[3])),f=t(r(d[4])),c=t(r(d[5])),l=t(r(d[6]));function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}r(d[7]);var v=r(d[8]),p=(r(d[9]),r(d[10])),y=(function(t){(0,o.default)(L,t);var v,y,R=(v=L,y=s(),function(){var t,n=(0,c.default)(v);if(y){var u=(0,c.default)(this).constructor;t=Reflect.construct(n,arguments,u)}else t=n.apply(this,arguments);return(0,f.default)(this,t)});function L(){return(0,n.default)(this,L),R.call(this,l.default)}return(0,u.default)(L,[{key:"addEventListener",value:function(t,n){this.addListener(t,n)}},{key:"removeEventListener",value:function(t,n){this.removeListener(t,n)}},{key:"openURL",value:function(t){return this._validateURL(t),l.default.openURL(t)}},{key:"canOpenURL",value:function(t){return this._validateURL(t),l.default.canOpenURL(t)}},{key:"openSettings",value:function(){return l.default.openSettings()}},{key:"getInitialURL",value:function(){return l.default.getInitialURL()}},{key:"sendIntent",value:function(t,n){return new Promise(function(t,n){return n(new Error('Unsupported'))})}},{key:"_validateURL",value:function(t){p('string'==typeof t,'Invalid URL: should be a string. Was: '+t),p(t,'Invalid URL: cannot be empty')}}]),L})(v);m.exports=new y},380,[1,29,30,45,47,44,381,240,145,57,6]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]),t=r(d[1]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t(r(d[2])),f='android'===n(r(d[3])).default.OS?o.getEnforcing('IntentAndroid'):o.getEnforcing('LinkingManager');e.default=f},381,[1,12,14,57]);
__d(function(g,r,i,a,m,e,d){'use strict';var n,o=r(d[0]),t=r(d[1]);t(r(d[2])),t(r(d[3])),o(r(d[4])),r(d[5]);n={ignoreLogs:function(n){},ignoreAllLogs:function(n){},install:function(){},uninstall:function(){}},m.exports=n},382,[12,1,57,169,107,117]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]),o=r(d[1]),t=o.currentCentroidXOfTouchesChangedAfter,u=o.currentCentroidYOfTouchesChangedAfter,s=o.previousCentroidXOfTouchesChangedAfter,c=o.previousCentroidYOfTouchesChangedAfter,p=o.currentCentroidX,v=o.currentCentroidY,h={_initializeGestureState:function(n){n.moveX=0,n.moveY=0,n.x0=0,n.y0=0,n.dx=0,n.dy=0,n.vx=0,n.vy=0,n.numberActiveTouches=0,n._accountsForMovesUpTo=0},_updateGestureStateOnMove:function(n,o){n.numberActiveTouches=o.numberActiveTouches,n.moveX=t(o,n._accountsForMovesUpTo),n.moveY=u(o,n._accountsForMovesUpTo);var p=n._accountsForMovesUpTo,v=s(o,p),h=t(o,p),l=c(o,p),S=u(o,p),R=n.dx+(h-v),T=n.dy+(S-l),f=o.mostRecentTimeStamp-n._accountsForMovesUpTo;n.vx=(R-n.dx)/f,n.vy=(T-n.dy)/f,n.dx=R,n.dy=T,n._accountsForMovesUpTo=o.mostRecentTimeStamp},create:function(o){var t={handle:null},u={stateID:Math.random(),moveX:0,moveY:0,x0:0,y0:0,dx:0,dy:0,vx:0,vy:0,numberActiveTouches:0,_accountsForMovesUpTo:0};return{panHandlers:{onStartShouldSetResponder:function(n){return null!=o.onStartShouldSetPanResponder&&o.onStartShouldSetPanResponder(n,u)},onMoveShouldSetResponder:function(n){return null!=o.onMoveShouldSetPanResponder&&o.onMoveShouldSetPanResponder(n,u)},onStartShouldSetResponderCapture:function(n){return 1===n.nativeEvent.touches.length&&h._initializeGestureState(u),u.numberActiveTouches=n.touchHistory.numberActiveTouches,null!=o.onStartShouldSetPanResponderCapture&&o.onStartShouldSetPanResponderCapture(n,u)},onMoveShouldSetResponderCapture:function(n){var t=n.touchHistory;return u._accountsForMovesUpTo!==t.mostRecentTimeStamp&&(h._updateGestureStateOnMove(u,t),!!o.onMoveShouldSetPanResponderCapture&&o.onMoveShouldSetPanResponderCapture(n,u))},onResponderGrant:function(s){return t.handle||(t.handle=n.createInteractionHandle()),u.x0=p(s.touchHistory),u.y0=v(s.touchHistory),u.dx=0,u.dy=0,o.onPanResponderGrant&&o.onPanResponderGrant(s,u),null==o.onShouldBlockNativeResponder||o.onShouldBlockNativeResponder(s,u)},onResponderReject:function(n){l(t,o.onPanResponderReject,n,u)},onResponderRelease:function(n){l(t,o.onPanResponderRelease,n,u),h._initializeGestureState(u)},onResponderStart:function(n){var t=n.touchHistory;u.numberActiveTouches=t.numberActiveTouches,o.onPanResponderStart&&o.onPanResponderStart(n,u)},onResponderMove:function(n){var t=n.touchHistory;u._accountsForMovesUpTo!==t.mostRecentTimeStamp&&(h._updateGestureStateOnMove(u,t),o.onPanResponderMove&&o.onPanResponderMove(n,u))},onResponderEnd:function(n){var s=n.touchHistory;u.numberActiveTouches=s.numberActiveTouches,l(t,o.onPanResponderEnd,n,u)},onResponderTerminate:function(n){l(t,o.onPanResponderTerminate,n,u),h._initializeGestureState(u)},onResponderTerminationRequest:function(n){return null==o.onPanResponderTerminationRequest||o.onPanResponderTerminationRequest(n,u)}},getInteractionHandle:function(){return t.handle}}}};function l(o,t,u,s){o.handle&&(n.clearInteractionHandle(o.handle),o.handle=null),t&&t(u,s)}m.exports=h},383,[240,384]);
__d(function(g,r,i,a,m,e,d){var n={centroidDimension:function(t,o,u,c){var f=t.touchBank,s=0,h=0,v=1===t.numberActiveTouches?t.touchBank[t.indexOfSingleActiveTouch]:null;if(null!==v)v.touchActive&&v.currentTimeStamp>o&&(s+=c&&u?v.currentPageX:c&&!u?v.currentPageY:!c&&u?v.previousPageX:v.previousPageY,h=1);else for(var C=0;C<f.length;C++){var l=f[C];if(null!==l&&void 0!==l&&l.touchActive&&l.currentTimeStamp>=o){s+=c&&u?l.currentPageX:c&&!u?l.currentPageY:!c&&u?l.previousPageX:l.previousPageY,h++}}return h>0?s/h:n.noCentroid},currentCentroidXOfTouchesChangedAfter:function(t,o){return n.centroidDimension(t,o,!0,!0)},currentCentroidYOfTouchesChangedAfter:function(t,o){return n.centroidDimension(t,o,!1,!0)},previousCentroidXOfTouchesChangedAfter:function(t,o){return n.centroidDimension(t,o,!0,!1)},previousCentroidYOfTouchesChangedAfter:function(t,o){return n.centroidDimension(t,o,!1,!1)},currentCentroidX:function(t){return n.centroidDimension(t,0,!0,!0)},currentCentroidY:function(t){return n.centroidDimension(t,0,!1,!0)},noCentroid:-1};m.exports=n},384,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]),o=n(r(d[1])),s=n(r(d[2])),t=n(r(d[3])),E=n(r(d[4])),A=n(r(d[5])),u=n(r(d[6])),c=n(r(d[7]));function _(n,o){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);o&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),s.push.apply(s,t)}return s}function S(n){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{};s%2?_(Object(t),!0).forEach(function(s){(0,o.default)(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(t,o))})}return n}r(d[8]);var l=Object.freeze({GRANTED:'granted',DENIED:'denied',NEVER_ASK_AGAIN:'never_ask_again'}),O=Object.freeze({READ_CALENDAR:'android.permission.READ_CALENDAR',WRITE_CALENDAR:'android.permission.WRITE_CALENDAR',CAMERA:'android.permission.CAMERA',READ_CONTACTS:'android.permission.READ_CONTACTS',WRITE_CONTACTS:'android.permission.WRITE_CONTACTS',GET_ACCOUNTS:'android.permission.GET_ACCOUNTS',ACCESS_FINE_LOCATION:'android.permission.ACCESS_FINE_LOCATION',ACCESS_COARSE_LOCATION:'android.permission.ACCESS_COARSE_LOCATION',ACCESS_BACKGROUND_LOCATION:'android.permission.ACCESS_BACKGROUND_LOCATION',RECORD_AUDIO:'android.permission.RECORD_AUDIO',READ_PHONE_STATE:'android.permission.READ_PHONE_STATE',CALL_PHONE:'android.permission.CALL_PHONE',READ_CALL_LOG:'android.permission.READ_CALL_LOG',WRITE_CALL_LOG:'android.permission.WRITE_CALL_LOG',ADD_VOICEMAIL:'com.android.voicemail.permission.ADD_VOICEMAIL',USE_SIP:'android.permission.USE_SIP',PROCESS_OUTGOING_CALLS:'android.permission.PROCESS_OUTGOING_CALLS',BODY_SENSORS:'android.permission.BODY_SENSORS',SEND_SMS:'android.permission.SEND_SMS',RECEIVE_SMS:'android.permission.RECEIVE_SMS',READ_SMS:'android.permission.READ_SMS',RECEIVE_WAP_PUSH:'android.permission.RECEIVE_WAP_PUSH',RECEIVE_MMS:'android.permission.RECEIVE_MMS',READ_EXTERNAL_STORAGE:'android.permission.READ_EXTERNAL_STORAGE',WRITE_EXTERNAL_STORAGE:'android.permission.WRITE_EXTERNAL_STORAGE'}),R=new((function(){function n(){(0,t.default)(this,n),this.PERMISSIONS=O,this.RESULTS=l}return(0,E.default)(n,[{key:"checkPermission",value:function(n){return console.warn('"PermissionsAndroid.checkPermission" is deprecated. Use "PermissionsAndroid.check" instead'),console.warn('"PermissionsAndroid" module works only for Android platform.'),Promise.resolve(!1)}},{key:"check",value:function(n){return console.warn('"PermissionsAndroid" module works only for Android platform.'),Promise.resolve(!1)}},{key:"requestPermission",value:function(n,o){var t;return s.default.async(function(E){for(;;)switch(E.prev=E.next){case 0:return console.warn('"PermissionsAndroid.requestPermission" is deprecated. Use "PermissionsAndroid.request" instead'),console.warn('"PermissionsAndroid" module works only for Android platform.'),E.abrupt("return",Promise.resolve(!1));case 4:return E.next=6,s.default.awrap(this.request(n,o));case 6:return t=E.sent,E.abrupt("return",t===this.RESULTS.GRANTED);case 8:case"end":return E.stop()}},null,this,null,Promise)}},{key:"request",value:function(n,o){return s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return console.warn('"PermissionsAndroid" module works only for Android platform.'),t.abrupt("return",Promise.resolve(this.RESULTS.DENIED));case 3:if((0,c.default)(u.default,'PermissionsAndroid is not installed correctly.'),!o){t.next=10;break}return t.next=7,s.default.awrap(u.default.shouldShowRequestPermissionRationale(n));case 7:if(!t.sent||!A.default){t.next=10;break}return t.abrupt("return",new Promise(function(s,t){var E=S({},o);A.default.showAlert(E,function(){return t(new Error('Error showing rationale'))},function(){return s(u.default.requestPermission(n))})}));case 10:return t.abrupt("return",u.default.requestPermission(n));case 11:case"end":return t.stop()}},null,this,null,Promise)}},{key:"requestMultiple",value:function(n){return console.warn('"PermissionsAndroid" module works only for Android platform.'),Promise.resolve({})}}]),n})());m.exports=R},385,[1,54,111,29,30,160,386,6,57]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t(r(d[1])).get('PermissionsAndroid');e.default=o},386,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),o=t(r(d[1])),n=t(r(d[2])),l=t(r(d[3])),u=r(d[4]),c=r(d[5]),s=new u(l.default),f=new Map,v=(function(){function t(n){var l=this;(0,o.default)(this,t),this._data={},this._remoteNotificationCompleteCallbackCalled=!1,this._isRemote=n.remote,this._isRemote&&(this._notificationId=n.notificationId),n.remote?Object.keys(n).forEach(function(t){var o=n[t];'aps'===t?(l._alert=o.alert,l._sound=o.sound,l._badgeCount=o.badge,l._category=o.category,l._contentAvailable=o['content-available'],l._threadID=o['thread-id']):l._data[t]=o}):(this._badgeCount=n.applicationIconBadgeNumber,this._sound=n.soundName,this._alert=n.alertBody,this._data=n.userInfo,this._category=n.category)}return(0,n.default)(t,null,[{key:"presentLocalNotification",value:function(t){c(l.default,'PushNotificationManager is not available.'),l.default.presentLocalNotification(t)}},{key:"scheduleLocalNotification",value:function(t){c(l.default,'PushNotificationManager is not available.'),l.default.scheduleLocalNotification(t)}},{key:"cancelAllLocalNotifications",value:function(){c(l.default,'PushNotificationManager is not available.'),l.default.cancelAllLocalNotifications()}},{key:"removeAllDeliveredNotifications",value:function(){c(l.default,'PushNotificationManager is not available.'),l.default.removeAllDeliveredNotifications()}},{key:"getDeliveredNotifications",value:function(t){c(l.default,'PushNotificationManager is not available.'),l.default.getDeliveredNotifications(t)}},{key:"removeDeliveredNotifications",value:function(t){c(l.default,'PushNotificationManager is not available.'),l.default.removeDeliveredNotifications(t)}},{key:"setApplicationIconBadgeNumber",value:function(t){c(l.default,'PushNotificationManager is not available.'),l.default.setApplicationIconBadgeNumber(t)}},{key:"getApplicationIconBadgeNumber",value:function(t){c(l.default,'PushNotificationManager is not available.'),l.default.getApplicationIconBadgeNumber(t)}},{key:"cancelLocalNotifications",value:function(t){c(l.default,'PushNotificationManager is not available.'),l.default.cancelLocalNotifications(t)}},{key:"getScheduledLocalNotifications",value:function(t){c(l.default,'PushNotificationManager is not available.'),l.default.getScheduledLocalNotifications(t)}},{key:"addEventListener",value:function(o,n){var l;c('notification'===o||'register'===o||'registrationError'===o||'localNotification'===o,'PushNotificationIOS only supports `notification`, `register`, `registrationError`, and `localNotification` events'),'notification'===o?l=s.addListener("remoteNotificationReceived",function(o){n(new t(o))}):'localNotification'===o?l=s.addListener("localNotificationReceived",function(o){n(new t(o))}):'register'===o?l=s.addListener("remoteNotificationsRegistered",function(t){n(t.deviceToken)}):'registrationError'===o&&(l=s.addListener("remoteNotificationRegistrationError",function(t){n(t)})),f.set(o,l)}},{key:"removeEventListener",value:function(t,o){c('notification'===t||'register'===t||'registrationError'===t||'localNotification'===t,'PushNotificationIOS only supports `notification`, `register`, `registrationError`, and `localNotification` events');var n=f.get(t);n&&(n.remove(),f.delete(t))}},{key:"requestPermissions",value:function(t){var o={alert:!0,badge:!0,sound:!0};return t&&(o={alert:!!t.alert,badge:!!t.badge,sound:!!t.sound}),c(l.default,'PushNotificationManager is not available.'),l.default.requestPermissions(o)}},{key:"abandonPermissions",value:function(){c(l.default,'PushNotificationManager is not available.'),l.default.abandonPermissions()}},{key:"checkPermissions",value:function(t){c('function'==typeof t,'Must provide a valid callback'),c(l.default,'PushNotificationManager is not available.'),l.default.checkPermissions(t)}},{key:"getInitialNotification",value:function(){return c(l.default,'PushNotificationManager is not available.'),l.default.getInitialNotification().then(function(o){return o&&new t(o)})}}]),(0,n.default)(t,[{key:"finish",value:function(t){this._isRemote&&this._notificationId&&!this._remoteNotificationCompleteCallbackCalled&&(this._remoteNotificationCompleteCallbackCalled=!0,c(l.default,'PushNotificationManager is not available.'),l.default.onFinishRemoteNotification(this._notificationId,t))}},{key:"getMessage",value:function(){return this._alert}},{key:"getSound",value:function(){return this._sound}},{key:"getCategory",value:function(){return this._category}},{key:"getAlert",value:function(){return this._alert}},{key:"getContentAvailable",value:function(){return this._contentAvailable}},{key:"getBadgeCount",value:function(){return this._badgeCount}},{key:"getData",value:function(){return this._data}},{key:"getThreadID",value:function(){return this._threadID}}]),t})();v.FetchResult={NewData:'UIBackgroundFetchResultNewData',NoData:'UIBackgroundFetchResultNoData',ResultFailed:'UIBackgroundFetchResultFailed'},m.exports=v},387,[1,29,30,388,145,6]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t(r(d[1])).get('PushNotificationManager');e.default=o},388,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),s=t(r(d[1])),n=t(r(d[2])),c=r(d[3]),l=r(d[4]),u=[],o={_settings:n.default&&n.default.getConstants().settings,get:function(t){return this._settings[t]},set:function(t){this._settings=(0,s.default)(this._settings,t),n.default.setValues(t)},watchKeys:function(t,s){'string'==typeof t&&(t=[t]),l(Array.isArray(t),'keys should be a string or array of strings');var n=u.length;return u.push({keys:t,callback:s}),n},clearWatch:function(t){t<u.length&&(u[t]={keys:[],callback:null})},_sendObservations:function(t){var s=this;Object.keys(t).forEach(function(n){var c=t[n],l=s._settings[n]!==c;s._settings[n]=c,l&&u.forEach(function(t){-1!==t.keys.indexOf(n)&&t.callback&&t.callback()})})}};c.addListener('settingsUpdated',o._sendObservations.bind(o)),m.exports=o},389,[1,16,390,41,6]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r(d[1])).getEnforcing('SettingsManager');e.default=n},390,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),o=t(r(d[1])),n=t(r(d[2])),s=t(r(d[3])),u=(t(r(d[4])),r(d[5]),r(d[6])),c=r(d[7]),l=(function(){function t(){(0,o.default)(this,t)}return(0,n.default)(t,null,[{key:"share",value:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u('object'==typeof t&&null!==t,'Content to share must be a valid object'),u('string'==typeof t.url||'string'==typeof t.message,'At least one of URL and message is required'),u('object'==typeof o&&null!==o,'Options must be a valid object'),new Promise(function(n,l){var f=c(o.tintColor);u(null==f||'number'==typeof f,'Unexpected color given for options.tintColor'),u(s.default,'NativeActionSheetManager is not registered on iOS, but it should be.'),s.default.showShareActionSheetWithOptions({message:'string'==typeof t.message?t.message:void 0,url:'string'==typeof t.url?t.url:void 0,subject:o.subject,tintColor:'number'==typeof f?f:void 0,excludedActivityTypes:o.excludedActivityTypes},function(t){return l(t)},function(t,o){n(t?{action:'sharedAction',activityType:o}:{action:'dismissedAction'})})})}}]),t})();l.sharedAction='sharedAction',l.dismissedAction='dismissedAction',m.exports=l},391,[1,29,30,350,392,57,6,71]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])).get('ShareModule');e.default=u},392,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=t(r(d[1])),u=t(r(d[2])),c=t(r(d[3])),f=t(r(d[4])),o=t(r(d[5]));function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var s=(function(t){(0,u.default)(h,t);var o,s,p=(o=h,s=l(),function(){var t,n=(0,f.default)(o);if(s){var u=(0,f.default)(this).constructor;t=Reflect.construct(n,arguments,u)}else t=n.apply(this,arguments);return(0,c.default)(this,t)});function h(){return(0,n.default)(this,h),p.apply(this,arguments)}return h})(r(d[6]));m.exports=new s(o.default)},393,[1,29,45,47,44,341,145]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),o={show:function(o,s){t(!1,'ToastAndroid is not supported on this platform.')},showWithGravity:function(o,s,n){t(!1,'ToastAndroid is not supported on this platform.')},showWithGravityAndOffset:function(o,s,n,p,f){t(!1,'ToastAndroid is not supported on this platform.')}};m.exports=o},394,[8]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=(0,n.useMemo)(function(){return{getCurrentValue:function(){return o.default.getColorScheme()},subscribe:function(t){return o.default.addChangeListener(t),function(){return o.default.removeChangeListener(t)}}}},[]);return(0,u.useSubscription)(t)};var n=r(d[1]),u=r(d[2]),o=t(r(d[3]))},395,[1,59,396,351]);
__d(function(g,r,i,a,m,e,d){'use strict';m.exports=r(d[0])},396,[397]);
__d(function(g,r,i,a,m,e,d){'use strict';var u=r(d[0]),t=r(d[1]);e.useSubscription=function(n){var s=n.getCurrentValue,c=n.subscribe,b=t.useState(function(){return{getCurrentValue:s,subscribe:c,value:s()}});n=b[0];var l=b[1];return b=n.value,n.getCurrentValue===s&&n.subscribe===c||(b=s(),l({getCurrentValue:s,subscribe:c,value:b})),t.useDebugValue(b),t.useEffect(function(){function t(){if(!n){var t=s();l(function(n){return n.getCurrentValue!==s||n.subscribe!==c||n.value===t?n:u({},n,{value:t})})}}var n=!1,b=c(t);return t(),function(){n=!0,b()}},[s,c]),b}},397,[61,59]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=(0,f.useState)(function(){return u.default.get('window')}),c=(0,n.default)(t,2),o=c[0],l=c[1];return(0,f.useEffect)(function(){function t(t){var n=t.window;o.width===n.width&&o.height===n.height&&o.scale===n.scale&&o.fontScale===n.fontScale||l(n)}return u.default.addEventListener('change',t),t({window:u.default.get('window')}),function(){u.default.removeEventListener('change',t)}},[o]),o};var n=t(r(d[1])),u=t(r(d[2])),f=r(d[3])},398,[1,17,64,59]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0])(r(d[1])),n=(r(d[2]),!1),o=0,u=400;function f(f){var v=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n||(n=!0,0===f[0]&&(t.default.vibrate(u),f=f.slice(1)),0!==f.length?setTimeout(function(){return l(++o,f,v,1)},f[0]):n=!1)}function l(f,v,c,s){if(n&&f===o){if(t.default.vibrate(u),s>=v.length){if(!c)return void(n=!1);s=0}setTimeout(function(){return l(f,v,c,s+1)},v[s])}}var v={vibrate:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!n)if('number'==typeof o)t.default.vibrate(o);else{if(!Array.isArray(o))throw new Error('Vibration pattern should be a number or array');f(o,l)}},cancel:function(){n=!1}};m.exports=v},399,[1,400,57]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r(d[1])).getEnforcing('Vibration');e.default=n},400,[12,14]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),u=r(d[2]),c=r(d[3]),o=r(d[4]);function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var l,s=r(d[5]);r(d[6]);l=(function(l){u(v,l);var s,y,p=(s=v,y=f(),function(){var t,n=o(s);if(y){var u=o(this).constructor;t=Reflect.construct(n,arguments,u)}else t=n.apply(this,arguments);return c(this,t)});function v(){return t(this,v),p.apply(this,arguments)}return n(v,[{key:"render",value:function(){return null}}],[{key:"ignoreWarnings",value:function(t){}},{key:"install",value:function(){}},{key:"uninstall",value:function(){}}]),v})(s.Component),m.exports=l},401,[29,30,45,47,44,59,382]);
__d(function(g,r,i,a,m,e,d){'use strict';Object.defineProperty(e,"__esModule",{value:!0}),e.DynamicColorIOS=void 0;var o=r(d[0]);e.DynamicColorIOS=function(t){return(0,o.DynamicColorIOSPrivate)({light:t.light,dark:t.dark})}},402,[70]);
__d(function(g,r,i,a,m,e,d){'use strict';Object.defineProperty(e,"__esModule",{value:!0}),e.ColorAndroid=void 0;e.ColorAndroid=function(o){throw new Error('ColorAndroid is not available on this platform.')}},403,[]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]),s=n.shape({x:n.number,y:n.number});m.exports=s},404,[73]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r(d[1])),u=t(r(d[2])),c=r(d[3]),l=c.NativeModules.RNBackgroundTimer,o=new c.NativeEventEmitter(l),s=new((function(){function t(){var u=this;(0,n.default)(this,t),this.uniqueId=0,this.callbacks={},o.addListener('backgroundTimer.timeout',function(t){if(u.callbacks[t]){var n=u.callbacks[t].callback;u.callbacks[t].interval?l.setTimeout(t,u.callbacks[t].timeout):delete u.callbacks[t],n()}})}return(0,u.default)(t,[{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return l.start(t)}},{key:"stop",value:function(){return l.stop()}},{key:"runBackgroundTimer",value:function(t,n){var u=this,l=c.Platform.select({ios:function(){return c.NativeAppEventEmitter},android:function(){return c.DeviceEventEmitter}})();this.start(0),this.backgroundListener=l.addListener('backgroundTimer',function(){u.backgroundListener.remove(),u.backgroundClockMethod(t,n)})}},{key:"backgroundClockMethod",value:function(t,n){var u=this;this.backgroundTimer=this.setTimeout(function(){t(),u.backgroundClockMethod(t,n)},n)}},{key:"stopBackgroundTimer",value:function(){this.stop(),this.clearTimeout(this.backgroundTimer)}},{key:"setTimeout",value:function(t,n){this.uniqueId+=1;var u=this.uniqueId;return this.callbacks[u]={callback:t,interval:!1,timeout:n},l.setTimeout(u,n),u}},{key:"clearTimeout",value:function(t){this.callbacks[t]&&delete this.callbacks[t]}},{key:"setInterval",value:function(t,n){this.uniqueId+=1;var u=this.uniqueId;return this.callbacks[u]={callback:t,interval:!0,timeout:n},l.setTimeout(u,n),u}},{key:"clearInterval",value:function(t){this.callbacks[t]&&delete this.callbacks[t]}}]),t})());e.default=s},405,[1,29,30,5]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r(d[1])),o=t(r(d[2])),u=t(r(d[3])),l=t(r(d[4]));function f(t,n){var o;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=s(t))||n&&t&&"number"==typeof t.length){o&&(t=o);var u=0;return function(){return u>=t.length?{done:!0}:{done:!1,value:t[u++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(o=t[Symbol.iterator]()).next.bind(o)}function s(t,n){if(t){if("string"==typeof t)return y(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?y(t,n):void 0}}function y(t,n){(null==n||n>t.length)&&(n=t.length);for(var o=0,u=new Array(n);o<n;o++)u[o]=t[o];return u}var h=(function(){function t(n){var u=this;(0,o.default)(this,t),this._keyPrefix=n;var l=this._initializeAsync();l&&(this._initializing=l,l.finally(function(){u._initializing===l&&(u._initializing=void 0)}))}return(0,u.default)(t,[{key:"clear",value:function(){for(var t=0,n=Object.keys(this);t<n.length;t++){var o=n[t];this.removeItem(o)}}},{key:"getItem",value:function(t){return this.hasOwnProperty(t)?this[t]:null}},{key:"_getItemAsync",value:function(t){var n=this;return(this._initializing||Promise.resolve()).catch(function(){}).then(function(){return n.getItem(t)})}},{key:"_initializeAsync",value:function(){var t=this;if(void 0!==this._keyPrefix)return new Promise(function(o){l.default.getAllKeys().then(function(){for(var u=arguments.length,s=new Array(u),y=0;y<u;y++)s[y]=arguments[y];var h=s[s.length-1].filter(function(n){return n.startsWith(t._keyPrefix)});l.default.multiGet(h).then(function(){for(var u,l,s=(u=arguments.length-1)<0||arguments.length<=u?void 0:arguments[u],y=t._keyPrefix&&t._keyPrefix.length,h=f(s);!(l=h()).done;){var c=l.value,v=(0,n.default)(c,2),k=v[0],_=v[1];k=k.substring(y),t.hasOwnProperty(k)||(t[k]=_)}o()})})})}},{key:"key",value:function(t){var n=Object.keys(this);return t<n.length?n[t]:null}},{key:"removeItem",value:function(t){delete this[t],void 0===this._keyPrefix||l.default.removeItem(""+String(this._keyPrefix)+t)}},{key:"setItem",value:function(t,n){n=String(n),this[t]=n,void 0===this._keyPrefix||l.default.setItem(""+String(this._keyPrefix)+t,n)}},{key:"length",get:function(){return Object.keys(this).length}}]),t})();e.default=h},406,[1,17,29,30,407]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"useAsyncStorage",{enumerable:!0,get:function(){return n.useAsyncStorage}}),e.default=void 0;var u=t(r(d[1])),n=r(d[2]),o=u.default;e.default=o},407,[1,408,410]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r(d[1])),u=t(r(d[2]));if(!u.default)throw new Error("[@RNC/AsyncStorage]: NativeModule: AsyncStorage is null.\n\nTo fix this issue try these steps:\n\n  \u2022 Run `react-native link @react-native-community/async-storage` in the project root.\n\n  \u2022 Rebuild and restart the app.\n\n  \u2022 Run the packager with `--reset-cache` flag.\n\n  \u2022 If you are using CocoaPods on iOS, run `pod install` in the `ios` directory and then rebuild and re-run the app.\n\n  \u2022 If this happens while testing with Jest, check out docs how to integrate AsyncStorage with it: https://react-native-community.github.io/async-storage/docs/advanced/jest\n\nIf none of these fix the issue, please open an issue on the Github repository: https://github.com/react-native-community/react-native-async-storage/issues \n");function o(t,n){var u=arguments.length>1;if('string'!=typeof t&&console.warn("[AsyncStorage] Using "+typeof t+" type for key is not supported. This can lead to unexpected behavior/errors. Use string instead.\nKey passed: "+t+"\n"),u&&'string'!=typeof n){if(null==n)throw new Error("[AsyncStorage] Passing null/undefined as value is not supported. If you want to remove value, Use .remove method instead.\nPassed value: "+n+"\nPassed key: "+t+"\n");console.warn("[AsyncStorage] The value for key \""+t+"\" is not a string. This can lead to unexpected behavior/errors. Consider stringifying it.\nPassed value: "+n+"\nPassed key: "+t+"\n")}}var s={_getRequests:[],_getKeys:[],_immediate:null,getItem:function(t,n){return new Promise(function(s,c){o(t),u.default.multiGet([t],function(t,u){var o=u&&u[0]&&u[0][1]?u[0][1]:null,f=l(t);n&&n(f&&f[0],o),f?c(f[0]):s(o)})})},setItem:function(t,n,s){return new Promise(function(c,f){o(t,n),u.default.multiSet([[t,n]],function(t){var n=l(t);s&&s(n&&n[0]),n?f(n[0]):c(null)})})},removeItem:function(t,n){return new Promise(function(s,c){o(t),u.default.multiRemove([t],function(t){var u=l(t);n&&n(u&&u[0]),u?c(u[0]):s(null)})})},mergeItem:function(t,n,s){return new Promise(function(c,f){o(t,n),u.default.multiMerge([[t,n]],function(t){var n=l(t);s&&s(n&&n[0]),n?f(n[0]):c(null)})})},clear:function(t){return new Promise(function(n,o){u.default.clear(function(u){var s=c(u);t&&t(s),s?o(s):n(null)})})},getAllKeys:function(t){return new Promise(function(n,o){u.default.getAllKeys(function(u,s){var l=c(u);t&&t(l,s),l?o(l):n(s)})})},flushGetRequests:function(){var t=this._getRequests,o=this._getKeys;this._getRequests=[],this._getKeys=[],u.default.multiGet(o,function(u,o){var s={};o&&o.forEach(function(t){var u=(0,n.default)(t,2),o=u[0],l=u[1];return s[o]=l,l});for(var l=t.length,c=0;c<l;c++){var f=t[c],h=f.keys.map(function(t){return[t,s[t]]});f.callback&&f.callback(null,h),f.resolve&&f.resolve(h)}})},multiGet:function(t,n){var u=this;this._immediate||(this._immediate=setImmediate(function(){u._immediate=null,u.flushGetRequests()}));var o={keys:t,callback:n,keyIndex:this._getKeys.length,resolve:null,reject:null},s=new Promise(function(t,n){o.resolve=t,o.reject=n});return this._getRequests.push(o),t.forEach(function(t){-1===u._getKeys.indexOf(t)&&u._getKeys.push(t)}),s},multiSet:function(t,s){return new Promise(function(c,f){t.forEach(function(t){var u=(0,n.default)(t,2);o(u[0],u[1])}),u.default.multiSet(t,function(t){var n=l(t);s&&s(n),n?f(n):c(null)})})},multiRemove:function(t,n){return new Promise(function(s,c){t.forEach(function(t){return o(t)}),u.default.multiRemove(t,function(t){var u=l(t);n&&n(u),u?c(u):s(null)})})},multiMerge:function(t,n){return new Promise(function(o,s){u.default.multiMerge(t,function(t){var u=l(t);n&&n(u),u?s(u):o(null)})})}};function l(t){return!t||Array.isArray(t)&&0===t.length?null:(Array.isArray(t)?t:[t]).map(function(t){return c(t)})}function c(t){if(!t)return null;var n=new Error(t.message);return n.key=t.key,n}u.default.multiMerge||(delete s.mergeItem,delete s.multiMerge);var f=s;e.default=f},408,[1,17,409]);
__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(d[0]).NativeModules,o=t.PlatformLocalStorage||t.RNC_AsyncSQLiteDBStorage||t.RNCAsyncStorage;e.default=o},409,[5]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.useAsyncStorage=function(t){return{getItem:function(){for(var u=arguments.length,f=new Array(u),o=0;o<u;o++)f[o]=arguments[o];return n.default.getItem.apply(n.default,[t].concat(f))},setItem:function(){for(var u=arguments.length,f=new Array(u),o=0;o<u;o++)f[o]=arguments[o];return n.default.setItem.apply(n.default,[t].concat(f))},mergeItem:function(){for(var u=arguments.length,f=new Array(u),o=0;o<u;o++)f[o]=arguments[o];return n.default.mergeItem.apply(n.default,[t].concat(f))},removeItem:function(){for(var u=arguments.length,f=new Array(u),o=0;o<u;o++)f[o]=arguments[o];return n.default.removeItem.apply(n.default,[t].concat(f))}}};var n=t(r(d[1]))},410,[1,408]);
__d(function(g,r,i,a,m,e,d){function t(t){this.options=t||{locator:{}}}function n(t,n,c){if(!t){if(n instanceof o)return n;t=n}var s={},u=t instanceof Function;function h(n){var o=t[n];!o&&u&&(o=2==t.length?function(o){t(n,o)}:t),s[n]=o&&function(t){o('[xmldom '+n+']\t'+t+l(c))}||function(){}}return c=c||{},h('warning'),h('error'),h('fatalError'),s}function o(){this.cdata=!1}function c(t,n){n.lineNumber=t.lineNumber,n.columnNumber=t.columnNumber}function l(t){if(t)return'\n@'+(t.systemId||'')+'#[line:'+t.lineNumber+',col:'+t.columnNumber+']'}function s(t,n,o){return'string'==typeof t?t.substr(n,o):t.length>=n+o||n?new java.lang.String(t,n,o)+'':t}function u(t,n){t.currentElement?t.currentElement.appendChild(n):t.doc.appendChild(n)}t.prototype.parseFromString=function(t,c){var l=this.options,s=new h,u=l.domBuilder||new o,f=l.errorHandler,p=l.locator,D=l.xmlns||{},E={lt:'<',gt:'>',amp:'&',quot:'"',apos:"'"};return p&&u.setDocumentLocator(p),s.errorHandler=n(f,u,p),s.domBuilder=l.domBuilder||u,/\/x?html?$/.test(c)&&(E.nbsp='\xa0',E.copy='\xa9',D['']='http://www.w3.org/1999/xhtml'),D.xml=D.xml||'http://www.w3.org/XML/1998/namespace',t?s.parse(t,D,E):s.errorHandler.error("invalid doc source"),u.doc},o.prototype={startDocument:function(){this.doc=(new f).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,n,o,l){var s=this.doc,h=s.createElementNS(t,o||n),f=l.length;u(this,h),this.currentElement=h,this.locator&&c(this.locator,h);for(var p=0;p<f;p++){t=l.getURI(p);var D=l.getValue(p),E=(o=l.getQName(p),s.createAttributeNS(t,o));this.locator&&c(l.getLocator(p),E),E.value=E.nodeValue=D,h.setAttributeNode(E)}},endElement:function(t,n,o){var c=this.currentElement;c.tagName;this.currentElement=c.parentNode},startPrefixMapping:function(t,n){},endPrefixMapping:function(t){},processingInstruction:function(t,n){var o=this.doc.createProcessingInstruction(t,n);this.locator&&c(this.locator,o),u(this,o)},ignorableWhitespace:function(t,n,o){},characters:function(t,n,o){if(t=s.apply(this,arguments)){if(this.cdata)var l=this.doc.createCDATASection(t);else l=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(l):/^\s*$/.test(t)&&this.doc.appendChild(l),this.locator&&c(this.locator,l)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,n,o){t=s.apply(this,arguments);var l=this.doc.createComment(t);this.locator&&c(this.locator,l),u(this,l)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,n,o){var l=this.doc.implementation;if(l&&l.createDocumentType){var s=l.createDocumentType(t,n,o);this.locator&&c(this.locator,s),u(this,s)}},warning:function(t){console.warn('[xmldom warning]\t'+t,l(this.locator))},error:function(t){console.error('[xmldom error]\t'+t,l(this.locator))},fatalError:function(t){throw console.error('[xmldom fatalError]\t'+t,l(this.locator)),t}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){o.prototype[t]=function(){return null}});var h=r(d[0]).XMLReader,f=e.DOMImplementation=r(d[1]).DOMImplementation;e.XMLSerializer=r(d[1]).XMLSerializer,e.DOMParser=t},411,[412,413]);
__d(function(g,r,i,a,m,e,d){var t=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,n=new RegExp("[\\-\\.0-9"+t.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),s=new RegExp('^'+t.source+n.source+'*(?::'+t.source+n.source+'*)?$'),c=0,u=1,o=2,l=3,f=4,h=5,p=6,w=7;function b(){}function x(t,n,s,c,u){function o(t){if(t>65535){var n=55296+((t-=65536)>>10),s=56320+(1023&t);return String.fromCharCode(n,s)}return String.fromCharCode(t)}function l(t){var n=t.slice(1,-1);return n in s?s[n]:'#'===n.charAt(0)?o(parseInt(n.substr(1).replace('x','0x'))):(u.error('entity not found:'+t),t)}function f(n){if(n>O){var s=t.substring(O,n).replace(/&#?\w+;/g,l);x&&h(O),c.characters(s,0,n-O),O=n}}function h(n,s){for(;n>=w&&(s=b.exec(t));)p=s.index,w=p+s[0].length,x.lineNumber++;x.columnNumber=n-p+1}for(var p=0,w=0,b=/.*(?:\r\n?|\n)|.*$/g,x=c.locator,E=[{currentNSMap:n}],M={},O=0;;){try{var T=t.indexOf('<',O);if(T<0){if(!t.substr(O).match(/^\s*$/)){var S=c.doc,q=S.createTextNode(t.substr(O));S.appendChild(q),c.currentElement=q}return}switch(T>O&&f(T),t.charAt(T+1)){case'/':var y=t.indexOf('>',T+3),_=t.substring(T+2,y),I=E.pop();y<0?(_=t.substring(T+2).replace(/[\s<].*/,''),u.error("end tag name: "+_+' is not complete:'+I.tagName),y=T+1+_.length):_.match(/\s</)&&(_=_.replace(/[\s<].*/,''),u.error("end tag name: "+_+' maybe not complete'),y=T+1+_.length);var L=I.localNSMap,R=I.tagName==_;if(R||I.tagName&&I.tagName.toLowerCase()==_.toLowerCase()){if(c.endElement(I.uri,I.localName,_),L)for(var P in L)c.endPrefixMapping(P);R||u.fatalError("end tag name: "+_+' is not match the current start tagName:'+I.tagName)}else E.push(I);y++;break;case'?':x&&h(T),y=$(t,T,c);break;case'!':x&&h(T),y=C(t,T,c,u);break;default:x&&h(T);var B=new A,U=E[E.length-1].currentNSMap,X=(y=N(t,T,B,U,l,u),B.length);if(!B.closed&&k(t,y,B.tagName,M)&&(B.closed=!0,s.nbsp||u.warning('unclosed xml attribute')),x&&X){for(var z=v(x,{}),H=0;H<X;H++){var Q=B[H];h(Q.offset),Q.locator=v(x,{})}c.locator=z,F(B,c,U)&&E.push(B),c.locator=x}else F(B,c,U)&&E.push(B);'http://www.w3.org/1999/xhtml'!==B.uri||B.closed?y++:y=D(t,y,B.tagName,l,c)}}catch(t){u.error('element parse error: '+t),y=-1}y>O?O=y:f(Math.max(T,O)+1)}}function v(t,n){return n.lineNumber=t.lineNumber,n.columnNumber=t.columnNumber,n}function N(t,n,s,b,x,v){for(var N,F=++n,D=c;;){var k=t.charAt(F);switch(k){case'=':if(D===u)N=t.slice(n,F),D=l;else{if(D!==o)throw new Error('attribute equal must after attrName');D=l}break;case'\'':case'"':if(D===l||D===u){if(D===u&&(v.warning('attribute value must after "="'),N=t.slice(n,F)),n=F+1,!((F=t.indexOf(k,n))>0))throw new Error('attribute value no end \''+k+'\' match');E=t.slice(n,F).replace(/&#?\w+;/g,x),s.add(N,E,n-1),D=h}else{if(D!=f)throw new Error('attribute value must after "="');E=t.slice(n,F).replace(/&#?\w+;/g,x),s.add(N,E,n),v.warning('attribute "'+N+'" missed start quot('+k+')!!'),n=F+1,D=h}break;case'/':switch(D){case c:s.setTagName(t.slice(n,F));case h:case p:case w:D=w,s.closed=!0;case f:case u:case o:break;default:throw new Error("attribute invalid close char('/')")}break;case'':return v.error('unexpected end of input'),D==c&&s.setTagName(t.slice(n,F)),F;case'>':switch(D){case c:s.setTagName(t.slice(n,F));case h:case p:case w:break;case f:case u:'/'===(E=t.slice(n,F)).slice(-1)&&(s.closed=!0,E=E.slice(0,-1));case o:D===o&&(E=N),D==f?(v.warning('attribute "'+E+'" missed quot(")!!'),s.add(N,E.replace(/&#?\w+;/g,x),n)):('http://www.w3.org/1999/xhtml'===b['']&&E.match(/^(?:disabled|checked|selected)$/i)||v.warning('attribute "'+E+'" missed value!! "'+E+'" instead!!'),s.add(E,E,n));break;case l:throw new Error('attribute value missed!!')}return F;case"\x80":k=' ';default:if(k<=' ')switch(D){case c:s.setTagName(t.slice(n,F)),D=p;break;case u:N=t.slice(n,F),D=o;break;case f:var E=t.slice(n,F).replace(/&#?\w+;/g,x);v.warning('attribute "'+E+'" missed quot(")!!'),s.add(N,E,n);case h:D=p}else switch(D){case o:s.tagName;'http://www.w3.org/1999/xhtml'===b['']&&N.match(/^(?:disabled|checked|selected)$/i)||v.warning('attribute "'+N+'" missed value!! "'+N+'" instead2!!'),s.add(N,N,n),n=F,D=u;break;case h:v.warning('attribute space is required"'+N+'"!!');case p:D=u,n=F;break;case l:D=f,n=F;break;case w:throw new Error("elements closed character '/' and '>' must be connected to")}}F++}}function F(t,n,s){for(var c=t.tagName,u=null,o=t.length;o--;){var l=t[o],f=l.qName,h=l.value;if((x=f.indexOf(':'))>0)var p=l.prefix=f.slice(0,x),w=f.slice(x+1),b='xmlns'===p&&w;else w=f,p=null,b='xmlns'===f&&'';l.localName=w,!1!==b&&(null==u&&(u={},E(s,s={})),s[b]=u[b]=h,l.uri='http://www.w3.org/2000/xmlns/',n.startPrefixMapping(b,h))}for(o=t.length;o--;){(p=(l=t[o]).prefix)&&('xml'===p&&(l.uri='http://www.w3.org/XML/1998/namespace'),'xmlns'!==p&&(l.uri=s[p||'']))}var x;(x=c.indexOf(':'))>0?(p=t.prefix=c.slice(0,x),w=t.localName=c.slice(x+1)):(p=null,w=t.localName=c);var v=t.uri=s[p||''];if(n.startElement(v,w,c,t),!t.closed)return t.currentNSMap=s,t.localNSMap=u,!0;if(n.endElement(v,w,c),u)for(p in u)n.endPrefixMapping(p)}function D(t,n,s,c,u){if(/^(?:script|textarea)$/i.test(s)){var o=t.indexOf('</'+s+'>',n),l=t.substring(n+1,o);if(/[&<]/.test(l))return/^script$/i.test(s)?(u.characters(l,0,l.length),o):(l=l.replace(/&#?\w+;/g,c),u.characters(l,0,l.length),o)}return n+1}function k(t,n,s,c){var u=c[s];return null==u&&((u=t.lastIndexOf('</'+s+'>'))<n&&(u=t.lastIndexOf('</'+s)),c[s]=u),u<n}function E(t,n){for(var s in t)n[s]=t[s]}function C(t,n,s,c){switch(t.charAt(n+2)){case'-':return'-'===t.charAt(n+3)?(u=t.indexOf('--\x3e',n+4))>n?(s.comment(t,n+4,u-n-4),u+3):(c.error("Unclosed comment"),-1):-1;default:if('CDATA['==t.substr(n+3,6)){var u=t.indexOf(']]>',n+9);return s.startCDATA(),s.characters(t,n+9,u-n-9),s.endCDATA(),u+3}var o=O(t,n),l=o.length;if(l>1&&/!doctype/i.test(o[0][0])){var f=o[1][0],h=l>3&&/^public$/i.test(o[2][0])&&o[3][0],p=l>4&&o[4][0],w=o[l-1];return s.startDTD(f,h&&h.replace(/^(['"])(.*?)\1$/,'$2'),p&&p.replace(/^(['"])(.*?)\1$/,'$2')),s.endDTD(),w.index+w[0].length}}return-1}function $(t,n,s){var c=t.indexOf('?>',n);if(c){var u=t.substring(n,c).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(u){u[0].length;return s.processingInstruction(u[1],u[2]),c+2}return-1}return-1}function A(t){}function M(t,n){return t.__proto__=n,t}function O(t,n){var s,c=[],u=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(u.lastIndex=n,u.exec(t);s=u.exec(t);)if(c.push(s),s[1])return c}b.prototype={parse:function(t,n,s){var c=this.domBuilder;c.startDocument(),E(n,n={}),x(t,n,s,c,this.errorHandler),c.endDocument()}},A.prototype={setTagName:function(t){if(!s.test(t))throw new Error('invalid tagName:'+t);this.tagName=t},add:function(t,n,c){if(!s.test(t))throw new Error('invalid attribute:'+t);this[this.length++]={qName:t,value:n,offset:c}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}},M({},M.prototype)instanceof M||(M=function(t,n){function s(){}for(n in s.prototype=n,s=new s,t)s[n]=t[n];return s}),e.XMLReader=b},412,[]);
__d(function(g,r,i,a,m,e,d){function t(t,n){for(var o in t)n[o]=t[o]}function n(n,o){var u=n.prototype;if(Object.create){var s=Object.create(o.prototype);u.__proto__=s}if(!(u instanceof o)){function l(){}l.prototype=o.prototype,t(u,l=new l),n.prototype=u=l}u.constructor!=n&&('function'!=typeof n&&console.error("unknow Class:"+n),u.constructor=n)}var o='http://www.w3.org/1999/xhtml',u={},s=u.ELEMENT_NODE=1,l=u.ATTRIBUTE_NODE=2,c=u.TEXT_NODE=3,h=u.CDATA_SECTION_NODE=4,p=u.ENTITY_REFERENCE_NODE=5,f=u.ENTITY_NODE=6,N=u.PROCESSING_INSTRUCTION_NODE=7,v=u.COMMENT_NODE=8,w=u.DOCUMENT_NODE=9,E=u.DOCUMENT_TYPE_NODE=10,y=u.DOCUMENT_FRAGMENT_NODE=11,b=u.NOTATION_NODE=12,T={},_={},D=(T.INDEX_SIZE_ERR=(_[1]="Index size error",1),T.DOMSTRING_SIZE_ERR=(_[2]="DOMString size error",2),T.HIERARCHY_REQUEST_ERR=(_[3]="Hierarchy request error",3)),S=(T.WRONG_DOCUMENT_ERR=(_[4]="Wrong document",4),T.INVALID_CHARACTER_ERR=(_[5]="Invalid character",5),T.NO_DATA_ALLOWED_ERR=(_[6]="No data allowed",6),T.NO_MODIFICATION_ALLOWED_ERR=(_[7]="No modification allowed",7),T.NOT_FOUND_ERR=(_[8]="Not found",8)),C=(T.NOT_SUPPORTED_ERR=(_[9]="Not supported",9),T.INUSE_ATTRIBUTE_ERR=(_[10]="Attribute in use",10));T.INVALID_STATE_ERR=(_[11]="Invalid state",11),T.SYNTAX_ERR=(_[12]="Syntax error",12),T.INVALID_MODIFICATION_ERR=(_[13]="Invalid modification",13),T.NAMESPACE_ERR=(_[14]="Invalid namespace",14),T.INVALID_ACCESS_ERR=(_[15]="Invalid access",15);function I(t,n){if(n instanceof Error)var o=n;else o=this,Error.call(this,_[t]),this.message=_[t],Error.captureStackTrace&&Error.captureStackTrace(this,I);return o.code=t,n&&(this.message=this.message+": "+n),o}function A(){}function R(t,n){this._node=t,this._refresh=n,x(this)}function x(n){var o=n._node._inc||n._node.ownerDocument._inc;if(n._inc!=o){var u=n._refresh(n._node);he(n,'length',u.length),t(u,n),n._inc=o}}function O(){}function U(t,n){for(var o=t.length;o--;)if(t[o]===n)return o}function M(t,n,o,u){if(u?n[U(n,u)]=o:n[n.length++]=o,t){o.ownerElement=t;var s=t.ownerDocument;s&&(u&&Y(s,t,u),F(s,t,o))}}function B(t,n,o){var u=U(n,o);if(!(u>=0))throw I(S,new Error(t.tagName+'@'+o));for(var s=n.length-1;u<s;)n[u]=n[++u];if(n.length=s,t){var l=t.ownerDocument;l&&(Y(l,t,o),o.ownerElement=null)}}function P(t){if(this._features={},t)for(var n in t)this._features=t[n]}function L(){}function V(t){return('<'==t?'&lt;':'>'==t&&'&gt;')||'&'==t&&'&amp;'||'"'==t&&'&quot;'||'&#'+t.charCodeAt()+';'}function k(t,n){if(n(t))return!0;if(t=t.firstChild)do{if(k(t,n))return!0}while(t=t.nextSibling)}function j(){}function F(t,n,o){t&&t._inc++,'http://www.w3.org/2000/xmlns/'==o.namespaceURI&&(n._nsMap[o.prefix?o.localName:'']=o.value)}function Y(t,n,o,u){t&&t._inc++,'http://www.w3.org/2000/xmlns/'==o.namespaceURI&&delete n._nsMap[o.prefix?o.localName:'']}function z(t,n,o){if(t&&t._inc){t._inc++;var u=n.childNodes;if(o)u[u.length++]=o;else{for(var s=n.firstChild,l=0;s;)u[l++]=s,s=s.nextSibling;u.length=l}}}function $(t,n){var o=n.previousSibling,u=n.nextSibling;return o?o.nextSibling=u:t.firstChild=u,u?u.previousSibling=o:t.lastChild=o,z(t.ownerDocument,t),n}function X(t,n,o){var u=n.parentNode;if(u&&u.removeChild(n),n.nodeType===y){var s=n.firstChild;if(null==s)return n;var l=n.lastChild}else s=l=n;var c=o?o.previousSibling:t.lastChild;s.previousSibling=c,l.nextSibling=o,c?c.nextSibling=s:t.firstChild=s,null==o?t.lastChild=l:o.previousSibling=l;do{s.parentNode=t}while(s!==l&&(s=s.nextSibling));return z(t.ownerDocument||t,t),n.nodeType==y&&(n.firstChild=n.lastChild=null),n}function G(t,n){var o=n.parentNode;if(o){var u=t.lastChild;o.removeChild(n);u=t.lastChild}u=t.lastChild;return n.parentNode=t,n.previousSibling=u,n.nextSibling=null,u?u.nextSibling=n:t.firstChild=n,t.lastChild=n,z(t.ownerDocument,t,n),n}function H(){this._nsMap={}}function W(){}function q(){}function Z(){}function Q(){}function J(){}function K(){}function ee(){}function te(){}function ne(){}function re(){}function ie(){}function oe(){}function ae(t,n){var o=[],u=9==this.nodeType?this.documentElement:this,s=u.prefix,l=u.namespaceURI;if(l&&null==s&&null==(s=u.lookupPrefix(l)))var c=[{namespace:l,prefix:null}];return se(this,o,t,n,c),o.join('')}function ue(t,n,o){var u=t.prefix||'',s=t.namespaceURI;if(!u&&!s)return!1;if("xml"===u&&"http://www.w3.org/XML/1998/namespace"===s||'http://www.w3.org/2000/xmlns/'==s)return!1;for(var l=o.length;l--;){var c=o[l];if(c.prefix==u)return c.namespace!=s}return!0}function se(t,n,u,f,b){if(f){if(!(t=f(t)))return;if('string'==typeof t)return void n.push(t)}switch(t.nodeType){case s:b||(b=[]);b.length;var T=t.attributes,_=T.length,D=t.firstChild,S=t.tagName;u=o===t.namespaceURI||u,n.push('<',S);for(var C=0;C<_;C++){'xmlns'==(I=T.item(C)).prefix?b.push({prefix:I.localName,namespace:I.value}):'xmlns'==I.nodeName&&b.push({prefix:'',namespace:I.value})}for(C=0;C<_;C++){var I;if(ue(I=T.item(C),0,b)){var A=I.prefix||'',R=I.namespaceURI,x=A?' xmlns:'+A:" xmlns";n.push(x,'="',R,'"'),b.push({prefix:A,namespace:R})}se(I,n,u,f,b)}if(ue(t,0,b)){A=t.prefix||'',R=t.namespaceURI,x=A?' xmlns:'+A:" xmlns";n.push(x,'="',R,'"'),b.push({prefix:A,namespace:R})}if(D||u&&!/^(?:meta|link|img|br|hr|input)$/i.test(S)){if(n.push('>'),u&&/^script$/i.test(S))for(;D;)D.data?n.push(D.data):se(D,n,u,f,b),D=D.nextSibling;else for(;D;)se(D,n,u,f,b),D=D.nextSibling;n.push('</',S,'>')}else n.push('/>');return;case w:case y:for(D=t.firstChild;D;)se(D,n,u,f,b),D=D.nextSibling;return;case l:return n.push(' ',t.name,'="',t.value.replace(/[<&"]/g,V),'"');case c:return n.push(t.data.replace(/[<&]/g,V));case h:return n.push('<![CDATA[',t.data,']]>');case v:return n.push("\x3c!--",t.data,"--\x3e");case E:var O=t.publicId,U=t.systemId;if(n.push('<!DOCTYPE ',t.name),O)n.push(' PUBLIC "',O),U&&'.'!=U&&n.push('" "',U),n.push('">');else if(U&&'.'!=U)n.push(' SYSTEM "',U,'">');else{var M=t.internalSubset;M&&n.push(" [",M,"]"),n.push(">")}return;case N:return n.push("<?",t.target," ",t.data,"?>");case p:return n.push('&',t.nodeName,';');default:n.push('??',t.nodeName)}}function le(t,n,o){var u;switch(n.nodeType){case s:(u=n.cloneNode(!1)).ownerDocument=t;case y:break;case l:o=!0}if(u||(u=n.cloneNode(!1)),u.ownerDocument=t,u.parentNode=null,o)for(var c=n.firstChild;c;)u.appendChild(le(t,c,o)),c=c.nextSibling;return u}function ce(t,n,o){var u=new n.constructor;for(var c in n){var h=n[c];'object'!=typeof h&&h!=u[c]&&(u[c]=h)}switch(n.childNodes&&(u.childNodes=new A),u.ownerDocument=t,u.nodeType){case s:var p=n.attributes,f=u.attributes=new O,N=p.length;f._ownerElement=u;for(var v=0;v<N;v++)u.setAttributeNode(ce(t,p.item(v),!0));break;case l:o=!0}if(o)for(var w=n.firstChild;w;)u.appendChild(ce(t,w,o)),w=w.nextSibling;return u}function he(t,n,o){t[n]=o}I.prototype=Error.prototype,t(T,I),A.prototype={length:0,item:function(t){return this[t]||null},toString:function(t,n){for(var o=[],u=0;u<this.length;u++)se(this[u],o,t,n);return o.join('')}},R.prototype.item=function(t){return x(this),this[t]},n(R,A),O.prototype={length:0,item:A.prototype.item,getNamedItem:function(t){for(var n=this.length;n--;){var o=this[n];if(o.nodeName==t)return o}},setNamedItem:function(t){var n=t.ownerElement;if(n&&n!=this._ownerElement)throw new I(C);var o=this.getNamedItem(t.nodeName);return M(this._ownerElement,this,t,o),o},setNamedItemNS:function(t){var n,o=t.ownerElement;if(o&&o!=this._ownerElement)throw new I(C);return n=this.getNamedItemNS(t.namespaceURI,t.localName),M(this._ownerElement,this,t,n),n},removeNamedItem:function(t){var n=this.getNamedItem(t);return B(this._ownerElement,this,n),n},removeNamedItemNS:function(t,n){var o=this.getNamedItemNS(t,n);return B(this._ownerElement,this,o),o},getNamedItemNS:function(t,n){for(var o=this.length;o--;){var u=this[o];if(u.localName==n&&u.namespaceURI==t)return u}return null}},P.prototype={hasFeature:function(t,n){var o=this._features[t.toLowerCase()];return!(!o||n&&!(n in o))},createDocument:function(t,n,o){var u=new j;if(u.implementation=this,u.childNodes=new A,u.doctype=o,o&&u.appendChild(o),n){var s=u.createElementNS(t,n);u.appendChild(s)}return u},createDocumentType:function(t,n,o){var u=new K;return u.name=t,u.nodeName=t,u.publicId=n,u.systemId=o,u}},L.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,n){return X(this,t,n)},replaceChild:function(t,n){this.insertBefore(t,n),n&&this.removeChild(n)},removeChild:function(t){return $(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(t){return ce(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var n=t.nextSibling;n&&n.nodeType==c&&t.nodeType==c?(this.removeChild(n),t.appendData(n.data)):(t.normalize(),t=n)}},isSupported:function(t,n){return this.ownerDocument.implementation.hasFeature(t,n)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var n=this;n;){var o=n._nsMap;if(o)for(var u in o)if(o[u]==t)return u;n=n.nodeType==l?n.ownerDocument:n.parentNode}return null},lookupNamespaceURI:function(t){for(var n=this;n;){var o=n._nsMap;if(o&&t in o)return o[t];n=n.nodeType==l?n.ownerDocument:n.parentNode}return null},isDefaultNamespace:function(t){return null==this.lookupPrefix(t)}},t(u,L),t(u,L.prototype),j.prototype={nodeName:'#document',nodeType:w,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,n){if(t.nodeType==y){for(var o=t.firstChild;o;){var u=o.nextSibling;this.insertBefore(o,n),o=u}return t}return null==this.documentElement&&t.nodeType==s&&(this.documentElement=t),X(this,t,n),t.ownerDocument=this,t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),$(this,t)},importNode:function(t,n){return le(this,t,n)},getElementById:function(t){var n=null;return k(this.documentElement,function(o){if(o.nodeType==s&&o.getAttribute('id')==t)return n=o,!0}),n},createElement:function(t){var n=new H;return n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.childNodes=new A,(n.attributes=new O)._ownerElement=n,n},createDocumentFragment:function(){var t=new re;return t.ownerDocument=this,t.childNodes=new A,t},createTextNode:function(t){var n=new Z;return n.ownerDocument=this,n.appendData(t),n},createComment:function(t){var n=new Q;return n.ownerDocument=this,n.appendData(t),n},createCDATASection:function(t){var n=new J;return n.ownerDocument=this,n.appendData(t),n},createProcessingInstruction:function(t,n){var o=new ie;return o.ownerDocument=this,o.tagName=o.target=t,o.nodeValue=o.data=n,o},createAttribute:function(t){var n=new W;return n.ownerDocument=this,n.name=t,n.nodeName=t,n.localName=t,n.specified=!0,n},createEntityReference:function(t){var n=new ne;return n.ownerDocument=this,n.nodeName=t,n},createElementNS:function(t,n){var o=new H,u=n.split(':'),s=o.attributes=new O;return o.childNodes=new A,o.ownerDocument=this,o.nodeName=n,o.tagName=n,o.namespaceURI=t,2==u.length?(o.prefix=u[0],o.localName=u[1]):o.localName=n,s._ownerElement=o,o},createAttributeNS:function(t,n){var o=new W,u=n.split(':');return o.ownerDocument=this,o.nodeName=n,o.name=n,o.namespaceURI=t,o.specified=!0,2==u.length?(o.prefix=u[0],o.localName=u[1]):o.localName=n,o}},n(j,L),H.prototype={nodeType:s,hasAttribute:function(t){return null!=this.getAttributeNode(t)},getAttribute:function(t){var n=this.getAttributeNode(t);return n&&n.value||''},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,n){var o=this.ownerDocument.createAttribute(t);o.value=o.nodeValue=""+n,this.setAttributeNode(o)},removeAttribute:function(t){var n=this.getAttributeNode(t);n&&this.removeAttributeNode(n)},appendChild:function(t){return t.nodeType===y?this.insertBefore(t,null):G(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,n){var o=this.getAttributeNodeNS(t,n);o&&this.removeAttributeNode(o)},hasAttributeNS:function(t,n){return null!=this.getAttributeNodeNS(t,n)},getAttributeNS:function(t,n){var o=this.getAttributeNodeNS(t,n);return o&&o.value||''},setAttributeNS:function(t,n,o){var u=this.ownerDocument.createAttributeNS(t,n);u.value=u.nodeValue=""+o,this.setAttributeNode(u)},getAttributeNodeNS:function(t,n){return this.attributes.getNamedItemNS(t,n)},getElementsByTagName:function(t){return new R(this,function(n){var o=[];return k(n,function(u){u===n||u.nodeType!=s||'*'!==t&&u.tagName!=t||o.push(u)}),o})},getElementsByTagNameNS:function(t,n){return new R(this,function(o){var u=[];return k(o,function(l){l===o||l.nodeType!==s||'*'!==t&&l.namespaceURI!==t||'*'!==n&&l.localName!=n||u.push(l)}),u})}},j.prototype.getElementsByTagName=H.prototype.getElementsByTagName,j.prototype.getElementsByTagNameNS=H.prototype.getElementsByTagNameNS,n(H,L),W.prototype.nodeType=l,n(W,L),q.prototype={data:'',substringData:function(t,n){return this.data.substring(t,t+n)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,n){this.replaceData(t,0,n)},appendChild:function(t){throw new Error(_[D])},deleteData:function(t,n){this.replaceData(t,n,"")},replaceData:function(t,n,o){o=this.data.substring(0,t)+o+this.data.substring(t+n),this.nodeValue=this.data=o,this.length=o.length}},n(q,L),Z.prototype={nodeName:"#text",nodeType:c,splitText:function(t){var n=this.data,o=n.substring(t);n=n.substring(0,t),this.data=this.nodeValue=n,this.length=n.length;var u=this.ownerDocument.createTextNode(o);return this.parentNode&&this.parentNode.insertBefore(u,this.nextSibling),u}},n(Z,q),Q.prototype={nodeName:"#comment",nodeType:v},n(Q,q),J.prototype={nodeName:"#cdata-section",nodeType:h},n(J,q),K.prototype.nodeType=E,n(K,L),ee.prototype.nodeType=b,n(ee,L),te.prototype.nodeType=f,n(te,L),ne.prototype.nodeType=p,n(ne,L),re.prototype.nodeName="#document-fragment",re.prototype.nodeType=y,n(re,L),ie.prototype.nodeType=N,n(ie,L),oe.prototype.serializeToString=function(t,n,o){return ae.call(t,n,o)},L.prototype.toString=ae;try{if(Object.defineProperty){function pe(t){switch(t.nodeType){case s:case y:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(pe(t)),t=t.nextSibling;return n.join('');default:return t.nodeValue}}Object.defineProperty(R.prototype,'length',{get:function(){return x(this),this.$$length}}),Object.defineProperty(L.prototype,'textContent',{get:function(){return pe(this)},set:function(t){switch(this.nodeType){case s:case y:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),he=function(t,n,o){t['$$'+n]=o}}}catch(e){}e.DOMImplementation=P,e.XMLSerializer=oe},413,[]);
__d(function(g,r,i,a,m,e,d){var o=r(d[0]),l=r(d[1]),t={},n=[],s=o.levels.TRACE;m.exports={addGlobalTransport:function(l){o.addGlobalTransport(l)},removeGlobalTransport:function(l){o.removeGlobalTransport(l)},setGlobalOptions:function(l){o.setGlobalOptions(l)},getLogger:function(l,v,f){var u=new o(s,l,v,f);return l?(t[l]=t[l]||[],t[l].push(u)):n.push(u),u},setLogLevelById:function(o,l){for(var s=l?t[l]||[]:n,v=0;v<s.length;v++)s[v].setLevel(o)},setLogLevel:function(o){s=o;for(var l=0;l<n.length;l++)n[l].setLevel(o);for(var v in t){var f=t[v]||[];for(l=0;l<f.length;l++)f[l].setLevel(o)}},levels:o.levels,LogCollector:l}},414,[415,416]);
__d(function(g,r,i,a,m,e,d){var t={trace:0,debug:1,info:2,log:3,warn:4,error:5};c.consoleTransport=console;var n=[c.consoleTransport];c.addGlobalTransport=function(t){-1===n.indexOf(t)&&n.push(t)},c.removeGlobalTransport=function(t){var o=n.indexOf(t);-1!==o&&n.splice(o,1)};var o={};function l(){var t={methodName:"",fileLocation:"",line:null,column:null},n=new Error,o=n.stack?n.stack.split("\n"):[];if(!o||o.length<1)return t;var l=null;return o[3]&&(l=o[3].match(/\s*at\s*(.+?)\s*\((\S*)\s*:(\d*)\s*:(\d*)\)/)),!l||l.length<=4?(0===o[2].indexOf("log@")?t.methodName=o[3].substr(0,o[3].indexOf("@")):t.methodName=o[2].substr(0,o[2].indexOf("@")),t):(t.methodName=l[1],t.fileLocation=l[2],t.line=l[3],t.column=l[4],t)}function s(){var s=arguments[0],c=arguments[1],f=Array.prototype.slice.call(arguments,2);if(!(t[c]<s.level))for(var h=!(s.options.disableCallerInfo||o.disableCallerInfo)&&l(),p=n.concat(s.transports),u=0;u<p.length;u++){var v=p[u],b=v[c];if(b&&"function"==typeof b){var O=[];O.push((new Date).toISOString()),s.id&&O.push("["+s.id+"]"),h&&h.methodName.length>1&&O.push("<"+h.methodName+">: ");var N=O.concat(f);b.bind(v).apply(v,N)}}}function c(n,o,l,c){this.id=o,this.options=c||{},this.transports=l,this.transports||(this.transports=[]),this.level=t[n];for(var f=Object.keys(t),h=0;h<f.length;h++)this[f[h]]=s.bind(null,this,f[h])}c.setGlobalOptions=function(t){o=t||{}},c.prototype.setLevel=function(n){this.level=t[n]},m.exports=c,c.levels={TRACE:"trace",DEBUG:"debug",INFO:"info",LOG:"log",WARN:"warn",ERROR:"error"}},415,[]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);function s(s,o){this.logStorage=s,this.stringifyObjects=!(!o||!o.stringifyObjects)&&o.stringifyObjects,this.storeInterval=o&&o.storeInterval?o.storeInterval:3e4,this.maxEntryLength=o&&o.maxEntryLength?o.maxEntryLength:1e4,Object.keys(t.levels).forEach(function(s){this[t.levels[s]]=function(){this._log.apply(this,arguments)}.bind(this,s)}.bind(this)),this.storeLogsIntervalID=null,this.queue=[],this.totalLen=0,this.outputCache=[]}s.prototype.stringify=function(t){try{return JSON.stringify(t)}catch(t){return'[object with circular refs?]'}},s.prototype.formatLogMessage=function(s){for(var o='',h=1,n=arguments.length;h<n;h++){var u=arguments[h];!this.stringifyObjects&&s!==t.levels.ERROR||'object'!=typeof u||(u=this.stringify(u)),o+=u,h!==n-1&&(o+=' ')}return o.length?o:null},s.prototype._log=function(){var t=arguments[1],s=this.formatLogMessage.apply(this,arguments);if(s){var o=this.queue[this.queue.length-1];(o&&o.text)===s?o.count+=1:(this.queue.push({text:s,timestamp:t,count:1}),this.totalLen+=s.length)}this.totalLen>=this.maxEntryLength&&this._flush(!0,!0)},s.prototype.start=function(){this._reschedulePublishInterval()},s.prototype._reschedulePublishInterval=function(){this.storeLogsIntervalID&&(window.clearTimeout(this.storeLogsIntervalID),this.storeLogsIntervalID=null),this.storeLogsIntervalID=window.setTimeout(this._flush.bind(this,!1,!0),this.storeInterval)},s.prototype.flush=function(){this._flush(!1,!0)},s.prototype._flush=function(t,s){this.totalLen>0&&(this.logStorage.isReady()||t)&&(this.logStorage.isReady()?(this.outputCache.length&&(this.outputCache.forEach(function(t){this.logStorage.storeLogs(t)}.bind(this)),this.outputCache=[]),this.logStorage.storeLogs(this.queue)):this.outputCache.push(this.queue),this.queue=[],this.totalLen=0),s&&this._reschedulePublishInterval()},s.prototype.stop=function(){this._flush(!1,!1)},m.exports=s},416,[415]);
__d(function(e,t,r,i,s,a,n){s.exports={_from:"react-native@0.63.3",_id:"react-native@0.63.3",_inBundle:!1,_integrity:"sha512-71wq13uNo5W8QVQnFlnzZ3AD+XgUBYGhpsxysQFW/hJ8GAt/J5o+Bvhy81FXichp6IBDJDh/JgfHH2gNji8dFA==",_location:"/react-native",_phantomChildren:{"@hapi/joi":"15.1.1","@jest/types":"25.5.0","@react-native-community/cli-debugger-ui":"4.13.1","@react-native-community/cli-hermes":"4.13.0","@react-native-community/cli-server-api":"4.13.1","@react-native-community/cli-tools":"4.13.0","@react-native-community/cli-types":"4.10.1","@types/istanbul-lib-coverage":"2.0.3","@types/istanbul-reports":"1.1.2","@types/yargs-parser":"15.0.0","ansi-regex":"5.0.0","ansi-styles":"4.3.0",chalk:"3.0.0","command-exists":"1.2.9",commander:"2.20.3",cosmiconfig:"5.2.1",deepmerge:"3.3.0",envinfo:"7.8.1",execa:"1.0.0","find-up":"4.1.0","fs-extra":"8.1.0",glob:"7.1.6","graceful-fs":"4.2.4",inquirer:"3.3.0",leven:"3.1.0",lodash:"4.17.20",metro:"0.59.0","metro-config":"0.59.0","metro-core":"0.59.0","metro-react-native-babel-transformer":"0.59.0","metro-resolver":"0.59.0",minimist:"1.2.5",mkdirp:"0.5.5","node-stream-zip":"1.15.0",ora:"3.4.0","react-is":"16.13.1","serve-static":"1.14.1","strip-ansi":"5.2.0","sudo-prompt":"9.2.1",wcwidth:"1.0.1"},_requested:{type:"version",registry:!0,raw:"react-native@0.63.3",name:"react-native",escapedName:"react-native",rawSpec:"0.63.3",saveSpec:null,fetchSpec:"0.63.3"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/react-native/-/react-native-0.63.3.tgz",_shasum:"4a7f6540e049ff41810887bbd1125abc4672f3bf",_spec:"react-native@0.63.3",_where:"/Users/bingo/Documents/sdk_workspace/zmeet_sdk",bin:{"react-native":"cli.js"},bugs:{url:"https://github.com/facebook/react-native/issues"},bundleDependencies:!1,dependencies:{"@babel/runtime":"^7.0.0","@react-native-community/cli":"^4.10.0","@react-native-community/cli-platform-android":"^4.10.0","@react-native-community/cli-platform-ios":"^4.10.0","abort-controller":"^3.0.0",anser:"^1.4.9","base64-js":"^1.1.2","event-target-shim":"^5.0.1",fbjs:"^1.0.0","fbjs-scripts":"^1.1.0","hermes-engine":"~0.5.0",invariant:"^2.2.4","jsc-android":"^245459.0.0","metro-babel-register":"0.59.0","metro-react-native-babel-transformer":"0.59.0","metro-source-map":"0.59.0",nullthrows:"^1.1.1","pretty-format":"^24.9.0",promise:"^8.0.3","prop-types":"^15.7.2","react-devtools-core":"^4.6.0","react-refresh":"^0.4.0","regenerator-runtime":"^0.13.2",scheduler:"0.19.1","stacktrace-parser":"^0.1.3","use-subscription":"^1.0.0","whatwg-fetch":"^3.0.0"},deprecated:!1,description:"A framework for building native apps using React",detox:{"test-runner":"jest","runner-config":"RNTester/e2e/config.json",specs:"",configurations:{"android.emu.release":{binaryPath:"RNTester/android/app/build/outputs/apk/hermes/release/app-hermes-x86-release.apk",testBinaryPath:"RNTester/android/app/build/outputs/apk/androidTest/hermes/release/app-hermes-release-androidTest.apk",build:"./gradlew RNTester:android:app:assembleRelease RNTester:android:app:assembleAndroidTest -DtestBuildType=release",type:"android.emulator",device:{avdName:"Nexus_6_API_29"}},"android.emu.debug":{binaryPath:"RNTester/android/app/build/outputs/apk/hermes/debug/app-hermes-x86-debug.apk",testBinaryPath:"RNTester/android/app/build/outputs/apk/androidTest/hermes/debug/app-hermes-debug-androidTest.apk",build:"./gradlew RNTester:android:app:assembleDebug RNTester:android:app:assembleAndroidTest -DtestBuildType=debug",type:"android.emulator",device:{avdName:"Nexus_6_API_29"}},"ios.sim.release":{binaryPath:"RNTester/build/Build/Products/Release-iphonesimulator/RNTester.app/",build:"xcodebuild -workspace RNTester/RNTesterPods.xcworkspace -scheme RNTester -configuration Release -sdk iphonesimulator -derivedDataPath RNTester/build -UseModernBuildSystem=NO -quiet",type:"ios.simulator",name:"iPhone 8"},"ios.sim.debug":{binaryPath:"RNTester/build/Build/Products/Debug-iphonesimulator/RNTester.app/",build:"xcodebuild -workspace RNTester/RNTesterPods.xcworkspace -scheme RNTester -configuration Debug -sdk iphonesimulator -derivedDataPath RNTester/build -UseModernBuildSystem=NO -quiet",type:"ios.simulator",name:"iPhone 8"}}},devDependencies:{"@babel/core":"^7.0.0","@babel/generator":"^7.5.0","@react-native-community/eslint-plugin":"file:packages/eslint-plugin-react-native-community","@reactions/component":"^2.0.2",async:"^2.4.0","babel-eslint":"10.0.1","clang-format":"^1.2.4",connect:"^3.6.5",coveralls:"^3.0.2",detox:"15.4.4",eslint:"5.1.0","eslint-config-fb-strict":"^24.9.0","eslint-config-fbjs":"2.1.0","eslint-config-prettier":"^6.0.0","eslint-plugin-babel":"^5.3.0","eslint-plugin-eslint-comments":"^3.1.1","eslint-plugin-flowtype":"2.50.3","eslint-plugin-jest":"22.4.1","eslint-plugin-jsx-a11y":"6.2.1","eslint-plugin-prettier":"2.6.2","eslint-plugin-react":"7.12.4","eslint-plugin-react-hooks":"^3.0.0","eslint-plugin-react-native":"3.8.1","eslint-plugin-relay":"1.7.0","flow-bin":"^0.122.0","flow-remove-types":"1.2.3",jest:"^24.9.0","jest-junit":"^6.3.0",jscodeshift:"^0.7.0",mkdirp:"^0.5.1",prettier:"1.17.0",react:"16.13.1","react-test-renderer":"16.13.1",shelljs:"^0.7.8",signedsource:"^1.0.0",ws:"^6.1.4",yargs:"^14.2.0"},engines:{node:">=10"},files:["!template/node_modules","!template/package-lock.json","!template/yarn.lock",".flowconfig","android","cli.js","flow","index.js","init.sh","interface.js","jest-preset.js","jest","lib","Libraries","LICENSE","local-cli","packager","React-Core.podspec","react-native.config.js","react.gradle","React.podspec","React","ReactAndroid","ReactCommon","README.md","rn-get-polyfills.js","scripts/react_native_pods.rb","scripts/compose-source-maps.js","scripts/ios-configure-glog.sh","scripts/launchPackager.bat","scripts/launchPackager.command","scripts/node-binary.sh","scripts/packager.sh","scripts/react-native-xcode.sh","template.config.js","template","third-party-podspecs"],homepage:"https://github.com/facebook/react-native#readme","jest-junit":{outputDirectory:"reports/junit",outputName:"js-test-results.xml"},license:"MIT",name:"react-native",peerDependencies:{react:"16.13.1"},repository:{type:"git",url:"git+ssh://git@github.com/facebook/react-native.git"},scripts:{"build-ios-e2e":"detox build -c ios.sim.release","clang-format":"clang-format -i --glob=*/**/*.{h,cpp,m,mm}","docker-build-android":"docker build -t reactnativeci/android -f .circleci/Dockerfiles/Dockerfile.android .","docker-setup-android":"docker pull reactnativecommunity/react-native-android",flow:"flow","flow-check-android":"flow check --flowconfig-name .flowconfig.android","flow-check-ios":"flow check",format:"npm run prettier && npm run clang-format","format-check":"prettier --list-different \"./**/*.{js,md,yml}\"",lint:"eslint .","lint-ci":"./scripts/circleci/analyze_code.sh && yarn shellcheck",prettier:"prettier --write \"./**/*.{js,md,yml}\"",shellcheck:"./scripts/circleci/analyze_scripts.sh",start:"react-native start",test:"jest","test-android-all":"yarn run docker-build-android && yarn run test-android-run-unit && yarn run test-android-run-instrumentation && yarn run test-android-run-e2e","test-android-e2e":"yarn run docker-build-android && yarn run test-android-run-e2e","test-android-instrumentation":"yarn run docker-build-android && yarn run test-android-run-instrumentation","test-android-run-e2e":"docker run --privileged -it reactnativeci/android bash .circleci/Dockerfiles/scripts/run-ci-e2e-tests.sh --android --js","test-android-run-instrumentation":"docker run --cap-add=SYS_ADMIN -it reactnativeci/android bash .circleci/Dockerfiles/scripts/run-android-docker-instrumentation-tests.sh","test-android-run-unit":"docker run --cap-add=SYS_ADMIN -it reactnativeci/android bash .circleci/Dockerfiles/scripts/run-android-docker-unit-tests.sh","test-android-unit":"yarn run docker-build-android && yarn run test-android-run-unit","test-ci":"jest --maxWorkers=2 --ci --reporters=\"default\" --reporters=\"jest-junit\"","test-ios":"./scripts/objc-test.sh test","test-ios-e2e":"detox test -c ios.sim.release RNTester/e2e"},version:"0.63.3"}},417,[]);
__d(function(g,r,i,a,m,e,d){var n=r(d[0]),o=r(d[1]),t=n(r(d[2]));!(function(n){void 0===n.MediaStream&&(n.MediaStream=o.MediaStream),void 0===n.MediaStreamTrack&&(n.MediaStreamTrack=o.MediaStreamTrack),void 0===n.RTCIceCandidate&&(n.RTCIceCandidate=o.RTCIceCandidate),void 0===n.RTCPeerConnection&&(n.RTCPeerConnection=t.default),void 0===n.RTCPeerConnection&&(n.webkitRTCPeerConnection=t.default),void 0===n.RTCSessionDescription&&(n.RTCSessionDescription=o.RTCSessionDescription);var s=n.navigator;s&&(void 0===s.mediaDevices&&(s.mediaDevices=o.mediaDevices),void 0===s.permissions&&(s.permissions=o.permissions))})(g||window||this)},418,[1,419,448]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.registerGlobals=function(){if('object'!=typeof navigator)throw new Error('navigator is not an object');navigator.mediaDevices||(navigator.mediaDevices={});navigator.mediaDevices.getUserMedia=s.default.getUserMedia.bind(s.default),navigator.mediaDevices.enumerateDevices=s.default.enumerateDevices.bind(s.default),g.RTCPeerConnection=n.default,g.RTCIceCandidate=u.default,g.RTCSessionDescription=o.default,g.MediaStream=c.default,g.MediaStreamTrack=l.default},Object.defineProperty(e,"RTCPeerConnection",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"RTCIceCandidate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"RTCSessionDescription",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"RTCView",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"MediaStream",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"MediaStreamTrack",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"mediaDevices",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"permissions",{enumerable:!0,get:function(){return b.default}});var n=t(r(d[1])),u=t(r(d[2])),o=t(r(d[3])),f=t(r(d[4])),c=t(r(d[5])),l=t(r(d[6])),s=t(r(d[7])),b=t(r(d[8]))},419,[1,420,439,438,443,425,431,444,447]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]),t=r(d[1]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t(r(d[2])),c=t(r(d[3])),s=t(r(d[4])),u=t(r(d[5])),f=t(r(d[6])),l=t(r(d[7])),v=t(r(d[8])),p=r(d[9]),h=t(r(d[10])),C=t(r(d[11])),_=(t(r(d[12])),t(r(d[13]))),S=t(r(d[14])),E=t(r(d[15])),I=t(r(d[16])),w=t(r(d[17])),y=t(r(d[18])),D=t(r(d[19])),k=n(r(d[20]));function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var R=p.NativeModules.WebRTCModule,L=0,b=(function(n){(0,u.default)(T,n);var t,v,b=(t=T,v=O(),function(){var n,o=(0,l.default)(t);if(v){var c=(0,l.default)(this).constructor;n=Reflect.construct(o,arguments,c)}else n=o.apply(this,arguments);return(0,f.default)(this,n)});function T(n){var t;return(0,c.default)(this,T),(t=b.call(this)).signalingState='stable',t.iceGatheringState='new',t.iceConnectionState='new',t._localStreams=[],t._remoteStreams=[],t._dataChannelIds=new Set,t._peerConnectionId=L++,R.peerConnectionInit(n,t._peerConnectionId),t._registerEvents(),t}return(0,s.default)(T,[{key:"addStream",value:function(n){-1===this._localStreams.indexOf(n)&&(R.peerConnectionAddStream(n._reactTag,this._peerConnectionId),this._localStreams.push(n))}},{key:"removeStream",value:function(n){var t=this._localStreams.indexOf(n);-1!==t&&(this._localStreams.splice(t,1),R.peerConnectionRemoveStream(n._reactTag,this._peerConnectionId))}},{key:"createOffer",value:function(n){var t=this;return new Promise(function(o,c){R.peerConnectionCreateOffer(t._peerConnectionId,k.normalizeOfferAnswerOptions(n),function(n,t){n?o(new I.default(t)):c(t)})})}},{key:"createAnswer",value:function(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(o,c){R.peerConnectionCreateAnswer(n._peerConnectionId,k.normalizeOfferAnswerOptions(t),function(n,t){n?o(new I.default(t)):c(t)})})}},{key:"setConfiguration",value:function(n){R.peerConnectionSetConfiguration(n,this._peerConnectionId)}},{key:"setLocalDescription",value:function(n){var t=this;return new Promise(function(o,c){R.peerConnectionSetLocalDescription(n.toJSON?n.toJSON():n,t._peerConnectionId,function(s,u){s?(t.localDescription=n,o()):c(u)})})}},{key:"setRemoteDescription",value:function(n){var t=this;return new Promise(function(o,c){R.peerConnectionSetRemoteDescription(n.toJSON?n.toJSON():n,t._peerConnectionId,function(s,u){s?(t.remoteDescription=n,o()):c(u)})})}},{key:"addIceCandidate",value:function(n){var t=this;return new Promise(function(o,c){R.peerConnectionAddICECandidate(n.toJSON?n.toJSON():n,t._peerConnectionId,function(n){n?o():c(new Error('Failed to add ICE candidate'))})})}},{key:"getStats",value:function(n){var t=this;return new Promise(function(o,c){R.peerConnectionGetStats(n&&n.id||'',t._peerConnectionId,function(n,t){if(n)try{var s=JSON.parse(t);o(s)}catch(n){c(n)}else c(new Error(t))})})}},{key:"getLocalStreams",value:function(){return this._localStreams.slice()}},{key:"getRemoteStreams",value:function(){return this._remoteStreams.slice()}},{key:"close",value:function(){R.peerConnectionClose(this._peerConnectionId)}},{key:"_getTrack",value:function(n,t){var o=this._remoteStreams.find(function(t){return t._reactTag===n});return o&&o._tracks.find(function(n){return n.id===t})}},{key:"_unregisterEvents",value:function(){this._subscriptions.forEach(function(n){return n.remove()}),this._subscriptions=[]}},{key:"_registerEvents",value:function(){var n=this;this._subscriptions=[p.DeviceEventEmitter.addListener('peerConnectionOnRenegotiationNeeded',function(t){t.id===n._peerConnectionId&&n.dispatchEvent(new D.default('negotiationneeded'))}),p.DeviceEventEmitter.addListener('peerConnectionIceConnectionChanged',function(t){t.id===n._peerConnectionId&&(n.iceConnectionState=t.iceConnectionState,n.dispatchEvent(new D.default('iceconnectionstatechange')),'closed'===t.iceConnectionState&&n._unregisterEvents())}),p.DeviceEventEmitter.addListener('peerConnectionSignalingStateChanged',function(t){t.id===n._peerConnectionId&&(n.signalingState=t.signalingState,n.dispatchEvent(new D.default('signalingstatechange')))}),p.DeviceEventEmitter.addListener('peerConnectionAddedStream',function(t){if(t.id===n._peerConnectionId){var o=new h.default(t);n._remoteStreams.push(o),n.dispatchEvent(new C.default('addstream',{stream:o}))}}),p.DeviceEventEmitter.addListener('peerConnectionRemovedStream',function(t){if(t.id===n._peerConnectionId){var o=n._remoteStreams.find(function(n){return n._reactTag===t.streamId});if(o){var c=n._remoteStreams.indexOf(o);-1!==c&&n._remoteStreams.splice(c,1)}n.dispatchEvent(new C.default('removestream',{stream:o}))}}),p.DeviceEventEmitter.addListener('mediaStreamTrackMuteChanged',function(t){if(t.peerConnectionId===n._peerConnectionId){var o=n._getTrack(t.streamReactTag,t.trackId);if(o){o.muted=t.muted;var c=t.muted?'mute':'unmute';o.dispatchEvent(new _.default(c,{track:o}))}}}),p.DeviceEventEmitter.addListener('peerConnectionGotICECandidate',function(t){if(t.id===n._peerConnectionId){var o=new w.default(t.candidate),c=new y.default('icecandidate',{candidate:o});n.dispatchEvent(c)}}),p.DeviceEventEmitter.addListener('peerConnectionIceGatheringChanged',function(t){t.id===n._peerConnectionId&&(n.iceGatheringState=t.iceGatheringState,'complete'===n.iceGatheringState&&n.dispatchEvent(new y.default('icecandidate',null)),n.dispatchEvent(new D.default('icegatheringstatechange')))}),p.DeviceEventEmitter.addListener('peerConnectionDidOpenDataChannel',function(t){if(t.id===n._peerConnectionId){var o=t.dataChannel,c=o.id;if('number'==typeof c&&-1!==c){var s=new S.default(n._peerConnectionId,o.label,o);n._dataChannelIds.add(c),n.dispatchEvent(new E.default('datachannel',{channel:s}))}}})]}},{key:"createDataChannel",value:function(n,t){var c,s=this._dataChannelIds;if(t&&'id'in t){if('number'!=typeof(c=t.id))throw new TypeError('DataChannel id must be a number: '+c);if(s.has(c))throw new ResourceInUse('DataChannel id already in use: '+c)}else{for(c=1;c<65535&&s.has(c);++c);t=(0,o.default)({id:c},t)}return R.createDataChannel(this._peerConnectionId,n,t),s.add(c),new S.default(this._peerConnectionId,n,t)}}]),T})((0,v.default)(['connectionstatechange','icecandidate','icecandidateerror','iceconnectionstatechange','icegatheringstatechange','negotiationneeded','signalingstatechange','datachannel','addstream','removestream']));e.default=b},420,[12,1,16,29,30,45,47,44,421,5,425,433,431,434,435,437,438,439,440,441,442]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]),n=r(d[1]),l=r(d[2]),o=t.LISTENERS,u=t.CAPTURE,f=t.BUBBLE,c=t.ATTRIBUTE,s=t.newNode,v=n.defineCustomEventTarget,h=l.createEventWrapper,E=l.STOP_IMMEDIATE_PROPAGATION_FLAG,p="undefined"!=typeof window&&void 0!==window.EventTarget,w=m.exports=function t(){if(!(this instanceof t)){if(1===arguments.length&&Array.isArray(arguments[0]))return v(t,arguments[0]);if(arguments.length>0){for(var n=Array(arguments.length),l=0;l<arguments.length;++l)n[l]=arguments[l];return v(t,n)}throw new TypeError("Cannot call a class as a function")}Object.defineProperty(this,o,{value:Object.create(null)})};w.prototype=Object.create((p?window.EventTarget:Object).prototype,{constructor:{value:w,writable:!0,configurable:!0},addEventListener:{value:function(t,n,l){if(null==n)return!1;if("function"!=typeof n&&"object"!=typeof n)throw new TypeError("\"listener\" is not an object.");var c=l?u:f,v=this[o][t];if(null==v)return this[o][t]=s(n,c),!0;for(var h=null;null!=v;){if(v.listener===n&&v.kind===c)return!1;h=v,v=v.next}return h.next=s(n,c),!0},configurable:!0,writable:!0},removeEventListener:{value:function(t,n,l){if(null==n)return!1;for(var c=l?u:f,s=null,v=this[o][t];null!=v;){if(v.listener===n&&v.kind===c)return null==s?this[o][t]=v.next:s.next=v.next,!0;s=v,v=v.next}return!1},configurable:!0,writable:!0},dispatchEvent:{value:function(t){var n=this[o][t.type];if(null==n)return!0;for(var l=h(t,this);null!=n&&("function"==typeof n.listener?n.listener.call(this,l):n.kind!==c&&"function"==typeof n.listener.handleEvent&&n.listener.handleEvent(l),!l[E]);)n=n.next;return!l.defaultPrevented},configurable:!0,writable:!0}})},421,[422,423,424]);
__d(function(g,r,i,a,m,e,d){"use strict";var n=e.createUniqueKey="undefined"!=typeof Symbol?Symbol:function(n){return"[["+n+"_"+Math.random().toFixed(8).slice(2)+"]]"};e.LISTENERS=n("listeners"),e.CAPTURE=1,e.BUBBLE=2,e.ATTRIBUTE=3,e.newNode=function(n,t){return{listener:n,kind:t,next:null}}},422,[]);
__d(function(g,r,i,a,m,e,d){"use strict";var n=r(d[0]),t=n.LISTENERS,u=n.ATTRIBUTE,o=n.newNode;function l(n,o){for(var l=n[t][o];null!=l;){if(l.kind===u)return l.listener;l=l.next}return null}function c(n,l,c){"function"!=typeof c&&"object"!=typeof c&&(c=null);for(var f=null,s=n[t][l];null!=s;)s.kind===u?null==f?n[t][l]=s.next:f.next=s.next:f=s,s=s.next;null!=c&&(null==f?n[t][l]=o(c,u):f.next=o(c,u))}e.defineCustomEventTarget=function(n,t){function u(){n.call(this)}var o={constructor:{value:u,configurable:!0,writable:!0}};return t.forEach(function(n){o["on"+n]={get:function(){return l(this,n)},set:function(t){c(this,n,t)},configurable:!0,enumerable:!0}}),u.prototype=Object.create(n.prototype,o),u}},423,[422]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).createUniqueKey,n=t("stop_immediate_propagation_flag"),l=t("canceled_flag"),u=t("original_event"),o=Object.freeze({stopPropagation:Object.freeze({value:function(){var t=this[u];"function"==typeof t.stopPropagation&&t.stopPropagation()},writable:!0,configurable:!0}),stopImmediatePropagation:Object.freeze({value:function(){this[n]=!0;var t=this[u];"function"==typeof t.stopImmediatePropagation&&t.stopImmediatePropagation()},writable:!0,configurable:!0}),preventDefault:Object.freeze({value:function(){!0===this.cancelable&&(this[l]=!0);var t=this[u];"function"==typeof t.preventDefault&&t.preventDefault()},writable:!0,configurable:!0}),defaultPrevented:Object.freeze({get:function(){return this[l]},enumerable:!0,configurable:!0})});e.STOP_IMMEDIATE_PROPAGATION_FLAG=n,e.createEventWrapper=function(t,b){var c="number"==typeof t.timeStamp?t.timeStamp:Date.now(),p={type:{value:t.type,enumerable:!0},target:{value:b,enumerable:!0},currentTarget:{value:b,enumerable:!0},eventPhase:{value:2,enumerable:!0},bubbles:{value:Boolean(t.bubbles),enumerable:!0},cancelable:{value:Boolean(t.cancelable),enumerable:!0},timeStamp:{value:c,enumerable:!0},isTrusted:{value:!1,enumerable:!0}};return p[n]={value:!1,writable:!0},p[l]={value:!1,writable:!0},p[u]={value:t},void 0!==t.detail&&(p.detail={value:t.detail,enumerable:!0}),Object.create(Object.create(t,o),p)}},424,[422]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r(d[1])),o=t(r(d[2])),c=t(r(d[3])),u=t(r(d[4])),f=t(r(d[5])),l=r(d[6]),s=t(r(d[7])),v=t(r(d[8])),y=t(r(d[9]));function k(t,n){var o;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=h(t))||n&&t&&"number"==typeof t.length){o&&(t=o);var c=0;return function(){return c>=t.length?{done:!0}:{done:!1,value:t[c++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(o=t[Symbol.iterator]()).next.bind(o)}function h(t,n){if(t){if("string"==typeof t)return p(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?p(t,n):void 0}}function p(t,n){(null==n||n>t.length)&&(n=t.length);for(var o=0,c=new Array(n);o<n;o++)c[o]=t[o];return c}function T(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var _=l.NativeModules.WebRTCModule,b=(function(t){(0,c.default)(p,t);var l,s,h=(l=p,s=T(),function(){var t,n=(0,f.default)(l);if(s){var o=(0,f.default)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,u.default)(this,t)});function p(t){var o;if((0,n.default)(this,p),(o=h.call(this)).active=!0,o._tracks=[],o.id=v.default.v4(),o._reactTag=o.id,void 0===t)_.mediaStreamCreate(o.id);else if(t instanceof p){_.mediaStreamCreate(o.id);for(var c,u=k(t.getTracks());!(c=u()).done;){var f=c.value;o.addTrack(f)}}else if(Array.isArray(t)){_.mediaStreamCreate(o.id);for(var l,s=k(t);!(l=s()).done;){var T=l.value;o.addTrack(T)}}else{if(!('object'==typeof t&&t.streamId&&t.streamReactTag&&t.tracks))throw new TypeError("invalid type: "+typeof t);o.id=t.streamId,o._reactTag=t.streamReactTag;for(var b,S=k(t.tracks);!(b=S()).done;){var R=b.value;o._tracks.push(new y.default(R))}}return o}return(0,o.default)(p,[{key:"addTrack",value:function(t){-1===this._tracks.indexOf(t)&&(this._tracks.push(t),_.mediaStreamAddTrack(this._reactTag,t.id))}},{key:"removeTrack",value:function(t){var n=this._tracks.indexOf(t);-1!==n&&(this._tracks.splice(n,1),_.mediaStreamRemoveTrack(this._reactTag,t.id))}},{key:"getTracks",value:function(){return this._tracks.slice()}},{key:"getTrackById",value:function(t){return this._tracks.find(function(n){return n.id===t})}},{key:"getAudioTracks",value:function(){return this._tracks.filter(function(t){return'audio'===t.kind})}},{key:"getVideoTracks",value:function(){return this._tracks.filter(function(t){return'video'===t.kind})}},{key:"clone",value:function(){throw new Error('Not implemented.')}},{key:"toURL",value:function(){return this._reactTag}},{key:"release",value:function(){_.mediaStreamRelease(this._reactTag)}}]),p})((0,s.default)(['active','inactive','addtrack','removetrack']));e.default=b},425,[1,29,30,45,47,44,5,421,426,431]);
__d(function(g,r,i,a,m,e,d){var v=r(d[0]),n=r(d[1]),o=n;o.v1=v,o.v4=n,m.exports=o},426,[427,430]);
__d(function(g,r,i,a,m,e,d){var n,o,s=r(d[0]),c=r(d[1]),v=0,l=0;m.exports=function(u,t,f){var k=t&&f||0,q=t||[],w=(u=u||{}).node||n,h=void 0!==u.clockseq?u.clockseq:o;if(null==w||null==h){var _=s();null==w&&(w=n=[1|_[0],_[1],_[2],_[3],_[4],_[5]]),null==h&&(h=o=16383&(_[6]<<8|_[7]))}var p=void 0!==u.msecs?u.msecs:(new Date).getTime(),x=void 0!==u.nsecs?u.nsecs:l+1,C=p-v+(x-l)/1e4;if(C<0&&void 0===u.clockseq&&(h=h+1&16383),(C<0||p>v)&&void 0===u.nsecs&&(x=0),x>=1e4)throw new Error('uuid.v1(): Can\'t create more than 10M uuids/sec');v=p,l=x,o=h;var D=(1e4*(268435455&(p+=122192928e5))+x)%4294967296;q[k++]=D>>>24&255,q[k++]=D>>>16&255,q[k++]=D>>>8&255,q[k++]=255&D;var E=p/4294967296*1e4&268435455;q[k++]=E>>>8&255,q[k++]=255&E,q[k++]=E>>>24&15|16,q[k++]=E>>>16&255,q[k++]=h>>>8|128,q[k++]=255&h;for(var M=0;M<6;++M)q[k+M]=w[M];return t||c(q)}},427,[428,429]);
__d(function(g,r,i,a,m,e,d){var n='undefined'!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||'undefined'!=typeof msCrypto&&'function'==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var t=new Uint8Array(16);m.exports=function(){return n(t),t}}else{var o=new Array(16);m.exports=function(){for(var n,t=0;t<16;t++)0==(3&t)&&(n=4294967296*Math.random()),o[t]=n>>>((3&t)<<3)&255;return o}}},428,[]);
__d(function(g,r,i,a,m,e,d){for(var n=[],t=0;t<256;++t)n[t]=(t+256).toString(16).substr(1);m.exports=function(t,o){var u=o||0,f=n;return[f[t[u++]],f[t[u++]],f[t[u++]],f[t[u++]],'-',f[t[u++]],f[t[u++]],'-',f[t[u++]],f[t[u++]],'-',f[t[u++]],f[t[u++]],'-',f[t[u++]],f[t[u++]],f[t[u++]],f[t[u++]],f[t[u++]],f[t[u++]]].join('')}},429,[]);
__d(function(g,r,i,a,m,e,d){var n=r(d[0]),o=r(d[1]);m.exports=function(t,f,u){var l=f&&u||0;'string'==typeof t&&(f='binary'===t?new Array(16):null,t=null);var v=(t=t||{}).random||(t.rng||n)();if(v[6]=15&v[6]|64,v[8]=63&v[8]|128,f)for(var y=0;y<16;++y)f[l+y]=v[y];return f||o(v)}},430,[428,429]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r(d[1])),o=t(r(d[2])),l=t(r(d[3])),u=t(r(d[4])),c=t(r(d[5])),s=r(d[6]),f=t(r(d[7]));t(r(d[8]));function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var v=s.NativeModules.WebRTCModule,y=(function(t){(0,l.default)(k,t);var s,f,y=(s=k,f=h(),function(){var t,n=(0,c.default)(s);if(f){var o=(0,c.default)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,u.default)(this,t)});function k(t){var o;(0,n.default)(this,k),o=y.call(this);var l=t.readyState.toLowerCase();return o._enabled=t.enabled,o.id=t.id,o.kind=t.kind,o.label=t.label,o.muted=!1,o.readonly=!0,o.remote=t.remote,o.readyState="initializing"===l||"live"===l?"live":"ended",o}return(0,o.default)(k,[{key:"stop",value:function(){v.mediaStreamTrackSetEnabled(this.id,!1),this.readyState='ended'}},{key:"_switchCamera",value:function(){if(this.remote)throw new Error('Not implemented for remote tracks');if('video'!==this.kind)throw new Error('Only implemented for video tracks');v.mediaStreamTrackSwitchCamera(this.id)}},{key:"applyConstraints",value:function(){throw new Error('Not implemented.')}},{key:"clone",value:function(){throw new Error('Not implemented.')}},{key:"getCapabilities",value:function(){throw new Error('Not implemented.')}},{key:"getConstraints",value:function(){throw new Error('Not implemented.')}},{key:"getSettings",value:function(){throw new Error('Not implemented.')}},{key:"release",value:function(){v.mediaStreamTrackRelease(this.id)}},{key:"enabled",get:function(){return this._enabled},set:function(t){t!==this._enabled&&(v.mediaStreamTrackSetEnabled(this.id,!this._enabled),this._enabled=!this._enabled,this.muted=!this._enabled)}}]),k})((0,f.default)(['ended','mute','unmute','overconstrained']));e.default=y},431,[1,29,30,45,47,44,5,421,432]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])),f=t(r(d[2]));e.default=function t(l,n){(0,f.default)(this,t),this.type=l.toString(),(0,u.default)(this,n)}},432,[1,16,29]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])),f=t(r(d[2]));e.default=function t(l,n){(0,f.default)(this,t),this.type=l.toString(),(0,u.default)(this,n)}},433,[1,16,29]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])),f=t(r(d[2]));e.default=function t(l,n){(0,f.default)(this,t),this.type=l.toString(),(0,u.default)(this,n)}},434,[1,16,29]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r(d[1])),o=t(r(d[2])),s=t(r(d[3])),u=t(r(d[4])),f=t(r(d[5])),c=t(r(d[6])),l=r(d[7]),h=t(r(d[8])),y=t(r(d[9])),p=t(r(d[10])),v=t(r(d[11]));function b(t){var n=_();return function(){var o,s=(0,f.default)(t);if(n){var c=(0,f.default)(this).constructor;o=Reflect.construct(s,arguments,c)}else o=s.apply(this,arguments);return(0,u.default)(this,o)}}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var C=l.NativeModules.WebRTCModule,E=((function(t){(0,s.default)(u,t);var n=b(u);function u(){return(0,o.default)(this,u),n.apply(this,arguments)}})((0,c.default)(Error)),(function(t){(0,s.default)(f,t);var u=b(f);function f(t,n,s){var c;return(0,o.default)(this,f),(c=u.call(this)).binaryType='arraybuffer',c.bufferedAmount=0,c.bufferedAmountLowThreshold=0,c.maxPacketLifeTime=null,c.maxRetransmits=null,c.negotiated=!1,c.ordered=!0,c.protocol='',c.readyState='connecting',c._peerConnectionId=t,c.label=n,c.id='id'in s?s.id:-1,c.ordered=!!s.ordered,c.maxPacketLifeTime=s.maxPacketLifeTime,c.maxRetransmits=s.maxRetransmits,c.protocol=s.protocol||'',c.negotiated=!!s.negotiated,c._registerEvents(),c}return(0,n.default)(f,[{key:"send",value:function(t){if('string'!=typeof t){if(ArrayBuffer.isView(t))t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);else{if(!(t instanceof ArrayBuffer))throw new TypeError('Data must be either string, ArrayBuffer, or ArrayBufferView');t=new Uint8Array(t)}C.dataChannelSend(this._peerConnectionId,this.id,h.default.fromByteArray(t),'binary')}else C.dataChannelSend(this._peerConnectionId,this.id,t,'text')}},{key:"close",value:function(){'closing'!==this.readyState&&'closed'!==this.readyState&&(this.readyState='closing',C.dataChannelClose(this._peerConnectionId,this.id))}},{key:"_unregisterEvents",value:function(){this._subscriptions.forEach(function(t){return t.remove()}),this._subscriptions=[]}},{key:"_registerEvents",value:function(){var t=this;this._subscriptions=[l.DeviceEventEmitter.addListener('dataChannelStateChanged',function(n){n.peerConnectionId===t._peerConnectionId&&n.id===t.id&&(t.readyState=n.state,'open'===t.readyState?t.dispatchEvent(new v.default('open',{channel:t})):'close'===t.readyState&&(t.dispatchEvent(new v.default('close',{channel:t})),t._unregisterEvents()))}),l.DeviceEventEmitter.addListener('dataChannelReceiveMessage',function(n){if(n.peerConnectionId===t._peerConnectionId&&n.id===t.id){var o=n.data;'binary'===n.type&&(o=h.default.toByteArray(n.data).buffer),t.dispatchEvent(new p.default('message',{data:o}))}})]}}]),f})((0,y.default)(['open','message','bufferedamountlow','close','error'])));e.default=E},435,[1,30,29,45,47,44,103,5,148,421,436,437]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])),f=t(r(d[2]));e.default=function t(l,n){(0,f.default)(this,t),this.type=l.toString(),(0,u.default)(this,n)}},436,[1,16,29]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])),f=t(r(d[2]));e.default=function t(l,n){(0,f.default)(this,t),this.type=l.toString(),(0,u.default)(this,n)}},437,[1,16,29]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])),s=t(r(d[2])),n=(function(){function t(s){(0,u.default)(this,t),this.sdp=s.sdp,this.type=s.type}return(0,s.default)(t,[{key:"toJSON",value:function(){return{sdp:this.sdp,type:this.type}}}]),t})();e.default=n},438,[1,29,30]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r(d[1])),s=t(r(d[2])),u=(function(){function t(s){(0,n.default)(this,t),this.candidate=s.candidate,this.sdpMLineIndex=s.sdpMLineIndex,this.sdpMid=s.sdpMid}return(0,s.default)(t,[{key:"toJSON",value:function(){return{candidate:this.candidate,sdpMLineIndex:this.sdpMLineIndex,sdpMid:this.sdpMid}}}]),t})();e.default=u},439,[1,29,30]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r(d[1]));e.default=function t(u,c){(0,n.default)(this,t),this.type=u.toString(),this.candidate=null,c&&c.candidate&&(this.candidate=c.candidate)}},440,[1,29]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])),f=t(r(d[2]));e.default=function t(l,n){(0,f.default)(this,t),this.type=l.toString(),(0,u.default)(this,n)}},441,[1,16,29]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeOfferAnswerOptions=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o={};if(!t)return o;t.mandatory&&(t=t.mandatory);for(var f=0,c=Object.entries(t);f<c.length;f++){var u=c[f],v=(0,n.default)(u,2),s=v[0],l=v[1],w=h[s.toLowerCase()];w&&(o[w]=String(Boolean(l)))}return o},e.normalizeConstraints=function(t){for(var n=(s=t,JSON.parse(JSON.stringify(s))),o=0,f=['audio','video'];o<f.length;o++){var c=f[o],h=n[c],v=typeof h;if('undefined'!==v)if('boolean'===v)h&&(n[c]=u(c));else{if('object'!==v)throw new TypeError("constraints."+c+" is neither a boolean nor a dictionary");n[c]=l(h,c)}}var s;return n};var n=t(r(d[1])),o={},f={facingMode:'user',frameRate:30,height:720,width:1280},c=1.7777777777777777,h={icerestart:'IceRestart',offertoreceiveaudio:'OfferToReceiveAudio',offertoreceivevideo:'OfferToReceiveVideo',voiceactivitydetection:'VoiceActivityDetection'};function u(t){switch(t){case'audio':return o;case'video':return f;default:throw new TypeError("Invalid media type: "+t)}}function v(t,n){var o=t[n],f=typeof o;if('object'===f)for(var c=0,h=['exact','ideal'];c<h.length;c++){var u=h[c];if(o[u])return o[u]}else if('string'===f)return o}function s(t,n){var o=t[n],f=typeof o;if('number'===f)return Number.parseInt(o);if('object'===f)for(var c=0,h=['exact','ideal','min','max'];c<h.length;c++){var u=h[c];if(o[u])return Number.parseInt(o[u])}}function l(t,n){switch(n){case'audio':return t;case'video':var o;return(o=t.mandatory?{deviceId:v(t.optional||{},'sourceId'),facingMode:v(t,'facingMode'),frameRate:s(t.mandatory,'minFrameRate'),height:s(t.mandatory,'minHeight'),width:s(t.mandatory,'minWidth')}:{deviceId:v(t,'deviceId'),facingMode:v(t,'facingMode'),frameRate:s(t,'frameRate'),height:s(t,'height'),width:s(t,'width')}).deviceId||delete o.deviceId,(!o.facingMode||'user'!==o.facingMode&&'environment'!==o.facingMode)&&(o.facingMode=f.facingMode),o.frameRate||(o.frameRate=f.frameRate),o.height||o.width?o.height?o.width||(o.width=Math.round(o.height*c)):o.height=Math.round(o.width/c):(o.height=f.height,o.width=f.width),o;default:throw new TypeError("Invalid media type: "+n)}}},442,[1,17]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(d[1]),n=t(r(d[2])),l=(o.NativeModules.WebRTCModule,{name:'RTCVideoView',propTypes:{mirror:n.default.bool,objectFit:n.default.oneOf(['contain','cover']),streamURL:n.default.string,zOrder:n.default.number}}),s=(0,o.requireNativeComponent)('RTCVideoView',l,{nativeOnly:{testID:!0,accessibilityComponentType:!0,renderToHardwareTextureAndroid:!0,accessibilityLabel:!0,accessibilityLiveRegion:!0,importantForAccessibility:!0,onLayout:!0,nativeID:!0}});e.default=s},443,[1,5,73]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])),n=t(r(d[2])),c=t(r(d[3])),f=t(r(d[4])),o=t(r(d[5])),l=r(d[6]),s=t(r(d[7])),v=t(r(d[8]));function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var p=l.NativeModules.WebRTCModule,h=new((function(t){(0,c.default)(R,t);var l,s,h=(l=R,s=y(),function(){var t,u=(0,o.default)(l);if(s){var n=(0,o.default)(this).constructor;t=Reflect.construct(u,arguments,n)}else t=u.apply(this,arguments);return(0,f.default)(this,t)});function R(){return(0,u.default)(this,R),h.apply(this,arguments)}return(0,n.default)(R,[{key:"enumerateDevices",value:function(){return new Promise(function(t){return p.enumerateDevices(t)})}},{key:"getUserMedia",value:function(t){return(0,v.default)(t)}}]),R})((0,s.default)(['devicechange'])));e.default=h},444,[1,29,30,45,47,44,5,421,445]);
__d(function(g,r,i,a,m,e,d){'use strict';var o=r(d[0]),t=r(d[1]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if('object'!=typeof o)return Promise.reject(new TypeError('constraints is not a dictionary'));if(!(void 0!==o.audio&&o.audio||void 0!==o.video&&o.video))return Promise.reject(new TypeError('audio and/or video is required'));var t=[];(o=u.normalizeConstraints(o)).audio?t.push(v.default.request({name:'microphone'})):t.push(Promise.resolve(!1));o.video?t.push(v.default.request({name:'camera'})):t.push(Promise.resolve(!1));return new Promise(function(s,u){Promise.all(t).then(function(t){var v=(0,n.default)(t,2),p=v[0],h=v[1];if(p||h){p||delete o.audio,h||delete o.video;f.getUserMedia(o,function(o,t){var n={streamId:o,streamReactTag:o,tracks:t};s(new c.default(n))},function(o,t){var n;switch(o){case'TypeError':n=new TypeError(t)}n||(n=new l.default({message:t,name:o}));u(n)})}else{u(new l.default({message:'Permission denied.',name:'SecurityError'}))}})})};var n=t(r(d[2])),s=r(d[3]),u=o(r(d[4])),c=t(r(d[5])),l=t(r(d[6])),v=t(r(d[7])),f=s.NativeModules.WebRTCModule},445,[12,1,17,5,442,425,446,447]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=t(r(d[1]));e.default=function t(n){(0,s.default)(this,t),this.name=n.name,this.message=n.message,this.constraintName=n.constraintName}},446,[1,29]);
__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(r(d[1])),o=n(r(d[2])),s=r(d[3]),u=s.NativeModules.WebRTCModule,P=new((function(){function n(){(0,t.default)(this,n),this.RESULT={DENIED:'denied',GRANTED:'granted',PROMPT:'prompt'},this.VALID_PERMISSIONS=['camera','microphone'],this._lastReq=Promise.resolve()}return(0,o.default)(n,[{key:"_requestPermissionAndroid",value:function(n){return new Promise(function(t,o){s.PermissionsAndroid.request(n).then(function(n){return t(!0===n||n===s.PermissionsAndroid.RESULTS.GRANTED)},function(){return t(!1)})})}},{key:"_validatePermissionDescriptior",value:function(n){if("object"!=typeof n)throw new TypeError("Argument 1 of Permissions.query is not an object.");if(void 0===n.name)throw new TypeError("Missing required 'name' member of PermissionDescriptor.");if(-1===this.VALID_PERMISSIONS.indexOf(n.name))throw new TypeError("'name' member of PermissionDescriptor is not a valid value for enumeration PermissionName.")}},{key:"query",value:function(n){var t=this;try{this._validatePermissionDescriptior(n)}catch(n){return Promise.reject(n)}if('android'===s.Platform.OS){var o='camera'===n.name?s.PermissionsAndroid.PERMISSIONS.CAMERA:s.PermissionsAndroid.PERMISSIONS.RECORD_AUDIO;return new Promise(function(n,u){s.PermissionsAndroid.check(o).then(function(o){return n(o?t.RESULT.GRANTED:t.RESULT.PROMPT)},function(){return n(t.RESULT.PROMPT)})})}return'ios'===s.Platform.OS?u.checkPermission(n.name):Promise.reject(new TypeError("Unsupported platform."))}},{key:"request",value:function(n){var t=this;try{this._validatePermissionDescriptior(n)}catch(n){return Promise.reject(n)}if('android'===s.Platform.OS){var o='camera'===n.name?s.PermissionsAndroid.PERMISSIONS.CAMERA:s.PermissionsAndroid.PERMISSIONS.RECORD_AUDIO,P=function(){return t._requestPermissionAndroid(o)};return this._lastReq=this._lastReq.then(P,P),this._lastReq}return'ios'===s.Platform.OS?u.requestPermission(n.name):Promise.reject(new TypeError("Unsupported platform."))}}]),n})());e.default=P},447,[1,29,30,5]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r(d[1])),o=t(r(d[2])),u=t(r(d[3])),f=t(r(d[4])),s=t(r(d[5])),c=t(r(d[6])),l=t(r(d[7])),v=r(d[8]),p=r(d[9]);function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var y=(function(){var t=v.NativeModules.POSIX;if(t){var n=t.getaddrinfo;if('function'==typeof n)return function(t){return n(t,void 0).then(function(t){return(0,l.default)(t,1)[0].ai_addr})}}var o=v.NativeModules.NAT64AddrInfo;if(o){var u=o.getIPv6Address;if('function'==typeof u)return u}return function(){return Promise.reject("The impossible just happened! No POSIX.getaddrinfo or NAT64AddrInfo.getIPv6Address!")}})();function _(t){var n=t.sdp,o=0,u=[],f=new Map;do{var s=n.indexOf('\r\n',o),c=void 0;if(-1===s?(c=n.substring(o),o=void 0):(c=n.substring(o,s),o=s+2),c.startsWith('a=candidate:')){var l=c.split(' ');if(l.length>=10&&'typ'===l[6]){for(var v=[l[4]],p=!1,h=8;h<l.length;++h)if('raddr'===l[h]){v.push(l[++h]);break}for(var _=function(t){if(-1!==t.indexOf(':'))return p=!0,"break";f.has(t)||f.set(t,new Promise(function(n,o){var u=f.get(t);u&&'string'==typeof u?n(u):y(t).then(function(o){o&&-1!==o.indexOf(':')&&o!==f.get(t)?f.set(t,o):f.delete(t),n(o)},o)}))},O=0,R=v;O<R.length;O++){if("break"===_(R[O]))break}if(p){f.clear();break}c=l}}u.push(c)}while(o);return{ips:f,lines:u}}function O(t,n,o){if(0===n.size)return t;for(var u=0;u<o.length;++u){var f=o[u];if('string'!=typeof f){var s=f[4],c=n.get(s);c&&(f[4]=c);for(var l=8;l<f.length;++l)if('raddr'===f[l]){s=f[++l],(c=n.get(s))&&(f[l]=c);break}o[u]=f.join(' ')}}return new p.RTCSessionDescription({sdp:o.join('\r\n'),type:t.type})}var R=(function(t){(0,f.default)(R,t);var l,v,y=(l=R,v=h(),function(){var t,n=(0,c.default)(l);if(v){var o=(0,c.default)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,s.default)(this,t)});function R(t,f){var s;(0,o.default)(this,R),(s=y.call(this,t,f))._invokeOnaddstream=function(){return s._onaddstream.apply(void 0,arguments)},s._invokeQueuedOnaddstream=function(t){t&&t.forEach(function(t){try{var o;(o=s)._invokeOnaddstream.apply(o,(0,n.default)(t))}catch(t){console.error(t)}})},s._queueOnaddstream=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];s._onaddstreamQueue.push(Array.from(n))},s.setRemoteDescription=function(t){return(n=t,new Promise(function(t){return t(_(n))}).then(function(t){var o=t.ips,u=t.lines;return Promise.all(Array.from(o.values())).then(function(){return O(n,o,u)})})).catch(function(n){return n&&console.error(n),t}).then(function(t){return s._setRemoteDescription(t)});var n},s._setRemoteDescription=function(t){return new Promise(function(n,o){s._onaddstreamQueue=[],p.RTCPeerConnection.prototype.setRemoteDescription.call((0,u.default)(s),t).then(function(){var t;try{n.apply(void 0,arguments)}finally{t=s._onaddstreamQueue,s._onaddstreamQueue=void 0}s._invokeQueuedOnaddstream(t)},function(){s._onaddstreamQueue=void 0,o.apply(void 0,arguments)})})},s.onaddstream=function(){(s._onaddstreamQueue?s._queueOnaddstream:s._invokeOnaddstream).apply(void 0,arguments)};try{var c=(0,u.default)(s);Object.defineProperty(c,'onaddstream',{configurable:!0,enumerable:!0,get:function(){return c._onaddstream},set:function(t){c._onaddstream=t}})}catch(t){console.error("\ud83e\udd81 \ud83d\udea8\ud83d\udea8\ud83d\udea8 ["+(new Date).toLocaleString()+"] [ERROR]",t)}return s}return R})(p.RTCPeerConnection);e.default=R},448,[1,25,29,48,45,47,44,17,5,419]);
__d(function(g,r,i,a,m,e,d){var n=r(d[0]),o=r(d[1]);window.csioReactNative=!0,window.RTCPeerConnection||(window.RTCPeerConnection=n.RTCPeerConnection),window.webkitRTCPeerConnection||(window.webkitRTCPeerConnection=n.RTCPeerConnection),window.performance||(window.performance={}),window.performance.timing||(window.performance.timing={},window.performance.timing.navigationStart=0),Date.now=Date.now||function(){return(new Date).getTime()},window.performance.now||(window.performance.now=function(){return Date.now()}),window.location||(window.location={},window.location.href='react-native'),window.atob||(window.atob=r(d[2]).decode),window.btoa||(window.btoa=r(d[2]).encode);window.csiosign=function(n,o,w){var t=new(r(d[3]))('SHA-256','TEXT');t.setHMACKey(o,'TEXT'),t.update(n);var c,f=t.getHMAC('BYTES');return w(null,n+='.'+(c=f,window.btoa(c).replace(/\+/g,'-').replace(/\//g,'_').replace(/\=+$/,'')))},window.csioGetOsName=function(){return o.Platform.OS},window.csioGetOsVer=function(){return o.Platform.Version+''}},449,[419,5,450,451]);
__d(function(g,r,i,a,m,e,d){!(function(t){var n='object'==typeof e&&e,o='object'==typeof m&&m&&m.exports==n&&m,c='object'==typeof g&&g;c.global!==c&&c.window!==c||(t=c);var h=function(t){this.message=t};(h.prototype=new Error).name='InvalidCharacterError';var f=function(t){throw new h(t)},s='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',A=/[\t\n\f\r ]/g,l={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&f("The string to be encoded contains characters outside of the Latin1 range.");for(var n,o,c,h,A=t.length%3,l='',p=-1,u=t.length-A;++p<u;)n=t.charCodeAt(p)<<16,o=t.charCodeAt(++p)<<8,c=t.charCodeAt(++p),l+=s.charAt((h=n+o+c)>>18&63)+s.charAt(h>>12&63)+s.charAt(h>>6&63)+s.charAt(63&h);return 2==A?(n=t.charCodeAt(p)<<8,o=t.charCodeAt(++p),l+=s.charAt((h=n+o)>>10)+s.charAt(h>>4&63)+s.charAt(h<<2&63)+'='):1==A&&(h=t.charCodeAt(p),l+=s.charAt(h>>2)+s.charAt(h<<4&63)+'=='),l},decode:function(t){var n=(t=String(t).replace(A,'')).length;n%4==0&&(n=(t=t.replace(/==?$/,'')).length),(n%4==1||/[^+a-zA-Z0-9/]/.test(t))&&f('Invalid character: the string to be decoded is not correctly encoded.');for(var o,c,h=0,l='',p=-1;++p<n;)c=s.indexOf(t.charAt(p)),o=h%4?64*o+c:c,h++%4&&(l+=String.fromCharCode(255&o>>(-2*h&6)));return l},version:'0.1.0'};if('function'==typeof define&&'object'==typeof define.amd&&define.amd)define(function(){return l});else if(n&&!n.nodeType)if(o)o.exports=l;else for(var p in l)l.hasOwnProperty(p)&&(n[p]=l[p]);else t.base64=l})(this)},450,[]);
__d(function(g,r,i,a,m,e,d){'use strict';!(function(n){function t(n,t,o){var u,l,p,E,v,H,S,U,R,y=0,k=[],F=0,T=!1,B=[],Y=[],C=!1,I=!1,L=-1;if(u=(o=o||{}).encoding||"UTF8",(R=o.numRounds||1)!==parseInt(R,10)||1>R)throw Error("numRounds must a integer >= 1");if("SHA-1"===n)v=512,H=z,S=Z,E=160,U=function(n){return n.slice()};else if(0===n.lastIndexOf("SHA-",0))if(H=function(t,o){return q(t,o,n)},S=function(t,o,u,f){var w,s;if("SHA-224"===n||"SHA-256"===n)w=15+(o+65>>>9<<4),s=16;else{if("SHA-384"!==n&&"SHA-512"!==n)throw Error("Unexpected error in SHA-2 implementation");w=31+(o+129>>>10<<5),s=32}for(;t.length<=w;)t.push(0);for(t[o>>>5]|=128<<24-o%32,o+=u,t[w]=4294967295&o,t[w-1]=o/4294967296|0,u=t.length,o=0;o<u;o+=s)f=q(t.slice(o,o+s),f,n);if("SHA-224"===n)t=[f[0],f[1],f[2],f[3],f[4],f[5],f[6]];else if("SHA-256"===n)t=f;else if("SHA-384"===n)t=[f[0].a,f[0].b,f[1].a,f[1].b,f[2].a,f[2].b,f[3].a,f[3].b,f[4].a,f[4].b,f[5].a,f[5].b];else{if("SHA-512"!==n)throw Error("Unexpected error in SHA-2 implementation");t=[f[0].a,f[0].b,f[1].a,f[1].b,f[2].a,f[2].b,f[3].a,f[3].b,f[4].a,f[4].b,f[5].a,f[5].b,f[6].a,f[6].b,f[7].a,f[7].b]}return t},U=function(n){return n.slice()},"SHA-224"===n)v=512,E=224;else if("SHA-256"===n)v=512,E=256;else if("SHA-384"===n)v=1024,E=384;else{if("SHA-512"!==n)throw Error("Chosen SHA variant is not supported");v=1024,E=512}else{if(0!==n.lastIndexOf("SHA3-",0)&&0!==n.lastIndexOf("SHAKE",0))throw Error("Chosen SHA variant is not supported");var x=6;if(H=D,U=function(n){var t,o=[];for(t=0;5>t;t+=1)o[t]=n[t].slice();return o},L=1,"SHA3-224"===n)v=1152,E=224;else if("SHA3-256"===n)v=1088,E=256;else if("SHA3-384"===n)v=832,E=384;else if("SHA3-512"===n)v=576,E=512;else if("SHAKE128"===n)v=1344,E=-1,x=31,I=!0;else{if("SHAKE256"!==n)throw Error("Chosen SHA variant is not supported");v=1088,E=-1,x=31,I=!0}S=function(n,t,o,u,f){var w,s=x,c=[],b=(o=v)>>>5,h=0,A=t>>>5;for(w=0;w<A&&t>=o;w+=b)u=D(n.slice(w,w+b),u),t-=o;for(n=n.slice(w),t%=o;n.length<b;)n.push(0);for(n[(w=t>>>3)>>2]^=s<<w%4*8,n[b-1]^=2147483648,u=D(n,u);32*c.length<f&&(n=u[h%5][h/5|0],c.push(n.b),!(32*c.length>=f));)c.push(n.a),0==64*(h+=1)%o&&(D(null,u),h=0);return c}}p=A(t,u,L),l=j(n),this.setHMACKey=function(t,o,f){var w;if(!0===T)throw Error("HMAC key already set");if(!0===C)throw Error("Cannot set HMAC key after calling update");if(!0===I)throw Error("SHAKE is not supported for HMAC");for(t=(o=A(o,u=(f||{}).encoding||"UTF8",L)(t)).binLen,o=o.value,f=(w=v>>>3)/4-1,w<t/8&&(o=S(o,t,0,j(n),E));o.length<=f;)o.push(0);for(t=0;t<=f;t+=1)B[t]=909522486^o[t],Y[t]=1549556828^o[t];l=H(B,l),y=v,T=!0},this.update=function(n){var t,o,u,f=0,w=v>>>5;for(n=(t=p(n,k,F)).binLen,o=t.value,t=n>>>5,u=0;u<t;u+=w)f+v<=n&&(l=H(o.slice(u,u+w),l),f+=v);y+=f,k=o.slice(f>>>5),F=n%v,C=!0},this.getHash=function(t,o){var u,A,p,v;if(!0===T)throw Error("Cannot call getHash after setting HMAC key");if(p=h(o),!0===I){if(-1===p.shakeLen)throw Error("shakeLen must be specified in options");E=p.shakeLen}switch(t){case"HEX":u=function(n){return f(n,E,L,p)};break;case"B64":u=function(n){return w(n,E,L,p)};break;case"BYTES":u=function(n){return s(n,E,L)};break;case"ARRAYBUFFER":try{A=new ArrayBuffer(0)}catch(n){throw Error("ARRAYBUFFER not supported by this environment")}u=function(n){return c(n,E,L)};break;case"UINT8ARRAY":try{A=new Uint8Array(0)}catch(n){throw Error("UINT8ARRAY not supported by this environment")}u=function(n){return b(n,E,L)};break;default:throw Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}for(v=S(k.slice(),F,y,U(l),E),A=1;A<R;A+=1)!0===I&&0!=E%32&&(v[v.length-1]&=16777215>>>24-E%32),v=S(v,E,0,j(n),E);return u(v)},this.getHMAC=function(t,o){var u,A,p,R;if(!1===T)throw Error("Cannot call getHMAC without first setting HMAC key");switch(p=h(o),t){case"HEX":u=function(n){return f(n,E,L,p)};break;case"B64":u=function(n){return w(n,E,L,p)};break;case"BYTES":u=function(n){return s(n,E,L)};break;case"ARRAYBUFFER":try{u=new ArrayBuffer(0)}catch(n){throw Error("ARRAYBUFFER not supported by this environment")}u=function(n){return c(n,E,L)};break;case"UINT8ARRAY":try{u=new Uint8Array(0)}catch(n){throw Error("UINT8ARRAY not supported by this environment")}u=function(n){return b(n,E,L)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return A=S(k.slice(),F,y,U(l),E),R=H(Y,j(n)),u(R=S(A,E,v,R,E))}}function o(n,t){this.a=n,this.b=t}function u(n,t,o,u){var f,w,s,c,b;for(t=t||[0],w=(o=o||0)>>>3,b=-1===u?3:0,f=0;f<n.length;f+=1)s=(c=f+w)>>>2,t.length<=s&&t.push(0),t[s]|=n[f]<<8*(b+c%4*u);return{value:t,binLen:8*n.length+o}}function f(n,t,o,u){var f,w,s,c="";for(t/=8,s=-1===o?3:0,f=0;f<t;f+=1)w=n[f>>>2]>>>8*(s+f%4*o),c+="0123456789abcdef".charAt(w>>>4&15)+"0123456789abcdef".charAt(15&w);return u.outputUpper?c.toUpperCase():c}function w(n,t,o,u){var f,w,s,c,b="",h=t/8;for(c=-1===o?3:0,f=0;f<h;f+=3)for(w=f+1<h?n[f+1>>>2]:0,s=f+2<h?n[f+2>>>2]:0,s=(n[f>>>2]>>>8*(c+f%4*o)&255)<<16|(w>>>8*(c+(f+1)%4*o)&255)<<8|s>>>8*(c+(f+2)%4*o)&255,w=0;4>w;w+=1)b+=8*f+6*w<=t?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s>>>6*(3-w)&63):u.b64Pad;return b}function s(n,t,o){var u,f,w,s="";for(t/=8,w=-1===o?3:0,u=0;u<t;u+=1)f=n[u>>>2]>>>8*(w+u%4*o)&255,s+=String.fromCharCode(f);return s}function c(n,t,o){t/=8;var u,f,w,s=new ArrayBuffer(t);for(w=new Uint8Array(s),f=-1===o?3:0,u=0;u<t;u+=1)w[u]=n[u>>>2]>>>8*(f+u%4*o)&255;return s}function b(n,t,o){t/=8;var u,f,w=new Uint8Array(t);for(f=-1===o?3:0,u=0;u<t;u+=1)w[u]=n[u>>>2]>>>8*(f+u%4*o)&255;return w}function h(n){var t={outputUpper:!1,b64Pad:"=",shakeLen:-1};if(n=n||{},t.outputUpper=n.outputUpper||!1,!0===n.hasOwnProperty("b64Pad")&&(t.b64Pad=n.b64Pad),!0===n.hasOwnProperty("shakeLen")){if(0!=n.shakeLen%8)throw Error("shakeLen must be a multiple of 8");t.shakeLen=n.shakeLen}if("boolean"!=typeof t.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw Error("Invalid b64Pad formatting option");return t}function A(n,t,o){switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(n){case"HEX":n=function(n,t,u){var f,w,s,c,b,h,A=n.length;if(0!=A%2)throw Error("String of HEX type must be in byte increments");for(t=t||[0],b=(u=u||0)>>>3,h=-1===o?3:0,f=0;f<A;f+=2){if(w=parseInt(n.substr(f,2),16),isNaN(w))throw Error("String of HEX type contains invalid characters");for(s=(c=(f>>>1)+b)>>>2;t.length<=s;)t.push(0);t[s]|=w<<8*(h+c%4*o)}return{value:t,binLen:4*A+u}};break;case"TEXT":n=function(n,u,f){var w,s,c,b,h,A,l,p,E=0;if(u=u||[0],h=(f=f||0)>>>3,"UTF8"===t)for(p=-1===o?3:0,c=0;c<n.length;c+=1)for(s=[],128>(w=n.charCodeAt(c))?s.push(w):2048>w?(s.push(192|w>>>6),s.push(128|63&w)):55296>w||57344<=w?s.push(224|w>>>12,128|w>>>6&63,128|63&w):(c+=1,w=65536+((1023&w)<<10|1023&n.charCodeAt(c)),s.push(240|w>>>18,128|w>>>12&63,128|w>>>6&63,128|63&w)),b=0;b<s.length;b+=1){for(A=(l=E+h)>>>2;u.length<=A;)u.push(0);u[A]|=s[b]<<8*(p+l%4*o),E+=1}else if("UTF16BE"===t||"UTF16LE"===t)for(p=-1===o?2:0,s="UTF16LE"===t&&1!==o||"UTF16LE"!==t&&1===o,c=0;c<n.length;c+=1){for(w=n.charCodeAt(c),!0===s&&(w=(b=255&w)<<8|w>>>8),A=(l=E+h)>>>2;u.length<=A;)u.push(0);u[A]|=w<<8*(p+l%4*o),E+=2}return{value:u,binLen:8*E+f}};break;case"B64":n=function(n,t,u){var f,w,s,c,b,h,A,l,p=0;if(-1===n.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(w=n.indexOf("="),n=n.replace(/\=/g,""),-1!==w&&w<n.length)throw Error("Invalid '=' found in base-64 string");for(t=t||[0],h=(u=u||0)>>>3,l=-1===o?3:0,w=0;w<n.length;w+=4){for(b=n.substr(w,4),s=c=0;s<b.length;s+=1)c|=(f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b.charAt(s)))<<18-6*s;for(s=0;s<b.length-1;s+=1){for(f=(A=p+h)>>>2;t.length<=f;)t.push(0);t[f]|=(c>>>16-8*s&255)<<8*(l+A%4*o),p+=1}}return{value:t,binLen:8*p+u}};break;case"BYTES":n=function(n,t,u){var f,w,s,c,b,h;for(t=t||[0],s=(u=u||0)>>>3,h=-1===o?3:0,w=0;w<n.length;w+=1)f=n.charCodeAt(w),c=(b=w+s)>>>2,t.length<=c&&t.push(0),t[c]|=f<<8*(h+b%4*o);return{value:t,binLen:8*n.length+u}};break;case"ARRAYBUFFER":try{n=new ArrayBuffer(0)}catch(n){throw Error("ARRAYBUFFER not supported by this environment")}n=function(n,t,f){return u(new Uint8Array(n),t,f,o)};break;case"UINT8ARRAY":try{n=new Uint8Array(0)}catch(n){throw Error("UINT8ARRAY not supported by this environment")}n=function(n,t,f){return u(n,t,f,o)};break;default:throw Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return n}function l(n,t){return n<<t|n>>>32-t}function p(n,t){return 32<t?(t-=32,new o(n.b<<t|n.a>>>32-t,n.a<<t|n.b>>>32-t)):0!==t?new o(n.a<<t|n.b>>>32-t,n.b<<t|n.a>>>32-t):n}function E(n,t){return n>>>t|n<<32-t}function v(n,t){var u=null;u=new o(n.a,n.b);return 32>=t?new o(u.a>>>t|u.b<<32-t&4294967295,u.b>>>t|u.a<<32-t&4294967295):new o(u.b>>>t-32|u.a<<64-t&4294967295,u.a>>>t-32|u.b<<64-t&4294967295)}function H(n,t){return 32>=t?new o(n.a>>>t,n.b>>>t|n.a<<32-t&4294967295):new o(0,n.a>>>t-32)}function S(n,t,o){return n&t^~n&o}function U(n,t,u){return new o(n.a&t.a^~n.a&u.a,n.b&t.b^~n.b&u.b)}function R(n,t,o){return n&t^n&o^t&o}function y(n,t,u){return new o(n.a&t.a^n.a&u.a^t.a&u.a,n.b&t.b^n.b&u.b^t.b&u.b)}function k(n){return E(n,2)^E(n,13)^E(n,22)}function F(n){var t=v(n,28),u=v(n,34);return n=v(n,39),new o(t.a^u.a^n.a,t.b^u.b^n.b)}function T(n){return E(n,6)^E(n,11)^E(n,25)}function B(n){var t=v(n,14),u=v(n,18);return n=v(n,41),new o(t.a^u.a^n.a,t.b^u.b^n.b)}function Y(n){return E(n,7)^E(n,18)^n>>>3}function C(n){var t=v(n,1),u=v(n,8);return n=H(n,7),new o(t.a^u.a^n.a,t.b^u.b^n.b)}function I(n){return E(n,17)^E(n,19)^n>>>10}function L(n){var t=v(n,19),u=v(n,61);return n=H(n,6),new o(t.a^u.a^n.a,t.b^u.b^n.b)}function x(n,t){var o=(65535&n)+(65535&t);return((n>>>16)+(t>>>16)+(o>>>16)&65535)<<16|65535&o}function N(n,t,o,u){var f=(65535&n)+(65535&t)+(65535&o)+(65535&u);return((n>>>16)+(t>>>16)+(o>>>16)+(u>>>16)+(f>>>16)&65535)<<16|65535&f}function O(n,t,o,u,f){var w=(65535&n)+(65535&t)+(65535&o)+(65535&u)+(65535&f);return((n>>>16)+(t>>>16)+(o>>>16)+(u>>>16)+(f>>>16)+(w>>>16)&65535)<<16|65535&w}function X(n,t){var u,f,w;return u=(65535&n.b)+(65535&t.b),w=(65535&(f=(n.b>>>16)+(t.b>>>16)+(u>>>16)))<<16|65535&u,u=(65535&n.a)+(65535&t.a)+(f>>>16),new o((65535&(f=(n.a>>>16)+(t.a>>>16)+(u>>>16)))<<16|65535&u,w)}function P(n,t,u,f){var w,s,c;return w=(65535&n.b)+(65535&t.b)+(65535&u.b)+(65535&f.b),c=(65535&(s=(n.b>>>16)+(t.b>>>16)+(u.b>>>16)+(f.b>>>16)+(w>>>16)))<<16|65535&w,w=(65535&n.a)+(65535&t.a)+(65535&u.a)+(65535&f.a)+(s>>>16),new o((65535&(s=(n.a>>>16)+(t.a>>>16)+(u.a>>>16)+(f.a>>>16)+(w>>>16)))<<16|65535&w,c)}function M(n,t,u,f,w){var s,c,b;return s=(65535&n.b)+(65535&t.b)+(65535&u.b)+(65535&f.b)+(65535&w.b),b=(65535&(c=(n.b>>>16)+(t.b>>>16)+(u.b>>>16)+(f.b>>>16)+(w.b>>>16)+(s>>>16)))<<16|65535&s,s=(65535&n.a)+(65535&t.a)+(65535&u.a)+(65535&f.a)+(65535&w.a)+(c>>>16),new o((65535&(c=(n.a>>>16)+(t.a>>>16)+(u.a>>>16)+(f.a>>>16)+(w.a>>>16)+(s>>>16)))<<16|65535&s,b)}function K(n,t){return new o(n.a^t.a,n.b^t.b)}function j(n){var t,u=[];if("SHA-1"===n)u=[1732584193,4023233417,2562383102,271733878,3285377520];else if(0===n.lastIndexOf("SHA-",0))switch(u=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],t=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],n){case"SHA-224":break;case"SHA-256":u=t;break;case"SHA-384":u=[new o(3418070365,u[0]),new o(1654270250,u[1]),new o(2438529370,u[2]),new o(355462360,u[3]),new o(1731405415,u[4]),new o(41048885895,u[5]),new o(3675008525,u[6]),new o(1203062813,u[7])];break;case"SHA-512":u=[new o(t[0],4089235720),new o(t[1],2227873595),new o(t[2],4271175723),new o(t[3],1595750129),new o(t[4],2917565137),new o(t[5],725511199),new o(t[6],4215389547),new o(t[7],327033209)];break;default:throw Error("Unknown SHA variant")}else{if(0!==n.lastIndexOf("SHA3-",0)&&0!==n.lastIndexOf("SHAKE",0))throw Error("No SHA variants supported");for(n=0;5>n;n+=1)u[n]=[new o(0,0),new o(0,0),new o(0,0),new o(0,0),new o(0,0)]}return u}function z(n,t){var o,u,f,w,s,c,b,h=[];for(o=t[0],u=t[1],f=t[2],w=t[3],s=t[4],b=0;80>b;b+=1)h[b]=16>b?n[b]:l(h[b-3]^h[b-8]^h[b-14]^h[b-16],1),c=20>b?O(l(o,5),u&f^~u&w,s,1518500249,h[b]):40>b?O(l(o,5),u^f^w,s,1859775393,h[b]):60>b?O(l(o,5),R(u,f,w),s,2400959708,h[b]):O(l(o,5),u^f^w,s,3395469782,h[b]),s=w,w=f,f=l(u,30),u=o,o=c;return t[0]=x(o,t[0]),t[1]=x(u,t[1]),t[2]=x(f,t[2]),t[3]=x(w,t[3]),t[4]=x(s,t[4]),t}function Z(n,t,o,u){var f;for(f=15+(t+65>>>9<<4);n.length<=f;)n.push(0);for(n[t>>>5]|=128<<24-t%32,t+=o,n[f]=4294967295&t,n[f-1]=t/4294967296|0,t=n.length,f=0;f<t;f+=16)u=z(n.slice(f,f+16),u);return u}function q(n,t,u){var f,w,s,c,b,h,A,l,p,E,v,H,K,j,z,Z,q,D,Q,V,W,_,$,nn=[];if("SHA-224"===u||"SHA-256"===u)E=64,H=1,_=Number,K=x,j=N,z=O,Z=Y,q=I,D=k,Q=T,W=R,V=S,$=G;else{if("SHA-384"!==u&&"SHA-512"!==u)throw Error("Unexpected error in SHA-2 implementation");E=80,H=2,_=o,K=X,j=P,z=M,Z=C,q=L,D=F,Q=B,W=y,V=U,$=J}for(u=t[0],f=t[1],w=t[2],s=t[3],c=t[4],b=t[5],h=t[6],A=t[7],v=0;v<E;v+=1)16>v?(p=v*H,l=n.length<=p?0:n[p],p=n.length<=p+1?0:n[p+1],nn[v]=new _(l,p)):nn[v]=j(q(nn[v-2]),nn[v-7],Z(nn[v-15]),nn[v-16]),l=z(A,Q(c),V(c,b,h),$[v],nn[v]),p=K(D(u),W(u,f,w)),A=h,h=b,b=c,c=K(s,l),s=w,w=f,f=u,u=K(l,p);return t[0]=K(u,t[0]),t[1]=K(f,t[1]),t[2]=K(w,t[2]),t[3]=K(s,t[3]),t[4]=K(c,t[4]),t[5]=K(b,t[5]),t[6]=K(h,t[6]),t[7]=K(A,t[7]),t}function D(n,t){var u,f,w,s,c=[],b=[];if(null!==n)for(f=0;f<n.length;f+=2)t[(f>>>1)%5][(f>>>1)/5|0]=K(t[(f>>>1)%5][(f>>>1)/5|0],new o(n[f+1],n[f]));for(u=0;24>u;u+=1){for(s=j("SHA3-"),f=0;5>f;f+=1){w=t[f][0];var h=t[f][1],A=t[f][2],l=t[f][3],E=t[f][4];c[f]=new o(w.a^h.a^A.a^l.a^E.a,w.b^h.b^A.b^l.b^E.b)}for(f=0;5>f;f+=1)b[f]=K(c[(f+4)%5],p(c[(f+1)%5],1));for(f=0;5>f;f+=1)for(w=0;5>w;w+=1)t[f][w]=K(t[f][w],b[f]);for(f=0;5>f;f+=1)for(w=0;5>w;w+=1)s[w][(2*f+3*w)%5]=p(t[f][w],Q[f][w]);for(f=0;5>f;f+=1)for(w=0;5>w;w+=1)t[f][w]=K(s[f][w],new o(~s[(f+1)%5][w].a&s[(f+2)%5][w].a,~s[(f+1)%5][w].b&s[(f+2)%5][w].b));t[0][0]=K(t[0][0],V[u])}return t}var G,J,Q,V;J=[new o((G=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298])[0],3609767458),new o(G[1],602891725),new o(G[2],3964484399),new o(G[3],2173295548),new o(G[4],4081628472),new o(G[5],3053834265),new o(G[6],2937671579),new o(G[7],3664609560),new o(G[8],2734883394),new o(G[9],1164996542),new o(G[10],1323610764),new o(G[11],3590304994),new o(G[12],4068182383),new o(G[13],991336113),new o(G[14],633803317),new o(G[15],3479774868),new o(G[16],2666613458),new o(G[17],944711139),new o(G[18],2341262773),new o(G[19],2007800933),new o(G[20],1495990901),new o(G[21],1856431235),new o(G[22],3175218132),new o(G[23],2198950837),new o(G[24],3999719339),new o(G[25],766784016),new o(G[26],2566594879),new o(G[27],3203337956),new o(G[28],1034457026),new o(G[29],2466948901),new o(G[30],3758326383),new o(G[31],168717936),new o(G[32],1188179964),new o(G[33],1546045734),new o(G[34],1522805485),new o(G[35],2643833823),new o(G[36],2343527390),new o(G[37],1014477480),new o(G[38],1206759142),new o(G[39],344077627),new o(G[40],1290863460),new o(G[41],3158454273),new o(G[42],3505952657),new o(G[43],106217008),new o(G[44],3606008344),new o(G[45],1432725776),new o(G[46],1467031594),new o(G[47],851169720),new o(G[48],3100823752),new o(G[49],1363258195),new o(G[50],3750685593),new o(G[51],3785050280),new o(G[52],3318307427),new o(G[53],3812723403),new o(G[54],2003034995),new o(G[55],3602036899),new o(G[56],1575990012),new o(G[57],1125592928),new o(G[58],2716904306),new o(G[59],442776044),new o(G[60],593698344),new o(G[61],3733110249),new o(G[62],2999351573),new o(G[63],3815920427),new o(3391569614,3928383900),new o(3515267271,566280711),new o(3940187606,3454069534),new o(4118630271,4000239992),new o(116418474,1914138554),new o(174292421,2731055270),new o(289380356,3203993006),new o(460393269,320620315),new o(685471733,587496836),new o(852142971,1086792851),new o(1017036298,365543100),new o(1126000580,2618297676),new o(1288033470,3409855158),new o(1501505948,4234509866),new o(1607167915,987167468),new o(1816402316,1246189591)],V=[new o(0,1),new o(0,32898),new o(2147483648,32906),new o(2147483648,2147516416),new o(0,32907),new o(0,2147483649),new o(2147483648,2147516545),new o(2147483648,32777),new o(0,138),new o(0,136),new o(0,2147516425),new o(0,2147483658),new o(0,2147516555),new o(2147483648,139),new o(2147483648,32905),new o(2147483648,32771),new o(2147483648,32770),new o(2147483648,128),new o(0,32778),new o(2147483648,2147483658),new o(2147483648,2147516545),new o(2147483648,32896),new o(0,2147483649),new o(2147483648,2147516424)],Q=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]],"function"==typeof define&&define.amd?define(function(){return t}):void 0!==e?(void 0!==m&&m.exports&&(m.exports=t),e=t):n.jsSHA=t})(this)},451,[]);
__d(function(e,t,n,r,i,a,o){var s=t(o[0]);!(function(){return function e(n,r,i){function a(s,c){if(!r[s]){if(!n[s]){var u="function"==typeof t&&t;if(!c&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var d=r[s]={exports:{}};n[s][0].call(d.exports,function(e){return a(n[s][1][e]||e)},d,d.exports,e,n,r,i)}return r[s].exports}for(var o="function"==typeof t&&t,s=0;s<i.length;s++)a(i[s]);return a}})()({1:[function(t,n,r){(function(e,t,i){!(function(e){if("object"==typeof r&&void 0!==n)n.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i;"undefined"!=typeof window?i=window:void 0!==t?i=t:"undefined"!=typeof self&&(i=self),i.Promise=e()}})(function(){return(function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){var c="function"==typeof _dereq_&&_dereq_;if(!s&&c)return c(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){return i(t[o][1][e]||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof _dereq_&&_dereq_,o=0;o<r.length;o++)i(r[o]);return i})({1:[function(e,t,n){"use strict";t.exports=function(e){function t(e){var t=new n(e),r=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),r}var n=e._SomePromiseArray;e.any=function(e){return t(e)},e.prototype.any=function(){return t(this)}}},{}],2:[function(t,n,r){"use strict";function i(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new u(16),this._normalQueue=new u(16),this._haveDrainedQueues=!1;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=c}function a(e){for(;e.length()>0;)o(e)}function o(e){var t=e.shift();if("function"!=typeof t)t._settlePromises();else{var n=e.shift(),r=e.shift();t.call(n,r)}}var s;try{throw new Error}catch(e){s=e}var c=t("./schedule"),u=t("./queue");i.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},i.prototype.hasCustomScheduler=function(){return this._customScheduler},i.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},i.prototype.fatalError=function(t,n){n?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),e.exit(2)):this.throwLater(t)},i.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},i.prototype.invokeLater=function(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()},i.prototype.invoke=function(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()},i.prototype.settlePromises=function(e){this._normalQueue._pushOne(e),this._queueTick()},i.prototype._drainQueues=function(){a(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,a(this._lateQueue)},i.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},i.prototype._reset=function(){this._isTickUsed=!1},n.exports=i,n.exports.firstLineError=s},{"./queue":26,"./schedule":29}],3:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var i=!1,a=function(e,t){this._reject(t)},o=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(a,a,null,this,e)},s=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},c=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(a){i||(i=!0,e.prototype._propagateFrom=r.propagateFromFunction(),e.prototype._boundValue=r.boundValueFunction());var u=n(a),l=new e(t);l._propagateFrom(this,1);var d=this._target();if(l._setBoundTo(u),u instanceof e){var f={promiseRejectionQueued:!1,promise:l,target:d,bindingPromise:u};d._then(t,o,void 0,l,f),u._then(s,c,void 0,l,f),l._setOnCancel(u)}else l._resolveCallback(d);return l},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},e.bind=function(t,n){return e.resolve(n).bind(t)}}},{}],4:[function(e,t,n){"use strict";var r;"undefined"!=typeof Promise&&(r=Promise);var i=e("./promise")();i.noConflict=function(){try{Promise===i&&(Promise=r)}catch(e){}return i},t.exports=i},{"./promise":22}],5:[function(e,t,n){"use strict";var r=Object.create;if(r){var i=r(null),a=r(null);i[" size"]=a[" size"]=0}t.exports=function(t){function n(e,n){var r;if(null!=e&&(r=e[n]),"function"!=typeof r){var i="Object "+o.classString(e)+" has no method '"+o.toString(n)+"'";throw new t.TypeError(i)}return r}function r(e){return n(e,this.pop()).apply(e,this)}function i(e){return e[this]}function a(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}var o=e("./util"),s=o.canEvaluate;o.isIdentifier,t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(r,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t;if("number"==typeof e)t=a;else if(s){var n=(void 0)(e);t=null!==n?n:i}else t=i;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){var a=e("./util"),o=a.tryCatch,s=a.errorObj,c=t._async;t.prototype.break=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),c.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(a.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var r=o(e).call(this._boundValue());r===s&&(this._attachExtraTrace(r.e),c.throwLater(r.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),c.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){"use strict";t.exports=function(t){var n=e("./util"),r=e("./es5").keys,i=n.tryCatch,a=n.errorObj;return function(e,o,s){return function(c){var u=s._boundValue();e:for(var l=0;l<e.length;++l){var d=e[l];if(d===Error||null!=d&&d.prototype instanceof Error){if(c instanceof d)return i(o).call(u,c)}else if("function"==typeof d){var f=i(d).call(u,c);if(f===a)return f;if(f)return i(o).call(u,c)}else if(n.isObject(c)){for(var h=r(d),p=0;p<h.length;++p){var v=h[p];if(d[v]!=c[v])continue e}return i(o).call(u,c)}}return t}}}},{"./es5":13,"./util":36}],8:[function(e,t,n){"use strict";t.exports=function(e){function t(){this._trace=new t.CapturedTrace(n())}function n(){var e=i.length-1;if(e>=0)return i[e]}var r=!1,i=[];return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},t.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,i.push(this._trace))},t.prototype._popContext=function(){if(void 0!==this._trace){var e=i.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},t.CapturedTrace=null,t.create=function(){if(r)return new t},t.deactivateLongStackTraces=function(){},t.activateLongStackTraces=function(){var i=e.prototype._pushContext,a=e.prototype._popContext,o=e._peekContext,s=e.prototype._peekContext,c=e.prototype._promiseCreated;t.deactivateLongStackTraces=function(){e.prototype._pushContext=i,e.prototype._popContext=a,e._peekContext=o,e.prototype._peekContext=s,e.prototype._promiseCreated=c,r=!1},r=!0,e.prototype._pushContext=t.prototype._pushContext,e.prototype._popContext=t.prototype._popContext,e._peekContext=e.prototype._peekContext=n,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},t}},{}],9:[function(t,n,r){"use strict";n.exports=function(n,r,i,a){function o(e,t){return{promise:t}}function s(){return!1}function c(e,t,n){var r=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+B.toString(e));r._attachCancellationCallback(e)})}catch(e){return e}}function u(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?B.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function l(){return this._onCancelField}function d(e){this._onCancelField=e}function f(){this._cancellationParent=void 0,this._onCancelField=void 0}function h(e,t){if(0!=(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function p(){var e=this._boundTo;return void 0!==e&&e instanceof n?e.isFulfilled()?e.value():void 0:e}function v(){this._trace=new M(this._peekContext())}function g(e,t){if(H(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var r=T(e);B.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n")),B.notEnumerableProp(e,"__stackCleaned__",!0)}}}function y(){this._trace=void 0}function m(e,t,r){if(se.warnings){var i,a=new U(e);if(t)r._attachExtraTrace(a);else if(se.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(a);else{var o=T(a);a.stack=o.message+"\n"+o.stack.join("\n")}ne("warning",a)||_(a,"",!0)}}function b(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}function k(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}function S(e){for(var t=e[0],n=1;n<e.length;++n){for(var r=e[n],i=t.length-1,a=t[i],o=-1,s=r.length-1;s>=0;--s)if(r[s]===a){o=s;break}for(s=o;s>=0;--s){var c=r[s];if(t[i]!==c)break;t.pop(),i--}t=r}}function w(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],i="    (No stack trace)"===r||G.test(r),a=i&&ie(r);i&&!a&&(z&&" "!==r.charAt(0)&&(r="    "+r),t.push(r))}return t}function C(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||G.test(r))break}return n>0&&"SyntaxError"!=e.name&&(t=t.slice(n)),t}function T(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&t.length>0?C(e):["    (No stack trace)"],{message:n,stack:"SyntaxError"==e.name?t:w(t)}}function _(e,t,n){if("undefined"!=typeof console){var r;if(B.isObject(e)){var i=e.stack;r=t+q(i,e)}else r=t+String(e);"function"==typeof A?A(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function P(e,t,n,r){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(r):t(n,r))}catch(e){D.throwLater(e)}"unhandledRejection"===e?ne(e,n,r)||i||_(n,"Unhandled rejection "):ne(e,r)}function E(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{if(t=e&&"function"==typeof e.toString?e.toString():B.toString(e),/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+R(t)+">, no stack trace)"}function R(e){return e.length<41?e:e.substr(0,38)+"..."}function I(){return"function"==typeof oe}function O(e){var t=e.match(ae);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function M(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);oe(this,M),t>32&&this.uncycle()}var F,j,A,x,D=n._async,U=t("./errors").Warning,B=t("./util"),L=t("./es5"),H=B.canAttachTrace,N=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,V=/\((?:timers\.js):\d+:\d+\)/,W=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,G=null,q=null,z=!1,Q=!(0==B.env("BLUEBIRD_DEBUG")),J=!(0==B.env("BLUEBIRD_WARNINGS")||!Q&&!B.env("BLUEBIRD_WARNINGS")),K=!(0==B.env("BLUEBIRD_LONG_STACK_TRACES")||!Q&&!B.env("BLUEBIRD_LONG_STACK_TRACES")),X=0!=B.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(J||!!B.env("BLUEBIRD_W_FORGOTTEN_RETURN"));!(function(){function e(){for(var e=0;e<r.length;++e)r[e]._notifyUnhandledRejection();t()}function t(){r.length=0}var r=[];x=function(t){r.push(t),setTimeout(e,1)},L.defineProperty(n,"_unhandledRejectionCheck",{value:e}),L.defineProperty(n,"_unhandledRejectionClear",{value:t})})(),n.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),x(this))},n.prototype._notifyUnhandledRejectionIsHandled=function(){P("rejectionHandled",F,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),P("unhandledRejection",j,e,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(e,t,n){return m(e,t,n||this)},n.onPossiblyUnhandledRejection=function(e){var t=n._getContext();j=B.contextBind(t,e)},n.onUnhandledRejectionHandled=function(e){var t=n._getContext();F=B.contextBind(t,e)};var $=function(){};n.longStackTraces=function(){if(D.haveItemsQueued()&&!se.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!se.longStackTraces&&I()){var e=n.prototype._captureStackTrace,t=n.prototype._attachExtraTrace,i=n.prototype._dereferenceTrace;se.longStackTraces=!0,$=function(){if(D.haveItemsQueued()&&!se.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=e,n.prototype._attachExtraTrace=t,n.prototype._dereferenceTrace=i,r.deactivateLongStackTraces(),se.longStackTraces=!1},n.prototype._captureStackTrace=v,n.prototype._attachExtraTrace=g,n.prototype._dereferenceTrace=y,r.activateLongStackTraces()}},n.hasLongStackTraces=function(){return se.longStackTraces&&I()};var Y={unhandledrejection:{before:function(){var e=B.global.onunhandledrejection;return B.global.onunhandledrejection=null,e},after:function(e){B.global.onunhandledrejection=e}},rejectionhandled:{before:function(){var e=B.global.onrejectionhandled;return B.global.onrejectionhandled=null,e},after:function(e){B.global.onrejectionhandled=e}}},Z=(function(){var e=function(e,t){if(!e)return!B.global.dispatchEvent(t);var n;try{return n=e.before(),!B.global.dispatchEvent(t)}finally{e.after(n)}};try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return B.global.dispatchEvent(t),function(t,n){t=t.toLowerCase();var r=new CustomEvent(t,{detail:n,cancelable:!0});return L.defineProperty(r,"promise",{value:n.promise}),L.defineProperty(r,"reason",{value:n.reason}),e(Y[t],r)}}if("function"==typeof Event){t=new Event("CustomEvent");return B.global.dispatchEvent(t),function(t,n){t=t.toLowerCase();var r=new Event(t,{cancelable:!0});return r.detail=n,L.defineProperty(r,"promise",{value:n.promise}),L.defineProperty(r,"reason",{value:n.reason}),e(Y[t],r)}}return(t=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),B.global.dispatchEvent(t),function(t,n){t=t.toLowerCase();var r=document.createEvent("CustomEvent");return r.initCustomEvent(t,!1,!0,n),e(Y[t],r)}}catch(e){}return function(){return!1}})(),ee=B.isNode?function(){return e.emit.apply(e,arguments)}:B.global?function(e){var t="on"+e.toLowerCase(),n=B.global[t];return!!n&&(n.apply(B.global,[].slice.call(arguments,1)),!0)}:function(){return!1},te={promiseCreated:o,promiseFulfilled:o,promiseRejected:o,promiseResolved:o,promiseCancelled:o,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:o},ne=function(e){var t=!1;try{t=ee.apply(null,arguments)}catch(e){D.throwLater(e),t=!0}var n=!1;try{n=Z(e,te[e].apply(null,arguments))}catch(e){D.throwLater(e),n=!0}return n||t};n.config=function(e){if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?n.longStackTraces():!e.longStackTraces&&n.hasLongStackTraces()&&$()),"warnings"in e){var t=e.warnings;se.warnings=!!t,X=se.warnings,B.isObject(t)&&"wForgottenReturn"in t&&(X=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!se.cancellation){if(D.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=f,n.prototype._propagateFrom=h,n.prototype._onCancel=l,n.prototype._setOnCancel=d,n.prototype._attachCancellationCallback=u,n.prototype._execute=c,re=h,se.cancellation=!0}if("monitoring"in e&&(e.monitoring&&!se.monitoring?(se.monitoring=!0,n.prototype._fireEvent=ne):!e.monitoring&&se.monitoring&&(se.monitoring=!1,n.prototype._fireEvent=s)),"asyncHooks"in e&&B.nodeSupportsAsyncResource){var r=se.asyncHooks,o=!!e.asyncHooks;r!==o&&(se.asyncHooks=o,o?i():a())}return n},n.prototype._fireEvent=s,n.prototype._execute=function(e,t,n){try{e(t,n)}catch(e){return e}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(e){},n.prototype._attachCancellationCallback=function(e){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._dereferenceTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(e,t){};var re=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)},ie=function(){return!1},ae=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;B.inherits(M,Error),r.CapturedTrace=M,M.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],n={},r=0,i=this;void 0!==i;++r)t.push(i),i=i._parent;for(r=(e=this._length=r)-1;r>=0;--r){var a=t[r].stack;void 0===n[a]&&(n[a]=r)}for(r=0;r<e;++r){var o=n[t[r].stack];if(void 0!==o&&o!==r){o>0&&(t[o-1]._parent=void 0,t[o-1]._length=1),t[r]._parent=void 0,t[r]._length=1;var s=r>0?t[r-1]:this;o<e-1?(s._parent=t[o+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var c=s._length+1,u=r-2;u>=0;--u)t[u]._length=c,c++;return}}}},M.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=T(e),n=t.message,r=[t.stack],i=this;void 0!==i;)r.push(w(i.stack.split("\n"))),i=i._parent;S(r),k(r),B.notEnumerableProp(e,"stack",b(n,r)),B.notEnumerableProp(e,"__stackCleaned__",!0)}};var oe=(function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():E(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,G=e,q=t;var n=Error.captureStackTrace;return ie=function(e){return N.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var r,i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return G=/@/,q=t,z=!0,function(e){e.stack=(new Error).stack};try{throw new Error}catch(e){r="stack"in e}return"stack"in i||!r||"number"!=typeof Error.stackTraceLimit?(q=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?E(t):t.toString()},null):(G=e,q=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})})();"undefined"!=typeof console&&void 0!==console.warn&&(A=function(e){console.warn(e)},B.isNode&&e.stderr.isTTY?A=function(e,t){var n=t?"\x1b[33m":"\x1b[31m";console.warn(n+e+"\x1b[0m\n")}:B.isNode||"string"!=typeof(new Error).stack||(A=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var se={warnings:J,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return K&&n.longStackTraces(),{asyncHooks:function(){return se.asyncHooks},longStackTraces:function(){return se.longStackTraces},warnings:function(){return se.warnings},cancellation:function(){return se.cancellation},monitoring:function(){return se.monitoring},propagateFromFunction:function(){return re},boundValueFunction:function(){return p},checkForgottenReturns:function(e,t,n,r,i){if(void 0===e&&null!==t&&X){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var a="",o="";if(t._trace){for(var s=t._trace.stack.split("\n"),c=w(s),u=c.length-1;u>=0;--u){var l=c[u];if(!V.test(l)){var d=l.match(W);d&&(a="at "+d[1]+":"+d[2]+":"+d[3]+" ");break}}if(c.length>0){var f=c[0];for(u=0;u<s.length;++u)if(s[u]===f){u>0&&(o="\n"+s[u-1]);break}}}var h="a promise was created in a "+n+"handler "+a+"but was not returned from it, see http://goo.gl/rRqMUw"+o;r._warn(h,!0,t)}},setBounds:function(e,t){if(I()){for(var n,r,i=(e.stack||"").split("\n"),a=(t.stack||"").split("\n"),o=-1,s=-1,c=0;c<i.length;++c)if(u=O(i[c])){n=u.fileName,o=u.line;break}for(c=0;c<a.length;++c){var u;if(u=O(a[c])){r=u.fileName,s=u.line;break}}o<0||s<0||!n||!r||n!==r||o>=s||(ie=function(e){if(N.test(e))return!0;var t=O(e);return!!(t&&t.fileName===n&&o<=t.line&&t.line<=s)})}},warn:m,deprecated:function(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),m(n)},CapturedTrace:M,fireDomEvent:Z,fireGlobalEvent:ee}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(e,t,n){"use strict";t.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:n},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1];return this.caught(e,function(){throw t})},e.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof e&&n.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:n},void 0);var r=arguments[1];r instanceof e&&r.suppressUnhandledRejections();return this.caught(n,function(){return r})}}},{}],11:[function(e,t,n){"use strict";t.exports=function(e,t){function n(){return i(this)}var r=e.reduce,i=e.all;e.prototype.each=function(e){return r(this,e,t,0)._then(n,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return r(this,e,t,t)},e.each=function(e,i){return r(e,i,t,0)._then(n,void 0,void 0,e,void 0)},e.mapSeries=function(e,n){return r(e,n,t,t)}}},{}],12:[function(e,t,n){"use strict";function r(e,t){function n(r){if(!(this instanceof n))return new n(r);d(this,"message","string"==typeof r?r:t),d(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return l(n,Error),n}function i(e){if(!(this instanceof i))return new i(e);d(this,"name","OperationalError"),d(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(d(this,"message",e.message),d(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var a,o,s=e("./es5"),c=s.freeze,u=e("./util"),l=u.inherits,d=u.notEnumerableProp,f=r("Warning","warning"),h=r("CancellationError","cancellation error"),p=r("TimeoutError","timeout error"),v=r("AggregateError","aggregate error");try{a=TypeError,o=RangeError}catch(e){a=r("TypeError","type error"),o=r("RangeError","range error")}for(var g="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),y=0;y<g.length;++y)"function"==typeof Array.prototype[g[y]]&&(v.prototype[g[y]]=Array.prototype[g[y]]);s.defineProperty(v.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),v.prototype.isOperational=!0;var m=0;v.prototype.toString=function(){var e=Array(4*m+1).join(" "),t="\n"+e+"AggregateError of:\n";m++,e=Array(4*m+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),a=0;a<i.length;++a)i[a]=e+i[a];t+=(r=i.join("\n"))+"\n"}return m--,t},l(i,Error);var b=Error.__BluebirdErrorTypes__;b||(b=c({CancellationError:h,TimeoutError:p,OperationalError:i,RejectionError:i,AggregateError:v}),s.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:a,RangeError:o,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:f}},{"./es5":13,"./util":36}],13:[function(e,t,n){var r=(function(){"use strict";return void 0===this})();if(r)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,a={}.toString,o={}.constructor.prototype,s=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t};t.exports={isArray:function(e){try{return"[object Array]"===a.call(e)}catch(e){return!1}},keys:s,names:s,defineProperty:function(e,t,n){return e[t]=n.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(e){return o}},isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,r){return n(this,e,r,t)},e.filter=function(e,r,i){return n(e,r,i,t)}}},{}],15:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function a(e){this.finallyHandler=e}function o(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function s(){return u.call(this,this.promise._target()._settledValue())}function c(e){if(!o(this,e))return f.e=e,f}function u(e){var i=this.promise,u=this.handler;if(!this.called){this.called=!0;var l=this.isFinallyHandler()?u.call(i._boundValue()):u.call(i._boundValue(),e);if(l===r)return l;if(void 0!==l){i._setReturnedNonUndefined();var h=n(l,i);if(h instanceof t){if(null!=this.cancelPromise){if(h._isCancelled()){var p=new d("late cancellation observer");return i._attachExtraTrace(p),f.e=p,f}h.isPending()&&h._attachCancellationCallback(new a(this))}return h._then(s,c,void 0,this,void 0)}}}return i.isRejected()?(o(this),f.e=e,f):(o(this),e)}var l=e("./util"),d=t.CancellationError,f=l.errorObj,h=e("./catch_filter")(r);return i.prototype.isFinallyHandler=function(){return 0===this.type},a.prototype._resultCancelled=function(){o(this.finallyHandler)},t.prototype._passThrough=function(e,t,n,r){return"function"!=typeof e?this.then():this._then(n,r,void 0,new i(this,t,e),void 0)},t.prototype.lastly=t.prototype.finally=function(e){return this._passThrough(e,0,u,u)},t.prototype.tap=function(e){return this._passThrough(e,1,u)},t.prototype.tapCatch=function(e){var n=arguments.length;if(1===n)return this._passThrough(e,1,void 0,u);var r,i=new Array(n-1),a=0;for(r=0;r<n-1;++r){var o=arguments[r];if(!l.isObject(o))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+l.classString(o)));i[a++]=o}i.length=a;var s=arguments[r];return this._passThrough(h(i,s,this),1,void 0,u)},i}},{"./catch_filter":7,"./util":36}],16:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,a,o){function s(e,n,r){for(var a=0;a<n.length;++a){r._pushContext();var o=f(n[a])(e);if(r._popContext(),o===d){r._pushContext();var s=t.reject(d.e);return r._popContext(),s}var c=i(o,r);if(c instanceof t)return c}return null}function c(e,n,i,a){if(o.cancellation()){var s=new t(r),c=this._finallyPromise=new t(r);this._promise=s.lastly(function(){return c}),s._captureStackTrace(),s._setOnCancel(this)}else(this._promise=new t(r))._captureStackTrace();this._stack=a,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(h):h,this._yieldedPromise=null,this._cancellationPhase=!1}var u=e("./errors").TypeError,l=e("./util"),d=l.errorObj,f=l.tryCatch,h=[];l.inherits(c,a),c.prototype._isResolved=function(){return null===this._promise},c.prototype._cleanup=function(){this._promise=this._generator=null,o.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},c.prototype._promiseCancelled=function(){if(!this._isResolved()){var e;if(void 0!==this._generator.return)this._promise._pushContext(),e=f(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var n=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),e=f(this._generator.throw).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},c.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=f(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},c.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=f(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},c.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},c.prototype.promise=function(){return this._promise},c.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},c.prototype._continue=function(e){var n=this._promise;if(e===d)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(e.e,!1);var r=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var a=i(r,this._promise);if(a instanceof t||null!==(a=s(a,this._yieldHandlers,this._promise))){var o=(a=a._target())._bitField;0==(50397184&o)?(this._yieldedPromise=a,a._proxy(this,null)):0!=(33554432&o)?t._async.invoke(this._promiseFulfilled,this,a._value()):0!=(16777216&o)?t._async.invoke(this._promiseRejected,this,a._reason()):this._promiseCancelled()}else this._promiseRejected(new u("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},t.coroutine=function(e,t){if("function"!=typeof e)throw new u("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,r=c,i=(new Error).stack;return function(){var t=e.apply(this,arguments),a=new r(void 0,void 0,n,i),o=a.promise();return a._generator=t,a._promiseFulfilled(void 0),o}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new u("expecting a function but got "+l.classString(e));h.push(e)},t.spawn=function(e){if(o.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new c(e,this),i=r.promise();return r._run(t.spawn),i}}},{"./errors":12,"./util":36}],17:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,a){var o=e("./util");o.canEvaluate,o.tryCatch,o.errorObj,t.join=function(){var e,t=arguments.length-1;t>0&&"function"==typeof arguments[t]&&(e=arguments[t]);var r=[].slice.call(arguments);e&&r.pop();var i=new n(r).promise();return void 0!==e?i.spread(e):i}}},{"./util":36}],18:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,a,o){function s(e,n,r,i){this.constructor$(e),this._promise._captureStackTrace();var o=t._getContext();if(this._callback=u.contextBind(o,n),this._preservedValues=i===a?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=[],f.invoke(this._asyncInit,this,void 0),u.isArray(e))for(var s=0;s<e.length;++s){var c=e[s];c instanceof t&&c.suppressUnhandledRejections()}}function c(e,n,i,a){if("function"!=typeof n)return r("expecting a function but got "+u.classString(n));var o=0;if(void 0!==i){if("object"!=typeof i||null===i)return t.reject(new TypeError("options argument must be an object but it is "+u.classString(i)));if("number"!=typeof i.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+u.classString(i.concurrency)));o=i.concurrency}return new s(e,n,o="number"==typeof o&&isFinite(o)&&o>=1?o:0,a).promise()}var u=e("./util"),l=u.tryCatch,d=u.errorObj,f=t._async;u.inherits(s,n),s.prototype._asyncInit=function(){this._init$(void 0,-2)},s.prototype._init=function(){},s.prototype._promiseFulfilled=function(e,n){var r=this._values,a=this.length(),s=this._preservedValues,c=this._limit;if(n<0){if(r[n=-1*n-1]=e,c>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(c>=1&&this._inFlight>=c)return r[n]=e,this._queue.push(n),!1;null!==s&&(s[n]=e);var u=this._promise,f=this._callback,h=u._boundValue();u._pushContext();var p=l(f).call(h,e,n,a),v=u._popContext();if(o.checkForgottenReturns(p,v,null!==s?"Promise.filter":"Promise.map",u),p===d)return this._reject(p.e),!0;var g=i(p,this._promise);if(g instanceof t){var y=(g=g._target())._bitField;if(0==(50397184&y))return c>=1&&this._inFlight++,r[n]=g,g._proxy(this,-1*(n+1)),!1;if(0==(33554432&y))return 0!=(16777216&y)?(this._reject(g._reason()),!0):(this._cancel(),!0);p=g._value()}r[n]=p}return++this._totalResolved>=a&&(null!==s?this._filter(r,s):this._resolve(r),!0)},s.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}},s.prototype._filter=function(e,t){for(var n=t.length,r=new Array(n),i=0,a=0;a<n;++a)e[a]&&(r[i++]=t[a]);r.length=i,this._resolve(r)},s.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return c(this,e,t,null)},t.map=function(e,t,n,r){return c(e,t,n,r)}}},{"./util":36}],19:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,a){var o=e("./util"),s=o.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+o.classString(e));return function(){var r=new t(n);r._captureStackTrace(),r._pushContext();var i=s(e).apply(this,arguments),o=r._popContext();return a.checkForgottenReturns(i,o,"Promise.method",r),r._resolveFromSyncValue(i),r}},t.attempt=t.try=function(e){if("function"!=typeof e)return i("expecting a function but got "+o.classString(e));var r,c=new t(n);if(c._captureStackTrace(),c._pushContext(),arguments.length>1){a.deprecated("calling Promise.try with more than 1 argument");var u=arguments[1],l=arguments[2];r=o.isArray(u)?s(e).apply(l,u):s(e).call(l,u)}else r=s(e)();var d=c._popContext();return a.checkForgottenReturns(r,d,"Promise.try",c),c._resolveFromSyncValue(r),c},t.prototype._resolveFromSyncValue=function(e){e===o.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,n){"use strict";function r(e){return e instanceof Error&&c.getPrototypeOf(e)===Error.prototype}function i(e){var t;if(r(e)){(t=new s(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var n=c.keys(e),i=0;i<n.length;++i){var o=n[i];u.test(o)||(t[o]=e[o])}return t}return a.markAsOriginatingFromRejection(e),e}var a=e("./util"),o=a.maybeWrapAsError,s=e("./errors").OperationalError,c=e("./es5"),u=/^(?:name|message|stack|cause)$/;t.exports=function(e,t){return function(n,r){if(null!==e){if(n){var a=i(o(n));e._attachExtraTrace(a),e._reject(a)}else if(t){var s=[].slice.call(arguments,1);e._fulfill(s)}else e._fulfill(r);e=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,n){"use strict";t.exports=function(t){function n(e,t){if(!a.isArray(e))return r.call(this,e,t);var n=s(t).apply(this._boundValue(),[null].concat(e));n===c&&o.throwLater(n.e)}function r(e,t){var n=this._boundValue(),r=void 0===e?s(t).call(n,null):s(t).call(n,null,e);r===c&&o.throwLater(r.e)}function i(e,t){if(!e){var n=new Error(e+"");n.cause=e,e=n}var r=s(t).call(this._boundValue(),e);r===c&&o.throwLater(r.e)}var a=e("./util"),o=t._async,s=a.tryCatch,c=a.errorObj;t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var a=r;void 0!==t&&Object(t).spread&&(a=n),this._then(a,i,void 0,this,e)}return this}}},{"./util":36}],22:[function(t,n,r){"use strict";n.exports=function(){function r(){}function i(e,t){if(null==e||e.constructor!==a)throw new C("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new C("expecting a function but got "+h.classString(t))}function a(e){e!==_&&i(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function o(e){this.promise._resolveCallback(e)}function s(e){this.promise._rejectCallback(e,!1)}function c(e){var t=new a(_);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}var u=function(){return new C("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},l=function(){return new a.PromiseInspection(this._target())},d=function(e){return a.reject(new C(e))},f={},h=t("./util");h.setReflectHandler(l);var p=function(){var t=e.domain;return void 0===t?null:t},v=function(){return{domain:p(),async:null}},g=h.isNode&&h.nodeSupportsAsyncResource?t("async_hooks").AsyncResource:null,y=function(){return{domain:p(),async:new g("Bluebird::Promise")}},m=h.isNode?v:function(){return null};h.notEnumerableProp(a,"_getContext",m);var b=t("./es5"),k=t("./async"),S=new k;b.defineProperty(a,"_async",{value:S});var w=t("./errors"),C=a.TypeError=w.TypeError;a.RangeError=w.RangeError;var T=a.CancellationError=w.CancellationError;a.TimeoutError=w.TimeoutError,a.OperationalError=w.OperationalError,a.RejectionError=w.OperationalError,a.AggregateError=w.AggregateError;var _=function(){},P={},E={},R=t("./thenables")(a,_),I=t("./promise_array")(a,_,R,d,r),O=t("./context")(a),M=O.create,F=t("./debuggability")(a,O,function(){m=y,h.notEnumerableProp(a,"_getContext",y)},function(){m=v,h.notEnumerableProp(a,"_getContext",v)}),j=(F.CapturedTrace,t("./finally")(a,R,E)),A=t("./catch_filter")(E),x=t("./nodeback"),D=h.errorObj,U=h.tryCatch;return a.prototype.toString=function(){return"[object Promise]"},a.prototype.caught=a.prototype.catch=function(e){var t=arguments.length;if(t>1){var n,r=new Array(t-1),i=0;for(n=0;n<t-1;++n){var a=arguments[n];if(!h.isObject(a))return d("Catch statement predicate: expecting an object but got "+h.classString(a));r[i++]=a}if(r.length=i,"function"!=typeof(e=arguments[n]))throw new C("The last argument to .catch() must be a function, got "+h.toString(e));return this.then(void 0,A(r,e,this))}return this.then(void 0,e)},a.prototype.reflect=function(){return this._then(l,l,void 0,this,void 0)},a.prototype.then=function(e,t){if(F.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+h.classString(e);arguments.length>1&&(n+=", "+h.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},a.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},a.prototype.spread=function(e){return"function"!=typeof e?d("expecting a function but got "+h.classString(e)):this.all()._then(e,void 0,void 0,P,void 0)},a.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},a.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new I(this).promise()},a.prototype.error=function(e){return this.caught(h.originatesFromRejection,e)},a.getNewLibraryCopy=n.exports,a.is=function(e){return e instanceof a},a.fromNode=a.fromCallback=function(e){var t=new a(_);t._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=U(e)(x(t,n));return r===D&&t._rejectCallback(r.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},a.all=function(e){return new I(e).promise()},a.cast=function(e){var t=R(e);return t instanceof a||((t=new a(_))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},a.resolve=a.fulfilled=a.cast,a.reject=a.rejected=function(e){var t=new a(_);return t._captureStackTrace(),t._rejectCallback(e,!0),t},a.setScheduler=function(e){if("function"!=typeof e)throw new C("expecting a function but got "+h.classString(e));return S.setScheduler(e)},a.prototype._then=function(e,t,n,r,i){var o=void 0!==i,s=o?i:new a(_),c=this._target(),u=c._bitField;o||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&u)?this._boundValue():c===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var l=m();if(0!=(50397184&u)){var d,f,p=c._settlePromiseCtx;0!=(33554432&u)?(f=c._rejectionHandler0,d=e):0!=(16777216&u)?(f=c._fulfillmentHandler0,d=t,c._unsetRejectionIsUnhandled()):(p=c._settlePromiseLateCancellationObserver,f=new T("late cancellation observer"),c._attachExtraTrace(f),d=t),S.invoke(p,c,{handler:h.contextBind(l,d),promise:s,receiver:r,value:f})}else c._addCallbacks(e,t,s,r,l);return s},a.prototype._length=function(){return 65535&this._bitField},a.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},a.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},a.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},a.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},a.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},a.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},a.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},a.prototype._isFinal=function(){return(4194304&this._bitField)>0},a.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},a.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},a.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},a.prototype._setAsyncGuaranteed=function(){if(!S.hasCustomScheduler()){var e=this._bitField;this._bitField=e|(536870912&e)>>2^134217728}},a.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},a.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==f)return void 0===t&&this._isBound()?this._boundValue():t},a.prototype._promiseAt=function(e){return this[4*e-4+2]},a.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},a.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},a.prototype._boundValue=function(){},a.prototype._migrateCallback0=function(e){var t=(e._bitField,e._fulfillmentHandler0),n=e._rejectionHandler0,r=e._promise0,i=e._receiverAt(0);void 0===i&&(i=f),this._addCallbacks(t,n,r,i,null)},a.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),i=e._promiseAt(t),a=e._receiverAt(t);void 0===a&&(a=f),this._addCallbacks(n,r,i,a,null)},a.prototype._addCallbacks=function(e,t,n,r,i){var a=this._length();if(a>=65531&&(a=0,this._setLength(0)),0===a)this._promise0=n,this._receiver0=r,"function"==typeof e&&(this._fulfillmentHandler0=h.contextBind(i,e)),"function"==typeof t&&(this._rejectionHandler0=h.contextBind(i,t));else{var o=4*a-4;this[o+2]=n,this[o+3]=r,"function"==typeof e&&(this[o+0]=h.contextBind(i,e)),"function"==typeof t&&(this[o+1]=h.contextBind(i,t))}return this._setLength(a+1),a},a.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},a.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(u(),!1);var n=R(e,this);if(!(n instanceof a))return this._fulfill(e);t&&this._propagateFrom(n,2);var r=n._target();if(r===this)return void this._reject(u());var i=r._bitField;if(0==(50397184&i)){var o=this._length();o>0&&r._migrateCallback0(this);for(var s=1;s<o;++s)r._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(n)}else if(0!=(33554432&i))this._fulfill(r._value());else if(0!=(16777216&i))this._reject(r._reason());else{var c=new T("late cancellation observer");r._attachExtraTrace(c),this._reject(c)}}},a.prototype._rejectCallback=function(e,t,n){var r=h.ensureErrorObject(e),i=r===e;if(!i&&!n&&F.warnings()){var a="a promise was rejected with a non-error: "+h.classString(e);this._warn(a,!0)}this._attachExtraTrace(r,!!t&&i),this._reject(e)},a.prototype._resolveFromExecutor=function(e){if(e!==_){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=!1,this._popContext(),void 0!==r&&t._rejectCallback(r,!0)}},a.prototype._settlePromiseFromHandler=function(e,t,n,r){var i=r._bitField;if(0==(65536&i)){var a;r._pushContext(),t===P?n&&"number"==typeof n.length?a=U(e).apply(this._boundValue(),n):(a=D).e=new C("cannot .spread() a non-array: "+h.classString(n)):a=U(e).call(t,n);var o=r._popContext();0==(65536&(i=r._bitField))&&(a===E?r._reject(n):a===D?r._rejectCallback(a.e,!1):(F.checkForgottenReturns(a,o,"",r,this),r._resolveCallback(a)))}},a.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},a.prototype._followee=function(){return this._rejectionHandler0},a.prototype._setFollowee=function(e){this._rejectionHandler0=e},a.prototype._settlePromise=function(e,t,n,i){var o=e instanceof a,s=this._bitField,c=0!=(134217728&s);0!=(65536&s)?(o&&e._invokeInternalOnCancel(),n instanceof j&&n.isFinallyHandler()?(n.cancelPromise=e,U(t).call(n,i)===D&&e._reject(D.e)):t===l?e._fulfill(l.call(n)):n instanceof r?n._promiseCancelled(e):o||e instanceof I?e._cancel():n.cancel()):"function"==typeof t?o?(c&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,n,i,e)):t.call(n,i,e):n instanceof r?n._isResolved()||(0!=(33554432&s)?n._promiseFulfilled(i,e):n._promiseRejected(i,e)):o&&(c&&e._setAsyncGuaranteed(),0!=(33554432&s)?e._fulfill(i):e._reject(i))},a.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,r=e.receiver,i=e.value;"function"==typeof t?n instanceof a?this._settlePromiseFromHandler(t,r,i,n):t.call(r,i,n):n instanceof a&&n._reject(i)},a.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},a.prototype._settlePromise0=function(e,t,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,e,i,t)},a.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},a.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=u();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!=(134217728&t)?this._settlePromises():S.settlePromises(this),this._dereferenceTrace())}},a.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return S.fatalError(e,h.isNode);(65535&t)>0?S.settlePromises(this):this._ensurePossibleRejectionHandled()}},a.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),a=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,a,t)}},a.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),a=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,a,t)}},a.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!=(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e),this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()},a.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&b.defineProperty(a.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),a.defer=a.pending=function(){return F.deprecated("Promise.defer","new Promise"),{promise:new a(_),resolve:o,reject:s}},h.notEnumerableProp(a,"_makeSelfResolutionError",u),t("./method")(a,_,R,d,F),t("./bind")(a,_,R,F),t("./cancel")(a,I,d,F),t("./direct_resolve")(a),t("./synchronous_inspection")(a),t("./join")(a,I,R,_,S),a.Promise=a,a.version="3.7.2",t("./call_get.js")(a),t("./generators.js")(a,d,_,R,r,F),t("./map.js")(a,I,d,R,_,F),t("./nodeify.js")(a),t("./promisify.js")(a,_),t("./props.js")(a,I,R,d),t("./race.js")(a,_,R,d),t("./reduce.js")(a,I,d,R,_,F),t("./settle.js")(a,I,F),t("./some.js")(a,I,d),t("./timers.js")(a,_,F),t("./using.js")(a,d,R,M,_,F),t("./any.js")(a),t("./each.js")(a,_),t("./filter.js")(a,_),h.toFastProperties(a),h.toFastProperties(a.prototype),c({a:1}),c({b:2}),c({c:3}),c(1),c(function(){}),c(void 0),c(!1),c(new a(_)),F.setBounds(k.firstLineError,h.lastLineError),a}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,a){function o(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}function s(e){var r=this._promise=new t(n);e instanceof t&&(r._propagateFrom(e,3),e.suppressUnhandledRejections()),r._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var c=e("./util");return c.isArray,c.inherits(s,a),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function e(n,a){var s=r(this._values,this._promise);if(s instanceof t){var u=(s=s._target())._bitField;if(this._values=s,0==(50397184&u))return this._promise._setAsyncGuaranteed(),s._then(e,this._reject,void 0,this,a);if(0==(33554432&u))return 0!=(16777216&u)?this._reject(s._reason()):this._cancel();s=s._value()}if(null!==(s=c.asArray(s)))0!==s.length?this._iterate(s):-5===a?this._resolveEmptyArray():this._resolve(o(a));else{var l=i("expecting an array or an iterable object but got "+c.classString(s)).reason();this._promise._rejectCallback(l,!1)}},s.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,a=!1,o=null,s=0;s<n;++s){var c=r(e[s],i);c instanceof t?o=(c=c._target())._bitField:o=null,a?null!==o&&c.suppressUnhandledRejections():null!==o?0==(50397184&o)?(c._proxy(this,s),this._values[s]=c):a=0!=(33554432&o)?this._promiseFulfilled(c._value(),s):0!=(16777216&o)?this._promiseRejected(c._reason(),s):this._promiseCancelled(s):a=this._promiseFulfilled(c,s)}a||i._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},s.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(e){return e},s}},{"./util":36}],24:[function(e,t,n){"use strict";t.exports=function(t,n){function r(e){return!m.test(e)}function i(e){try{return!0===e.__isPromisified__}catch(e){return!1}}function a(e,t,n){var r=d.getDataPropertyOrDefault(e,t+n,y);return!!r&&i(r)}function o(e,t,n){for(var r=0;r<e.length;r+=2){var i=e[r];if(n.test(i))for(var a=i.replace(n,""),o=0;o<e.length;o+=2)if(e[o]===a)throw new g("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}function s(e,t,n,r){for(var s=d.inheritedDataKeys(e),c=[],u=0;u<s.length;++u){var l=s[u],f=e[l],h=r===b||b(l,f,e);"function"!=typeof f||i(f)||a(e,l,t)||!r(l,f,e,h)||c.push(l,f)}return o(c,t,n),c}function c(e,t,n,r,i){for(var a=new RegExp(k(t)+"$"),o=s(e,t,a,n),c=0,u=o.length;c<u;c+=2){var f=o[c],h=o[c+1],p=f+t;if(r===S)e[p]=S(f,l,f,h,t,i);else{var v=r(h,function(){return S(f,l,f,h,t,i)});d.notEnumerableProp(v,"__isPromisified__",!0),e[p]=v}}return d.toFastProperties(e),e}function u(e,t,n){return S(e,t,void 0,e,null,n)}var l={},d=e("./util"),f=e("./nodeback"),h=d.withAppended,p=d.maybeWrapAsError,v=d.canEvaluate,g=e("./errors").TypeError,y={__isPromisified__:!0},m=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),b=function(e){return d.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e},k=function(e){return e.replace(/([$])/,"\\$")},S=v?void 0:function(e,r,i,a,o,s){function c(){var i=r;r===l&&(i=this);var a=new t(n);a._captureStackTrace();var o="string"==typeof v&&this!==u?this[v]:e,c=f(a,s);try{o.apply(i,h(arguments,c))}catch(e){a._rejectCallback(p(e),!0,!0)}return a._isFateSealed()||a._setAsyncGuaranteed(),a}var u=(function(){return this})(),v=e;return"string"==typeof v&&(e=a),d.notEnumerableProp(c,"__isPromisified__",!0),c};t.promisify=function(e,t){if("function"!=typeof e)throw new g("expecting a function but got "+d.classString(e));if(i(e))return e;var n=u(e,void 0===(t=Object(t)).context?l:t.context,!!t.multiArgs);return d.copyDescriptors(e,n,r),n},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new g("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(t=Object(t)).multiArgs,r=t.suffix;"string"!=typeof r&&(r="Async");var i=t.filter;"function"!=typeof i&&(i=b);var a=t.promisifier;if("function"!=typeof a&&(a=S),!d.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var o=d.inheritedDataKeys(e),s=0;s<o.length;++s){var u=e[o[s]];"constructor"!==o[s]&&d.isClass(u)&&(c(u.prototype,r,i,a,n),c(u,r,i,a,n))}return c(e,r,i,a,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){function a(e){var t,n=!1;if(void 0!==s&&e instanceof s)t=d(e),n=!0;else{var r=l.keys(e),i=r.length;t=new Array(2*i);for(var a=0;a<i;++a){var o=r[a];t[a]=e[o],t[a+i]=o}}this.constructor$(t),this._isMap=n,this._init$(void 0,n?-6:-3)}function o(e){var n,o=r(e);return u(o)?(n=o instanceof t?o._then(t.props,void 0,void 0,void 0,void 0):new a(o).promise(),o instanceof t&&n._propagateFrom(o,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var s,c=e("./util"),u=c.isObject,l=e("./es5");"function"==typeof Map&&(s=Map);var d=(function(){function e(e,r){this[t]=e,this[t+n]=r,t++}var t=0,n=0;return function(r){n=r.size,t=0;var i=new Array(2*r.size);return r.forEach(e,i),i}})(),f=function(e){for(var t=new s,n=e.length/2|0,r=0;r<n;++r){var i=e[n+r],a=e[r];t.set(i,a)}return t};c.inherits(a,n),a.prototype._init=function(){},a.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){var n;if(this._isMap)n=f(this._values);else{n={};for(var r=this.length(),i=0,a=this.length();i<a;++i)n[this._values[i+r]]=this._values[i]}return this._resolve(n),!0}return!1},a.prototype.shouldCopyValues=function(){return!1},a.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return o(this)},t.props=function(e){return o(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,n){"use strict";function r(e,t,n,r,i){for(var a=0;a<i;++a)n[a+r]=e[a+t],e[a+t]=void 0}function i(e){this._capacity=e,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(e){return this._capacity<e},i.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},i.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var a=this._capacity-1;this[i+0&a]=e,this[i+1&a]=t,this[i+2&a]=n,this._length=r},i.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,r(this,0,this,t,this._front+this._length&t-1)},t.exports=i},{}],27:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){function a(e,a){var c=r(e);if(c instanceof t)return s(c);if(null===(e=o.asArray(e)))return i("expecting an array or an iterable object but got "+o.classString(e));var u=new t(n);void 0!==a&&u._propagateFrom(a,3);for(var l=u._fulfill,d=u._reject,f=0,h=e.length;f<h;++f){var p=e[f];(void 0!==p||f in e)&&t.cast(p)._then(l,d,void 0,u,null)}return u}var o=e("./util"),s=function(e){return e.then(function(t){return a(t,e)})};t.race=function(e){return a(e,void 0)},t.prototype.race=function(){return a(this,void 0)}}},{"./util":36}],28:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,a,o){function s(e,n,r,i){this.constructor$(e);var o=t._getContext();this._fn=f.contextBind(o,n),void 0!==r&&(r=t.resolve(r))._attachCancellationCallback(this),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===a?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function c(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function u(e,t,n,i){return"function"!=typeof t?r("expecting a function but got "+f.classString(t)):new s(e,t,n,i).promise()}function l(e){this.accum=e,this.array._gotAccum(e);var n=i(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(d,void 0,void 0,this,void 0)):d.call(this,n)}function d(e){var n,r=this.array,i=r._promise,a=h(r._fn);i._pushContext(),(n=void 0!==r._eachValues?a.call(i._boundValue(),e,this.index,this.length):a.call(i._boundValue(),this.accum,e,this.index,this.length))instanceof t&&(r._currentCancellable=n);var s=i._popContext();return o.checkForgottenReturns(n,s,void 0!==r._eachValues?"Promise.each":"Promise.reduce",i),n}var f=e("./util"),h=f.tryCatch;f.inherits(s,n),s.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==a&&this._eachValues.push(e)},s.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},s.prototype.shouldCopyValues=function(){return!1},s.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},s.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel())},s.prototype._iterate=function(e){this._values=e;var n,r,i=e.length;void 0!==this._initialValue?(n=this._initialValue,r=0):(n=t.resolve(e[0]),r=1),this._currentCancellable=n;for(var a=r;a<i;++a){var o=e[a];o instanceof t&&o.suppressUnhandledRejections()}if(!n.isRejected())for(;r<i;++r){var s={accum:null,value:e[r],index:r,length:i,array:this};n=n._then(l,void 0,void 0,s,void 0),0==(127&r)&&n._setNoAsyncGuarantee()}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(c,c,void 0,n,this)},t.prototype.reduce=function(e,t){return u(this,e,t,null)},t.reduce=function(e,t,n,r){return u(e,t,n,r)}}},{"./util":36}],29:[function(n,r,a){"use strict";var o,s=n("./util"),c=s.getNativePromise();if(s.isNode&&"undefined"==typeof MutationObserver){var u=t.setImmediate,l=e.nextTick;o=s.isRecentNode?function(e){u.call(t,e)}:function(t){l.call(e,t)}}else if("function"==typeof c&&"function"==typeof c.resolve){var d=c.resolve();o=function(e){d.then(e)}}else o="undefined"!=typeof MutationObserver&&("undefined"==typeof window||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList"in document.documentElement?(function(){var e=document.createElement("div"),t={attributes:!0},n=!1,r=document.createElement("div");new MutationObserver(function(){e.classList.toggle("foo"),n=!1}).observe(r,t);var i=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(e,t),i()}})():void 0!==i?function(e){i(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};r.exports=o},{"./util":36}],30:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(e){this.constructor$(e)}var a=t.PromiseInspection;e("./util").inherits(i,n),i.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(e,t){var n=new a;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},i.prototype._promiseRejected=function(e,t){var n=new a;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},t.settle=function(e){return r.deprecated(".settle()",".reflect()"),new i(e).promise()},t.allSettled=function(e){return new i(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function a(e,t){if((0|t)!==t||t<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new i(e),a=n.promise();return n.setHowMany(t),n.init(),a}var o=e("./util"),s=e("./errors").RangeError,c=e("./errors").AggregateError,u=o.isArray,l={};o.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var e=u(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(e){this._howMany=e},i.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},i.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(l),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new c,t=this.length();t<this._values.length;++t)this._values[t]!==l&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(e){this._values.push(e)},i.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new s(t)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return a(e,t)},t.prototype.some=function(e){return a(this,e)},t._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(e,t,n){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},a=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},o=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return o.call(this._target())},e.prototype.isRejected=function(){return a.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return s.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,n){"use strict";t.exports=function(t,n){function r(e){return e.then}function i(e){try{return r(e)}catch(e){return c.e=e,c}}function a(e){try{return l.call(e,"_promise0")}catch(e){return!1}}function o(e,r,i){var a=new t(n),o=a;i&&i._pushContext(),a._captureStackTrace(),i&&i._popContext();var u=!0,l=s.tryCatch(r).call(e,function(e){a&&(a._resolveCallback(e),a=null)},function(e){a&&(a._rejectCallback(e,u,!0),a=null)});return u=!1,a&&l===c&&(a._rejectCallback(l.e,!0,!0),a=null),o}var s=e("./util"),c=s.errorObj,u=s.isObject,l={}.hasOwnProperty;return function(e,r){if(u(e)){if(e instanceof t)return e;var s=i(e);if(s===c){r&&r._pushContext();var l=t.reject(s.e);return r&&r._popContext(),l}if("function"==typeof s)return a(e)?(l=new t(n),e._then(l._fulfill,l._reject,void 0,l,null),l):o(e,s,r)}return e}}},{"./util":36}],34:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(e){this.handle=e}function a(e){return clearTimeout(this.handle),e}function o(e){throw clearTimeout(this.handle),e}var s=e("./util"),c=t.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var u=function(e){return l(+this).thenReturn(e)},l=t.delay=function(e,a){var o,s;return void 0!==a?(o=t.resolve(a)._then(u,null,null,e,void 0),r.cancellation()&&a instanceof t&&o._setOnCancel(a)):(o=new t(n),s=setTimeout(function(){o._fulfill()},+e),r.cancellation()&&o._setOnCancel(new i(s)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};t.prototype.delay=function(e){return l(e,this)};var d=function(e,t,n){var r;r="string"!=typeof t?t instanceof Error?t:new c("operation timed out"):new c(t),s.markAsOriginatingFromRejection(r),e._attachExtraTrace(r),e._reject(r),null!=n&&n.cancel()};t.prototype.timeout=function(e,t){e=+e;var n,s,c=new i(setTimeout(function(){n.isPending()&&d(n,t,s)},e));return r.cancellation()?(s=this.then(),(n=s._then(a,o,void 0,c,void 0))._setOnCancel(c)):n=this._then(a,o,void 0,c,void 0),n}}},{"./util":36}],35:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,a,o){function s(e){setTimeout(function(){throw e},0)}function c(e){var t=r(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}function u(e,n){var i=0,o=e.length,u=new t(a);return(function a(){if(i>=o)return u._fulfill();var l=c(e[i++]);if(l instanceof t&&l._isDisposable()){try{l=r(l._getDisposer().tryDispose(n),e.promise)}catch(e){return s(e)}if(l instanceof t)return l._then(a,s,null,null,null)}a()})(),u}function l(e,t,n){this._data=e,this._promise=t,this._context=n}function d(e,t,n){this.constructor$(e,t,n)}function f(e){return l.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function h(e){this.length=e,this.promise=null,this[e-1]=null}var p=e("./util"),v=e("./errors").TypeError,g=e("./util").inherits,y=p.errorObj,m=p.tryCatch,b={};l.prototype.data=function(){return this._data},l.prototype.promise=function(){return this._promise},l.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():b},l.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=t!==b?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},l.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},g(d,l),d.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},h.prototype._resultCancelled=function(){for(var e=this.length,n=0;n<e;++n){var r=this[n];r instanceof t&&r.cancel()}},t.using=function(){var e=arguments.length;if(e<2)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[e-1];if("function"!=typeof i)return n("expecting a function but got "+p.classString(i));var a,s=!0;2===e&&Array.isArray(arguments[0])?(e=(a=arguments[0]).length,s=!1):(a=arguments,e--);for(var c=new h(e),d=0;d<e;++d){var v=a[d];if(l.isDisposer(v)){var g=v;(v=v.promise())._setDisposable(g)}else{var b=r(v);b instanceof t&&(v=b._then(f,null,null,{resources:c,index:d},void 0))}c[d]=v}var k=new Array(c.length);for(d=0;d<k.length;++d)k[d]=t.resolve(c[d]).reflect();var S=t.all(k).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return y.e=n.error(),y;if(!n.isFulfilled())return void S.cancel();e[t]=n.value()}w._pushContext(),i=m(i);var r=s?i.apply(void 0,e):i(e),a=w._popContext();return o.checkForgottenReturns(r,a,"Promise.using",w),r}),w=S.lastly(function(){var e=new t.PromiseInspection(S);return u(c,e)});return c.promise=w,w._setOnCancel(c),w},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new d(e,this,i());throw new v}}},{"./errors":12,"./util":36}],36:[function(n,r,i){"use strict";function a(){try{var e=f;return f=null,e.apply(this,arguments)}catch(e){return v.e=e,v}}function o(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function s(e,t,n){if(o(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return h.defineProperty(e,t,r),e}function c(e){try{return e+""}catch(e){return"[no string representation]"}}function u(e){return e instanceof Error||null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function l(e){return u(e)&&h.propertyIsWritable(e,"stack")}function d(e){return{}.toString.call(e)}var f,h=n("./es5"),p="undefined"==typeof navigator,v={e:{}},g="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:void 0!==this?this:null,y=(function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(h.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var r=[],i=Object.create(null);null!=e&&!t(e);){var a;try{a=n(e)}catch(e){return r}for(var o=0;o<a.length;++o){var s=a[o];if(!i[s]){i[s]=!0;var c=Object.getOwnPropertyDescriptor(e,s);null!=c&&null==c.get&&null==c.set&&r.push(s)}}e=h.getPrototypeOf(e)}return r}}var r={}.hasOwnProperty;return function(n){if(t(n))return[];var i=[];e:for(var a in n)if(r.call(n,a))i.push(a);else{for(var o=0;o<e.length;++o)if(r.call(e[o],a))continue e;i.push(a)}return i}})(),m=/this\s*\.\s*\S+\s*=/,b=/^[a-z$_][a-z$_0-9]*$/i,k="stack"in new Error?function(e){return l(e)?e:new Error(c(e))}:function(e){if(l(e))return e;try{throw new Error(c(e))}catch(e){return e}},S=function(e){return h.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var w="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],r=e[Symbol.iterator]();!(t=r.next()).done;)n.push(t.value);return n};S=function(e){return h.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?w(e):null}}var C,T=void 0!==e&&"[object process]"===d(e).toLowerCase(),_=void 0!==e&&void 0!==e.env,P={setReflectHandler:function(e){C=e},isClass:function(e){try{if("function"==typeof e){var t=h.names(e.prototype),n=h.isES5&&t.length>1,r=t.length>0&&!(1===t.length&&"constructor"===t[0]),i=m.test(e+"")&&h.names(e).length>0;if(n||r||i)return!0}return!1}catch(e){return!1}},isIdentifier:function(e){return b.test(e)},inheritedDataKeys:y,getDataPropertyOrDefault:function(e,t,n){if(!h.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var r=Object.getOwnPropertyDescriptor(e,t);return null!=r?null==r.get&&null==r.set?r.value:n:void 0},thrower:function(e){throw e},isArray:h.isArray,asArray:S,notEnumerableProp:s,isPrimitive:o,isObject:function(e){return"function"==typeof e||"object"==typeof e&&null!==e},isError:u,canEvaluate:p,errorObj:v,tryCatch:function(e){return f=e,a},inherits:function(e,t){function n(){for(var n in this.constructor=e,this.constructor$=t,t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}var r={}.hasOwnProperty;return n.prototype=t.prototype,e.prototype=new n,e.prototype},withAppended:function(e,t){var n,r=e.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=e[n];return i[n]=t,i},maybeWrapAsError:function(e){return o(e)?new Error(c(e)):e},toFastProperties:function(e){function t(){}function n(){return typeof r.foo}t.prototype=e;var r=new t;return n(),n(),e},filledRange:function(e,t,n){for(var r=new Array(e),i=0;i<e;++i)r[i]=t+i+n;return r},toString:c,canAttachTrace:l,ensureErrorObject:k,originatesFromRejection:function(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)},markAsOriginatingFromRejection:function(e){try{s(e,"isOperational",!0)}catch(e){}},classString:d,copyDescriptors:function(e,t,n){for(var r=h.names(e),i=0;i<r.length;++i){var a=r[i];if(n(a))try{h.defineProperty(t,a,h.getDescriptor(e,a))}catch(e){}}},isNode:T,hasEnvVariables:_,env:function(t){return _?e.env[t]:void 0},global:g,getNativePromise:function(){if("function"==typeof Promise)try{if("[object Promise]"===d(new Promise(function(){})))return Promise}catch(e){}},contextBind:function(e,t){if(null===e||"function"!=typeof t||t===C)return t;null!==e.domain&&(t=e.domain.bind(t));var n=e.async;if(null!==n){var r=t;t=function(){var e=new Array(2).concat([].slice.call(arguments));return e[0]=r,e[1]=this,n.runInAsyncScope.apply(n,e)}}return t}};P.isRecentNode=P.isNode&&(function(){var t;return e.versions&&e.versions.node?t=e.versions.node.split(".").map(Number):e.version&&(t=e.version.split(".").map(Number)),0===t[0]&&t[1]>10||t[0]>0})(),P.nodeSupportsAsyncResource=P.isNode&&(function(){var e=!1;try{e="function"==typeof n("async_hooks").AsyncResource.prototype.runInAsyncScope}catch(t){e=!1}return e})(),P.isNode&&P.toFastProperties(e);try{throw new Error}catch(e){P.lastLineError=e}r.exports=P},{"./es5":13,async_hooks:void 0}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,t("_process"),void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").setImmediate)},{_process:15,timers:16}],2:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.PreCallTest=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=e("./turnConnection"),o=e("./tests/rttTest"),s=e("./tests/throughputTest"),c=e("./utility/resultsHandler"),u=e("./utility/onlineCheck"),l=e("./utility/stats/detectbrowser"),d=e("bluebird"),f={RTT:"rtt",THROUGHPUT:"throughput"},h=(function(){function e(){r(this,e),this.browserInfo=(0,l.detect)(),this.onlineCheck=new u.OnlineCheck,this.callsInProgress=0,this.turnTests=[f.RTT,f.THROUGHPUT],this.active=!1,this.rtt=null,this.resultsHandler=null}return i(e,[{key:"start",value:function(e,t,n,r){if(this.browserInfo.browserName!==l.Constants.browserName.msie)if(this.iceServers=e,this.callback=r,this.active)this.callback&&this.callback(null,"Not started: already in progress");else if(0<this.callsInProgress)this.callback&&this.callback(null,"Not started: call in progress");else if(e){this.turnTestCounter=0,this.resultsHandler=new c.ResultsHandler,this.resultsHandler.setProvider(t),this.resultsHandler.setisRunManually(n);var i={type:"browser",os:this.browserInfo.os,osVersion:this.browserInfo.osVersion,buildName:this.browserInfo.browserName,buildVersion:this.browserInfo.browserVersion};this.resultsHandler.add("endpointInfo",i),this.onlineCheck.start(),this.active=!0,this._start()}else this.callback&&this.callback(null,"Not started: no ICE servers given");else this.callback&&this.callback(null,"Not started: disabled for IE")}},{key:"_start",value:function(){var e=this;this.active&&(this.turnConnection=new a.TurnConnection(this.browserInfo),this.turnConnection.connect(this.iceServers).then(function(){e.active?(e.resultsHandler&&e.resultsHandler.setStatusSuccess(),e.startTurnTests().then(function(){e.stop()},function(t){e.stop()})):e.stop()},function(t){var n=t.continueFlag;if(e.resultsHandler.failure(t),!n){e.turnConnection.disconnect(),e.active=!1;var r="";try{r=t.stack}catch(n){r=t.toString()}return r&&""!==r||(r=t.toString()),e.resultsHandler&&e.resultsHandler.setStatusFailed(),void e.callback(null,r)}e.resultsHandler.setStatusFailed(),e.resultsHandler.getFailureNumber()>=10?e.stop():(e.turnConnection.disconnect(),setTimeout(function(){e._start()},0))}))}},{key:"stop",value:function(){var e=this;if(this.browserInfo.browserName!==l.Constants.browserName.msie&&this.active){this.active=!1,this.activeTurnTest&&this.activeTurnTest.forceStop();var t=this.onlineCheck.stop();this.resultsHandler&&this.resultsHandler.add("onlineStatus",t),this.turnConnection.getIceResults().then(function(t){e.resultsHandler&&e.resultsHandler.add("ice",t),e.turnConnection.disconnect(),e.sendResults()},function(t){e.resultsHandler&&e.resultsHandler.failure(t),e.turnConnection.disconnect(),e.sendResults()})}}},{key:"sendResults",value:function(){if(this.resultsHandler){var e=this.resultsHandler.getResults();this.resultsHandler=null,this.callback&&this.callback(e,null)}else this.callback&&this.callback(null,"No results present")}},{key:"callStarts",value:function(){this.callsInProgress+=1,this.resultsHandler&&this.resultsHandler.setStatusStopped(),this.stop()}},{key:"callFinished",value:function(){this.callsInProgress-=1}},{key:"getId",value:function(){return this.resultsHandler?this.resultsHandler.getId():null}},{key:"crashDisconnect",value:function(){try{this.turnConnection.disconnect()}catch(e){}}},{key:"startTurnTests",value:function(){var e=this;if(this.turnTestCounter>=this.turnTests.length)return new d(function(e,t){e()});var t=this.turnTests[this.turnTestCounter],n=null;switch(t){case f.RTT:n=new o.RttTest(this.turnConnection);break;case f.THROUGHPUT:n=new s.ThroughputTest(this.turnConnection,this.rtt);break;default:return new d(function(e,n){n(new Error("Unknown test: "+t))})}return this.activeTurnTest=n,this.active?n.start().then(function(){return e.handleTestResults(t,n.getResults()),e.turnTestCounter+=1,e.activeTurnTest=null,e.startTurnTests()},function(r){return e.handleTestResults(t,n.getResults(),r),e.turnTestCounter+=1,e.activeTurnTest=null,e.startTurnTests()}):new d(function(e,t){t(new Error("Test trying to start while testing is not active"))})}},{key:"handleTestResults",value:function(e,t){null==(2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)&&e==f.RTT&&(this.rtt=t.median),this.resultsHandler&&this.resultsHandler.add(e,t)}}]),e})();n.PreCallTest=h},{"./tests/rttTest":3,"./tests/throughputTest":4,"./turnConnection":6,"./utility/onlineCheck":8,"./utility/resultsHandler":10,"./utility/stats/detectbrowser":11,bluebird:1}],3:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.RttTest=void 0;var o=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},c=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../utility/timestamps")),u=e("./turnTest"),l=(function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.sendTimer=null,n.countSent=0,n.rtts=[],n}return a(t,u.TurnTest),o(t,[{key:"initiate",value:function(){this.results.startTimestamp=c.getCurrent(),this.sendPing()}},{key:"handleMessage",value:function(e){if(this.isActive()){var t=parseInt(e,10),n=this.calculateRtt(t);this.rtts.push(n),this.countSent<10?this.sendPing():this.calculateMetrics()}}},{key:"handleError",value:function(e){this.fillResults(),this.failed(e)}},{key:"sendPing",value:function(){if(this.isActive()){var e=c.getCurrent();this.send(e.toString()),this.countSent+=1,this.sendTimer&&(clearTimeout(this.sendTimer),this.sendTimer=null),this.countSent<10?this.sendTimer=setTimeout(this.sendPing.bind(this),100):this.sendTimer=setTimeout(this.calculateMetrics.bind(this),500)}}},{key:"calculateRtt",value:function(e){return c.getCurrent()-e}},{key:"calculateMetrics",value:function(){this.sendTimer&&(clearTimeout(this.sendTimer),this.sendTimer=null),this.fillResults(),this.finished()}},{key:"fillResults",value:function(){this.results.sentMessages=this.countSent,this.results.unAckedMessages=this.countSent-this.rtts.length,this.results.maxMessages=10,this.results.forceStopped=this.forceStopped,this.results.median=this.median(),this.results.average=this.average(),this.results.variance=this.variance(),this.results.endTimestamp=c.getCurrent()}},{key:"median",value:function(){if(0==this.rtts.length)return null;this.rtts.sort();var e=Math.floor(this.rtts.length/2);return this.rtts[e]}},{key:"average",value:function(){if(0==this.rtts.length)return null;for(var e=0,t=0;t<this.rtts.length;t++)e+=this.rtts[t];return e/this.rtts.length}},{key:"variance",value:function(){if(0==this.rtts.length)return null;for(var e=0,t=this.average(),n=0;n<this.rtts.length;n++){var r=this.rtts[n];e+=Math.pow(r-t,2)}return e/this.rtts.length}},{key:"stop",value:function(){this.isActive()&&(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stop",this).call(this),this.fillResults())}}]),t})();n.RttTest=l},{"../utility/timestamps":14,"./turnTest":5}],4:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.ThroughputTest=void 0;var o=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},c=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../utility/timestamps")),u=e("../utility/messageMaker"),l=e("./turnTest"),d=(function(e){function t(e,n){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(a.sentBytes=0,a.receivedBytes=0,a.secondHalfBytes=0,a.secondHalfStart=null,a.bufferEmpty=0,a.chunkSize=1200,a.messageMaker=new u.MessageMaker(a.chunkSize),a.duration=5e3,null!=n){var o=50*n;a.duration=Math.max(Math.min(o,1e4),1e3)}return a.sendTimer=null,a.lastMessage=null,a.intervals=[],a.intervalStart=0,a.intervalLength=100,a.intervalBytes=0,a}return a(t,l.TurnTest),o(t,[{key:"initiate",value:function(){window&&window.csioReactNative?this.handleError(new Error("Not running throughput test for react-native")):this.startSend()}},{key:"handleMessage",value:function(e){var t=this;if(this.isActive()){this.lastMessage=e,this.receivedBytes+=e.length;var n=c.getCurrent();if(this.sendTimer||(this.results.startTimestamp=n,this.sendTimer=setTimeout(function(){t.stop(),t.finished()},this.duration)),0==this.intervalStart&&(this.intervalStart=n),this.intervalBytes+=e.length,n-this.intervalStart>=this.intervalLength){var r=n-this.intervalStart,i=this.averageThroughput(this.intervalBytes,r),a=null;try{a=n-JSON.parse(this.lastMessage).timestamp}catch(e){}this.intervals.push({startTimestamp:this.intervalStart,endTimestamp:n,bytesReceived:this.intervalBytes,average:i,rtt:a}),this.intervalStart=n,this.intervalBytes=0}this.results.startTimestamp&&n-this.results.startTimestamp>this.duration/2&&(this.secondHalfStart||(this.secondHalfStart=n),this.secondHalfBytes+=e.length)}}},{key:"handleError",value:function(e){this.stop(),this.failed(e)}},{key:"averageThroughput",value:function(e,t){return 0===t?0:e/(t/1e3)*8/1024}},{key:"bufferListener",value:function(){this.sendChannel.removeEventListener("bufferedamountlow",this.bufferListener.bind(this)),this.fillBuffer()}},{key:"fillBuffer",value:function(){for(0==this.sendChannel.bufferedAmount&&(this.bufferEmpty+=1);this.isActive();){if(this.sendChannel.bufferedAmount>this.bufferFullThreshold)return void(this.usePolling?setTimeout(this.fillBuffer.bind(this),250):this.sendChannel.addEventListener("bufferedamountlow",this.bufferListener.bind(this)));var e=this.messageMaker.make(this.sentBytes);this.sentBytes+=e.length,this.send(e)}this.sendChannel.removeEventListener("bufferedamountlow",this.bufferListener.bind(this))}},{key:"startSend",value:function(){this.isActive()&&(this.bufferFullThreshold=1e3*this.chunkSize,this.sendChannel=this.connection.sendChannel,this.usePolling=!0,"number"==typeof this.sendChannel.bufferedAmountLowThreshold&&(this.usePolling=!1,this.sendChannel.bufferedAmountLowThreshold=this.bufferFullThreshold/10),setTimeout(this.fillBuffer.bind(this),0))}},{key:"fillResults",value:function(){this.results.endTimestamp=c.getCurrent(),this.results.maxDuration=this.duration,this.results.forceStopped=this.forceStopped,this.results.bufferEmpty=this.bufferEmpty,this.results.intervals=this.intervals,this.results.bytesPrepared=this.sentBytes,this.results.bytesReceived=this.receivedBytes,this.results.startTimestamp||(this.results.startTimestamp=this.results.endTimestamp);var e=0,t=0;this.secondHalfStart&&(e=this.results.endTimestamp-this.secondHalfStart,t=this.averageThroughput(this.secondHalfBytes,e));var n=this.results.endTimestamp-this.results.startTimestamp,r=this.averageThroughput(this.receivedBytes,n);t<r&&(t=r),this.results.average=t;var i=null;try{i=JSON.parse(this.lastMessage)}catch(e){return}if(i){var a=i.sentBytes+this.lastMessage.length;this.results.bytesSent=a,this.results.fractionLostBytes=1-this.receivedBytes/a}else this.results.bytesSent=-1,this.results.fractionLostBytes=-1}},{key:"stop",value:function(){this.isActive()&&(clearTimeout(this.sendTimer),this.sendTimer=null,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stop",this).call(this),this.fillResults())}}]),t})();n.ThroughputTest=d},{"../utility/messageMaker":7,"../utility/timestamps":14,"./turnTest":5}],5:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=e("bluebird"),o=(function(){function e(t){r(this,e),this.connection=t,this.active=!1,this.results={}}return i(e,[{key:"getResults",value:function(){return this.results}},{key:"start",value:function(){var e=this,t=new a(function(t,n){e.resolveCb=t,e.rejectCb=n});return this.connection.setMessageCallback(this.handleMessage.bind(this)),this.connection.setErrorCallback(this.handleError.bind(this)),this.active=!0,this.forceStopped=!1,this.initiate(),t}},{key:"stop",value:function(){this.active=!1}},{key:"forceStop",value:function(){this.forceStopped=!0,this.stop(),this.finished()}},{key:"isActive",value:function(){return this.active}},{key:"initiate",value:function(){}},{key:"handleMessage",value:function(e){}},{key:"handleError",value:function(e){}},{key:"send",value:function(e){this.connection.send(e)}},{key:"finished",value:function(){this.active=!1,this.resolveCb&&(this.resolveCb(),this.resolveCb=null)}},{key:"failed",value:function(e){this.active=!1,this.rejectCb&&(this.rejectCb(e),this.rejectCb=null)}}]),e})();n.TurnTest=o},{bluebird:1}],6:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.TurnConnection=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=e("./utility/parsedIceCandidate"),o=e("./utility/stats/getstatshandler"),s=e("./utility/stats/detectbrowser"),c=e("bluebird"),u=(function(){function e(t){r(this,e),this.reset(),this.statshandler=new o.GetStatsHandler(t)}return i(e,[{key:"reset",value:function(){this.disconnect(),this.iceServers=null,this.pctpc1=null,this.pctpc2=null,this.sendChannel=null,this.messageCallback=null,this.errorCallback=null,this.parsedIceResults={},this.resolveCb=null,this.rejectCb=null}},{key:"setMessageCallback",value:function(e){this.messageCallback=e}},{key:"setErrorCallback",value:function(e){this.errorCallback=e}},{key:"send",value:function(e){if(this.sendChannel)try{this.sendChannel.send(e)}catch(e){this.raiseSendError(e)}else this.raiseSendError(new Error("No send channel"))}},{key:"raiseSendError",value:function(e){this.errorCallback&&this.errorCallback(e)}},{key:"assignEvent",value:function(e,t,n){e.addEventListener?e.addEventListener(t,n.bind(this),!1):e.attachEvent&&(t="on"+t,e.attachEvent(t,n.bind(this)))}},{key:"connect",value:function(e){var t=this;this.reset();var n=new c(function(e,n){t.resolveCb=e,t.rejectCb=n});this.iceServers=e;var r=null;try{if(RTCPeerConnection?r=RTCPeerConnection:webkitRTCPeerConnection?r=webkitRTCPeerConnection:mozRTCPeerConnection?r=mozRTCPeerConnection:window&&window.RTCPeerConnection&&(r=window.RTCPeerConnection),!r){var i=new Error("RTCPeerConnection not found");return i.continueFlag=!1,this.rejectCb(i),n}}catch(i){return i.continueFlag=!1,this.rejectCb(i),n}var a={iceTransportPolicy:"all",iceServers:this.iceServers};try{this.pctpc1=new r(a),this.pctpc2=new r(a)}catch(i){return this.rejectDisconnect(!1,i),n}this.connectionTimer=setTimeout(function(){delete t.connectionTimer,t.rejectDisconnect(!1,new Error("Connection timeout"))},3e4);try{this.sendChannel=this.pctpc1.createDataChannel("precalltest",{ordered:!1,maxRetransmits:0}),this.sendChannel.binaryType="arraybuffer",this.assignEvent(this.sendChannel,"error",function(e){t.raiseSendError(e),t.rejectDisconnect(!0,e)}),this.assignEvent(this.pctpc2,"datachannel",function(e){var n=e.channel;t.assignEvent(n,"open",function(e){t.resolveCb&&(t.resolveCb(),t.resolveCb=null)}),t.assignEvent(n,"close",function(e){t&&t.disconnect&&t.disconnect()}),t.assignEvent(n,"message",function(e){t.messageCallback&&t.messageCallback(e.data)}),t.assignEvent(n,"error",function(e){t.errorCallback&&t.errorCallback(e),t.rejectDisconnect(!0,e)})})}catch(i){return this.rejectDisconnect(!1,i),n}try{this.assignEvent(this.pctpc1,"icecandidate",function(e){t.onIceCandidate(t.pctpc1,e)}),this.assignEvent(this.pctpc1,"iceconnectionstatechange",function(e){t.onIceStateChange(t.pctpc1,e)}),this.assignEvent(this.pctpc2,"icecandidate",function(e){t.onIceCandidate(t.pctpc2,e)}),this.assignEvent(this.pctpc2,"iceconnectionstatechange",function(e){t.onIceStateChange(t.pctpc2,e)}),this.pctpc1.createOffer().then(function(e,n){t.onCreateOfferSuccess(e)},function(e){t.onCreateOfferError(t.pctpc1,e)})}catch(i){return this.rejectDisconnect(!1,i),n}return n}},{key:"rejectDisconnect",value:function(e,t){this.disconnect(),this.rejectCb&&(t.continueFlag=e,this.rejectCb(t)),this.resolveCb=null,this.rejectCb=null}},{key:"disconnect",value:function(){if(clearTimeout(this.connectionTimer),clearTimeout(this.iceTimer),this.pctpc1)try{this.pctpc1.close()}catch(e){}if(this.pctpc1=null,this.pctpc2)try{this.pctpc2.close()}catch(e){}this.pctpc2=null}},{key:"getName",value:function(e){return e===this.pctpc1?"pctpc1":"pctpc2"}},{key:"getOtherPc",value:function(e){return e===this.pctpc1?this.pctpc2:this.pctpc1}},{key:"onCreateOfferError",value:function(e,t){this.rejectDisconnect(!1,t)}},{key:"onCreateAnswerError",value:function(e,t){this.rejectDisconnect(!1,t)}},{key:"onCreateOfferSuccess",value:function(e){var t=this;try{this.pctpc1.setLocalDescription(e).then(function(){t.onSetLocalSuccess(t.pctpc1)},function(e){t.onSetSessionDescriptionError(t.pctpc1,e)}),this.pctpc2.setRemoteDescription(e).then(function(){t.onSetRemoteSuccess(t.pctpc2)},function(e){t.onSetRemoteSessionDescriptionError(t.pctpc2,e)}),this.pctpc2.createAnswer().then(function(e){t.onCreateAnswerSuccess(e)},function(e){t.onCreateAnswerError(t.pctpc2,e)})}catch(e){this.rejectDisconnect(!1,e)}}},{key:"onSetLocalSuccess",value:function(e){}},{key:"onSetRemoteSuccess",value:function(e){}},{key:"onSetSessionDescriptionError",value:function(e,t){this.rejectDisconnect(!1,t)}},{key:"onSetRemoteSessionDescriptionError",value:function(e,t){this.rejectDisconnect(!1,t)}},{key:"onCreateAnswerSuccess",value:function(e){var t=this;try{this.pctpc2.setLocalDescription(e).then(function(){t.onSetLocalSuccess(t.pctpc2)},function(e){t.onSetSessionDescriptionError(t.pctpc2,e)}),this.pctpc1.setRemoteDescription(e).then(function(){t.onSetRemoteSuccess(t.pctpc1)},function(e){t.onSetRemoteSessionDescriptionError(t.pctpc1,e)})}catch(e){this.rejectDisconnect(!1,e)}}},{key:"onIceCandidate",value:function(e,t){var n=this;try{if(!t.candidate)return;if(!t.candidate.candidate)return;var r=new a.ParsedIceCandidate(t.candidate);if(e==this.pctpc1&&this.statshandler.codeBase==s.Constants.codeBaseType.chrome&&(r.isRelay()&&(r.isTypeTransportUdp()&&(this.parsedIceResults.relayUdpGathered=!0),r.isTypeTransportTcp()&&(this.parsedIceResults.relayTcpGathered=!0),r.isTypeTransportTls()&&(this.parsedIceResults.relayTlsGathered=!0)),r.isServerReflexive()&&(this.parsedIceResults.srflxGathered=!0)),!r.isRelay())return;this.getOtherPc(e).addIceCandidate(t.candidate).then(function(){n.onAddIceCandidateSuccess(e)},function(t){n.onAddIceCandidateError(e,t,r.isRelay())})}catch(t){this.rejectDisconnect(!1,t)}}},{key:"onAddIceCandidateSuccess",value:function(e){}},{key:"onAddIceCandidateError",value:function(e,t,n){n&&this.rejectDisconnect(!1,t)}},{key:"onIceStateChange",value:function(e,t){var n=this;try{var r="(?)";e&&(r=e.iceConnectionState),"failed"===r&&this.rejectDisconnect(!0,new Error("ICE failure")),"checking"!==r||this.iceTimer||(this.iceTimer=setTimeout(function(){delete n.iceTimer,n.rejectDisconnect(!0,new Error("ICE timeout"))},1e4)),"completed"!==r&&"connected"!==r||(clearTimeout(this.iceTimer),delete this.iceTimer)}catch(e){this.rejectDisconnect(!1,e)}}},{key:"getIceResults",value:function(){var e=this;return new c(function(t,n){for(var r=JSON.parse(JSON.stringify(e.iceServers)),i=0;i<r.length;i++){var a=r[i];r.hasOwnProperty(a)||delete a.credential}var o={turnIpAddress:"",turnIpVersion:"",turnTransport:"",iceServers:r,ipv6Supported:!1,ipv4Supported:!1,relayTlsGathered:!1,relayTcpGathered:!1,relayUdpGathered:!1,srflxGathered:!1,relayTlsSuccess:!1,relayTcpSuccess:!1,relayUdpSuccess:!1,srflxSuccess:!1};for(var s in e.parsedIceResults)e.parsedIceResults.hasOwnProperty(s)&&(o[s]=e.parsedIceResults[s]);e.pctpc1?e.statshandler.getIceCandidates(e.pctpc1).then(function(e){for(var n=0;n<e.iceCandidatePairs.length;n++){var r=e.iceCandidatePairs[n],i="string"==typeof r.googActiveConnection?"true"===r.googActiveConnection:r.googActiveConnection,a="string"==typeof r.selected?"true"===r.selected:r.selected;if(i||a)for(var s=0;s<e.localCandidates.length;s++){var c=e.localCandidates[s],u=null;if(u=c.ip?c.ip:c.address?c.address:c.ipAddress,c.id==r.localCandidateId){var l=-1!==(o.turnIpAddress=u).indexOf(":");o.turnIpVersion=l?"ipv6":"ipv4",o.turnTransport=c.mozLocalTransport}"relay"!==c.candidateType&&"relayed"!==c.candidateType||("udp"===c.mozLocalTransport&&(o.relayUdpSuccess=!0),"tcp"===c.mozLocalTransport&&(o.relayTcpSuccess=!0),"tls"===c.mozLocalTransport&&(o.relayTlsSuccess=!0)),u&&(-1!==u.indexOf(":")?o.ipv6Supported=!0:o.ipv4Supported=!0)}}for(var d=0;d<e.localCandidates.length;d++){var f=e.localCandidates[d];"relay"!==f.candidateType&&"relayed"!==f.candidateType||("udp"===f.mozLocalTransport&&(o.relayUdpGathered=!0),"tcp"===f.mozLocalTransport&&(o.relayTcpGathered=!0),"tls"===f.mozLocalTransport&&(o.relayTlsGathered=!0)),"srflx"!==f.candidateType&&"serverreflexive"!==f.candidateType||(o.srflxGathered=!0)}for(var h=0;h<e.iceCandidatePairs.length;h++){var p=e.iceCandidatePairs[h];if("succeeded"===p.state)for(var v=0;v<e.localCandidates.length;v++){var g=e.localCandidates[v];g.id==p.localCandidateId&&("relay"!==g.candidateType&&"relayed"!==g.candidateType||("udp"===g.mozLocalTransport&&(o.relayUdpSuccess=!0),"tcp"===g.mozLocalTransport&&(o.relayTcpSuccess=!0),"tls"===g.mozLocalTransport&&(o.relayTlsSuccess=!0)),"srflx"!==g.candidateType&&"serverreflexive"!==g.candidateType||(o.srflxSuccess=!0))}}t(o)},function(e){n(e)}):n(new Error("PC not available for stats"))},function(e){reject(e)})}}]),e})();n.TurnConnection=u},{"./utility/parsedIceCandidate":9,"./utility/stats/detectbrowser":11,"./utility/stats/getstatshandler":12,bluebird:1}],7:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(35+58*Math.random());return t}Object.defineProperty(n,"__esModule",{value:!0}),n.randomAsciiString=n.MessageMaker=void 0;var a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../utility/timestamps")),s=(function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1200;r(this,e),this.message={timestamp:"",sentBytes:1e4,padding:""};var n=i(t-o.getCurrent().toString().length-JSON.stringify(this.message).length);this.message.padding=n}return a(e,[{key:"make",value:function(e){return this.message.timestamp=o.getCurrent(),this.message.sentBytes=e,JSON.stringify(this.message)}}]),e})();n.MessageMaker=s,n.randomAsciiString=i},{"../utility/timestamps":14}],8:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.OnlineCheck=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("./timestamps")),o=(function(){function e(){r(this,e),this.active=!1}return i(e,[{key:"start",value:function(){var e=this;this.active=!0,this.onlineCheck=[],window&&window.addEventListener&&"function"==typeof window.addEventListener&&(window.addEventListener("offline",function(){e.addEntry()}),window.addEventListener("online",function(){e.addEntry()}),this.addEntry())}},{key:"addEntry",value:function(){if(this.active){var e=a.getCurrent();if(navigator&&navigator.onLine){var t=navigator.onLine;this.onlineCheck.push({timestamp:e,online:t})}}}},{key:"stop",value:function(){var e=this;return this.active=!1,window&&window.removeEventListener&&"function"==typeof window.removeEventListener&&(window.removeEventListener("offline",function(){e.addEntry()}),window.removeEventListener("online",function(){e.addEntry()})),this.onlineCheck}}]),e})();n.OnlineCheck=o},{"./timestamps":14}],9:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=(function(){function e(t){r(this,e),this.iceCandidateStr=t.candidate,this.parse()}return i(e,[{key:"parse",value:function(){var e=this.iceCandidateStr.split(" ");e.length<8||(this.protocol="1"===e[1]?"rtp":"rtcp",this.transport=e[2],this.typeTransport=this.extractTypeTransport(e[3]),this.ipv6=-1!==e[4].indexOf(":"),this.ipAddress=e[4],this.port=e[5],this.type=e[7])}},{key:"extractTypeTransport",value:function(e){var t="None",n=e>>24;if("rtp"===this.protocol&&0<=n&&n<=2)switch(n){case 0:t="TLS";break;case 1:t="TCP";break;case 2:t="UDP"}return t}},{key:"getString",value:function(){return this.iceCandidateStr}},{key:"getType",value:function(){return this.type}},{key:"isHost",value:function(){return"host"===this.type.toLowerCase()}},{key:"isServerReflexive",value:function(){return"srflx"===this.type.toLowerCase()}},{key:"isPeerReflexive",value:function(){return"prflx"===this.type.toLowerCase()}},{key:"isRelay",value:function(){return"relay"===this.type.toLowerCase()||"relayed"===this.type.toLowerCase()}},{key:"getTypeTransport",value:function(){return this.typeTransport}},{key:"isTypeTransportUdp",value:function(){return"UDP"===this.typeTransport}},{key:"isTypeTransportTcp",value:function(){return"TCP"===this.typeTransport}},{key:"isTypeTransportTls",value:function(){return"TLS"===this.typeTransport}},{key:"getTransport",value:function(){return this.transport}},{key:"isUdp",value:function(){return"udp"===this.transport.toLowerCase()}},{key:"isTcp",value:function(){return"tcp"===this.transport.toLowerCase()}},{key:"getProtocol",value:function(){return this.protocol}},{key:"isRtp",value:function(){return"rtp"===this.protocol}},{key:"isRtcp",value:function(){return"rtcp"===this.protocol}},{key:"isIpv6",value:function(){return this.ipv6}},{key:"getIpAddress",value:function(){return this.ipAddress}},{key:"getPort",value:function(){return this.port}}]),e})();n.ParsedIceCandidate=a},{}],10:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.ResultsHandler=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("./timestamps")),s=e("./messageMaker"),c={success:"success",stopped:"stopped",failed:"failed"},u=(function(){function e(){r(this,e),this.start=o.getCurrent(),this.id=Math.trunc(this.start)+"-"+(0,s.randomAsciiString)(20),this.version="1.5.2",this.failures=[],this.results={},this.status=c.success,this.provider="callstats"}return a(e,[{key:"setStatusStopped",value:function(){this.status!==c.failed&&(this.status=c.stopped)}},{key:"setStatusFailed",value:function(){this.status=c.failed}},{key:"setStatusSuccess",value:function(){this.status!==c.stopped&&(this.status=c.success)}},{key:"setProvider",value:function(e){e&&(this.provider=e)}},{key:"setisRunManually",value:function(e){this.isRunManually=e}},{key:"getResults",value:function(){return{id:this.id,version:this.version,status:this.status,startTimestamp:this.start,endTimestamp:o.getCurrent(),failures:this.failures,tests:this.results,provider:this.provider,runManually:this.isRunManually}}},{key:"getFailureNumber",value:function(){return this.failures.length}},{key:"getId",value:function(){return this.id}},{key:"add",value:function(e,t){(this.results[e]=t).hasOwnProperty("forceStopped")&&1==t.forceStopped&&this.setStatusStopped()}},{key:"failure",value:function(e){"object"===(void 0===e?"undefined":i(e))&&(e=e.toString());var t={timestamp:o.getCurrent(),reason:e};this.failures.push(t)}}]),e})();n.ResultsHandler=u},{"./messageMaker":7,"./timestamps":14}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.detect=function(){var e=r.browserName.chrome,t=null,n=null,i=null,a=null,o=r.codeBaseType.chrome;if(window&&(!window.navigator||!window.navigator.userAgent||window.csioReactNative))return window&&window.csioGetOsName&&(t=window.csioGetOsName()),window&&window.csioGetOsVer&&(n=window.csioGetOsVer()),window&&window.csioReactNative&&(i="react-native"),{browserName:e,codeBase:o,os:t,osVersion:n,userAgent:i};var s=(i=navigator.userAgent).toLowerCase(),c=void 0,u=void 0;(a=navigator.appVersion)&&(c=a.toLowerCase(),u=""+parseFloat(c));var l=void 0,d="Version";-1!==(l=s.indexOf("opera"))?(e=r.browserName.opera,u=s.substring(l+6),-1!==(l=s.indexOf(d))&&(u=s.substring(l+8)),o=r.codeBaseType.chrome):-1!==(l=s.indexOf("opr"))?(e=r.browserName.opera,u=s.substring(l+4),-1!==(l=s.indexOf(d))&&(u=s.substring(l+8)),o=r.codeBaseType.chrome):-1!==(l=s.indexOf("msie"))?(e=r.browserName.msie,u=s.substring(l+5),o=r.codeBaseType.chrome):-1!==(l=s.indexOf("edge"))?(e=r.browserName.edge,u=s.substring(l+5),o=r.codeBaseType.edge):-1!==(l=s.indexOf("chrome"))?(e=r.browserName.chrome,u=s.substring(l+7),o=r.codeBaseType.chrome):-1!==(l=s.indexOf("safari"))?(e=r.browserName.safari,u=s.substring(l+7),-1!==(l=s.indexOf(d))&&(u=s.substring(l+8)),o=r.codeBaseType.chrome):-1!==(l=s.indexOf("firefox"))?(e=r.browserName.firefox,u=s.substring(l+8),o=r.codeBaseType.firefox):-1!==(l=s.indexOf("trident"))&&(e=r.browserName.msie,l=s.indexOf("rv"),u=s.substring(l+3,l+7),o=r.codeBaseType.chrome);var f=[{s:"Windows 3.11",r:/win16/},{s:"Windows 95",r:/(windows 95|win95|windows_95)/},{s:"Windows ME",r:/(win 9x 4.90|windows me)/},{s:"Windows 98",r:/(windows 98|win98)/},{s:"Windows CE",r:/windows ce/},{s:"Windows 2000",r:/(windows nt 5.0|windows 2000)/},{s:"Windows XP",r:/(windows nt 5.1|windows xp)/},{s:"Windows Server 2003",r:/windows nt 5.2/},{s:"Windows Vista",r:/windows nt 6.0/},{s:"Windows 7",r:/(windows 7|windows nt 6.1)/},{s:"Windows 8.1",r:/(windows 8.1|windows nt 6.3)/},{s:"Windows 8",r:/(windows 8|windows nt 6.2)/},{s:"Windows 10",r:/(windows 10|windows nt 10.0)/},{s:"Windows NT 4.0",r:/(windows nt 4.0|winnt4.0|winnt|windows nt)/},{s:"Windows ME",r:/windows me/},{s:"Android",r:/android/},{s:"Open BSD",r:/openbsd/},{s:"Sun OS",r:/sunos/},{s:"Linux",r:/(linux|x11)/},{s:"iOS",r:/(iphone|ipad|ipod)/},{s:"Mac OS X",r:/mac os x/},{s:"Mac OS",r:/(macppc|macintel|mac_powerpc|macintosh)/},{s:"QNX",r:/qnx/},{s:"UNIX",r:/unix/},{s:"BeOS",r:/beos/},{s:"OS/2",r:/os\/2/},{s:"Search Bot",r:/(nuhk|googlebot|yammybot|openbot|slurp|msnbot|ask jeeves\/teoma|ia_archiver)/}],h=void 0,p=void 0;for(h in f)if(f.hasOwnProperty(h)&&(p=f[h]).r.test(s)){t=p.s;break}switch(t&&/Windows/.test(t)&&(n=/Windows (.*)/.exec(t)[1],t=r.osName.windows),t){case r.osName.mac:if(!(n=/mac os x (1[\.\_\d]+)/.exec(s)))break;n=n[1];break;case r.osName.android:if(!(n=/android ([\.\_\d]+)/.exec(s)))break;n=n[1];break;case r.osName.ios:if(!c)break;if(!(n=/os (\d+)_(\d+)_?(\d+)?/.exec(c)))break;n=n[1]+"."+n[2]+"."+(0|n[3])}return{browserName:e,browserVersion:u.toString(),os:t,osVersion:n,codeBase:o,userAgent:i}};var r=n.Constants={codeBaseType:{chrome:"Chrome",firefox:"Firefox",edge:"Edge",plugin:"Plugin"},browserName:{chrome:"Chrome",firefox:"Firefox",edge:"Edge",msie:"Microsoft Internet Explorer",safari:"Safari"},osName:{windows:"Windows",mac:"Mac OS X",android:"Android",ios:"iOS"}}},{}],12:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.GetStatsHandler=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=e("./detectbrowser"),o=e("./statsadapter"),s=e("bluebird"),c=(function(){function e(t){r(this,e),this.codeBase=t.codeBase,this.browserName=t.browserName,this.adapter=new o.StatsAdapter(this.codeBase,this.browserName),this.isPromiseBased=!0}return i(e,[{key:"getIceCandidates",value:function(e){var t=this;return new s(function(n,r){t.csioGetStats(t.iceCandidatesHandler.bind(t),e,function(e){n(e)})})}},{key:"iceCandidatesHandler",value:function(e,t){t(this.adapter.getIceCandidates(e))}},{key:"csioGetStats",value:function(e,t,n){var r=a.Constants.codeBaseType.firefox,i=a.Constants.codeBaseType.chrome,o=a.Constants.codeBaseType.edge,s=a.Constants.browserName.safari;t&&(this.codeBase===r?this.getStatsFirefox(e,t,n):this.browserName===s?this.getStatsSafari(e,t,n):this.codeBase===i?this.getStatsChrome(e,t,n):this.codeBase===o&&this.getStatsEdge(e,t,n))}},{key:"getStatsFirefox",value:function(e,t,n){var r=this;if(r.isPromiseBased)try{t.getStats().then(function(t){e(t,n)}).catch(function(i){r.isPromiseBased=!1,t.getStats(null,function(t){e(t,n)},function(){})})}catch(i){r.isPromiseBased=!1,t.getStats(null,function(t){e(t,n)},function(){})}else t.getStats(null,function(t){e(t,n)},function(){})}},{key:"getStatsChrome",value:function(e,t,n){var r=this;if(window&&window.csioReactNative)t.getStats(null,function(t){e(t,n)},function(e){});else if(r.isPromiseBased)try{t.getStats().then(function(t){e(t,n)}).catch(function(i){r.isPromiseBased=!1,t.getStats(function(t){e(t,n)})})}catch(i){r.isPromiseBased=!1,t.getStats(function(t){e(t,n)})}else t.getStats(function(t){e(t,n)})}},{key:"getStatsEdge",value:function(e,t,n){t.getStats().then(function(t){e(t,n)}).catch(function(e){})}},{key:"getStatsSafari",value:function(e,t,n){t.getStats().then(function(t){e(t,n)}).catch(function(e){})}}]),e})();n.GetStatsHandler=c},{"./detectbrowser":11,"./statsadapter":13,bluebird:1}],13:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.StatsAdapter=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=e("./detectbrowser"),o=(function(){function e(t,n){r(this,e),this.codeBase=t,this.browser=n}return i(e,[{key:"getIceCandidates",value:function(e){if(!e)return{localCandidates:[],remoteCandidates:[],iceCandidatePairs:[]};var t=this.extractRawStats(e);return this.processRawStatsForIceInfo(t)}},{key:"extractRawStats",value:function(e){var t=[],n=void 0,r=a.Constants.codeBaseType.firefox,i=a.Constants.codeBaseType.chrome,o=a.Constants.browserName.safari;if(this.codeBase===r&&this.browser!==o)e.forEach(function(e){t.push(e)});else if(this.codeBase===i&&this.browser!==o)e&&e.result?t=e.result():e&&e.forEach&&(t=[],e.forEach(function(e){t.push(e)}));else for(n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}},{key:"processRawStatsForIceInfo",value:function(e){var t=[],n=[],r=[],i=void 0;if(!e)return{localCandidates:t,remoteCandidates:n,iceCandidatePairs:r};for(var a=0;a<e.length;++a){var o=this.getParsedStats(e[a]),s=this.statsClassifier(o);if(s.candidatePair)r.push(s.candidatePair);else if(s.transportStats){if("transport"===s.transportStats.type){i=s.transportStats.selectedCandidatePairId;continue}r.push(s.transportStats)}else if(s.localCandidate){var c=s.localCandidate;if("relay"==c.candidateType||"relayed"==c.candidateType){if(!c.mozLocalTransport){var u=c.priority>>24;c.mozLocalTransport=this.formatRelayType(u)}c.mozLocalTransport=c.mozLocalTransport.toLowerCase()}t.push(c)}else s.remoteCandidate&&n.push(s.remoteCandidate)}if(i)for(var l=0;l<r.length;++l)r[l].id===i&&(r[l].googActiveConnection="true");return{localCandidates:t,remoteCandidates:n,iceCandidatePairs:r}}},{key:"getParsedStats",value:function(e){var t={};if(e.timestamp instanceof Date&&(t.timestamp=e.timestamp.getTime().toString()),e.type&&(t.type=e.type),e.names)for(var n=e.names(),r=0;r<n.length;++r)t[n[r]]=e.stat(n[r]);else s(t,e);if(t.values){for(var i=0;i<t.values.length;i++){var a=t.values[i];s(t,a)}delete t.values}return t}},{key:"statsClassifier",value:function(e){var t={},n=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;i++){var a=n[i];if(e.type===a)return!0}return!1},r=n("inbound-rtp","inboundrtp"),i="true"===e.isRemote||!0===e.isRemote;return r||n("outbound-rtp","outboundrtp")?(t.tracks={},t.tracks.data=e,t.tracks.ssrc=e.ssrc,t.tracks.streamType=r?"inbound":"outbound",t.tracks.reportType="local",void 0!==e.isRemote&&(t.tracks.reportType=i?"remote":"local")):n("candidatepair")&&e.selected?t.transportStats=e:n("localcandidate","local-candidate")?t.localCandidate=e:n("remotecandidate","remote-candidate")?t.remoteCandidate=e:n("transport","googCandidatePair")?t.transportStats=e:n("VideoBwe")?t.bwe=e:n("track")?t.trackStats=e:n("candidate-pair")?t.candidatePair=e:n("codec")?t.codec=e:n("ssrc")&&(t.tracks={},t.tracks.data=e,t.tracks.ssrc=e.ssrc,t.tracks.reportType="local",t.tracks.streamType=e.bytesSent?"outbound":"inbound"),t}},{key:"formatRelayType",value:function(e){var t="none";switch(e){case 0:t="tls";break;case 1:t="tcp";break;case 2:t="udp"}return t}}]),e})();n.StatsAdapter=o},{"./detectbrowser":11}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getCurrent=function(){return window&&window.performance&&window.performance.now&&window.performance.timing&&window.performance.timing.navigationStart?window.performance.now()+window.performance.timing.navigationStart:Date.now()}},{}],15:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(d===setTimeout)return setTimeout(e,0);if((d===r||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){g&&p&&(g=!1,p.length?v=p.concat(v):y=-1,v.length&&c())}function c(){if(!g){var e=a(s);g=!0;for(var t=v.length;t;){for(p=v,v=[];++y<t;)p&&p[y].run();y=-1,t=v.length}p=null,g=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var d,f,h=t.exports={};!(function(){try{d="function"==typeof setTimeout?setTimeout:r}catch(e){d=r}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(e){f=i}})();var p,v=[],g=!1,y=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];v.push(new u(e,t)),1!==v.length||g||a(c)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.prependListener=l,h.prependOnceListener=l,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],16:[function(e,t,n){(function(t,r){function i(e,t){this._id=e,this._clearFn=t}var a=e("process/browser.js").nextTick,o=Function.prototype.apply,s=Array.prototype.slice,c={},u=0;n.setTimeout=function(){return new i(o.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new i(o.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n.setImmediate="function"==typeof t?t:function(e){var t=u++,r=!(arguments.length<2)&&s.call(arguments,1);return c[t]=!0,a(function(){c[t]&&(r?e.apply(null,r):e.call(null),n.clearImmediate(t))}),t},n.clearImmediate="function"==typeof r?r:function(e){delete c[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":15,timers:16}],17:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=(function(){function e(){var t=this;r(this,e),this.batteryManager=null,"function"==typeof navigator.getBattery&&navigator.getBattery().then(function(e){t.batteryManager=e})}return i(e,[{key:"getLevel",value:function(){return this.batteryManager?this.batteryManager.level:-1}},{key:"getCharging",value:function(){return this.batteryManager?this.batteryManager.charging:null}}]),e})();n.Battery=a},{}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.detect=function(){var e=r.browserName.chrome,t=null,n=null,i=null,a=null,o=r.codeBaseType.chrome;if(!window.navigator.userAgent||window.csioReactNative)return window&&window.csioGetOsName&&(t=window.csioGetOsName()),window&&window.csioGetOsVer&&(n=window.csioGetOsVer()),window&&window.csioReactNative&&(i="react-native"),{browserName:e,codeBase:o,os:t,osVersion:n,userAgent:i,browserVersion:null};var s=(i=navigator.userAgent).toLowerCase(),c=void 0,u=void 0;(a=navigator.appVersion)&&(c=a.toLowerCase(),u=""+parseFloat(c));var l=void 0;-1!==(l=s.indexOf("opera"))?(e=r.browserName.opera,u=s.substring(l+6),-1!==(l=s.indexOf("Version"))&&(u=s.substring(l+8)),o=r.codeBaseType.chrome):-1!==(l=s.indexOf("opr"))?(e=r.browserName.opera,u=s.substring(l+4),-1!==(l=s.indexOf("Version"))&&(u=s.substring(l+8)),o=r.codeBaseType.chrome):-1!==(l=s.indexOf("msie"))?(e=r.browserName.msie,u=s.substring(l+5),o=r.codeBaseType.chrome):-1!==(l=s.indexOf("edge"))?(e=r.browserName.edge,u=s.substring(l+5),o=r.codeBaseType.edge):-1!==(l=s.indexOf("chrome"))?(e=r.browserName.chrome,u=s.substring(l+7),o=r.codeBaseType.chrome):-1!==(l=s.indexOf("safari"))?(e=r.browserName.safari,u=s.substring(l+7),-1!==(l=s.indexOf("Version"))&&(u=s.substring(l+8)),o=r.codeBaseType.chrome):-1!==(l=s.indexOf("firefox"))?(e=r.browserName.firefox,u=s.substring(l+8),o=r.codeBaseType.firefox):-1!==(l=s.indexOf("trident"))&&(e=r.browserName.msie,l=s.indexOf("rv"),u=s.substring(l+3,l+7),o=r.codeBaseType.chrome);var d=[{s:"Windows 3.11",r:/win16/},{s:"Windows 95",r:/(windows 95|win95|windows_95)/},{s:"Windows ME",r:/(win 9x 4.90|windows me)/},{s:"Windows 98",r:/(windows 98|win98)/},{s:"Windows CE",r:/windows ce/},{s:"Windows 2000",r:/(windows nt 5.0|windows 2000)/},{s:"Windows XP",r:/(windows nt 5.1|windows xp)/},{s:"Windows Server 2003",r:/windows nt 5.2/},{s:"Windows Vista",r:/windows nt 6.0/},{s:"Windows 7",r:/(windows 7|windows nt 6.1)/},{s:"Windows 8.1",r:/(windows 8.1|windows nt 6.3)/},{s:"Windows 8",r:/(windows 8|windows nt 6.2)/},{s:"Windows 10",r:/(windows 10|windows nt 10.0)/},{s:"Windows NT 4.0",r:/(windows nt 4.0|winnt4.0|winnt|windows nt)/},{s:"Windows ME",r:/windows me/},{s:"Android",r:/android/},{s:"Open BSD",r:/openbsd/},{s:"Sun OS",r:/sunos/},{s:"Linux",r:/(linux|x11)/},{s:"iOS",r:/(iphone|ipad|ipod)/},{s:"Mac OS X",r:/mac os x/},{s:"Mac OS",r:/(macppc|macintel|mac_powerpc|macintosh)/},{s:"QNX",r:/qnx/},{s:"UNIX",r:/unix/},{s:"BeOS",r:/beos/},{s:"OS/2",r:/os\/2/},{s:"Search Bot",r:/(nuhk|googlebot|yammybot|openbot|slurp|msnbot|ask jeeves\/teoma|ia_archiver)/}],f=void 0,h=void 0;for(f in d)if(d.hasOwnProperty(f)&&(h=d[f]).r.test(s)){t=h.s;break}switch(t&&/Windows/.test(t)&&(n=/Windows (.*)/.exec(t)[1],t=r.osName.windows),t){case r.osName.mac:if(!(n=/mac os x (1[\.\_\d]+)/.exec(s)))break;n=n[1];break;case r.osName.android:if(!(n=/android ([\.\_\d]+)/.exec(s)))break;n=n[1];break;case r.osName.ios:if(!c)break;if(!(n=/os (\d+)_(\d+)_?(\d+)?/.exec(c)))break;n=n[1]+"."+n[2]+"."+(0|n[3])}return{browserName:e,browserVersion:u.toString(),os:t,osVersion:n,codeBase:o,userAgent:i}};var r=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../config/constants"))},{"../config/constants":36}],19:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Devices=void 0;var a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=r(e("../config/constants")),s=e("../utility/registry"),c=r(e("../utility/csiologger")),u=r(e("../utility/utils")),l=(function(){function e(t,n){i(this,e),this.conferenceId=t,this.pc=n,this.devices=null,this.emb=s.Registry.getEventMessageBuilder()}return a(e,[{key:"collectConnected",value:function(){var e=this;if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices){var t=this;navigator.mediaDevices.enumerateDevices().then(function(n){var r=u.normalizeMediaDeviceList(n);t.sendConnected(r),setTimeout(e.collectConnected.bind(t),1e4)}).catch(function(n){setTimeout(e.collectConnected.bind(t),1e4)})}}},{key:"sendConnected",value:function(e){this.devices&&this.compare(e)||(this.devices=e,this.send())}},{key:"compare",value:function(e){return self.devices.sort().toString()===e.sort().toString()}},{key:"send",value:function(){var e={mediaDeviceList:this.devices};c.log("sending connectedDevice",o.internalFabricEvent.connectedDeviceList,e),this.emb.make(o.internalFabricEvent.connectedDeviceList,this.conferenceId,this.pc,e)}}]),e})();n.Devices=l},{"../config/constants":36,"../utility/csiologger":104,"../utility/registry":112,"../utility/utils":118}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.store=function(e,t){if(t)try{window&&window.localStorage&&window.localStorage.setItem(e,t)}catch(e){return}},n.get=function(e){try{if(window&&window.localStorage)return window.localStorage.getItem(e)}catch(e){return null}return null},n.remove=function(e){try{window&&window.localStorage&&window.localStorage.removeItem(e)}catch(e){return}}},{}],21:[function(e,t,n){"use strict";function r(e,t){if(t)try{window&&window.sessionStorage&&window.sessionStorage.setItem(e,t)}catch(e){return}}function i(e){try{if(window&&window.sessionStorage)return window.sessionStorage.getItem(e)}catch(e){return null}return null}Object.defineProperty(n,"__esModule",{value:!0}),n.store=r,n.get=i,n.remove=function(e){try{window&&window.sessionStorage&&window.sessionStorage.removeItem(e)}catch(e){return}},n.storeUcId=function(e,t){if(e){var n=JSON.parse(i("csio_ucid_data"));n||(n={}),n[e]||(n[e]={}),n[e].ucID=t,r("csio_ucid_data",JSON.stringify(n))}},n.getUcId=function(e){if(!e)return null;var t=JSON.parse(i("csio_ucid_data"));return t&&t[e]?t[e].ucID:null}},{}],22:[function(t,n,r){(function(e){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){var n={};return n.status=e,t&&(n.message=t),n}function o(e,t){return e+": "+t+" "+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"")}function s(){var e=null,t=v.Registry.getEndpoint().getBrowserName();return"Firefox"===t?e=mozRTCPeerConnection:"Chrome"===t||"Opera"===t?e=webkitRTCPeerConnection:"Safari"===t?g.log("Browser type Safari"):"Edge"===t&&(e=window.RTCPeerConnection),e}function c(e){if(null===e)return!1;var t=v.Registry.getEndpoint().getCodeBase();if(t===d.codeBaseType.firefox)return"undefined"!=typeof mozRTCPeerConnection&&e instanceof mozRTCPeerConnection||"undefined"!=typeof RTCPeerConnection&&e instanceof RTCPeerConnection;if(t===d.codeBaseType.edge||"function"==typeof e)return!0;var n=s();return null!==n&&e instanceof n||void 0!==e.createOffer}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),d=n(t("./config/constants")),f=n(t("./config/settings")),h=t("./config/callstatserrors"),p=t("./fsm/mainfsm"),v=t("./utility/registry"),g=n(t("./utility/csiologger")),y=n(t("./utility/onerroreventlistner")),m=n(t("./utility/utils")),b=t("./services/authenticator");y.setErrorEventListener(),m.assignPollyfill(),m.isIntegerPollyfill();var k=null,S=(function(){function e(){r(this,e),k=new p.MainFSM}return l(e,[{key:"initialize",value:function(e,t,n,r,i,s){if(!e||!n||!t){var c=o("initialize",h.csErrorStrings.argumentError);return g.error(c),a(d.callstatsAPIReturnStatus.failure,c)}if(r&&"function"!=typeof r){var u=o("initialize",h.csErrorStrings.argumentError);g.warn(u),r=null}if(i&&"function"!=typeof i){var l=o("initialize",h.csErrorStrings.argumentError);g.warn(l),i=null}if("function"!=typeof t&&!(window.crypto&&(window.crypto.subtle||window.crypto.webkitSubtle)||window.msCrypto&&window.msCrypto.subtle||window.csioReactNative)){var f=o("initialize",h.csErrorStrings.cryptoError);return g.error(f),r&&r(h.csError.tokenGenerationError,h.csErrorStrings.cryptoError),a(d.callstatsAPIReturnStatus.failure,f)}try{k.fire(p.MainEvents.onInitialize,e,n,t,r,i,s),k.run()}catch(e){v.Registry.getGenericEventHandler().sendEvent(d.logEvents.error,{msg:"initialize: Error",error:e.message+":"+e.stack}),g.error("initialize: Error",e)}return a(d.callstatsAPIReturnStatus.success)}},{key:"addNewFabric",value:function(e,t,n,r,i,s){var u=null,l=d.endpointType.peer,f=d.transmissionDirection.sendrecv;if(void 0===t){var y=o("addNewFabric",h.csErrorStrings.argumentError);return g.error(y),a(d.callstatsAPIReturnStatus.failure,y)}if(void 0===r){var m=o("addNewFabric",h.csErrorStrings.argumentError);return g.error(m),a(d.callstatsAPIReturnStatus.failure,m)}if(r||(r=d.tmpConferenceId),!e||!n){var b=o("addNewFabric",h.csErrorStrings.argumentError);return g.error(b),a(d.callstatsAPIReturnStatus.failure,b)}if(s&&"function"==typeof s&&(u=s),i&&"function"==typeof i&&(u=i),i&&"function"!=typeof i){if(i.remoteEndpointType){if(!d.endpointType.hasOwnProperty(i.remoteEndpointType)){var S=o("addNewFabric",h.csErrorStrings.invalidEndPointType,i.remoteEndpointType);return g.error(S),a(d.callstatsAPIReturnStatus.failure,S)}l=i.remoteEndpointType}if(i.fabricTransmissionDirection){if(!d.transmissionDirection.hasOwnProperty(i.fabricTransmissionDirection)){var w=o("addNewFabric",h.csErrorStrings.invalidTransmissionDirection,i.fabricTransmissionDirection);return g.error(w),a(d.callstatsAPIReturnStatus.failure,w)}f=i.fabricTransmissionDirection}}if(!d.fabricUsage.hasOwnProperty(n)||n instanceof Function){var C=o("addNewFabric",h.csErrorStrings.fabricUsageInvalid,n);return g.error(C),a(d.callstatsAPIReturnStatus.failure,C)}if(!c(e)){var T=o("addNewFabric",h.csErrorStrings.pcInvalid);return g.error(T),a(d.callstatsAPIReturnStatus.failure,T)}var _=v.Registry.getConferenceManager().get(r);if(_&&_.getPeerConnectionManager().getPcHandler(e))return a(d.callstatsAPIReturnStatus.success);if(!v.Registry.getCredentials().getAppId()||!v.Registry.getCredentials().getUserId()){var P=o("addNewFabric",h.csErrorStrings.notInitialized);return g.error(P),a(d.callstatsAPIReturnStatus.failure,P)}try{k.fire(p.MainEvents.onAddNewFabric,e,t,n,r,l,f,u),k.run()}catch(e){v.Registry.getGenericEventHandler().sendEvent(d.logEvents.error,{msg:"addNewFabric: Error",error:e.message+":"+e.stack}),g.error("addNewFabric: Error",e)}return a(d.callstatsAPIReturnStatus.success)}},{key:"sendFabricEvent",value:function(e,t,n,r){if(g.log("sendFabricEvent ",t),n||(n=d.tmpConferenceId),!e||!t){var i=o("sendFabricEvent",h.csErrorStrings.argumentError);return g.error(i),a(d.callstatsAPIReturnStatus.failure,i)}if(t===d.fabricEvent.fabricSetupFailed){var s=o("sendFabricEvent",h.csErrorStrings.fabricEventUnsupported,t);return g.error(s),a(d.callstatsAPIReturnStatus.failure,s)}if(!d.fabricEvent.hasOwnProperty(t)&&!d.internalFabricEvent.hasOwnProperty(t)){var c=o("sendFabricEvent",h.csErrorStrings.fabricEventInvalid,t);return g.error(c),a(d.callstatsAPIReturnStatus.failure,c)}if(!(t!==d.fabricEvent.activeDeviceList||r&&r.deviceList)){var u=o("sendFabricEvent ",h.csErrorStrings.argumentError);return g.error(u),a(d.callstatsAPIReturnStatus.failure,u)}var l=v.Registry.getConferenceManager().get(n);if(!v.Registry.getCredentials().getAppId()||!v.Registry.getCredentials().getUserId()||!l){var f=o("sendFabricEvent ",h.csErrorStrings.notInitialized);return g.error(f),a(d.callstatsAPIReturnStatus.failure,f)}if(!l.getPeerConnectionManager().getPcHandler(e)){var y=o("sendFabricEvent ",h.csErrorStrings.pcInvalid);return g.error(y),a(d.callstatsAPIReturnStatus.failure,y)}try{k.fire(p.MainEvents.onSendFabricEvent,e,t,n,r),k.run()}catch(e){v.Registry.getGenericEventHandler().sendEvent(d.logEvents.error,{msg:"sendFabricEvent: Error",error:e.message+":"+e.stack}),g.error("sendFabricEvent: Error",e)}return a(d.callstatsAPIReturnStatus.success)}},{key:"sendCustomEvent",value:function(e,t,n){if(!t||!n){console.log("sendCustomEvent invalid conferenceId or eventData");var r=o("sendCustomEvent",h.csErrorStrings.argumentError);return g.error(r),a(d.callstatsAPIReturnStatus.failure,r)}if("object"!==(void 0===n?"undefined":u(n))){console.log("sendCustomEvent invalid eventList");var i=o("sendCustomEvent",h.csErrorStrings.argumentError);return g.error(i),a(d.callstatsAPIReturnStatus.failure,i)}if(0===n.length){console.log("sendCustomEvent invalid eventList");var s=o("sendCustomEvent",h.csErrorStrings.argumentError);return g.error(s),a(d.callstatsAPIReturnStatus.failure,s)}try{k.fire(p.MainEvents.onSendCustomEvent,e,t,n),k.run()}catch(e){v.Registry.getGenericEventHandler().sendEvent(d.logEvents.error,{msg:"sendCustomEvent: Error",error:e.message+":"+e.stack}),g.error("sendCustomEvent: Error",e)}return a(d.callstatsAPIReturnStatus.success)}},{key:"sendCustomStats",value:function(e,t,n){if(!t||!n){console.log("sendCustomStats invalid conferenceId or stats");var r=o("sendCustomStats",h.csErrorStrings.argumentError);return g.error(r),a(d.callstatsAPIReturnStatus.failure,r)}try{k.fire(p.MainEvents.onSendCustomStats,e,t,n),k.run()}catch(e){v.Registry.getGenericEventHandler().sendEvent(d.logEvents.error,{msg:"sendCustomStats: Error",error:e.message+":"+e.stack}),g.error("sendCustomStats: Error",e)}return a(d.callstatsAPIReturnStatus.success)}},{key:"sendCallDetails",value:function(e,t,n){if(g.log("sendCallDetails "),t||(t=d.tmpConferenceId),!e||!n){console.log("sendCallDetails invalid pc eventData");var r=o("sendCallDetails",h.csErrorStrings.argumentError);return g.error(r),a(d.callstatsAPIReturnStatus.failure,r)}if(n.callType||(n.callType=d.callType.unknown),!n.role){console.log("sendCallDetails invalid pc eventData");var i=o("sendCallDetails",h.csErrorStrings.argumentError);return g.error(i),a(d.callstatsAPIReturnStatus.failure,i)}if(n.callType&&!d.callType.hasOwnProperty(n.callType)){console.log("sendCallDetails invalid eventData",n);var s=o("sendCallDetails",h.csErrorStrings.argumentError);return g.error(s),a(d.callstatsAPIReturnStatus.failure,s)}if(n.role&&!d.roles.hasOwnProperty(n.role)){console.log("sendCallDetails invalid eventData",n);var c=o("sendCallDetails",h.csErrorStrings.argumentError);return g.error(c),a(d.callstatsAPIReturnStatus.failure,c)}try{k.fire(p.MainEvents.onSendCallDetails,e,t,n),k.run()}catch(e){v.Registry.getGenericEventHandler().sendEvent(d.logEvents.error,{msg:"sendCallDetails: Error",error:e.message+":"+e.stack}),g.error("sendCallDetails: Error",e)}return a(d.callstatsAPIReturnStatus.success)}},{key:"sendUserFeedback",value:function(e,t,n){if(!t||!e){var r=o("sendUserFeedback",h.csErrorStrings.argumentError);return g.error(r),n&&"function"==typeof n&&n(d.callstatsAPIReturnStatus.failure,r),a(d.callstatsAPIReturnStatus.failure,r)}if("object"!==(void 0===t?"undefined":u(t))){var i=o("sendUserFeedback",h.csErrorStrings.argumentError);return g.error(i),n&&"function"==typeof n&&n(d.callstatsAPIReturnStatus.failure,i),a(d.callstatsAPIReturnStatus.failure,i)}if(0===Object.keys(t).length){var s=o("sendUserFeedback",h.csErrorStrings.argumentError);return g.error(s),n&&"function"==typeof n&&n(d.callstatsAPIReturnStatus.failure,s),a(d.callstatsAPIReturnStatus.failure,s)}try{k.fire(p.MainEvents.onSendUserFeedback,e,t,n),k.run()}catch(e){v.Registry.getGenericEventHandler().sendEvent(d.logEvents.error,{msg:"sendUserFeedback: Error",error:e.message+":"+e.stack}),g.error("sendUserFeedback: Error",e)}return n&&"function"==typeof n&&n(d.callstatsAPIReturnStatus.success,"userFeedback Event sent successfully"),a(d.callstatsAPIReturnStatus.success)}},{key:"associateMstWithUserID",value:function(e,t,n,r,i,s){if(n||(n=d.tmpConferenceId),!e||!r||!i){var u=o("associateMstWithUserID",h.csErrorStrings.argumentError);return g.error(u),a(d.callstatsAPIReturnStatus.failure,u)}if(!c(e)){var l=o("associateMstWithUserID",h.csErrorStrings.pcInvalid);return g.error(l),a(d.callstatsAPIReturnStatus.failure,l)}var f=v.Registry.getConferenceManager().get(n);if(!f){var y=o("associateMstWithUserID",h.csErrorStrings.confereneDoesNotExist);return g.error(y),a(d.callstatsAPIReturnStatus.failure,y)}if(!f.getPeerConnectionManager().getPcHandler(e)){var m=o("associateMstWithUserID",h.csErrorStrings.pcInvalid);return g.error(m),a(d.callstatsAPIReturnStatus.failure,m)}s&&"string"!=typeof s&&(g.error("associateMstWithUserID: Invalid videoTag"),s=null);try{k.fire(p.MainEvents.onAssociateMstWithUserID,e,t,n,r,i,s),k.run()}catch(e){v.Registry.getGenericEventHandler().sendEvent(d.logEvents.error,{msg:"associateMstWithUserID: Error",error:e.message+":"+e.stack}),g.error("associateMstWithUserID: Error",e)}return a(d.callstatsAPIReturnStatus.success)}},{key:"reportError",value:function(e,t,n,r,i,s){if(t||(t=d.tmpConferenceId),void 0===e||!n){var c=o("reportError",h.csErrorStrings.argumentError);return g.error(c),a(d.callstatsAPIReturnStatus.failure,c)}if(!d.webRTCFunctions.hasOwnProperty(n)){var u=o("reportError",h.csErrorStrings.webRTCFunctionsInvalid,n);return g.error(u),a(d.callstatsAPIReturnStatus.failure,u)}if(void 0===r&&g.warn("reportError: Missing DOM error parameter"),!v.Registry.getCredentials().getAppId()||!v.Registry.getCredentials().getUserId()){var l=o("reportError",h.csErrorStrings.notInitialized);return g.error(l),a(d.callstatsAPIReturnStatus.failure,l)}try{k.fire(p.MainEvents.onReportError,e,t,n,r,i,s),k.run()}catch(e){v.Registry.getGenericEventHandler().sendEvent(d.logEvents.error,{msg:"reportError: Error",error:e.message+":"+e.stack}),g.error("reportError: Error",e)}return a(d.callstatsAPIReturnStatus.success)}},{key:"setProxyConfig",value:function(e){if(window&&!window.csioproxy){var t=o("setProxyConfig",h.csErrorStrings.setProxyConfigInvokeError);return g.error(t),a(d.callstatsAPIReturnStatus.failure,t)}if(!e){var n=o("setProxyConfig",h.csErrorStrings.argumentError);return g.error(n),a(d.callstatsAPIReturnStatus.failure,n)}try{k.fire(p.MainEvents.onSetProxyConfig,e),k.run()}catch(e){v.Registry.getGenericEventHandler().sendEvent(d.logEvents.error,{msg:"setProxyConfig: Error",error:e.message+":"+e.stack}),g.error("setProxyConfig: Error",e)}return a(d.callstatsAPIReturnStatus.success)}},{key:"attachWifiStatsHandler",value:function(e){if(!e){var t=o("attachWifiStatsHandler",h.csErrorStrings.argumentError);return g.error(t),a(d.callstatsAPIReturnStatus.failure,t)}if("function"!=typeof e){var n=o("attachWifiStatsHandler",h.csErrorStrings.argumentError);return g.error(n),a(d.callstatsAPIReturnStatus.failure,n)}try{k.fire(p.MainEvents.onAttachWifiStatsHandler,e),k.run()}catch(e){v.Registry.getGenericEventHandler().sendEvent(d.logEvents.error,{msg:"attachWifiStatsHandler: Error",error:e.message+":"+e.stack}),g.error("attachWifiStatsHandler: Error",e)}return a(d.callstatsAPIReturnStatus.success)}},{key:"setIdentifiers",value:function(e,t){if(!e){var n=o("setIdentifiers",h.csErrorStrings.argumentError);return g.error(n),a(d.callstatsAPIReturnStatus.failure,n)}try{k.fire(p.MainEvents.onSetIdentifiers,e,t),k.run()}catch(e){v.Registry.getGenericEventHandler().sendEvent(d.logEvents.error,{msg:"setIdentifiers: Error",error:e.message+":"+e.stack}),g.error("setIdentifiers: Error",e)}return a(d.callstatsAPIReturnStatus.success)}},{key:"getTurnCredentials",value:function(e,t){return e&&t?new Promise(function(n,r){var i=new b.Authenticator;i.setGenerateTurnCredentials(!0),i.initiate(e,t,"turnUser").then(function(){i.getTaasEnabled()?n(i.getTurnServers()):r(new Error("getTurnCredentials: Invalid API Access"))},function(e){r(e)})}):new Promise(function(e,t){t(new Error("getTurnCredentials: Empty credentials"))})}},{key:"makePrecallTest",value:function(e,t){if(!v.Registry.getAuthenticator().getToken()||!v.Registry.getCredentials().getAppId()){var n=o("makePrecallTest",h.csErrorStrings.notInitialized);return g.error(n),a(d.callstatsAPIReturnStatus.failure,n)}if(!v.Registry.getAuthenticator().getIceServers()){var r=o("makePrecallTest",h.csErrorStrings.notInitialized);return g.error(r),a(d.callstatsAPIReturnStatus.failure,r)}if(!v.Registry.getCredentials().getCollectSDP()){var i=o("makePrecallTest",h.csErrorStrings.apiaccesserror);return g.error(i),a(d.callstatsAPIReturnStatus.failure,i)}try{k.fire(p.MainEvents.onMakePrecallTest,e,t),k.run()}catch(e){v.Registry.getGenericEventHandler().sendEvent(d.logEvents.error,{msg:"makePrecallTest: Error",error:e.message+":"+e.stack}),g.error("makePrecallTest: Error",e)}return a(d.callstatsAPIReturnStatus.success)}},{key:"stopPrecallTests",value:function(){v.Registry.getPCTRunnerService().stop()}},{key:"startPrecallTests",value:function(e,t){if(!v.Registry.getAuthenticator().getToken()||!v.Registry.getCredentials().getAppId()){var n=o("startPrecallTests",h.csErrorStrings.notInitialized);return g.error(n),a(d.callstatsAPIReturnStatus.failure,n)}if(!v.Registry.getAuthenticator().getIceServers()){var r=o("startPrecallTests",h.csErrorStrings.notInitialized);return g.error(r),a(d.callstatsAPIReturnStatus.failure,r)}if(!v.Registry.getCredentials().getCollectSDP()){var i=o("startPrecallTests",h.csErrorStrings.apiaccesserror);return g.error(i),a(d.callstatsAPIReturnStatus.failure,i)}if(!e){var s=o("startPrecallTests",h.csErrorStrings.argumentError);return g.error(s),a(d.callstatsAPIReturnStatus.failure,s)}try{t=(t=t||6e4)<3e4?3e4:t,k.fire(p.MainEvents.onStartPrecallTests,e,t),k.run()}catch(e){v.Registry.getGenericEventHandler().sendEvent(d.logEvents.error,{msg:"startPrecallTests: Error",error:e.message+":"+e.stack}),g.error("startPrecallTests: Error",e)}return a(d.callstatsAPIReturnStatus.success)}},{key:"on",value:function(e,t){if(!t||"function"!=typeof t){var n=o("on",h.csErrorStrings.argumentError);return g.error(n),a(d.callstatsAPIReturnStatus.failure,n)}if(!e||!d.callbackFunctions.hasOwnProperty(e)){var r=o("on",h.csErrorStrings.argumentError);return g.error(r),a(d.callstatsAPIReturnStatus.failure,r)}try{k.fire(p.MainEvents.onOn,e,t),k.run()}catch(e){v.Registry.getGenericEventHandler().sendEvent(d.logEvents.error,{msg:"on: Error",error:e.message+":"+e.stack}),g.error("on: Error",e)}return a(d.callstatsAPIReturnStatus.success)}},{key:"fabricUsage",get:function(){return this.constructor.fabricUsage}},{key:"fabricEvent",get:function(){return this.constructor.fabricEvent}},{key:"webRTCFunctions",get:function(){return this.constructor.webRTCFunctions}},{key:"csError",get:function(){return this.constructor.csError}},{key:"qualityRating",get:function(){return this.constructor.qualityRating}},{key:"callStatsAPIReturnStatus",get:function(){return this.constructor.callStatsAPIReturnStatus}},{key:"version",get:function(){return this.constructor.version}},{key:"userIDType",get:function(){return this.constructor.userIDType}},{key:"transmissionDirection",get:function(){return this.constructor.transmissionDirection}},{key:"endpointType",get:function(){return this.constructor.endpointType}},{key:"callType",get:function(){return this.constructor.callType}},{key:"roles",get:function(){return this.constructor.roles}}]),e})();S.fabricUsage=d.fabricUsage,S.fabricEvent=d.fabricEvent,S.webRTCFunctions=d.webRTCFunctions,S.csError=h.csError,S.qualityRating=d.qualityRating,S.callStatsAPIReturnStatus=d.callstatsAPIReturnStatus,S.version=f.version,S.userIDType=d.userIdType,S.endpointType=d.endpointType,S.transmissionDirection=d.transmissionDirection,S.callType=d.callType,S.roles=d.roles,(function(){function t(){return new S}"function"==typeof define&&define.amd?define("callstats",[],t):e.callstats=t,i.exports=t})("undefined"!=typeof window&&window)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./config/callstatserrors":35,"./config/constants":36,"./config/settings":37,"./fsm/mainfsm":38,"./services/authenticator":46,"./utility/csiologger":104,"./utility/onerroreventlistner":110,"./utility/registry":112,"./utility/utils":118}],23:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Cache=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../utility/csiologger")),o=(function(){function e(){r(this,e),this.queue=[],this.priority=[]}return i(e,[{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.length()>1e6?a.error("Maximum cached items reached, dropping."):t?this.priority.push(e):this.queue.push(e)}},{key:"pop",value:function(){return this.priority.length>0?this.priority.shift():this.queue.shift()}},{key:"peak",value:function(){return this.priority.length>0?this.priority[0]:this.queue.length>0?this.queue[0]:null}},{key:"length",value:function(){return this.queue.length+this.priority.length}},{key:"updateConferenceId",value:function(e){for(var t=0;t<this.queue.length;++t)this.queue[t].updateConferenceId(e);for(var n=0;n<this.priority.length;++n)this.priority[n].updateConferenceId(e)}}]),e})();n.Cache=o},{"../utility/csiologger":104}],24:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Component=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=e("./port"),o=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../utility/csiologger")),s=(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown";r(this,e),this.name=t,this.ports=new Map}return i(e,[{key:"bindPort",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;this.ports.has(e)?o.warn("Port ("+e+") for "+this.name+" already exists."):this.ports.set(e,new a.Port(t,n))}},{key:"declarePort",value:function(e){this.ports.has(e)?o.warn("Port ("+e+") for "+this.name+" already exists."):this.ports.set(e,null)}},{key:"getPort",value:function(e){return this.ports.get(e)}},{key:"isConnected",value:function(e){return!!this.ports.has(e)&&null!==this.ports.get(e)}},{key:"connect",value:function(e,t){this.ports.has(e)?this.ports.set(e,t):o.warn("Port ("+e+") for "+this.name+" does not exists.")}},{key:"transmit",value:function(e){var t=this.ports.get(e);if(void 0!==t)if(null!==t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.transmit(r)}else o.warn("Port ("+e+") for "+this.name+" is not connected.");else o.warn("Port ("+e+") for "+this.name+" does not exists.")}},{key:"request",value:function(e){var t=this.ports.get(e);if(void 0===t)return o.warn("Port ("+e+") for "+this.name+" does not exists."),null;if(null===t)return o.warn("Port ("+e+") for "+this.name+" is not connected."),null;for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.request(r)}}]),e})();n.Component=s},{"../utility/csiologger":104,"./port":27}],25:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.PCTAggregator=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../config/constants")),o=(function(){function e(){r(this,e),this.pctMeasurements=[],this.pctMeasurementsMap=new Map}return i(e,[{key:"getPCTMeasurements",value:function(){return this.pctMeasurements}},{key:"addPCTMeasurement",value:function(e){this.pctMeasurements.length>=a.pctSampleSize&&this.pctMeasurements.shift(),this.pctMeasurements.push(e);var t=e.getProvider();this.pctMeasurementsMap.has(t)||this.pctMeasurementsMap.set(t,[]),this.pctMeasurementsMap.get(t).push(e)}},{key:"clearPCTMeasurements",value:function(){this.pctMeasurements=[],this.pctMeasurementsMap=new Map}},{key:"doStats",value:function(e){var t={};return t.min=this.findMin(e),t.max=this.findMax(e),t.mean=this.calculateAverage(e),t.median=this.calculateMedian(e),t.stddev=this.calculateStandardDeviation(e,t.mean),t}},{key:"findMax",value:function(e){return e&&e.length?Math.max.apply(null,e):null}},{key:"findMin",value:function(e){return e&&e.length?Math.min.apply(null,e):null}},{key:"calculateAverage",value:function(e){return e&&e.length?e.reduce(function(e,t){return e+t},0)/e.length:0}},{key:"calculateMedian",value:function(e){if(!e)return 0;if(!e.length)return 0;var t=e.slice(0).sort(function(e,t){return e-t}),n=Math.floor(t.length/2);return t.length%2==0?(t[n]+t[n-1])/2:t[n]}},{key:"calculateStandardDeviation",value:function(e,t){if(!e)return 0;if(!e.length)return 0;var n=e.map(function(e){var n=e-t;return n*n}).reduce(function(e,t){return e+t},0);return Math.sqrt(n/(e.length-1))}},{key:"setAcceptability",value:function(e){var t=[];return t.push(e.throughput.median<30),t.push(e.loss.median>.05),t.push(e.rtt.median>400),e.acceptable=!t.reduce(function(e,t){return e||t},!1),e}},{key:"doInternalMeasurement",value:function(e){var t={},n=[],r=[],i=[],a=[];if(e)for(var o=0;o<e.length;o++)n.push(e[o].getRttMedian()),a.push(e[o].getRttVariance()),r.push(e[o].getThroughput()),i.push(e[o].getFractionLost());return t.rtt=this.doStats(n),t.loss=this.doStats(i),t.jitter=this.doStats(a),t.throughput=this.doStats(r),t}},{key:"scoreRtt",value:function(e){var t=0;if(!e||!e.rtt)return t;var n=e.rtt.max,r=e.rtt.median;return t=n<350?t+=1:t,t=n<250?t+=2:t,t=n<150?t+=3:t,t=n<100?t+=5:t,t=r<200?t+=1:t,t=r<150?t+=3:t,r<100?t+=5:t}},{key:"scoreLosses",value:function(e){var t=15;if(!e||!e.loss)return 0;var n=e.loss.max,r=e.loss.median;return t=n>=.04?t-=3:t,t=n>=.025?t-=1:t,t=n>=.01?t-=1:t,t=r>=.04?t-=5:t,t=r>=.025?t-=3:t,r>=.005?t-=2:t}},{key:"scoreThroughPut",value:function(e){var t=0;if(!e||!e.throughput)return t;var n=e.throughput.median,r=e.throughput.min;return t=n>5e3?t+=5:t,t=n>2e3?t+=2:t,t=n>200?t+=1:t,t=r<100?t-=3:t,t=r<1e3?t-=2:t,(t=r<2e3?t-=1:t)>0?t:0}},{key:"aggregate",value:function(){var e=this,t=[];return e.pctMeasurementsMap.forEach(function(n,r){var i={};i.provider=r;var a=e.doInternalMeasurement(n);i.rtt=a.rtt,i.jitter=a.jitter,i.loss=a.loss,i.throughput=a.throughput,(i=e.setAcceptability(i)).rttScore=e.scoreRtt(),i.lossesScore=e.scoreLosses(),i.throughputScore=e.scoreThroughPut(),t.push(i)}),t}},{key:"getAggregate",value:function(e){var t=[];if(!e)return t;for(var n=0;n<e.length;n++){var r={},i=e[n];r.provider=i.provider,r.roundTripTime=i.rtt.median,r.jitter=i.jitter.median,r.fractionLost=i.loss.median,r.throughput=i.throughput.median,t.push(r)}return t}},{key:"getSummary",value:function(e){var t=[];if(!e)return t;for(var n=0;n<e.length;n++){var r={};r.provider=e[n].provider,r.acceptable=e[n].acceptable,t.push(r)}return t}},{key:"getRanking",value:function(){var e=this.aggregate().sort(function(e,t){if(!e.acceptable&&!t.acceptable)return 0;if(e.acceptable&&!t.acceptable)return-1;if(t.acceptable&&!e.acceptable)return 1;var n=e.rttScore+e.lossesScore+e.throughputScore;return t.rttScore+t.lossesScore+t.throughputScore-n}),t=this.getAggregate(e),n=this.getSummary(e),r={};return r.aggregatedStats=t,r.providerRanking=n,r}}]),e})();n.PCTAggregator=o},{"../config/constants":36}],26:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=(function(){function e(t,n,i,a,o,s){r(this,e),this.throughput=t,this.rttMedian=n,this.rttVariance=i,this.fractionLost=a,this.provider=o,this.timestamp=s}return i(e,[{key:"getThroughput",value:function(){return this.throughput}},{key:"getRttMedian",value:function(){return this.rttMedian}},{key:"getRttVariance",value:function(){return this.rttVariance}},{key:"getFractionLost",value:function(){return this.fractionLost}},{key:"getTimestamp",value:function(){return this.timestamp}},{key:"getProvider",value:function(){return this.provider}}]),e})();n.PCTMeasurement=a},{}],27:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r(this,e),this.target=t,this.object=n}return i(e,[{key:"transmit",value:function(e){this.target.apply(this.object,e)}},{key:"request",value:function(e){return this.target.apply(this.object,e)}}]),e})();n.Port=a},{}],28:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;r(this,e),this.value=t,this.next=n}return a(e,[{key:"setNext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.next=e}}]),e})(),s=(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;r(this,e),this.capacity=t,this.root=n,this.tail=i,this.currentLength=0}return a(e,[{key:"size",value:function(){return this.currentLength}},{key:"isEmpty",value:function(){return this.currentLength<1}},{key:"isOverflow",value:function(){return this.size()>this.capacity}},{key:"push",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.tail;this.tail=new o(e),this.isEmpty()?this.root=this.tail:t.setNext(this.tail),this.currentLength+=1;var n=void 0;return this.isOverflow()&&(n=this.pop()),n}},{key:"pop",value:function(){if(!this.isEmpty()){var e=this.root.value;return this.root=this.root.next,this.currentLength-=1,e}}},{key:"getFront",value:function(){return this.root}},{key:"getBack",value:function(){return this.tail}},{key:"clear",value:function(){this.root=void 0,this.tail=void 0,this.currentLength=0}},{key:"toArray",value:function(){for(var e=i({},this.root),t=[];e;){var n=e,r=n.value;e=n.next,t.push(r)}return t}}]),e})();n.Queue=s},{}],29:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.SizedBalancedTree=void 0;var a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=e("./sizedbalancedtreenode"),s=r(e("../config/constants")),c=e("../collections/queue"),u=r(e("../statspipeline/validator")),l=(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.maxSBTTreeSize;i(this,e),this.comparator=this.comparatorAsc,this.root=void 0,this.sizedQueue=new c.Queue(t)}return a(e,[{key:"comparatorAsc",value:function(e,t){return e<t?-1:e>t?1:0}},{key:"getSize",value:function(){return this.size(this.root)}},{key:"select",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.getKey(this.root,e);return t&&t.key}},{key:"getMin",value:function(){var e=this.selectFirst(this.root);return e&&e.key}},{key:"getMax",value:function(){var e=this.selectLast(this.root);return e&&e.key}},{key:"add",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.root=this.addKey(this.root,e);var t=this.sizedQueue.push(e);u.isNumber(t)&&(this.root=this.removeKey(this.root,t))}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.root=this.removeKey(this.root,e),this.sizedQueue.pop()}},{key:"addKey",value:function(e,t){if(!e)return new o.SizedBalancedTreeNode(t);var n=this.comparator(t,e.key);return e.size=this.size(e)+1,n<0?e.left=this.addKey(e.left,t):e.right=this.addKey(e.right,t),this.maintain(e,t>=e.key)}},{key:"removeKey",value:function(e,t){if(e){var n=this.comparator(t,e.key);if(n<0)e.left=this.removeKey(e.left,t);else if(n>0)e.right=this.removeKey(e.right,t);else{if(!e.left)return e.right;if(!e.right)return e.left;var r=this.selectFirst(e.right),i=e.key;e.key=r.key,e.value=r.value,r.key=i,e.right=this.removeKey(e.right,i)}return(e=this.maintain(e)).size=this.size(e.left)+this.size(e.right)+1,e}}},{key:"maintain",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){if(t)if(e.right&&this.size(e.right.right)>this.size(e.left))e=this.rotateLeft(e);else{if(!(e.right&&this.size(e.right.left)>this.size(e.left)))return e;e.right=this.rotateRight(e.right),e=this.rotateLeft(e)}else if(e.left&&this.size(e.left.left)>this.size(e.right))e=this.rotateRight(e);else{if(!(e.left&&this.size(e.left.right)>this.size(e.right)))return e;e.left=this.rotateLeft(e.left),e=this.rotateRight(e)}return e.left=this.maintain(e.left,!1),e.right=this.maintain(e.right,!0),e=this.maintain(e,!1),this.maintain(e,!0)}}},{key:"size",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return e?e.size:0}},{key:"height",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(!e)return 0;var t=this.height(e.left),n=this.height(e.right);return Math.max(t,n)+1}},{key:"rotateLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(e){var t=e.right;return e.right=t.left,t.left=e,t.size=this.size(e),e.size=this.size(e.left)+this.size(e.right)+1,t}}},{key:"rotateRight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(e){var t=e.left;return e.left=t.right,t.right=e,t.size=this.size(e),e.size=this.size(e.left)+this.size(e.right)+1,t}}},{key:"getKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e)return t===this.size(e.left)+1?e:t<=this.size(e.left)?this.getKey(e.left,t):this.getKey(e.right,t-1-this.size(e.left))}},{key:"selectLast",value:function(e){if(e){for(;e.right;)e=e.right;return e}}},{key:"selectFirst",value:function(e){if(e){for(;e.left;)e=e.left;return e}}},{key:"traverse",value:function(){this.print(this.root," ",!1)}},{key:"print",value:function(e,t,n){if(e){var r=n?"\u2514\u2500\u2500":"\u251c\u2500\u2500";console.log(""+t+r,e.key);var i=t+(n?"    ":"\u2502   ");e.left&&this.print(e.left,i,!1),e.right&&this.print(e.right,i,!0)}}}]),e})();n.SizedBalancedTree=l},{"../collections/queue":28,"../config/constants":36,"../statspipeline/validator":99,"./sizedbalancedtreenode":30}],30:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});n.SizedBalancedTreeNode=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;r(this,e),this.key=t,this.left=n,this.right=i,this.size=a}},{}],31:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.SlidingWindow=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=e("./switem"),o=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../utility/timestamps")),s=(function(){function e(t,n){r(this,e),this.items=[],this.plugins=[],this.postProcesses=[],this.preProcesses=[],this.timeoutInMs=n,this.maxItemsNum=t,this.minItemsNum=0}return i(e,[{key:"setMaxItemsNum",value:function(e){this.maxItemsNum=e}},{key:"setTimeoutInMs",value:function(e){this.timeoutInMs=e}},{key:"setMinItemsNum",value:function(e){this.minItemsNum=e}},{key:"refresh",value:function(){var e=o.getCurrent();if(!(this.items.length<=this.minItemsNum)){for(;0<this.maxItemsNum&&this.maxItemsNum<=this.items.length;)this.remove();this.timeoutInMs&&this.timeoutInMs<e-this.items[0].getCreated()&&(this.remove(),this.refresh())}}},{key:"getLength",value:function(){return this.items.length}},{key:"add",value:function(e){this.refresh(),this.items.push(new a.SWItem(e));for(var t=0;t<this.preProcesses.length;t++)(0,this.preProcesses[t])(e);for(var n=0;n<this.plugins.length;n++)this.plugins[n].add(e);for(var r=0;r<this.postProcesses.length;r++)(0,this.postProcesses[r])(e)}},{key:"remove",value:function(){for(var e=this.items.shift(),t=0;t<this.plugins.length;t++)this.plugins[t].remove(e.value)}},{key:"peek",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.items.length<=e?null:this.items[this.items.length-e-1].getValue()}},{key:"attach",value:function(e){this.plugins.push(e)}},{key:"addPreProcess",value:function(e){this.preProcesses.push(e)}},{key:"addPostProcess",value:function(e){this.postProcesses.push(e)}},{key:"detach",value:function(e){this.plugins=this.plugins.filter(function(t){return t!==e})}}]),e})();n.SlidingWindow=s},{"../utility/timestamps":116,"./switem":32}],32:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.SWItem=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../utility/timestamps")),o=(function(){function e(t){r(this,e),this.value=t,this.created=a.getCurrent()}return i(e,[{key:"getValue",value:function(){return this.value}},{key:"getCreated",value:function(){return this.created}},{key:"toString",value:function(){return""}}]),e})();n.SWItem=o},{"../utility/timestamps":116}],33:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Conference=void 0;var a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=e("../peerconnection/peerconnectionmanager"),s=r(e("../config/settings")),c=e("../utility/registry"),u=r(e("../browserapi/sessionstorage")),l=r(e("../config/constants")),d=(function(){function e(t,n){i(this,e),this.conferenceId=t,this.startTime,this.peerConnectionManager=new o.PeerConnectionManager,this.credentials=n,this.ucId=null,this.url=null,this.userJoinedSent=!1}return a(e,[{key:"getCredentials",value:function(){return this.credentials}},{key:"getUcId",value:function(){return this.ucId}},{key:"setUcId",value:function(e){this.ucId=e,this.url=s.conferenceBaseUrl+c.Registry.getCredentials().getAppId()+"/conferences/"+encodeURIComponent(this.conferenceId)+"/"+e+"/general",u.storeUcId(this.conferenceId,e)}},{key:"resetUcId",value:function(){this.ucId=null}},{key:"getPeerConnectionManager",value:function(){return this.peerConnectionManager}},{key:"getUrl",value:function(){return this.url}},{key:"updateConferenceId",value:function(e){this.conferenceId=e,this.peerConnectionManager.updateConferenceId(e)}},{key:"updateState",value:function(){this.peerConnectionManager.getPeerConnectionStatus()===l.fabricState.terminated&&this.setUserJoinedSent(!1)}},{key:"isUserJoinedSent",value:function(){return this.userJoinedSent}},{key:"setUserJoinedSent",value:function(e){this.userJoinedSent=e}},{key:"close",value:function(e){}}]),e})();n.Conference=d},{"../browserapi/sessionstorage":21,"../config/constants":36,"../config/settings":37,"../peerconnection/peerconnectionmanager":44,"../utility/registry":112}],34:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.ConferenceManager=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=e("./conference"),o=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../config/constants")),s=(function(){function e(){r(this,e),this.conferenceMap=new Map}return i(e,[{key:"add",value:function(e,t){if(!this.get(e)){var n=new a.Conference(e,t);this.conferenceMap.set(e,n)}}},{key:"get",value:function(e){return this.conferenceMap.get(e)}},{key:"getConferenceForPc",value:function(e){var t=null;return e?(this.conferenceMap.forEach(function(n,r){var i=n.getPeerConnectionManager().getPcHandler(e);i&&i.getConferenceId()===r&&(t=n)}),t):t}},{key:"getConferenceForPcHash",value:function(e){var t=null;return e?(this.conferenceMap.forEach(function(n,r){var i=n.getPeerConnectionManager().getPcHandlerByHash(e);i&&i.getConferenceId()===r&&(t=n)}),t):t}},{key:"updateConferenceId",value:function(e){var t=o.tmpConferenceId,n=this.get(t);n&&(n.updateConferenceId(e),this.conferenceMap.set(e,n),this.conferenceMap.delete(t))}},{key:"getConferenceIds",value:function(){var e=[];return this.conferenceMap.forEach(function(t,n){e.push(n)}),e}}]),e})();n.ConferenceManager=s},{"../config/constants":36,"./conference":33}],35:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.csError={httpError:"httpError",authError:"authError",wsChannelFailure:"wsChannelFailure",success:"success",csProtoError:"csProtoError",appConnectivityError:"appConnectivityError",tokenGenerationError:"tokenGenerationError",ok:"OK",authOngoing:"authOngoing",invalidWebRTCFunctionName:"Invalid WebRTC function name",invalidEndPointType:"Invalid EndPoint Type",invalidTransmissionDirection:"Invalid fabric transmission direction"},n.csErrorStrings={argumentError:"Argument missing/invalid",cryptoError:"Browser does not support Web Cryptography API. App secret based authentication requires Web Cryptography API",fabricEventUnsupported:"Unsupported fabricEvent",fabricEventInvalid:"Invalid fabricEvents value",fabricUsageInvalid:"Invalid fabricUsage value",notInitialized:"SDK is not initialized or no Fabrics added",pcInvalid:"Invalid PeerConnection object passed",confereneDoesNotExist:"conferenceId does not exist",webRTCFunctionsInvalid:"Invalid webRTC functionName value",setProxyConfigInvokeError:"cannot be called if window.csioproxy is false",invalidWebRTCFunctionName:"Invalid WebRTC function name",invalidEndPointType:"Invalid EndPoint Type",invalidTransmissionDirection:"Invalid fabric transmission direction",apiaccesserror:"API access Error"},n.csErrorReason={csProtoError:"Protocol fields cannot be empty.",csNoAuthState:"Authentication state unavailable in server."},n.internalErrors={authOngoing:"authOngoing"},n.authErrorActions={RETRY:0,GET_NEW_TOKEN:1,REPORT_ERROR:2}},{}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.logEvents={stateMachine:"stateMachine",log:"log",timing:"timing",error:"error",getStatsError:"getStatsError",restResponseError:"restResponseError"},n.fabricEvent={fabricSetupFailed:"fabricSetupFailed",fabricHold:"fabricHold",fabricResume:"fabricResume",audioMute:"audioMute",audioUnmute:"audioUnmute",videoPause:"videoPause",videoResume:"videoResume",fabricUsageEvent:"fabricUsageEvent",fabricTerminated:"fabricTerminated",screenShareStart:"screenShareStart",screenShareStop:"screenShareStop",dominantSpeaker:"dominantSpeaker",activeDeviceList:"activeDeviceList",applicationErrorLog:"applicationErrorLog",callDetails:"callDetails",callUnAnswered:"callUnAnswered"},n.callType={unknown:"unknown",inbound:"inbound",outbound:"outbound",monitoring:"monitoring"},n.roles={agent:"agent",participant:"participant"},n.internalFabricEvent={fabricSetup:"fabricSetup",fabricSetupFailed:"fabricSetupFailed",userJoined:"userJoined",userLeft:"userLeft",userAlive:"userAlive",ssrcMap:"ssrcMap",mediaPlaybackStart:"mediaPlaybackStart",mediaPlaybackSuspended:"mediaPlaybackSuspended",mediaPlaybackStalled:"mediaPlaybackStalled",oneWayMedia:"oneWayMedia",oneWayMediaStart:"oneWayMediaStart",oneWayMediaStop:"oneWayMediaStop",fabricStateChange:"fabricStateChange",iceDisruptionStart:"iceDisruptionStart",iceDisruptionEnd:"iceDisruptionEnd",fabricTransportSwitch:"fabricTransportSwitch",iceConnectionDisruptionStart:"iceConnectionDisruptionStart",iceConnectionDisruptionEnd:"iceConnectionDisruptionEnd",iceAborted:"iceAborted",iceTerminated:"iceTerminated",iceFailed:"iceFailed",iceRestarted:"iceRestarted",fabricDropped:"fabricDropped",connectedDeviceList:"connectedDeviceList",sdpSubmission:"sdpSubmissionEvent",sendingThroughputObservations:"sendingThroughputObservations",limitationObservations:"limitationObservations",userDetails:"userDetails",circuitBreaker:"circuitBreaker"},n.callstatsChannels={sdpSubmission:"sdpSubmissionEvent",processedStats:"processedStats",callstatsEvent:"callStatsEvent",userFeedback:"userFeedbackEvent",preCallTest:"preCallTest",senderConfiguration:"senderConfiguration"},n.precalltestEvents={results:"preCallTestResults",associate:"preCallTestAssociate"},n.customEvents={event:"customEvent",stats:"customStats",conferenceSummary:"conferenceSummary"},n.callstatsAPIReturnStatus={success:"success",failure:"failure"},n.fabricUsage={audio:"audio",video:"video",data:"data",screen:"screen",multiplex:"multiplex",unbundled:"unbundled"},n.userIdType={local:"local",remote:"remote"},n.qualityRating={excellent:5,good:4,fair:3,poor:2,bad:1},n.reportType={local:"local",remote:"remote"},n.avQualityRatings={excellent:"excellent",fair:"fair",bad:"bad",unknown:"unknown"},n.fabricState={established:"established",initializing:"initializing",failed:"failed",disrupted:"disrupted",hold:"hold",checkingDisrupted:"checkingDisrupted",terminated:"terminated"},n.webRTCFunctions={createOffer:"createOffer",createAnswer:"createAnswer",setLocalDescription:"setLocalDescription",setRemoteDescription:"setRemoteDescription",addIceCandidate:"addIceCandidate",getUserMedia:"getUserMedia",iceConnectionFailure:"iceConnectionFailure",signalingError:"signalingError",applicationError:"applicationError",applicationLog:"applicationLog"},n.callFailureReasons={mediaConfigError:"MediaConfigError",negotiationFailure:"NegotiationFailure",sdpError:"SDPGenerationError",iceFailure:"IceConnectionFailure",transportFailure:"TransportFailure",signalingError:"SignalingError",applicationError:"ApplicationError",applicationLog:"ApplicationLog",invalidWebRTCFunctionName:"Invalid WebRTC function name"},n.throughputThreshold={video:{green:1024,red:256},audio:{green:30,red:8}},n.currOverPrevFrameRateThreshold={video:{green:.8,red:.3}},n.rttThreshold={video:{green:400,red:1e3}},n.fractionalLossThreshold={video:{green:.1,red:.5},audio:{green:.15,red:.3}},n.eModelThreshold={audio:{green:240,red:400}},n.codeBaseType={chrome:"Chrome",firefox:"Firefox",edge:"Edge",plugin:"Plugin"},n.browserName={chrome:"Chrome",firefox:"Firefox",edge:"Edge",msie:"Microsoft Internet Explorer",safari:"Safari",opera:"Opera"},n.osName={windows:"Windows",mac:"Mac OS X",android:"Android",ios:"iOS"},n.mediaType={audio:"audio",video:"video"},n.streamType={inbound:"inbound",outbound:"outbound"},n.fabricStateChangeType={signalingState:"signalingState",iceConnectionState:"iceConnectionState",iceGatheringState:"iceGatheringState"},n.transportType={rest:"rest",ws:"ws"},n.wsConnectionState={initiated:"initiated",connected:"connected",closed:"closed"},n.csCallBackMessages={authSuccessful:"SDK authentication successful.",authFailed:"SDK authentication failed.",authProtocolInvalid:"Fatal authentication error. Invalid auth protocol message.",authOngoing:"Authentication on going.",wsConnected:"WebSocket establishment successful.",wsClosed:"WebSocket server closed.",wsFailed:"WebSocket establishment failed."},n.oneWayMediaTypes={audio:"audio",video:"video",screen:"screen"},n.limitationType={cpu:"cpu",network:"network"},n.qualityDisruptionTypes={qpchange:"qpchange"},n.callbackFunctions={stats:"stats",defaultConfig:"defaultConfig",recommendedConfig:"recommendedConfig",preCallTestResults:"preCallTestResults",preCallTest:"preCallTest",connectionRecommendation:"connectionRecommendation",mediaDisruption:"mediaDisruption"},n.mediaDisruptionCallbackType={oneWayMediaStart:"oneWayMediaStart",oneWayMediaStop:"oneWayMediaStop",circuitBreaker:"circuitBreaker"},n.circuitBreakerDisruptionType={mediaTimeout:"mediaTimeout",congestion:"congestion",mediaUsability:"mediaUsability",RTCPTimeout:"RTCPTimeout"},n.endpointType={peer:"peer",server:"server"},n.transmissionDirection={sendonly:"sendonly",receiveonly:"receiveonly",sendrecv:"sendrecv",inactive:"inactive"},n.adaptiveStatsIntervalsInMs={min:2e3,max:3e4},n.adaptiveStatsThresholds={maxMarginFactor:15,marginReductionFactor:.5,marginIncreaseFactor:2,maxGradualCounter:4,rippleBase:2,marginDecreaseIntervalInMs:3e3,minIntervalInMs:2e3,maxIntervalInMs:3e4,windowSize:100,resetThreshold:3,minThreshold:{rtt:100,throughput:200,fractionalLoss:.1},eps:9e-5,maxInitialTimeoutInMs:3e4,initialNotifyIntervalTimeoutInMs:5e3},n.statsDestination={callback:"callback",backend:"backend"},n.echoDetectionLabel={unacceptable:"unacceptable",limitingCase:"limitingCase",acceptable:"acceptable"},n.tmpConferenceId="csio-conf-id-tmp",n.pctSampleSize=100,n.maxSBTTreeSize=600},{}],37:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.setConfigServiceUrl=function(e){n.configServiceUrl=e},n.setAuthServiceUrl=function(e){n.authServiceUrl=e},n.setConferenceBaseUrl=function(e){n.conferenceBaseUrl=e},n.setWsUrl=function(e){n.wsUrl=e},n.setRestEventUrl=function(e){n.restEventUrl=e},n.setRestStatsUrl=function(e){n.restStatsUrl=e},n.setBaseUrl=function(e){n.baseUrl=e},n.setQmodelThresholdsAPIUrl=function(e){n.qmodelThresholdsAPIUrl=e},n.setTransportType=function(e){n.transportType=e};n.version="3.64.7",n.configServiceUrl="https://appsettings.callstats.io/v1/apps/",n.authServiceUrl="https://auth.callstats.io/",n.authRetryTimeout=5e3,n.conferenceBaseUrl="https://dashboard.callstats.io/apps/",n.wsUrl="wss://collector.callstats.io:443/csiows/collectCallStats",n.restEventUrl="https://events.callstats.io/v1/apps/",n.restStatsUrl="https://stats.callstats.io/v1/apps/",n.baseUrl="https://collector.callstats.io:443/",n.qmodelThresholdsAPIUrl="https://dashboard.callstats.io/api-internal/v1/qmodelthresholds",n.csioDebug="false",n.transportType="@@transportType"},{}],38:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.MainFSM=n.MainEvents=void 0;var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),l=e("./statemachine"),d=e("../utility/registry"),f=r(e("../utility/csiologger")),h=r(e("../utility/utils")),p=r(e("../utility/timestamps")),v=r(e("../config/constants")),g=r(e("../config/settings")),y=e("../statspipeline/statsadapter"),m=e("../statspipeline/statsparser"),b=e("../statspipeline/statsmonitor"),k=e("../statspipeline/statstransmitter"),S=e("../statspipeline/statsassembler"),w={Created:"Created",Initializing:"Initializing",Idle:"Idle",Run:"Run"},C=n.MainEvents={onStart:"onStart",onInitialize:"onInitialize",onAddNewFabric:"onAddNewFabric",onSendFabricEvent:"onSendFabricEvent",onReportError:"onReportError",onAssociateMstWithUserID:"onAssociateMstWithUserID",onSetProxyConfig:"onSetProxyConfig",onAttachWifiStatsHandler:"onAttachWifiStatsHandler",onSendUserFeedback:"onSendUserFeedback",onOn:"onOn",onSetIdentifiers:"onSetIdentifiers",onMakePrecallTest:"onMakePrecallTest",onStartPrecallTests:"onStartPrecallTests",onSendCallDetails:"onSendCallDetails",onSendCustomStats:"onSendCustomStats",onSendCustomEvent:"onSendCustomEvent"},T="onServicesFinished",_=(function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,w.Created));return f.log("FSM:",e.getState()),e.fire(C.onStart),e.run(),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t=Object(this),n=t.length>>>0,r=arguments[1],i=void 0,a=0;a<n;a++)if(i=t[a],e.call(r,i,a,t))return i}}),e}return s(t,l.StateMachine),u(t,[{key:"proceed",value:function(e,t){switch(this.getState()){case w.Created:switch(e){case C.onStart:this.onStart.apply(this,i(t));break;case C.onInitialize:this.setState(w.Initializing),f.log("FSM:",this.getState()),this.onInitialize.apply(this,i(t));break;case C.onOn:this.onOn.apply(this,i(t));break;case C.onSetProxyConfig:this.onSetProxyConfig.apply(this,i(t));break;case C.onStartPrecallTests:this.onStartPrecallTests.apply(this,i(t))}break;case w.Initializing:switch(e){case T:this.onServicesFinished()&&(this.setState(w.Idle),f.log("FSM:",this.getState()));break;case C.onAddNewFabric:this.onAddNewFabric.apply(this,i(t));break;case C.onSendFabricEvent:this.onSendFabricEvent.apply(this,i(t));break;case C.onSendCallDetails:this.onSendCallDetails.apply(this,i(t));break;case C.onSendCustomEvent:this.onSendCustomEvent.apply(this,i(t));break;case C.onSendCustomStats:this.onSendCustomStats.apply(this,i(t));break;case C.onReportError:this.onReportError.apply(this,i(t));break;case C.onAssociateMstWithUserID:this.onAssociateMstWithUserID.apply(this,i(t));break;case C.onSendUserFeedback:this.onSendUserFeedback.apply(this,i(t));break;case C.onAttachWifiStatsHandler:this.onAttachWifiStatsHandler.apply(this,i(t));break;case C.onOn:this.onOn.apply(this,i(t));break;case C.onMakePrecallTest:this.onMakePrecallTest.apply(this,i(t));break;case C.onSetIdentifiers:this.onSetIdentifiers.apply(this,i(t));break;case C.onSetProxyConfig:this.onSetProxyConfig.apply(this,i(t));break;case C.onStartPrecallTests:this.onStartPrecallTests.apply(this,i(t))}break;case w.Idle:case w.Run:switch(e){case C.onAddNewFabric:this.onAddNewFabric.apply(this,i(t));break;case C.onSendFabricEvent:this.onSendFabricEvent.apply(this,i(t));break;case C.onSendCallDetails:this.onSendCallDetails.apply(this,i(t));break;case C.onSendCustomEvent:this.onSendCustomEvent.apply(this,i(t));break;case C.onSendCustomStats:this.onSendCustomStats.apply(this,i(t));break;case C.onReportError:this.onReportError.apply(this,i(t));break;case C.onAssociateMstWithUserID:this.onAssociateMstWithUserID.apply(this,i(t));break;case C.onSendUserFeedback:this.onSendUserFeedback.apply(this,i(t));break;case C.onAttachWifiStatsHandler:this.onAttachWifiStatsHandler.apply(this,i(t));break;case C.onOn:this.onOn.apply(this,i(t));break;case C.onSetProxyConfig:this.onSetProxyConfig.apply(this,i(t));break;case C.onMakePrecallTest:this.onMakePrecallTest.apply(this,i(t));break;case C.onSetIdentifiers:this.onSetIdentifiers.apply(this,i(t));break;case C.onStartPrecallTests:this.onStartPrecallTests.apply(this,i(t))}}}},{key:"onStart",value:function(){d.Registry.getEndpoint().setup(),this.authenticator=d.Registry.getAuthenticator(),this.configservicewrapper=d.Registry.getConfigServiceWrapper(),this.precalltest=d.Registry.getPreCallTest();var e=d.Registry.getStatsAdapter(),t=d.Registry.getStatsParser(),n=d.Registry.getStatsMonitor(),r=d.Registry.getStatsTransmitter(),i=d.Registry.getStatsAssembler();e.connect(y.StatsAdapterIO.RawStatsOut,t.getPort(m.StatsParserIO.RawStatsIn)),t.connect(m.StatsParserIO.PcStatsTupleOut,n.getPort(b.StatsMonitorIO.PcStatsTupleIn)),n.connect(b.StatsMonitorIO.StatsTupleOut,i.getPort(S.StatsAssemblerIO.StatsTupleIn)),i.connect(S.StatsAssemblerIO.CallstatsOut,r.getPort(k.StatsTransmitterIO.CallstatsIn)),e.connect(y.StatsAdapterIO.UnprocessedOut,r.getPort(k.StatsTransmitterIO.UnprocessedIn))}},{key:"setupConnection",value:function(){var e=this;this.connectionManager=d.Registry.getConnectionManager(),this.connectionManager.setupCollectorConnection(d.Registry.getCredentials().getTransportType()),this.connectionManager.setup().then(function(){f.log("Connected to connectionManager"),e.fire(T),e.run()}).catch(function(e){return f.log("Could not connect to connectionManager",e)})}},{key:"setup",value:function(){var e=this;this.clocksync=d.Registry.getClockSync(),d.Registry.getGenericEventHandler().sendEvent(v.logEvents.log,{msg:"Starting clockSync"}),this.clocksync.initiate().then(function(){f.log("Clocksync completed"),e.fire(T),e.run()}).catch(function(e){return f.log("Could not finish ClockSync",e)})}},{key:"onInitialize",value:function(e,t,n,r,i,a){var o=this,s=d.Registry.getCredentials();s.setAppId(e),s.setUserId(t),d.Registry.getCallbacks().set(v.callbackFunctions.stats,i),this.doPrecalltest=!0,a&&(!0===a.disableBeforeUnloadHandler&&this.setBeforeUnloadHandler(),a.applicationVersion&&d.Registry.getEndpoint().setAppVersion(a.applicationVersion),a.transportType&&g.setTransportType(a.transportType),a.disablePrecalltest&&(this.doPrecalltest=!1),a.siteID&&("string"!=typeof a.siteID?f.error("Invalid configParams: siteId must be string"):s.setSiteId(a.siteID)),a.extensionVersion&&("string"!=typeof a.extensionVersion?f.error("Invalid configParams: extensionVersion must be string"):s.setExtensionVersion(a.extensionVersion)),a.shimVersion&&("string"!=typeof a.shimVersion?f.error("Invalid configParams: shimVersion must be string"):s.setShimVersion(a.shimVersion))),this.setup(),this.authenticator.initiate(e,n,t,r).then(function(e){if(f.log("Authentication complete"),o.setupConnection(),!0===d.Registry.getCredentials().isAdaptiveStatsEnabled())d.Registry.getStatsMonitor().setIntervals(v.adaptiveStatsIntervalsInMs.min,v.adaptiveStatsIntervalsInMs.max);else{var t=d.Registry.getCredentials().getStatsSubmissionInterval();d.Registry.getStatsMonitor().setIntervals(t,t)}o.fire(T),o.run();var n=o.authenticator.getIceServers();n&&o.doPrecalltest&&d.Registry.getPCTRunnerService().doPrecalltest(n,"callstats",!1),o.configservicewrapper.initiateInternalConfig().then(function(){f.log("ConfigService internal config:",o.configservicewrapper.getInternalConfig()),o.fire(T),o.run()},function(e){return f.log(e)}),o.configservicewrapper.initiateAppConfig().then(function(){var e=d.Registry.getCallbacks().get(v.callbackFunctions.defaultConfig),t=o.configservicewrapper.getAppDefaultConfig();e&&t&&e(t);var n=d.Registry.getCallbacks().get(v.callbackFunctions.recommendedConfig),r=o.configservicewrapper.getAppRecommendedConfig();n&&r&&n(r),o.fire(T),o.run()},function(e){return f.log(e)})},function(e){f.log(e)})}},{key:"setBeforeUnloadHandler",value:function(){window&&window.addEventListener&&(f.log("setBeforeUnloadHandler"),window.addEventListener("beforeunload",function(e){return d.Registry.getConferenceManager().conferenceMap.forEach(function(e,t){e&&e.getPeerConnectionManager().pcHandlers.forEach(function(e,t){d.Registry.getEventMessageBuilder().make(v.internalFabricEvent.userLeft,e.getConferenceId(),e.getPeerConnection())})}),"Are you sure you want to close the call?"}))}},{key:"onServicesFinished",value:function(){return!!(this.connectionManager&&this.connectionManager.isReady()&&this.clocksync.isCompleted()&&this.authenticator.isCompleted())&&(d.Registry.getTransmissionManager().trySend(),!0)}},{key:"onAddNewFabric",value:function(e,t,n,r,i,a,o){f.warn("FSM onAddNewFabric"),d.Registry.getConferenceManager().add(r,d.Registry.getCredentials());var s=d.Registry.getConferenceManager().get(r);s.getPeerConnectionManager().addPcHandler(e,t,n,r,i,a,o);var c={endpointInfo:d.Registry.getEndpoint().serialize()};d.Registry.getCredentials().getUserIdObject()&&(c.localUserIDObject=d.Registry.getCredentials().getUserIdObject()),s.isUserJoinedSent()||(s.resetUcId(),d.Registry.getEventMessageBuilder().make(v.internalFabricEvent.userJoined,r,e,c),s.setUserJoinedSent(!0),d.Registry.getCredentials().getTransportType()===v.transportType.rest&&c.localUserIDObject&&c.localUserIDObject.userName&&d.Registry.getEventMessageBuilder().make(v.internalFabricEvent.userDetails,r,e,{userName:String(c.localUserIDObject.userName)}));var u=d.Registry.getPCTRunnerService().getPrecallTestIds();d.Registry.getPCTRunnerService().resetPrecallTestIds();var l=this.precalltest.getId();l&&u.push(l),u.length>0&&d.Registry.getEventMessageBuilder().make(v.precalltestEvents.associate,r,e,{ids:u})}},{key:"onStartPrecallTests",value:function(e,t){var n=d.Registry.getAuthenticator().getIceServers();n[0].label="callstats",e.push(n[0]),d.Registry.getPCTRunnerService().start(e,t)}},{key:"onSendCallDetails",value:function(e,t,n){f.warn("FSM onSendCallDetails");var r={};r.callType=n.callType,r.role=n.role,n.contactQueue&&(r.contactQueue=n.contactQueue),n.contactQueueID&&(r.contactQueueID=n.contactQueueID),n.routingProfile&&(r.routingProfile=n.routingProfile),n.routingProfileID&&(r.routingProfileID=n.routingProfileID),n.contactID&&(r.contactID=n.contactID),n.acceptedTimestamp&&(r.acceptedAt=n.acceptedTimestamp),n.connectedTimestamp&&(r.connectedAt=n.connectedTimestamp),n.originalContactID&&(r.originalContactID=n.originalContactID),n.siteID&&(r.siteID=n.siteID,d.Registry.getCredentials().setSiteId(n.siteID)),n.extensionVersion&&(r.extensionVersion=n.extensionVersion,d.Registry.getCredentials().setExtensionVersion(n.extensionVersion)),n.shimVersion&&(r.shimVersion=n.shimVersion,d.Registry.getCredentials().setShimVersion(n.shimVersion)),d.Registry.getEventMessageBuilder().make(v.fabricEvent.callDetails,t,e,r)}},{key:"onSendCustomEvent",value:function(e,t,n){if(f.warn("FSM onSendCustomEvent"),n&&1===n.length){var r=n[0];if("conferenceSummary"===r.type)return void d.Registry.getEventMessageBuilder().make(v.customEvents.conferenceSummary,t,e,r)}d.Registry.getEventMessageBuilder().make(v.customEvents.event,t,e,{eventList:n})}},{key:"onSendCustomStats",value:function(e,t,n){f.warn("FSM onSendCustomStats");var r={};r.stats=n,d.Registry.getEventMessageBuilder().make(v.customEvents.stats,t,e,r)}},{key:"onSendFabricEvent",value:function(e,t,n,r){f.warn("FSM onSendFabricEvent");var i={};r&&((i=r).ssrc&&(i.ssrc=String(i.ssrc))),t===v.fabricEvent.activeDeviceList&&(i={mediaDeviceList:h.normalizeMediaDeviceList(r.deviceList)}),d.Registry.getEventMessageBuilder().make(t,n,e,i);var a=d.Registry.getConferenceManager().get(n);if(a){var o=a.getPeerConnectionManager().getPcHandler(e);t!==v.fabricEvent.fabricTerminated&&t!==v.internalFabricEvent.fabricSetupFailed||(o.stopUserAliveHandler(),o.setPcState(v.fabricState.terminated),o.stopStatsPolling(),a.getPeerConnectionManager().removePcStats(o&&o.getPcHash()),a.updateState()),t===v.fabricEvent.fabricHold&&(o.setPcState(v.fabricState.hold),o.stopStatsPolling()),t===v.fabricEvent.fabricResume&&(o.setPcState(v.fabricState.established),o.startStatsPolling())}}},{key:"onReportError",value:function(e,t,n,r,i,a){f.warn("FSM onReportError");var o={delay:0,reason:this.callFailureClassifier(n),function:n,magicKey:d.Registry.getEndpoint().getMagicKey(),endpoint:d.Registry.getEndpoint().serialize(),level:"debug"};if(r){var s=this.formatDomError(r);o.message=s.message,o.messageType=s.messageType,o.name=r.name,o.stack=r.stack}if(e){var c=d.Registry.getConferenceManager().get(t),u=void 0;if(c&&(u=c.getPeerConnectionManager().getPcHandler(e)),!u)return void f.error("onReportError: No handler found for given PeerConnection!");if(o.delay=p.getCurrent()-u.getStartTime(),o.fabricState=u.getPcState(),o.iceConnectionState=u.getIceConnectionState(),(i||a||e&&"closed"!==e.signalingState)&&d.Registry.getCredentials().getCollectSDP()&&n!==v.webRTCFunctions.applicationLog){var l={};l.localSDP=this.pickSDP(e,i,"localDescription"),l.remoteSDP=this.pickSDP(e,a,"remoteDescription"),d.Registry.getEventMessageBuilder().make(v.callstatsChannels.sdpSubmission,t,e,l)}}n===v.webRTCFunctions.applicationLog||n===v.webRTCFunctions.applicationError?d.Registry.getEventMessageBuilder().make(v.fabricEvent.applicationErrorLog,t,e,o):n===v.webRTCFunctions.iceConnectionFailure?this.handleIceConnectionFailure(e,t,o):(d.Registry.getEventMessageBuilder().make(v.fabricEvent.fabricSetupFailed,t,e,o),n===v.webRTCFunctions.getUserMedia&&this.handleGUMErrors(t))}},{key:"onAssociateMstWithUserID",value:function(e,t,n,r,i,a){var o=d.Registry.getConferenceManager().get(n);if(o){var s=o.getPeerConnectionManager().getPcHandler(e);"string"!=typeof r&&(r+=""),s.updateSSRCInfo(r,t,i,a)}}},{key:"onAttachWifiStatsHandler",value:function(e){d.Registry.getWifiStatsExecutor().setGetWifiStatsMethod(e)}},{key:"onSetProxyConfig",value:function(e){f.warn("FSM onSetProxyConfig"),e.collectorURL&&g.setBaseUrl(e.collectorURL),e.authServiceURL&&g.setAuthServiceUrl(e.authServiceURL),e.csioInternalAPIURL&&g.setQmodelThresholdsAPIUrl(e.csioInternalAPIURL),e.wsURL&&g.setWsUrl(e.wsURL),e.restEventURL&&g.setRestEventUrl(e.restEventURL),e.restStatsURL&&g.setRestStatsUrl(e.restStatsURL),e.appSettingsURL&&g.setConfigServiceUrl(e.appSettingsURL)}},{key:"onSendUserFeedback",value:function(e,t,n){var r={feedback:{overallRating:t.overall}};t.video&&(r.feedback.videoQualityRating=t.video),t.audio&&(r.feedback.audioQualityRating=t.audio),t.comment&&(r.feedback.comments=t.comment),d.Registry.getEventMessageBuilder().make(v.callstatsChannels.userFeedback,e,null,r)}},{key:"onOn",value:function(e,t){d.Registry.getCallbacks().set(e,t)}},{key:"onSetIdentifiers",value:function(e,t){if(e.conferenceID&&(d.Registry.getConferenceManager().updateConferenceId(e.conferenceID),d.Registry.getTransmissionManager().updateConferenceId(e.conferenceID),d.Registry.getTransmissionManager().trySend()),e.remoteUserID&&t){var n=d.Registry.getConferenceManager().getConferenceForPc(t);if(!n)return void f.log("onSetIdentifiers conference not found");var r=n.getPeerConnectionManager().getPcHandler(t);if(!r)return void f.log("pcHandler not found");r.updateRemoteId(e.remoteUserID),d.Registry.getTransmissionManager().trySend()}}},{key:"onMakePrecallTest",value:function(e,t){var n=e,r=t||"callstats";e||(n=this.authenticator.getIceServers(),r="callstats"),d.Registry.getPCTRunnerService().doPrecalltest(n,r,!0)}},{key:"handleIceConnectionFailure",value:function(e,t,n){if(e){var r=d.Registry.getConferenceManager().get(t),i=void 0;if(r&&(i=r.getPeerConnectionManager().getPcHandler(e)),i)if(i.isFabricSetupSent()){var a={localIceCandidates:[],remoteIceCandidates:[],iceCandidatePairs:[]};a.delay=p.getCurrent()-i.getStartTime(),a.currIceConnectionState="failed",a.prevIceConnectionState="disconnected",d.Registry.getEventMessageBuilder().make(v.internalFabricEvent.iceFailed,t,e,a)}else n.delay=p.getCurrent()-i.getStartTime(),n.fabricState=i.getPcState(),n.iceConnectionState=i.getIceConnectionState(),d.Registry.getEventMessageBuilder().make(v.fabricEvent.fabricSetupFailed,t,e,n)}}},{key:"handleGUMErrors",value:function(e){var t=d.Registry.getConferenceManager().get(e);if(t||(d.Registry.getConferenceManager().add(e,d.Registry.getCredentials()),t=d.Registry.getConferenceManager().get(e)),!t.getUcId()){var n={endpointInfo:d.Registry.getEndpoint().serialize()};d.Registry.getEventMessageBuilder().make(v.internalFabricEvent.userJoined,e,null,n),t.setUserJoinedSent(!0)}}},{key:"callFailureClassifier",value:function(e){var t=void 0;return v.webRTCFunctions.hasOwnProperty(e)?e===v.webRTCFunctions.createOffer||e===v.webRTCFunctions.createAnswer||e===v.webRTCFunctions.setRemoteDescription?t=v.callFailureReasons.negotiationFailure:e===v.webRTCFunctions.setLocalDescription?t=v.callFailureReasons.sdpError:e===v.webRTCFunctions.addIceCandidate?t=v.callFailureReasons.sdpError:e===v.webRTCFunctions.getUserMedia?t=v.callFailureReasons.mediaConfigError:e===v.webRTCFunctions.iceConnectionFailure?t=v.callFailureReasons.iceFailure:e===v.webRTCFunctions.signalingError?t=v.callFailureReasons.signalingError:(e===v.webRTCFunctions.applicationLog||v.webRTCFunctions.applicationError)&&(t=v.callFailureReasons.applicationLog):t=v.callFailureReasons.invalidWebRTCFunctionName,t}},{key:"formatDomError",value:function(e){var t={},n={};e&&(window.DOMException&&e instanceof window.DOMException?(n.message=e.message,n.name=e.name,t.messageType="domError"):"object"===(void 0===e?"undefined":c(e))?(e.message&&(n.message=e.message),e.name&&(n.name=e.name),e.constraintName&&(n.name=e.constraintName),e.stack&&(n.stack=e.stack),t.messageType="json"):(n=e,t.messageType="text"));var r=this.truncateLog(n);return"object"===(void 0===r?"undefined":c(r))?t.message=JSON.stringify(r):t.message=r,t}},{key:"pickSDP",value:function(e,t,n){return t||(e&&e[n]?e[n].sdp:"")}},{key:"truncateString",value:function(e){return e.length>2e4&&(f.log("Log exceeds 20kb, It will be truncated"),e=e.substring(0,2e4)),e}},{key:"truncateLog",value:function(e){return e?("string"==typeof e?e=this.truncateString(e):"object"===(void 0===e?"undefined":c(e))&&e.message&&(e.message=this.truncateString(e.message)),e):e}}]),t})();n.MainFSM=_},{"../config/constants":36,"../config/settings":37,"../statspipeline/statsadapter":84,"../statspipeline/statsassembler":85,"../statspipeline/statsmonitor":87,"../statspipeline/statsparser":88,"../statspipeline/statstransmitter":89,"../utility/csiologger":104,"../utility/registry":112,"../utility/timestamps":116,"../utility/utils":118,"./statemachine":40}],39:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=(function(){function e(t,n){r(this,e),this.type=t,this.args=void 0!==n?n:null}return i(e,[{key:"getType",value:function(){return this.type}},{key:"getArgs",value:function(){return this.args}}]),e})();n.ProgramEvent=a},{}],40:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.StateMachine=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=e("./programevent"),o=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../utility/csiologger")),s=(function(){function e(t){r(this,e),this.events=[],this.state=t}return i(e,[{key:"fire",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=new a.ProgramEvent(e,n);this.events.push(i)}},{key:"proceed",value:function(e,t){o.warn("You need to overwrite the proceed function inan extended StateMachine")}},{key:"setState",value:function(e){this.state=e}},{key:"getState",value:function(){return this.state}},{key:"run",value:function(){if(!(this.events.length<1)){var e=this.events.shift();this.proceed(e.getType(),e.getArgs())}}}]),e})();n.StateMachine=s},{"../utility/csiologger":104,"./programevent":39}],41:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.GetStatsHandler=void 0;var a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=r(e("../config/constants")),s=e("../statspipeline/statsadapter"),c=e("../utility/registry"),u=r(e("../utility/csiologger")),l=(function(){function e(t,n,r,a,o){i(this,e),this.pc=t,this.interval=r,this.codeBase=a,this.browserName=o,this.getStatsTimer=null,this.isPromiseBased=!0,this.pcHash=n,this.genericevent=c.Registry.getGenericEventHandler()}return a(e,[{key:"startStatsPolling",value:function(){var e=this;e.getStatsTimer||(u.log("startStatsPolling for ",e.pcHash),this.getStatsTimer=setInterval(function(){e.csioGetStats(e.statsHandler,e.pcHash)},e.interval))}},{key:"stopStatsPolling",value:function(){this.getStatsTimer&&(clearInterval(this.getStatsTimer),this.getStatsTimer=null)}},{key:"csioGetStats",value:function(e,t){var n=o.codeBaseType.firefox,r=o.codeBaseType.chrome,i=o.codeBaseType.edge,a=o.browserName.safari,s=this.pc;if(s){if("closed"===s.iceConnectionState)return void this.stopStatsPolling();try{this.isTemaSys()?this.getStatsTemasys(e,t):this.codeBase===n?this.getStatsFirefox(e,t):this.browserName===a?this.getStatsSafari(e,t):this.codeBase===r?this.getStatsChrome(e,t):this.codeBase===i&&this.getStatsEdge(e,t)}catch(e){u.log("csioGetStats: Error ",e)}}}},{key:"getStatsTemasys",value:function(e,t){this.pc.getStats(null,function(n){e(n,t)},function(e){u.log("getStatsTemasys error",e)})}},{key:"getStatsFirefox",value:function(e,t){var n=this,r=this.pc;if(n.isPromiseBased)try{r.getStats().then(function(n){e(n,t)}).catch(function(i){console.log("getstats error ",i),n.isPromiseBased=!1,r.getStats(null,function(n){e(n,t)})})}catch(i){n.isPromiseBased=!1,n.genericevent.sendEvent(o.logEvents.getStatsError,{msg:"Firefox getStats reports error ",error:i.message+":"+i.stack}),r.getStats(null,function(n){e(n,t)})}else r.getStats(null,function(n){e(n,t)})}},{key:"getStatsChrome",value:function(e,t){var n=this,r=this,i=r.pc;if(window&&window.csioReactNative)i.getStats().then(function(n){e(n,t)}).catch(function(e){u.error("Chrome getStats Error [react-native]",e)});else if(r.isPromiseBased)try{i.getStats().then(function(r){n.getLegacyStatsChrome().then(function(n){e(r,t,n)})}).catch(function(n){u.log("Chrome getStats Error ",n),r.isPromiseBased=!1,r.genericevent.sendEvent(o.logEvents.getStatsError,{msg:"Chrome getStats reports error",error:n.message+":"+n.stack}),i.getStats(function(n){e(n,t)})})}catch(n){r.isPromiseBased=!1,r.genericevent.sendEvent(o.logEvents.getStatsError,{msg:"Chrome getStats reports error",error:n.message+":"+n.stack}),i.getStats(function(n){e(n,t)})}else i.getStats(function(n){e(n,t)})}},{key:"getLegacyStatsChrome",value:function(){var e=this.pc;return new Promise(function(t,n){e.getStats(function(e){for(var n=[],r=e.result(),i=0;i<r.length;++i){var a=r[i];"ssrc"!==a.type&&"VideoBwe"!==a.type||n.push(a)}t(n)})})}},{key:"getStatsEdge",value:function(e,t){var n=this;n.pc.getStats().then(function(n){e(n,t)}).catch(function(r){e({},t),r?n.genericevent.sendEvent(o.logEvents.getStatsError,{msg:"Edge getStats reports error",error:r.message+":"+r.stack}):n.genericevent.sendEvent(o.logEvents.getStatsError,{msg:"Edge getStats reports error"})})}},{key:"getStatsSafari",value:function(e,t){var n=this;n.pc.getStats().then(function(n){e(n,t)}).catch(function(e){n.genericevent.sendEvent(o.logEvents.getStatsError,{msg:"Safari getStats reports error",error:e.message+":"+e.stack})})}},{key:"statsHandler",value:function(e,t,n){var r=c.Registry.getStatsAdapter();if(e&&r)try{r.transmit(s.StatsAdapterIO.RawStatsIn,e,t,n)}catch(e){u.log("statsHandler: Error ",e),c.Registry.getGenericEventHandler().sendEvent(o.logEvents.error,{msg:"statsHandler: Error",error:e.message+":"+e.stack})}}},{key:"iceCandidatesHandler",value:function(e,t){t(c.Registry.getStatsAdapter().getIceCandidates(e))}},{key:"getIceCandidates",value:function(){var e=this;return new Promise(function(t,n){e.csioGetStats(e.iceCandidatesHandler,function(e){t(e)})})}},{key:"isTemaSys",value:function(){return!!(window&&window.AdapterJS&&window.AdapterJS.WebRTCPlugin&&window.AdapterJS.WebRTCPlugin.plugin)}}]),e})();n.GetStatsHandler=l},{"../config/constants":36,"../statspipeline/statsadapter":84,"../utility/csiologger":104,"../utility/registry":112}],42:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.PcCallbackHandler=void 0;var a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=r(e("../config/constants")),s=e("../utility/registry"),c=r(e("../utility/timestamps")),u=r(e("../config/callstatserrors")),l=r(e("../utility/csiologger")),d=(function(){function e(t,n,r,a,u,d){var f=this;if(i(this,e),n){if(this.conferenceId=t,this.pc=n,this.getStatsHandler=r,this.userAlive=a,this.callback=d,this.remoteId=u,this.clocksync=s.Registry.getClockSync(),this.emb=s.Registry.getEventMessageBuilder(),this.precalltest=s.Registry.getPreCallTest(),this.genericevent=s.Registry.getGenericEventHandler(),this.iceCandidates=[],this.iceConnectionState=n.iceConnectionState,this.iceGatheringState=n.iceGatheringState,this.signalingState=n.signalingState,this.oldIceConnectionState="",this.oldIceGatheringState="",this.iceConnectionStateTS="",this.negotiationNeeded=0,this.pcState=o.fabricState.initializing,this.disruptedTS=0,this.connectionDisruptedTS=0,this.startTime=c.getCurrent(),this.established=!1,this.activeIceCandidatePair=null,this.prevActiveIceCandidatePair=null,this.localIceCandidates=[],this.remoteIceCandidates=[],this.iceCandidatePairs=[],this.iceConnectivityDelay=0,this.iceGatheringDelay=0,this.fabricSetupSent=!1,this.pc&&this.pc.addEventListener?(this.pc.addEventListener("icecandidate",this.iceCandidateCallback.bind(this),!1),this.pc.addEventListener("iceconnectionstatechange",this.iceConnectionStateChangeCallback.bind(this),!1),this.pc.addEventListener("signalingstatechange",this.pcSignalingStateChangeCallback.bind(this),!1),this.pc.addEventListener("negotiationneeded",this.pcNegotiationNeededCallback.bind(this),!1)):this.pc&&this.pc.attachEvent?(l.info("attachEvent"),this.pc.attachEvent("onicecandidate",this.iceCandidateCallback.bind(this)),this.pc.attachEvent("oniceconnectionstatechange",this.iceConnectionStateChangeCallback.bind(this)),this.pc.attachEvent("onsignalingstatechange",this.pcSignalingStateChangeCallback.bind(this)),this.pc.attachEvent("onnegotiationneeded",this.pcNegotiationNeededCallback.bind(this))):l.error("callstats cannot monitor or collect stats"),n.getConfiguration){var h=n.getConfiguration();h&&(this.iceServersURLs=this.getIceServerURLs(h.iceServers),this.sdpSemantics=h.sdpSemantics)}!n||"connected"!==n.iceConnectionState&&"completed"!==n.iceConnectionState||(this.pcState=o.fabricState.established,this.getStatsHandler.getIceCandidates().then(function(e){f.localIceCandidates=e.localIceCandidates,f.remoteIceCandidates=e.remoteIceCandidates,f.iceCandidatePairs=e.iceCandidatePairs,f.prevActiveIceCandidatePair=f.activeIceCandidatePair,f.activeIceCandidatePair=f.getActiveIceCandidatePair(),f.sendfabricSetup(),f.startStatsPolling()}))}}return a(e,[{key:"getIceServerURLs",value:function(e){var t=[];if(!e)return t;for(var n=0;n<e.length;n++){var r=e[n];if(r&&r.urls)for(var i=0;i<r.urls.length;i++)t.push(r.urls[i])}return t}},{key:"iceCandidateCallback",value:function(e){if(e&&e.candidate&&e.candidate.candidate){var t=e.candidate.candidate.split(" ");if("0"!==t[4]&&"0"!==t[5]){var n=!!t[4]&&-1!==t[4].indexOf(":"),r="1"===t[1]?"rtp":"rtcp",i={transport:t[2],protocol:r,typePreference:t[3],address:n?"["+t[4]+"]:"+t[5]:t[4]+":"+t[5],type:t[7],media:e.candidate.sdpMid};-1===this.iceCandidates.indexOf(i)&&(this.iceCandidates.push(i),l.warn("CALLBACK: ICE candidate",i))}}}},{key:"iceConnectionStateChangeCallback",value:function(e){var t=this;if(e){l.log("pc states ",this.pc.iceGatheringState,this.pc.iceConnectionState),this.iceConnectionStateTS=this.clocksync.getSynchronizedTimestamp(),this.handleIceGatheringState(),this.handleIceConnectionState(),l.log("states ",this.iceGatheringState,this.iceConnectionState),"complete"===this.iceGatheringState&&"checking"===this.iceConnectionState&&this.handleIceChecking();var n={prevIceConnectionState:this.oldIceConnectionState,currIceConnectionState:this.iceConnectionState},r=this.iceConnectionState;this.getStatsHandler.getIceCandidates().then(function(e){t.localIceCandidates=e.localIceCandidates,t.remoteIceCandidates=e.remoteIceCandidates,t.iceCandidatePairs=e.iceCandidatePairs,t.prevActiveIceCandidatePair=t.activeIceCandidatePair,t.activeIceCandidatePair=t.getActiveIceCandidatePair(),"connected"===r||"completed"===r?t.handleIceConnectedOrCompleted(n):"failed"===r?t.handleIceFailed(n):"disconnected"===r?t.handleIceDisconnected(n):"closed"===r?t.handleIceClosed(n):"new"===r&&t.handleIceRestart(n)})}}},{key:"sendFabricStateChange",value:function(e){this.emb.make(o.internalFabricEvent.fabricStateChange,this.conferenceId,this.pc,e)}},{key:"handleIceConnectionState",value:function(){this.oldIceConnectionState=this.iceConnectionState,this.iceConnectionState=this.pc.iceConnectionState,l.warn("CALLBACK: ICE connection state change",this.oldIceConnectionState,"->",this.iceConnectionState);var e={changedState:o.fabricStateChangeType.iceConnectionState,prevState:this.oldIceConnectionState,newState:this.iceConnectionState};this.sendFabricStateChange(e)}},{key:"handleIceGatheringState",value:function(){if(this.iceGatheringState!==this.pc.iceGatheringState){"complete"===this.pc.iceGatheringState&&(this.iceGatheringDelay=c.getCurrent()-this.startTime),this.oldIceGatheringState=this.iceGatheringState,this.iceGatheringState=this.pc.iceGatheringState,l.warn("CALLBACK: ICE gathering state change",this.oldIceGatheringState,"->",this.iceGatheringState);var e={changedState:o.fabricStateChangeType.iceGatheringState,prevState:this.oldIceGatheringState,newState:this.iceGatheringState};this.sendFabricStateChange(e)}}},{key:"handleIceChecking",value:function(){var e=c.getCurrent();if("disconnected"===this.oldIceConnectionState&&(this.pcState===o.fabricState.checkingDisrupted||this.pcState===o.fabricState.disrupted)){var t={prevIceConnectionState:this.oldIceConnectionState,currIceConnectionState:this.iceConnectionState,delay:e-this.connectionDisruptedTS};this.pcState===o.fabricState.disrupted&&(t.prevIceCandidatePair=this.prevActiveIceCandidatePair,t.currIceCandidatePair=this.activeIceCandidatePair,t.delay=e-this.disruptedTS,this.emb.make(o.internalFabricEvent.iceDisruptionEnd,this.conferenceId,this.pc,t)),this.pcState=o.fabricState.initializing,this.emb.make(o.internalFabricEvent.iceConnectionDisruptionEnd,this.conferenceId,this.pc,t)}}},{key:"handleIceConnectedOrCompleted",value:function(e){var t=c.getCurrent();this.pcState===o.fabricState.disrupted&&(e.prevIceCandidatePair=this.prevActiveIceCandidatePair,e.currIceCandidatePair=this.activeIceCandidatePair,e.delay=t-this.disruptedTS,this.emb.make(o.internalFabricEvent.iceDisruptionEnd,this.conferenceId,this.pc,e)),this.iceConnectivityDelay=t-this.startTime,this.established=!0,this.pcState=o.fabricState.established,this.sendfabricSetup(),this.startStatsPolling()}},{key:"sendfabricSetup",value:function(){if(this.fabricSetupSent)l.log("fabricSetup has been sent already");else{var e={delay:c.getCurrent()-this.startTime,iceGatheringDelay:this.iceGatheringDelay,iceConnectivityDelay:this.iceConnectivityDelay,localIceCandidates:this.localIceCandidates,remoteIceCandidates:this.remoteIceCandidates,iceCandidatePairs:this.iceCandidatePairs,remoteEndpointType:o.endpointType.peer,fabricTransmissionDirection:o.transmissionDirection.sendrecv,iceServers:this.iceServersURLs,sdpSemantics:this.sdpSemantics},t=this.getActiveIceCandidatePair();t&&(e.selectedCandidatePairID=t.id),this.fabricSetupSent=!0;var n=void 0;if(this.conferenceId){var r=s.Registry.getConferenceManager().get(this.conferenceId);r&&r.getPeerConnectionManager()&&(n=r.getPeerConnectionManager().getPcHandler(this.pc),e.remoteEndpointType=n.getRemoteEndpointType(),e.fabricTransmissionDirection=n.getFabricTransmissionDirection())}this.pcState=o.fabricState.established,this.emb.make(o.internalFabricEvent.fabricSetup,this.conferenceId,this.pc,e)}}},{key:"isFabricSetupSent",value:function(){return this.fabricSetupSent}},{key:"startStatsPolling",value:function(){this.getStatsHandler.startStatsPolling()}},{key:"stopStatsPolling",value:function(){this.getStatsHandler.stopStatsPolling()}},{key:"handleIceFailed",value:function(e){e.currIceCandidatePair=this.activeIceCandidatePair,e.delay=c.getCurrent()-this.startTime,this.pcState=o.fabricState.failed,"checking"===e.prevIceConnectionState?this.sendIceFailed(e):"completed"===e.prevIceConnectionState||"connected"===e.prevIceConnectionState?this.emb.make(o.internalFabricEvent.fabricDropped,this.conferenceId,this.pc,e):"disconnected"===e.prevIceConnectionState&&this.established?this.emb.make(o.internalFabricEvent.fabricDropped,this.conferenceId,this.pc,e):"disconnected"===e.prevIceConnectionState&&this.sendIceFailed(e)}},{key:"getActiveIceCandidatePair",value:function(){var e=null,t=this.iceCandidatePairs;if(t&&t.length>0){var n=t.filter(function(e){return"true"===e.selected||"true"===e.googActiveConnection||!0===e.selected||!0===e.googActiveConnection});n.length>0&&(e=n[0])}return e}},{key:"sendIceFailed",value:function(e){e.localIceCandidates=this.localIceCandidates,e.remoteIceCandidates=this.remoteIceCandidates,e.iceCandidatePairs=this.iceCandidatePairs,l.log("sending icefailed ",e),this.emb.make(o.internalFabricEvent.iceFailed,this.conferenceId,this.pc,e)}},{key:"sendFabricTransportSwitch",value:function(e){var t=this,n={};n.prevIceCandidatePair=t.activeIceCandidatePair,n.relayType=e,n.currIceConnectionState=t.iceConnectionState,n.prevIceConnectionState=t.oldIceConnectionState,n.switchDelay=null,t.getStatsHandler.getIceCandidates().then(function(e){t.localIceCandidates=e.localIceCandidates,t.remoteIceCandidates=e.remoteIceCandidates,t.iceCandidatePairs=e.iceCandidatePairs,t.activeIceCandidatePair=t.getActiveIceCandidatePair(),n.currIceCandidatePair=t.activeIceCandidatePair,n.localIceCandidates=t.localIceCandidates,n.remoteIceCandidates=t.remoteIceCandidates,l.log("sending fabric transport switch ",n),"completed"!==n.currIceConnectionState&&"connected"!==n.currIceConnectionState||"completed"!==n.prevIceConnectionState&&"connected"!==n.prevIceConnectionState||t.emb.make(o.internalFabricEvent.fabricTransportSwitch,t.conferenceId,t.pc,n)})}},{key:"handleIceDisconnected",value:function(e){var t=c.getCurrent();this.startTime=t,e.prevIceConnectionStateTs=this.iceConnectionStateTS,e.currIceCandidatePair=this.activeIceCandidatePair,"connected"===e.prevIceConnectionState||"completed"===e.prevIceConnectionState?(this.pcState=o.fabricState.disrupted,this.disruptedTS=t,this.emb.make(o.internalFabricEvent.iceDisruptionStart,this.conferenceId,this.pc,e),this.callback&&this.callback(u.csError.appConnectivityError,"Connectivity check for PC object to "+this.remoteId+" failed.")):"checking"===e.prevIceConnectionState&&(this.pcState=o.fabricState.checkingDisrupted,this.connectionDisruptedTS=t,this.emb.make(o.internalFabricEvent.iceConnectionDisruptionStart,this.conferenceId,this.pc,e),this.callback&&this.callback(u.csError.appConnectivityError,"Connectivity check for PC object to "+this.remoteId+" failed."))}},{key:"handleIceClosed",value:function(e){"new"===e.prevIceConnectionState||"checking"===e.prevIceConnectionState?(e.delay=c.getCurrent()-this.startTime,e.localIceCandidates=this.localIceCandidates,e.remoteIceCandidates=this.remoteIceCandidates,e.iceCandidatePairs=this.iceCandidatePairs,this.emb.make(o.internalFabricEvent.iceAborted,this.conferenceId,this.pc,e)):"connected"!==e.prevIceConnectionState&&"completed"!==e.prevIceConnectionState||(e.prevIceCandidatePair=this.activeIceCandidatePair,this.emb.make(o.internalFabricEvent.iceTerminated,this.conferenceId,this.pc,e)),this.pcState=o.fabricState.terminated,this.conferenceId&&s.Registry.getConferenceManager().get(this.conferenceId).updateState(),this.stopStatsPolling()}},{key:"handleIceRestart",value:function(e){e.prevIceCandidatePair=this.prevActiveIceCandidatePair,"new"!==e.prevIceConnectionState&&(l.log("iceRestarted sending"),this.established=!1,this.emb.make(o.internalFabricEvent.iceRestarted,this.conferenceId,this.pc,e))}},{key:"pcSignalingStateChangeCallback",value:function(e){var t=this;if(e){var n=this.signalingState;this.signalingState=this.pc.signalingState,l.warn("CALLBACK: signaling state change",n,"->",this.signalingState);var r={changedState:o.fabricStateChangeType.signalingState,prevState:n,newState:this.signalingState};if(this.sendFabricStateChange(r),"have-remote-offer"!==this.signalingState&&"stable"!==this.signalingState||(this.precalltest.callStarts(),s.Registry.getPCTRunnerService().setCallInProgress(!0),this.genericevent.sendEvent(o.logEvents.log,{msg:"precalltest told to stop "})),"closed"===this.signalingState&&(this.emb.make(o.fabricEvent.fabricTerminated,this.conferenceId,this.pc),this.userAlive.stop(),this.precalltest.callFinished(),s.Registry.getPCTRunnerService().setCallInProgress(!1),this.stopStatsPolling(),this.pcState=o.fabricState.terminated,this.conferenceId)){var i=s.Registry.getConferenceManager().get(this.conferenceId);if(i&&i.getPeerConnectionManager()){var a=i.getPeerConnectionManager().getPcHandler(this.pc);i.getPeerConnectionManager().removePcStats(a&&a.getPcHash())}i.updateState()}"have-local-offer"!==this.signalingState&&"have-local-pranswer"!==this.signalingState&&"stable"!==this.signalingState||(l.log(this.signalingState,".. requesting sender config."),s.Registry.getConfigServiceWrapper().initiateSenderConfig(this.pc).then(function(){var e=s.Registry.getConfigServiceWrapper().getSenderConfig();l.log("Sender config:",e);var n=o.callstatsChannels.senderConfiguration;e&&s.Registry.getEventMessageBuilder().make(n,t.conferenceId,t.pc,e)}).catch(function(e){l.warn(e)}))}}},{key:"pcNegotiationNeededCallback",value:function(e){e&&(this.negotiationNeeded++,this.startTime=c.getCurrent(),l.warn("CALLBACK: negotiation needed",this.negotiationNeeded))}}]),e})();n.PcCallbackHandler=d},{"../config/callstatserrors":35,"../config/constants":36,"../utility/csiologger":104,"../utility/registry":112,"../utility/timestamps":116}],43:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.PeerConnectionHandler=void 0;var a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=e("../utility/registry"),s=e("../peerconnection/pccallbackhandler"),c=e("../browserapi/devices"),u=e("./useralivehandler"),l=e("./getstatshandler"),d=r(e("../config/constants")),f=r(e("../utility/timestamps")),h=r(e("../utility/csiologger")),p=(function(){function e(t){i(this,e),this.pc=t.pc,this.remoteId=t.remoteId,this.fabricUsage=t.fabricUsage,this.callback=t.callback,this.conferenceId=t.conferenceId,this.remoteEndpointType=t.remoteEndpointType,this.fabricTransmissionDirection=t.fabricTransmissionDirection,this.clocksync=o.Registry.getClockSync(),this.startTime=this.clocksync.getSynchronizedTimestamp(),this.credentials=o.Registry.getCredentials(),this.pcHash=this.generatePcHash(),this.ssrcMap=new Map,this.localSdp=null,this.remoteSdp=null,this.transportInfo=null,this.userAliveHandler=new u.UserAliveHandler(this.conferenceId,this.pc),this.userAliveHandler.start(),this.emb=o.Registry.getEventMessageBuilder(),this.devices=new c.Devices(this.conferenceId,this.pc);var n=o.Registry.getEndpoint();this.getStatsHandler=new l.GetStatsHandler(this.pc,this.pcHash,t.interval,n.getCodeBase(),n.getBrowserName()),this.pcCallbackHandler=new s.PcCallbackHandler(this.conferenceId,this.pc,this.getStatsHandler,this.userAliveHandler,this.remoteId,this.callback),this.devices.collectConnected(),this.fabricTransmissionDirection||(this.fabricTransmissionDirection="sendrecv"),this.remoteEndpointType||(this.remoteEndpointType="peer")}return a(e,[{key:"getFabricTransmissionDirection",value:function(){return this.fabricTransmissionDirection}},{key:"getRemoteEndpointType",value:function(){return this.remoteEndpointType}},{key:"stopUserAliveHandler",value:function(){this.userAliveHandler.stop()}},{key:"getPcState",value:function(){return this.pcCallbackHandler.pcState}},{key:"stopStatsPolling",value:function(){this.getStatsHandler.stopStatsPolling()}},{key:"startStatsPolling",value:function(){this.getStatsHandler.startStatsPolling()}},{key:"setPcState",value:function(e){e in d.fabricState?this.pcCallbackHandler.pcState=e:h.error("setPcState: Invalid state")}},{key:"getAppId",value:function(){return this.credentials.getAppId()}},{key:"getLocalId",value:function(){return this.credentials.getUserId()}},{key:"getConferenceId",value:function(){return this.conferenceId}},{key:"getPeerConnection",value:function(){return this.pc}},{key:"getRemoteId",value:function(){return this.remoteId}},{key:"isFabricSetupSent",value:function(){return this.pcCallbackHandler.isFabricSetupSent()}},{key:"getStartTime",value:function(){return this.startTime}},{key:"getCallback",value:function(){return this.callback}},{key:"getPcHash",value:function(){return this.pcHash}},{key:"getIceCandidates",value:function(){return this.pcCallbackHandler?this.pcCallbackHandler.iceCandidates:null}},{key:"getIceConnectionState",value:function(){return this.pcCallbackHandler?this.pcCallbackHandler.iceConnectionState:null}},{key:"getNegotiationsNumber",value:function(){return this.pcCallbackHandler?this.pcCallbackHandler.negotiationNeeded:0}},{key:"sendFabricTransportSwitch",value:function(e){this.pcCallbackHandler&&this.pcCallbackHandler.sendFabricTransportSwitch(e)}},{key:"getSdp",value:function(){return{localSdp:this.localSdp,remoteSdp:this.remoteSdp}}},{key:"setSdp",value:function(e,t){this.localSdp=e,this.remoteSdp=t}},{key:"generatePcHash",value:function(){var e=(Math.random()+1).toString(36);return e.substring(2,e.length)}},{key:"getTransportInfo",value:function(){return this.transportInfo}},{key:"setTransportInfo",value:function(e){this.transportInfo=e}},{key:"updateSDP",value:function(e){var t=this,n=void 0,r=void 0;if(this.pc&&this.pc.localDescription&&(n=this.pc.localDescription.sdp),this.pc&&this.pc.remoteDescription&&(r=this.pc.remoteDescription.sdp),n&&r&&(n!==this.localSdp||r!==this.remoteSdp)){this.parseSDP(n,d.streamType.outbound),this.parseSDP(r,d.streamType.inbound);var i={localSDP:n!==this.localSdp?n:"",remoteSDP:r!==this.remoteSdp?r:""};""===n&&""===remoteSDP||!o.Registry.getCredentials().getCollectSDP()||this.emb.make(d.internalFabricEvent.sdpSubmission,this.conferenceId,this.pc,i),e&&e.forEach(function(e){var n=String(e.data.ssrc),r=t.ssrcMap.get(n);r||(r={}),r.mediaType=e.data.mediaType,r.reportType=e.reportType,r.ssrc=n,t.ssrcMap.set(n,r)});var a=[];this.ssrcMap.forEach(function(e,t){e.msid&&e.mslabel&&e.label&&a.push(e)});for(var s={ssrcData:a},c=0;c<s.ssrcData.length;c+=1)s.ssrcData[c].userID=o.Registry.getCredentials().getUserId();this.emb.make(d.internalFabricEvent.ssrcMap,this.conferenceId,this.pc,s),this.setSdp(n,r)}}},{key:"parseSDP",value:function(e,t){var n=this,r=RegExp.prototype.test.bind(/^([a-z])=(.*)/),i=/^ssrc:(\d*) ([\w_]*):(.*)/,a=/^ssrc-group:SIM (\d*)/;e.split(/(\r\n|\r|\n)/).filter(r).forEach(function(e){var r=e[0],o=e.slice(2);if("a"===r&&i.test(o)){var s=o.match(i),c=s[1],u=s[2],l=s[3],d=n.ssrcMap.get(c);if(d||(d={}),d.ssrc=c,d[u]=l,d.localStartTime=f.getCurrent(),d.syncedStartTime=n.clocksync.getSynchronizedTimestamp(),d.streamType=t,!a.test(o))return void n.ssrcMap.set(c,d);d.ssrcGroup={},d.ssrcGroup[t]={},d.ssrcGroup[t].simulcastGroup=o.match(/\d+/g),n.ssrcMap.set(c,d)}})}},{key:"getSSRCInfo",value:function(e){return this.ssrcMap.get(e)}},{key:"setupVideoTagMethods",value:function(e,t){var n=this,r=document.getElementById(e);r&&(r.oncanplay=function(){var e={ssrc:String(t),highResTs:o.Registry.getClockSync().getSynchronizedTimestamp()};n.emb.make(d.internalFabricEvent.mediaPlaybackStart,n.conferenceId,n.pc,e)},r.onsuspend=function(){var e={ssrc:String(t),highResTs:o.Registry.getClockSync().getSynchronizedTimestamp()};n.emb.make(d.internalFabricEvent.mediaPlaybackSuspended,n.conferenceId,n.pc,e)})}},{key:"updateSSRCInfo",value:function(e,t,n,r){var i=this.ssrcMap.get(e);i||(i={}),i.ssrc=e,i.remoteUserID=t,i.usageLabel=n,i.associatedVideoTag=r,this.ssrcMap.set(e,i),r&&t!==this.credentials.getUserId()&&this.setupVideoTagMethods(r,e)}},{key:"updateConferenceId",value:function(e){this.conferenceId=e,this.userAliveHandler.updateConferenceId(e)}},{key:"updateRemoteId",value:function(e){this.remoteId=e}}],[{key:"Builder",get:function(){return(function(){function t(){i(this,t)}return a(t,[{key:"withPc",value:function(e){return this.pc=e,this}},{key:"withInterval",value:function(e){return this.interval=e,this}},{key:"withRemoteId",value:function(e){return this.remoteId=e,this}},{key:"withFabricUsage",value:function(e){return this.fabricUsage=e,this}},{key:"withConferenceId",value:function(e){return this.conferenceId=e,this}},{key:"withRemoteEndpointType",value:function(e){return this.remoteEndpointType=e,this}},{key:"withFabricTransmissionDirection",value:function(e){return this.fabricTransmissionDirection=e,this}},{key:"withCallback",value:function(e){return this.callback=e,this}},{key:"make",value:function(){return new e(this)}}]),t})()}}]),e})();n.PeerConnectionHandler=p},{"../browserapi/devices":19,"../config/constants":36,"../peerconnection/pccallbackhandler":42,"../utility/csiologger":104,"../utility/registry":112,"../utility/timestamps":116,"./getstatshandler":41,"./useralivehandler":45}],44:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.PeerConnectionManager=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=e("./peerconnectionhandler"),o=e("../utility/registry"),s=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../config/constants")),c=(function(){function e(){r(this,e),this.pcHandlers=new Map}return i(e,[{key:"removePcHandler",value:function(e){var t=this.getPcHandler(e);if(t){var n=t.getPcHash();this.pcHandlers.delete(n)}}},{key:"removePcStats",value:function(e){e&&o.Registry.getStatsMonitor().delete(e)}},{key:"addPcHandler",value:function(e,t,n,r,i,s,c){if(!this.getPcHandler(e)){var u=5e3;o.Registry.getCredentials().isAdaptiveStatsEnabled()&&(u=1e3);var l=(new a.PeerConnectionHandler.Builder).withPc(e).withRemoteId(t).withFabricUsage(n).withConferenceId(r).withRemoteEndpointType(i).withFabricTransmissionDirection(s).withCallback(c).withInterval(u).make();this.pcHandlers.set(l.getPcHash(),l)}}},{key:"getPcHandler",value:function(e){var t=null;return e?(this.pcHandlers.forEach(function(n,r){n&&n.getPeerConnection()===e&&(t=n)}),t):t}},{key:"getPcHandlerByHash",value:function(e){return e&&this.pcHandlers.has(e)?this.pcHandlers.get(e):null}},{key:"getPeerConnectionStatus",value:function(){return this.pcHandlers.forEach(function(e,t){if(e.getPcState()!==s.fabricState.terminated)return e.getPcState()}),s.fabricState.terminated}},{key:"updateConferenceId",value:function(e){this.pcHandlers.forEach(function(t,n){t.updateConferenceId(e)})}}]),e})();n.PeerConnectionManager=c},{"../config/constants":36,"../utility/registry":112,"./peerconnectionhandler":43}],45:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.UserAliveHandler=void 0;var o=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),s=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../config/constants")),c=e("../utility/timeoutprocess"),u=e("../utility/registry"),l=1e4,d=(function(e){function t(e,n){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,l));return a.emb=u.Registry.getEventMessageBuilder(),a.pc=n,a.conferenceId=e,a.setCallback(a.send),a}return a(t,c.TimeoutProcess),o(t,[{key:"send",value:function(){this.conferenceId!==s.tmpConferenceId&&this.pc&&this.emb.make(s.internalFabricEvent.userAlive,this.conferenceId,this.pc)}},{key:"updateConferenceId",value:function(e){this.conferenceId=e}}]),t})();n.UserAliveHandler=d},{"../config/constants":36,"../utility/registry":112,"../utility/timeoutprocess":115}],46:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.Authenticator=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},l=e("./jwt/jwt"),d=e("./jwt/jwttoken"),f=r(e("../config/settings")),h=r(e("../utility/base64")),p=r(e("../config/callstatserrors")),v=r(e("../config/constants")),g=r(e("../browserapi/localstorage")),y=r(e("../utility/json")),m=e("./xmlhttp"),b=e("./xmlhttpservice"),k=e("../utility/registry"),S=r(e("../utility/csiologger")),w=f.authRetryTimeout,C=(function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Authenticator"));return e.clockSync=k.Registry.getClockSync(),e.credentials=k.Registry.getCredentials(),e.generateTurnCredentials=!1,e}return o(t,b.XMLHttpService),c(t,[{key:"initiate",value:function(e,n,r,i){var a=this;return this.inProgress?(i&&i(p.csError.authOngoing,null),new Promise(function(e,t){t(new Error(a.name+": in progress"))})):e&&r?(this.appId=e,"object"===(void 0===r?"undefined":s(r))?this.userId=r.aliasName:this.userId=r,this.initCallback=i,"function"==typeof n?(this.setTokenGenerator(n),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initiate",this).call(this)):new Promise(function(e,r){a.createTokenGenerator(n).then(function(n){a.setTokenGenerator(n),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initiate",a).call(a).then(function(){e()},function(e){r(e)})},function(e){i&&i(p.csError.authError,e.toString()),r(new Error(a.name+": tokenGenerator creation problem ("+e+")"))})})):new Promise(function(e,t){t(new Error(a.name+": Empty credentials"))})}},{key:"setGenerateTurnCredentials",value:function(e){this.generateTurnCredentials=e}},{key:"getToken",value:function(){var e=null;return this.token&&(e=this.token.getToken()),e}},{key:"getTaasEnabled",value:function(){var e=!1;return this.token&&(e=this.token.getTaasEnabled()),e}},{key:"isTokenValid",value:function(){return!!this.token&&this.token.isValid(this.credentials)}},{key:"getElapsed",value:function(){return this.isCompleted()?this.elapsed:null}},{key:"getIceServers",value:function(){return this.iceServers}},{key:"getTurnServers",value:function(){return this.turnServers}},{key:"reset",value:function(){this.token=null,this.reauthTimer=null,this.renew=!1,this.credentials=null,this.jwt=new l.Jwt,this.tokenGenerator=function(e,t){t("Token generator is not set")},this.elapsed=0,this.iceServers=null,this.turnServers=null,u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this)}},{key:"setupToken",value:function(e){g.store("csio_auth_data",JSON.stringify(e)),this.token=new d.JwtToken(e,this.clockSync)}},{key:"clearReauthTimer",value:function(){null!==this.reauthTimer&&(clearTimeout(this.reauthTimer),this.reauthTimer=null)}},{key:"setupReauthTimer",value:function(e){var t=this;t.clearReauthTimer(),t.reauthTimer=setTimeout(function(){t.reAuthenticate()},e)}},{key:"reAuthenticate",value:function(){this.inProgress||(this.inProgress=!0,this.token=null,this.sendRequest())}},{key:"handleErrorActions",value:function(e){if(0!==e.length){var t=e.shift();if(t.action===p.authErrorActions.RETRY){var n=t.params.timeout?t.params.timeout:f.authRetryTimeout;this.setupReauthTimer(n),this.handleErrorActions(e)}t.action===p.authErrorActions.GET_NEW_TOKEN&&(this.renew=!0,this.handleErrorActions(e)),t.action===p.authErrorActions.REPORT_ERROR&&(S.error(this.name+": "+t.params.errorReason),this.initCallback&&this.initCallback(p.csError.authError,this.name+": "+t.params.errorReason),this.handleErrorActions(e))}}},{key:"setTokenGenerator",value:function(e){this.tokenGenerator=e}},{key:"handleResponse",value:function(e){var t=e.getXhr(),n=e.getElapsed(),r=y.parse(t.response);if(!r)return S.error(this.name+": invalid authentication response"),void this.sendNextRequest();if(r["urn:x-callstats:auth:errorActions"]&&r["urn:x-callstats:auth:errorActions"].length>0)this.handleErrorActions(r["urn:x-callstats:auth:errorActions"]);else{if(200===t.status){if("bearer"!==r.token_type)return S.error(this.name+": successful, but token type was not bearer. Scheduling retry."),void this.sendNextRequest();this.setupToken(r.access_token),r.iceServers&&(this.iceServers=r.iceServers),r.turnServers&&(this.turnServers=r.turnServers),r.metadata&&r.metadata.urls&&(this.backendURLs=r.metadata.urls,this.backendURLs.events&&f.setRestEventUrl(this.backendURLs.events+"/"),this.backendURLs.stats&&f.setRestStatsUrl(this.backendURLs.stats+"/"),this.backendURLs.config&&f.setConfigServiceUrl(this.backendURLs.config+"/"));var i=parseInt(1e3*parseInt(r.expires_in)*.9);return this.setupReauthTimer(i),this.renew=!1,this.initCallback&&this.initCallback(p.csError.success,v.csCallBackMessages.authSuccessful),this.elapsed=n,void this.completeProcess()}S.error("Authentication failed, but no error actions were defined in response."),this.sendNextRequest()}}},{key:"request",value:function(){var e=this;this.clearReauthTimer();var t=new Promise(function(t,n){e.tempResolve=t,e.tempReject=n});return this.tokenGenerator(this.renew,function(t,n){if(null!==t)return e.initCallback&&e.initCallback(p.csError.tokenGenerationError,t.toString()),e.rejectCb(new Error(e.name+": tokenGenerationError")),S.error("tokenGenerationError ",t),null;var r=f.authServiceUrl+"authenticate",i={client_id:e.userId+"@"+e.appId,code:n,grant_type:"authorization_code"};(0,m.sendPostRequest)(r,{"Content-Type":"application/x-www-form-urlencoded"},w,i).then(function(t){e.tempResolve(t)},function(t){e.tempReject(t)})}),t}},{key:"tokenGeneratorCreator",value:function(e,t){var n=this;return function(r,i){var a=null;if(!r&&null!==a)return i(null,a);var o={userID:n.userId,appID:n.appId,generateTurnCredentials:n.generateTurnCredentials};t&&(o.keyId=t),n.jwt.sign({alg:"HS256"},o,e).then(function(e){a=e,i(null,e)}).catch(function(e){i(e)})}}},{key:"createTokenGenerator",value:function(e){var t=this;return new Promise(function(n,r){var i=null;e.indexOf(":")>-1&&(i=h.strtohex(e.split(":")[0]),e=e.split(":")[1]),t.jwt.importKey(e).then(function(r){e=null;var a=t.tokenGeneratorCreator(r,i);n(a)}).catch(function(e){S.error(t.name+": could not import key ("+e+")"),r(e)})})}}]),t})();n.Authenticator=C},{"../browserapi/localstorage":20,"../config/callstatserrors":35,"../config/constants":36,"../config/settings":37,"../utility/base64":101,"../utility/csiologger":104,"../utility/json":109,"../utility/registry":112,"./jwt/jwt":54,"./jwt/jwttoken":55,"./xmlhttp":60,"./xmlhttpservice":61}],47:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.GenericEventHandler=void 0;var a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=r(e("../config/settings")),s=e("./xmlhttp"),c=e("../utility/registry"),u=r(e("../utility/csiologger")),l=(function(){function e(){i(this,e),this.credentials=c.Registry.getCredentials(),this.enabled=!1}return a(e,[{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1}},{key:"sendEvent",value:function(e,t){this.send(e,t).then(function(e){u.log("Got generic response: %o",e)}).catch(function(e){u.log("Got error for generic request",e)})}},{key:"send",value:function(e,t){if(!this.enabled)return new Promise(function(e,t){t(new Error("GenericEvent Error: not enabled"))});var n=this;return new Promise(function(r,i){var a={appID:n.credentials.appId,userID:encodeURIComponent(n.credentials.userId),version:o.version,eventType:e,data:t},c=o.baseUrl+"generics";(0,s.sendPostRequest)(c,{"Content-Type":"application/json"},5e3,a).then(function(e){r(e.getXhr().response)},function(e){i(e)})})}}]),e})();n.GenericEventHandler=l},{"../config/settings":37,"../utility/csiologger":104,"../utility/registry":112,"./xmlhttp":60}],48:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.ClockSync=void 0;var s=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},u=r(e("../config/settings")),l=e("./xmlhttp"),d=r(e("../utility/timestamps")),f=e("./xmlhttpservice"),h=e("../utility/registry"),p=r(e("../config/constants")),v=(function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"ClockSync"));return e.currentOffset=0,e.completed=!1,e}return o(t,f.XMLHttpService),s(t,[{key:"initiate",value:function(){return this.startTime=d.getCurrent(),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initiate",this).call(this)}},{key:"getSynchronizedTimestamp",value:function(){return d.getCurrent()+this.currentOffset}},{key:"getElapsed",value:function(){return this.isCompleted()?this.endTime-this.startTime:null}},{key:"getOffset",value:function(){return this.currentOffset}},{key:"reset",value:function(){this.currentOffset=0,this.offsetResults=[],this.startTime=0,this.endTime=0,c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this)}},{key:"request",value:function(){var e=u.baseUrl+"clockSync";return(0,l.sendGetRequest)(e,null,5e3)}},{key:"handleResponse",value:function(e){var t=e.getXhr(),n=e.getElapsed(),r=JSON.parse(t.response),i=d.getCurrent();this.handleMessage(r,n,i)}},{key:"handleMessage",value:function(e,t,n){var r=t/2;r>6e4?(h.Registry.getGenericEventHandler().sendEvent(p.logEvents.log,{msg:"latency > MAX_ALLOWED_LATENCY: clockSync reset"}),this.offsetResults=[]):this.addOffset(e,r,n),this.offsetResults.length>=5?(this.calculateOffset(),this.endTime=d.getCurrent(),this.completeProcess()):this.sendRequest()}},{key:"isCompleted",value:function(){return this.completed}},{key:"addOffset",value:function(e,t,n){var r=e.now+t-n;this.offsetResults.push(r)}},{key:"calculateOffset",value:function(){var e=this.offsetResults.reduce(function(e,t){return e+t});this.currentOffset=e/this.offsetResults.length,this.currentOffset=isNaN(this.currentOffset)?0:this.currentOffset,h.Registry.getGenericEventHandler().sendEvent(p.logEvents.log,{msg:"clockSync Done, offset is: "+this.currentOffset+"results length"+this.offsetResults.length}),this.offsetResults=[],this.completed=!0}}]),t})();n.ClockSync=v},{"../config/constants":36,"../config/settings":37,"../utility/registry":112,"../utility/timestamps":116,"./xmlhttp":60,"./xmlhttpservice":61}],49:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=(function(){function e(){r(this,e),this.connected=!1,this.reconnected=!1,this.conferenceUrl={}}return i(e,[{key:"setup",value:function(){return new Promise(function(e,t){e()})}},{key:"isReady",value:function(){return this.connected}},{key:"send",value:function(e){}}]),e})();n.CollectorConnection=a},{}],50:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.ConfigServiceGet=void 0;var o=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},c=e("../xmlhttp"),u=e("../xmlhttpservice"),l=e("../../utility/registry"),d=(function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"ConfigService"))}return a(t,u.XMLHttpService),o(t,[{key:"initiate",value:function(e){var n=this;return this.url=e,this.authToken=l.Registry.getAuthenticator().getToken(),this.authToken?s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initiate",this).call(this):new Promise(function(e,t){t(new Error(n.name+": authToken has to be string"))})}},{key:"getConfig",value:function(){return this.config}},{key:"getElapsed",value:function(){return this.isCompleted()?this.elapsed:null}},{key:"reset",value:function(){this.authToken=null,this.url=null,this.config=null,this.elapsed=0,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this)}},{key:"request",value:function(){var e={Authorization:"Bearer "+this.authToken};return(0,c.sendGetRequest)(this.url,e,2e3)}},{key:"handleResponse",value:function(e){var t=e.getXhr(),n=e.getElapsed();this.config=JSON.parse(t.response),this.elapsed=n,this.completeProcess()}}]),t})();n.ConfigServiceGet=d},{"../../utility/registry":112,"../xmlhttp":60,"../xmlhttpservice":61}],51:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.ConfigServicePost=void 0;var o=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},c=e("../xmlhttp"),u=e("./configserviceget"),l=(function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,u.ConfigServiceGet),o(t,[{key:"initiate",value:function(e,n){return this.body=n,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initiate",this).call(this,e)}},{key:"request",value:function(){var e={Authorization:"Bearer "+this.authToken,"Content-Type":"application/json"};return(0,c.sendPostRequest)(this.url,e,2e3,this.body)}}]),t})();n.ConfigServicePost=l},{"../xmlhttp":60,"./configserviceget":50}],52:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.ConfigServiceWrapper=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),s=e("./configserviceget"),c=e("./configservicepost"),u=r(e("../../config/settings")),l=e("../../utility/registry"),d=r(e("../../utility/csiologger")),f=(function(){function e(){i(this,e),this.internalConfigService=new s.ConfigServiceGet,this.appConfigService=new s.ConfigServiceGet,this.senderConfigService=new c.ConfigServicePost,this.defaultSenderConfig=null}return o(e,[{key:"initiateInternalConfig",value:function(){var e=this,t=l.Registry.getCredentials().getAppId();if(!t)return new Promise(function(t,n){d.log("appId has to be string"),n(new Error(e.internalConfigService.name+": appId has to be string"))});var n=u.configServiceUrl+t;return this.internalConfigService.initiate(n+"/configurations/internal")}},{key:"initiateAppConfig",value:function(){var e=this,t=l.Registry.getCredentials().getAppId();if(!t)return new Promise(function(t,n){d.log("appId has to be string"),n(new Error(e.appConfigService.name+": appId has to be string"))});var n=u.configServiceUrl+t;return this.appConfigService.initiate(n+"/configurations")}},{key:"initiateSenderConfig",value:function(e){var t=this;if(this.senderConfigService.getConfig())return new Promise(function(e,n){d.log("sender config already present"),n(new Error(t.senderConfigService.name+": sender config already present"))});var n=l.Registry.getCredentials().getAppId(),r=l.Registry.getCredentials().getUserId();if(!n||!r)return new Promise(function(e,n){d.log("appId and userId have to be string"),n(new Error(t.senderConfigService.name+": appId and userId have to be string"))});if(this.defaultSenderConfig=this.getCurrentVideoSenderConfig(e),!this.defaultSenderConfig)return new Promise(function(e,n){d.log("Could not obtain a sender config"),n(new Error(t.senderConfigService.name+": Could not obtain a sender config"))});var i=u.configServiceUrl+n,a={app_id:n,local_id:r,rtc_rtp_parameters:this.defaultSenderConfig};return this.senderConfigService.initiate(i+"/configurations",a)}},{key:"getInternalConfig",value:function(){return this.internalConfigService.getConfig()}},{key:"getAppDefaultConfig",value:function(){var e=this.appConfigService.getConfig(),t={peerConnection:null,media:null};return e.default?(e.default.peerConnection&&(t.peerConnection=e.default.peerConnection),e.default.media&&(t.media=e.default.media),t):t}},{key:"getAppRecommendedConfig",value:function(){var e=this.appConfigService.getConfig(),t={};return e.recommended?(e.recommended.peerConnection&&(t.peerConnection=e.recommended.peerConnection),e.recommended.media&&(t.media=e.recommended.media),t):t}},{key:"getSenderConfig",value:function(){var e=this.senderConfigService.getConfig();return e&&e.recommended&&e.recommended.sender?e.recommended.sender:null}},{key:"getDefaultSenderConfig",value:function(){return this.defaultSenderConfig?this.defaultSenderConfig:null}},{key:"getInternalElapsed",value:function(){return this.internalConfigService.getElapsed()}},{key:"getAppElapsed",value:function(){return this.appConfigService.getElapsed()}},{key:"getSenderElapsed",value:function(){return this.senderConfigService.getElapsed()}},{key:"getCurrentVideoSenderConfig",value:function(e){var t={encodings:[{maxBitrate:0}]},n=l.Registry.getConferenceManager().getConferenceForPc(e);if(!n)return d.warn("No conference found for PC, skipping"),null;if(n.getPeerConnectionManager().pcHandlers.size>1)return d.warn("Multiple PCs found, skipping"),null;if(!e.getSenders||"function"!=typeof e.getSenders)return d.warn("Get senders error"),t;for(var r=e.getSenders(),i=void 0,o=0;o<r.length;o+=1){var s=r[o];if("object"!==(void 0===s?"undefined":a(s))||!s.track||"object"!==a(s.track)||!s.track.kind)return d.warn("Access senders error"),null;if("video"===s.track.kind){if(i)return d.warn("Multiple video sender, skipping"),null;i=s}}if(!i)return d.warn("No video sender found"),null;if(!i.getParameters||"function"!=typeof i.getParameters)return d.warn("Sender getParameters error"),t;var c=i.getParameters();return"object"!==(void 0===c?"undefined":a(c))?null:("encodings"in c||(c.encodings=[]),0===c.encodings.length&&c.encodings.push({maxBitrate:0}),c)}}]),e})();n.ConfigServiceWrapper=f},{"../../config/settings":37,"../../utility/csiologger":104,"../../utility/registry":112,"./configserviceget":50,"./configservicepost":51}],53:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.ConnectionManager=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../config/constants")),o=e("./restcollectorconnection"),s=e("../utility/registry"),c=(function(){function e(){r(this,e),this.connection=null}return i(e,[{key:"setupCollectorConnection",value:function(e){this.connection=new o.RestCollectorConnection}},{key:"setup",value:function(){return this.connection?this.connection.setup():new Promise(function(e,t){t()})}},{key:"isReady",value:function(){return!!this.connection&&this.connection.isReady()}},{key:"send",value:function(e){this.connection?this.connection.send(e):s.Registry.getGenericEventHandler().sendEvent(a.logEvents.error,{msg:"Connection not available to the collector"})}}]),e})();n.ConnectionManager=c},{"../config/constants":36,"../utility/registry":112,"./restcollectorconnection":57}],54:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Jwt=void 0;var a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=r(e("../../utility/base64")),s=r(e("../../utility/csiologger")),c=e("../../utility/registry"),u=r(e("../../config/constants")),l=(function(){function e(){i(this,e),this.cryptotype=null,window.crypto&&window.crypto.subtle?(this.cryptotype="standard",this.subtlecrypto=window.crypto.subtle):window.crypto&&!window.crypto.subtle&&window.crypto.webkitSubtle?(this.cryptotype="webkit",this.subtlecrypto=window.crypto.webkitSubtle):window.msCrypto&&window.msCrypto.subtle?(this.cryptotype="ie",this.subtlecrypto=window.msCrypto.subtle):(this.subtlecrypto=null,s.info("WebCryptography API not supported in this browser.")),this.browserName=c.Registry.getEndpoint().getBrowserName()}return a(e,[{key:"sign",value:function(e,t,n){var r=this;return new Promise(function(i,a){"HS256"!==e.alg&&a("Use header.alg=HS256"),e=JSON.stringify(e),"string"!=typeof t&&(t=JSON.stringify(t));var c=o.urlencodeUnicode(e)+"."+o.urlencodeUnicode(t);window.csioReactNative&&window.csiosign(c,n,function(e,t){if(e)return s.log("Token sign error",e),void a(error);i(t)});var l=new ArrayBuffer(c.length),d=new Uint8Array(l),f={name:"HMAC"};"ie"!==r.cryptotype&&"webkit"!==r.cryptotype&&r.browserName!==u.browserName.edge||(f.hash={name:"sha-256"});for(var h=c.length-1;h>=0;h--)d[h]=c.charCodeAt(h);var p=r.subtlecrypto.sign(f,n,d);"ie"===r.cryptotype?(p.onerror=a,p.oncomplete=function(e){c=r.buildToken(e.target.result,c),i(c)}):p.then(function(e){c=r.buildToken(e,c),i(c)}).catch(function(e){a(e)})})}},{key:"buildToken",value:function(e,t){for(var n="",r=new Uint8Array(e),i=r.byteLength,a=0;a<i;a++)n+=String.fromCharCode(r[a]);return t+"."+o.urlencode(n)}},{key:"decode",value:function(e){try{var t=e.split(".")[1],n=o.decode(t);return JSON.parse(n)}catch(e){return s.error("Could not decode token. "),null}}},{key:"importKey",value:function(e){var t=this;return new Promise(function(n,r){if(window.csioReactNative)n(e);else{if("webkit"===t.cryptotype)for(;e.length<32;)e+="\0";var i={kty:"oct",k:o.urlencode(e),alg:"HS256"},a={name:"HMAC",hash:{name:"SHA-256"}};if("ie"===t.cryptotype?i.extractable=!1:i.ext=!1,"webkit"===t.cryptotype&&(a=null,i.use="sig"),"ie"===t.cryptotype||"webkit"===t.cryptotype){var s=JSON.stringify(i);i=new Uint8Array(s.length);for(var c=0;c<s.length;c++)i[c]=s.charCodeAt(c)}var u=t.subtlecrypto.importKey("jwk",i,a,!1,["sign"]);"ie"===t.cryptotype?(u.onerror=r,u.oncomplete=function(e){n(e.target.result)}):u.then(n).catch(r)}})}}]),e})();n.Jwt=l},{"../../config/constants":36,"../../utility/base64":101,"../../utility/csiologger":104,"../../utility/registry":112}],55:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.JwtToken=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=e("./jwt"),o=e("../../utility/registry"),s=(function(){function e(t){r(this,e),this.token=t,this.statsSubmissionInterval=15e3,this.collectSDP=!1,this.appId=null,this.userId=null,this.tokenPayload=null,this.jwt=new a.Jwt,this.expires=null,this.clockSync=o.Registry.getClockSync(),this.adaptiveStatsEnabled=!1,this.taasEnabled=!1,this.setupTokenPayload()}return i(e,[{key:"getToken",value:function(){return this.token}},{key:"getTaasEnabled",value:function(){return this.taasEnabled}},{key:"setupTokenPayload",value:function(){var e=this.jwt.decode(this.token);if(e){if(this.statsSubmissionInterval=parseInt(e.submissionInterval,10),this.collectSDP=e.collectSDP,this.adaptiveStatsEnabled=e.adaptiveStatsEnabled,this.taasEnabled=e.taasEnabled,this.appId=e.appID,this.userId=e.userID,navigator.mozGetUserMedia){var t=e.expiry.split(" ").join("T");this.expires=Date.parse(t)}else this.expires=new Date(e.expiry);o.Registry.getCredentials().setStatsSubmissionInterval(this.statsSubmissionInterval),o.Registry.getCredentials().setCollectSDP(this.collectSDP),o.Registry.getCredentials().setAdaptiveStatsEnabled(this.adaptiveStatsEnabled)}}},{key:"isValid",value:function(e){var t=this,n=!1;return null!==t.token&&t.appId===e.appId&&t.userId===encodeURIComponent(e.userId)&&new Date(this.clockSync.getSynchronizedTimestamp())<t.expires&&(n=!0),n}}]),e})();n.JwtToken=s},{"../../utility/registry":112,"./jwt":54}],56:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.PCTRunnerService=void 0;var a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=e("../utility/registry"),s=r(e("../utility/pctutility")),c=r(e("../config/constants")),u=r(e("../utility/csiologger")),l=(function(){function e(){i(this,e),this.interval=6e4,this.iceServers=[],this.iceServersIndex=0,this.timer=null,this.precalltest=o.Registry.getPreCallTest(),this.callInProgress=!1,this.precalltestIds=[]}return a(e,[{key:"handlePrecallTestResults",value:function(e,t){var n=o.Registry.getCallbacks().get(c.callbackFunctions.preCallTestResults),r=o.Registry.getCallbacks().get(c.callbackFunctions.preCallTest);if(e&&(this.precalltestIds.push(e.id),e.tests&&e.tests.ice&&(""===e.tests.ice.turnIpAddress&&delete e.tests.ice.turnIpAddress,""===e.tests.ice.turnIpVersion&&delete e.tests.ice.turnIpVersion,""===e.tests.ice.turnTransport&&delete e.tests.ice.turnTransport),s.addPctMeasurementToAggregator(e),o.Registry.getEventMessageBuilder().make(c.precalltestEvents.results,null,null,{results:e})),r&&r(e),n){if(t){var i={msg:"precalltest error: "+t};return u.warn("precalltest error:",i),o.Registry.getGenericEventHandler().sendEvent(c.logEvents.log,i),void n(c.callstatsAPIReturnStatus.failure,null)}var a=s.getPublicPrecalltestResults(e);n(c.callstatsAPIReturnStatus.success,a)}}},{key:"precalltestRunnerCallback",value:function(e,t){this.handlePrecallTestResults(e,t),this.iceServersIndex++,this.startPrecallTest()}},{key:"doPrecalltestCallback",value:function(e,t){this.handlePrecallTestResults(e,t)}},{key:"start",value:function(e,t){this.iceServers=e,this.interval=t,this.iceServersIndex=0,this.timer&&clearTimeout(this.timer),this.startPrecallTest()}},{key:"startPrecallTest",value:function(){var e=this;if(!this.callInProgress){var t=this.iceServers[this.iceServersIndex];if(!t){var n=o.Registry.getCallbacks().get(c.callbackFunctions.connectionRecommendation);return n&&n(o.Registry.getPCTAggregator().getRanking()),void setTimeout(function(){e.start(e.iceServers,e.interval)},this.interval)}var r={};r.urls=t.urls,r.username=t.username,r.credential=t.credential;var i=t.label;this.precalltest.start([r],i,!0,this.precalltestRunnerCallback.bind(this))}}},{key:"doPrecalltest",value:function(e,t,n){this.precalltest.start(e,t,n,this.doPrecalltestCallback.bind(this))}},{key:"setCallInProgress",value:function(e){this.callInProgress=e,this.callInProgress?this.timer&&clearTimeout(this.timer):(this.iceServersIndex=0,this.startPrecallTest())}},{key:"stop",value:function(){this.timer&&clearTimeout(this.timer),this.interval=6e4,this.iceServers=[],this.iceServersIndex=0,this.timer=null}},{key:"getPrecallTestIds",value:function(){return this.precalltestIds}},{key:"resetPrecallTestIds",value:function(){this.precalltestIds=[]}}]),e})();n.PCTRunnerService=l},{"../config/constants":36,"../utility/csiologger":104,"../utility/pctutility":111,"../utility/registry":112}],57:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.RestCollectorConnection=void 0;var s=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),c=e("../utility/registry"),u=e("./xmlhttp"),l=e("./collectorconnection"),d=e("./restrelays"),f=r(e("../config/constants")),h=r(e("../utility/csiologger")),p=(function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.relays=new d.RestRelays,e}return o(t,l.CollectorConnection),s(t,[{key:"isReady",value:function(){return!0}},{key:"send",value:function(e){var t={"Content-Type":"application/json",Authorization:"Bearer "+c.Registry.getAuthenticator().getToken()},n=e.eventType,r=e.confID,i=e.ucID,a=this.relays,o=a.getRequestUrl(n,r,i);if(o){var s=this.getMessage(n,e);h.log("sending ",o,e),(0,u.sendPostRequest)(o,t,5e3,s).then(function(t){if(t&&t.xhr){var i=JSON.parse(t.xhr.response);i&&"success"!==i.status&&(c.Registry.getGenericEventHandler().sendEvent(f.logEvents.restResponseError,{msg:"response failure "+r+":"+n+":"+i.msg+":"+i.status+JSON.stringify(e)}),h.error("Response error:",i.msg,e),"Token has expired"===i.msg&&c.Registry.getAuthenticator().reAuthenticate()),a.handleResponse(n,i,r)}else h.log("Response for request is null")},function(e){h.error(e)})}else h.warn("No action for message type: "+n)}},{key:"getMessage",value:function(e,t){delete t.confID,delete t.channel,delete t.token,delete t.appID,delete t.action,delete t.ucID,delete t.version,delete t.timeShift;var n=decodeURIComponent(t.localID);t.localID=n;var r=decodeURIComponent(t.remoteID);return t.remoteID=r,e===f.callstatsChannels.processedStats&&(t.eventType="stats"),t}}]),t})();n.RestCollectorConnection=p},{"../config/constants":36,"../utility/csiologger":104,"../utility/registry":112,"./collectorconnection":49,"./restrelays":58,"./xmlhttp":60}],58:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r,i){"success"===n.status?e&&e(n,r):t&&t(n)}}Object.defineProperty(n,"__esModule",{value:!0}),n.RestRelays=void 0;var o=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),s=r(e("../config/constants")),c=r(e("../config/settings")),u=e("../utility/registry"),l=e("../utility/url"),d=r(e("../utility/csiologger")),f=(function(){function e(){var t;i(this,e),this.items=(t=a(),new Map([[s.fabricEvent.fabricTerminated,new h(c.restEventUrl,"/events/fabric/terminated",t)],[s.fabricEvent.audioMute,new h(c.restEventUrl,"/events/media/actions",t)],[s.fabricEvent.audioUnmute,new h(c.restEventUrl,"/events/media/actions",t)],[s.fabricEvent.videoPause,new h(c.restEventUrl,"/events/media/actions",t)],[s.fabricEvent.videoResume,new h(c.restEventUrl,"/events/media/actions",t)],[s.fabricEvent.screenShareStart,new h(c.restEventUrl,"/events/media/actions",t)],[s.fabricEvent.screenShareStop,new h(c.restEventUrl,"/events/media/actions",t)],[s.fabricEvent.activeDeviceList,new h(c.restEventUrl,"/events/devices/list",t)],[s.fabricEvent.applicationErrorLog,new h(c.restEventUrl,"/events/app/logs",t)],[s.fabricEvent.dominantSpeaker,new h(c.restEventUrl,"/events/dominantspeaker",t)],[s.fabricEvent.fabricHold,new h(c.restEventUrl,"/events/fabric/actions",t)],[s.fabricEvent.fabricResume,new h(c.restEventUrl,"/events/fabric/actions",t)],[s.fabricEvent.callUnAnswered,new h(c.restEventUrl,"/events/fabric/actions",t)],[s.internalFabricEvent.oneWayMediaStart,new h(c.restEventUrl,"/events/fabric/disruptions",t)],[s.internalFabricEvent.oneWayMediaStop,new h(c.restEventUrl,"/events/fabric/disruptions",t)],[s.internalFabricEvent.circuitBreaker,new h(c.restEventUrl,"/events/fabric/disruptions",t)],[s.internalFabricEvent.fabricSetup,new h(c.restEventUrl,"/events/fabric/setup",t)],[s.fabricEvent.callDetails,new h(c.restEventUrl,"/events/fabric/details",t)],[s.fabricEvent.fabricSetupFailed,new h(c.restEventUrl,"/events/fabric/setupfailed",t)],[s.internalFabricEvent.userJoined,new h(c.restEventUrl,"",a(function(e,t){t=decodeURIComponent(t);var n=u.Registry.getConferenceManager().get(t);n&&(d.log("UcId is - ",e.ucID,t),n.setUcId(e.ucID),u.Registry.getTransmissionManager().trySend())}))],[s.internalFabricEvent.userLeft,new h(c.restEventUrl,"/events/user/left",t)],[s.internalFabricEvent.userAlive,new h(c.restEventUrl,"/events/user/alive",t)],[s.internalFabricEvent.fabricTransportSwitch,new h(c.restEventUrl,"/events/fabric/transportchange",t)],[s.internalFabricEvent.mediaPlaybackStart,new h(c.restEventUrl,"/events/media/pipeline",t)],[s.internalFabricEvent.mediaPlaybackSuspended,new h(c.restEventUrl,"/events/media/pipeline",t)],[s.internalFabricEvent.mediaPlaybackStalled,new h(c.restEventUrl,"/events/media/pipeline",t)],[s.internalFabricEvent.ssrcMap,new h(c.restEventUrl,"/events/ssrcmap",t)],[s.internalFabricEvent.connectedDeviceList,new h(c.restEventUrl,"/events/devices/list",t)],[s.internalFabricEvent.sdpSubmission,new h(c.restEventUrl,"/events/sdp",t)],[s.internalFabricEvent.iceDisruptionStart,new h(c.restEventUrl,"/events/ice/status",t)],[s.internalFabricEvent.iceDisruptionEnd,new h(c.restEventUrl,"/events/ice/status",t)],[s.internalFabricEvent.iceConnectionDisruptionStart,new h(c.restEventUrl,"/events/ice/status",t)],[s.internalFabricEvent.iceConnectionDisruptionEnd,new h(c.restEventUrl,"/events/ice/status",t)],[s.internalFabricEvent.iceAborted,new h(c.restEventUrl,"/events/ice/status",t)],[s.internalFabricEvent.iceTerminated,new h(c.restEventUrl,"/events/ice/status",t)],[s.internalFabricEvent.iceFailed,new h(c.restEventUrl,"/events/ice/status",t)],[s.internalFabricEvent.iceRestarted,new h(c.restEventUrl,"/events/ice/status",t)],[s.internalFabricEvent.fabricDropped,new h(c.restEventUrl,"/events/fabric/status",t)],[s.customEvents.event,new h(c.restEventUrl,"/events/customevent",t)],[s.customEvents.conferenceSummary,new h(c.restEventUrl,"/events/conferencesummary",t)],[s.callstatsChannels.processedStats,new h(c.restStatsUrl,"/stats",t)],[s.customEvents.stats,new h(c.restStatsUrl,"/customstats",t)],[s.internalFabricEvent.fabricStateChange,new h(c.restEventUrl,"/events/fabric/statechange",t)],[s.callstatsChannels.userFeedback,new h(c.restEventUrl,"/events/feedback",t)],[s.precalltestEvents.results,new h(c.restEventUrl,"/events/precall",t)],[s.precalltestEvents.associate,new h(c.restEventUrl,"/events/precall",t)],[s.internalFabricEvent.userDetails,new h(c.restEventUrl,"/events/userdetails",t)]]))}return o(e,[{key:"getRequestUrl",value:function(e,t,n){return this.items.has(e)?this.items.get(e).getRequestUrl(e,t,n):(d.warn("EventType Unsupported ",e),null)}},{key:"handleResponse",value:function(e,t,n){this.items.has(e)?this.items.get(e).handleResponse(t,n,e):d.warn("No response handler for event type "+e)}}]),e})(),h=(function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i(this,e),this.baseUrl=t,this.urlAppendix=n,this.responseHandler=r}return o(e,[{key:"getRequestUrl",value:function(e,t,n){return this.makeRequestUrl(e,t,n),this.requestUrl.toString()}},{key:"makeRequestUrl",value:function(e,t,n){e===s.precalltestEvents.results?this.requestUrl=new l.Url(this.baseUrl,u.Registry.getCredentials().getAppId(),this.urlAppendix):(e===s.internalFabricEvent.userJoined&&n&&(n=""),this.requestUrl=new l.Url(this.baseUrl,u.Registry.getCredentials().getAppId()+"/conferences/"+t,n,this.urlAppendix))}},{key:"handleResponse",value:function(e,t,n){this.responseHandler(e,t,n)}}]),e})();n.RestRelays=f},{"../config/constants":36,"../config/settings":37,"../utility/csiologger":104,"../utility/registry":112,"../utility/url":117}],59:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.TransmissionManager=void 0;var a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=r(e("../utility/timestamps")),s=e("../collections/cache"),c=e("../utility/registry"),u=r(e("../config/constants")),l=r(e("../utility/csiologger")),d=(function(){function e(){i(this,e),this.cache=[],this.connectionManager=c.Registry.getConnectionManager(),this.lastTS=0,this.timerStarted=!1,this.lastUserAliveTS={}}return a(e,[{key:"send",value:function(e){(e.isCachable()||e.canBeSent())&&(this.cache[e.getConferenceId()]||(this.cache[e.getConferenceId()]=new s.Cache),this.cache[e.getConferenceId()].add(e,e.isPriority()),this.trySend())}},{key:"trySend",value:function(){if(this.connectionManager.isReady())return this.timerStarted?void 0:this.timeToSend()?void(this.sendMessage()&&this.startTimer()):void(this.getCacheLength()>0&&this.startTimer());this.setupConnection()}},{key:"setupConnection",value:function(){this.connectionManager.setup().then(function(){l.log("Connected to connectionManager")}).catch(function(e){return l.log("Could not connect to connectionManager",e)})}},{key:"canSendUserAlive",value:function(e,t){return!(this.lastUserAliveTS[t]&&e-this.lastUserAliveTS[t]<9e3)}},{key:"sendMessage",value:function(){var e=void 0,t=void 0;if(0===this.getCacheLength())return!1;for(var n in this.cache)if(this.cache.hasOwnProperty(n)&&(t=n,(e=this.cache[t].peak())&&e.canBeSent()))break;if(!e||!e.canBeSent())return!1;if(e=this.cache[t].pop(),this.lastTS=o.getCurrent(),e.eventType===u.internalFabricEvent.userAlive){if(!this.canSendUserAlive(this.lastTS,t))return!0;this.lastUserAliveTS[t]=this.lastTS}return l.log("sending message type :",e.eventType,e.toJson()),this.connectionManager.send(e.toJson()),!0}},{key:"startTimer",value:function(){var e=this;this.timerStarted||0!=this.getCacheLength()&&(this.timerStarted=!0,setTimeout(function(){e.timerStarted=!1,e.trySend()},200))}},{key:"timeToSend",value:function(){return o.getCurrent()>=this.lastTS+200}},{key:"getCacheLength",value:function(){var e=0;for(var t in this.cache)this.cache.hasOwnProperty(t)&&(e+=this.cache[t].length());return e}},{key:"updateConferenceId",value:function(e){var t=u.tmpConferenceId;this.cache[t]&&this.cache[t].updateConferenceId(e)}}]),e})();n.TransmissionManager=d},{"../collections/cache":23,"../config/constants":36,"../utility/csiologger":104,"../utility/registry":112,"../utility/timestamps":116}],60:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n,r,i){return new Promise(function(a,o){var d,f=null,h=new XMLHttpRequest,p=u.Registry.getEndpoint().getBrowserName();if(h){for(var v in d=s.getCurrent(),h.open(e,t),p!==c.browserName.msie&&(h.timeout=r),n)n.hasOwnProperty(v)&&h.setRequestHeader(v,n[v]);var g=null;if("POST"===e){if("application/x-www-form-urlencoded"===n["Content-Type"]){var y=[];for(var m in i)i.hasOwnProperty(m)&&y.push(encodeURIComponent(m)+"="+encodeURIComponent(i[m]));g=y.join("&")}"application/json"===n["Content-Type"]&&(g=JSON.stringify(i))}h.onload=function(){f=s.getCurrent();var e=new l(h,f-d);a(e)},h.ontimeout=function(){o(new Error("connection timeout"))},h.onreadystatechange=function(){4===h.readyState&&0===h.status&&o(new Error("no server response received"))},h.send(g)}else o(new Error("creating instance failed"))})}Object.defineProperty(n,"__esModule",{value:!0});var o=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})();n.sendGetRequest=function(e,t,n){return a("GET",e,t,n,null)},n.sendPostRequest=function(e,t,n,r){return a("POST",e,t,n,r)};var s=r(e("../utility/timestamps")),c=r(e("../config/constants")),u=e("../utility/registry"),l=(function(){function e(t,n){i(this,e),this.xhr=t,this.elapsed=n}return o(e,[{key:"getXhr",value:function(){return this.xhr}},{key:"getElapsed",value:function(){return this.elapsed}}]),e})()},{"../config/constants":36,"../utility/registry":112,"../utility/timestamps":116}],61:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.XMLHttpService=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=e("../utility/sigmoid"),o=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../utility/csiologger")),s=100,c=1e4,u=(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"XMLHttpService",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c;r(this,e),this.name=t,this.minRetryTimeout=n,this.sigmoid=new a.Sigmoid(i-n,15,.5),this.reset()}return i(e,[{key:"reset",value:function(){this.inProgress=!1,this.completed=!1,this.resolveCb&&this.rejectCb(new Error(this.name+": resetting")),this.resolveCb=null,this.rejectCb=null}},{key:"initiate",value:function(){var e=this;if(this.inProgress)return new Promise(function(t,n){n(new Error(e.name+": in progress"))});var t=new Promise(function(t,n){e.resolveCb=t,e.rejectCb=n});return this.inProgress=!0,this.sendRequest(),t}},{key:"isCompleted",value:function(){return this.completed}},{key:"handleSendError",value:function(e){o.log(this.name+": send next request ("+e+")"),this.sendNextRequest()}},{key:"handleResponseProxy",value:function(e){this.handleResponse(e),this.resetTimeout()}},{key:"handleResponse",value:function(e){o.error(this.name+": handleResponse() not implemented"),this.completeProcess()}},{key:"completeProcess",value:function(){this.inProgress=!1,this.completed=!0,this.resolveCb.apply(this,arguments)}},{key:"request",value:function(){return o.error(this.name+": request() not implemented!"),new Promise(function(e,t){e()})}},{key:"sendRequest",value:function(){if(this.inProgress){var e=this.request();e&&e.then(this.handleResponseProxy.bind(this),this.handleSendError.bind(this))}}},{key:"sendNextRequest",value:function(){setTimeout(this.sendRequest.bind(this),this.getTimeout())}},{key:"resetTimeout",value:function(){this.sigmoid.reset()}},{key:"getTimeout",value:function(){return this.minRetryTimeout+this.sigmoid.getActual()}}]),e})();n.XMLHttpService=u},{"../utility/csiologger":104,"../utility/sigmoid":114}],62:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.CircuitBreakerEvent=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../config/constants")),o=(function(){function e(t,n){r(this,e),this.circuitBreakerType=t,this.ssrc=n}return i(e,[{key:"getCircuitBreakerType",value:function(){return this.circuitBreakerType}},{key:"getContent",value:function(){return{disruptionType:this.circuitBreakerType,ssrc:this.ssrc.toString()}}}],[{key:"isBadTrack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(!e)return!0;var t=e.getRequestedMeasurement();return!t||t.getReportType()===a.reportType.remote&&e.getStreamType()===a.streamType.outbound}}]),e})();n.CircuitBreakerEvent=o},{"../config/constants":36}],63:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.IntervalStatsMonitor=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),u=r(e("../utility/timestamps")),l=r(e("../config/constants")),d=r(e("./validator")),f=(function(){function e(t){o(this,e),this.hasMultipleRecords=!1,this.currentStats=t,this.previousStats=t,this.previousCallBackStats=t,this.previousStatsTime=u.getCurrent(),this.previousCallBackStatsTime=u.getCurrent()}return c(e,[{key:"setCurrent",value:function(e){this.currentStats=e,this.hasMultipleRecords=!0}},{key:"outdate",value:function(e){e===l.statsDestination.backend?(this.previousStats=this.currentStats,this.previousStatsTime=u.getCurrent()):(this.previousCallBackStats=this.currentStats,this.previousCallBackStatsTime=u.getCurrent())}},{key:"getCurrent",value:function(){return this.currentStats}},{key:"multipleRecords",value:function(){return this.hasMultipleRecords}},{key:"getPrevious",value:function(e){return e===l.statsDestination.backend?this.previousStats:this.previousCallBackStats}},{key:"getElapsedTime",value:function(e){return u.getCurrent()-(e===l.statsDestination.backend?this.previousStatsTime:this.previousCallBackStatsTime)}}]),e})(),h=(function(){function e(){o(this,e),this.measurementsHolderMap=new Map}return c(e,[{key:"set",value:function(e,t){if(this.measurementsHolderMap.has(e))this.measurementsHolderMap.get(e).setCurrent(t);else{var n=new f(t);this.measurementsHolderMap.set(e,n)}}},{key:"delete",value:function(e){e&&this.measurementsHolderMap.has(e)&&this.measurementsHolderMap.delete(e)}},{key:"getIntervalStats",value:function(e){for(var t=new Map,n=[].concat(a(this.measurementsHolderMap.keys())),r=0,i=n.length;r<i;r+=1){var o=n[r],s=this.measurementsHolderMap.get(o);if(s){var c=this.getIntervalStat(s,e);t.set(o,c),s.outdate(e)}}return t}},{key:"getTotalBytes",value:function(e){var t=e.getStreamType()===l.streamType.inbound?e.getReceivedBytes():e.getSentBytes();return d.checkForPositiveValue(t)?t:null}},{key:"getTotalPackets",value:function(e){var t=e.getStreamType()===l.streamType.inbound?e.getReceivedPackets():e.getSentPackets();return d.checkForPositiveValue(t)?t:null}},{key:"getTotalLostPackets",value:function(e){var t=e.getLostPackets();return d.checkForPositiveValue(t)?t:null}},{key:"getIntervalBitrate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.getTotalBytes(e),i=this.getTotalBytes(t);if(!d.checkForPositiveValue(r)||!d.checkForPositiveValue(i)||!d.checkForPositiveValue(n))return null;var a=(8*r-8*i)/Math.max(n,1);return d.checkForPositiveValue(a)?a:null}},{key:"getIntervalPacketLoss",value:function(e,t,n){var r=this.getTotalLostPackets(e);if(!n)return d.checkForPositiveValue(r)?r:null;var i=this.getTotalLostPackets(t);if(!d.checkForPositiveValue(r)||!d.checkForPositiveValue(i))return null;var a=r-i;return d.checkForPositiveValue(a)?a:null}},{key:"getIntervalPacketRate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!d.checkForPositiveValue(n))return null;var r=this.getTotalPackets(e),i=this.getTotalPackets(t);if(!d.checkForPositiveValue(r)<0||!d.checkForPositiveValue(i))return null;var a=(r-i)/(Math.max(n,1)/1e3);return d.checkForPositiveValue(a)?a:null}},{key:"getIntervalFractionLost",value:function(e,t,n){var r=this.getIntervalPacketLoss(e,t,n),i=this.getTotalPackets(e)-this.getTotalPackets(t);if(!d.checkForPositiveValue(r)||!d.checkForPositiveValue(i))return null;var a=r/Math.max(i+r,1);return d.checkForPositiveValue(a)?a:null}},{key:"getIntervalStat",value:function(e,t){var n=this,r=e.getPrevious(t),i=e.getCurrent();if(!r||!i)return[];for(var a=[],o=e.getElapsedTime(t),s=0,c=i.length;s<c;s+=1)!(function(t,s){var c=i[t],u=r.find(function(e){return e.getSSRC()===c.getSSRC()&&e.getStreamType()===c.getStreamType()&&e.getReportType()===c.getReportType()});if(u){var l={csioIntMs:o,csioIntBRKbps:n.getIntervalBitrate(c,u,o),csioIntPktLoss:n.getIntervalPacketLoss(c,u,e.multipleRecords()),csioIntPR:n.getIntervalPacketRate(c,u,o),csioIntFL:n.getIntervalFractionLost(c,u,e.multipleRecords()),ssrc:c.getSSRC(),streamType:c.getStreamType(),reportType:c.getReportType()};a.push(l)}})(s);return a}}],[{key:"mergeIntervalStats",value:function(e,t){for(var n=function(e){return e.ssrc,e.streamType,e.reportType,i(e,["ssrc","streamType","reportType"])},r=0,a=e.length;r<a;r+=1){var o=e[r];t.has(o.pcHash)&&(function(){var e=t.get(o.pcHash)||[],r=o.ssrc?o.ssrc:o.data&&o.data.ssrc,i=o.streamType?o.streamType:o.streamType&&o.data.streamType,a=o.reportType?o.reportType:o.reportType&&o.data.reportType,c=e.find(function(e){return e.ssrc===r&&e.streamType===i&&e.reportType===a});c&&(o.data=s({},o.data,n(c)))})()}return e}}]),e})();n.IntervalStatsMonitor=h},{"../config/constants":36,"../utility/timestamps":116,"./validator":99}],64:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Measurement=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=e("./resolution"),o=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("./validator")),s=(function(){function e(){r(this,e),this.pcHash=null,this.ssrc=null,this.streamType=null,this.mediaType=null,this.reportType=null,this.resolution=null,this.frameRateReceived=null,this.frameHeight=null,this.frameWidth=null,this.droppedFramesNum=null,this.framesReceived=null,this.rtt=null,this.jitter=null,this.lostPackets=-1,this.receivedPackets=-1,this.sentPackets=-1,this.discardedPackets=-1,this.sentBytes=-1,this.receivedBytes=-1,this.fractionLost=-1,this.googEchoCancellationReturnLoss=-1,this.googEchoCancellationReturnLossEnhancement=-1,this.track=null}return i(e,null,[{key:"make",value:function(t,n,r,i,a,s,c,u,l,d,f,h,p,v,g,y,m,b,k,S,w,C){var T=new e,_=function(e,t){-1===[void 0,null].indexOf(t)&&(T[e]=t)};return _("pcHash",t),_("ssrc",n),_("streamType",r),_("mediaType",i),_("reportType",a),_("frameRateReceived",s),_("frameHeight",o.checkForNan(parseInt(c,10))),_("frameWidth",o.checkForNan(parseInt(u,10))),_("droppedFramesNum",l),_("framesReceived",d),_("rtt",f),_("jitter",h),_("lostPackets",p),_("receivedPackets",v),_("sentPackets",g),_("discardedPackets",y),_("sentBytes",m),_("receivedBytes",b),_("fractionLost",k),_("googEchoCancellationReturnLoss",S),_("googEchoCancellationReturnLossEnhancement",w),_("track",C),T.setFrameRateReceived(s),T}}]),i(e,[{key:"getPcHash",value:function(){return this.pcHash}},{key:"getSSRC",value:function(){return this.ssrc}},{key:"getStreamType",value:function(){return this.streamType}},{key:"getMediaType",value:function(){return this.mediaType}},{key:"getReportType",value:function(){return this.reportType}},{key:"getResolution",value:function(){return this.resolution?this.resolution.toString():null}},{key:"getFrameRateReceived",value:function(){return this.frameRateReceived}},{key:"getFrameHeight",value:function(){return this.frameHeight}},{key:"getFrameWidth",value:function(){return this.frameWidth}},{key:"getDroppedFramesNum",value:function(){return this.droppedFramesNum}},{key:"getFramesReceived",value:function(){return this.framesReceived}},{key:"setFrameRateReceived",value:function(e){this.frameRateReceived=e,void 0!==this.frameRateReceived&&void 0!==this.frameWidth&&void 0!==this.frameHeight&&this.frameWidth>0&&this.frameHeight>0?this.resolution=new a.Resolution(this.frameWidth,this.frameHeight,this.frameRateReceived):this.resolution=null}},{key:"getJitter",value:function(){return this.jitter}},{key:"getRTT",value:function(){return this.rtt}},{key:"getLostPackets",value:function(){return this.lostPackets}},{key:"getDiscardedPackets",value:function(){return this.discardedPackets}},{key:"getReceivedPackets",value:function(){return this.receivedPackets}},{key:"getSentPackets",value:function(){return this.sentPackets}},{key:"getSentBytes",value:function(){return this.sentBytes}},{key:"getReceivedBytes",value:function(){return this.receivedBytes}},{key:"setFractionLost",value:function(e){this.fractionLost=void 0===e?null:e}},{key:"getFractionLost",value:function(){return this.fractionLost}},{key:"getGoogEchoCancellationReturnLoss",value:function(){return this.googEchoCancellationReturnLoss}},{key:"getGoogEchoCancellationReturnLossEnhancement",value:function(){return this.googEchoCancellationReturnLossEnhancement}},{key:"extractTrack",value:function(){var e=this.track;return this.track=null,e}},{key:"toString",value:function(){return"pcHash: "+this.pcHash+", ssrc: "+this.ssrc+", streamType: "+this.streamType+", mediaType: "+this.mediaType+", reportType: "+this.reportType+", frameRateReceived: "+this.frameRateReceived+", frameHeight: "+this.frameHeight+", frameWidth: "+this.frameWidth+", droppedFramesNum: "+this.droppedFramesNum+", rtt: "+this.rtt+", jitter: "+this.jitter+", lostPackets: "+this.lostPackets+", receivedPackets: "+this.receivedPackets+", sentPackets: "+this.sentPackets+", discardedPackets: "+this.discardedPackets+", sentBytes: "+this.sentBytes+", receivedBytes: "+this.receivedBytes+", fractionLost: "+this.fractionLost+", googEchoCancellationReturnLoss: "+this.googEchoCancellationReturnLoss+", googEchoCancellationReturnLossEnhancement: "+this.googEchoCancellationReturnLossEnhancement}}]),e})();n.Measurement=s},{"./resolution":83,"./validator":99}],65:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;r(this,e),this.audioSsrc=t,this.videoSsrc=n,this.estimatedAudioDelay=i,this.estimatedVideoDelay=a}return i(e,[{key:"getAudioSSRC",value:function(){return this.audioSsrc}},{key:"getVideoSSRC",value:function(){return this.videoSsrc}},{key:"setAudioDelay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.audioSsrc=e,this.estimatedAudioDelay=t}},{key:"setVideoDelay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.videoSsrc=e,this.estimatedVideoDelay=t}},{key:"getAudioDelay",value:function(){return this.estimatedAudioDelay}},{key:"getVideoDelay",value:function(){return this.estimatedVideoDelay}},{key:"getContent",value:function(){return{audioSsrc:this.audioSsrc.toString(),videoSsrc:this.videoSsrc.toString(),estimatedAudioDelay:this.estimatedAudioDelay,estimatedVideoDelay:this.estimatedVideoDelay}}}]),e})();n.AvDeSyncHolder=a},{}],66:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.AVDeSyncObserver=void 0;var o=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),s=r(e("../../config/constants")),c=r(e("../validator")),u=e("./avdesync/avdesyncholder"),l=(function(){function e(){a(this,e),this.avEstimatedDelays=new Map}return o(e,[{key:"isValidTrack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(!e)return!1;var t=e.getRequestedMeasurement();return!!t&&t.getReportType()===s.reportType.local&&e.getStreamType()===s.streamType.inbound}},{key:"getPCHash",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(!e)return null;var t=e.getRequestedMeasurement();return t?t.getPcHash():null}},{key:"getEstimatedDelay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(!e)return null;var t=e.getTrack();if(!t||!t.data)return null;var n=parseFloat(t.data.googCurrentDelayMs);return c.isNumber(n)?n:null}},{key:"isAVDeSync",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Math.abs(e-t);return e>t?n>90:t>e&&n>185}},{key:"accept",value:function(){for(var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(function(t){return e.isValidTrack(t)}),n=0,r=t.length;n<r;n+=1){var a=t[n],o=this.getPCHash(a),l=a.getSSRC(),d=this.getEstimatedDelay(a);this.avEstimatedDelays.has(o)||this.avEstimatedDelays.set(o,new u.AvDeSyncHolder);var f=this.avEstimatedDelays.get(o);a.getMediaType()===s.mediaType.audio?f.setAudioDelay(l,d):a.getMediaType()===s.mediaType.video&&f.setVideoDelay(l,d)}for(var h=[].concat(i(this.avEstimatedDelays.values())),p=0,v=h.length;p<v;p+=1)!(function(n,r){var i=h[p],a=i.getAudioDelay(),o=i.getVideoDelay();if(!c.isNumber(a)||!c.isNumber(o))return"continue";var s=e.isAVDeSync(a,o),u=t.find(function(e){return e.getSSRC()===i.getAudioSSRC()}),l=t.find(function(e){return e.getSSRC()===i.getVideoSSRC()});u&&l&&(u.metrics&&(u.metrics.csioAvDesync=s),l.metrics&&(l.metrics.csioAvDesync=s))})()}},{key:"toString",value:function(){return"AVDeSyncObserver"}}]),e})();n.AVDeSyncObserver=l},{"../../config/constants":36,"../validator":99,"./avdesync/avdesyncholder":65}],67:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.CircuitBreakerObserver=void 0;var a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=e("./circuitbreakerobserver/rtcptimeout/rtcptimeoutobserver"),s=e("./circuitbreakerobserver/mediatimeout/mediatimeoutobserver"),c=e("./circuitbreakerobserver/mediausability/mediausabilityobserver"),u=e("./circuitbreakerobserver/congestion/congestionobserver"),l=r(e("../../utility/timestamps")),d=e("../../utility/registry"),f=r(e("../../config/constants")),h=(function(){function e(t){i(this,e),this.notifierCallback=t,this.rtcpTimeoutObserver=new o.RTCPTimeoutObserver,this.mediaTimeoutObserver=new s.MediaTimoutObserver,this.mediaUsabilityObserver=new c.MediaUsabilityObserver,this.congestionObserver=new u.CongestionObserver,this.lastReportTime=l.getCurrent()}return a(e,[{key:"isDeadTrack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=e&&e.getRequestedMeasurement();if(!t)return!0;if(e.getStreamType()===f.streamType.inbound){if(t.getReceivedBytes()<1)return!0}else if(t.getSentBytes()<1)return!0;return!e.lastTrack||!e.lastTrack.data||!e.lastTrack.data.mimeType&&!e.lastTrack.data.googCodecName}},{key:"accept",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(t){var n=t.filter(function(t){return!1===e.isDeadTrack(t)}),r=l.getCurrent(),i=this.rtcpTimeoutObserver.check(n),a=this.mediaTimeoutObserver.check(n),o=this.mediaUsabilityObserver.check(n),s=this.congestionObserver.check(n);i&&i.length>0&&r-this.lastReportTime>3e4&&(this.lastReportTime=r,this.handleUserCallbackEvent(i),this.notifierCallback(i)),a&&a.length>0&&r-this.lastReportTime>3e4&&(this.lastReportTime=r,this.handleUserCallbackEvent(a),this.notifierCallback(a)),o&&o.length>0&&r-this.lastReportTime>3e4&&(this.lastReportTime=r,this.handleUserCallbackEvent(o),this.notifierCallback(o)),s&&s.length>0&&r-this.lastReportTime>3e4&&(this.lastReportTime=r,this.handleUserCallbackEvent(s),this.notifierCallback(s))}}},{key:"handleUserCallbackEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=d.Registry.getCallbacks().get(f.callbackFunctions.mediaDisruption);t&&"function"==typeof t&&e.forEach(function(e){var n={type:f.mediaDisruptionCallbackType.circuitBreaker,payload:e.getContent()};t(n)})}}]),e})();n.CircuitBreakerObserver=h},{"../../config/constants":36,"../../utility/registry":112,"../../utility/timestamps":116,"./circuitbreakerobserver/congestion/congestionobserver":68,"./circuitbreakerobserver/mediatimeout/mediatimeoutobserver":70,"./circuitbreakerobserver/mediausability/mediausabilityobserver":72,"./circuitbreakerobserver/rtcptimeout/rtcptimeoutobserver":74}],68:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.CongestionObserver=void 0;var a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=r(e("../../../../config/constants")),s=e("../../../circuitbreakerevent"),c=r(e("../../../validator")),u=(function(){function e(){i(this,e),this.name="CongestionObserver"}return a(e,[{key:"check",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(function(e){return e.hasTraffic()&&e.getStreamType()===o.streamType.outbound&&!1===s.CircuitBreakerEvent.isBadTrack(e)});if(!(t.length<1)){var n=[];return t.forEach(function(t){var r=t.getTrack();if(r&&r.data){var i=e.getTFRC(r);if(e.isGood(i,r.data.csioAvgBRKbps)){var a=new s.CircuitBreakerEvent(o.circuitBreakerDisruptionType.congestion,t.getSSRC());n.push(a)}}}),n.length>0?n:void 0}}}],[{key:"getTFRC",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(!e||!e.data)return 0;if(e.data.csioIntFLRate<.001||e.data.csioAvgRtt<.01)return 0;var t=8*e.data.csioAvgPacketSize,n=e.data.csioAvgRtt*Math.sqrt(2*e.data.csioIntFLRate/3);if(!c.checkForPositiveValue(t)||!c.checkForPositiveValue(n))return 0;var r=t/Math.max(n,1);return c.checkForPositiveValue(r)?r:0}},{key:"isGood",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!(e<1||t<=10*e)}}]),e})();n.CongestionObserver=u},{"../../../../config/constants":36,"../../../circuitbreakerevent":62,"../../../validator":99}],69:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.MediaTimeout=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../../../../utility/timestamps")),o=(function(){function e(){r(this,e),this.started=null,this.totalPackets=0}return i(e,[{key:"update",value:function(e){this.totalPackets=e}},{key:"getTotalPackets",value:function(){return this.totalPackets}},{key:"getStarted",value:function(){return this.started}},{key:"doReset",value:function(){this.started=null}},{key:"doStart",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.started=e||a.getCurrent()}}]),e})();n.MediaTimeout=o},{"../../../../utility/timestamps":116}],70:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.MediaTimoutObserver=void 0;var a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=r(e("../../../../utility/timestamps")),s=r(e("../../../../config/constants")),c=e("../../../circuitbreakerevent"),u=e("./mediatimeout"),l=(function(){function e(){i(this,e),this.name="MediaTimeoutObserver",this.mediaTimeouts=new Map}return a(e,[{key:"observeMediaTimeout",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(!t)return null;var r=e.getTotalPackets(t),i=this.mediaTimeouts.get(t.getSSRC());return i?r>i.getTotalPackets()?(i.update(r,n?n.startTime:void 0),i.doReset(),null):i.getStarted()?(n?n.now:o.getCurrent())-i.getStarted()<1e4?null:new c.CircuitBreakerEvent(s.circuitBreakerDisruptionType.mediaTimeout,t.getSSRC()):(i.doStart(n?n.startTime:void 0),null):((i=new u.MediaTimeout).update(r,n?n.startTime:void 0),this.mediaTimeouts.set(t.getSSRC(),i),null)}},{key:"check",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=t.filter(function(e){var t=e.getRequestedMeasurement();return t&&e.hasTraffic()&&t.getReportType()===s.reportType.remote&&!1===c.CircuitBreakerEvent.isBadTrack(e)});if(!(r.length<1)){var i=[];return r.forEach(function(t,r){var a=e.observeMediaTimeout(t,n?n[r]:void 0);a&&i.push(a)}),i.length>0?i:void 0}}}],[{key:"getTotalPackets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(!e)return 0;var t=e.getTrack();return t&&t.data?e.getStreamType()===s.streamType.inbound?t.data.packetsReceived:t.data.packetsSent:0}}]),e})();n.MediaTimoutObserver=l},{"../../../../config/constants":36,"../../../../utility/timestamps":116,"../../../circuitbreakerevent":62,"./mediatimeout":69}],71:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.MediaUsability=void 0;var a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=r(e("../../../../utility/timestamps")),s=r(e("../../../../config/constants")),c=r(e("../../../validator")),u=(function(){function e(){i(this,e),this.flDistortedTime=null,this.rttDistortedTime=null}return a(e,[{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(e){var n=e.getTrack();n&&n.data&&(this.checkFL(n.data.csioIntFLRate,e.getMediaType(),t),this.checkRTT(n.data.csioAvgRtt,e.getMediaType(),t))}}},{key:"checkFL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0);c.checkForPositiveValue(e)&&(.99<e?null===this.flDistortedTime&&(this.flDistortedTime=t||o.getCurrent()):this.flDistortedTime=null)}},{key:"checkRTT",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;c.checkForPositiveValue(e)&&((t===s.mediaType.video?2e3:1500)<e?null===this.rttDistortedTime&&(this.rttDistortedTime=n||o.getCurrent()):this.rttDistortedTime=null)}},{key:"isDistorted",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0)||o.getCurrent();return!!(this.flDistortedTime&&e-this.flDistortedTime>5e3)||!!(this.rttDistortedTime&&e-this.rttDistortedTime>15e3)}}]),e})();n.MediaUsability=u},{"../../../../config/constants":36,"../../../../utility/timestamps":116,"../../../validator":99}],72:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.MediaUsabilityObserver=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../../../../config/constants")),o=e("../../../circuitbreakerevent"),s=e("./mediausability"),c=(function(){function e(){r(this,e),this.name="MediaUsabilityObserver",this.mediaUsabilities=new Map}return i(e,[{key:"observeMediaUsability",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=this.mediaUsabilities.get(e.getSSRC());return n?(n.update(e,t?t.startTime:void 0),n.isDistorted(t?t.now:void 0)?new o.CircuitBreakerEvent(a.circuitBreakerDisruptionType.mediaUsability,e.getSSRC()):null):(n=new s.MediaUsability,this.mediaUsabilities.set(e.getSSRC(),n),null)}},{key:"check",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=t.filter(function(e){return!1===o.CircuitBreakerEvent.isBadTrack(e)&&e.hasTraffic()});if(!(r.length<1)){var i=[];return r.forEach(function(t,r){var a=e.observeMediaUsability(t,n?n[r]:void 0);a&&i.push(a)}),i.length>0?i:void 0}}}]),e})();n.MediaUsabilityObserver=c},{"../../../../config/constants":36,"../../../circuitbreakerevent":62,"./mediausability":71}],73:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.RTCPTimeout=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../../../../utility/timestamps")),o=(function(){function e(){r(this,e),this.lastApproved=null,this.lastRTCPTimestamp=null,this.networkRoundTripTime=5}return i(e,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=e.getTrack();if(!n)return!1;if(!n.data.timestamp)return!0;if(!this.lastRTCPTimestamp)return this.lastRTCPTimestamp=n.data.timestamp,this.lastApproved=t||a.getCurrent(),!0;if(!n.data.timestamp)return!0;if(this.lastRTCPTimestamp<n.data.timestamp){var r=n.data.timestamp-this.lastRTCPTimestamp;return this.lastRTCPTimestamp=n.data.timestamp,this.networkRoundTripTime=.8*this.networkRoundTripTime+.2*r,this.lastApproved=t||a.getCurrent(),!0}return!1}},{key:"getLastApproved",value:function(){return this.lastApproved}},{key:"getLastRTCPTimestamp",value:function(){return this.lastRTCPTimestamp}},{key:"getNetworkRoundTripTime",value:function(){return this.networkRoundTripTime}}]),e})();n.RTCPTimeout=o},{"../../../../utility/timestamps":116}],74:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.RTCPTimeoutObserver=void 0;var a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=r(e("../../../../utility/timestamps")),s=r(e("../../../../config/constants")),c=e("../../../circuitbreakerevent"),u=e("./rtcptimeout"),l=(function(){function e(){i(this,e),this.name="RTCPTimeoutObserver",this.rtcpTimeouts=new Map}return a(e,[{key:"observeRTCPTimeouts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=this.rtcpTimeouts.get(e.getSSRC());if(!n)return(n=new u.RTCPTimeout).update(e,t?t.lastApproved:void 0),this.rtcpTimeouts.set(e.getSSRC(),n),null;if(n.update(e,t?t.lastApproved:void 0))return null;var r=Math.max(3e4,5*n.getNetworkRoundTripTime());return(t?t.now:o.getCurrent())-n.getLastApproved()<r?null:new c.CircuitBreakerEvent(s.circuitBreakerDisruptionType.RTCPTimeout,e.getSSRC())}},{key:"check",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=t.filter(function(e){var t=e.getRequestedMeasurement();return t&&e.getStreamType()===s.streamType.inbound&&t.getReportType()===s.reportType.remote});if(!(r.length<1)){var i=[];return r.forEach(function(t,r){var a=e.observeRTCPTimeouts(t,n?n[r]:void 0);a&&i.push(a)}),i.length>0?i:void 0}}}]),e})();n.RTCPTimeoutObserver=l},{"../../../../config/constants":36,"../../../../utility/timestamps":116,"../../../circuitbreakerevent":62,"./rtcptimeout":73}],75:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.CPULimitationObserver=void 0;var a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=r(e("../../config/constants")),s=r(e("../../utility/timestamps")),c=(function(){function e(){i(this,e),this.ewmaDiscardedPackets=0,this.ewmaLostPackets=0,this.ewmaDroppedFrames=0,this.last=0,this.noticed=0}return a(e,[{key:"test",value:function(e){var t=e.discardedPackets,n=e.lostPackets;if(!n||n<1||!t||t<1)return!1;if(0===this.last)return this.last=s.getCurrent(),this.ewmaLostPackets=n,this.ewmaDiscardedPackets=t,!1;var r=s.getCurrent(),i=Math.max(r-this.last,1),a=Math.min((5e3-i)/5e3,.9),o=e.droppedFrames;return this.ewmaLostPackets=this.ewmaLostPackets*a+n,this.ewmaDroppedFrames=this.ewmaDroppedFrames*a+o,this.ewmaDiscardedPackets=this.ewmaDiscardedPackets*a+t,!(!o||o<1||1<this.ewmaLostPackets||1<this.ewmaDiscardedPackets||r-this.noticed<1e4||this.ewmaDroppedFrames<1||(this.noticed=r,0))}}]),e})(),u=(function(){function e(t){i(this,e),this.notifyCallback=t,this.inbVideoTesters=new Map}return a(e,[{key:"accept",value:function(e){for(var t=e.filter(function(e){return e.getMediaType()===o.mediaType.video&&e.getStreamType()===o.streamType.inbound}),n=0;n<t.length;++n){var r=t[n];this.checkInboundVideo(r)}}},{key:"checkInboundVideo",value:function(e){var t=e.peek(),n=e.getSSRC();if(this.inbVideoTesters.has(n)||this.inbVideoTesters.set(n,new c),this.inbVideoTesters.get(n).test(t)){var r={reason:o.limitationType.cpu,ssrc:n};this.notifyCallback(r)}}},{key:"toString",value:function(){return"CPULimitationObserver"}}]),e})();n.CPULimitationObserver=u},{"../../config/constants":36,"../../utility/timestamps":116}],76:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.OneWayMediaObserver=void 0;var a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=e("../onewaymediadisruption"),s=e("../../utility/registry"),c=r(e("../../config/constants")),u=r(e("../../utility/timestamps")),l=Math.max(5,5)+5,d="STARTED",f="ENDED",h="NOOP",p=(function(){function e(t){i(this,e),this.startTime=u.getCurrent(),this.notifierCallback=t,this.oneWayInbAudioDisruption={started:!1,disruptionCount:0,recoveryCount:0,disruption:void 0},this.oneWayOutbAudioDisruption={started:!1,disruptionCount:0,recoveryCount:0,disruption:void 0},this.browserName=s.Registry.getEndpoint().getBrowserName()}return a(e,[{key:"isDeadTrack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=e&&e.getRequestedMeasurement();if(!t)return!0;if(e.getStreamType()===c.streamType.inbound){if(t.getReceivedBytes()<1)return!0}else if(t.getSentBytes()<1)return!0;return!e.lastTrack||!e.lastTrack.data||!e.lastTrack.data.mimeType&&!e.lastTrack.data.googCodecName}},{key:"isValidTrack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.streamType.inbound;if(!e)return!1;var n=e.getRequestedMeasurement();return!!n&&n.getReportType()===c.reportType.local&&e.getStreamType()===t&&e.getMediaType()===c.mediaType.audio}},{key:"handleUserCallbackEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=s.Registry.getCallbacks().get(c.callbackFunctions.mediaDisruption);t&&"function"==typeof t&&e.forEach(function(e){var n={type:e.isStarted()?c.mediaDisruptionCallbackType.oneWayMediaStart:c.mediaDisruptionCallbackType.oneWayMediaStop,payload:e.getContent()};t(n)})}},{key:"accept",value:function(e){var t=this,n=e.filter(function(e){return t.isValidTrack(e,c.streamType.inbound)}),r=e.filter(function(e){return t.isValidTrack(e,c.streamType.outbound)}),i=this.getDisruptions(n,r);i.length>0&&(this.handleUserCallbackEvent(i),this.notifierCallback(i))}},{key:"toString",value:function(){return"DisruptionObserver"}},{key:"getDisruptedTrack",value:function(){var e=this;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find(function(t){return t&&!1===t.hasTraffic()&&!1===e.isDeadTrack(t)})}},{key:"isStartedAndHasTraffic",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.filter(function(e){return 0===e.getStartTime()}).length<1,n=e.filter(function(e){return!e.hasTraffic()}).length<1;return e.length>0&&t&&n}},{key:"hasTracksAndTraffic",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.filter(function(e){return!e.hasTraffic()}).length<1;return e.length>0&&t}},{key:"isInitialSetupDelayPassed",value:function(){return u.getCurrent()>this.startTime+15e3}},{key:"isInbOneWayAudioDisruption",value:function(e,t){if(this.isStartedAndHasTraffic(t)&&this.isInitialSetupDelayPassed()){var n=void 0;if(!this.hasTracksAndTraffic(e)){var r=this.getDisruptedTrack(e),i=r&&r.getSSRC();i&&(n=new o.OneWayMediaDisruption(c.oneWayMediaTypes.audio,i,c.streamType.inbound))}return n}}},{key:"isOutbOneWayAudioDisruption",value:function(e,t){if(this.isStartedAndHasTraffic(e)&&this.isInitialSetupDelayPassed()){var n=void 0;if(!this.hasTracksAndTraffic(t)){var r=this.getDisruptedTrack(t),i=r&&r.getSSRC();i&&(n=new o.OneWayMediaDisruption(c.oneWayMediaTypes.audio,i,c.streamType.outbound))}return n}}},{key:"updateDisruptionAndRecoveryCount",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e?(t=Math.min(t+1,l),n=0):(n=Math.min(n+1,l),t=0),{disruptionCount:t,recoveryCount:n}}},{key:"getDisruptionState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!1===n&&e>=5?d:!0===n&&t>=5?f:h}},{key:"getAudioDisruption",value:function(e,t,n){var r=void 0,i=void 0;if(n===c.streamType.inbound?(r=this.isInbOneWayAudioDisruption(e,t),i=this.oneWayInbAudioDisruption):n===c.streamType.outbound&&(r=this.isOutbOneWayAudioDisruption(e,t),i=this.oneWayOutbAudioDisruption),i){var a=this.updateDisruptionAndRecoveryCount(r,i.disruptionCount,i.recoveryCount),o=a.disruptionCount,s=a.recoveryCount,u=this.getDisruptionState(o,s,i.started);return u===d?(i.started=!0,i.disruption=r.setStart(),i.disruptionCount=0,i.recoveryCount=0):u===f?(i.started=!1,i.disruption=i.disruption.setEnd(),i.disruptionCount=0,i.recoveryCount=0):(i.recoveryCount=s,i.disruptionCount=o),u!==h?i.disruption:void 0}}},{key:"getDisruptions",value:function(e,t){var n=[],r=this.getAudioDisruption(e,t,c.streamType.inbound),i=this.getAudioDisruption(e,t,c.streamType.outbound);return r&&n.push(r),i&&n.push(i),n}}]),e})();n.OneWayMediaObserver=p},{"../../config/constants":36,"../../utility/registry":112,"../../utility/timestamps":116,"../onewaymediadisruption":80}],77:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.QPSumObserver=void 0;var a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=r(e("../../config/constants")),s=r(e("../../utility/timestamps")),c=(function(){function e(t){i(this,e),this.lastQpSum=null,this.qpAvg=null,this.noticed=0}return a(e,[{key:"test",value:function(e){var t=e.getTrack();if(!t||!t.data||!t.data.qpSum)return!1;if(!this.lastQpSum)return this.lastQpSum=t.data.qpSum,!1;var n=t.data.qpSum-this.lastQpSum;this.lastQpSum=t.data.qpSum,null===this.qpAvg?this.qpAvg=n:this.qpAvg=.2*n+.8*this.qpAvg;var r=Math.max(2*this.qpAvg,1);if(n<this.qpAvg+r)return!1;var i=s.getCurrent();return this.noticed<i-1e4}}]),e})(),u=(function(){function e(t){i(this,e),this.notifyCallback=t,this.testers=new Map}return a(e,[{key:"accept",value:function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.getMediaType()===o.mediaType.video){var r=n.getSSRC();if(this.testers.has(r)||this.testers.set(r,new c(n)),this.testers.get(r).test(n)){var i={reason:o.qualityDisruptionTypes.qpchange};this.notifyCallback(i)}}}}},{key:"toString",value:function(){return"QPSumObserver"}}]),e})();n.QPSumObserver=u},{"../../config/constants":36,"../../utility/timestamps":116}],78:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.SendingTrigger=n.TrackMonitorTester=n.TestHelper=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),s=r(e("../../utility/timestamps")),c=e("../../utility/runningstats"),u=r(e("../validator")),l=e("../../config/constants"),d=r(l),f=r(e("../../utility/csiologger")),h=(function(){function e(t,n,r,a){return i(this,e),n?r?a?(this.consecutivePositive=0,this.name=t,this.minThreshold=n,this.resetThreshold=a,void(this.runningStats=new c.RunningStats(r))):void f.warn("resetThreshold was null or undefined : "+a):void f.warn("windowLength was null or undefined : "+r):void f.warn("minThreshold was null or undefined : "+n)}return o(e,[{key:"doTest",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(null===e||void 0===e)return!1;this.runningStats.add(e);var n=this.runningStats.getMean(),r=this.runningStats.getStd();if(!n||!r)return!1;var i=Math.max(this.minThreshold,2*r)*t,a=Math.abs(n-e)>i;return a?(this.consecutivePositive+=1,this.consecutivePositive>this.resetThreshold&&this.runningStats.reset()):this.consecutivePositive=0,a}}]),e})(),p=(function(){function e(t){var n=t.maxMarginFactor,r=void 0===n?l.adaptiveStatsThresholds.maxMarginFactor:n,a=t.marginReductionFactor,o=void 0===a?l.adaptiveStatsThresholds.marginReductionFactor:a,s=t.marginIncreaseFactor,c=void 0===s?l.adaptiveStatsThresholds.marginIncreaseFactor:s,u=t.marginDecreaseIntervalInMs,d=void 0===u?l.adaptiveStatsThresholds.marginDecreaseIntervalInMs:u,f=t.maxGradualCounter,p=void 0===f?l.adaptiveStatsThresholds.maxGradualCounter:f,v=t.minIntervalInMs,g=void 0===v?l.adaptiveStatsThresholds.minIntervalInMs:v,y=t.rippleBase,m=void 0===y?l.adaptiveStatsThresholds.rippleBase:y,b=t.windowSize,k=void 0===b?l.adaptiveStatsThresholds.windowSize:b,S=t.resetThreshold,w=void 0===S?l.adaptiveStatsThresholds.resetThreshold:S,C=t.minThreshold,T=void 0===C?l.adaptiveStatsThresholds.minThreshold:C;i(this,e),this.rttTester=new h("RTT Tester",T.rtt,k,w),this.throughputTester=new h("Throughput Tester",T.throughput,k,w),this.FLTester=new h("FL Tester",T.fractionalLoss,k,w),this.marginFactor=1,this.lastDecreased=0,this.lastTriggering=0,this.maxMarginFactor=r,this.marginReductionFactor=o,this.marginIncreaseFactor=c,this.marginDecreaseIntervalInMs=d,this.maxGradualCounter=p,this.gradualCounter=p,this.minIntervalInMs=g,this.rippleBase=m}return o(e,[{key:"test",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=t?{}:e.peek();if(!n)return!1;var r=(t?{}:e.getTrack()).data,i=t?t.rtt:n.getRTT(),a=u.checkForNan(parseInt(t?t.throughput:r.intervalBandwidth,10)),o=t?t.loss:n.getFractionLost(),c=t?t.time:s.getCurrent(),l=this.rttTester.doTest(i,this.marginFactor),d=this.throughputTester.doTest(a,this.marginFactor),f=this.FLTester.doTest(o,this.marginFactor);if(l||d||f)return this.marginFactor=Math.min(this.marginFactor*this.marginIncreaseFactor,this.maxMarginFactor),this.lastTriggering=c,this.lastDecreased=c,this.gradualCounter=0,!0;if(c-this.lastDecreased>this.marginDecreaseIntervalInMs&&(this.marginFactor=Math.max(this.marginFactor*this.marginReductionFactor,1),this.lastDecreased=c),this.gradualCounter<this.maxGradualCounter){var h=this.minIntervalInMs*Math.pow(this.rippleBase,this.gradualCounter);if(this.lastTriggering<c-h)return this.lastTriggering=c,this.gradualCounter+=1,!0}return!1}}]),e})(),v=(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),t?(this.notifyCallback=t,this.minIntervalInMs=n.minIntervalInMs||l.adaptiveStatsThresholds.minIntervalInMs,this.maxIntervalInMs=n.maxIntervalInMs||l.adaptiveStatsThresholds.maxIntervalInMs,this.config=n,this.notified=0,this.testers=new Map):f.warn("notifyCallback was null or undefined : "+t)}return o(e,[{key:"setup",value:function(e,t){this.minIntervalInMs=e,this.maxIntervalInMs=t}},{key:"getMostRecentTrackStartTime",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){return!!t&&"function"==typeof t.getCreationTime&&Math.max(t.getCreationTime(),e)},Number.MIN_VALUE)}},{key:"accept",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=t?t.time:s.getCurrent(),r=n-this.notified,i=this.doSend(e,t);if(this.minIntervalInMs===this.maxIntervalInMs)return f.log("Elapsed time in fix intervalset: "+r),void(r>this.minIntervalInMs&&(this.notifyCallback&&this.notifyCallback(t?n:null),this.notified=n));if(!(r<this.minIntervalInMs)){var a=t?void 0:this.getMostRecentTrackStartTime(e);if(a&&n-a<l.adaptiveStatsThresholds.maxInitialTimeoutInMs&&r>l.adaptiveStatsThresholds.initialNotifyIntervalTimeoutInMs)return this.notifyCallback&&this.notifyCallback(t?n:null),void(this.notified=n);r<this.maxIntervalInMs&&!1===i||(this.notifyCallback&&this.notifyCallback(t?n:null),this.notified=n)}}},{key:"setIntervals",value:function(e,t){this.minIntervalInMs=e,this.maxIntervalInMs=t}},{key:"toString",value:function(){return"SendingTrigger"}},{key:"getTrackIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(e){var t=e.getRequestedMeasurement();if(t)return t.getSSRC()+"-"+t.getStreamType()+"-"+t.getReportType()}}},{key:"isGoodTracks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(!e)return!1;var t=e.getRequestedMeasurement();return!!t&&t.getReportType()===d.reportType.local&&(t.getStreamType()===d.streamType.inbound||t.getStreamType()===d.streamType.outbound)}},{key:"doSend",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(t){if(this.testers.has("test-ssrc")||this.testers.set("test-ssrc",new p(a({},this.config,{minIntervalInMs:this.minIntervalInMs,maxIntervalInMs:this.maxIntervalInMs}))),this.testers.get("test-ssrc").test(e,t))return!0}else for(var n=0;n<e.length;n+=1){var r=e[n];if(this.isGoodTracks(r)){var i=this.getTrackIdentifier(r);if(i)if(this.testers.has(i)||this.testers.set(i,new p(a({},this.config,{minIntervalInMs:this.minIntervalInMs,maxIntervalInMs:this.maxIntervalInMs}))),this.testers.get(i).test(r))return!0}}return!1}}]),e})();n.TestHelper=h,n.TrackMonitorTester=p,n.SendingTrigger=v},{"../../config/constants":36,"../../utility/csiologger":104,"../../utility/runningstats":113,"../../utility/timestamps":116,"../validator":99}],79:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.ThroughputObserver=void 0;var a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=r(e("../../config/constants")),s=r(e("../../utility/timestamps")),c=(function(){function e(t){i(this,e),this.notifierCallback=t,this.observations=new Map}return a(e,[{key:"accept",value:function(e){var t=e.filter(function(e){return e.getMediaType()===o.mediaType.video&&e.getStreamType()===o.streamType.outbound});if(!(t.length<1)){var n=this;t.forEach(function(e){n.observe(e)})}}},{key:"toString",value:function(){return"ThroughputObserver"}},{key:"getObservations",value:function(e){if(this.observations.has(e))return this.observations.get(e);return this.observations.set(e,{ssrc:0,started:0,max:0,maxTs:0,stable:0,stableTs:0,ready:!1,maxVerified:!1,stableVerified:!1}),this.observations.get(e)}},{key:"observe",value:function(e){var t=e.getSSRC(),n=this.getObservations(t),r=s.getCurrent();if(!0!==n.ready){if(0===n.started)return n.ssrc=t,void(n.started=r);var i=e.getTrack().data,a=i.csioIntBRKbps,o=Math.min(50,.05*a);if(n.max<a?(n.max=a,n.maxTs=r):1e4<r-n.maxTs&&(n.maxVerified=!0),!(r-n.started<15e3)&&(a-o<i.csioAvgBRKbps&&i.csioAvgBRKbps<a+o&&(n.stableTs=r,n.stable=a,n.stableVerified=!0),n.stableVerified&&n.maxVerified)){var c={ssrc:String(n.ssrc),maxsendingKBitrate:n.max,timeToMaxSendingKBitrate:n.maxTs-n.started,stablesendingKBitrate:n.stable,timeToStableSendingKBitrate:n.stableTs-n.started};this.notifierCallback(c),n.ready=!0}}}}]),e})();n.ThroughputObserver=c},{"../../config/constants":36,"../../utility/timestamps":116}],80:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];r(this,e),this.mediaType=t,this.ssrc=""+n,this.streamType=i,this.started=a}return i(e,[{key:"setStart",value:function(){return this.started=!0,this}},{key:"setEnd",value:function(){return this.started=!1,this}},{key:"getContent",value:function(){return{mediaType:this.mediaType,ssrc:this.ssrc,streamType:this.streamType,disruptionType:this.streamType}}},{key:"isStarted",value:function(){return this.started}},{key:"toString",value:function(){return JSON.stringify({started:this.started,ssrc:this.ssrc,mediaType:this.mediaType,disruptionType:this.streamType})}}]),e})();n.OneWayMediaDisruption=a},{}],81:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=(function(){function e(t,n,i,a,o,s){r(this,e),this.candidatePair=t,this.codec=n,this.pcHash=i,this.trackStats=a,this.transportStats=o,this.measurements=s}return i(e,[{key:"getCandidatePair",value:function(){return this.candidatePair}},{key:"getCodec",value:function(){return this.codec}},{key:"getPcHash",value:function(){return this.pcHash}},{key:"getTrackStats",value:function(){return this.trackStats}},{key:"getTransportStats",value:function(){return this.transportStats}},{key:"getMeasurements",value:function(){return this.measurements}}]),e})();n.PcStats=a},{}],82:[function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.QualityEvaluator=void 0;var a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../config/constants")),s=(function(){function e(){i(this,e)}return a(e,[{key:"isAudio",value:function(e){return e&&e.data&&(e.mediaType===o.mediaType.audio||e.data.mediaType===o.mediaType.audio||e.data.csioMediaType===o.mediaType.audio)}},{key:"isVideo",value:function(e){return e&&e.data&&(e.mediaType===o.mediaType.video||e.data.mediaType===o.mediaType.video||e.data.csioMediaType===o.mediaType.video)}},{key:"isInbound",value:function(e){return e&&e.data&&(e.streamType===o.streamType.inbound||e.data.streamType===o.streamType.inbound||e.data.csioStreamType===o.streamType.inbound)}},{key:"isOutbound",value:function(e){return e&&e.data&&(e.streamType===o.streamType.outbound||e.data.streamType===o.streamType.outbound||e.data.csioStreamType===o.streamType.outbound)}},{key:"isInboundAudio",value:function(e){return this.isInbound(e)&&this.isAudio(e)}},{key:"isInboundVideo",value:function(e){return this.isInbound(e)&&this.isVideo(e)}},{key:"isOutboundAudio",value:function(e){return this.isOutbound(e)&&this.isAudio(e)}},{key:"isOutboundVideo",value:function(e){return this.isOutbound(e)&&this.isVideo(e)}},{key:"getDescendentRating",value:function(e,t){return t.green<=e?o.avQualityRatings.excellent:t.red<e?o.avQualityRatings.fair:o.avQualityRatings.bad}},{key:"getAscendingRating",value:function(e,t){return t.red<e?o.avQualityRatings.bad:t.green<=e?o.avQualityRatings.fair:o.avQualityRatings.excellent}},{key:"fromQualityString",value:function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.avQualityRatings.unknown){case o.avQualityRatings.bad:return o.qualityRating.bad;case o.avQualityRatings.fair:return o.qualityRating.fair;case o.avQualityRatings.excellent:return o.qualityRating.excellent}return 0}},{key:"toQualityString",value:function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.qualityRating.excellent){case o.qualityRating.excellent:return o.avQualityRatings.excellent;case o.qualityRating.good:case o.qualityRating.fair:case o.qualityRating.poor:return o.avQualityRatings.fair;case o.qualityRating.bad:return o.avQualityRatings.bad}return o.avQualityRatings.unknown}},{key:"inboundAudioQuality",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).data||{},t=[];if(e.csioIntBRKbps&&0<e.csioIntBRKbps){var n=this.getDescendentRating(e.csioIntBRKbps,o.throughputThreshold.audio),r=this.fromQualityString(n);t.push({result:r,weight:1})}if(e.csioIntFL&&0<e.csioIntFL){var i=this.getAscendingRating(e.csioIntFL,o.fractionalLossThreshold.audio),a=this.fromQualityString(i);t.push({result:a,weight:1})}if(e.csioeM&&0<e.csioeM){var s=this.getAscendingRating(e.csioeM,o.eModelThreshold.audio),c=this.fromQualityString(s);t.push({result:c,weight:1})}return t}},{key:"inboundVideoQuality",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).data||{},t=[];if(e.csioIntBRKbps&&0<e.csioIntBRKbps){var n=this.getDescendentRating(e.csioIntBRKbps,o.throughputThreshold.video),r=this.fromQualityString(n);t.push({result:r,weight:1})}if(e.csioSig2Latency&&0<e.csioSig2Latency){var i=this.getAscendingRating(e.csioSig2Latency,o.rttThreshold.video),a=this.fromQualityString(i);t.push({result:a,weight:1})}if(e.csioFrameRateMean&&e.prevFrameRateMean&&0<e.csioFrameRateMean&&0<e.csioPrevFrameRateMean){var s=e.csioFrameRateMean/Math.max(e.csioPrevFrameRateMean,1),c=this.getDescendentRating(s,o.currOverPrevFrameRateThreshold.video),u=this.fromQualityString(c);t.push({result:u,weight:1})}return t}},{key:"outboundAudioQuality",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).data||{},t=[];if(e.csioIntBRKbps&&0<e.csioIntBRKbps){var n=this.getDescendentRating(e.csioIntBRKbps,o.throughputThreshold.audio),r=this.fromQualityString(n);t.push({result:r,weight:1})}if(e.csioeM&&0<e.csioeM){var i=this.getAscendingRating(e.csioeM,o.eModelThreshold.audio),a=this.fromQualityString(i);t.push({result:a,weight:1})}return t}},{key:"outboundVideoQuality",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).data||{},t=[];if(e.csioIntBRKbps&&0<e.csioIntBRKbps){var n=this.getDescendentRating(e.csioIntBRKbps,o.throughputThreshold.video),r=this.fromQualityString(n);t.push({result:r,weight:1})}if(e.csioSig2Latency&&0<e.csioSig2Latency){var i=this.getAscendingRating(e.csioSig2Latency,o.rttThreshold.video),a=this.fromQualityString(i);t.push({result:a,weight:1})}if(e.csioFrameRateMean&&e.prevFrameRateMean&&0<e.csioFrameRateMean&&0<e.csioPrevFrameRateMean){var s=e.csioFrameRateMean/e.csioPrevFrameRateMean,c=this.getDescendentRating(s,o.currOverPrevFrameRateThreshold.video),u=this.fromQualityString(c);t.push({result:u,weight:1})}return t}},{key:"getOverallTrackQuality",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0,n=0,r=0,i=e.length;r<i;r+=1)t+=e[r].weight;for(var a=0,o=e.length;a<o;a+=1){var s=e[a];n+=s.result*s.weight/Math.max(t,1)}return n=Math.floor(n),this.toQualityString(n)}},{key:"updateQualityStats",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tracks||[],n=0,i=t.length;n<i;n+=1){var a=t[n],o=[];if(this.isInboundAudio(a)){var s=this.inboundAudioQuality(a);o.push.apply(o,r(s))}else if(this.isInboundVideo(a)){var c=this.inboundVideoQuality(a);o.push.apply(o,r(c))}else if(this.isOutboundAudio(a)){var u=this.outboundAudioQuality(a);o.push.apply(o,r(u))}else if(this.isOutboundVideo(a)){var l=this.outboundVideoQuality(a);o.push.apply(o,r(l))}var d=this.getOverallTrackQuality(o);a.data.csioMark=d}return e}}]),e})();n.QualityEvaluator=s},{"../config/constants":36}],83:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=(function(){function e(t,n,i){r(this,e),this.width=t,this.height=n,this.frameRate=i}return i(e,[{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"getFrameRate",value:function(){return this.frameRate}},{key:"toString",value:function(){return this.width&&this.height&&this.frameRate?this.width.toString()+"X"+this.height.toString()+"X"+this.frameRate.toString():null}}]),e})();n.Resolution=a},{}],84:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.StatsAdapter=n.StatsAdapterIO=void 0;var c=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),u=r(e("../config/constants")),l=e("../collections/component"),d=e("../utility/registry"),f=r(e("../utility/hash")),h=n.StatsAdapterIO={RawStatsIn:"RawStatsIn",RawStatsOut:"RawStatsOut",UnprocessedOut:"UnprocessedOut"},p=(function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"StatsAdapter"));return r.bindPort(h.RawStatsIn,r.receiveRawData,r),r.declarePort(h.RawStatsOut),r.declarePort(h.UnprocessedOut),r.codeBase=e,r.browser=n,r}return o(t,l.Component),c(t,[{key:"receiveRawData",value:function(e,t,n){if(e){var r=this.extractRawStats(n),i=this.extractRawStats(e);if(i){this.mergeStats(i,r),window&&window.csioReactNative&&(i=this.removeValues(i)),this.isConnected(h.UnprocessedOut)&&this.transmit(h.UnprocessedOut,i,t);var a=this.processRawStats(i,t);if(a&&a.transportStats)for(var o=0;o<a.transportStats.length;o++)a.transportStats[o].hash=this.getTransportHash(a.transportStats[o]);a&&a.transportStats&&this.checkTransportStatsUpdates(a.transportStats,t),a&&a.trackStats&&(a=this.backFillTrackStats(a)),a&&a.transportStats&&a.candidatePair&&(a=this.backFillCandidatePairStats(a)),a.pcHash=t,this.transmit(h.RawStatsOut,a)}}}},{key:"isCandidateRelayed",value:function(e,t){return!(!e||"relay"!==e.candidateType&&"relayed"!==e.candidateType)||!(!t||"relay"!==t.candidateType&&"relayed"!==t.candidateType)}},{key:"mergeStats",value:function(e,t){var n=["inbound-rtp","outbound-rtp"],r=["googFrameRateOutput","googFrameRateDecoded","googFrameRateReceived","googFrameRateSent","framerateMean","framesPerSecond"];if(t){for(var i=new Map,a=void 0,o=0;o<t.length;o++)if("VideoBwe"!==t[o].type){var s=parseInt(t[o].ssrc,10);i.set(s,t[o])}else a=t[o];for(var c=0;c<e.length;c++){var u=e[c].type;if(n.includes(u)){var l=e[c].ssrc,d=i.get(l);for(var f in d)d.hasOwnProperty(f)&&(f.startsWith("goog")||"audioOutputLevel"===f||"audioInputLevel"===f?e[c][f]=d[f]:"timestamp"===f&&(e[c].legacyTimeStamp=d.timestamp)),e[c].roundTripTime||(e[c].googRtt=d.googRtt),r.includes(f)&&(e[c].legacyFrameRatePerSecond=d[f])}}a&&e.push(a)}}},{key:"removeValues",value:function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.values){for(var r=0;r<n.values.length;++r)s(n,n.values[r]);delete n.values}}return e}},{key:"getIceCandidates",value:function(e){if(!e)return{localIceCandidates:[],remoteIceCandidates:[],iceCandidatePairs:[]};var t=this.extractRawStats(e);return this.processRawStatsForIceInfo(t)}},{key:"extractRawStats",value:function(e){var t=[];if(e&&e.result)t=e.result();else if(e&&e.forEach)e.forEach(function(e){t.push(e)});else for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);for(var r=[],i=0;i<t.length;i++){var a=this.getParsedStats(t[i]);r.push(a)}if(r.filter(function(e){return"transport"===e.type}).length>0)return r;for(var o=void 0,s=0;s<r.length;s++)(("candidate-pair"===r[s].type||"candidatepair"===r[s].type)&&r[s].selected||"googCandidatePair"===r[s].type&&(!0===r[s].googActiveConnection||"true"===r[s].googActiveConnection))&&((o={}).selectedCandidatePairId=r[s].id,o.id=r[s].id,this.mergeObjects(o,r[s]),o.type="transport",r.push(o));return r}},{key:"normalizeIceCandidates",value:function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e[n];r.transport=r.protocol?r.protocol:"udp",r.ip=r.ip?r.ip:r.ipAddress,r.port=r.portNumber?Number(r.portNumber):r.port,"ssltcp"===r.transport&&(r.transport="tcp"),r.id||(r.id="csio"+r.port),r.ip||r.address&&(r.ip=r.address),r.ip&&t.push(r)}return t}},{key:"normalizeCanidatePairs",value:function(e){for(var t=0;t<e.length;t+=1){var n=e[t];"in-progress"===n.state&&(n.state="inprogress"),n.state||(n.state="succeeded"),n.nominated||(n.nominated="true"===n.googActiveConnection),n.priority||(n.priority=123),n.id||(n.id="csio"+n.priority)}return e}},{key:"processRawStatsForIceInfo",value:function(e){var t=[],n=[],r=[],i=void 0;if(!e)return{localIceCandidates:t,remoteIceCandidates:n,iceCandidatePairs:r};for(var a=0;a<e.length;++a){var o=e[a],s=this.statsClassifier(o);if(s.candidatePair)r.push(s.candidatePair);else if(s.transportStats){if("transport"===s.transportStats.type){i=s.transportStats.selectedCandidatePairId;continue}r.push(s.transportStats)}else s.localCandidate?t.push(s.localCandidate):s.remoteCandidate&&n.push(s.remoteCandidate)}if(i)for(var c=0;c<r.length;++c)r[c].id===i&&(r[c].googActiveConnection="true");return{localIceCandidates:this.normalizeIceCandidates(t),remoteIceCandidates:this.normalizeIceCandidates(n),iceCandidatePairs:this.normalizeCanidatePairs(r)}}},{key:"processRawStats",value:function(e,t){for(var n={localIceCandidates:{},remoteIceCandidates:{},tracks:[],candidatePair:[],transportStats:[],trackStats:[],codec:[]},r=0;r<e.length;r++){var i=e[r],a=this.statsClassifier(i);a.tracks?n.tracks.push(a.tracks):a.candidatePair?n.candidatePair.push(a.candidatePair):a.bwe?n.bwe=a.bwe:a.trackStats?n.trackStats.push(a.trackStats):a.codec?n.codec.push(a.codec):a.localCandidate?n.localIceCandidates[a.localCandidate.id]=a.localCandidate:a.remoteCandidate&&(n.remoteIceCandidates[a.remoteCandidate.id]=a.remoteCandidate),a.transportStats&&(this.codeBase!==u.codeBaseType.firefox?(parseInt(a.transportStats.bytesReceived,10)>0||parseInt(a.transportStats.bytesSent,10)>0)&&n.transportStats.push(a.transportStats):"true"!==a.transportStats.selected&&!0!==a.transportStats.selected||n.transportStats.push(a.transportStats))}if(n.tracks){var o=d.Registry.getConferenceManager().getConferenceForPcHash(t),s=void 0;o&&(s=o.getPeerConnectionManager().getPcHandlerByHash(t)),n.tracks.forEach(function(e){var t=s.getSSRCInfo(e.data.ssrc);void 0!==t&&t.localStartTime||s&&(s.updateSDP(n.tracks),t=s.getSSRCInfo(e.data.ssrc)),t&&(e.cname=t.cname,e.msid=t.msid,e.associatedVideoTag=t.associatedVideoTag,e.usageLabel=t.usageLabel)})}return n.transportStats&&this.codeBase===u.codeBaseType.firefox&&(n.transportStats=this.getAddressInfoFromCandidates(n.transportStats,n.localIceCandidates,n.remoteIceCandidates)),n}},{key:"getParsedStats",value:function(e){var t={};if(e.timestamp instanceof Date&&(t.timestamp=e.timestamp.getTime().toString()),e.type&&(t.type=e.type),e.names){for(var n=e.names(),r=0;r<n.length;++r)t[n[r]]=e.stat(n[r]);e.id&&(t.id=e.id)}else s(t,e);if(t.values){for(var i=0;i<t.values.length;++i)s(t,t.values[i]);delete t.values}return t}},{key:"statsClassifier",value:function(e){var t={},n=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return-1!==n.indexOf(e.type)},r=n("inbound-rtp","inboundrtp","remote-inbound-rtp"),i=n("outbound-rtp","outboundrtp","remote-outbound-rtp"),a=e.isRemote?"true"===e.isRemote||!0===e.isRemote:null;return null===a&&(a=n("remote-inbound-rtp","remote-outbound-rtp")),r||i?(t.tracks={},t.tracks.data=e,t.tracks.ssrc=e.ssrc,t.tracks.streamType=r?"inbound":"outbound",t.tracks.reportType=a?"remote":"local"):n("localcandidate","local-candidate")?t.localCandidate=e:n("remotecandidate","remote-candidate")?t.remoteCandidate=e:n("transport")?t.transportStats=e:n("VideoBwe")?t.bwe=e:n("track")?t.trackStats=e:n("candidate-pair","candidatepair","googCandidatePair")?t.candidatePair=e:n("codec")?t.codec=e:n("ssrc")&&(t.tracks={},t.tracks.data=e,t.tracks.ssrc=e.ssrc,t.tracks.reportType="local",t.tracks.streamType=e.bytesSent?"outbound":"inbound"),t}},{key:"getAddressInfoFromCandidates",value:function(e,t,n){for(var r=void 0,i=void 0,a=0;a<e.length;a++)r=t[e[a].localCandidateId],i=n[e[a].remoteCandidateId],r&&i&&(e[a].localAddr=r.ipAddress+":"+r.portNumber,e[a].remoteAddr=i.ipAddress+":"+i.portNumber,e[a].localAddrType=r.candidateType,e[a].remoteAddrType=i.candidateType,e[a].transportType=r.transport);return e}},{key:"getTransportHash",value:function(e){var t=void 0;return e&&(this.codeBase===u.codeBaseType.chrome?e.googLocalAddress?(t=e.googLocalAddress).concat(":",e.googRemoteAddress):e.selectedCandidatePairId&&(t=e.selectedCandidatePairId):this.codeBase===u.codeBaseType.firefox&&(t=e.localAddr).concat(":",e.remoteAddr)),f.generateHash(t)}},{key:"backFillTrackStats",value:function(e){for(var t=e.tracks.length,n=void 0,r=void 0,i=void 0,a=0;a<t;a++)(n=e.tracks[a]).data.trackId&&(r=this.getStatsForId(e.trackStats,n.data.trackId))&&(e.tracks[a].data=this.mergeObjects(e.tracks[a].data,r)),n.data.codecId&&(i=this.getStatsForId(e.codec,n.data.codecId))&&(e.tracks[a].data=this.mergeObjects(e.tracks[a].data,i));return e}},{key:"backFillCandidatePairStats",value:function(e){for(var t=e.transportStats.length,n=void 0,r=void 0,i=0;i<t;i++)(r=e.transportStats[i]).selectedCandidatePairId&&(n=this.getStatsForId(e.candidatePair,r.selectedCandidatePairId))&&(e.transportStats[i]=this.mergeObjects(e.transportStats[i],n),e.transportStats[i].csioIsRelayed=this.isCandidateRelayed(e.localIceCandidates[n.localCandidateId],e.remoteIceCandidates[n.remoteCandidateId]));return e}},{key:"mergeObjects",value:function(e,t){for(var n in t)t.hasOwnProperty(n)&&"id"!==n&&"type"!==n&&(e[n]=t[n]);return e}},{key:"getStatsForId",value:function(e,t){if(e){var n=e.filter(function(e){return e.id===t});if(n.length>0)return n[0]}}},{key:"formatRelayType",value:function(e){var t="None";switch(e){case 0:t="TURN/TLS";break;case 1:t="TURN/TCP";break;case 2:t="TURN/UDP"}return t}},{key:"getRelayType",value:function(e,t){var n=this,r=void 0;return t.getIceCandidates().some(function(t){if(t.typePreference){var i=t.typePreference>>24;return"rtp"===t.protocol&&t.address===e&&(i>=0&&i<=2&&(r=n.formatTypePreference(i)),!0)}return!1}),r}},{key:"getTransportInfo",value:function(e,t){for(var n={},r=!1,i=0;i<e.length;i++){var a=e[i];if(navigator.mozGetUserMedia&&"candidatepair"===a.type&&("true"===a.selected||!0===a.selected)){n.foundActive=!0,n.localAddr=a.localAddr,n.remoteAddr=a.remoteAddr,n.localAddrType=a.localAddrType,n.remoteAddrType=a.remoteAddrType,n.transportType=a.transportType,n.localCandidateId=a.localCandidateId,n.remoteCandidateId=a.remoteCandidateId;break}if("googCandidatePair"===a.type&&("true"===a.googActiveConnection||!0===a.googActiveConnection)){n.foundActive=!0,n.localAddr=a.googLocalAddress,n.remoteAddr=a.googRemoteAddress,n.localAddrType=a.googLocalCandidateType,n.remoteAddrType=a.googRemoteCandidateType,n.transportType=a.googTransportType;break}if("transport"===a.type){r=!0,a.selectedCandidatePairId&&(n.selectedCandidatePairId=a.selectedCandidatePairId);break}}return r&&n.localAddr&&(n.ipv6=0===n.localAddr.indexOf("["),n.relayType=getRelayType(n.localAddr,t)),n}},{key:"sendFabricTransportSwitch",value:function(e,t){e.sendFabricTransportSwitch(t)}},{key:"checkTransportStatsUpdates",value:function(e,t){var n=d.Registry.getConferenceManager().getConferenceForPcHash(t);if(n){var r=n.getPeerConnectionManager().getPcHandlerByHash(t);if(r){var i=this.getTransportInfo(e,r),a=r.getTransportInfo();a&&(a.localAddr===i.localAddr&&a.remoteAddr===i.remoteAddr&&a.transportType===i.transportType&&a.selectedCandidatePairId===i.selectedCandidatePairId&&a.localCandidateId===i.localCandidateId&&a.remoteCandidateId===i.remoteCandidateId||(r.setTransportInfo(i),this.sendFabricTransportSwitch(r,i.relayType)))}}}}]),t})();n.StatsAdapter=p},{"../collections/component":24,"../config/constants":36,"../utility/hash":108,"../utility/registry":112}],85:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.StatsAssembler=n.StatsAssemblerIO=void 0;var o=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),s=e("../collections/component"),c=n.StatsAssemblerIO={StatsTupleIn:"StatsTupleIn",CallstatsOut:"CallstatsOut"},u=(function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"StatsAssembler"));return e.pcHashes=[],e.bindPort(c.StatsTupleIn,e.receiveStats,e),e.declarePort(c.CallstatsOut),e}return a(t,s.Component),o(t,[{key:"receiveStats",value:function(e){for(var t=this,n=0;n<e.tracks.length;n++)!(function(n){var r=e.tracks[n];if(t.pcHashes.find(function(e){return e===r.pcHash}))return"continue";t.pcHashes.push(r.pcHash)})(n);var r=e.getTransportStats();for(n=0;n<this.pcHashes.length;n++){var i=this.pcHashes[n],a={};a.codec=e.getCodec(),a.trackStats=e.getTrackStats(),a.tracks=[];for(var o=0;o<e.tracks.length;o++){var s=e.tracks[o];s.pcHash===i&&a.tracks.push(s)}if(r&&r.has(i)){var u=r.get(i);u&&1===u.length?a.Transport=u[0]:a.Transport=u,this.transmit(c.CallstatsOut,i,a,e.getDestination())}}}}]),t})();n.StatsAssembler=u},{"../collections/component":24}],86:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.StatsCallbackBuilder=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=e("../utility/registry"),o=(function(){function e(){r(this,e),this.callback=null}return i(e,[{key:"setCallback",value:function(e){this.callback=e}},{key:"buildStats",value:function(e,t){this.callback&&this.buildFromUnifiedFormat(e,t)}},{key:"getConnectionState",value:function(){return!0===navigator.onLine?"online":"offline"}},{key:"buildConferenceUrl",value:function(e){var t=e.getConferenceId(),n=a.Registry.getConferenceManager().get(t);return n?n.getUrl():null}},{key:"buildFromUnifiedFormat",value:function(e,t){var n={};n.connectionState=this.getConnectionState(),n.conferenceURL=this.buildConferenceUrl(t),n.fabricState=t.getPcState(),n.streams={},n.mediaStreamTracks=[];for(var r=0;r<e.length;r++){var i=e[r];if("inbound-rtp"===i.type||"outbound-rtp"===i.type||"ssrc"===i.type||"inboundrtp"===i.type||"outboundrtp"===i.type){var a={ssrc:i.ssrc,statsType:i.type,fractionLoss:i.csioIntFL,bitrate:i.csioIntBRKbps,quality:i.csioMark,mediaType:i.csioMediaType,jitter:i.jitter,audioOutputLevel:i.audioOutputLevel,audioIntputLevel:i.audioInputLevel,audioLevel:i.audioLevel,averageRTT:i.csioAvgRtt,averageJitter:i.csioAvgJitter,packetLossPercentage:i.csioPktLossPercentage,rtt:i.roundTripTime,packetRate:i.csioIntPR,remoteUserID:t.getRemoteId()},o=t.getSSRCInfo(i.ssrc+"");if(o&&(a.cname=o.cname,a.msid=o.msid,a.usageLabel=o.usageLabel,a.associatedVideoTag=o.associatedVideoTag),i.hasOwnProperty("roundTripTime")?a.rtt=i.roundTripTime:i.hasOwnProperty("googRtt")?a.rtt=i.googRtt:i.hasOwnProperty("mozRtt")&&(a.rtt=i.mozRtt),i.hasOwnProperty("jitter")?a.jitter=i.jitter:i.hasOwnProperty("googJitterReceived")&&(a.jitter=i.googJitterReceived),"inboundrtp"===a.statsType)a.statsType="inbound-rtp";else if("outboundrtp"===a.statsType)a.statsType="outbound-rtp";else if("ssrc"===a.statsType){i.id.indexOf("send")>0?a.statsType="outbound-rtp":a.statsType="inbound-rtp"}"remote-inbound-rtp"!==a.statsType&&"remote-outbound-rtp"!==a.statsType&&(!0!==i.isRemote&&"true"!==i.isRemote||(a.statsType="remote-"+a.statsType)),n.streams[i.ssrc]=a,n.mediaStreamTracks.push(a)}}this.callback(n)}}]),e})();n.StatsCallbackBuilder=o},{"../utility/registry":112}],87:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.StatsMonitor=n.StatsMonitorIO=void 0;var s=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),c=e("../collections/component"),u=e("./tracksmonitor"),l=e("./transportsmonitor"),d=e("./intervalstatsmonitor"),f=e("./qualityevaluator"),h=e("./statstuple"),p=e("../utility/registry"),v=e("./monitorhooks/sendingtrigger"),g=e("./monitorhooks/onewaymediaobserver"),y=e("./monitorhooks/throughputobserver"),m=e("./monitorhooks/cpulimitationobserver"),b=e("./monitorhooks/qpsumobserver"),k=e("./monitorhooks/circuitbreakerobserver"),S=e("./monitorhooks/avdesyncobserver"),w=r(e("../utility/timestamps")),C=r(e("../config/constants")),T=r(e("../utility/csiologger")),_=n.StatsMonitorIO={PcStatsTupleIn:"PcStatsTupleIn",StatsTupleOut:"StatsTupleOut"},P=(function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"StatsMonitor"));return n.bindPort(_.PcStatsTupleIn,n.receive,n),n.declarePort(_.StatsTupleOut),n.lastPcStats=null,n.lastPcHash=null,n.tracksmonitor=new u.TracksMonitor,n.transportsmonitor=new l.TransportsMonitor(e),n.intervalstatsmonitor=new d.IntervalStatsMonitor,n.qualityevaluator=new f.QualityEvaluator,n.candidatepairs=new Map,n.monitorhooks=[],n.sendingTrigger=new v.SendingTrigger(n.sendStatsTuple.bind(n)),n.oneWayMediaObserver=new g.OneWayMediaObserver(n.sendDisruptions.bind(n)),n.throughputObserver=new y.ThroughputObserver(n.sendThroughputObservations.bind(n)),n.cpuLimitationObserver=new m.CPULimitationObserver(n.sendCPULimitationObservations.bind(n)),n.qpSumObserver=new b.QPSumObserver(n.sendQPSumDistortions.bind(n)),n.circuitBreakerObserver=new k.CircuitBreakerObserver(n.sendCircuitBreakerEvent.bind(n)),n.avDesyncObserver=new S.AVDeSyncObserver,n.setupHooks(),n.statsToCallbackSent=w.getCurrent(),n}return o(t,c.Component),s(t,[{key:"setupHooks",value:function(){this.monitorhooks.push(this.sendingTrigger.accept.bind(this.sendingTrigger)),this.monitorhooks.push(this.oneWayMediaObserver.accept.bind(this.oneWayMediaObserver)),this.monitorhooks.push(this.throughputObserver.accept.bind(this.throughputObserver)),this.monitorhooks.push(this.cpuLimitationObserver.accept.bind(this.cpuLimitationObserver)),this.monitorhooks.push(this.qpSumObserver.accept.bind(this.qpSumObserver)),this.monitorhooks.push(this.circuitBreakerObserver.accept.bind(this.circuitBreakerObserver)),this.monitorhooks.push(this.avDesyncObserver.accept.bind(this.avDesyncObserver))}},{key:"setIntervals",value:function(e,t){this.sendingTrigger.setup(e,t)}},{key:"receive",value:function(e){var t=e.getPcHash();this.candidatepairs.set(t,e.getCandidatePair()),this.transportsmonitor.set(t,e.getTransportStats()),this.intervalstatsmonitor.set(t,e.getMeasurements());for(var n=e.getMeasurements(),r=0;r<n.length;r++){var i=n[r],a=this.tracksmonitor.getMonitor(i);a?a.add(i):T.warn("No monitor for ssrc "+i.getSSRC())}this.lastPcStats=e,this.lastPcHash=t;for(var o=this.tracksmonitor.getMonitors(),s=this.monitorhooks,c=0;c<s.length;c++)(0,s[c])(o);var u=w.getCurrent();5e3<u-this.statsToCallbackSent&&(this.sendStatsTuple(C.statsDestination.callback),this.statsToCallbackSent=u)}},{key:"getCandidatePairs",value:function(){var e=[];return this.candidatepairs.forEach(function(t,n){var r=[n,t];e.push(r)}),e}},{key:"sendStatsTuple",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===e&&(e=C.statsDestination.backend);var t=new h.StatsTuple(this.getCandidatePairs(),this.lastPcStats.getCodec(),this.lastPcStats.getTrackStats(),this.transportsmonitor.getIntervalStats(),this.tracksmonitor.extractTracks(),this.intervalstatsmonitor.getIntervalStats(e),e);t=this.qualityevaluator.updateQualityStats(t),this.transmit(_.StatsTupleOut,t)}},{key:"sendDisruptions",value:function(e){var t=this;e.forEach(function(e){e.isStarted()?t.sendEventMsg(C.internalFabricEvent.oneWayMediaStart,e.getContent()):t.sendEventMsg(C.internalFabricEvent.oneWayMediaStop,e.getContent())})}},{key:"sendCircuitBreakerEvent",value:function(e){var t=this;e.forEach(function(e){t.sendEventMsg(C.internalFabricEvent.circuitBreaker,e.getContent())})}},{key:"sendCPULimitationObservations",value:function(e){}},{key:"sendQPSumDistortions",value:function(e){}},{key:"sendThroughputObservations",value:function(e){this.sendEventMsg(C.internalFabricEvent.sendingThroughputObservations,e)}},{key:"sendEventMsg",value:function(e,t){if(this.lastPcHash){var n=p.Registry.getConferenceManager().getConferenceForPcHash(this.lastPcHash);if(n){var r=n.getPeerConnectionManager().getPcHandlerByHash(this.lastPcHash),i=r.getPeerConnection(),a=r.getConferenceId();p.Registry.getEventMessageBuilder().make(e,a,i,t)}}}},{key:"delete",value:function(e){this.tracksmonitor&&this.tracksmonitor.deleteTracks(e),this.transportsmonitor&&this.transportsmonitor.delete(e),this.intervalstatsmonitor&&this.intervalstatsmonitor.delete(e),this.candidatepairs&&this.candidatepairs.has(e)&&this.candidatepairs.delete(e)}}]),t})();n.StatsMonitor=P},{"../collections/component":24,"../config/constants":36,"../utility/csiologger":104,"../utility/registry":112,"../utility/timestamps":116,"./intervalstatsmonitor":63,"./monitorhooks/avdesyncobserver":66,"./monitorhooks/circuitbreakerobserver":67,"./monitorhooks/cpulimitationobserver":75,"./monitorhooks/onewaymediaobserver":76,"./monitorhooks/qpsumobserver":77,"./monitorhooks/sendingtrigger":78,"./monitorhooks/throughputobserver":79,"./qualityevaluator":82,"./statstuple":90,"./tracksmonitor":97,"./transportsmonitor":98}],88:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.StatsParser=n.StatsParserIO=void 0;var s=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),c=e("../collections/component"),u=e("./measurement"),l=e("./pcstats"),d=r(e("./validator")),f=r(e("../config/constants")),h=r(e("../utility/csiologger")),p=n.StatsParserIO={RawStatsIn:"RawStatsIn",PcStatsTupleOut:"PcStatsTupleOut"},v=(function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"StatsParser"));return e.bindPort(p.RawStatsIn,e.receive,e),e.declarePort(p.PcStatsTupleOut),e}return o(t,c.Component),s(t,[{key:"receive",value:function(e){if(null!==e){for(var t=e.tracks,n=[],r=0;r<t.length;++r){var i=t[r];if(i&&i.data){var a=u.Measurement.make(e.pcHash,this.getSSRC(i),this.getStreamType(i),this.getMediaType(i),this.getReportType(i),this.getFrameRateReceived(i),this.getFrameHeight(i),this.getFrameWidth(i),this.getDroppedFramesNum(i),this.getFramesReceived(i),this.getRTT(i),this.getJitter(i),this.getLostPackets(i),this.getReceivedPackets(i),this.getSentPackets(i),this.getDiscardedPackets(i),this.getSentBytes(i),this.getReceivedBytes(i),this.getFractionLost(i),this.getGoogEchoCancellationReturnLoss(i),this.getGoogEchoCancellationReturnLossEnhancement(i),i);n.push(a)}else h.log("No track or track.data.")}var o=new l.PcStats(e.candidatePair,e.codec,e.pcHash,e.trackStats,e.transportStats,n);this.transmit(p.PcStatsTupleOut,o)}else h.warn("Stats object can not be null")}},{key:"getSSRC",value:function(e){return e.ssrc}},{key:"getStreamType",value:function(e){return e.streamType===f.streamType.inbound?f.streamType.inbound:e.streamType===f.streamType.outbound?f.streamType.outbound:void 0}},{key:"getSentBytes",value:function(e){if(void 0===e.data.bytesSent)return-1;var t=d.checkForNan(parseInt(e.data.bytesSent,10));return null!==t?t:-1}},{key:"getReceivedBytes",value:function(e){if(void 0===e.data.bytesReceived)return-1;var t=d.checkForNan(parseInt(e.data.bytesReceived,10));return null!==t?t:-1}},{key:"getReceivedPackets",value:function(e){if(void 0===e.data.packetsReceived)return-1;var t=d.checkForNegativeValue(parseInt(e.data.packetsReceived,10));return null!==t?t:-1}},{key:"getSentPackets",value:function(e){if(void 0===e.data.packetsSent)return-1;var t=d.checkForNegativeValue(parseInt(e.data.packetsSent,10));return null!==t?t:-1}},{key:"getDiscardedPackets",value:function(e){if(void 0===e.data.discardedPackets)return-1;var t=d.checkForNan(parseInt(e.data.discardedPackets,10));return null!==t?t:-1}},{key:"getLostPackets",value:function(e){if(void 0===e.data.packetsLost)return-1;var t=d.checkForNegativeValue(parseInt(e.data.packetsLost,10));return null!==t?t:-1}},{key:"getDroppedFramesNum",value:function(e){if(void 0===e.data.droppedFrames)return-1;var t=d.checkForNegativeValue(parseInt(e.data.droppedFrames,10));return null!==t?t:-1}},{key:"getFramesReceived",value:function(e){if(void 0===e.data.framesReceived)return-1;var t=d.checkForNegativeValue(parseInt(e.data.framesReceived,10));return null!==t?t:-1}},{key:"getFrameRateReceived",value:function(e){var t=null;return void 0!==e.data.framerateMean?t=parseInt(e.data.framerateMean,10):void 0!==e.data.framesPerSecond?t=parseInt(e.data.framesPerSecond,10):void 0!==e.data.googFrameRateOutput?t=parseInt(e.data.googFrameRateOutput,10):void 0!==e.data.googFrameRateDecoded?t=parseInt(e.data.googFrameRateDecoded,10):void 0!==e.data.googFrameRateReceived?t=parseInt(e.data.googFrameRateReceived,10):void 0!==e.data.googFrameRateSent&&(t=parseInt(e.data.googFrameRateSent,10)),void 0!==t&&(t=d.checkForNegativeValue(t)),t}},{key:"getFrameHeight",value:function(e){var t=void 0;return void 0!==e.data.frameHeight?t=e.data.frameHeight:void 0!==e.data.googFrameHeightReceived?t=e.data.googFrameHeightReceived:void 0!==e.data.googFrameHeightSent&&(t=e.data.googFrameHeightSent),t}},{key:"getJitter",value:function(e){return void 0!==e.data.jitter?d.checkForNan(parseFloat(e.data.jitter,10)):void 0!==e.data.googJitterReceived?d.checkForNan(parseFloat(e.data.googJitterReceived,10)):void 0}},{key:"getFrameWidth",value:function(e){return void 0!==e.data.frameWidth?e.data.frameWidth:void 0!==e.data.googFrameWidthReceived?e.data.googFrameWidthReceived:void 0!==e.data.googFrameWidthSent?e.data.googFrameWidthSent:void 0}},{key:"getRTT",value:function(e){var t=function(e){return isNaN(e)||e<0?null:e};return void 0!==e.data.roundTripTime?t(parseFloat(e.data.roundTripTime,10)):void 0!==e.data.googRtt?t(parseFloat(e.data.googRtt,10)):void 0!==e.data.mozRtt?t(parseFloat(e.data.mozRtt,10)):void 0}},{key:"getMediaType",value:function(e){var t=f.mediaType.unknown;return e.data&&void 0!==e.data.mediaType?e.data.mediaType:e.data&&void 0!==e.data.kind?e.data.kind:(e.data.mediaType?t=e.data.mediaType:void 0!==e.data.googFrameRateReceived||void 0!==e.data.googFrameRateSent?t=f.mediaType.video:void 0!==e.data.audioInputLevel||void 0!==e.data.audioOutputLevel?t=f.mediaType.audio:void 0!==e.data.framerateMean&&(t=f.mediaType.video),t)}},{key:"getReportType",value:function(e){return e.reportType||f.reportType.unknown}},{key:"getFractionLost",value:function(e){return void 0===e.data.fractionLost?-1:(function(e){return isNaN(e)||e<0?null:e})(parseFloat(e.data.fractionLost,10))}},{key:"getGoogEchoCancellationReturnLoss",value:function(e){return void 0===e.data.googEchoCancellationReturnLoss?-1:d.checkForNan(parseFloat(e.data.googEchoCancellationReturnLoss,10))}},{key:"getGoogEchoCancellationReturnLossEnhancement",value:function(e){return void 0===e.data.googEchoCancellationReturnLossEnhancement?-1:d.checkForNan(parseFloat(e.data.googEchoCancellationReturnLossEnhancement,10))}}]),t})();n.StatsParser=v},{"../collections/component":24,"../config/constants":36,"../utility/csiologger":104,"./measurement":64,"./pcstats":81,"./validator":99}],89:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.StatsTransmitter=n.StatsTransmitterIO=void 0;var s=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),c=e("../collections/component"),u=e("../utility/registry"),l=r(e("../config/constants")),d=r(e("../utility/csiologger")),f=n.StatsTransmitterIO={CallstatsIn:"CallstatsIn",UnprocessedIn:"UnprocessedIn"},h=(function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"StatsTransmitter"));return e.battery=u.Registry.getBattery(),e.lastUnprocessedStats={},e.bindPort(f.CallstatsIn,e.receiveCallstats,e),e.bindPort(f.UnprocessedIn,e.receiveUnprocessed,e),e}return o(t,c.Component),s(t,[{key:"receiveUnprocessed",value:function(e,t){this.lastUnprocessedStats[t]=e}},{key:"receiveCallstats",value:function(e,t,n){var r=this.getUnifiedFormat(t,e);r?this.send(e,r,n):d.warn("Content can not be sent")}},{key:"send",value:function(e,t,n){var r=u.Registry.getConferenceManager().getConferenceForPcHash(e);if(r){var i=r.getPeerConnectionManager().getPcHandlerByHash(e);if(i){var a=i.getPcState();if(a!==l.fabricState.terminated&&a!==l.fabricState.hold)return n===l.statsDestination.callback?void this.sendToStatsCallback(t.stats,i):void u.Registry.getEventMessageBuilder().make(l.callstatsChannels.processedStats,i.getConferenceId(),i.getPeerConnection(),t)}}}},{key:"sendToStatsCallback",value:function(e,t){var n=u.Registry.getStatsCallbackBuilder();n&&n.buildStats(e,t)}},{key:"getUnifiedFormat",value:function(e,t){for(var n=this.lastUnprocessedStats[t],r=[],i=0;i<n.length;i++){var a=n[i],o=(function(t){for(var n=0;n<e.tracks.length;n++){var r=e.tracks[n];if(r.data.id===t.id&&r.data.type===t.type)return r.data}return t.id===e.Transport.id&&t.type===e.Transport.type?e.Transport:null})(a);if(o){for(var s in o)if(o.hasOwnProperty(s)){if("id"===s||"type"===s||"timestamp"===s)continue;a[s]=o[s]}r.push(a)}else r.push(a)}var c={stats:r};return c.wifiStats=u.Registry.getWifiStatsExecutor().getWifiStats(),c.batteryStatus={},c.batteryStatus.batteryLevel=this.battery.getLevel(),c.batteryStatus.isBatteryCharging=this.battery.getCharging(),c}}]),t})();n.StatsTransmitter=h},{"../collections/component":24,"../config/constants":36,"../utility/csiologger":104,"../utility/registry":112}],90:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.StatsTuple=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=e("./intervalstatsmonitor"),o=(function(){function e(t,n,i,o,s,c,u){r(this,e),this.candidatePairs=t,this.codec=n,this.trackStats=i,this.transportStats=o,this.tracks=a.IntervalStatsMonitor.mergeIntervalStats(s,c),this.destination=u}return i(e,[{key:"getCandidatePairs",value:function(){return this.candidatePairs}},{key:"getCodec",value:function(){return this.codec}},{key:"getTrackStats",value:function(){return this.trackStats}},{key:"getTransportStats",value:function(){return this.transportStats}},{key:"getTracks",value:function(){return this.tracks}},{key:"getDestination",value:function(){return this.destination}}]),e})();n.StatsTuple=o},{"./intervalstatsmonitor":63}],91:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.EchoDetection=void 0;var s=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),c=r(e("../../config/constants")),u=r(e("../validator")),l=e("./swplugin"),d=(function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r))}return o(t,l.SWPlugin),s(t,[{key:"detectEcho",value:function(e,n,r){if(!u.isNumber(e)||!u.isNumber(n)||!u.isNumber(r))return null;var i=t.getEModelValue(r/2,e+n);return t.getEchoRating(i)}},{key:"add",value:function(e){this.filter(e)&&this.calculate(e)}},{key:"remove",value:function(e){}},{key:"calculate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=this.detectEcho(e.getGoogEchoCancellationReturnLoss(),e.getGoogEchoCancellationReturnLossEnhancement(),e.getRTT());this.notify(t)}}],[{key:"isValidTrack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return!!e&&e.getReportType()===c.reportType.local&&e.getStreamType()===c.streamType.outbound&&e.getMediaType()===c.mediaType.audio}},{key:"getEModelValue",value:function(e,t){var n=(1+e/10)/(1+e/150),r=e*e*-.3,i=t-40*Math.log(n)+6*Math.pow(Math.E,r);return u.isNumber(i)?i:null}},{key:"getEchoRating",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e>=14?c.echoDetectionLabel.acceptable:e>8&&e<14?c.echoDetectionLabel.limitingCase:e<=8?c.echoDetectionLabel.unacceptable:null}}]),t})();n.EchoDetection=d},{"../../config/constants":36,"../validator":99,"./swplugin":94}],92:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.SWAvg=void 0;var o=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),s=e("./swplugin"),c=(function(e){function t(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,a));return o.sum=0,o.counter=0,o}return a(t,s.SWPlugin),o(t,[{key:"add",value:function(e){this.filter(e)&&(this.sum+=this.extract(e),this.counter+=1,this.calculate())}},{key:"remove",value:function(e){}},{key:"calculate",value:function(){var e=0;this.counter<1?this.notify(e):(e=this.sum/this.counter,this.notify(e))}}]),t})();n.SWAvg=c},{"./swplugin":94}],93:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.SWFunctor=void 0;var o=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),s=e("./swplugin"),c=(function(e){function t(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,null,null,a));return o.addFunc=e,o.remFunc=n,o}return a(t,s.SWPlugin),o(t,[{key:"add",value:function(e){this.filter(e)&&this.addFunc&&this.addFunc(e)}},{key:"remove",value:function(e){this.filter(e)&&this.remFunc&&this.remFunc(e)}},{key:"toString",value:function(){return"SWFuncPlugin"}}]),t})();n.SWFunctor=c},{"./swplugin":94}],94:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.SWPlugin=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../../utility/csiologger")),o=(function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r(this,e),this.extractorFnc=t,this.notifierFnc=n,this.filterFunc=i}return i(e,[{key:"notify",value:function(e,t,n){this.notifierFnc?this.notifierFnc(e,t,n):a.warn("Failed notification for "+this.toString())}},{key:"extract",value:function(e){return this.extractorFnc?this.extractorFnc(e):(a.warn(this.toString()+" tried to extract without extractorFnc"),null)}},{key:"filter",value:function(e){return!this.filterFunc||this.filterFunc(e)}},{key:"add",value:function(e){a.log("Abstract method is called width value: "+e)}},{key:"remove",value:function(e){a.log("Abstract method is called with value: "+e)}},{key:"toString",value:function(){return"SWPlugin"}}]),e})();n.SWPlugin=o},{"../../utility/csiologger":104}],95:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.SWSBTreePercentile=void 0;var o=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),s=e("./swplugin"),c=e("../../collections/sizedbalancedtree"),u=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../../config/constants")),l=(function(e){function t(e,n,a){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,a));return o.sbTree=new c.SizedBalancedTree(u.maxSBTTreeSize),o.result=null,o}return a(t,s.SWPlugin),o(t,[{key:"add",value:function(e){this.filter(e)&&(this.sbTree.add(this.extract(e)),this.calculate())}},{key:"remove",value:function(e){}},{key:"calculate",value:function(){var e=this.sbTree.getSize(),t=Math.round(.5*e),n=this.sbTree.select(t),r=Math.round(.75*e),i=this.sbTree.select(r),a=Math.round(.95*e),o=this.sbTree.select(a);this.notify(n,i,o)}}]),t})();n.SWSBTreePercentile=l},{"../../collections/sizedbalancedtree":29,"../../config/constants":36,"./swplugin":94}],96:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.TrackMonitor=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},u=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),l=e("../utility/registry"),d=e("../collections/slidingwindow"),f=e("../statspipeline/swplugins/swavg"),h=e("../statspipeline/swplugins/echodetection"),p=e("../statspipeline/swplugins/swsbtreepercentile"),v=e("../statspipeline/swplugins/swfunctor"),g=r(e("../utility/timestamps")),y=r(e("../config/constants")),m=r(e("./validator")),b=r(e("../utility/csiologger")),k=(function(e){function t(e,n,r,o){i(this,t);var s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return s.thresholds=[],s.enableThresholds=!1,s.requestTime=0,s.started=0,s.created=g.getCurrent(),s.mediaType=o,s.streamType=r,s.metrics=s.makeTrack(),s.lastTrack={},s.prevFrameRateMean=null,s.ssrc=null,s}return o(t,d.SlidingWindow),u(t,null,[{key:"make",value:function(e,n,r,i){var a=new t(e,n,r,i),o=a.metrics;return a.attach(new f.SWAvg(function(e){return e.getJitter()},function(e){o.csioAvgJitter=e},function(e){var t=e.getJitter();return m.isNumber(t)})),a.attach(new f.SWAvg(function(e){return e.getRTT()},function(e){o.csioAvgRtt=e},function(e){var t=e.getRTT();return m.isNumber(t)})),a.attach(new h.EchoDetection(function(e){return e},function(e){o.csioEchoLabel=e},function(e){return h.EchoDetection.isValidTrack(e)})),a.attach(new p.SWSBTreePercentile(function(e){return e.getJitter()},function(e,t,n){o.csioPercentileJitter=n,o.csio75PercentileJitter=t},function(e){var t=e.getJitter();return m.isNumber(t)})),a.attach(new p.SWSBTreePercentile(function(e){return e.getRTT()},function(e,t,n){o.csioSig2Latency=n,o.csioSig2Latency75=t,o.csioeM=n+40},function(e){var t=e.getRTT();return m.isNumber(t)})),r===y.streamType.inbound?t.setupInboundMonitor(a):r===y.streamType.outbound?t.setupOutboundMonitor(a):b.warn("Unrecognized streamType ("+r+") at TrackMonitor"),i===y.mediaType.audio?t.setupAudioMonitor(a):i===y.mediaType.video?t.setupVideoMonitor(a):b.warn("Unrecognized mediaType ("+i+") at TrackMonitor"),a}},{key:"setupInboundMonitor",value:function(e){var t=e.metrics;e.addPreProcess(function(n){var r=n.getFractionLost();if(!m.checkForPositiveValue(r)){var i=n.getLostPackets(),a=n.getReceivedPackets(),o=e.getRequestedMeasurement(),s=0,c=0;o?(s=i-o.getLostPackets(),c=a-o.getReceivedPackets()):(s=i,c=a),m.checkForPositiveValue(s)&&m.checkForPositiveValue(c)&&(r=s/Math.max(c+s,1),m.checkForPositiveValue(r)&&(t.csioIntFLRate=r,n.setFractionLost(r)))}}),e.addPreProcess(function(n){if(!n.getFrameRateReceived()&&n.getFramesReceived()&&0<e.started){var r=n.getFramesReceived(),i=g.getCurrent()-e.started;i>0&&r>=0&&(t.csioEstFrameRatePerSecond=1e3*r/i)}}),e.attach(new v.SWFunctor(function(n){var r=g.getCurrent(),i=n.getResolution(),a=e.getRequestedMeasurement(),o=e.getRequestTime(),s=8*n.getReceivedBytes(),c=n.getReceivedPackets(),u=0,d=0,f=0,h=Math.max(r-e.getStartTime(),f);a?(u=s-8*a.getReceivedBytes(),d=Math.max(r-o,f)):(f=l.Registry.getCredentials().isAdaptiveStatsEnabled()?y.adaptiveStatsIntervalsInMs.min:l.Registry.getCredentials().getStatsSubmissionInterval(),h=Math.max(r-e.getStartTime(),f),u=s,d=Math.max(h,f)),t.csioAvgBRKbps=s/h,t.intervalBandwidth=Math.max(u/d,0),t.csioAvgPacketSize=n.getReceivedBytes()/Math.max(c,1),t.csiores=i},null,null)),e.attach(new p.SWSBTreePercentile(function(e){return e.getFractionLost()},function(e,n,r){var i=m.checkForPositiveValue(r)?r:null;t.csioPercentileFl=i},function(e){var t=e.getFractionLost();return m.isNumber(t)&&m.checkForPositiveValue(t)}))}},{key:"setupOutboundMonitor",value:function(e){var t=e.metrics;e.addPreProcess(function(n){var r=n.getFractionLost();if(!m.checkForPositiveValue(r)){var i=n.getLostPackets(),a=n.getSentPackets(),o=e.getRequestedMeasurement(),s=0,c=0;o?(s=i-o.getLostPackets(),c=a-o.getSentPackets()):(s=i,c=a),m.checkForPositiveValue(s)&&m.checkForPositiveValue(c)&&(r=s/Math.max(c+s,1),m.checkForPositiveValue(r)&&(t.csioIntFLRate=r,n.setFractionLost(r)))}}),e.attach(new v.SWFunctor(function(n){var r=g.getCurrent(),i=n.getResolution(),a=e.getRequestedMeasurement(),o=e.getRequestTime(),s=8*n.getSentBytes(),c=n.getSentPackets(),u=0,d=0,f=0,h=Math.max(r-e.getStartTime(),f);a?(u=s-8*a.getSentBytes(),d=Math.max(r-o,f)):(f=l.Registry.getCredentials().isAdaptiveStatsEnabled()?y.adaptiveStatsIntervalsInMs.min:l.Registry.getCredentials().getStatsSubmissionInterval(),h=Math.max(r-e.getStartTime(),f),u=s,d=Math.max(h,f)),t.csioAvgBRKbps=s/h,t.intervalBandwidth=Math.max(u/d,0),t.csioAvgPacketSize=n.getSentBytes()/Math.max(c,1),t.csiores=i},null,null)),e.attach(new p.SWSBTreePercentile(function(e){return e.getFractionLost()},function(e,n,r){var i=m.checkForPositiveValue(r)?r:null;t.csioPercentileFl=i},function(e){var t=e.getFractionLost();return m.isNumber(t)&&m.checkForPositiveValue(t)}))}},{key:"setupAudioMonitor",value:function(e){var t=e.metrics;e.attach(new v.SWFunctor(function(e){t.csioMediaType=y.mediaType.audio},null,null))}},{key:"setupVideoMonitor",value:function(e){var t=e.metrics;e.attach(new f.SWAvg(function(e){return e.getFrameRateReceived()},function(n){e.prevFrameRateMean=t.csioFrameRateMean,t.csioPrevFrameRateMean=t.csioFrameRateMean,t.csioFrameRateMean=n},function(e){var t=e.getFrameRateReceived();return m.isNumber(t)})),e.attach(new f.SWAvg(function(e){return e.getFrameHeight()},function(e){t.csioFrameHeightMean=e},function(e){var t=e.getFrameHeight();return m.isNumber(t)})),e.attach(new f.SWAvg(function(e){return e.getFrameWidth()},function(e){t.csioFrameWidthMean=e},function(e){var t=e.getFrameWidth();return m.isNumber(t)})),e.attach(new p.SWSBTreePercentile(function(e){return e.getFrameRateReceived()},function(e){t.csioFrameRate50Percentile=e},function(e){var t=e.getFrameRateReceived();return m.isNumber(t)})),e.attach(new p.SWSBTreePercentile(function(e){return e.getFrameHeight()},function(e){t.csioFrameHeight50Percentile=e},function(e){var t=e.getFrameHeight();return m.isNumber(t)})),e.attach(new p.SWSBTreePercentile(function(e){return e.getFrameWidth()},function(e){t.csioFrameWidth50Percentile=e},function(e){var t=e.getFrameWidth();return m.isNumber(t)})),e.attach(new v.SWFunctor(function(e){t.csioMediaType=y.mediaType.video},null,null))}}]),u(t,[{key:"makeTrack",value:function(){var e={csioMediaType:void 0,csioMark:void 0,intervalBandwidth:void 0,csioAvgBRKbps:void 0,csioAvDesync:void 0,csioIntBRKbps:void 0,csioIntFL:void 0,csioIntFLRate:void 0,csioIntMs:void 0,csioIntPR:void 0,csioPercentileFl:void 0,csioAvgJitter:void 0,csioAvgRtt:void 0,csioEchoLabel:void 0,csioPercentileJitter:void 0,csioSig2Latency:void 0,csioTimeElapseMs:void 0,csioeM:void 0,csiores:void 0,csioFrameWidth95Percentile:void 0,csioFrameWidth50Percentile:void 0,csioFrameHeight95Percentile:void 0,csioFrameHeight50Percentile:void 0,csioFrameRate95Percentile:void 0,csioFrameRate50Percentile:void 0,csioFrameWidthMean:void 0,csioFrameHeightMean:void 0,csioFrameRateMean:void 0,csioIntPktRcv:void 0};return e}},{key:"getSSRC",value:function(){return this.ssrc}},{key:"add",value:function(e){this.ssrc=e.getSSRC(),this.lastTrack=e.extractTrack(),this.lastTrack.pcHash=e.getPcHash(),0===this.started&&(this.started=g.getCurrent()),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e)}},{key:"hasTraffic",value:function(){return 0<this.metrics.intervalBandwidth}},{key:"getTrack",value:function(){var e=this.lastTrack;return e.data=s({},e.data,this.metrics),e}},{key:"extractTrack",value:function(){var e=this.lastTrack;return e.data=s({},e.data,this.metrics),this.requestTime=g.getCurrent(),this.requestedMeasurement=this.peek(),e}},{key:"getMediaType",value:function(){return this.mediaType}},{key:"getStreamType",value:function(){return this.streamType}},{key:"getStartTime",value:function(){return this.started}},{key:"getCreationTime",value:function(){return this.created}},{key:"getRequestTime",value:function(){return Math.max(this.started,this.requestTime)}},{key:"getRequestedMeasurement",value:function(){return this.requestedMeasurement}},{key:"addPreProcess",value:function(e){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addPreProcess",this).call(this,e)}},{key:"addPostProcess",value:function(e){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addPostProcess",this).call(this,e)}}]),t})();n.TrackMonitor=k},{"../collections/slidingwindow":31,"../config/constants":36,"../statspipeline/swplugins/echodetection":91,"../statspipeline/swplugins/swavg":92,"../statspipeline/swplugins/swfunctor":93,"../statspipeline/swplugins/swsbtreepercentile":95,"../utility/csiologger":104,"../utility/registry":112,"../utility/timestamps":116,"./validator":99}],97:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.TracksMonitor=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=e("./trackmonitor"),o=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../config/constants")),s=(function(){function e(){r(this,e),this.inbMonitors=new Map,this.outbMonitors=new Map}return i(e,[{key:"getMonitor",value:function(e){var t=e.getStreamType(),n=e.getMediaType(),r=e.getSSRC(),i=null;return t===o.streamType.inbound?n===o.mediaType.audio?i=this.getInbAudioMonitor(r):n===o.mediaType.video&&(i=this.getInbVideoMonitor(r)):t===o.streamType.outbound&&(n===o.mediaType.audio?i=this.getOutbAudioMonitor(r):n===o.mediaType.video&&(i=this.getOutbVideoMonitor(r))),i}},{key:"extractTracks",value:function(){var e=[];return this.outbMonitors.forEach(function(t,n){e.push(t.extractTrack())}),this.inbMonitors.forEach(function(t,n){e.push(t.extractTrack())}),e}},{key:"deleteTracks",value:function(e){var t=this;this.outbMonitors.forEach(function(n,r){var i=n.getRequestedMeasurement();i&&i.getPcHash()===e&&t.outbMonitors.has(r)&&t.outbMonitors.delete(r)}),this.inbMonitors.forEach(function(n,r){var i=n.getRequestedMeasurement();i&&i.getPcHash()===e&&t.inbMonitors.has(r)&&t.inbMonitors.delete(r)})}},{key:"getTracks",value:function(){var e=[];return this.outbMonitors.forEach(function(t,n){e.push(t.getTrack())}),this.inbMonitors.forEach(function(t,n){e.push(t.getTrack())}),e}},{key:"getMonitors",value:function(){var e=[];return this.outbMonitors.forEach(function(t,n){e.push(t)}),this.inbMonitors.forEach(function(t,n){e.push(t)}),e}},{key:"getInbAudioMonitor",value:function(e){var t=this.inbMonitors.get(e);return t||(t=a.TrackMonitor.make(1e3,3e4,o.streamType.inbound,o.mediaType.audio),this.inbMonitors.set(e,t)),t}},{key:"getInbVideoMonitor",value:function(e){var t=this.inbMonitors.get(e);return t||(t=a.TrackMonitor.make(1e3,3e4,o.streamType.inbound,o.mediaType.video),this.inbMonitors.set(e,t)),t}},{key:"getOutbAudioMonitor",value:function(e){var t=this.outbMonitors.get(e);return t||(t=a.TrackMonitor.make(1e3,3e4,o.streamType.outbound,o.mediaType.audio),this.outbMonitors.set(e,t)),t}},{key:"getOutbVideoMonitor",value:function(e){var t=this.outbMonitors.get(e);return t||(t=a.TrackMonitor.make(1e3,3e4,o.streamType.outbound,o.mediaType.video),this.outbMonitors.set(e,t)),t}}]),e})();n.TracksMonitor=s},{"../config/constants":36,"./trackmonitor":96}],98:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.TransportsMonitor=void 0;var a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=r(e("../config/constants")),s=r(e("../utility/timestamps")),c=(function(){function e(t){i(this,e),this.previous=t,this.actual=t,this.outdated=s.getCurrent()}return a(e,[{key:"setActual",value:function(e){this.actual=e}},{key:"outdate",value:function(){this.previous=this.actual,this.outdated=s.getCurrent()}},{key:"getActual",value:function(){return this.actual}},{key:"getPrevious",value:function(){return this.previous}},{key:"getElapsedTime",value:function(){return s.getCurrent()-this.outdated}}]),e})(),u=(function(){function e(t){i(this,e),this.stats=new Map,this.codeBase=t}return a(e,[{key:"set",value:function(e,t){var n=this.stats.get(e);if(n)n.setActual(t);else{if(t)for(var r=0;r<t.length;++r)t[r].csioTurnMins=0,t[r].csioBytesSent=0,t[r].csioBytesReceived=0;this.stats.set(e,new c(t))}}},{key:"delete",value:function(e){e&&this.stats.has(e)&&this.stats.delete(e)}},{key:"getIntervalStats",value:function(){var e=this,t=new Map;return this.stats.forEach(function(n,r){t.set(r,e.getIntervalStat(n)),n.outdate()}),t}},{key:"getIntervalStat",value:function(e){var t=null;switch(this.codeBase){case o.codeBaseType.chrome:t=this.getIntervalStatForChrome(e);break;default:t=this.getDefaultIntervalStat(e)}return t}},{key:"getDefaultIntervalStat",value:function(e){var t=e.getActual(),n=e.getPrevious(),r=e.getElapsedTime();if(!n)return t;for(var i=0;i<t.length;++i){var a=t[i],o=n[i];if(!o||!a)return t;var s=parseInt(o.bytesReceived,10),c=parseInt(o.bytesSent,10);a.csioReceivedBwKbps=8*(parseInt(a.bytesReceived,10)-s)/r,a.csioSentBwKbps=8*(parseInt(a.bytesSent,10)-c)/r,a.csioIntBytesReceived=parseInt(a.bytesReceived,10)-s,a.csioIntBytesSent=parseInt(a.bytesSent,10)-c,a.csioIsRelayed&&(a.csioIntBytesSent>0||a.csioIntBytesReceived>0)?(a.csioTurnMins=r+o.csioTurnMins,a.csioBytesSent=o.csioBytesSent+a.csioIntBytesSent,a.csioBytesReceived=o.csioBytesReceived+a.csioIntBytesReceived):a.csioTurnMins=o.csioTurnMins}return t}},{key:"getIntervalStatForChrome",value:function(e){var t=e.getActual(),n=e.getPrevious(),r=e.getElapsedTime();if(!n)return actual;for(var i=0;i<t.length;++i){var a=t[i],o=n[i];if(!o||!a)return t;var s=parseInt(o.bytesReceived,10),c=parseInt(o.bytesSent,10);a.csioReceivedBwKbps=8*(parseInt(a.bytesReceived,10)-s)/r,a.csioSentBwKbps=8*(parseInt(a.bytesSent,10)-c)/r,a.csioIntBytesReceived=parseInt(a.bytesReceived,10)-s,a.csioIntBytesSent=parseInt(a.bytesSent,10)-c,void 0!==o.packetsSent&&void 0!==a.packetsSent&&(a.csioSentPacketRate=(parseInt(a.packetsSent,10)-parseInt(o.packetsSent,10))/(r/1e3),a.csioIntPacketsSent=parseInt(a.packetsSent,10)-parseInt(o.packetsSent,10)),void 0!==o.packetsReceived&&void 0!==a.packetsReceived&&(a.csioReceivedPacketRate=(parseInt(a.packetsReceived,10)-parseInt(o.packetsReceived,10))/(r/1e3),a.csioIntPacketsReceived=parseInt(a.packetsReceived,10)-parseInt(o.packetsReceived,10)),a.csioIsRelayed&&(a.csioIntBytesSent>0||a.csioIntBytesReceived>0)?(a.csioTurnMins=r+o.csioTurnMins,a.csioBytesSent=o.csioBytesSent+a.csioIntBytesSent,a.csioBytesReceived=o.csioBytesReceived+a.csioIntBytesReceived):a.csioTurnMins=o.csioTurnMins}return t}}]),e})();n.TransportsMonitor=u},{"../config/constants":36,"../utility/timestamps":116}],99:[function(e,t,n){"use strict";function r(e){return isNaN(e)?null:e}Object.defineProperty(n,"__esModule",{value:!0}),n.checkForNan=r,n.checkForNegativeValue=function(e){return null!==r(e)&&0<=e?e:null},n.checkForPositiveValue=function(e){return void 0!==e&&null!==r(e)&&e>=0},n.isNumber=function(e){return void 0!==e&&null!==r(e)&&Number.isFinite(e)}},{}],100:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=(function(){function e(){r(this,e),this.getWifiStatsMethod=null,this.wifiStats=null,this.interval=1e4}return i(e,[{key:"setGetWifiStatsMethod",value:function(e){this.getWifiStatsMethod=e,this.wifiStatsHandler()}},{key:"getWifiStats",value:function(){return this.wifiStats}},{key:"wifiStatsHandler",value:function(){var e=this;e.getWifiStatsMethod&&e.getWifiStatsMethod().then(function(t){e.wifiStats=JSON.parse(t),setTimeout(function(){e.wifiStatsHandler()},e.interval)}).catch(function(){setTimeout(function(){e.wifiStatsHandler()},e.interval)})}}]),e})();n.WifiStatsExecutor=a},{}],101:[function(e,t,n){"use strict";function r(e){return window.btoa(e)}function i(e){return window.atob(e)}function a(e){return r(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))}Object.defineProperty(n,"__esModule",{value:!0}),n.encode=r,n.decode=i,n.urlencode=function(e){return r(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")},n.urlencodeUnicode=function(e){return a(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")},n.strtohex=function(e){for(var t=i(e.replace(/[ \r\n]+$/,"")),n=[],r=0;r<t.length;++r){var a=t.charCodeAt(r).toString(16);1===a.length&&(a="0"+a),n.push(a)}return n.join("")}},{}],102:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Callbacks=void 0;var a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=r(e("../config/constants")),s=e("./registry"),c=r(e("./csiologger")),u=(function(){function e(){i(this,e),this.callbacks={}}return a(e,[{key:"set",value:function(e,t){if("function"==typeof t)return o.callbackFunctions.hasOwnProperty(e)?(this.callbacks[e]=t,void(e===o.callbackFunctions.stats&&s.Registry.getStatsCallbackBuilder().setCallback(t))):void c.error("Couldn't set callback: "+e)}},{key:"get",value:function(e){return this.callbacks.hasOwnProperty(e)?this.callbacks[e]:null}}]),e})();n.Callbacks=u},{"../config/constants":36,"./csiologger":104,"./registry":112}],103:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Credentials=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),s=r(e("../config/constants")),c=r(e("./csiologger")),u=(function(){function e(){i(this,e),this.appId=null,this.userId=null,this.userIdObject=null,this.deviceId=null,this.statsSubmissionInterval=15e3,this.collectSDP=!1,this.transportType=s.transportType.rest,this.adaptiveStatsEnabled=!1,this.siteId=null,this.extensionVersion=null,this.shimVersion=null}return o(e,[{key:"getAppId",value:function(){return this.appId}},{key:"setAppId",value:function(e){this.appId="string"==typeof e?parseInt(e,10):e}},{key:"getSiteId",value:function(){return this.siteId}},{key:"setSiteId",value:function(e){this.siteId=e}},{key:"getExtensionVersion",value:function(){return this.extensionVersion}},{key:"setExtensionVersion",value:function(e){this.extensionVersion=e}},{key:"getShimVersion",value:function(){return this.shimVersion}},{key:"setShimVersion",value:function(e){this.shimVersion=e}},{key:"getUserId",value:function(){return this.userId}},{key:"setUserId",value:function(e){"object"===(void 0===e?"undefined":a(e))?(this.userId=e.aliasName,this.setUserIdObject(e)):this.userId=e}},{key:"getUserIdObject",value:function(){return this.userIdObject}},{key:"setUserIdObject",value:function(e){this.userIdObject=e}},{key:"getStatsSubmissionInterval",value:function(){return this.statsSubmissionInterval}},{key:"setStatsSubmissionInterval",value:function(e){c.log("setStatsSubmissionInterval is ",e),this.statsSubmissionInterval=e}},{key:"getCollectSDP",value:function(){return this.collectSDP}},{key:"setCollectSDP",value:function(e){this.collectSDP=e}},{key:"getTransportType",value:function(){return this.transportType}},{key:"setTransportType",value:function(e){this.transportType=e}},{key:"isAdaptiveStatsEnabled",value:function(){return this.adaptiveStatsEnabled}},{key:"setAdaptiveStatsEnabled",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.adaptiveStatsEnabled=e}}]),e})();n.Credentials=u},{"../config/constants":36,"./csiologger":104}],104:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.info=function(){var e;"true"===r.csioDebug&&(e=console).info.apply(e,arguments)},n.log=function(){var e;"true"===r.csioDebug&&(e=console).log.apply(e,arguments)},n.warn=function(){var e;"true"===r.csioDebug&&(e=console).warn.apply(e,arguments)},n.error=function(){var e;(e=console).warn.apply(e,arguments)};var r=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../config/settings"))},{"../config/settings":37}],105:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Endpoint=void 0;var a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=r(e("../browserapi/localstorage")),s=r(e("../browserapi/detectbrowser")),c=r(e("../utility/timestamps")),u=r(e("../utility/hash")),l=(function(){function e(){i(this,e),this.id=null,this.appversion=null,this.magicKey=Math.floor(4294967296*Math.random()),this.browserName=null,this.browserVersion=null,this.osName=null,this.osVersion=null,this.codeBase=null,this.userAgent=null,this.retrieveId()}return a(e,[{key:"setup",value:function(){var e=s.detect();this.browserName=e.browserName,this.browserVersion=e.browserVersion,this.osName=e.os,this.osVersion=e.osVersion,this.codeBase=e.codeBase,this.userAgent=e.userAgent}},{key:"retrieveId",value:function(){var e=this,t=o.get("endpointID");if(null===t){var n=c.getCurrent(),r=Math.random()*n;u.generateSHA256(r.toString(),function(t){e.id=t,o.store("endpointID",t)})}else this.id=t}},{key:"getId",value:function(){return this.id}},{key:"getAppVersion",value:function(){return this.appversion}},{key:"setAppVersion",value:function(e){this.appversion=e}},{key:"getMagicKey",value:function(){return this.magicKey}},{key:"getBrowserName",value:function(){return this.browserName}},{key:"getBrowserVersion",value:function(){return this.browserVersion}},{key:"getOsName",value:function(){return this.osName}},{key:"getOsVersion",value:function(){return this.osVersion}},{key:"getCodeBase",value:function(){return this.codeBase}},{key:"getUserAgent",value:function(){return this.userAgent}},{key:"serialize",value:function(){return{type:"browser",buildName:this.browserName,buildVersion:this.browserVersion,appVersion:this.appversion,os:this.osName,osVersion:this.osVersion,userAgent:this.userAgent}}}]),e})();n.Endpoint=l},{"../browserapi/detectbrowser":18,"../browserapi/localstorage":20,"../utility/hash":108,"../utility/timestamps":116}],106:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.EventMessage=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),c=r(e("../config/constants")),u=r(e("../config/settings")),l=e("./registry"),d=r(e("./csiologger")),f=(function(){function e(t,n,r,a){i(this,e),this.eventType=t,this.customEntries=r,this.pcHandler=a,this.auth=l.Registry.getAuthenticator(),this.clocksync=l.Registry.getClockSync(),this.timestamp=this.clocksync.getSynchronizedTimestamp(),this.conferenceId=n,this.clockUnSynced=!this.clocksync.isCompleted()}return o(e,[{key:"updateConferenceId",value:function(e){d.log("updating conferenceId to ",this.eventType,this.conferenceId,e),this.conferenceId=e}},{key:"toJson",value:function(){if(!this.canBeSent())return null;var e=this.getCommonHeader();return s(e,this.customEntries),this.eventType===c.internalFabricEvent.userJoined&&delete e.connectionID,e}},{key:"getCallback",value:function(){return this.pcHandler?this.pcHandler.getCallback():null}},{key:"canBeSent",value:function(){var e=void 0,t=c.tmpConferenceId;if(this.conferenceId===t)return!1;if(this.pcHandler&&!this.pcHandler.getRemoteId())return!1;if(this.eventType!==c.precalltestEvents.results){var n=l.Registry.getConferenceManager().get(this.conferenceId);if(!n)return!1;e=n.getUcId()}return!(!this.auth.getToken()||(this.auth.isTokenValid()?!(this.isPriority()||this.clocksync.isCompleted()&&e)||this.eventType===c.internalFabricEvent.userAlive&&!e:(this.auth.reAuthenticate(),1)))}},{key:"isCachable",value:function(){return-1===[c.internalFabricEvent.userAlive].indexOf(this.eventType)}},{key:"isPriority",value:function(){var e=!1;return this.eventType!==c.internalFabricEvent.userJoined&&this.eventType!==c.precalltestEvents.results&&this.eventType!==c.internalFabricEvent.userAlive||(e=!0),e}},{key:"getConferenceId",value:function(){return this.conferenceId}},{key:"getCommonHeader",value:function(){var e={version:u.version,callstatsVersion:u.version,channel:this.decideChannel(),timestamp:this.timestamp,action:this.eventType,eventType:this.eventType,localID:encodeURIComponent(l.Registry.getCredentials().getUserId()),timeShift:0,appID:l.Registry.getCredentials().getAppId(),deviceID:l.Registry.getEndpoint().getId(),token:this.auth.getToken(),confID:encodeURIComponent(this.conferenceId)};this.clockUnSynced&&(e.timestamp+=this.clocksync.getOffset()),this.eventType!==c.internalFabricEvent.userJoined&&this.eventType!==c.internalFabricEvent.fabricSetup&&this.eventType!==c.fabricEvent.fabricSetupFailed&&this.eventType!==c.precalltestEvents.results||(e.siteID=l.Registry.getCredentials().getSiteId(),e.extensionVersion=l.Registry.getCredentials().getExtensionVersion(),e.shimVersion=l.Registry.getCredentials().getShimVersion());var t=l.Registry.getConferenceManager().get(this.conferenceId);return e.ucID=t?t.getUcId():null,this.pcHandler?(e.remoteID=encodeURIComponent(this.pcHandler.getRemoteId()),e.connectionID=this.pcHandler.getPcHash()):(e.remoteID=encodeURIComponent(l.Registry.getCredentials().getUserId()),e.connectionID=encodeURIComponent(l.Registry.getCredentials().getUserId())),e.remoteID||(e.remoteID=encodeURIComponent(l.Registry.getCredentials().getUserId())),e}},{key:"decideChannel",value:function(){if(this.eventType==c.callstatsChannels.sdpSubmission)return c.callstatsChannels.sdpSubmission;if(this.eventType==c.callstatsChannels.userFeedback)return c.callstatsChannels.userFeedback;if(this.eventType==c.callstatsChannels.processedStats)return c.callstatsChannels.processedStats;for(var e in c.precalltestEvents)if(this.eventType==c.precalltestEvents[e])return c.callstatsChannels.preCallTest;return c.callstatsChannels.callstatsEvent}}],[{key:"checkCustomEntries",value:function(e,t){if(!h[e])return d.error("eventType not recognized:",e),!1;var n=h[e];for(var r in n)if(!t.hasOwnProperty(r)||a(t[r])!==n[r])return d.error("customEntries for",e,"should have",r,"of type",n[r]),!1;return!0}}]),e})(),h={};h[c.internalFabricEvent.userJoined]={endpointInfo:"object"},h[c.internalFabricEvent.userLeft]={},h[c.internalFabricEvent.userAlive]={},h[c.internalFabricEvent.userDetails]={userName:"string"},h[c.internalFabricEvent.connectedDeviceList]={mediaDeviceList:"object"},h[c.fabricEvent.activeDeviceList]={mediaDeviceList:"object"},h[c.fabricEvent.audioMute]={},h[c.fabricEvent.audioUnmute]={},h[c.fabricEvent.videoPause]={},h[c.fabricEvent.videoResume]={},h[c.fabricEvent.screenShareStart]={},h[c.fabricEvent.screenShareStop]={},h[c.internalFabricEvent.mediaPlaybackStart]={ssrc:"string"},h[c.internalFabricEvent.mediaPlaybackSuspended]={ssrc:"string"},h[c.internalFabricEvent.mediaPlaybackStalled]={ssrc:"string"},h[c.internalFabricEvent.oneWayMedia]={mediaType:"string",ssrc:"string"},h[c.internalFabricEvent.oneWayMediaStart]={mediaType:"string",disruptionType:"string",ssrc:"string"},h[c.internalFabricEvent.oneWayMediaStop]={mediaType:"string",disruptionType:"string",ssrc:"string"},h[c.internalFabricEvent.circuitBreaker]={disruptionType:"string",ssrc:"string"},h[c.internalFabricEvent.fabricSetup]={localIceCandidates:"object",remoteIceCandidates:"object",iceCandidatePairs:"object"},h[c.fabricEvent.callDetails]={callType:"string"},h[c.fabricEvent.fabricSetupFailed]={delay:"number",reason:"string",function:"string",endpoint:"object"},h[c.internalFabricEvent.fabricStateChange]={changedState:"string",prevState:"string",newState:"string"},h[c.internalFabricEvent.fabricDropped]={prevIceConnectionState:"string",currIceConnectionState:"string",currIceCandidatePair:"object",delay:"number"},h[c.internalFabricEvent.iceConnectionDisruptionStart]={prevIceConnectionState:"string",currIceConnectionState:"string",prevIceConnectionStateTs:"number",currIceCandidatePair:"object"},h[c.internalFabricEvent.iceConnectionDisruptionEnd]={prevIceConnectionState:"string",currIceConnectionState:"string",delay:"number"},h[c.internalFabricEvent.iceDisruptionStart]={prevIceConnectionState:"string",currIceConnectionState:"string",prevIceConnectionStateTs:"number",currIceCandidatePair:"object"},h[c.internalFabricEvent.iceDisruptionEnd]={prevIceConnectionState:"string",currIceConnectionState:"string",prevIceCandidatePair:"object"},h[c.internalFabricEvent.iceFailed]={localIceCandidates:"object",prevIceConnectionState:"string",currIceConnectionState:"string",delay:"number"},h[c.internalFabricEvent.iceAborted]={prevIceConnectionState:"string",currIceConnectionState:"string"},h[c.internalFabricEvent.iceRestarted]={prevIceConnectionState:"string",currIceConnectionState:"string",prevIceCandidatePair:"object"},h[c.internalFabricEvent.fabricTransportSwitch]={prevIceCandidatePair:"object",currIceCandidatePair:"object"},h[c.internalFabricEvent.iceTerminated]={prevIceConnectionState:"string",currIceConnectionState:"string"},h[c.fabricEvent.fabricTerminated]={},h[c.fabricEvent.fabricHold]={},h[c.fabricEvent.fabricResume]={},h[c.fabricEvent.callUnAnswered]={},h[c.callstatsChannels.sdpSubmission]={localSDP:"string",remoteSDP:"string"},h[c.internalFabricEvent.ssrcMap]={ssrcData:"object"},h[c.callstatsChannels.userFeedback]={feedback:"object"},h[c.internalFabricEvent.sendingThroughputObservations]={ssrc:"string",maxsendingKBitrate:"number",timeToMaxSendingKBitrate:"number",stablesendingKBitrate:"number",timeToStableSendingKBitrate:"number"},h[c.fabricEvent.dominantSpeaker]={},h[c.fabricEvent.applicationErrorLog]={message:"string",messageType:"string"},h[c.callstatsChannels.processedStats]={stats:"object"},h[c.customEvents.stats]={stats:"object"},h[c.customEvents.event]={eventList:"object"},h[c.customEvents.conferenceSummary]={pstnTime:"number",ringingTime:"number",contactID:"string",isCallForwarded:"boolean"},h[c.callstatsChannels.senderConfiguration]={rtc_rtp_parameters:"object"},h[c.internalFabricEvent.limitationObservations]={reason:"string"},h[c.qualityDisruptionTypes.qpchange]={reason:"string"},h[c.precalltestEvents.results]={results:"object"},h[c.precalltestEvents.associate]={ids:"object"},n.EventMessage=f},{"../config/constants":36,"../config/settings":37,"./csiologger":104,"./registry":112}],107:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.EventMessageBuilder=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),s=e("./eventmessage"),c=r(e("../config/constants")),u=e("./registry"),l=r(e("./csiologger")),d=(function(){function e(){i(this,e),this.transmissionmanager=u.Registry.getTransmissionManager()}return o(e,[{key:"make",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("string"!=typeof e||null===r||"object"!==(void 0===r?"undefined":a(r)))return l.error("failed typeof checks:",e,void 0===e?"undefined":a(e),void 0===r?"undefined":a(r),r),u.Registry.getGenericEventHandler().sendEvent(c.logEvents.error,{msg:"failed typeof checks:"+e+":"+(void 0===r?"undefined":a(r))+":"+(void 0===e?"undefined":a(e))}),!1;if(null===t&&e!==c.precalltestEvents.results)return l.error("failed conferenceId checks:",e,t),u.Registry.getGenericEventHandler().sendEvent(c.logEvents.error,{msg:"failed conferenceId checks:"+e}),!1;if(!n&&e!==c.callstatsChannels.userFeedback&&e!==c.fabricEvent.applicationErrorLog&&e!==c.fabricEvent.fabricSetupFailed&&e!==c.internalFabricEvent.userJoined&&e!==c.precalltestEvents.results&&e!==c.customEvents.stats&&e!==c.customEvents.event&&e!==c.customEvents.conferenceSummary)return l.error("peerconnection cannot be null",e),u.Registry.getGenericEventHandler().sendEvent(c.logEvents.error,{msg:"peerconnection cannot be null"+e}),!1;if(!s.EventMessage.checkCustomEntries(e,r))return l.error("failed checks:",e,r),u.Registry.getGenericEventHandler().sendEvent(c.logEvents.error,{msg:"failed customEntries checks:"+e}),!1;var i=void 0;if(t){var o=u.Registry.getConferenceManager().get(t);o&&n&&(i=o.getPeerConnectionManager().getPcHandler(n))}var d=new s.EventMessage(e,t,r,i);return this.transmissionmanager.send(d),!0}}]),e})();n.EventMessageBuilder=d},{"../config/constants":36,"./csiologger":104,"./eventmessage":106,"./registry":112}],108:[function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=0;if(!e)return n;for(var r=0,i=e.length;r<i;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t&&t(n+""),n+""}function i(e){for(var t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t[t.length]=r:r>127&&r<2048?(t[t.length]=r>>6|192,t[t.length]=63&r|128):(t[t.length]=r>>12|224,t[t.length]=r>>6&63|128,t[t.length]=63&r|128)}return new Uint8Array(t).buffer}function a(e){for(var t=new DataView(e),n="",r=void 0,i=0;i<t.byteLength;i++)(r=t.getUint8(i).toString(16)).length<2&&(r="0"+r),n+=r;return n}Object.defineProperty(n,"__esModule",{value:!0}),n.generateSHA256=function(e,t){var n={name:"SHA-256"};if(window.crypto){var o=window.crypto.subtle||window.crypto.webkitSubtle;if(!o)return void r(e,t);o.digest(n,i(e)).then(function(e){t(a(e))}).catch(function(){r(e,t)})}else if(window.msCrypto){if(!window.msCrypto.subtle)return void r(e,t);var s=window.msCrypto.subtle.digest(n,i(e));s.oncomplete=function(e){e.target&&t(a(e.target.result))},s.onerror=function(){r(e,t)}}else r(e,t)},n.generateHash=r},{}],109:[function(e,t,n){"use strict";function r(e){return!!/^[\],:{}\s]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))}Object.defineProperty(n,"__esModule",{value:!0}),n.isValid=r,n.parse=function(e){var t=null;return null===e?t:(r(e)&&(t=JSON.parse(e)),t)}},{}],110:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(n,"__esModule",{value:!0}),n.setErrorEventListener=function(){window&&window.addEventListener&&window.addEventListener("error",function(e){var t=i.Registry.getGenericEventHandler();if(e&&e.filename&&e.filename.indexOf("callstats")>-1){for(var n=!1,r={fileName:e.filename,line:e.lineno,col:e.colno,jsVersion:a.version,eventType:"error",message:e.message,pageURL:window.location.href},s=i.Registry.getConferenceManager().getConferenceIds(),c=0;c<s.length;c++)r.conferenceID=s[c],t.sendEvent(o.logEvents.error,r),n=!0;n||t.sendEvent(o.logEvents.error,r)}})};var i=e("./registry"),a=r(e("../config/settings")),o=r(e("../config/constants"))},{"../config/constants":36,"../config/settings":37,"./registry":112}],111:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.addPctMeasurementToAggregator=function(e){var t=void 0,n=void 0,a=void 0,o=void 0;if(e&&e.tests){e.tests.rtt&&(t=e.tests.rtt.median,n=e.tests.rtt.variance),e.tests.throughput&&(a=e.tests.throughput.average,o=Math.max(e.tests.throughput.fractionLostBytes,0));var s=new r.PCTMeasurement(a,t,n,o,e.provider,e.timestamp);i.Registry.getPCTAggregator().addPCTMeasurement(s)}},n.getPublicPrecalltestResults=function(e){var t={mediaConnectivity:!1,throughput:null,fractionalLoss:null,rtt:null};return e&&e.tests?(t.provider=e.provider,e.tests.rtt&&(t.rtt=e.tests.rtt.median,t.mediaConnectivity=!0),e.tests.throughput&&(t.throughput=e.tests.throughput.average,t.fractionalLoss=Math.max(e.tests.throughput.fractionLostBytes,0),t.mediaConnectivity=!0),e.tests.ice&&(e.tests.ice.relayTcpSuccess||e.tests.ice.relayTlsSuccess||e.tests.ice.relayUdpSuccess)&&(t.mediaConnectivity=!0),t):t};var r=e("../collections/pctmeasurement"),i=e("../utility/registry")},{"../collections/pctmeasurement":26,"../utility/registry":112}],112:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Registry=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=e("../services/clocksync"),o=e("../services/configservice/configservicewrapper"),s=e("../services/authenticator"),c=e("../services/backendlog"),u=e("../services/transmissionmanager"),l=e("./eventmessagebuilder"),d=e("../conference/conferencemanager"),f=e("../utility/credentials"),h=e("../statspipeline/statsadapter"),p=e("../statspipeline/statsparser"),v=e("../statspipeline/statsmonitor"),g=e("../statspipeline/statstransmitter"),y=e("../statspipeline/statsassembler"),m=e("../utility/endpoint"),b=e("../browserapi/battery"),k=e("precalltest"),S=e("../statspipeline/wifistatsexecutor"),w=e("./callbacks"),C=e("../statspipeline/statscallbackbuilder"),T=e("../services/connectionmanager"),_=e("../collections/pctaggregator"),P=e("../services/pctrunnerservice"),E=null,R=null,I=null,O=null,M=null,F=null,j=null,A=null,x=null,D=null,U=null,B=null,L=null,H=null,N=null,V=null,W=null,G=null,q=null,z=null,Q=null,J=null,K=(function(){function e(){r(this,e)}return i(e,null,[{key:"getPCTRunnerService",value:function(){return J||(J=new P.PCTRunnerService),J}},{key:"getPCTAggregator",value:function(){return Q||(Q=new _.PCTAggregator),Q}},{key:"getConferenceManager",value:function(){return V||(V=new d.ConferenceManager),V}},{key:"getStatsCallbackBuilder",value:function(){return q||(q=new C.StatsCallbackBuilder),q}},{key:"getClockSync",value:function(){return R||(R=new a.ClockSync),R}},{key:"getWifiStatsExecutor",value:function(){return W||(W=new S.WifiStatsExecutor),W}},{key:"getAuthenticator",value:function(){return I||(I=new s.Authenticator),I}},{key:"getConfigServiceWrapper",value:function(){return O||(O=new o.ConfigServiceWrapper),O}},{key:"getGenericEventHandler",value:function(){return M||(M=new c.GenericEventHandler).enable(),M}},{key:"getConnectionManager",value:function(){return z||(z=new T.ConnectionManager),z}},{key:"getTransmissionManager",value:function(){return F||(F=new u.TransmissionManager),F}},{key:"getEventMessageBuilder",value:function(){return j||(j=new l.EventMessageBuilder),j}},{key:"getCredentials",value:function(){return A||(A=new f.Credentials),A}},{key:"getEndpoint",value:function(){return x||(x=new m.Endpoint),x}},{key:"getStatsAdapter",value:function(){if(!D){var t=e.getEndpoint().getCodeBase(),n=e.getEndpoint().getBrowserName();D=new h.StatsAdapter(t,n)}return D}},{key:"getPreCallTest",value:function(){return E||(E=new k.PreCallTest),E}},{key:"getStatsParser",value:function(){return U||(U=new p.StatsParser),U}},{key:"getStatsMonitor",value:function(){if(!B){var t=e.getEndpoint().getCodeBase();B=new v.StatsMonitor(t)}return B}},{key:"getStatsTransmitter",value:function(){return L||(L=new g.StatsTransmitter),L}},{key:"getStatsAssembler",value:function(){return H||(H=new y.StatsAssembler),H}},{key:"getBattery",value:function(){return N||(N=new b.Battery),N}},{key:"getCallbacks",value:function(){return G||(G=new w.Callbacks),G}}]),e})();n.Registry=K},{"../browserapi/battery":17,"../collections/pctaggregator":25,"../conference/conferencemanager":34,"../services/authenticator":46,"../services/backendlog":47,"../services/clocksync":48,"../services/configservice/configservicewrapper":52,"../services/connectionmanager":53,"../services/pctrunnerservice":56,"../services/transmissionmanager":59,"../statspipeline/statsadapter":84,"../statspipeline/statsassembler":85,"../statspipeline/statscallbackbuilder":86,"../statspipeline/statsmonitor":87,"../statspipeline/statsparser":88,"../statspipeline/statstransmitter":89,"../statspipeline/wifistatsexecutor":100,"../utility/credentials":103,"../utility/endpoint":105,"./callbacks":102,"./eventmessagebuilder":107,precalltest:2}],113:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.RunningStats=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=e("../collections/queue"),o=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("../statspipeline/validator")),s=(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;r(this,e),this.queue=new a.Queue(t),this.cumulativeSum=0}return i(e,[{key:"add",value:function(e){this.cumulativeSum+=e;var t=this.queue.push(e);o.isNumber(t)&&(this.cumulativeSum-=t)}},{key:"getMean",value:function(){return this.queue.size()<1?null:this.cumulativeSum/this.queue.size()}},{key:"getVariance",value:function(){if(this.queue.size()<2)return null;for(var e=this.getMean(),t=0,n=this.queue.getFront();n;){var r=n,i=r.value-e;t+=i*i,n=r.next}return t/this.queue.size()}},{key:"getStd",value:function(){if(this.queue.size()<2)return null;var e=this.getVariance();return Math.sqrt(e)}},{key:"reset",value:function(){this.cumulativeSum=0,this.queue.clear()}}]),e})();n.RunningStats=s},{"../collections/queue":28,"../statspipeline/validator":99}],114:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=(function(){function e(t,n,i){r(this,e),this.max=t,this.midpoint=n,this.stepness=i,this.actualStep=0,this.reset()}return i(e,[{key:"reset",value:function(){this.actualStep=0}},{key:"setMidpoint",value:function(e){this.midpoint=e}},{key:"setMax",value:function(e){this.max=e}},{key:"setStepness",value:function(e){this.stepness=e}},{key:"increaseActualStep",value:function(e){this.actualStep+=e}},{key:"getActual",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.actualStep+=e,this.max/(1+Math.exp(-1*this.stepness*(this.actualStep-this.midpoint)))}}]),e})();n.Sigmoid=a},{}],115:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.TimeoutProcess=void 0;var i=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e("./csiologger")),o=(function(){function e(t){r(this,e),this.interval=t,this.timerId=null,this.callback=function(){a.warn("no callback function set",this)}}return i(e,[{key:"setCallback",value:function(e){this.callback=e}},{key:"start",value:function(){var e=this;this.timerId=setInterval(function(){e.callback()},this.interval)}},{key:"stop",value:function(){clearInterval(this.timerId),this.timerId=null}},{key:"isStarted",value:function(){return null!==this.timerId}}]),e})();n.TimeoutProcess=o},{"./csiologger":104}],116:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getCurrent=function(){return window&&window.performance&&window.performance.now&&window.performance.timing&&window.performance.timing.navigationStart?window.performance.now()+window.performance.timing.navigationStart:Date.now()},n.getSinceOrigin=function(){return window&&window.performance&&window.performance.now?window.performance.now():null}},{}],117:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}})(),o=(function(){function e(t){r(this,e),this.base=t;for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];this.appendixes=i}return a(e,null,[{key:"concat",value:function(e,t){if(!t)return e;if(!e)return t;var n="/"===e.substr(e.length-1),r="/"===t.substring(0,1);return n||r?n&&r?e+t.substring(1):e+t:e+"/"+t}}]),a(e,[{key:"append",value:function(e){this.appendixes.push(e)}},{key:"toString",value:function(){var t=this.getString(this.base),n=this;return this.appendixes.forEach(function(r){if(null!==r&&void 0!==r){var i=n.getString(r);t=e.concat(t,i)}}),t}},{key:"getString",value:function(e){switch(void 0===e?"undefined":i(e)){case"function":return this.getString(e());case"number":return e+"";case"string":default:return e}}}]),e})();n.Url=o},{}],118:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.normalizeMediaDeviceList=function(e){var t=[];if(!e)return t;for(var n=0;n<e.length;n++){var r={};r.mediaDeviceID=e[n].deviceId,r.groupID=e[n].groupId,r.kind=e[n].kind,r.label=e[n].label,r.mediaDeviceID&&t.push(r)}return t},n.isIntegerPollyfill=function(){Number.isInteger||(Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e})},n.assignPollyfill=function(){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])}return n},writable:!0,configurable:!0})}},{}]},{},[22])},452,[16]);
__d(function(e,t,n,r,i,o,a){!(function(e,t){"use strict";"object"==typeof i&&"object"==typeof i.exports?i.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)})("undefined"!=typeof window?window:this,function(e,t){"use strict";var n=[],r=Object.getPrototypeOf,i=n.slice,o=n.flat?function(e){return n.flat.call(e)}:function(e){return n.concat.apply([],e)},a=n.push,s=n.indexOf,u={},l=u.toString,c=u.hasOwnProperty,f=c.toString,p=f.call(Object),d={},h=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},g=function(e){return null!=e&&e===e.window},v=e.document,y={type:!0,src:!0,nonce:!0,noModule:!0};function m(e,t,n){var r,i,o=(n=n||v).createElement("script");if(o.text=e,t)for(r in y)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?u[l.call(e)]||"object":typeof e}var b=function e(t,n){return new e.fn.init(t,n)};function w(e){var t=!!e&&"length"in e&&e.length,n=x(e);return!h(e)&&!g(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}b.fn=b.prototype={jquery:"3.5.1",constructor:b,length:0,toArray:function(){return i.call(this)},get:function(e){return null==e?i.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return b.each(this,e)},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(b.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(b.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},b.extend=b.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||h(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(b.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||b.isPlainObject(n)?n:{},i=!1,a[t]=b.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},b.extend({expando:"jQuery"+("3.5.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==l.call(e))&&(!(t=r(e))||"function"==typeof(n=c.call(t,"constructor")&&t.constructor)&&f.call(n)===p)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){m(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(w(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(w(Object(e))?b.merge(n,"string"==typeof e?[e]:e):a.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:s.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,a=0,s=[];if(w(e))for(r=e.length;a<r;a++)null!=(i=t(e[a],a,n))&&s.push(i);else for(a in e)null!=(i=t(e[a],a,n))&&s.push(i);return o(s)},guid:1,support:d}),"function"==typeof Symbol&&(b.fn[Symbol.iterator]=n[Symbol.iterator]),b.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){u["[object "+t+"]"]=t.toLowerCase()});var T=(function(e){var t,n,r,i,o,a,s,u,l,c,f,p,d,h,g,v,y,m,x,b="sizzle"+1*new Date,w=e.document,T=0,C=0,E=ie(),A=ie(),S=ie(),k=ie(),N=function(e,t){return e===t&&(f=!0),0},D={}.hasOwnProperty,j=[],q=j.pop,L=j.push,H=j.push,O=j.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R=":((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)",M=new RegExp("[\\x20\\t\\r\\n\\f]+","g"),F=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),I=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),W=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),$=new RegExp("[\\x20\\t\\r\\n\\f]|>"),B=new RegExp(R),_=new RegExp("^(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+$"),z={ID:new RegExp("^#((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+)"),CLASS:new RegExp("^\\.((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+)"),TAG:new RegExp("^((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+|[*])"),ATTR:new RegExp("^\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\]"),PSEUDO:new RegExp("^:((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},U=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,V=/^h\d$/i,G=/^[^{]+\{\s*\[native \w/,Y=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,J=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),K=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},Z=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ee=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},te=function(){p()},ne=ve(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(j=O.call(w.childNodes),w.childNodes),j[w.childNodes.length].nodeType}catch(e){H={apply:j.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function re(e,t,r,i){var o,s,l,c,f,h,y,m=t&&t.ownerDocument,w=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==w&&9!==w&&11!==w)return r;if(!i&&(p(t),t=t||d,g)){if(11!==w&&(f=Y.exec(e)))if(o=f[1]){if(9===w){if(!(l=t.getElementById(o)))return r;if(l.id===o)return r.push(l),r}else if(m&&(l=m.getElementById(o))&&x(t,l)&&l.id===o)return r.push(l),r}else{if(f[2])return H.apply(r,t.getElementsByTagName(e)),r;if((o=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return H.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!k[e+" "]&&(!v||!v.test(e))&&(1!==w||"object"!==t.nodeName.toLowerCase())){if(y=e,m=t,1===w&&($.test(e)||W.test(e))){for((m=Q.test(e)&&de(t.parentNode)||t)===t&&n.scope||((c=t.getAttribute("id"))?c=c.replace(Z,ee):t.setAttribute("id",c=b)),s=(h=a(e)).length;s--;)h[s]=(c?"#"+c:":scope")+" "+ge(h[s]);y=h.join(",")}try{return H.apply(r,m.querySelectorAll(y)),r}catch(t){k(e,!0)}finally{c===b&&t.removeAttribute("id")}}}return u(e.replace(F,"$1"),t,r,i)}function ie(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function oe(e){return e[b]=!0,e}function ae(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function se(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function ue(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function le(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ce(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function fe(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ne(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function pe(e){return oe(function(t){return t=+t,oe(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function de(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=re.support={},o=re.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!U.test(t||n&&n.nodeName||"HTML")},p=re.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:w;return a!=d&&9===a.nodeType&&a.documentElement?(h=(d=a).documentElement,g=!o(d),w!=d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",te,!1):i.attachEvent&&i.attachEvent("onunload",te)),n.scope=ae(function(e){return h.appendChild(e).appendChild(d.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),n.attributes=ae(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ae(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=G.test(d.getElementsByClassName),n.getById=ae(function(e){return h.appendChild(e).id=b,!d.getElementsByName||!d.getElementsByName(b).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(J,K);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(J,K);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},y=[],v=[],(n.qsa=G.test(d.querySelectorAll))&&(ae(function(e){var t;h.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)"),e.querySelectorAll("[id~="+b+"-]").length||v.push("~="),(t=d.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),ae(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(n.matchesSelector=G.test(m=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ae(function(e){n.disconnectedMatch=m.call(e,"*"),m.call(e,"[s!='']:x"),y.push("!=",R)}),v=v.length&&new RegExp(v.join("|")),y=y.length&&new RegExp(y.join("|")),t=G.test(h.compareDocumentPosition),x=t||G.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},N=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e==d||e.ownerDocument==w&&x(w,e)?-1:t==d||t.ownerDocument==w&&x(w,t)?1:c?P(c,e)-P(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==d?-1:t==d?1:i?-1:o?1:c?P(c,e)-P(c,t):0;if(i===o)return ue(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?ue(a[r],s[r]):a[r]==w?-1:s[r]==w?1:0},d):d},re.matches=function(e,t){return re(e,null,null,t)},re.matchesSelector=function(e,t){if(p(e),n.matchesSelector&&g&&!k[t+" "]&&(!y||!y.test(t))&&(!v||!v.test(t)))try{var r=m.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){k(t,!0)}return re(t,d,null,[e]).length>0},re.contains=function(e,t){return(e.ownerDocument||e)!=d&&p(e),x(e,t)},re.attr=function(e,t){(e.ownerDocument||e)!=d&&p(e);var i=r.attrHandle[t.toLowerCase()],o=i&&D.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},re.escape=function(e){return(e+"").replace(Z,ee)},re.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},re.uniqueSort=function(e){var t,r=[],i=0,o=0;if(f=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(N),f){for(;t=e[o++];)t===e[o]&&(i=r.push(o));for(;i--;)e.splice(r[i],1)}return c=null,e},i=re.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=re.selectors={cacheLength:50,createPseudo:oe,match:z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(J,K),e[3]=(e[3]||e[4]||e[5]||"").replace(J,K),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||re.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&re.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return z.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&B.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(J,K).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"([\\x20\\t\\r\\n\\f]|$)"))&&E(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=re.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(M," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==a?"nextSibling":"previousSibling",v=t.parentNode,y=s&&t.nodeName.toLowerCase(),m=!u&&!s,x=!1;if(v){if(o){for(;g;){for(p=t;p=p[g];)if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?v.firstChild:v.lastChild],a&&m){for(x=(d=(l=(c=(f=(p=v)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1])&&l[2],p=d&&v.childNodes[d];p=++d&&p&&p[g]||(x=d=0)||h.pop();)if(1===p.nodeType&&++x&&p===t){c[e]=[T,d,x];break}}else if(m&&(x=d=(l=(c=(f=(p=t)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1]),!1===x)for(;(p=++d&&p&&p[g]||(x=d=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==y:1!==p.nodeType)||!++x||(m&&((c=(f=p[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]=[T,x]),p!==t)););return(x-=i)===r||x%r==0&&x/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||re.error("unsupported pseudo: "+e);return i[b]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?oe(function(e,n){for(var r,o=i(e,t),a=o.length;a--;)e[r=P(e,o[a])]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:oe(function(e){var t=[],n=[],r=s(e.replace(F,"$1"));return r[b]?oe(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:oe(function(e){return function(t){return re(e,t).length>0}}),contains:oe(function(e){return e=e.replace(J,K),function(t){return(t.textContent||i(t)).indexOf(e)>-1}}),lang:oe(function(e){return _.test(e||"")||re.error("unsupported lang: "+e),e=e.replace(J,K).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:fe(!1),disabled:fe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return V.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pe(function(){return[0]}),last:pe(function(e,t){return[t-1]}),eq:pe(function(e,t,n){return[n<0?n+t:n]}),even:pe(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:pe(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:pe(function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e}),gt:pe(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=le(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=ce(t);function he(){}function ge(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ve(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=C++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,u){var l,c,f,p=[T,s];if(u){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(c=(f=t[b]||(t[b]={}))[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((l=c[o])&&l[0]===T&&l[1]===s)return p[2]=l[2];if(c[o]=p,p[2]=e(t,n,u))return!0}return!1}}function ye(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function me(e,t,n){for(var r=0,i=t.length;r<i;r++)re(e,t[r],n);return n}function xe(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function be(e,t,n,r,i,o){return r&&!r[b]&&(r=be(r)),i&&!i[b]&&(i=be(i,o)),oe(function(o,a,s,u){var l,c,f,p=[],d=[],h=a.length,g=o||me(t||"*",s.nodeType?[s]:s,[]),v=!e||!o&&t?g:xe(g,p,e,s,u),y=n?i||(o?e:h||r)?[]:a:v;if(n&&n(v,y,s,u),r)for(l=xe(y,d),r(l,[],s,u),c=l.length;c--;)(f=l[c])&&(y[d[c]]=!(v[d[c]]=f));if(o){if(i||e){if(i){for(l=[],c=y.length;c--;)(f=y[c])&&l.push(v[c]=f);i(null,y=[],l,u)}for(c=y.length;c--;)(f=y[c])&&(l=i?P(o,f):p[c])>-1&&(o[l]=!(a[l]=f))}}else y=xe(y===a?y.splice(h,y.length):y),i?i(null,a,y,u):H.apply(a,y)})}function we(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],u=a?1:0,c=ve(function(e){return e===t},s,!0),f=ve(function(e){return P(t,e)>-1},s,!0),p=[function(e,n,r){var i=!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):f(e,n,r));return t=null,i}];u<o;u++)if(n=r.relative[e[u].type])p=[ve(ye(p),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[b]){for(i=++u;i<o&&!r.relative[e[i].type];i++);return be(u>1&&ye(p),u>1&&ge(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(F,"$1"),n,u<i&&we(e.slice(u,i)),i<o&&we(e=e.slice(i)),i<o&&ge(e))}p.push(n)}return ye(p)}function Te(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,u,c){var f,h,v,y=0,m="0",x=o&&[],b=[],w=l,C=o||i&&r.find.TAG("*",c),E=T+=null==w?1:Math.random()||.1,A=C.length;for(c&&(l=a==d||a||c);m!==A&&null!=(f=C[m]);m++){if(i&&f){for(h=0,a||f.ownerDocument==d||(p(f),s=!g);v=e[h++];)if(v(f,a||d,s)){u.push(f);break}c&&(T=E)}n&&((f=!v&&f)&&y--,o&&x.push(f))}if(y+=m,n&&m!==y){for(h=0;v=t[h++];)v(x,b,a,s);if(o){if(y>0)for(;m--;)x[m]||b[m]||(b[m]=q.call(u));b=xe(b)}H.apply(u,b),c&&!o&&b.length>0&&y+t.length>1&&re.uniqueSort(u)}return c&&(T=E,l=w),x};return n?oe(o):o}return he.prototype=r.filters=r.pseudos,r.setFilters=new he,a=re.tokenize=function(e,t){var n,i,o,a,s,u,l,c=A[e+" "];if(c)return t?0:c.slice(0);for(s=e,u=[],l=r.preFilter;s;){for(a in n&&!(i=I.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=W.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(F," ")}),s=s.slice(n.length)),r.filter)!(i=z[a].exec(s))||l[a]&&!(i=l[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?re.error(e):A(e,u).slice(0)},s=re.compile=function(e,t){var n,r=[],i=[],o=S[e+" "];if(!o){for(t||(t=a(e)),n=t.length;n--;)(o=we(t[n]))[b]?r.push(o):i.push(o);(o=S(e,Te(i,r))).selector=e}return o},u=re.select=function(e,t,n,i){var o,u,l,c,f,p="function"==typeof e&&e,d=!i&&a(e=p.selector||e);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===t.nodeType&&g&&r.relative[u[1].type]){if(!(t=(r.find.ID(l.matches[0].replace(J,K),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(o=z.needsContext.test(e)?0:u.length;o--&&(l=u[o],!r.relative[c=l.type]);)if((f=r.find[c])&&(i=f(l.matches[0].replace(J,K),Q.test(u[0].type)&&de(t.parentNode)||t))){if(u.splice(o,1),!(e=i.length&&ge(u)))return H.apply(n,i),n;break}}return(p||s(e,d))(i,t,!g,n,!t||Q.test(e)&&de(t.parentNode)||t),n},n.sortStable=b.split("").sort(N).join("")===b,n.detectDuplicates=!!f,p(),n.sortDetached=ae(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),ae(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||se("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ae(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||se("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ae(function(e){return null==e.getAttribute("disabled")})||se("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),re})(e);b.find=T,b.expr=T.selectors,b.expr[":"]=b.expr.pseudos,b.uniqueSort=b.unique=T.uniqueSort,b.text=T.getText,b.isXMLDoc=T.isXML,b.contains=T.contains,b.escapeSelector=T.escape;var C=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&b(e).is(n))break;r.push(e)}return r},E=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},A=b.expr.match.needsContext;function S(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var k=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function N(e,t,n){return h(t)?b.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?b.grep(e,function(e){return e===t!==n}):"string"!=typeof t?b.grep(e,function(e){return s.call(t,e)>-1!==n}):b.filter(t,e,n)}b.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?b.find.matchesSelector(r,e)?[r]:[]:b.find.matches(e,b.grep(t,function(e){return 1===e.nodeType}))},b.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(b(e).filter(function(){for(t=0;t<r;t++)if(b.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)b.find(e,i[t],n);return r>1?b.uniqueSort(n):n},filter:function(e){return this.pushStack(N(this,e||[],!1))},not:function(e){return this.pushStack(N(this,e||[],!0))},is:function(e){return!!N(this,"string"==typeof e&&A.test(e)?b(e):e||[],!1).length}});var D,j=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(b.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||D,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:j.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof b?t[0]:t,b.merge(this,b.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:v,!0)),k.test(r[1])&&b.isPlainObject(t))for(r in t)h(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=v.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):h(e)?void 0!==n.ready?n.ready(e):e(b):b.makeArray(e,this)}).prototype=b.fn,D=b(v);var q=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};function H(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}b.fn.extend({has:function(e){var t=b(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(b.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&b(e);if(!A.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&b.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?b.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?s.call(b(e),this[0]):s.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(b.uniqueSort(b.merge(this.get(),b(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return C(e,"parentNode")},parentsUntil:function(e,t,n){return C(e,"parentNode",n)},next:function(e){return H(e,"nextSibling")},prev:function(e){return H(e,"previousSibling")},nextAll:function(e){return C(e,"nextSibling")},prevAll:function(e){return C(e,"previousSibling")},nextUntil:function(e,t,n){return C(e,"nextSibling",n)},prevUntil:function(e,t,n){return C(e,"previousSibling",n)},siblings:function(e){return E((e.parentNode||{}).firstChild,e)},children:function(e){return E(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(S(e,"template")&&(e=e.content||e),b.merge([],e.childNodes))}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=b.filter(r,i)),this.length>1&&(L[e]||b.uniqueSort(i),q.test(e)&&i.reverse()),this.pushStack(i)}});var O=/[^\x20\t\r\n\f]+/g;function P(e){var t={};return b.each(e.match(O)||[],function(e,n){t[n]=!0}),t}function R(e){return e}function M(e){throw e}function F(e,t,n,r){var i;try{e&&h(i=e.promise)?i.call(e).done(t).fail(n):e&&h(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}b.Callbacks=function(e){e="string"==typeof e?P(e):b.extend({},e);var t,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),(function t(n){b.each(n,function(n,r){h(r)?e.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!==x(r)&&t(r)})})(arguments),n&&!t&&u()),this},remove:function(){return b.each(arguments,function(e,t){for(var n;(n=b.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?b.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},b.extend({Deferred:function(t){var n=[["notify","progress",b.Callbacks("memory"),b.Callbacks("memory"),2],["resolve","done",b.Callbacks("once memory"),b.Callbacks("once memory"),0,"resolved"],["reject","fail",b.Callbacks("once memory"),b.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return b.Deferred(function(t){b.each(n,function(n,r){var i=h(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&h(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){var o=0;function a(t,n,r,i){return function(){var s=this,u=arguments,l=function(){var e,l;if(!(t<o)){if((e=r.apply(s,u))===n.promise())throw new TypeError("Thenable self-resolution");l=e&&("object"==typeof e||"function"==typeof e)&&e.then,h(l)?i?l.call(e,a(o,n,R,i),a(o,n,M,i)):(o++,l.call(e,a(o,n,R,i),a(o,n,M,i),a(o,n,R,n.notifyWith))):(r!==R&&(s=void 0,u=[e]),(i||n.resolveWith)(s,u))}},c=i?l:function(){try{l()}catch(e){b.Deferred.exceptionHook&&b.Deferred.exceptionHook(e,c.stackTrace),t+1>=o&&(r!==M&&(s=void 0,u=[e]),n.rejectWith(s,u))}};t?c():(b.Deferred.getStackHook&&(c.stackTrace=b.Deferred.getStackHook()),e.setTimeout(c))}}return b.Deferred(function(e){n[0][3].add(a(0,e,h(i)?i:R,e.notifyWith)),n[1][3].add(a(0,e,h(t)?t:R)),n[2][3].add(a(0,e,h(r)?r:M))}).promise()},promise:function(e){return null!=e?b.extend(e,i):i}},o={};return b.each(n,function(e,t){var a=t[2],s=t[5];i[t[1]]=a.add,s&&a.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),o=i.call(arguments),a=b.Deferred(),s=function(e){return function(n){r[e]=this,o[e]=arguments.length>1?i.call(arguments):n,--t||a.resolveWith(r,o)}};if(t<=1&&(F(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||h(o[n]&&o[n].then)))return a.then();for(;n--;)F(o[n],s(n),a.reject);return a.promise()}});var I=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;b.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&I.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},b.readyException=function(t){e.setTimeout(function(){throw t})};var W=b.Deferred();function $(){v.removeEventListener("DOMContentLoaded",$),e.removeEventListener("load",$),b.ready()}b.fn.ready=function(e){return W.then(e).catch(function(e){b.readyException(e)}),this},b.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--b.readyWait:b.isReady)||(b.isReady=!0,!0!==e&&--b.readyWait>0||W.resolveWith(v,[b]))}}),b.ready.then=W.then,"complete"===v.readyState||"loading"!==v.readyState&&!v.documentElement.doScroll?e.setTimeout(b.ready):(v.addEventListener("DOMContentLoaded",$),e.addEventListener("load",$));var B=function e(t,n,r,i,o,a,s){var u=0,l=t.length,c=null==r;if("object"===x(r))for(u in o=!0,r)e(t,n,u,r[u],!0,a,s);else if(void 0!==i&&(o=!0,h(i)||(s=!0),c&&(s?(n.call(t,i),n=null):(c=n,n=function(e,t,n){return c.call(b(e),n)})),n))for(;u<l;u++)n(t[u],r,s?i:i.call(t[u],u,n(t[u],r)));return o?t:c?n.call(t):l?n(t[0],r):a},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,"ms-").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=b.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(O)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||b.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!b.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:J.test(e)?JSON.parse(e):e)}function ee(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=Z(n)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}b.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),b.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=X(r.slice(5)),ee(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){Q.set(this,e)}):B(this,function(t){var n;if(o&&void 0===t)return void 0!==(n=Q.get(o,e))?n:void 0!==(n=ee(o,e))?n:void 0;this.each(function(){Q.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),b.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,b.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),o=b._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){b.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:b.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),b.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?b.queue(this[0],e):void 0===t?this:this.each(function(){var n=b.queue(this,e,t);b._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=b.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=Y.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ne=new RegExp("^(?:([+-])=|)("+te+")([a-z%]*)$","i"),re=["Top","Right","Bottom","Left"],ie=v.documentElement,oe=function(e){return b.contains(e.ownerDocument,e)},ae={composed:!0};ie.getRootNode&&(oe=function(e){return b.contains(e.ownerDocument,e)||e.getRootNode(ae)===e.ownerDocument});var se=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&oe(e)&&"none"===b.css(e,"display")};function ue(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return b.css(e,t,"")},u=s(),l=n&&n[3]||(b.cssNumber[t]?"":"px"),c=e.nodeType&&(b.cssNumber[t]||"px"!==l&&+u)&&ne.exec(b.css(e,t));if(c&&c[3]!==l){for(u/=2,l=l||c[3],c=+u||1;a--;)b.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,b.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var le={};function ce(e){var t,n=e.ownerDocument,r=e.nodeName,i=le[r];return i||(t=n.body.appendChild(n.createElement(r)),i=b.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),le[r]=i,i)}function fe(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=Y.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&se(r)&&(i[o]=ce(r))):"none"!==n&&(i[o]="none",Y.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}b.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){se(this)?b(this).show():b(this).hide()})}});var pe,de,he=/^(?:checkbox|radio)$/i,ge=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ve=/^$|^module$|\/(?:java|ecma)script/i;pe=v.createDocumentFragment().appendChild(v.createElement("div")),(de=v.createElement("input")).setAttribute("type","radio"),de.setAttribute("checked","checked"),de.setAttribute("name","t"),pe.appendChild(de),d.checkClone=pe.cloneNode(!0).cloneNode(!0).lastChild.checked,pe.innerHTML="<textarea>x</textarea>",d.noCloneChecked=!!pe.cloneNode(!0).lastChild.defaultValue,pe.innerHTML="<option></option>",d.option=!!pe.lastChild;var ye={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function me(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&S(e,t)?b.merge([e],n):n}function xe(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ye.tbody=ye.tfoot=ye.colgroup=ye.caption=ye.thead,ye.th=ye.td,d.option||(ye.optgroup=ye.option=[1,"<select multiple='multiple'>","</select>"]);var be=/<|&#?\w+;/;function we(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===x(o))b.merge(p,o.nodeType?[o]:o);else if(be.test(o)){for(a=a||f.appendChild(t.createElement("div")),s=(ge.exec(o)||["",""])[1].toLowerCase(),u=ye[s]||ye._default,a.innerHTML=u[1]+b.htmlPrefilter(o)+u[2],c=u[0];c--;)a=a.lastChild;b.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));for(f.textContent="",d=0;o=p[d++];)if(r&&b.inArray(o,r)>-1)i&&i.push(o);else if(l=oe(o),a=me(f.appendChild(o),"script"),l&&xe(a),n)for(c=0;o=a[c++];)ve.test(o.type||"")&&n.push(o);return f}var Te=/^key/,Ce=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ee=/^([^.]*)(?:\.(.+)|)/;function Ae(){return!0}function Se(){return!1}function ke(e,t){return e===Ne()==("focus"===t)}function Ne(){try{return v.activeElement}catch(e){}}function De(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)De(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Se;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return b().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=b.guid++)),e.each(function(){b.event.add(this,t,i,r,n)})}function je(e,t,n){n?(Y.set(e,t,!1),b.event.add(e,t,{namespace:!1,handler:function(e){var r,o,a=Y.get(this,t);if(1&e.isTrigger&&this[t]){if(a.length)(b.event.special[t]||{}).delegateType&&e.stopPropagation();else if(a=i.call(arguments),Y.set(this,t,a),r=n(this,t),this[t](),a!==(o=Y.get(this,t))||r?Y.set(this,t,!1):o={},a!==o)return e.stopImmediatePropagation(),e.preventDefault(),o.value}else a.length&&(Y.set(this,t,{value:b.event.trigger(b.extend(a[0],b.Event.prototype),a.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,t)&&b.event.add(e,t,Ae)}b.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(e);if(V(e))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&b.find.matchesSelector(ie,i),n.guid||(n.guid=b.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(t){return void 0!==b&&b.event.triggered!==t.type?b.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(O)||[""]).length;l--;)d=g=(s=Ee.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=b.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=b.event.special[d]||{},c=b.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&b.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(d,a)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),b.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){for(l=(t=(t||"").match(O)||[""]).length;l--;)if(d=g=(s=Ee.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){for(f=b.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||b.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)b.event.remove(e,d+t[l],n,r,!0);b.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=b.event.fix(e),l=(Y.get(this,"events")||Object.create(null))[u.type]||[],c=b.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){for(a=b.event.handlers.call(this,u,l),t=0;(i=a[t++])&&!u.isPropagationStopped();)for(u.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((b.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?b(i,this).index(l)>-1:b.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(b.Event.prototype,e,{enumerable:!0,configurable:!0,get:h(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[b.expando]?e:new b.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return he.test(t.type)&&t.click&&S(t,"input")&&je(t,"click",Ae),!1},trigger:function(e){var t=this||e;return he.test(t.type)&&t.click&&S(t,"input")&&je(t,"click"),!0},_default:function(e){var t=e.target;return he.test(t.type)&&t.click&&S(t,"input")&&Y.get(t,"click")||S(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},b.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},b.Event=function(e,t){if(!(this instanceof b.Event))return new b.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ae:Se,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&b.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[b.expando]=!0},b.Event.prototype={constructor:b.Event,isDefaultPrevented:Se,isPropagationStopped:Se,isImmediatePropagationStopped:Se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ae,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ae,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ae,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},b.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Te.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ce.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},b.event.addProp),b.each({focus:"focusin",blur:"focusout"},function(e,t){b.event.special[e]={setup:function(){return je(this,e,ke),!1},trigger:function(){return je(this,e),!0},delegateType:t}}),b.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||b.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),b.fn.extend({on:function(e,t,n,r){return De(this,e,t,n,r)},one:function(e,t,n,r){return De(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,b(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Se),this.each(function(){b.event.remove(this,e,n,t)})}});var qe=/<script|<style|<link/i,Le=/checked\s*(?:[^=]|=\s*.checked.)/i,He=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Oe(e,t){return S(e,"table")&&S(11!==t.nodeType?t:t.firstChild,"tr")&&b(e).children("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Re(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Me(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)b.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=b.extend({},o),Q.set(t,a))}}function Fe(e,t,n,r){t=o(t);var i,a,s,u,l,c,f=0,p=e.length,g=p-1,v=t[0],y=h(v);if(y||p>1&&"string"==typeof v&&!d.checkClone&&Le.test(v))return e.each(function(i){var o=e.eq(i);y&&(t[0]=v.call(this,i,o.html())),Fe(o,t,n,r)});if(p&&(a=(i=we(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=a),a||r)){for(u=(s=b.map(me(i,"script"),Pe)).length;f<p;f++)l=i,f!==g&&(l=b.clone(l,!0,!0),u&&b.merge(s,me(l,"script"))),n.call(e[f],l,f);if(u)for(c=s[s.length-1].ownerDocument,b.map(s,Re),f=0;f<u;f++)l=s[f],ve.test(l.type||"")&&!Y.access(l,"globalEval")&&b.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?b._evalUrl&&!l.noModule&&b._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):m(l.textContent.replace(He,""),l,c))}return e}function Ie(e,t,n){for(var r,i=t?b.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||b.cleanData(me(r)),r.parentNode&&(n&&oe(r)&&xe(me(r,"script")),r.parentNode.removeChild(r));return e}b.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=oe(e);if(!(d.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(a=me(c),r=0,i=(o=me(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&he.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||me(e),a=a||me(c),r=0,i=o.length;r<i;r++)Me(o[r],a[r]);else Me(e,c);return(a=me(c,"script")).length>0&&xe(a,!f&&me(e,"script")),c},cleanData:function(e){for(var t,n,r,i=b.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?b.event.remove(n,r):b.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),b.fn.extend({detach:function(e){return Ie(this,e,!0)},remove:function(e){return Ie(this,e)},text:function(e){return B(this,function(e){return void 0===e?b.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Fe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Oe(this,e).appendChild(e)})},prepend:function(){return Fe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Oe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Fe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Fe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(b.cleanData(me(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return B(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!qe.test(e)&&!ye[(ge.exec(e)||["",""])[1].toLowerCase()]){e=b.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(b.cleanData(me(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Fe(this,arguments,function(t){var n=this.parentNode;b.inArray(this,e)<0&&(b.cleanData(me(this)),n&&n.replaceChild(t,this))},e)}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){for(var n,r=[],i=b(e),o=i.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),b(i[s])[t](n),a.apply(r,n.get());return this.pushStack(r)}});var We=new RegExp("^("+te+")(?!px)[a-z%]+$","i"),$e=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Be=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},_e=new RegExp(re.join("|"),"i");function ze(e,t,n){var r,i,o,a,s=e.style;return(n=n||$e(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||oe(e)||(a=b.style(e,t)),!d.pixelBoxStyles()&&We.test(a)&&_e.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Ue(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!(function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ie.appendChild(l).appendChild(c);var t=e.getComputedStyle(c);r="1%"!==t.top,u=12===n(t.marginLeft),c.style.right="60%",a=36===n(t.right),i=36===n(t.width),c.style.position="absolute",o=12===n(c.offsetWidth/3),ie.removeChild(l),c=null}}function n(e){return Math.round(parseFloat(e))}var r,i,o,a,s,u,l=v.createElement("div"),c=v.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",d.clearCloneStyle="content-box"===c.style.backgroundClip,b.extend(d,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,n,r,i;return null==s&&(t=v.createElement("table"),n=v.createElement("tr"),r=v.createElement("div"),t.style.cssText="position:absolute;left:-11111px",n.style.height="1px",r.style.height="9px",ie.appendChild(t).appendChild(n).appendChild(r),i=e.getComputedStyle(n),s=parseInt(i.height)>3,ie.removeChild(t)),s}}))})();var Xe=["Webkit","Moz","ms"],Ve=v.createElement("div").style,Ge={};function Ye(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Xe.length;n--;)if((e=Xe[n]+t)in Ve)return e}function Qe(e){var t=b.cssProps[e]||Ge[e];return t||(e in Ve?e:Ge[e]=Ye(e)||e)}var Je=/^(none|table(?!-c[ea]).+)/,Ke=/^--/,Ze={position:"absolute",visibility:"hidden",display:"block"},et={letterSpacing:"0",fontWeight:"400"};function tt(e,t,n){var r=ne.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function nt(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=b.css(e,n+re[a],!0,i)),r?("content"===n&&(u-=b.css(e,"padding"+re[a],!0,i)),"margin"!==n&&(u-=b.css(e,"border"+re[a]+"Width",!0,i))):(u+=b.css(e,"padding"+re[a],!0,i),"padding"!==n?u+=b.css(e,"border"+re[a]+"Width",!0,i):s+=b.css(e,"border"+re[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function rt(e,t,n){var r=$e(e),i=(!d.boxSizingReliable()||n)&&"border-box"===b.css(e,"boxSizing",!1,r),o=i,a=ze(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(We.test(a)){if(!n)return a;a="auto"}return(!d.boxSizingReliable()&&i||!d.reliableTrDimensions()&&S(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===b.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===b.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+nt(e,t,n||(i?"border":"content"),o,r,a)+"px"}function it(e,t,n,r,i){return new it.prototype.init(e,t,n,r,i)}b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=ze(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Ke.test(t),l=e.style;if(u||(t=Qe(s)),a=b.cssHooks[t]||b.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=ne.exec(n))&&i[1]&&(n=ue(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(b.cssNumber[s]?"":"px")),d.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Ke.test(t)||(t=Qe(s)),(a=b.cssHooks[t]||b.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=ze(e,t,r)),"normal"===i&&t in et&&(i=et[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),b.each(["height","width"],function(e,t){b.cssHooks[t]={get:function(e,n,r){if(n)return!Je.test(b.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?rt(e,t,r):Be(e,Ze,function(){return rt(e,t,r)})},set:function(e,n,r){var i,o=$e(e),a=!d.scrollboxSize()&&"absolute"===o.position,s=(a||r)&&"border-box"===b.css(e,"boxSizing",!1,o),u=r?nt(e,t,r,s,o):0;return s&&a&&(u-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-nt(e,t,"border",!1,o)-.5)),u&&(i=ne.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=b.css(e,t)),tt(0,n,u)}}}),b.cssHooks.marginLeft=Ue(d.reliableMarginLeft,function(e,t){if(t)return(parseFloat(ze(e,"marginLeft"))||e.getBoundingClientRect().left-Be(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+re[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(b.cssHooks[e+t].set=tt)}),b.fn.extend({css:function(e,t){return B(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=$e(e),i=t.length;a<i;a++)o[t[a]]=b.css(e,t[a],!1,r);return o}return void 0!==n?b.style(e,t,n):b.css(e,t)},e,t,arguments.length>1)}}),b.Tween=it,it.prototype={constructor:it,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||b.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(b.cssNumber[n]?"":"px")},cur:function(){var e=it.propHooks[this.prop];return e&&e.get?e.get(this):it.propHooks._default.get(this)},run:function(e){var t,n=it.propHooks[this.prop];return this.options.duration?this.pos=t=b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):it.propHooks._default.set(this),this}},it.prototype.init.prototype=it.prototype,it.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=b.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):1!==e.elem.nodeType||!b.cssHooks[e.prop]&&null==e.elem.style[Qe(e.prop)]?e.elem[e.prop]=e.now:b.style(e.elem,e.prop,e.now+e.unit)}}},it.propHooks.scrollTop=it.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},b.fx=it.prototype.init,b.fx.step={};var ot,at,st=/^(?:toggle|show|hide)$/,ut=/queueHooks$/;function lt(){at&&(!1===v.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(lt):e.setTimeout(lt,b.fx.interval),b.fx.tick())}function ct(){return e.setTimeout(function(){ot=void 0}),ot=Date.now()}function ft(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=re[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function pt(e,t,n){for(var r,i=(ht.tweeners[t]||[]).concat(ht.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function dt(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=b.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}function ht(e,t,n){var r,i,o=0,a=ht.prefilters.length,s=b.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=ot||ct(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),o=0,a=l.tweens.length;o<a;o++)l.tweens[o].run(r);return s.notifyWith(e,[l,r,n]),r<1&&a?n:(a||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{},easing:b.easing._default},n),originalProperties:t,originalOptions:n,startTime:ot||ct(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(dt(c,l.opts.specialEasing);o<a;o++)if(r=ht.prefilters[o].call(l,e,c,l.opts))return h(r.stop)&&(b._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return b.map(c,pt,l),h(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),b.fx.timer(b.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l}b.Animation=b.extend(ht,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ue(n.elem,e,ne.exec(t),n),n}]},tweener:function(e,t){h(e)?(t=e,e=["*"]):e=e.match(O);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ht.tweeners[n]=ht.tweeners[n]||[],ht.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&se(e),v=Y.get(e,"fxshow");for(r in n.queue||(null==(a=b._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,b.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],st.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||b.style(e,r)}if((u=!b.isEmptyObject(t))||!b.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,"display")),"none"===(c=b.css(e,"display"))&&(l?c=l:(fe([e],!0),l=e.style.display||l,c=b.css(e,"display"),fe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===b.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Y.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&fe([e],!0),p.done(function(){for(r in g||fe([e]),Y.remove(e,"fxshow"),d)b.style(e,r,d[r])})),u=pt(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ht.prefilters.unshift(e):ht.prefilters.push(e)}}),b.speed=function(e,t,n){var r=e&&"object"==typeof e?b.extend({},e):{complete:n||!n&&t||h(e)&&e,duration:e,easing:n&&t||t&&!h(t)&&t};return b.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in b.fx.speeds?r.duration=b.fx.speeds[r.duration]:r.duration=b.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){h(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(se).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),o=b.speed(t,n,r),a=function(){var t=ht(this,b.extend({},e),o);(i||Y.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=b.timers,a=Y.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ut.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||b.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=Y.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=b.timers,a=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ft(t,!0),e,r,i)}}),b.each({slideDown:ft("show"),slideUp:ft("hide"),slideToggle:ft("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.timers=[],b.fx.tick=function(){var e,t=0,n=b.timers;for(ot=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||b.fx.stop(),ot=void 0},b.fx.timer=function(e){b.timers.push(e),b.fx.start()},b.fx.interval=13,b.fx.start=function(){at||(at=!0,lt())},b.fx.stop=function(){at=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fn.delay=function(t,n){return t=b.fx&&b.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},(function(){var e=v.createElement("input"),t=v.createElement("select").appendChild(v.createElement("option"));e.type="checkbox",d.checkOn=""!==e.value,d.optSelected=t.selected,(e=v.createElement("input")).value="t",e.type="radio",d.radioValue="t"===e.value})();var gt,vt=b.expr.attrHandle;b.fn.extend({attr:function(e,t){return B(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})}}),b.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?b.prop(e,t,n):(1===o&&b.isXMLDoc(e)||(i=b.attrHooks[t.toLowerCase()]||(b.expr.match.bool.test(t)?gt:void 0)),void 0!==n?null===n?void b.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=b.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!d.radioValue&&"radio"===t&&S(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(O);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),gt={set:function(e,t,n){return!1===t?b.removeAttr(e,n):e.setAttribute(n,n),n}},b.each(b.expr.match.bool.source.match(/\w+/g),function(e,t){var n=vt[t]||b.find.attr;vt[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=vt[a],vt[a]=i,i=null!=n(e,t,r)?a:null,vt[a]=o),i}});var yt=/^(?:input|select|textarea|button)$/i,mt=/^(?:a|area)$/i;function xt(e){return(e.match(O)||[]).join(" ")}function bt(e){return e.getAttribute&&e.getAttribute("class")||""}function wt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(O)||[]}b.fn.extend({prop:function(e,t){return B(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[b.propFix[e]||e]})}}),b.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&b.isXMLDoc(e)||(t=b.propFix[t]||t,i=b.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=b.find.attr(e,"tabindex");return t?parseInt(t,10):yt.test(e.nodeName)||mt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),d.optSelected||(b.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),b.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){b.propFix[this.toLowerCase()]=this}),b.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,u=0;if(h(e))return this.each(function(t){b(this).addClass(e.call(this,t,bt(this)))});if((t=wt(e)).length)for(;n=this[u++];)if(i=bt(n),r=1===n.nodeType&&" "+xt(i)+" "){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=xt(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,u=0;if(h(e))return this.each(function(t){b(this).removeClass(e.call(this,t,bt(this)))});if(!arguments.length)return this.attr("class","");if((t=wt(e)).length)for(;n=this[u++];)if(i=bt(n),r=1===n.nodeType&&" "+xt(i)+" "){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(s=xt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):h(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,bt(this),t),t)}):this.each(function(){var t,i,o,a;if(r)for(i=0,o=b(this),a=wt(e);t=a[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=bt(this))&&Y.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+xt(bt(n))+" ").indexOf(t)>-1)return!0;return!1}});var Tt=/\r/g;b.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=h(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,b(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=b.map(i,function(e){return null==e?"":e+""})),(t=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=b.valHooks[i.type]||b.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(Tt,""):null==n?"":n:void 0}}),b.extend({valHooks:{option:{get:function(e){var t=b.find.attr(e,"value");return null!=t?t:xt(b.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!S(n.parentNode,"optgroup"))){if(t=b(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=b.makeArray(t),a=i.length;a--;)((r=i[a]).selected=b.inArray(b.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=b.inArray(b(e).val(),t)>-1}},d.checkOn||(b.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),d.focusin="onfocusin"in e;var Ct=/^(?:focusinfocus|focusoutblur)$/,Et=function(e){e.stopPropagation()};b.extend(b.event,{trigger:function(t,n,r,i){var o,a,s,u,l,f,p,d,y=[r||v],m=c.call(t,"type")?t.type:t,x=c.call(t,"namespace")?t.namespace.split("."):[];if(a=d=s=r=r||v,3!==r.nodeType&&8!==r.nodeType&&!Ct.test(m+b.event.triggered)&&(m.indexOf(".")>-1&&(m=(x=m.split(".")).shift(),x.sort()),l=m.indexOf(":")<0&&"on"+m,(t=t[b.expando]?t:new b.Event(m,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=x.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+x.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:b.makeArray(n,[t]),p=b.event.special[m]||{},i||!p.trigger||!1!==p.trigger.apply(r,n))){if(!i&&!p.noBubble&&!g(r)){for(u=p.delegateType||m,Ct.test(u+m)||(a=a.parentNode);a;a=a.parentNode)y.push(a),s=a;s===(r.ownerDocument||v)&&y.push(s.defaultView||s.parentWindow||e)}for(o=0;(a=y[o++])&&!t.isPropagationStopped();)d=a,t.type=o>1?u:p.bindType||m,(f=(Y.get(a,"events")||Object.create(null))[t.type]&&Y.get(a,"handle"))&&f.apply(a,n),(f=l&&a[l])&&f.apply&&V(a)&&(t.result=f.apply(a,n),!1===t.result&&t.preventDefault());return t.type=m,i||t.isDefaultPrevented()||p._default&&!1!==p._default.apply(y.pop(),n)||!V(r)||l&&h(r[m])&&!g(r)&&((s=r[l])&&(r[l]=null),b.event.triggered=m,t.isPropagationStopped()&&d.addEventListener(m,Et),r[m](),t.isPropagationStopped()&&d.removeEventListener(m,Et),b.event.triggered=void 0,s&&(r[l]=s)),t.result}},simulate:function(e,t,n){var r=b.extend(new b.Event,n,{type:e,isSimulated:!0});b.event.trigger(r,null,t)}}),b.fn.extend({trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return b.event.trigger(e,t,n,!0)}}),d.focusin||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){b.event.simulate(t,e.target,b.event.fix(e))};b.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=Y.access(r,t);i||r.addEventListener(e,n,!0),Y.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=Y.access(r,t)-1;i?Y.access(r,t,i):(r.removeEventListener(e,n,!0),Y.remove(r,t))}}});var At=e.location,St={guid:Date.now()},kt=/\?/;b.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+t),n};var Nt=/\[\]$/,Dt=/\r?\n/g,jt=/^(?:submit|button|image|reset|file)$/i,qt=/^(?:input|select|textarea|keygen)/i;function Lt(e,t,n,r){var i;if(Array.isArray(t))b.each(t,function(t,i){n||Nt.test(e)?r(e,i):Lt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==x(t))r(e,t);else for(i in t)Lt(e+"["+i+"]",t[i],n,r)}b.param=function(e,t){var n,r=[],i=function(e,t){var n=h(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){i(this.name,this.value)});else for(n in e)Lt(n,e[n],t,i);return r.join("&")},b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&qt.test(this.nodeName)&&!jt.test(e)&&(this.checked||!he.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:Array.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(Dt,"\r\n")}}):{name:t.name,value:n.replace(Dt,"\r\n")}}).get()}});var Ht=/%20/g,Ot=/#.*$/,Pt=/([?&])_=[^&]*/,Rt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Mt=/^(?:GET|HEAD)$/,Ft=/^\/\//,It={},Wt={},$t="*/".concat("*"),Bt=v.createElement("a");function _t(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(O)||[];if(h(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function zt(e,t,n,r){var i={},o=e===Wt;function a(s){var u;return i[s]=!0,b.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),a(l),!1)}),u}return a(t.dataTypes[0])||!i["*"]&&a("*")}function Ut(e,t){var n,r,i=b.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&b.extend(!0,e,r),e}function Xt(e,t,n){for(var r,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}function Vt(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}Bt.href=At.href,b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:At.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(At.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ut(Ut(e,b.ajaxSettings),t):Ut(b.ajaxSettings,e)},ajaxPrefilter:_t(It),ajaxTransport:_t(Wt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var r,i,o,a,s,u,l,c,f,p,d=b.ajaxSetup({},n),h=d.context||d,g=d.context&&(h.nodeType||h.jquery)?b(h):b.event,y=b.Deferred(),m=b.Callbacks("once memory"),x=d.statusCode||{},w={},T={},C="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(l){if(!a)for(a={};t=Rt.exec(o);)a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return l?o:null},setRequestHeader:function(e,t){return null==l&&(e=T[e.toLowerCase()]=T[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==l&&(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)E.always(e[E.status]);else for(t in e)x[t]=[x[t],e[t]];return this},abort:function(e){var t=e||C;return r&&r.abort(t),A(0,t),this}};if(y.promise(E),d.url=((t||d.url||At.href)+"").replace(Ft,At.protocol+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(O)||[""],null==d.crossDomain){u=v.createElement("a");try{u.href=d.url,u.href=u.href,d.crossDomain=Bt.protocol+"//"+Bt.host!=u.protocol+"//"+u.host}catch(e){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=b.param(d.data,d.traditional)),zt(It,d,n,E),l)return E;for(f in(c=b.event&&d.global)&&0==b.active++&&b.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Mt.test(d.type),i=d.url.replace(Ot,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Ht,"+")):(p=d.url.slice(i.length),d.data&&(d.processData||"string"==typeof d.data)&&(i+=(kt.test(i)?"&":"?")+d.data,delete d.data),!1===d.cache&&(i=i.replace(Pt,"$1"),p=(kt.test(i)?"&":"?")+"_="+St.guid+++p),d.url=i+p),d.ifModified&&(b.lastModified[i]&&E.setRequestHeader("If-Modified-Since",b.lastModified[i]),b.etag[i]&&E.setRequestHeader("If-None-Match",b.etag[i])),(d.data&&d.hasContent&&!1!==d.contentType||n.contentType)&&E.setRequestHeader("Content-Type",d.contentType),E.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", */*; q=0.01":""):d.accepts["*"]),d.headers)E.setRequestHeader(f,d.headers[f]);if(d.beforeSend&&(!1===d.beforeSend.call(h,E,d)||l))return E.abort();if(C="abort",m.add(d.complete),E.done(d.success),E.fail(d.error),r=zt(Wt,d,n,E)){if(E.readyState=1,c&&g.trigger("ajaxSend",[E,d]),l)return E;d.async&&d.timeout>0&&(s=e.setTimeout(function(){E.abort("timeout")},d.timeout));try{l=!1,r.send(w,A)}catch(e){if(l)throw e;A(-1,e)}}else A(-1,"No Transport");function A(t,n,a,u){var f,p,v,w,T,C=n;l||(l=!0,s&&e.clearTimeout(s),r=void 0,o=u||"",E.readyState=t>0?4:0,f=t>=200&&t<300||304===t,a&&(w=Xt(d,E,a)),!f&&b.inArray("script",d.dataTypes)>-1&&(d.converters["text script"]=function(){}),w=Vt(d,w,E,f),f?(d.ifModified&&((T=E.getResponseHeader("Last-Modified"))&&(b.lastModified[i]=T),(T=E.getResponseHeader("etag"))&&(b.etag[i]=T)),204===t||"HEAD"===d.type?C="nocontent":304===t?C="notmodified":(C=w.state,p=w.data,f=!(v=w.error))):(v=C,!t&&C||(C="error",t<0&&(t=0))),E.status=t,E.statusText=(n||C)+"",f?y.resolveWith(h,[p,C,E]):y.rejectWith(h,[E,C,v]),E.statusCode(x),x=void 0,c&&g.trigger(f?"ajaxSuccess":"ajaxError",[E,d,f?p:v]),m.fireWith(h,[E,C]),c&&(g.trigger("ajaxComplete",[E,d]),--b.active||b.event.trigger("ajaxStop")))}return E},getJSON:function(e,t,n){return b.get(e,t,n,"json")},getScript:function(e,t){return b.get(e,void 0,t,"script")}}),b.each(["get","post"],function(e,t){b[t]=function(e,n,r,i){return h(n)&&(i=i||r,r=n,n=void 0),b.ajax(b.extend({url:e,type:t,dataType:i,data:n,success:r},b.isPlainObject(e)&&e))}}),b.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),b._evalUrl=function(e,t,n){return b.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){b.globalEval(e,t,n)}})},b.fn.extend({wrapAll:function(e){var t;return this[0]&&(h(e)&&(e=e.call(this[0])),t=b(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return h(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=h(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){b(this).replaceWith(this.childNodes)}),this}}),b.expr.pseudos.hidden=function(e){return!b.expr.pseudos.visible(e)},b.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},b.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Gt={0:200,1223:204},Yt=b.ajaxSettings.xhr();d.cors=!!Yt&&"withCredentials"in Yt,d.ajax=Yt=!!Yt,b.ajaxTransport(function(t){var n,r;if(d.cors||Yt&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Gt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),b.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),b.ajaxTransport("script",function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=b("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),v.head.appendChild(t[0])},abort:function(){n&&n()}}});var Qt,Jt=[],Kt=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Jt.pop()||b.expando+"_"+St.guid++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=!1!==t.jsonp&&(Kt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=h(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Kt,"$1"+i):!1!==t.jsonp&&(t.url+=(kt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||b.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){void 0===o?b(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Jt.push(i)),a&&h(o)&&o(a[0]),a=o=void 0}),"script"}),d.createHTMLDocument=((Qt=v.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Qt.childNodes.length),b.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(d.createHTMLDocument?((r=(t=v.implementation.createHTMLDocument("")).createElement("base")).href=v.location.href,t.head.appendChild(r)):t=v),i=k.exec(e),o=!n&&[],i?[t.createElement(i[1])]:(i=we([e],t,o),o&&o.length&&b(o).remove(),b.merge([],i.childNodes)));var r,i,o},b.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=xt(e.slice(s)),e=e.slice(0,s)),h(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&b.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?b("<div>").append(b.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},b.expr.pseudos.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length},b.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=b.css(e,"position"),c=b(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=b.css(e,"top"),u=b.css(e,"left"),("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),h(t)&&(t=t.call(e,n,b.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):("number"==typeof f.top&&(f.top+="px"),"number"==typeof f.left&&(f.left+="px"),c.css(f))}},b.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){b.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===b.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===b.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=b(e).offset()).top+=b.css(e,"borderTopWidth",!0),i.left+=b.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-b.css(r,"marginTop",!0),left:t.left-i.left-b.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===b.css(e,"position");)e=e.offsetParent;return e||ie})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;b.fn[e]=function(r){return B(this,function(e,r,i){var o;if(g(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),b.each(["top","left"],function(e,t){b.cssHooks[t]=Ue(d.pixelPosition,function(e,n){if(n)return n=ze(e,t),We.test(n)?b(e).position()[t]+"px":n})}),b.each({Height:"height",Width:"width"},function(e,t){b.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){b.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return B(this,function(t,n,i){var o;return g(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?b.css(t,n,s):b.style(t,n,i,s)},t,a?i:void 0,a)}})}),b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),b.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});var Zt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;b.proxy=function(e,t){var n,r,o;if("string"==typeof t&&(n=e[t],t=e,e=n),h(e))return r=i.call(arguments,2),(o=function(){return e.apply(t||this,r.concat(i.call(arguments)))}).guid=e.guid=e.guid||b.guid++,o},b.holdReady=function(e){e?b.readyWait++:b.ready(!0)},b.isArray=Array.isArray,b.parseJSON=JSON.parse,b.nodeName=S,b.isFunction=h,b.isWindow=g,b.camelCase=X,b.type=x,b.now=Date.now,b.isNumeric=function(e){var t=b.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},b.trim=function(e){return null==e?"":(e+"").replace(Zt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return b});var en=e.jQuery,tn=e.$;return b.noConflict=function(t){return e.$===b&&(e.$=tn),t&&e.jQuery===b&&(e.jQuery=en),b},void 0===t&&(e.jQuery=e.$=b),b})},453,[]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=t(r(d[1])),n=r(d[2]),o=r(d[3]),c=n.StyleSheet.create({scrollView:{backgroundColor:o.Colors.lighter},engine:{position:'absolute',right:0},body:{backgroundColor:o.Colors.white},sectionContainer:{marginTop:32,paddingHorizontal:24},sectionTitle:{fontSize:24,fontWeight:'600',color:o.Colors.black},sectionDescription:{marginTop:8,fontSize:18,fontWeight:'400',color:o.Colors.dark},highlight:{fontWeight:'700'},footer:{color:o.Colors.dark,fontSize:12,fontWeight:'600',padding:4,paddingRight:12,textAlign:'right'}}),s=function(){return l.default.createElement(l.default.Fragment,null,l.default.createElement(n.StatusBar,{barStyle:"dark-content"}),l.default.createElement(n.SafeAreaView,null,l.default.createElement(n.ScrollView,{contentInsetAdjustmentBehavior:"automatic",style:c.scrollView},l.default.createElement(o.Header,null),null==g.HermesInternal?null:l.default.createElement(n.View,{style:c.engine},l.default.createElement(n.Text,{style:c.footer},"Engine: Hermes")),l.default.createElement(n.View,{style:c.body},l.default.createElement(n.View,{style:c.sectionContainer},l.default.createElement(n.Text,{style:c.sectionTitle},"Step One"),l.default.createElement(n.Text,{style:c.sectionDescription},"Edit ",l.default.createElement(n.Text,{style:c.highlight},"App.js")," to change this screen and then come back to see your edits.")),l.default.createElement(n.View,{style:c.sectionContainer},l.default.createElement(n.Text,{style:c.sectionTitle},"See Your Changes"),l.default.createElement(n.Text,{style:c.sectionDescription},l.default.createElement(o.ReloadInstructions,null))),l.default.createElement(n.View,{style:c.sectionContainer},l.default.createElement(n.Text,{style:c.sectionTitle},"Debug"),l.default.createElement(n.Text,{style:c.sectionDescription},l.default.createElement(o.DebugInstructions,null))),l.default.createElement(n.View,{style:c.sectionContainer},l.default.createElement(n.Text,{style:c.sectionTitle},"Learn More"),l.default.createElement(n.Text,{style:c.sectionDescription},"Read the docs to discover what to do next:")),l.default.createElement(o.LearnMoreLinks,null)))))};e.default=s},454,[1,59,5,455]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Header",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"LearnMoreLinks",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"Colors",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"DebugInstructions",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"ReloadInstructions",{enumerable:!0,get:function(){return c.default}});var n=t(r(d[1])),u=t(r(d[2])),o=t(r(d[3])),f=t(r(d[4])),c=t(r(d[5]))},455,[1,456,459,457,461,462]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t(r(d[1])),l=r(d[2]),n=t(r(d[3])),c=l.StyleSheet.create({background:{paddingBottom:40,paddingTop:96,paddingHorizontal:32,backgroundColor:o.default.lighter},logo:{opacity:.2,overflow:'visible',resizeMode:'cover',marginLeft:-128,marginBottom:-192},text:{fontSize:40,fontWeight:'600',textAlign:'center',color:o.default.black}}),u=function(){return n.default.createElement(l.ImageBackground,{accessibilityRole:'image',source:r(d[4]),style:c.background,imageStyle:c.logo},n.default.createElement(l.Text,{style:c.text},"Welcome to React"))};e.default=u},456,[1,457,5,59,458]);
__d(function(g,r,i,a,m,e,d){'use strict';Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={primary:'#1292B4',white:'#FFF',lighter:'#F3F3F3',light:'#DAE1E7',dark:'#444',black:'#000'}},457,[]);
__d(function(g,r,i,a,m,e,d){m.exports=r(d[0]).registerAsset({__packager_asset:!0,httpServerLocation:"/assets/node_modules/react-native/Libraries/NewAppScreen/components",width:512,height:512,scales:[1],hash:"47ce6e77f039020ee2e76a10c1e988e9",name:"logo",type:"png"})},458,[189]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r(d[1])),o=t(r(d[2])),l=r(d[3]),s=t(r(d[4])),c=[{id:1,title:'The Basics',link:'https://reactnative.dev/docs/tutorial',description:'Explains a Hello World for React Native.'},{id:2,title:'Style',link:'https://reactnative.dev/docs/style',description:'Covers how to use the prop named style which controls the visuals.'},{id:3,title:'Layout',link:'https://reactnative.dev/docs/flexbox',description:'React Native uses flexbox for layout, learn how it works.'},{id:4,title:'Components',link:'https://reactnative.dev/docs/components-and-apis',description:'The full list of components and APIs inside React Native.'},{id:5,title:'Navigation',link:'https://reactnative.dev/docs/navigation',description:'How to handle moving between screens inside your application.'},{id:6,title:'Networking',link:'https://reactnative.dev/docs/network',description:'How to use the Fetch API in React Native.'},{id:7,title:'Help',link:'https://reactnative.dev/help',description:'Need more help? There are many other React Native developers who may have the answer.'},{id:8,title:'Follow us on Twitter',link:'https://twitter.com/reactnative',description:'Stay in touch with the community, join in on Q&As and more by following React Native on Twitter.'}],p=l.StyleSheet.create({container:{marginTop:32,paddingHorizontal:24},linkContainer:{flexWrap:'wrap',flexDirection:'row',justifyContent:'space-between',alignItems:'center',paddingVertical:8},link:{flex:2,fontSize:18,fontWeight:'400',color:n.default.primary},description:{flex:3,paddingVertical:16,fontWeight:'400',fontSize:18,color:n.default.dark},separator:{backgroundColor:n.default.light,height:1}}),u=function(){return s.default.createElement(l.View,{style:p.container},c.map(function(t){var n=t.id,c=t.title,u=t.link,h=t.description;return s.default.createElement(s.default.Fragment,{key:n},s.default.createElement(l.View,{style:p.separator}),s.default.createElement(l.TouchableOpacity,{accessibilityRole:'button',onPress:function(){return(0,o.default)(u)},style:p.linkContainer},s.default.createElement(l.Text,{style:p.link},c),s.default.createElement(l.Text,{style:p.description},h)))}))};e.default=u},459,[1,457,460,5,59]);
__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);m.exports=function(n){fetch(t().url+'open-url',{method:'POST',body:JSON.stringify({url:n})})}},460,[114]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=r(d[1]),u=t(r(d[2])),n=l.StyleSheet.create({highlight:{fontWeight:'700'}}),h=l.Platform.select({ios:function(){return u.default.createElement(l.Text,null,"Press ",u.default.createElement(l.Text,{style:n.highlight},"Cmd + D")," in the simulator or",' ',u.default.createElement(l.Text,{style:n.highlight},"Shake")," your device to open the React Native debug menu.")},default:function(){return u.default.createElement(l.Text,null,"Press ",u.default.createElement(l.Text,{style:n.highlight},"Cmd or Ctrl + M")," or",' ',u.default.createElement(l.Text,{style:n.highlight},"Shake")," your device to open the React Native debug menu.")}});e.default=h},461,[1,5,59]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=r(d[1]),o=t(r(d[2])),u=l.StyleSheet.create({highlight:{fontWeight:'700'}}),n=l.Platform.select({ios:function(){return o.default.createElement(l.Text,null,"Press ",o.default.createElement(l.Text,{style:u.highlight},"Cmd + R")," in the simulator to reload your app's code.")},default:function(){return o.default.createElement(l.Text,null,"Double tap ",o.default.createElement(l.Text,{style:u.highlight},"R")," on your keyboard to reload your app's code.")}});e.default=n},462,[1,5,59]);
__d(function(e,m,t,a,n,d,i){n.exports={name:"ZmeetSDK",displayName:"ZmeetSDK"}},463,[]);
__d(function(g,r,i,a,m,e,d){var n=r(d[0]),t=r(d[1]),c=r(d[2]),o=r(d[3]),s=n(r(d[4])),l=n(r(d[5])),v=t.NativeModules.AppNativeModule,k=new t.NativeEventEmitter(v),p=function(n){var t=n.event,c=n.callback,s=n.action;o.meetingHelper.connection?'add'===s?o.meetingHelper.connection.addEventListener(t,c):o.meetingHelper.connection.removeEventListener(t,c):console.warn("[connection]can not find conference when register connection event="+t)},f=function(n){var t=n.event,c=n.callback,s=n.action;o.meetingHelper.room?'add'===s?o.meetingHelper.room.on(t,c):o.meetingHelper.room.off(t,c):console.warn("[conference]can not find conference when register conference event="+t)},b=function(n){var t=n.event,c=n.action;o.meetingHelper.room?o.meetingHelper.onCustomCommandRegister(t,c):console.warn("[conference]can not find conference when register conference event="+t)};k.addListener(c.MethodsNameSpace.JMethod,function(n){var t=n.method,s=n.params,l=c.MeetMethods.JMethod;switch(console.log('\ud83d\udd25\ud83d\udd25 JMethod',t,s),t){case l.init:var v=s.config,k='string'==typeof v?JSON.parse(v):v;o.meetingHelper.init(k);break;case l.setLogLevel:break;case l.createLocalTracks:o.meetingHelper.createLocalTracks(s);break;case l.quit:o.meetingHelper.quit();break;case l.destroy:o.meetingHelper.destroy()}}),k.addListener(c.MethodsNameSpace.ConnectionMethod,function(n){var t=n.method,s=n.params,l=c.MeetMethods.ConnectionMethod;console.log('\ud83d\udd25\ud83d\udd25 ConnectionMethod',t,s);var v=s.event,k=s.callback,f=s.accessToken,b=s.meetingId,h=s.statisticsDisplayName,u=s.statisticsId,M=s.config,L='string'==typeof M?JSON.parse(M):M;switch(t){case l.connect:console.log('\ud83d\udd25\ud83d\udd25 customConfig',L),o.meetingHelper.connect(f,L);break;case l.disconnect:o.meetingHelper.disconnect();break;case l.initJitsiConference:o.meetingHelper.joinOrCreateRoom({meetingId:b,statisticsId:u,statisticsDisplayName:h});break;case l.addEventListener:p({event:v,callback:k,action:'add'});break;case l.removeEventListener:p({event:v,callback:k,action:'remove'})}}),k.addListener(c.MethodsNameSpace.ConferenceMethod,function(n){var t=n.method,l=n.params,v=c.MeetMethods.ConferenceMethod;console.log('\ud83d\udd25\ud83d\udd25 ConferenceMethod',t,l);var k=l.event,p=l.callback;switch(t){case v.addTrack:s.default.addTrack(l);break;case v.removeTrack:s.default.removeTrack(l);break;case v.selectParticipant:s.default.selectParticiant(l);break;case v.addEventListener:f({event:k,callback:p,action:'add'});break;case v.removeEventListener:f({event:k,callback:p,action:'remove'});break;case v.addCommandListener:b({event:k,action:'add'});break;case v.removeCommandListener:b({event:k,action:'remove'});break;case v.sendCommand:o.meetingHelper.sendCommand(l);break;case v.sendCommandOnce:o.meetingHelper.sendCommandOnce(l)}}),k.addListener(c.MethodsNameSpace.TrackMethod,function(n){var t=n.method,o=n.params,s=c.MeetMethods.TrackMethod;console.log('\ud83d\udd25\ud83d\udd25 TrackMethod',t,o);var v=o.event,k=o.callback,p=o.trackId;switch(t){case s.getParticipantId:break;case s.mute:l.default.muteTrack(p);break;case s.unmute:l.default.unmuteTrack(p);break;case s.dispose:l.default.disposeTrack(p);break;case s.addEventListener:h({event:v,callback:k,trackId:p,action:'add'});break;case s.removeEventListener:h({event:v,callback:k,trackId:p,action:'remove'})}});var h=function(n){n.event,n.callback,n.trackId,n.action}},464,[1,5,465,466,475,474]);
__d(function(g,r,i,a,m,e,d){"use strict";var n,t,o,c,s,E,C,_;Object.defineProperty(e,"__esModule",{value:!0}),e.MeetMethods=e.MeetEvents=e.MethodsNameSpace=e.ConnectionQualityEvent=e.TrackEvent=e.ConferenceEvent=e.ConnectionEvent=void 0,(function(n){n.init="init",n.setLogLevel="setLogLevel",n.createLocalTracks="createLocalTracks",n.quit="quit",n.destroy="destroy"})(n||(n={})),(function(n){n.connect="connect",n.disconnect="disconnect",n.initJitsiConference="initConference",n.addEventListener="addEventListener",n.removeEventListener="removeEventListener"})(t||(t={})),(function(n){n.join="join",n.leave="leave",n.myUserId="myUserId",n.getLocalTracks="getLocalTracks",n.addEventListener="addEventListener",n.removeEventListener="removeEventListener",n.on="on",n.off="off",n.sendTextMessage="sendTextMessage",n.setDisplayName="setDisplayName",n.selectParticipant="selectParticipant",n.sendCommand="sendCommand",n.sendCommandOnce="sendCommandOnce",n.removeCommand="removeCommand",n.addCommandListener="addCommandListener",n.removeCommandListener="removeCommandListener",n.addTrack="addTrack",n.removeTrack="removeTrack",n.isDTMFSupported="isDTMFSupported",n.getRole="getRole",n.isModerator="isModerator",n.lock="lock",n.unlock="unlock",n.kickParticipant="kickParticipant",n.setStartMutedPolicy="setStartMutedPolicy",n.getStartMutedPolicy="getStartMutedPolicy",n.isStartAudioMuted="isStartAudioMuted",n.isStartVideoMuted="isStartVideoMuted",n.sendFeedback="sendFeedback",n.setSubject="setSubject",n.sendEndpointMessage="sendEndpointMessage",n.broadcastEndpointMessage="broadcastEndpointMessage",n.pinParticipant="pinParticipant",n.setReceiverVideoConstraint="setReceiverVideoConstraint",n.setSenderVideoConstraint="setSenderVideoConstraint",n.isHidden="isHidden"})(o||(o={})),(function(n){n.getType="getType",n.mute="mute",n.unmute="unmute",n.isMuted="isMuted",n.attach="attach",n.detach="detach",n.dispose="dispose",n.getId="getId",n.getParticipantId="getParticipantId",n.setAudioOutput="setAudioOutput",n.getDeviceId="getDeviceId",n.isEnded="isEnded",n.setEffect="setEffect",n.addEventListener="addEventListener",n.removeEventListener="removeEventListener"})(c||(c={})),(function(n){n.CONNECTION_INIT="connection.init",n.CONNECTION_ESTABLISHED="connection.connectionEstablished",n.CONNECTION_FAILED="connection.connectionFailed",n.CONNECTION_DISCONNECTED="connection.connectionDisconnected"})(s=e.ConnectionEvent||(e.ConnectionEvent={})),(function(n){n.CONFERENCE_JOINED="conference.joined",n.CONFERENCE_LEFT="conference.left",n.CONFERENCE_FAILED="conference.failed",n.CONFERENCE_ERROR="conference.error",n.USER_JOINED="conference.userJoined",n.USER_LEFT="conference.userLeft",n.USER_ROLE_CHANGED="conference.roleChanged",n.USER_STATUS_CHANGED="conference.statusChanged",n.KICKED="conference.kicked",n.TRACK_ADDED="conference.trackAdded",n.TRACK_REMOVED="conference.trackRemoved",n.TRACK_MUTE_CHANGED="conference.trackMuteChanged",n.TRACK_AUDIO_LEVEL_CHANGED="conference.audioLevelsChanged",n.DOMINANT_SPEAKER_CHANGED="conference.dominantSpeaker",n.MESSAGE_RECEIVED="conference.endpoint_message_received",n.DISPLAY_NAME_CHANGED="conference.displayNameChanged",n.SUBJECT_CHANGED="conference.subjectChanged",n.LAST_N_ENDPOINTS_CHANGED="conference.lastNEndpointsChanged",n.DTMF_SUPPORT_CHANGED="conference.dtmfSupportChanged",n.STARTED_MUTED="conference.started_muted",n.BEFORE_STATISTICS_DISPOSED="conference.beforeStatisticsDisposed",n.AUTH_STATUS_CHANGED="conference.auth_status_changed",n.ENDPOINT_MESSAGE_RECEIVED="conference.endpoint_message_received",n.TALK_WHILE_MUTED="conference.talk_while_muted",n.NO_AUDIO_INPUT="conference.no_audio_input",n.AUDIO_INPUT_STATE_CHANGE="conference.audio_input_state_changed",n.NOISY_MIC="conference.noisy_mic"})(E=e.ConferenceEvent||(e.ConferenceEvent={})),(function(n){n.LOCAL_TRACK_STOPPED="track.stopped",n.TRACK_AUDIO_OUTPUT_CHANGED="track.audioOutputChanged",n.TRACK_MUTE_CHANGED="track.trackMuteChanged",n.TRACK_AUDIO_LEVEL_CHANGED="track.audioLevelsChanged",n.TRACK_VIDEOTYPE_CHANGED="track.videoTypeChanged",n.NO_AUDIO_INPUT="track.no_audio_input",n.LOCAL_TRACK_CREATED="local_track_created"})(C=e.TrackEvent||(e.TrackEvent={})),(function(n){n.LOCAL_STATS_UPDATED="cq.local_stats_updated",n.REMOTE_STATS_UPDATED="cq.remote_stats_updated"})(_=e.ConnectionQualityEvent||(e.ConnectionQualityEvent={})),(function(n){n.JMethod="JMethod",n.ConnectionMethod="ConnectionMethod",n.ConferenceMethod="ConferenceMethod",n.TrackMethod="TrackMethod"})(e.MethodsNameSpace||(e.MethodsNameSpace={})),e.MeetEvents={ConnectionEvent:s,ConferenceEvent:E,TrackEvent:C,ConnectionQualityEvent:_},e.MeetMethods={JMethod:n,ConnectionMethod:t,ConferenceMethod:o,TrackMethod:c}},465,[]);
__d(function(g,r,i,a,m,e,d){var n=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.meetingHelper=void 0;var o=n(r(d[1])),t=n(r(d[2])),c=n(r(d[3])),s=n(r(d[4])),l=r(d[5]),u=n(r(d[6])),f=n(r(d[7])),C=r(d[8]),E=n(r(d[9])),v=n(r(d[10]));function h(n,o){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,c)}return t}function T(n){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?h(Object(t),!0).forEach(function(o){(0,c.default)(n,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(t,o))})}return n}var p=new(function n(){var c=this;(0,s.default)(this,n),this.connection=null,this.prevConnection=null,this.hasError=!1,this.room=null,this.connected=!1,this.connecting=!1,this.retryTimes=0,this.connectionCallbacks={},this.onTrackChange=function(n,o){var t=o.stream.id,c=(o.getId(),o.type),s='video'===c?o.videoType:'',l=o.isLocal(),u=o.stream.toURL(),f=o.getTrackId()||'',v=o.isMuted(),h={streamId:t,streamUrl:u,id:f,trackId:f,participantId:o.ownerEndpointId||'',kind:c,videoType:s,isLocal:l,muted:v};console.log("\ud83e\udd81 ["+(new Date).toLocaleString()+"] [Track removed]",o.getTrackId());var T='add'===n?C.ConferenceEvent.TRACK_ADDED:C.ConferenceEvent.TRACK_REMOVED;E.default.sendConferenceMsg(T,h)},this.conferenceListeners=[],this.connectionListeners=[],this.init=function(n){if(!c.connected&&!c.connecting)try{u.default.setLogLevel(u.default.logLevels.ERROR),console.log('[connection]Jmeet init'),u.default.init(T(T({},f.default),n)),E.default.sendConnectMsg(C.ConnectionEvent.CONNECTION_INIT)}catch(n){c.hasError=!0}},this.connect=function(n,o){var s;return t.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(!c.connected&&!c.connecting){t.next=2;break}return t.abrupt("return");case 2:try{console.log('[connection]try to connect.',n),c.connecting=!0,s=new u.default.JitsiConnection(null,n,T(T({},f.default),o)),c.prevConnection=c.connection,c.connection=s,c.connectionListeners.forEach(function(n){var o=n.evt,t=n.listener;s.addEventListener(o,t)}),s.connect()}catch(n){c.connecting=!1,console.log('[connection]setup connection error:',n)}case 3:case"end":return t.stop()}},null,null,null,Promise)},this.disconnect=function(){c.connection?c.connection.disconnect():console.log('[connection]can not find connection.')},this.destroy=function(){return t.default.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,c.room){n.next=4;break}return console.error('[connection]can not find the room'),n.abrupt("return");case 4:c.conferenceListeners.forEach(function(n){if(c.room){var o=n.evt,t=n.listener;c.room.off(o,t),c.onCustomCommandRegister("nativeCommand",'remove')}}),c.room.leave(),console.log('[connection]prev room has been destroyed.'),c.connection&&c.connectionListeners.forEach(function(n){var o=n.evt,t=n.listener;c.connection&&c.connection.removeEventListener(o,t)}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log('[conference]try to destroy conference but error:',n.t0);case 13:case"end":return n.stop()}},null,null,[[0,10]],Promise)},this.quit=function(){var n;return t.default.async(function(o){for(;;)switch(o.prev=o.next){case 0:c.room?(c.destroy(),console.log('[connection]quit this room.'),null==(n=c.connection)||n.xmpp.disconnect(),c.connected=!1,c.connection=null,c.room=null):(c.connected=!1,c.connection=null,c.room=null,console.warn('[connection]quit room but can not find the room.'));case 1:case"end":return o.stop()}},null,null,null,Promise)},this.onConnectionEstablished=function(){return t.default.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(c.connection){n.next=3;break}return console.log('[connection]can not find connection.'),n.abrupt("return");case 3:console.log('[connection]room connection established.'),E.default.sendConnectMsg(C.ConnectionEvent.CONNECTION_ESTABLISHED),c.eventEmitter.emit(u.default.events.connection.CONNECTION_ESTABLISHED);case 6:case"end":return n.stop()}},null,null,null,Promise)},this.createLocalTracks=function(n){var o,c;return t.default.async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.default.awrap(u.default.createLocalTracks(n));case 2:(o=s.sent).length&&(c=o.map(function(n){return n.getTrackId()&&v.default.registerTrack(n),n.stream?n.stream.toURL():''}),E.default.sendTrackMsg(C.TrackEvent.LOCAL_TRACK_CREATED,{urls:c}));case 4:case"end":return s.stop()}},null,null,null,Promise)},this.onConnectionFailed=function(){console.log('[connection]room connection failed.'),c.connected=!1,c.connecting=!1,E.default.sendConnectMsg(C.ConnectionEvent.CONNECTION_FAILED)},this.onConnectionDisconnected=function(){console.log('[connection]room connection disconnected.'),c.connected=!1,c.connecting=!1,E.default.sendConnectMsg(C.ConnectionEvent.CONNECTION_DISCONNECTED)},this.joinOrCreateRoom=function(n){var o=n.meetingId,t=n.statisticsId,s=n.statisticsDisplayName;console.log('[conference]on joinOrCreateRoom .',o,t,s);try{if(!c.connection)return void console.warn('[conference]can not find connection when create conference');c.room=c.connection.initJitsiConference(o,{statisticsId:t,statisticsDisplayName:s}),c.room&&(c.conferenceListeners.forEach(function(n){var o=n.evt,t=n.listener;c.room.on(o,t)}),c.onCustomCommandRegister("nativeCommand",'add'),c.room.setDisplayName(s)),c.room.join('')}catch(n){console.log('[conference]join room error',n)}},this.onConferenceJoined=function(){c.room?(c.connecting=!1,c.connected=!0,console.log('[conference]on conference joined.'),E.default.sendConferenceMsg(C.ConferenceEvent.CONFERENCE_JOINED,{connected:!0})):console.warn('[connection]can not find the room')},this.onConferenceFailed=function(){for(var n,o=arguments.length,t=new Array(o),s=0;s<o;s++)t[s]=arguments[s];(n=console).error.apply(n,["\ud83d\udea8\ud83d\udea8\ud83d\udea8\ud83e\udd8a\ud83e\udd8a\ud83e\udd8a "+(new Date).toLocaleString()+" [onConferenceFailed]"].concat(t)),c.connecting=!1,c.connected=!1,E.default.sendConferenceMsg(C.ConferenceEvent.CONFERENCE_FAILED,{connected:!1})},this.getReadableUserinfo=function(n){var o=T({},n);return delete o._conference,delete o._tracks,Object.keys(o).forEach(function(n){if(n.startsWith('_')){var t=n.slice(1);o[t]=o[n],delete o[n]}}),o},this.onUserJoined=function(n,o){var t=c.getReadableUserinfo(o);console.log("\u2620\ufe0f\ud83e\udd8a\ud83e\udd8a\ud83e\udd8a "+(new Date).toLocaleString()+" >>> USER JOINED",t),E.default.sendConferenceMsg(C.ConferenceEvent.USER_JOINED,{info:t})},this.onUserLeft=function(n,o){var t=c.getReadableUserinfo(o);console.log("\u2620\ufe0f\ud83e\udd8a\ud83e\udd8a\ud83e\udd8a "+(new Date).toLocaleString()+" >>> USER LEFT",t),E.default.sendConferenceMsg(C.ConferenceEvent.USER_LEFT,{info:t})},this.onTrackMuteChanged=function(n){if('audio'===n.type){n.track;var o=n.getTrackId(),t=n.isMuted();console.log("\ud83e\udd81 ["+(new Date).toLocaleString()+"] MUTE CHANGED ",t),v.default.sendMuteStatus(o,t)}},this.addTrack=function(n){var o=n.trackId,t=v.default.getTrack(o);console.log("\ud83e\udd81 ["+(new Date).toLocaleString()+"] [ADD TRACK]",o),c.room&&t?c.room.addTrack(t):console.error("\ud83d\udea8\ud83d\udea8\ud83d\udea8\ud83e\udd8a\ud83e\udd8a\ud83e\udd8a "+(new Date).toLocaleString()+" Invilid track Id")},this.sendCommand=function(n){c.room?(console.log('[command] send command: ',n,typeof n),c.room.sendCommand("nativeCommand",{value:n})):console.warn('[connection]can not find the room')},this.sendCommandOnce=function(n){c.room?(console.log('[command] send command once: ',n,typeof n),c.room.sendCommandOnce("nativeCommand",{value:n})):console.warn('[connection]can not find the room')},this.onTrackAdded=function(n){console.log("\ud83e\udd81 ["+(new Date).toLocaleString()+"] [TRACK_REMOVED]",n.getTrackId()),c.onTrackChange('add',n)},this.onTrackRemoved=function(n){c.onTrackChange('remove',n),console.log("\ud83e\udd81 ["+(new Date).toLocaleString()+"] [TRACK_ADDED]",n.getTrackId())},this.onAudioLevelChanged=function(n,o){E.default.sendConferenceMsg(C.ConferenceEvent.TRACK_AUDIO_LEVEL_CHANGED,{participantId:n,level:o})},this.onRemoteNetworkStatusChanged=function(n,o){E.default.sendConnectMsg(C.ConnectionQualityEvent.REMOTE_STATS_UPDATED,{id:n,stats:o})},this.onLocalNetworkStatusChanged=function(n){E.default.sendConnectMsg(C.ConnectionQualityEvent.LOCAL_STATS_UPDATED,{stats:n})},this.onCustomCommandRegister=function(n,o){c.room?'add'===o?c.room.addCommandListener("nativeCommand",c.onCustomCommandMsgHandler):c.room.removeCommandListener("nativeCommand",c.onCustomCommandMsgHandler):console.warn('[connection]can not find the room')},this.onCustomCommandMsgHandler=function(n){var o=n.value;console.log('[command]on custom command msg handler: ',o),E.default.sendCommandMsg({data:o})},this.eventEmitter=new l.EventEmitter2,this.connectionOption=(0,o.default)(f.default,{hosts:{domain:'meet.abcpen.com',muc:'conference.meet.abcpen.com',focus:'focus.meet.abcpen.com'},websocket:'wss://meet.abcpen.com/xmpp-websocket',enableP2P:!1,serviceUrl:'https://meet.abcpen.com/http-bind',useStunTurn:!0,ignoreStartMuted:!1}),this.conferenceListeners=[{evt:u.default.events.conference.TRACK_ADDED,listener:this.onTrackAdded},{evt:u.default.events.conference.TRACK_REMOVED,listener:this.onTrackRemoved},{evt:C.ConferenceEvent.CONFERENCE_JOINED,listener:this.onConferenceJoined},{evt:C.ConferenceEvent.CONFERENCE_FAILED,listener:this.onConferenceFailed},{evt:C.ConferenceEvent.USER_JOINED,listener:this.onUserJoined},{evt:C.ConferenceEvent.USER_LEFT,listener:this.onUserLeft},{evt:C.ConferenceEvent.TRACK_MUTE_CHANGED,listener:this.onTrackMuteChanged},{evt:C.ConferenceEvent.TRACK_AUDIO_LEVEL_CHANGED,listener:this.onAudioLevelChanged}],this.connectionListeners=[{evt:C.ConnectionEvent.CONNECTION_ESTABLISHED,listener:this.onConnectionEstablished},{evt:C.ConnectionEvent.CONNECTION_DISCONNECTED,listener:this.onConnectionDisconnected},{evt:C.ConnectionEvent.CONNECTION_FAILED,listener:this.onConnectionFailed},{evt:C.ConnectionQualityEvent.LOCAL_STATS_UPDATED,listener:this.onLocalNetworkStatusChanged},{evt:C.ConnectionQualityEvent.REMOTE_STATS_UPDATED,listener:this.onRemoteNetworkStatusChanged}]});e.meetingHelper=p},466,[1,16,111,54,29,467,468,472,465,473,474]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);!(function(n){var s=Object.hasOwnProperty,o=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},l='object'==typeof process&&'function'==typeof process.nextTick,f='function'==typeof Symbol,h='object'==typeof Reflect,c='function'==typeof setImmediate?setImmediate:setTimeout,u=f?h&&'function'==typeof Reflect.ownKeys?Reflect.ownKeys:function(t){var n=Object.getOwnPropertyNames(t);return n.push.apply(n,Object.getOwnPropertySymbols(t)),n}:Object.keys;function p(){this._events={},this._conf&&v.call(this,this._conf)}function v(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),t.maxListeners!==n&&(this._maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this._newListener=t.newListener),t.removeListener&&(this._removeListener=t.removeListener),t.verboseMemoryLeak&&(this.verboseMemoryLeak=t.verboseMemoryLeak),t.ignoreErrors&&(this.ignoreErrors=t.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function y(t,n){var s="(node) warning: possible EventEmitter memory leak detected. "+t+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(s+=' Event name: '+n+'.'),'undefined'!=typeof process&&process.emitWarning){var o=new Error(s);o.name='MaxListenersExceededWarning',o.emitter=this,o.count=t,process.emitWarning(o)}else console.error(s),console.trace&&console.trace()}var _=function(t,n,s){var o=arguments.length;switch(o){case 0:return[];case 1:return[t];case 2:return[t,n];case 3:return[t,n,s];default:for(var l=new Array(o);o--;)l[o]=arguments[o];return l}};function b(t,s){for(var o={},l=t.length,f=s?value.length:0,h=0;h<l;h++)o[t[h]]=h<f?s[h]:n;return o}function w(t,n,s){var o,l;if(this._emitter=t,this._target=n,this._listeners={},this._listenersCount=0,(s.on||s.off)&&(o=s.on,l=s.off),n.addEventListener?(o=n.addEventListener,l=n.removeEventListener):n.addListener?(o=n.addListener,l=n.removeListener):n.on&&(o=n.on,l=n.off),!o&&!l)throw Error('target does not implement any known event API');if('function'!=typeof o)throw TypeError('on method must be a function');if('function'!=typeof l)throw TypeError('off method must be a function');this._on=o,this._off=l;var f=t._observers;f?f.push(this):t._observers=[this]}function L(o,l,f,h){var c=t({},l);if(!o)return c;if('object'!=typeof o)throw TypeError('options must be an object');var u,p,v,y=Object.keys(o),_=y.length;function b(t){throw Error('Invalid "'+u+'" option value'+(t?'. Reason: '+t:''))}for(var w=0;w<_;w++){if(u=y[w],!h&&!s.call(l,u))throw Error('Unknown "'+u+'" option');(p=o[u])!==n&&(v=f[u],c[u]=v?v(p,b):p)}return c}function E(t,n){return'function'==typeof t&&t.hasOwnProperty('prototype')||n('value must be a constructor'),t}function k(t){var n='value must be type of '+t.join('|'),s=t.length,o=t[0],l=t[1];return 1===s?function(t,s){if(typeof t===o)return t;s(n)}:2===s?function(t,s){var f=typeof t;if(f===o||f===l)return t;s(n)}:function(o,l){for(var f=typeof o,h=s;h-- >0;)if(f===t[h])return o;l(n)}}t(w.prototype,{subscribe:function(t,n,s){var o=this,l=this._target,f=this._emitter,h=this._listeners,c=function(){var o=_.apply(null,arguments),h={data:o,name:n,original:t};s?!1!==s.call(l,h)&&f.emit.apply(f,[h.name].concat(o)):f.emit.apply(f,[n].concat(o))};if(h[t])throw Error('Event \''+t+'\' is already listening');this._listenersCount++,f._newListener&&f._removeListener&&!o._onNewListener?(this._onNewListener=function(s){s===n&&null===h[t]&&(h[t]=c,o._on.call(l,t,c))},f.on('newListener',this._onNewListener),this._onRemoveListener=function(s){s===n&&!f.hasListeners(s)&&h[t]&&(h[t]=null,o._off.call(l,t,c))},h[t]=null,f.on('removeListener',this._onRemoveListener)):(h[t]=c,o._on.call(l,t,c))},unsubscribe:function(t){var n,s,o,l=this,f=this._listeners,h=this._emitter,c=this._off,p=this._target;if(t&&'string'!=typeof t)throw TypeError('event must be a string');function v(){l._onNewListener&&(h.off('newListener',l._onNewListener),h.off('removeListener',l._onRemoveListener),l._onNewListener=null,l._onRemoveListener=null);var t=A.call(h,l);h._observers.splice(t,1)}if(t){if(!(n=f[t]))return;c.call(p,t,n),delete f[t],--this._listenersCount||v()}else{for(o=(s=u(f)).length;o-- >0;)t=s[o],c.call(p,t,f[t]);this._listeners={},this._listenersCount=0,v()}}});var j=k(['function']),T=k(['object','function']);function x(t,n,s){var o,l,f,h=0,c=new t(function(u,p,v){function y(){l&&(l=null),h&&(clearTimeout(h),h=0)}s=L(s,{timeout:0,overload:!1},{timeout:function(t,n){return('number'!=typeof(t*=1)||t<0||!Number.isFinite(t))&&n('timeout must be a positive number'),t}});var _=function(t){y(),u(t)},b=function(t){y(),p(t)};(o=!s.overload&&'function'==typeof t.prototype.cancel&&'function'==typeof v)?n(_,b,v):(l=[function(t){b(t||Error('canceled'))}],n(_,b,function(t){if(f)throw Error('Unable to subscribe on cancel event asynchronously');if('function'!=typeof t)throw TypeError('onCancel callback must be a function');l.push(t)}),f=!0),s.timeout>0&&(h=setTimeout(function(){var t=Error('timeout');h=0,c.cancel(t),p(t)},s.timeout))});return o||(c.cancel=function(t){if(l){for(var n=l.length,s=1;s<n;s++)l[s](t);l[0](t),l=null}}),c}function A(t){var n=this._observers;if(!n)return-1;for(var s=n.length,o=0;o<s;o++)if(n[o]._target===t)return o;return-1}function P(t,n,s,o,l){if(!s)return null;if(0===o){var f=typeof n;if('string'===f){var h,c,p=0,v=0,y=this.delimiter,_=y.length;if(-1!==(c=n.indexOf(y))){h=new Array(5);do{h[p++]=n.slice(v,c),v=c+_}while(-1!==(c=n.indexOf(y,v)));h[p++]=n.slice(v),n=h,l=p}else n=[n],l=1}else'object'===f?l=n.length:(n=[n],l=1)}var b,w,L,E,k,j,T,x=null,A=n[o],O=n[o+1];if(o===l&&s._listeners)return'function'==typeof s._listeners?(t&&t.push(s._listeners),[s]):(t&&t.push.apply(t,s._listeners),[s]);if('*'===A){for(c=(j=u(s)).length;c-- >0;)'_listeners'!==(b=j[c])&&(T=P(t,n,s[b],o+1,l))&&(x?x.push.apply(x,T):x=T);return x}if('**'===A){for((k=o+1===l||o+2===l&&'*'===O)&&s._listeners&&(x=P(t,n,s,l,l)),c=(j=u(s)).length;c-- >0;)'_listeners'!==(b=j[c])&&('*'===b||'**'===b?(s[b]._listeners&&!k&&(T=P(t,n,s[b],l,l))&&(x?x.push.apply(x,T):x=T),T=P(t,n,s[b],o,l)):T=P(t,n,s[b],b===O?o+2:o,l),T&&(x?x.push.apply(x,T):x=T));return x}if(s[A]&&(x=P(t,n,s[A],o+1,l)),(w=s['*'])&&P(t,n,w,o+1,l),L=s['**'])if(o<l)for(L._listeners&&P(t,n,L,l,l),c=(j=u(L)).length;c-- >0;)'_listeners'!==(b=j[c])&&(b===O?P(t,n,L[b],o+2,l):b===A?P(t,n,L[b],o+1,l):((E={})[b]=L[b],P(t,n,{'**':E},o+1,l)));else L._listeners?P(t,n,L,l,l):L['*']&&L['*']._listeners&&P(t,n,L['*'],l,l);return x}function O(t,n){var s,o,l=0,f=0,h=this.delimiter,c=h.length;if('string'==typeof t)if(-1!==(s=t.indexOf(h))){o=new Array(5);do{o[l++]=t.slice(f,s),f=s+c}while(-1!==(s=t.indexOf(h,f)));o[l++]=t.slice(f)}else o=[t],l=1;else o=t,l=t.length;if(l>1)for(s=0;s+1<l;s++)if('**'===o[s]&&'**'===o[s+1])return;var u,p=this.listenerTree;for(s=0;s<l;s++)if(p=p[u=o[s]]||(p[u]={}),s===l-1)return p._listeners?('function'==typeof p._listeners&&(p._listeners=[p._listeners]),p._listeners.push(n),!p._listeners.warned&&this._maxListeners>0&&p._listeners.length>this._maxListeners&&(p._listeners.warned=!0,y.call(this,p._listeners.length,u))):p._listeners=n,!0;return!0}function N(t,n,s,o){for(var l,f,h,c,p=u(t),v=p.length,y=t._listeners;v-- >0;)l=t[f=p[v]],h='_listeners'===f?s:s?s.concat(f):[f],c=o||'symbol'==typeof f,y&&n.push(c?h:h.join(this.delimiter)),'object'==typeof l&&N.call(this,l,n,h,c);return n}function M(t){for(var n,s,o,l=u(t),f=l.length;f-- >0;)(n=t[s=l[f]])&&(o=!0,'_listeners'===s||M(n)||delete t[s]);return o}function F(t,n,s){this.emitter=t,this.event=n,this.listener=s}function R(t,s,o){if(!0===o)h=!0;else if(!1===o)f=!0;else{if(!o||'object'!=typeof o)throw TypeError('options should be an object or true');var f=o.async,h=o.promisify,u=o.nextTick,p=o.objectify}if(f||u||h){var v=s,y=s._origin||s;if(u&&!l)throw Error('process.nextTick is not supported');h===n&&(h='AsyncFunction'===s.constructor.name),(s=function(){var t=arguments,n=this,s=this.event;return h?u?Promise.resolve():new Promise(function(t){c(t)}).then(function(){return n.event=s,v.apply(n,t)}):(u?process.nextTick:c)(function(){n.event=s,v.apply(n,t)})})._async=!0,s._origin=y}return[s,p?new F(this,t,s):this]}function C(t){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,v.call(this,t)}F.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},C.EventEmitter2=C,C.prototype.listenTo=function(t,s,l){if('object'!=typeof t)throw TypeError('target musts be an object');var f=this;function h(n){if('object'!=typeof n)throw TypeError('events must be an object');var s,o=l.reducers,h=A.call(f,t);s=-1===h?new w(f,t,l):f._observers[h];for(var c,p=u(n),v=p.length,y='function'==typeof o,_=0;_<v;_++)c=p[_],s.subscribe(c,n[c]||c,y?o:o&&o[c])}return l=L(l,{on:n,off:n,reducers:n},{on:j,off:j,reducers:T}),o(s)?h(b(s)):h('string'==typeof s?b(s.split(/\s+/)):s),this},C.prototype.stopListeningTo=function(t,n){var s=this._observers;if(!s)return!1;var o,l=s.length,f=!1;if(t&&'object'!=typeof t)throw TypeError('target should be an object');for(;l-- >0;)o=s[l],t&&o._target!==t||(o.unsubscribe(n),f=!0);return f},C.prototype.delimiter='.',C.prototype.setMaxListeners=function(t){t!==n&&(this._maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t)},C.prototype.getMaxListeners=function(){return this._maxListeners},C.prototype.event='',C.prototype.once=function(t,n,s){return this._once(t,n,!1,s)},C.prototype.prependOnceListener=function(t,n,s){return this._once(t,n,!0,s)},C.prototype._once=function(t,n,s,o){return this._many(t,1,n,s,o)},C.prototype.many=function(t,n,s,o){return this._many(t,n,s,!1,o)},C.prototype.prependMany=function(t,n,s,o){return this._many(t,n,s,!0,o)},C.prototype._many=function(t,n,s,o,l){var f=this;if('function'!=typeof s)throw new Error('many only accepts instances of Function');function h(){return 0==--n&&f.off(t,h),s.apply(this,arguments)}return h._origin=s,this._on(t,h,o,l)},C.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||p.call(this);var t,n,s,o,l,h,c=arguments[0],u=this.wildcard;if('newListener'===c&&!this._newListener&&!this._events.newListener)return!1;if(u&&(t=c,'newListener'!==c&&'removeListener'!==c&&'object'==typeof c)){if(s=c.length,f)for(o=0;o<s;o++)if('symbol'==typeof c[o]){h=!0;break}h||(c=c.join(this.delimiter))}var v,y=arguments.length;if(this._all&&this._all.length)for(o=0,s=(v=this._all.slice()).length;o<s;o++)switch(this.event=c,y){case 1:v[o].call(this,c);break;case 2:v[o].call(this,c,arguments[1]);break;case 3:v[o].call(this,c,arguments[1],arguments[2]);break;default:v[o].apply(this,arguments)}if(u)v=[],P.call(this,v,t,this.listenerTree,0,s);else{if('function'==typeof(v=this._events[c])){switch(this.event=c,y){case 1:v.call(this);break;case 2:v.call(this,arguments[1]);break;case 3:v.call(this,arguments[1],arguments[2]);break;default:for(n=new Array(y-1),l=1;l<y;l++)n[l-1]=arguments[l];v.apply(this,n)}return!0}v&&(v=v.slice())}if(v&&v.length){if(y>3)for(n=new Array(y-1),l=1;l<y;l++)n[l-1]=arguments[l];for(o=0,s=v.length;o<s;o++)switch(this.event=c,y){case 1:v[o].call(this);break;case 2:v[o].call(this,arguments[1]);break;case 3:v[o].call(this,arguments[1],arguments[2]);break;default:v[o].apply(this,n)}return!0}if(!this.ignoreErrors&&!this._all&&'error'===c)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},C.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||p.call(this);var t,n,s,o,l,h,c=arguments[0],u=this.wildcard;if('newListener'===c&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(u&&(t=c,'newListener'!==c&&'removeListener'!==c&&'object'==typeof c)){if(o=c.length,f)for(l=0;l<o;l++)if('symbol'==typeof c[l]){n=!0;break}n||(c=c.join(this.delimiter))}var v,y=[],_=arguments.length;if(this._all)for(l=0,o=this._all.length;l<o;l++)switch(this.event=c,_){case 1:y.push(this._all[l].call(this,c));break;case 2:y.push(this._all[l].call(this,c,arguments[1]));break;case 3:y.push(this._all[l].call(this,c,arguments[1],arguments[2]));break;default:y.push(this._all[l].apply(this,arguments))}if(u?(v=[],P.call(this,v,t,this.listenerTree,0)):v=this._events[c],'function'==typeof v)switch(this.event=c,_){case 1:y.push(v.call(this));break;case 2:y.push(v.call(this,arguments[1]));break;case 3:y.push(v.call(this,arguments[1],arguments[2]));break;default:for(s=new Array(_-1),h=1;h<_;h++)s[h-1]=arguments[h];y.push(v.apply(this,s))}else if(v&&v.length){if(v=v.slice(),_>3)for(s=new Array(_-1),h=1;h<_;h++)s[h-1]=arguments[h];for(l=0,o=v.length;l<o;l++)switch(this.event=c,_){case 1:y.push(v[l].call(this));break;case 2:y.push(v[l].call(this,arguments[1]));break;case 3:y.push(v[l].call(this,arguments[1],arguments[2]));break;default:y.push(v[l].apply(this,s))}}else if(!this.ignoreErrors&&!this._all&&'error'===c)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(y)},C.prototype.on=function(t,n,s){return this._on(t,n,!1,s)},C.prototype.prependListener=function(t,n,s){return this._on(t,n,!0,s)},C.prototype.onAny=function(t){return this._onAny(t,!1)},C.prototype.prependAny=function(t){return this._onAny(t,!0)},C.prototype.addListener=C.prototype.on,C.prototype._onAny=function(t,n){if('function'!=typeof t)throw new Error('onAny only accepts instances of Function');return this._all||(this._all=[]),n?this._all.unshift(t):this._all.push(t),this},C.prototype._on=function(t,s,o,l){if('function'==typeof t)return this._onAny(t,s),this;if('function'!=typeof s)throw new Error('on only accepts instances of Function');this._events||p.call(this);var f,h=this;return l!==n&&(s=(f=R.call(this,t,s,l))[0],h=f[1]),this._newListener&&this.emit('newListener',t,s),this.wildcard?(O.call(this,t,s),h):(this._events[t]?('function'==typeof this._events[t]&&(this._events[t]=[this._events[t]]),o?this._events[t].unshift(s):this._events[t].push(s),!this._events[t].warned&&this._maxListeners>0&&this._events[t].length>this._maxListeners&&(this._events[t].warned=!0,y.call(this,this._events[t].length,t))):this._events[t]=s,h)},C.prototype.off=function(t,n){if('function'!=typeof n)throw new Error('removeListener only takes instances of Function');var s,l=[];if(this.wildcard){var f='string'==typeof t?t.split(this.delimiter):t.slice();if(!(l=P.call(this,null,f,this.listenerTree,0)))return this}else{if(!this._events[t])return this;s=this._events[t],l.push({_listeners:s})}for(var h=0;h<l.length;h++){var c=l[h];if(s=c._listeners,o(s)){for(var u=-1,p=0,v=s.length;p<v;p++)if(s[p]===n||s[p].listener&&s[p].listener===n||s[p]._origin&&s[p]._origin===n){u=p;break}if(u<0)continue;return this.wildcard?c._listeners.splice(u,1):this._events[t].splice(u,1),0===s.length&&(this.wildcard?delete c._listeners:delete this._events[t]),this._removeListener&&this.emit("removeListener",t,n),this}(s===n||s.listener&&s.listener===n||s._origin&&s._origin===n)&&(this.wildcard?delete c._listeners:delete this._events[t],this._removeListener&&this.emit("removeListener",t,n))}return this.listenerTree&&M(this.listenerTree),this},C.prototype.offAny=function(t){var n,s=0,o=0;if(t&&this._all&&this._all.length>0){for(s=0,o=(n=this._all).length;s<o;s++)if(t===n[s])return n.splice(s,1),this._removeListener&&this.emit("removeListenerAny",t),this}else{if(n=this._all,this._removeListener)for(s=0,o=n.length;s<o;s++)this.emit("removeListenerAny",n[s]);this._all=[]}return this},C.prototype.removeListener=C.prototype.off,C.prototype.removeAllListeners=function(t){if(t===n)return!this._events||p.call(this),this;if(this.wildcard){var s,o=P.call(this,null,t,this.listenerTree,0);if(!o)return this;for(s=0;s<o.length;s++)o[s]._listeners=null;this.listenerTree&&M(this.listenerTree)}else this._events&&(this._events[t]=null);return this},C.prototype.listeners=function(t){var s,o,l,f,h,c=this._events;if(t===n){if(this.wildcard)throw Error('event name required for wildcard emitter');if(!c)return[];for(f=(s=u(c)).length,l=[];f-- >0;)'function'==typeof(o=c[s[f]])?l.push(o):l.push.apply(l,o);return l}if(this.wildcard){if(!(h=this.listenerTree))return[];var p=[],v='string'==typeof t?t.split(this.delimiter):t.slice();return P.call(this,p,v,h,0),p}return c&&(o=c[t])?'function'==typeof o?[o]:o:[]},C.prototype.eventNames=function(t){var n=this._events;return this.wildcard?N.call(this,this.listenerTree,[],null,t):n?u(n):[]},C.prototype.listenerCount=function(t){return this.listeners(t).length},C.prototype.hasListeners=function(t){if(this.wildcard){var s=[],o='string'==typeof t?t.split(this.delimiter):t.slice();return P.call(this,s,o,this.listenerTree,0),s.length>0}var l=this._events,f=this._all;return!!(f&&f.length||l&&(t===n?u(l).length:l[t]))},C.prototype.listenersAny=function(){return this._all?this._all:[]},C.prototype.waitFor=function(t,s){var o=this,l=typeof s;return'number'===l?s={timeout:s}:'function'===l&&(s={filter:s}),x((s=L(s,{timeout:0,filter:n,handleError:!1,Promise:Promise,overload:!1},{filter:j,Promise:E})).Promise,function(n,l,f){function h(){var f=s.filter;if(!f||f.apply(o,arguments))if(o.off(t,h),s.handleError){var c=arguments[0];c?l(c):n(_.apply(null,arguments).slice(1))}else n(_.apply(null,arguments))}f(function(){o.off(t,h)}),o._on(t,h,!1)},{timeout:s.timeout,overload:s.overload})};var U=C.prototype;if(Object.defineProperties(C,{defaultMaxListeners:{get:function(){return U._maxListeners},set:function(t){if('number'!=typeof t||t<0||Number.isNaN(t))throw TypeError('n must be a non-negative number');U._maxListeners=t},enumerable:!0},once:{value:function(t,n,s){return x((s=L(s,{Promise:Promise,timeout:0,overload:!1},{Promise:E})).Promise,function(s,o,l){var f;if('function'==typeof t.addEventListener)return f=function(){s(_.apply(null,arguments))},l(function(){t.removeEventListener(n,f)}),void t.addEventListener(n,f,{once:!0});var h,c=function(){h&&t.removeListener('error',h),s(_.apply(null,arguments))};'error'!==n&&(h=function(s){t.removeListener(n,c),o(s)},t.once('error',h)),l(function(){h&&t.removeListener('error',h),t.removeListener(n,c)}),t.once(n,c)},{timeout:s.timeout,overload:s.overload})},writable:!0,configurable:!0}}),Object.defineProperties(U,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),'function'==typeof define&&define.amd)define(function(){return C});else if('object'==typeof e)m.exports=C;else{new Function('','return this')().EventEmitter2=C}})()},467,[16]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.JitsiTrackEvents=e.JitsiTrackErrors=e.JitsiSIPVideoGWStatus=e.JitsiRecordingConstants=e.JitsiParticipantConnectionStatus=e.JitsiMediaDevicesEvents=e.JitsiE2ePingEvents=e.JitsiDetectionEvents=e.JitsiConnectionQualityEvents=e.JitsiConnectionEvents=e.JitsiConnectionErrors=e.JitsiConferenceEvents=e.JitsiConferenceErrors=e.browser=e.analytics=e.default=void 0;var n=t(r(d[1])),s=t(r(d[2])).default;e.default=s;var o=n.default.analytics;e.analytics=o;var c=n.default.util.browser;e.browser=c;var v=n.default.errors.conference;e.JitsiConferenceErrors=v;var u=n.default.events.conference;e.JitsiConferenceEvents=u;var l=n.default.errors.connection;e.JitsiConnectionErrors=l;var f=n.default.events.connection;e.JitsiConnectionEvents=f;var J=n.default.events.connectionQuality;e.JitsiConnectionQualityEvents=J;var E=n.default.events.detection;e.JitsiDetectionEvents=E;var C=n.default.events.e2eping;e.JitsiE2ePingEvents=C;var p=n.default.events.mediaDevices;e.JitsiMediaDevicesEvents=p;var y=n.default.constants.participantConnectionStatus;e.JitsiParticipantConnectionStatus=y;var P=n.default.constants.recording;e.JitsiRecordingConstants=P;var S=n.default.constants.sipVideoGW;e.JitsiSIPVideoGWStatus=S;var k=n.default.errors.track;e.JitsiTrackErrors=k;var D=n.default.events.track;e.JitsiTrackEvents=D},468,[1,469,471]);
__d(function(global,_$$_REQUIRE,_$$_IMPORT_DEFAULT,_$$_IMPORT_ALL,module,exports,_dependencyMap){var _readOnlyError=_$$_REQUIRE(_dependencyMap[0]),_extends=_$$_REQUIRE(_dependencyMap[1]),_get=_$$_REQUIRE(_dependencyMap[2]),_regeneratorRuntime=_$$_REQUIRE(_dependencyMap[3]),_slicedToArray=_$$_REQUIRE(_dependencyMap[4]),_defineProperty=_$$_REQUIRE(_dependencyMap[5]),_assertThisInitialized=_$$_REQUIRE(_dependencyMap[6]),_classCallCheck=_$$_REQUIRE(_dependencyMap[7]),_createClass=_$$_REQUIRE(_dependencyMap[8]),_inherits=_$$_REQUIRE(_dependencyMap[9]),_possibleConstructorReturn=_$$_REQUIRE(_dependencyMap[10]),_getPrototypeOf=_$$_REQUIRE(_dependencyMap[11]),_toConsumableArray=_$$_REQUIRE(_dependencyMap[12]),e,t;function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _createForOfIteratorHelperLoose(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e=window,t=function(){return(function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=146)})([function(e,t){e.exports={ADD_ICE_CANDIDATE_FAILED:"xmpp.add_ice_candidate_failed",AUDIO_MUTED_BY_FOCUS:"xmpp.audio_muted_by_focus",AUTHENTICATION_REQUIRED:"xmpp.authentication_required",BRIDGE_DOWN:"xmpp.bridge_down",CALL_ACCEPTED:"xmpp.callaccepted.jingle",CALL_INCOMING:"xmpp.callincoming.jingle",CALL_ENDED:"xmpp.callended.jingle",CHAT_ERROR_RECEIVED:"xmpp.chat_error_received",CONFERENCE_PROPERTIES_CHANGED:"xmpp.conference_properties_changed",CONNECTION_ESTABLISHED:"xmpp.connection.connected",CONNECTION_FAILED:"xmpp.connection.failed",CONNECTION_INTERRUPTED:"xmpp.connection.interrupted",CONNECTION_RESTORED:"xmpp.connection.restored",CONNECTION_ICE_FAILED:"xmpp.connection.ice.failed",CONNECTION_STATUS_CHANGED:"xmpp.connection.status.changed",DISPLAY_NAME_CHANGED:"xmpp.display_name_changed",EMUC_ROOM_ADDED:"xmpp.emuc_room_added",EMUC_ROOM_REMOVED:"xmpp.emuc_room_removed",ETHERPAD:"xmpp.etherpad",FOCUS_DISCONNECTED:"xmpp.focus_disconnected",FOCUS_LEFT:"xmpp.focus_left",GRACEFUL_SHUTDOWN:"xmpp.graceful_shutdown",ICE_RESTARTING:"rtc.ice_restarting",ICE_RESTART_SUCCESS:"rtc.ice_restart_success",KICKED:"xmpp.kicked",LOCAL_ROLE_CHANGED:"xmpp.localrole_changed",MEETING_ID_SET:"xmpp.meeting_id_set",MESSAGE_RECEIVED:"xmpp.message_received",INVITE_MESSAGE_RECEIVED:"xmpp.invite_message_received",PRIVATE_MESSAGE_RECEIVED:"xmpp.private_message_received",MUC_MEMBER_BOT_TYPE_CHANGED:"xmpp.muc_member_bot_type_changed",MUC_DESTROYED:"xmpp.muc_destroyed",MUC_JOINED:"xmpp.muc_joined",MUC_MEMBER_JOINED:"xmpp.muc_member_joined",MUC_MEMBER_LEFT:"xmpp.muc_member_left",MUC_LOBBY_MEMBER_JOINED:"xmpp.muc_lobby_member_joined",MUC_LOBBY_MEMBER_UPDATED:"xmpp.muc_lobby_member_updated",MUC_LOBBY_MEMBER_LEFT:"xmpp.muc_lobby_member_left",MUC_DENIED_ACCESS:"xmpp.muc_denied access",MUC_LEFT:"xmpp.muc_left",MUC_ROLE_CHANGED:"xmpp.muc_role_changed",MUC_LOCK_CHANGED:"xmpp.muc_lock_changed",MUC_MEMBERS_ONLY_CHANGED:"xmpp.muc_members_only_changed",PARTICIPANT_AUDIO_MUTED:"xmpp.audio_muted",PARTICIPANT_VIDEO_MUTED:"xmpp.video_muted",PARTICIPANT_VIDEO_TYPE_CHANGED:"xmpp.video_type",PARTCIPANT_FEATURES_CHANGED:"xmpp.partcipant_features_changed",PASSWORD_REQUIRED:"xmpp.password_required",PHONE_NUMBER_CHANGED:"conference.phoneNumberChanged",PRESENCE_RECEIVED:"xmpp.presence_received",PRESENCE_STATUS:"xmpp.presence_status",PROMPT_FOR_LOGIN:"xmpp.prompt_for_login",READY_TO_JOIN:"xmpp.ready_to_join",RECORDER_STATE_CHANGED:"xmpp.recorderStateChanged",REMOTE_STATS:"xmpp.remote_stats",RENEGOTIATION_FAILED:"xmpp.renegotiation_failed",RESERVATION_ERROR:"xmpp.room_reservation_error",ROOM_CONNECT_ERROR:"xmpp.room_connect_error",ROOM_CONNECT_NOT_ALLOWED_ERROR:"xmpp.room_connect_error.not_allowed",ROOM_JOIN_ERROR:"xmpp.room_join_error",ROOM_CONNECT_MEMBERS_ONLY_ERROR:"xmpp.room_connect_error.members_only",ROOM_MAX_USERS_ERROR:"xmpp.room_max_users_error",SENDING_CHAT_MESSAGE:"xmpp.sending_chat_message",SENDING_PRIVATE_CHAT_MESSAGE:"xmpp.sending_private_chat_message",SESSION_ACCEPT_TIMEOUT:"xmpp.session_accept_timeout",SPEAKER_STATS_RECEIVED:"xmpp.speaker_stats_received",CONFERENCE_TIMESTAMP_RECEIVED:"xmpp.conference_timestamp_received",START_MUTED_FROM_FOCUS:"xmpp.start_muted_from_focus",SUBJECT_CHANGED:"xmpp.subject_changed",SUSPEND_DETECTED:"xmpp.suspend_detected",TRANSCRIPTION_STATUS_CHANGED:"xmpp.transcription_status_changed",TRANSPORT_INFO:"xmpp.transportinfo.jingle",VIDEO_SIP_GW_AVAILABILITY_CHANGED:"xmpp.videoSIPGWAvailabilityChanged",VIDEO_SIP_GW_SESSION_STATE_CHANGED:"xmpp.videoSIPGWSessionStateChanged",ICE_CONNECTION_STATE_CHANGED:"xmpp.ice_connection_state_changed",JSON_MESSAGE_RECEIVED:"xmmp.json_message_received"}},function(e,t,n){"use strict";n.r(t),n.d(t,"AUDIO_INPUT_STATE_CHANGE",function(){return r}),n.d(t,"AUTH_STATUS_CHANGED",function(){return i}),n.d(t,"BEFORE_STATISTICS_DISPOSED",function(){return o}),n.d(t,"CONFERENCE_ERROR",function(){return a}),n.d(t,"CONFERENCE_FAILED",function(){return s}),n.d(t,"CONFERENCE_JOINED",function(){return c}),n.d(t,"CONFERENCE_LEFT",function(){return u}),n.d(t,"CONNECTION_ESTABLISHED",function(){return d}),n.d(t,"CONNECTION_INTERRUPTED",function(){return l}),n.d(t,"CONNECTION_RESTORED",function(){return h}),n.d(t,"DATA_CHANNEL_OPENED",function(){return p}),n.d(t,"DISPLAY_NAME_CHANGED",function(){return f}),n.d(t,"DOMINANT_SPEAKER_CHANGED",function(){return m}),n.d(t,"CONFERENCE_CREATED_TIMESTAMP",function(){return v}),n.d(t,"DTMF_SUPPORT_CHANGED",function(){return g}),n.d(t,"ENDPOINT_MESSAGE_RECEIVED",function(){return _}),n.d(t,"JVB121_STATUS",function(){return y}),n.d(t,"KICKED",function(){return S}),n.d(t,"PARTICIPANT_KICKED",function(){return E}),n.d(t,"LAST_N_ENDPOINTS_CHANGED",function(){return b}),n.d(t,"LOCK_STATE_CHANGED",function(){return C}),n.d(t,"SERVER_REGION_CHANGED",function(){return T}),n.d(t,"_MEDIA_SESSION_STARTED",function(){return R}),n.d(t,"_MEDIA_SESSION_ACTIVE_CHANGED",function(){return A}),n.d(t,"MEMBERS_ONLY_CHANGED",function(){return k}),n.d(t,"MESSAGE_RECEIVED",function(){return I}),n.d(t,"NO_AUDIO_INPUT",function(){return w}),n.d(t,"NOISY_MIC",function(){return P}),n.d(t,"PRIVATE_MESSAGE_RECEIVED",function(){return O}),n.d(t,"PARTICIPANT_CONN_STATUS_CHANGED",function(){return D}),n.d(t,"PARTCIPANT_FEATURES_CHANGED",function(){return N}),n.d(t,"PARTICIPANT_PROPERTY_CHANGED",function(){return M}),n.d(t,"P2P_STATUS",function(){return L}),n.d(t,"PHONE_NUMBER_CHANGED",function(){return x}),n.d(t,"PROPERTIES_CHANGED",function(){return F}),n.d(t,"RECORDER_STATE_CHANGED",function(){return j}),n.d(t,"VIDEO_SIP_GW_AVAILABILITY_CHANGED",function(){return H}),n.d(t,"VIDEO_SIP_GW_SESSION_STATE_CHANGED",function(){return U}),n.d(t,"START_MUTED_POLICY_CHANGED",function(){return J}),n.d(t,"STARTED_MUTED",function(){return B}),n.d(t,"SUBJECT_CHANGED",function(){return G}),n.d(t,"SUSPEND_DETECTED",function(){return V}),n.d(t,"TALK_WHILE_MUTED",function(){return q}),n.d(t,"TRACK_ADDED",function(){return K}),n.d(t,"TRACK_AUDIO_LEVEL_CHANGED",function(){return W}),n.d(t,"TRACK_MUTE_CHANGED",function(){return z}),n.d(t,"TRACK_REMOVED",function(){return $}),n.d(t,"TRANSCRIPTION_STATUS_CHANGED",function(){return Q}),n.d(t,"USER_JOINED",function(){return X}),n.d(t,"USER_LEFT",function(){return Y}),n.d(t,"USER_ROLE_CHANGED",function(){return Z}),n.d(t,"USER_STATUS_CHANGED",function(){return ee}),n.d(t,"BOT_TYPE_CHANGED",function(){return te}),n.d(t,"LOBBY_USER_JOINED",function(){return ne}),n.d(t,"LOBBY_USER_UPDATED",function(){return re}),n.d(t,"LOBBY_USER_LEFT",function(){return ie});var r="conference.audio_input_state_changed",i="conference.auth_status_changed",o="conference.beforeStatisticsDisposed",a="conference.error",s="conference.failed",c="conference.joined",u="conference.left",d="conference.connectionEstablished",l="conference.connectionInterrupted",h="conference.connectionRestored",p="conference.dataChannelOpened",f="conference.displayNameChanged",m="conference.dominantSpeaker",v="conference.createdTimestamp",g="conference.dtmfSupportChanged",_="conference.endpoint_message_received",y="conference.jvb121Status",S="conference.kicked",E="conference.participant_kicked",b="conference.lastNEndpointsChanged",C="conference.lock_state_changed",T="conference.server_region_changed",R="conference.media_session.started",A="conference.media_session.active_changed",k="conference.membersOnlyChanged",I="conference.messageReceived",w="conference.no_audio_input",P="conference.noisy_mic",O="conference.privateMessageReceived",D="conference.participant_conn_status_changed",N="conference.partcipant_features_changed",M="conference.participant_property_changed",L="conference.p2pStatus",x="conference.phoneNumberChanged",F="conference.propertiesChanged",j="conference.recorderStateChanged",H="conference.videoSIPGWAvailabilityChanged",U="conference.videoSIPGWSessionStateChanged",J="conference.start_muted_policy_changed",B="conference.started_muted",G="conference.subjectChanged",V="conference.suspendDetected",q="conference.talk_while_muted",K="conference.trackAdded",W="conference.audioLevelsChanged",z="conference.trackMuteChanged",$="conference.trackRemoved",Q="conference.transcriptionStatusChanged",X="conference.userJoined",Y="conference.userLeft",Z="conference.roleChanged",ee="conference.statusChanged",te="conference.bot_type_changed",ne="conference.lobby.userJoined",re="conference.lobby.userUpdated",ie="conference.lobby.userLeft"},function(e,t,n){(function(t){var n;n=function(){"use strict";var e=void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return(function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}})(e)||(function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)})(e)||(function(){throw new TypeError("Invalid attempt to spread non-iterable instance")})()}var i=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},o=function(e){if("string"!=typeof e)throw new Error("str2binl was passed a non-string");for(var t=[],n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t},a=function(e,t,n,r,o,a){return i((s=i(i(t,e),i(r,a)))<<(c=o)|s>>>32-c,n);var s,c},s=function(e,t,n,r,i,o,s){return a(t&n|~t&r,e,t,i,o,s)},c=function(e,t,n,r,i,o,s){return a(t&r|n&~r,e,t,i,o,s)},u=function(e,t,n,r,i,o,s){return a(t^n^r,e,t,i,o,s)},d=function(e,t,n,r,i,o,s){return a(n^(t|~r),e,t,i,o,s)},l=function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n,r,o,a,l=1732584193,h=-271733879,p=-1732584194,f=271733878,m=0;m<e.length;m+=16)n=l,r=h,o=p,a=f,l=s(l,h,p,f,e[m+0],7,-680876936),f=s(f,l,h,p,e[m+1],12,-389564586),p=s(p,f,l,h,e[m+2],17,606105819),h=s(h,p,f,l,e[m+3],22,-1044525330),l=s(l,h,p,f,e[m+4],7,-176418897),f=s(f,l,h,p,e[m+5],12,1200080426),p=s(p,f,l,h,e[m+6],17,-1473231341),h=s(h,p,f,l,e[m+7],22,-45705983),l=s(l,h,p,f,e[m+8],7,1770035416),f=s(f,l,h,p,e[m+9],12,-1958414417),p=s(p,f,l,h,e[m+10],17,-42063),h=s(h,p,f,l,e[m+11],22,-1990404162),l=s(l,h,p,f,e[m+12],7,1804603682),f=s(f,l,h,p,e[m+13],12,-40341101),p=s(p,f,l,h,e[m+14],17,-1502002290),h=s(h,p,f,l,e[m+15],22,1236535329),l=c(l,h,p,f,e[m+1],5,-165796510),f=c(f,l,h,p,e[m+6],9,-1069501632),p=c(p,f,l,h,e[m+11],14,643717713),h=c(h,p,f,l,e[m+0],20,-373897302),l=c(l,h,p,f,e[m+5],5,-701558691),f=c(f,l,h,p,e[m+10],9,38016083),p=c(p,f,l,h,e[m+15],14,-660478335),h=c(h,p,f,l,e[m+4],20,-405537848),l=c(l,h,p,f,e[m+9],5,568446438),f=c(f,l,h,p,e[m+14],9,-1019803690),p=c(p,f,l,h,e[m+3],14,-187363961),h=c(h,p,f,l,e[m+8],20,1163531501),l=c(l,h,p,f,e[m+13],5,-1444681467),f=c(f,l,h,p,e[m+2],9,-51403784),p=c(p,f,l,h,e[m+7],14,1735328473),h=c(h,p,f,l,e[m+12],20,-1926607734),l=u(l,h,p,f,e[m+5],4,-378558),f=u(f,l,h,p,e[m+8],11,-2022574463),p=u(p,f,l,h,e[m+11],16,1839030562),h=u(h,p,f,l,e[m+14],23,-35309556),l=u(l,h,p,f,e[m+1],4,-1530992060),f=u(f,l,h,p,e[m+4],11,1272893353),p=u(p,f,l,h,e[m+7],16,-155497632),h=u(h,p,f,l,e[m+10],23,-1094730640),l=u(l,h,p,f,e[m+13],4,681279174),f=u(f,l,h,p,e[m+0],11,-358537222),p=u(p,f,l,h,e[m+3],16,-722521979),h=u(h,p,f,l,e[m+6],23,76029189),l=u(l,h,p,f,e[m+9],4,-640364487),f=u(f,l,h,p,e[m+12],11,-421815835),p=u(p,f,l,h,e[m+15],16,530742520),h=u(h,p,f,l,e[m+2],23,-995338651),l=d(l,h,p,f,e[m+0],6,-198630844),f=d(f,l,h,p,e[m+7],10,1126891415),p=d(p,f,l,h,e[m+14],15,-1416354905),h=d(h,p,f,l,e[m+5],21,-57434055),l=d(l,h,p,f,e[m+12],6,1700485571),f=d(f,l,h,p,e[m+3],10,-1894986606),p=d(p,f,l,h,e[m+10],15,-1051523),h=d(h,p,f,l,e[m+1],21,-2054922799),l=d(l,h,p,f,e[m+8],6,1873313359),f=d(f,l,h,p,e[m+15],10,-30611744),p=d(p,f,l,h,e[m+6],15,-1560198380),h=d(h,p,f,l,e[m+13],21,1309151649),l=d(l,h,p,f,e[m+4],6,-145523070),f=d(f,l,h,p,e[m+11],10,-1120210379),p=d(p,f,l,h,e[m+2],15,718787259),h=d(h,p,f,l,e[m+9],21,-343485551),l=i(l,n),h=i(h,r),p=i(p,o),f=i(f,a);return[l,h,p,f]},h={hexdigest:function(e){return(function(e){for(var t="",n=0;n<4*e.length;n++)t+="0123456789abcdef".charAt(e[n>>2]>>n%4*8+4&15)+"0123456789abcdef".charAt(e[n>>2]>>n%4*8&15);return t})(l(o(e),8*e.length))},hash:function(e){return(function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t})(l(o(e),8*e.length))}};function p(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;var n,r,i,o,a,s,c,u,d=new Array(80),l=1732584193,h=-271733879,p=-1732584194,v=271733878,y=-1009589776;for(n=0;n<e.length;n+=16){for(o=l,a=h,s=p,c=v,u=y,r=0;r<80;r++)d[r]=r<16?e[n+r]:_(d[r-3]^d[r-8]^d[r-14]^d[r-16],1),i=g(g(_(l,5),f(r,h,p,v)),g(g(y,d[r]),m(r))),y=v,v=p,p=_(h,30),h=l,l=i;l=g(l,o),h=g(h,a),p=g(p,s),v=g(v,c),y=g(y,u)}return[l,h,p,v,y]}function f(e,t,n,r){return e<20?t&n|~t&r:e<40?t^n^r:e<60?t&n|t&r|n&r:t^n^r}function m(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function v(e,t){var n=y(e);n.length>16&&(n=p(n,8*e.length));for(var r=new Array(16),i=new Array(16),o=0;o<16;o++)r[o]=909522486^n[o],i[o]=1549556828^n[o];var a=p(r.concat(y(t)),512+8*t.length);return p(i.concat(a),672)}function g(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function _(e,t){return e<<t|e>>>32-t}function y(e){for(var t=[],n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<24-n%32;return t}function S(e){for(var t,n,r="",i=0;i<4*e.length;i+=3)for(t=(e[i>>2]>>8*(3-i%4)&255)<<16|(e[i+1>>2]>>8*(3-(i+1)%4)&255)<<8|e[i+2>>2]>>8*(3-(i+2)%4)&255,n=0;n<4;n++)8*i+6*n>32*e.length?r+="=":r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t>>6*(3-n)&63);return r}function E(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>24-n%32&255);return t}var b={b64_hmac_sha1:function(e,t){return S(v(e,t))},b64_sha1:function(e){return S(p(y(e),8*e.length))},binb2str:E,core_hmac_sha1:v,str_hmac_sha1:function(e,t){return E(v(e,t))},str_sha1:function(e){return E(p(y(e),8*e.length))}},C=function(e){var t,n,r="",i=e.length;for(t=0;t<i;t++)(n=e.charCodeAt(t))>=0&&n<=127?r+=e.charAt(t):n>2047?(r+=String.fromCharCode(224|n>>12&15),r+=String.fromCharCode(128|n>>6&63),r+=String.fromCharCode(128|n>>0&63)):(r+=String.fromCharCode(192|n>>6&31),r+=String.fromCharCode(128|n>>0&63));return r},T=function(e){for(var t in e=e||{})if(Object.prototype.hasOwnProperty.call(e,t)){var r="",i="",o="",a=e[t],s="object"===n(a),c=escape(unescape(s?a.value:a));s&&(r=a.expires?";expires="+a.expires:"",i=a.domain?";domain="+a.domain:"",o=a.path?";path="+a.path:""),document.cookie=t+"="+c+r+i+o}};function R(e,t){return new I.Builder(e,t)}function A(e){return new I.Builder("iq",e)}function k(e){return new I.Builder("presence",e)}var I={VERSION:"@VERSION@",NS:{HTTPBIND:"http://jabber.org/protocol/httpbind",BOSH:"urn:xmpp:xbosh",CLIENT:"jabber:client",AUTH:"jabber:iq:auth",ROSTER:"jabber:iq:roster",PROFILE:"jabber:iq:profile",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",MUC:"http://jabber.org/protocol/muc",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",STREAM:"http://etherx.jabber.org/streams",FRAMING:"urn:ietf:params:xml:ns:xmpp-framing",BIND:"urn:ietf:params:xml:ns:xmpp-bind",SESSION:"urn:ietf:params:xml:ns:xmpp-session",VERSION:"jabber:iq:version",STANZAS:"urn:ietf:params:xml:ns:xmpp-stanzas",XHTML_IM:"http://jabber.org/protocol/xhtml-im",XHTML:"http://www.w3.org/1999/xhtml"},XHTML:{tags:["a","blockquote","br","cite","em","img","li","ol","p","span","strong","ul","body"],attributes:{a:["href"],blockquote:["style"],br:[],cite:["style"],em:[],img:["src","alt","style","height","width"],li:["style"],ol:["style"],p:["style"],span:["style"],strong:[],ul:["style"],body:[]},css:["background-color","color","font-family","font-size","font-style","font-weight","margin-left","margin-right","text-align","text-decoration"],validTag:function(e){for(var t=0;t<I.XHTML.tags.length;t++)if(e===I.XHTML.tags[t])return!0;return!1},validAttribute:function(e,t){if(void 0!==I.XHTML.attributes[e]&&I.XHTML.attributes[e].length>0)for(var n=0;n<I.XHTML.attributes[e].length;n++)if(t===I.XHTML.attributes[e][n])return!0;return!1},validCSS:function(e){for(var t=0;t<I.XHTML.css.length;t++)if(e===I.XHTML.css[t])return!0;return!1}},Status:{ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8,REDIRECT:9,CONNTIMEOUT:10,BINDREQUIRED:11},ErrorCondition:{BAD_FORMAT:"bad-format",CONFLICT:"conflict",MISSING_JID_NODE:"x-strophe-bad-non-anon-jid",NO_AUTH_MECH:"no-auth-mech",UNKNOWN_REASON:"unknown"},LogLevel:{DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},ElementType:{NORMAL:1,TEXT:3,CDATA:4,FRAGMENT:11},TIMEOUT:1.1,SECONDARY_TIMEOUT:.1,addNamespace:function(e,t){I.NS[e]=t},forEachChild:function(e,t,n){for(var r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];i.nodeType!==I.ElementType.NORMAL||t&&!this.isTagEqual(i,t)||n(i)}},isTagEqual:function(e,t){return e.tagName===t},_xmlGenerator:null,_makeGenerator:function(){var e;return void 0===document.implementation.createDocument||document.implementation.createDocument&&document.documentMode&&document.documentMode<10?(e=this._getIEXmlDom()).appendChild(e.createElement("strophe")):e=document.implementation.createDocument("jabber:client","strophe",null),e},xmlGenerator:function(){return I._xmlGenerator||(I._xmlGenerator=I._makeGenerator()),I._xmlGenerator},_getIEXmlDom:function(){for(var e=null,t=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"],n=0;n<t.length&&null===e;n++)try{e=new ActiveXObject(t[n])}catch(t){e=null}return e},xmlElement:function(e){if(!e)return null;for(var t=I.xmlGenerator().createElement(e),r=1;r<arguments.length;r++){var i=arguments[r];if(i)if("string"==typeof i||"number"==typeof i)t.appendChild(I.xmlTextNode(i));else if("object"===n(i)&&"function"==typeof i.sort)for(var o=0;o<i.length;o++){var a=i[o];"object"===n(a)&&"function"==typeof a.sort&&void 0!==a[1]&&null!==a[1]&&t.setAttribute(a[0],a[1])}else if("object"===n(i))for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&void 0!==i[s]&&null!==i[s]&&t.setAttribute(s,i[s])}return t},xmlescape:function(e){return(e=(e=(e=(e=e.replace(/\&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/'/g,"&apos;")).replace(/"/g,"&quot;")},xmlunescape:function(e){return(e=(e=(e=(e=e.replace(/\&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&apos;/g,"'")).replace(/&quot;/g,'"')},xmlTextNode:function(e){return I.xmlGenerator().createTextNode(e)},xmlHtmlNode:function(e){var t;return DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)),t},getText:function(e){if(!e)return null;var t="";0===e.childNodes.length&&e.nodeType===I.ElementType.TEXT&&(t+=e.nodeValue);for(var n=0;n<e.childNodes.length;n++)e.childNodes[n].nodeType===I.ElementType.TEXT&&(t+=e.childNodes[n].nodeValue);return I.xmlescape(t)},copyElement:function(e){var t;if(e.nodeType===I.ElementType.NORMAL){t=I.xmlElement(e.tagName);for(var n=0;n<e.attributes.length;n++)t.setAttribute(e.attributes[n].nodeName,e.attributes[n].value);for(var r=0;r<e.childNodes.length;r++)t.appendChild(I.copyElement(e.childNodes[r]))}else e.nodeType===I.ElementType.TEXT&&(t=I.xmlGenerator().createTextNode(e.nodeValue));return t},createHtml:function(e){var t;if(e.nodeType===I.ElementType.NORMAL){var r=e.nodeName.toLowerCase();if(I.XHTML.validTag(r))try{t=I.xmlElement(r);for(var i=0;i<I.XHTML.attributes[r].length;i++){var o=I.XHTML.attributes[r][i],a=e.getAttribute(o);if(null!=a&&""!==a&&!1!==a&&0!==a)if("style"===o&&"object"===n(a)&&void 0!==a.cssText&&(a=a.cssText),"style"===o){for(var s=[],c=a.split(";"),u=0;u<c.length;u++){var d=c[u].split(":"),l=d[0].replace(/^\s*/,"").replace(/\s*$/,"").toLowerCase();if(I.XHTML.validCSS(l)){var h=d[1].replace(/^\s*/,"").replace(/\s*$/,"");s.push(l+": "+h)}}s.length>0&&(a=s.join("; "),t.setAttribute(o,a))}else t.setAttribute(o,a)}for(var p=0;p<e.childNodes.length;p++)t.appendChild(I.createHtml(e.childNodes[p]))}catch(e){t=I.xmlTextNode("")}else{t=I.xmlGenerator().createDocumentFragment();for(var f=0;f<e.childNodes.length;f++)t.appendChild(I.createHtml(e.childNodes[f]))}}else if(e.nodeType===I.ElementType.FRAGMENT){t=I.xmlGenerator().createDocumentFragment();for(var m=0;m<e.childNodes.length;m++)t.appendChild(I.createHtml(e.childNodes[m]))}else e.nodeType===I.ElementType.TEXT&&(t=I.xmlTextNode(e.nodeValue));return t},escapeNode:function(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},unescapeNode:function(e){return"string"!=typeof e?e:e.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},getNodeFromJid:function(e){return e.indexOf("@")<0?null:e.split("@")[0]},getDomainFromJid:function(e){var t=I.getBareJidFromJid(e);if(t.indexOf("@")<0)return t;var n=t.split("@");return n.splice(0,1),n.join("@")},getResourceFromJid:function(e){if(!e)return null;var t=e.split("/");return t.length<2?null:(t.splice(0,1),t.join("/"))},getBareJidFromJid:function(e){return e?e.split("/")[0]:null},_handleError:function(e){void 0!==e.stack&&I.fatal(e.stack),e.sourceURL?I.fatal("error: "+this.handler+" "+e.sourceURL+":"+e.line+" - "+e.name+": "+e.message):e.fileName?I.fatal("error: "+this.handler+" "+e.fileName+":"+e.lineNumber+" - "+e.name+": "+e.message):I.fatal("error: "+e.message)},log:function(e,t){e===this.LogLevel.FATAL&&"object"===n(window.console)&&"function"==typeof window.console.error&&window.console.error(t)},debug:function(e){this.log(this.LogLevel.DEBUG,e)},info:function(e){this.log(this.LogLevel.INFO,e)},warn:function(e){this.log(this.LogLevel.WARN,e)},error:function(e){this.log(this.LogLevel.ERROR,e)},fatal:function(e){this.log(this.LogLevel.FATAL,e)},serialize:function(e){if(!e)return null;"function"==typeof e.tree&&(e=e.tree());var t=r(Array(e.attributes.length).keys()).map(function(t){return e.attributes[t].nodeName});t.sort();var n=t.reduce(function(t,n){return"".concat(t," ").concat(n,'="').concat(I.xmlescape(e.attributes.getNamedItem(n).value),'"')},"<".concat(e.nodeName));if(e.childNodes.length>0){n+=">";for(var i=0;i<e.childNodes.length;i++){var o=e.childNodes[i];switch(o.nodeType){case I.ElementType.NORMAL:n+=I.serialize(o);break;case I.ElementType.TEXT:n+=I.xmlescape(o.nodeValue);break;case I.ElementType.CDATA:n+="<![CDATA["+o.nodeValue+"]]>"}}n+="</"+e.nodeName+">"}else n+="/>";return n},_requestId:0,_connectionPlugins:{},addConnectionPlugin:function(e,t){I._connectionPlugins[e]=t},Builder:function(e,t){"presence"!==e&&"message"!==e&&"iq"!==e||(t&&!t.xmlns?t.xmlns=I.NS.CLIENT:t||(t={xmlns:I.NS.CLIENT})),this.nodeTree=I.xmlElement(e,t),this.node=this.nodeTree}};I.Builder.prototype={tree:function(){return this.nodeTree},toString:function(){return I.serialize(this.nodeTree)},up:function(){return this.node=this.node.parentNode,this},root:function(){return this.node=this.nodeTree,this},attrs:function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(void 0===e[t]?this.node.removeAttribute(t):this.node.setAttribute(t,e[t]));return this},c:function(e,t,n){var r=I.xmlElement(e,t,n);return this.node.appendChild(r),"string"!=typeof n&&"number"!=typeof n&&(this.node=r),this},cnode:function(e){var t,n=I.xmlGenerator();try{t=void 0!==n.importNode}catch(e){t=!1}var r=t?n.importNode(e,!0):I.copyElement(e);return this.node.appendChild(r),this.node=r,this},t:function(e){var t=I.xmlTextNode(e);return this.node.appendChild(t),this},h:function(e){var t=document.createElement("body");t.innerHTML=e;for(var n=I.createHtml(t);n.childNodes.length>0;)this.node.appendChild(n.childNodes[0]);return this}},I.Handler=function(e,t,n,r,i,o,a){this.handler=e,this.ns=t,this.name=n,this.type=r,this.id=i,this.options=a||{matchBareFromJid:!1,ignoreNamespaceFragment:!1},this.options.matchBare&&(I.warn('The "matchBare" option is deprecated, use "matchBareFromJid" instead.'),this.options.matchBareFromJid=this.options.matchBare,delete this.options.matchBare),this.options.matchBareFromJid?this.from=o?I.getBareJidFromJid(o):null:this.from=o,this.user=!0},I.Handler.prototype={getNamespace:function(e){var t=e.getAttribute("xmlns");return t&&this.options.ignoreNamespaceFragment&&(t=t.split("#")[0]),t},namespaceMatch:function(e){var t=this,n=!1;return!this.ns||(I.forEachChild(e,null,function(e){t.getNamespace(e)===t.ns&&(n=!0)}),n||this.getNamespace(e)===this.ns)},isMatch:function(e){var t=e.getAttribute("from");this.options.matchBareFromJid&&(t=I.getBareJidFromJid(t));var n=e.getAttribute("type");return!(!this.namespaceMatch(e)||this.name&&!I.isTagEqual(e,this.name)||this.type&&(Array.isArray(this.type)?-1===this.type.indexOf(n):n!==this.type)||this.id&&e.getAttribute("id")!==this.id||this.from&&t!==this.from)},run:function(e){var t=null;try{t=this.handler(e)}catch(e){throw I._handleError(e),e}return t},toString:function(){return"{Handler: "+this.handler+"("+this.name+","+this.id+","+this.ns+")}"}},I.TimedHandler=function(e,t){this.period=e,this.handler=t,this.lastCalled=(new Date).getTime(),this.user=!0},I.TimedHandler.prototype={run:function(){return this.lastCalled=(new Date).getTime(),this.handler()},reset:function(){this.lastCalled=(new Date).getTime()},toString:function(){return"{TimedHandler: "+this.handler+"("+this.period+")}"}},I.Connection=function(e,t){var n=this;this.service=e,this.options=t||{};var r=this.options.protocol||"";for(var i in 0===e.indexOf("ws:")||0===e.indexOf("wss:")||0===r.indexOf("ws")?this._proto=new I.Websocket(this):this._proto=new I.Bosh(this),this.jid="",this.domain=null,this.features=null,this._sasl_data={},this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.protocolErrorHandlers={HTTP:{},websocket:{}},this._idleTimeout=null,this._disconnectTimeout=null,this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.do_authentication=!0,this.paused=!1,this.restored=!1,this._data=[],this._uniqueId=0,this._sasl_success_handler=null,this._sasl_failure_handler=null,this._sasl_challenge_handler=null,this.maxRetries=5,this._idleTimeout=setTimeout(function(){return n._onIdle()},100),T(this.options.cookies),this.registerSASLMechanisms(this.options.mechanisms),I._connectionPlugins)if(Object.prototype.hasOwnProperty.call(I._connectionPlugins,i)){var o=function(){};o.prototype=I._connectionPlugins[i],this[i]=new o,this[i].init(this)}},I.Connection.prototype={reset:function(){this._proto._reset(),this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.restored=!1,this._data=[],this._requests=[],this._uniqueId=0},pause:function(){this.paused=!0},resume:function(){this.paused=!1},getUniqueId:function(e){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)});return"string"==typeof e||"number"==typeof e?t+":"+e:t+""},addProtocolErrorHandler:function(e,t,n){this.protocolErrorHandlers[e][t]=n},connect:function(e,t,n,r,i,o,a){this.jid=e,this.authzid=I.getBareJidFromJid(this.jid),this.authcid=a||I.getNodeFromJid(this.jid),this.pass=t,this.servtype="xmpp",this.connect_callback=n,this.disconnecting=!1,this.connected=!1,this.authenticated=!1,this.restored=!1,this.domain=I.getDomainFromJid(this.jid),this._changeConnectStatus(I.Status.CONNECTING,null),this._proto._connect(r,i,o)},attach:function(e,t,n,r,i,o,a){if(!(this._proto instanceof I.Bosh)){var s=new Error('The "attach" method can only be used with a BOSH connection.');throw s.name="StropheSessionError",s}this._proto._attach(e,t,n,r,i,o,a)},restore:function(e,t,n,r,i){if(!this._sessionCachingSupported()){var o=new Error('The "restore" method can only be used with a BOSH connection.');throw o.name="StropheSessionError",o}this._proto._restore(e,t,n,r,i)},_sessionCachingSupported:function(){if(this._proto instanceof I.Bosh){if(!JSON)return!1;try{sessionStorage.setItem("_strophe_","_strophe_"),sessionStorage.removeItem("_strophe_")}catch(e){return!1}return!0}return!1},xmlInput:function(e){},xmlOutput:function(e){},rawInput:function(e){},rawOutput:function(e){},nextValidRid:function(e){},send:function(e){if(null!==e){if("function"==typeof e.sort)for(var t=0;t<e.length;t++)this._queueData(e[t]);else"function"==typeof e.tree?this._queueData(e.tree()):this._queueData(e);this._proto._send()}},flush:function(){clearTimeout(this._idleTimeout),this._onIdle()},sendPresence:function(e,t,n,r){var i=this,o=null;"function"==typeof e.tree&&(e=e.tree());var a=e.getAttribute("id");if(a||(a=this.getUniqueId("sendPresence"),e.setAttribute("id",a)),"function"==typeof t||"function"==typeof n){var s=this.addHandler(function(e){o&&i.deleteTimedHandler(o),"error"===e.getAttribute("type")?n&&n(e):t&&t(e)},null,"presence",null,a);r&&(o=this.addTimedHandler(r,function(){return i.deleteHandler(s),n&&n(null),!1}))}return this.send(e),a},sendIQ:function(e,t,n,r){var i=this,o=null;"function"==typeof e.tree&&(e=e.tree());var a=e.getAttribute("id");if(a||(a=this.getUniqueId("sendIQ"),e.setAttribute("id",a)),"function"==typeof t||"function"==typeof n){var s=this.addHandler(function(e){o&&i.deleteTimedHandler(o);var r=e.getAttribute("type");if("result"===r)t&&t(e);else{if("error"!==r){var a=new Error("Got bad IQ type of ".concat(r));throw a.name="StropheError",a}n&&n(e)}},null,"iq",["error","result"],a);r&&(o=this.addTimedHandler(r,function(){return i.deleteHandler(s),n&&n(null),!1}))}return this.send(e),a},_queueData:function(e){if(null===e||!e.tagName||!e.childNodes){var t=new Error("Cannot queue non-DOMElement.");throw t.name="StropheError",t}this._data.push(e)},_sendRestart:function(){var e=this;this._data.push("restart"),this._proto._sendRestart(),this._idleTimeout=setTimeout(function(){return e._onIdle()},100)},addTimedHandler:function(e,t){var n=new I.TimedHandler(e,t);return this.addTimeds.push(n),n},deleteTimedHandler:function(e){this.removeTimeds.push(e)},addHandler:function(e,t,n,r,i,o,a){var s=new I.Handler(e,t,n,r,i,o,a);return this.addHandlers.push(s),s},deleteHandler:function(e){this.removeHandlers.push(e);var t=this.addHandlers.indexOf(e);t>=0&&this.addHandlers.splice(t,1)},registerSASLMechanisms:function(e){this.mechanisms={},(e=e||[I.SASLAnonymous,I.SASLExternal,I.SASLMD5,I.SASLOAuthBearer,I.SASLXOAuth2,I.SASLPlain,I.SASLSHA1]).forEach(this.registerSASLMechanism.bind(this))},registerSASLMechanism:function(e){this.mechanisms[e.prototype.name]=e},disconnect:function(e){if(this._changeConnectStatus(I.Status.DISCONNECTING,e),I.warn("Disconnect was called because: "+e),this.connected){var t=!1;this.disconnecting=!0,this.authenticated&&(t=k({xmlns:I.NS.CLIENT,type:"unavailable"})),this._disconnectTimeout=this._addSysTimedHandler(3e3,this._onDisconnectTimeout.bind(this)),this._proto._disconnect(t)}else I.warn("Disconnect was called before Strophe connected to the server"),this._proto._abortAllRequests(),this._doDisconnect()},_changeConnectStatus:function(e,t,n){for(var r in I._connectionPlugins)if(Object.prototype.hasOwnProperty.call(I._connectionPlugins,r)){var i=this[r];if(i.statusChanged)try{i.statusChanged(e,t)}catch(e){I.error("".concat(r," plugin caused an exception changing status: ").concat(e))}}if(this.connect_callback)try{this.connect_callback(e,t,n)}catch(e){I._handleError(e),I.error("User connection callback caused an exception: ".concat(e))}},_doDisconnect:function(e){"number"==typeof this._idleTimeout&&clearTimeout(this._idleTimeout),null!==this._disconnectTimeout&&(this.deleteTimedHandler(this._disconnectTimeout),this._disconnectTimeout=null),I.debug("_doDisconnect was called"),this._proto._doDisconnect(),this.authenticated=!1,this.disconnecting=!1,this.restored=!1,this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._changeConnectStatus(I.Status.DISCONNECTED,e),this.connected=!1},_dataRecv:function(e,t){var n=this;I.debug("_dataRecv called");var r=this._proto._reqToData(e);if(null!==r){for(this.xmlInput!==I.Connection.prototype.xmlInput&&(r.nodeName===this._proto.strip&&r.childNodes.length?this.xmlInput(r.childNodes[0]):this.xmlInput(r)),this.rawInput!==I.Connection.prototype.rawInput&&(t?this.rawInput(t):this.rawInput(I.serialize(r)));this.removeHandlers.length>0;){var i=this.removeHandlers.pop(),o=this.handlers.indexOf(i);o>=0&&this.handlers.splice(o,1)}for(;this.addHandlers.length>0;)this.handlers.push(this.addHandlers.pop());if(this.disconnecting&&this._proto._emptyQueue())this._doDisconnect();else{var a=r.getAttribute("type");if(null!==a&&"terminate"===a){if(this.disconnecting)return;var s=r.getAttribute("condition"),c=r.getElementsByTagName("conflict");return null!==s?("remote-stream-error"===s&&c.length>0&&(s="conflict"),this._changeConnectStatus(I.Status.CONNFAIL,s)):this._changeConnectStatus(I.Status.CONNFAIL,I.ErrorCondition.UNKOWN_REASON),void this._doDisconnect(s)}I.forEachChild(r,null,function(e){var t=n.handlers;n.handlers=[];for(var r=0;r<t.length;r++){var i=t[r];try{(!i.isMatch(e)||!n.authenticated&&i.user||i.run(e))&&n.handlers.push(i)}catch(e){I.warn("Removing Strophe handlers due to uncaught exception: "+e.message)}}})}}},mechanisms:{},_connect_cb:function(e,t,n){var r;I.debug("_connect_cb was called"),this.connected=!0;try{r=this._proto._reqToData(e)}catch(e){if(e.name!==I.ErrorCondition.BAD_FORMAT)throw e;this._changeConnectStatus(I.Status.CONNFAIL,I.ErrorCondition.BAD_FORMAT),this._doDisconnect(I.ErrorCondition.BAD_FORMAT)}if(r&&(this.xmlInput!==I.Connection.prototype.xmlInput&&(r.nodeName===this._proto.strip&&r.childNodes.length?this.xmlInput(r.childNodes[0]):this.xmlInput(r)),this.rawInput!==I.Connection.prototype.rawInput&&(n?this.rawInput(n):this.rawInput(I.serialize(r))),this._proto._connect_cb(r)!==I.Status.CONNFAIL))if(r.getElementsByTagNameNS?r.getElementsByTagNameNS(I.NS.STREAM,"features").length>0:r.getElementsByTagName("stream:features").length>0||r.getElementsByTagName("features").length>0){var i=[],o=r.getElementsByTagName("mechanism");if(o.length>0)for(var a=0;a<o.length;a++){var s=I.getText(o[a]);this.mechanisms[s]&&i.push(this.mechanisms[s])}0!==i.length||0!==r.getElementsByTagName("auth").length?!1!==this.do_authentication&&this.authenticate(i):this._proto._no_auth_received(t)}else this._proto._no_auth_received(t)},sortMechanismsByPriority:function(e){for(var t=0;t<e.length-1;++t){for(var n=t,r=t+1;r<e.length;++r)e[r].prototype.priority>e[n].prototype.priority&&(n=r);if(n!==t){var i=e[t];e[t]=e[n],e[n]=i}}return e},authenticate:function(e){this._attemptSASLAuth(e)||this._attemptLegacyAuth()},_attemptSASLAuth:function(e){e=this.sortMechanismsByPriority(e||[]);for(var t=!1,n=0;n<e.length;++n)if(e[n].prototype.test(this)){this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge_cb.bind(this),null,"challenge",null,null),this._sasl_mechanism=new e[n],this._sasl_mechanism.onStart(this);var r=R("auth",{xmlns:I.NS.SASL,mechanism:this._sasl_mechanism.name});if(this._sasl_mechanism.isClientFirst){var i=this._sasl_mechanism.onChallenge(this,null);r.t(btoa(i))}this.send(r.tree()),t=!0;break}return t},_sasl_challenge_cb:function(e){var t=atob(I.getText(e)),n=this._sasl_mechanism.onChallenge(this,t),r=R("response",{xmlns:I.NS.SASL});return""!==n&&r.t(btoa(n)),this.send(r.tree()),!0},_attemptLegacyAuth:function(){null===I.getNodeFromJid(this.jid)?(this._changeConnectStatus(I.Status.CONNFAIL,I.ErrorCondition.MISSING_JID_NODE),this.disconnect(I.ErrorCondition.MISSING_JID_NODE)):(this._changeConnectStatus(I.Status.AUTHENTICATING,null),this._addSysHandler(this._onLegacyAuthIQResult.bind(this),null,null,null,"_auth_1"),this.send(A({type:"get",to:this.domain,id:"_auth_1"}).c("query",{xmlns:I.NS.AUTH}).c("username",{}).t(I.getNodeFromJid(this.jid)).tree()))},_onLegacyAuthIQResult:function(e){var t=A({type:"set",id:"_auth_2"}).c("query",{xmlns:I.NS.AUTH}).c("username",{}).t(I.getNodeFromJid(this.jid)).up().c("password").t(this.pass);return I.getResourceFromJid(this.jid)||(this.jid=I.getBareJidFromJid(this.jid)+"/strophe"),t.up().c("resource",{}).t(I.getResourceFromJid(this.jid)),this._addSysHandler(this._auth2_cb.bind(this),null,null,null,"_auth_2"),this.send(t.tree()),!1},_sasl_success_cb:function(e){var t=this;if(this._sasl_data["server-signature"]){var n,r=atob(I.getText(e)).match(/([a-z]+)=([^,]+)(,|$)/);if("v"===r[1]&&(n=r[2]),n!==this._sasl_data["server-signature"])return this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_data={},this._sasl_failure_cb(null)}I.info("SASL authentication succeeded."),this._sasl_mechanism&&this._sasl_mechanism.onSuccess(),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null);var i=[],o=function(e,n){for(;e.length;)t.deleteHandler(e.pop());return t._onStreamFeaturesAfterSASL(n),!1};return i.push(this._addSysHandler(function(e){return o(i,e)},null,"stream:features",null,null)),i.push(this._addSysHandler(function(e){return o(i,e)},I.NS.STREAM,"features",null,null)),this._sendRestart(),!1},_onStreamFeaturesAfterSASL:function(e){this.features=e;for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];"bind"===n.nodeName&&(this.do_bind=!0),"session"===n.nodeName&&(this.do_session=!0)}return this.do_bind?(this.options.explicitResourceBinding?this._changeConnectStatus(I.Status.BINDREQUIRED,null):this.bind(),!1):(this._changeConnectStatus(I.Status.AUTHFAIL,null),!1)},bind:function(){if(this.do_bind){this._addSysHandler(this._onResourceBindResultIQ.bind(this),null,null,null,"_bind_auth_2");var e=I.getResourceFromJid(this.jid);e?this.send(A({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:I.NS.BIND}).c("resource",{}).t(e).tree()):this.send(A({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:I.NS.BIND}).tree())}else I.log(I.LogLevel.INFO,'Strophe.Connection.prototype.bind called but "do_bind" is false')},_onResourceBindResultIQ:function(e){var t;if("error"===e.getAttribute("type"))return I.warn("Resource binding failed."),e.getElementsByTagName("conflict").length>0&&(t=I.ErrorCondition.CONFLICT),this._changeConnectStatus(I.Status.AUTHFAIL,t,e),!1;var n=e.getElementsByTagName("bind");if(!(n.length>0))return I.warn("Resource binding failed."),this._changeConnectStatus(I.Status.AUTHFAIL,null,e),!1;var r=n[0].getElementsByTagName("jid");r.length>0&&(this.jid=I.getText(r[0]),this.do_session?this._establishSession():(this.authenticated=!0,this._changeConnectStatus(I.Status.CONNECTED,null)))},_establishSession:function(){if(!this.do_session)throw new Error("Strophe.Connection.prototype._establishSession "+"called but apparently ".concat(I.NS.SESSION," wasn't advertised by the server"));this._addSysHandler(this._onSessionResultIQ.bind(this),null,null,null,"_session_auth_2"),this.send(A({type:"set",id:"_session_auth_2"}).c("session",{xmlns:I.NS.SESSION}).tree())},_onSessionResultIQ:function(e){if("result"===e.getAttribute("type"))this.authenticated=!0,this._changeConnectStatus(I.Status.CONNECTED,null);else if("error"===e.getAttribute("type"))return I.warn("Session creation failed."),this._changeConnectStatus(I.Status.AUTHFAIL,null,e),!1;return!1},_sasl_failure_cb:function(e){return this._sasl_success_handler&&(this.deleteHandler(this._sasl_success_handler),this._sasl_success_handler=null),this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_mechanism&&this._sasl_mechanism.onFailure(),this._changeConnectStatus(I.Status.AUTHFAIL,null,e),!1},_auth2_cb:function(e){return"result"===e.getAttribute("type")?(this.authenticated=!0,this._changeConnectStatus(I.Status.CONNECTED,null)):"error"===e.getAttribute("type")&&(this._changeConnectStatus(I.Status.AUTHFAIL,null,e),this.disconnect("authentication failed")),!1},_addSysTimedHandler:function(e,t){var n=new I.TimedHandler(e,t);return n.user=!1,this.addTimeds.push(n),n},_addSysHandler:function(e,t,n,r,i){var o=new I.Handler(e,t,n,r,i);return o.user=!1,this.addHandlers.push(o),o},_onDisconnectTimeout:function(){return I.debug("_onDisconnectTimeout was called"),this._changeConnectStatus(I.Status.CONNTIMEOUT,null),this._proto._onDisconnectTimeout(),this._doDisconnect(),!1},_onIdle:function(){for(var e=this;this.addTimeds.length>0;)this.timedHandlers.push(this.addTimeds.pop());for(;this.removeTimeds.length>0;){var t=this.removeTimeds.pop(),n=this.timedHandlers.indexOf(t);n>=0&&this.timedHandlers.splice(n,1)}for(var r=(new Date).getTime(),i=[],o=0;o<this.timedHandlers.length;o++){var a=this.timedHandlers[o];!this.authenticated&&a.user||(a.lastCalled+a.period-r<=0?a.run()&&i.push(a):i.push(a))}this.timedHandlers=i,clearTimeout(this._idleTimeout),this._proto._onIdle(),this.connected&&(this._idleTimeout=setTimeout(function(){return e._onIdle()},100))}},I.SASLMechanism=function(e,t,n){this.name=e,this.isClientFirst=t,this.priority=n},I.SASLMechanism.prototype={test:function(e){return!0},onStart:function(e){this._connection=e},onChallenge:function(e,t){throw new Error("You should implement challenge handling!")},onFailure:function(){this._connection=null},onSuccess:function(){this._connection=null}},I.SASLAnonymous=function(){},I.SASLAnonymous.prototype=new I.SASLMechanism("ANONYMOUS",!1,20),I.SASLAnonymous.prototype.test=function(e){return null===e.authcid},I.SASLPlain=function(){},I.SASLPlain.prototype=new I.SASLMechanism("PLAIN",!0,50),I.SASLPlain.prototype.test=function(e){return null!==e.authcid},I.SASLPlain.prototype.onChallenge=function(e){var t=e.authzid;return t+="\0",t+=e.authcid,t+="\0",t+=e.pass,C(t)},I.SASLSHA1=function(){},I.SASLSHA1.prototype=new I.SASLMechanism("SCRAM-SHA-1",!0,70),I.SASLSHA1.prototype.test=function(e){return null!==e.authcid},I.SASLSHA1.prototype.onChallenge=function(e,t,n){var r=n||h.hexdigest(""+1234567890*Math.random()),i="n="+C(e.authcid);return i+=",r=",i+=r,e._sasl_data.cnonce=r,e._sasl_data["client-first-message-bare"]=i,i="n,,"+i,this.onChallenge=function(e,t){for(var n,r,i,o,a,s,c,u,d="c=biws,",l="".concat(e._sasl_data["client-first-message-bare"],",").concat(t,","),h=e._sasl_data.cnonce,p=/([a-z]+)=([^,]+)(,|$)/;t.match(p);){var f=t.match(p);switch(t=t.replace(f[0],""),f[1]){case"r":n=f[2];break;case"s":r=f[2];break;case"i":i=f[2]}}if(n.substr(0,h.length)!==h)return e._sasl_data={},e._sasl_failure_cb();l+=d+="r="+n,r=atob(r),r+="\0\0\0\x01";var m=C(e.pass);for(o=s=b.core_hmac_sha1(m,r),c=1;c<i;c++){for(a=b.core_hmac_sha1(m,b.binb2str(s)),u=0;u<5;u++)o[u]^=a[u];s=a}o=b.binb2str(o);var v=b.core_hmac_sha1(o,"Client Key"),g=b.str_hmac_sha1(o,"Server Key"),_=b.core_hmac_sha1(b.str_sha1(b.binb2str(v)),l);for(e._sasl_data["server-signature"]=b.b64_hmac_sha1(g,l),u=0;u<5;u++)v[u]^=_[u];return d+",p="+btoa(b.binb2str(v))},i},I.SASLMD5=function(){},I.SASLMD5.prototype=new I.SASLMechanism("DIGEST-MD5",!1,60),I.SASLMD5.prototype.test=function(e){return null!==e.authcid},I.SASLMD5.prototype._quote=function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},I.SASLMD5.prototype.onChallenge=function(e,t,n){for(var r=/([a-z]+)=("[^"]+"|[^,"]+)(?:,|$)/,i=n||h.hexdigest(""+1234567890*Math.random()),o="",a=null,s="";t.match(r);){var c=t.match(r);switch(t=t.replace(c[0],""),c[2]=c[2].replace(/^"(.+)"$/,"$1"),c[1]){case"realm":o=c[2];break;case"nonce":s=c[2];break;case"qop":c[2];break;case"host":a=c[2]}}var u=e.servtype+"/"+e.domain;null!==a&&(u=u+"/"+a);var d=C(e.authcid+":"+o+":"+this._connection.pass),l=h.hash(d)+":"+s+":"+i,p="AUTHENTICATE:"+u,f="";return f+="charset=utf-8,",f+="username="+this._quote(C(e.authcid))+",",f+="realm="+this._quote(o)+",",f+="nonce="+this._quote(s)+",",f+="nc=00000001,",f+="cnonce="+this._quote(i)+",",f+="digest-uri="+this._quote(u)+",",f+="response="+h.hexdigest(h.hexdigest(l)+":"+s+":00000001:"+i+":auth:"+h.hexdigest(p))+",",f+="qop=auth",this.onChallenge=function(){return""},f},I.SASLOAuthBearer=function(){},I.SASLOAuthBearer.prototype=new I.SASLMechanism("OAUTHBEARER",!0,40),I.SASLOAuthBearer.prototype.test=function(e){return null!==e.pass},I.SASLOAuthBearer.prototype.onChallenge=function(e){var t="n,";return null!==e.authcid&&(t=t+"a="+e.authzid),t+=",",t+="\x01",t+="auth=Bearer ",t+=e.pass,t+="\x01",C(t+="\x01")},I.SASLExternal=function(){},I.SASLExternal.prototype=new I.SASLMechanism("EXTERNAL",!0,10),I.SASLExternal.prototype.onChallenge=function(e){return e.authcid===e.authzid?"":e.authzid},I.SASLXOAuth2=function(){},I.SASLXOAuth2.prototype=new I.SASLMechanism("X-OAUTH2",!0,30),I.SASLXOAuth2.prototype.test=function(e){return null!==e.pass},I.SASLXOAuth2.prototype.onChallenge=function(e){var t="\0";return null!==e.authcid&&(t+=e.authzid),t+="\0",t+=e.pass,C(t)};var w={Strophe:I,$build:R,$iq:A,$msg:function(e){return new I.Builder("message",e)},$pres:k,SHA1:b,MD5:h,b64_hmac_sha1:b.b64_hmac_sha1,b64_sha1:b.b64_sha1,str_hmac_sha1:b.str_hmac_sha1,str_sha1:b.str_sha1},P=w.Strophe,O=w.$build;P.Request=function(e,t,n,r){this.id=++P._requestId,this.xmlData=e,this.data=P.serialize(e),this.origFunc=t,this.func=t,this.rid=n,this.date=NaN,this.sends=r||0,this.abort=!1,this.dead=null,this.age=function(){return this.date?(new Date-this.date)/1e3:0},this.timeDead=function(){return this.dead?(new Date-this.dead)/1e3:0},this.xhr=this._newXHR()},P.Request.prototype={getResponse:function(){var e=null;if(this.xhr.responseXML&&this.xhr.responseXML.documentElement){if("parsererror"===(e=this.xhr.responseXML.documentElement).tagName)throw P.error("invalid response received"),P.error("responseText: "+this.xhr.responseText),P.error("responseXML: "+P.serialize(this.xhr.responseXML)),new Error("parsererror")}else if(this.xhr.responseText){if(P.debug("Got responseText but no responseXML; attempting to parse it with DOMParser..."),!(e=(new DOMParser).parseFromString(this.xhr.responseText,"application/xml").documentElement))throw new Error("Parsing produced null node");if(e.querySelector("parsererror")){P.error("invalid response received: "+e.querySelector("parsererror").textContent),P.error("responseText: "+this.xhr.responseText);var t=new Error;throw t.name=P.ErrorCondition.BAD_FORMAT,t}}return e},_newXHR:function(){var e=null;return window.XMLHttpRequest?(e=new XMLHttpRequest).overrideMimeType&&e.overrideMimeType("text/xml; charset=utf-8"):window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e.onreadystatechange=this.func.bind(null,this),e}},P.Bosh=function(e){this._conn=e,this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.hold=1,this.wait=60,this.window=5,this.errors=0,this.inactivity=null,this.lastResponseHeaders=null,this._requests=[]},P.Bosh.prototype={strip:null,_buildBody:function(){var e=O("body",{rid:this.rid++,xmlns:P.NS.HTTPBIND});return null!==this.sid&&e.attrs({sid:this.sid}),this._conn.options.keepalive&&this._conn._sessionCachingSupported()&&this._cacheSession(),e},_reset:function(){this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.errors=0,this._conn._sessionCachingSupported()&&window.sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)},_connect:function(e,t,n){this.wait=e||this.wait,this.hold=t||this.hold,this.errors=0;var r=this._buildBody().attrs({to:this._conn.domain,"xml:lang":"en",wait:this.wait,hold:this.hold,content:"text/xml; charset=utf-8",ver:"1.6","xmpp:version":"1.0","xmlns:xmpp":P.NS.BOSH});n&&r.attrs({route:n});var i=this._conn._connect_cb;this._requests.push(new P.Request(r.tree(),this._onRequestStateChange.bind(this,i.bind(this._conn)),r.tree().getAttribute("rid"))),this._throttledRequestHandler()},_attach:function(e,t,n,r,i,o,a){this._conn.jid=e,this.sid=t,this.rid=n,this._conn.connect_callback=r,this._conn.domain=P.getDomainFromJid(this._conn.jid),this._conn.authenticated=!0,this._conn.connected=!0,this.wait=i||this.wait,this.hold=o||this.hold,this.window=a||this.window,this._conn._changeConnectStatus(P.Status.ATTACHED,null)},_restore:function(e,t,n,r,i){var o=JSON.parse(window.sessionStorage.getItem("strophe-bosh-session"));if(!(null!=o&&o.rid&&o.sid&&o.jid&&(null==e||P.getBareJidFromJid(o.jid)===P.getBareJidFromJid(e)||null===P.getNodeFromJid(e)&&P.getDomainFromJid(o.jid)===e))){var a=new Error("_restore: no restoreable session.");throw a.name="StropheSessionError",a}this._conn.restored=!0,this._attach(o.jid,o.sid,o.rid,t,n,r,i)},_cacheSession:function(){this._conn.authenticated?this._conn.jid&&this.rid&&this.sid&&window.sessionStorage.setItem("strophe-bosh-session",JSON.stringify({jid:this._conn.jid,rid:this.rid,sid:this.sid})):window.sessionStorage.removeItem("strophe-bosh-session")},_connect_cb:function(e){var t=e.getAttribute("type");if(null!==t&&"terminate"===t){var n=e.getAttribute("condition");P.error("BOSH-Connection failed: "+n);var r=e.getElementsByTagName("conflict");return null!==n?("remote-stream-error"===n&&r.length>0&&(n="conflict"),this._conn._changeConnectStatus(P.Status.CONNFAIL,n)):this._conn._changeConnectStatus(P.Status.CONNFAIL,"unknown"),this._conn._doDisconnect(n),P.Status.CONNFAIL}this.sid||(this.sid=e.getAttribute("sid"));var i=e.getAttribute("requests");i&&(this.window=parseInt(i,10));var o=e.getAttribute("hold");o&&(this.hold=parseInt(o,10));var a=e.getAttribute("wait");a&&(this.wait=parseInt(a,10));var s=e.getAttribute("inactivity");s&&(this.inactivity=parseInt(s,10))},_disconnect:function(e){this._sendTerminate(e)},_doDisconnect:function(){this.sid=null,this.rid=Math.floor(4294967295*Math.random()),this._conn._sessionCachingSupported()&&window.sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)},_emptyQueue:function(){return 0===this._requests.length},_callProtocolErrorHandlers:function(e){var t=this._getRequestStatus(e),n=this._conn.protocolErrorHandlers.HTTP[t];n&&n.call(this,t)},_hitError:function(e){this.errors++,P.warn("request errored, status: "+e+", number of errors: "+this.errors),this.errors>4&&this._conn._onDisconnectTimeout()},_no_auth_received:function(e){P.warn("Server did not yet offer a supported authentication mechanism. Sending a blank poll request."),e=e?e.bind(this._conn):this._conn._connect_cb.bind(this._conn);var t=this._buildBody();this._requests.push(new P.Request(t.tree(),this._onRequestStateChange.bind(this,e),t.tree().getAttribute("rid"))),this._throttledRequestHandler()},_onDisconnectTimeout:function(){this._abortAllRequests()},_abortAllRequests:function(){for(;this._requests.length>0;){var e=this._requests.pop();e.abort=!0,e.xhr.abort(),e.xhr.onreadystatechange=function(){}}},_onIdle:function(){var e=this._conn._data;if(this._conn.authenticated&&0===this._requests.length&&0===e.length&&!this._conn.disconnecting&&(P.debug("no requests during idle cycle, sending blank request"),e.push(null)),!this._conn.paused){if(this._requests.length<2&&e.length>0){for(var t=this._buildBody(),n=0;n<e.length;n++)null!==e[n]&&("restart"===e[n]?t.attrs({to:this._conn.domain,"xml:lang":"en","xmpp:restart":"true","xmlns:xmpp":P.NS.BOSH}):t.cnode(e[n]).up());delete this._conn._data,this._conn._data=[],this._requests.push(new P.Request(t.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),t.tree().getAttribute("rid"))),this._throttledRequestHandler()}if(this._requests.length>0){var r=this._requests[0].age();null!==this._requests[0].dead&&this._requests[0].timeDead()>Math.floor(P.SECONDARY_TIMEOUT*this.wait)&&this._throttledRequestHandler(),r>Math.floor(P.TIMEOUT*this.wait)&&(P.warn("Request "+this._requests[0].id+" timed out, over "+Math.floor(P.TIMEOUT*this.wait)+" seconds since last activity"),this._throttledRequestHandler())}}},_getRequestStatus:function(e,t){var n;if(4===e.xhr.readyState)try{n=e.xhr.status}catch(e){P.error("Caught an error while retrieving a request's status, reqStatus: "+n)}return void 0===n&&(n="number"==typeof t?t:0),n},_onRequestStateChange:function(e,t){if(P.debug("request id "+t.id+"."+t.sends+" state changed to "+t.xhr.readyState),t.abort)t.abort=!1;else if(4===t.xhr.readyState){var n=this._getRequestStatus(t);if(this.lastResponseHeaders=t.xhr.getAllResponseHeaders(),this.disconnecting&&n>=400)return this._hitError(n),void this._callProtocolErrorHandlers(t);var r=n>0&&n<500,i=t.sends>this._conn.maxRetries;if((r||i)&&(this._removeRequest(t),P.debug("request id "+t.id+" should now be removed")),200===n){var o=this._requests[0]===t;(this._requests[1]===t||o&&this._requests.length>0&&this._requests[0].age()>Math.floor(P.SECONDARY_TIMEOUT*this.wait))&&this._restartRequest(0),this._conn.nextValidRid(Number(t.rid)+1),P.debug("request id "+t.id+"."+t.sends+" got 200"),e(t),this.errors=0}else 0===n||n>=400&&n<600||n>=12e3?(P.error("request id "+t.id+"."+t.sends+" error "+n+" happened"),this._hitError(n),this._callProtocolErrorHandlers(t),n>=400&&n<500&&(this._conn._changeConnectStatus(P.Status.DISCONNECTING,null),this._conn._doDisconnect())):P.error("request id "+t.id+"."+t.sends+" error "+n+" happened");r||i?i&&!this._conn.connected&&this._conn._changeConnectStatus(P.Status.CONNFAIL,"giving-up"):this._throttledRequestHandler()}},_processRequest:function(e){var t=this,n=this._requests[e],r=this._getRequestStatus(n,-1);if(n.sends>this._conn.maxRetries)this._conn._onDisconnectTimeout();else{var i=n.age(),o=!isNaN(i)&&i>Math.floor(P.TIMEOUT*this.wait),a=null!==n.dead&&n.timeDead()>Math.floor(P.SECONDARY_TIMEOUT*this.wait),s=4===n.xhr.readyState&&(r<1||r>=500);if((o||a||s)&&(a&&P.error("Request ".concat(this._requests[e].id," timed out (secondary), restarting")),n.abort=!0,n.xhr.abort(),n.xhr.onreadystatechange=function(){},this._requests[e]=new P.Request(n.xmlData,n.origFunc,n.rid,n.sends),n=this._requests[e]),0===n.xhr.readyState){P.debug("request id "+n.id+"."+n.sends+" posting");try{var c=this._conn.options.contentType||"text/xml; charset=utf-8";n.xhr.open("POST",this._conn.service,!this._conn.options.sync),void 0!==n.xhr.setRequestHeader&&n.xhr.setRequestHeader("Content-Type",c),this._conn.options.withCredentials&&(n.xhr.withCredentials=!0)}catch(e){return P.error("XHR open failed: "+e.toString()),this._conn.connected||this._conn._changeConnectStatus(P.Status.CONNFAIL,"bad-service"),void this._conn.disconnect()}var u=function(){if(n.date=new Date,t._conn.options.customHeaders){var e=t._conn.options.customHeaders;for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.xhr.setRequestHeader(r,e[r])}n.xhr.send(n.data)};if(n.sends>1){var d=1e3*Math.min(Math.floor(P.TIMEOUT*this.wait),Math.pow(n.sends,3));setTimeout(function(){u()},d)}else u();n.sends++,this._conn.xmlOutput!==P.Connection.prototype.xmlOutput&&(n.xmlData.nodeName===this.strip&&n.xmlData.childNodes.length?this._conn.xmlOutput(n.xmlData.childNodes[0]):this._conn.xmlOutput(n.xmlData)),this._conn.rawOutput!==P.Connection.prototype.rawOutput&&this._conn.rawOutput(n.data)}else P.debug("_processRequest: "+(0===e?"first":"second")+" request has readyState of "+n.xhr.readyState)}},_removeRequest:function(e){P.debug("removing request");for(var t=this._requests.length-1;t>=0;t--)e===this._requests[t]&&this._requests.splice(t,1);e.xhr.onreadystatechange=function(){},this._throttledRequestHandler()},_restartRequest:function(e){var t=this._requests[e];null===t.dead&&(t.dead=new Date),this._processRequest(e)},_reqToData:function(e){try{return e.getResponse()}catch(e){if("parsererror"!==e.message)throw e;this._conn.disconnect("strophe-parsererror")}},_sendTerminate:function(e){P.debug("_sendTerminate was called");var t=this._buildBody().attrs({type:"terminate"});e&&t.cnode(e.tree());var n=new P.Request(t.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),t.tree().getAttribute("rid"));this._requests.push(n),this._throttledRequestHandler()},_send:function(){var e=this;clearTimeout(this._conn._idleTimeout),this._throttledRequestHandler(),this._conn._idleTimeout=setTimeout(function(){return e._conn._onIdle()},100)},_sendRestart:function(){this._throttledRequestHandler(),clearTimeout(this._conn._idleTimeout)},_throttledRequestHandler:function(){this._requests?P.debug("_throttledRequestHandler called with "+this._requests.length+" requests"):P.debug("_throttledRequestHandler called with undefined requests"),this._requests&&0!==this._requests.length&&(this._requests.length>0&&this._processRequest(0),this._requests.length>1&&Math.abs(this._requests[0].rid-this._requests[1].rid)<this.window&&this._processRequest(1))}};var D=w.Strophe,N=w.$build;return D.Websocket=function(e){this._conn=e,this.strip="wrapper";var t=e.service;if(0!==t.indexOf("ws:")&&0!==t.indexOf("wss:")){var n="";"ws"===e.options.protocol&&"https:"!==window.location.protocol?n+="ws":n+="wss",n+="://"+window.location.host,0!==t.indexOf("/")?n+=window.location.pathname+t:n+=t,e.service=n}},D.Websocket.prototype={_buildStream:function(){return N("open",{xmlns:D.NS.FRAMING,to:this._conn.domain,version:"1.0"})},_check_streamerror:function(e,t){var n;if(0===(n=e.getElementsByTagNameNS?e.getElementsByTagNameNS(D.NS.STREAM,"error"):e.getElementsByTagName("stream:error")).length)return!1;for(var r=n[0],i="",o="",a=0;a<r.childNodes.length;a++){var s=r.childNodes[a];if("urn:ietf:params:xml:ns:xmpp-streams"!==s.getAttribute("xmlns"))break;"text"===s.nodeName?o=s.textContent:i=s.nodeName}var c="WebSocket stream error: ";return c+=i||"unknown",o&&(c+=" - "+o),D.error(c),this._conn._changeConnectStatus(t,i),this._conn._doDisconnect(),!0},_reset:function(){},_connect:function(){this._closeSocket(),this.socket=new WebSocket(this._conn.service,"xmpp"),this.socket.onopen=this._onOpen.bind(this),this.socket.onerror=this._onError.bind(this),this.socket.onclose=this._onClose.bind(this),this.socket.onmessage=this._connect_cb_wrapper.bind(this)},_connect_cb:function(e){if(this._check_streamerror(e,D.Status.CONNFAIL))return D.Status.CONNFAIL},_handleStreamStart:function(e){var t=!1,n=e.getAttribute("xmlns");"string"!=typeof n?t="Missing xmlns in <open />":n!==D.NS.FRAMING&&(t="Wrong xmlns in <open />: "+n);var r=e.getAttribute("version");return"string"!=typeof r?t="Missing version in <open />":"1.0"!==r&&(t="Wrong version in <open />: "+r),!t||(this._conn._changeConnectStatus(D.Status.CONNFAIL,t),this._conn._doDisconnect(),!1)},_connect_cb_wrapper:function(e){if(0===e.data.indexOf("<open ")||0===e.data.indexOf("<?xml")){var t=e.data.replace(/^(<\?.*?\?>\s*)*/,"");if(""===t)return;var n=(new DOMParser).parseFromString(t,"text/xml").documentElement;this._conn.xmlInput(n),this._conn.rawInput(e.data),this._handleStreamStart(n)&&this._connect_cb(n)}else if(0===e.data.indexOf("<close ")){var r=(new DOMParser).parseFromString(e.data,"text/xml").documentElement;this._conn.xmlInput(r),this._conn.rawInput(e.data);var i=r.getAttribute("see-other-uri");if(i){var o=this._conn.service;(o.indexOf("wss:")>=0&&i.indexOf("wss:")>=0||o.indexOf("ws:")>=0)&&(this._conn._changeConnectStatus(D.Status.REDIRECT,"Received see-other-uri, resetting connection"),this._conn.reset(),this._conn.service=i,this._connect())}else this._conn._changeConnectStatus(D.Status.CONNFAIL,"Received closing stream"),this._conn._doDisconnect()}else{var a=this._streamWrap(e.data),s=(new DOMParser).parseFromString(a,"text/xml").documentElement;this.socket.onmessage=this._onMessage.bind(this),this._conn._connect_cb(s,null,e.data)}},_disconnect:function(e){if(this.socket&&this.socket.readyState!==WebSocket.CLOSED){e&&this._conn.send(e);var t=N("close",{xmlns:D.NS.FRAMING});this._conn.xmlOutput(t.tree());var n=D.serialize(t);this._conn.rawOutput(n);try{this.socket.send(n)}catch(e){D.warn("Couldn't send <close /> tag.")}}this._conn._doDisconnect()},_doDisconnect:function(){D.debug("WebSockets _doDisconnect was called"),this._closeSocket()},_streamWrap:function(e){return"<wrapper>"+e+"</wrapper>"},_closeSocket:function(){if(this.socket)try{this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null,this.socket.close()}catch(e){D.debug(e.message)}this.socket=null},_emptyQueue:function(){return!0},_onClose:function(e){this._conn.connected&&!this._conn.disconnecting?(D.error("Websocket closed unexpectedly"),this._conn._doDisconnect()):e&&1006===e.code&&!this._conn.connected&&this.socket?(D.error("Websocket closed unexcectedly"),this._conn._changeConnectStatus(D.Status.CONNFAIL,"The WebSocket connection could not be established or was disconnected."),this._conn._doDisconnect()):D.debug("Websocket closed")},_no_auth_received:function(e){D.error("Server did not offer a supported authentication mechanism"),this._conn._changeConnectStatus(D.Status.CONNFAIL,D.ErrorCondition.NO_AUTH_MECH),e&&e.call(this._conn),this._conn._doDisconnect()},_onDisconnectTimeout:function(){},_abortAllRequests:function(){},_onError:function(e){D.error("Websocket error "+e),this._conn._changeConnectStatus(D.Status.CONNFAIL,"The WebSocket connection could not be established or was disconnected."),this._disconnect()},_onIdle:function(){var e=this._conn._data;if(e.length>0&&!this._conn.paused){for(var t=0;t<e.length;t++)if(null!==e[t]){var n;n="restart"===e[t]?this._buildStream().tree():e[t];var r=D.serialize(n);this._conn.xmlOutput(n),this._conn.rawOutput(r),this.socket.send(r)}this._conn._data=[]}},_onMessage:function(e){var t,n='<close xmlns="urn:ietf:params:xml:ns:xmpp-framing" />';if(e.data===n)return this._conn.rawInput(n),this._conn.xmlInput(e),void(this._conn.disconnecting||this._conn._doDisconnect());if(0===e.data.search("<open ")){if(t=(new DOMParser).parseFromString(e.data,"text/xml").documentElement,!this._handleStreamStart(t))return}else{var r=this._streamWrap(e.data);t=(new DOMParser).parseFromString(r,"text/xml").documentElement}return this._check_streamerror(t,D.Status.ERROR)?void 0:this._conn.disconnecting&&"presence"===t.firstChild.nodeName&&"unavailable"===t.firstChild.getAttribute("type")?(this._conn.xmlInput(t),void this._conn.rawInput(D.serialize(t))):void this._conn._dataRecv(t,e.data)},_onOpen:function(){D.debug("Websocket open");var e=this._buildStream();this._conn.xmlOutput(e.tree());var t=D.serialize(e);this._conn.rawOutput(t),this.socket.send(t)},_reqToData:function(e){return e},_send:function(){this._conn.flush()},_sendRestart:function(){clearTimeout(this._conn._idleTimeout),this._conn._onIdle.bind(this._conn)()}},e.Strophe=w.Strophe,e.$build=w.$build,e.$iq=w.$iq,e.$msg=w.$msg,e.$pres=w.$pres,w},e.exports=n()}).call(this,n(44))},function(e,t,n){"use strict";var r=n(85);t.a=new r.a},function(e,t,n){var r=n(78),i=n(148),o={},a=[],s=r.levels.TRACE;e.exports={addGlobalTransport:function(e){r.addGlobalTransport(e)},removeGlobalTransport:function(e){r.removeGlobalTransport(e)},setGlobalOptions:function(e){r.setGlobalOptions(e)},getLogger:function(e,t,n){var i=new r(s,e,t,n);return e?(o[e]=o[e]||[],o[e].push(i)):a.push(i),i},setLogLevelById:function(e,t){for(var n=t?o[t]||[]:a,r=0;r<n.length;r++)n[r].setLevel(e)},setLogLevel:function(e){s=e;for(var t=0;t<a.length;t++)a[t].setLevel(e);for(var n in o){var r=o[n]||[];for(t=0;t<r.length;t++)r[t].setLevel(e)}},levels:r.levels,LogCollector:i}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return b});var r,i=n(19),o=n.n(i),a=n(1),s=n(18),c=n(7),u=n(23),d=n(3),l=n(47),h=n.n(l),p=n(87),f=n(35),m=n(60),v=n(88),g=n(89),_=n(61),y=n(4).getLogger(e),S=!1;function E(e){f.a.isBackendInitialized()||f.a.initBackend({callStatsID:e.callStatsID,callStatsSecret:e.callStatsSecret,userName:e.userName,aliasName:e.aliasName,applicationName:e.applicationName,getWiFiStatsMethod:e.getWiFiStatsMethod,confID:e.confID,siteID:e.siteID})||y.error("CallStats Backend initialization failed bad")}function b(e,t){this.rtpStatsMap=new Map,this.eventEmitter=new o.a,this.xmpp=e,this.options=t||{},this.callStatsIntegrationEnabled=this.options.callStatsID&&this.options.callStatsSecret&&this.options.enableCallStats&&!0!==b.disableThirdPartyRequests,this.callStatsIntegrationEnabled&&(this.callStatsApplicationLogsDisabled=this.options.callStatsApplicationLogsDisabled,d.a.isReactNative()?E(this.options):(function(e){S||(h.a.loadScript(e.customScriptUrl||_.a,!0,!0,void 0,function(){return E(e)}),S=!0)})(this.options),this.options.confID||y.warn('"confID" is not defined')),this.callsStatsInstances=new Map,b.instances.add(this)}b.init=function(e){b.audioLevelsEnabled=!e.disableAudioLevels,"number"==typeof e.pcStatsInterval&&(b.pcStatsInterval=e.pcStatsInterval),"number"==typeof e.audioLevelsInterval&&(b.audioLevelsInterval=e.audioLevelsInterval),"number"==typeof e.longTasksStatsInterval&&(b.longTasksStatsInterval=e.longTasksStatsInterval),b.disableThirdPartyRequests=e.disableThirdPartyRequests},b.audioLevelsEnabled=!1,b.audioLevelsInterval=200,b.pcStatsInterval=1e4,b.disableThirdPartyRequests=!1,b.analytics=p.a,Object.defineProperty(b,"instances",{get:function(){return r||(r=new Set),r}}),b.prototype.startRemoteStats=function(e){this.stopRemoteStats(e);try{var t=new g.a(e,b.audioLevelsInterval,b.pcStatsInterval,this.eventEmitter);t.start(b.audioLevelsEnabled),this.rtpStatsMap.set(e.id,t)}catch(e){y.error("Failed to start collecting remote statistics: "+e)}},b.localStats=[],b.startLocalStats=function(e,t){if(b.audioLevelsEnabled){var n=new m.a(e,b.audioLevelsInterval,t);this.localStats.push(n),n.start()}},b.prototype.addAudioLevelListener=function(e){b.audioLevelsEnabled&&this.eventEmitter.on(u.a,e)},b.prototype.removeAudioLevelListener=function(e){b.audioLevelsEnabled&&this.eventEmitter.removeListener(u.a,e)},b.prototype.addBeforeDisposedListener=function(e){this.eventEmitter.on(u.b,e)},b.prototype.removeBeforeDisposedListener=function(e){this.eventEmitter.removeListener(u.b,e)},b.prototype.addConnectionStatsListener=function(e){this.eventEmitter.on(u.d,e)},b.prototype.removeConnectionStatsListener=function(e){this.eventEmitter.removeListener(u.d,e)},b.prototype.addByteSentStatsListener=function(e){this.eventEmitter.on(u.c,e)},b.prototype.removeByteSentStatsListener=function(e){this.eventEmitter.removeListener(u.c,e)},b.prototype.addLongTasksStatsListener=function(e){this.eventEmitter.on(u.e,e)},b.prototype.attachLongTasksStats=function(e){var t=this;d.a.supportsPerformanceObserver()?(this.performanceObserverStats=new v.a(this.eventEmitter,b.longTasksStatsInterval),e.on(a.CONFERENCE_JOINED,function(){return t.performanceObserverStats.startObserver()}),e.on(a.CONFERENCE_LEFT,function(){return t.performanceObserverStats.stopObserver()})):y.warn("Performance observer for long tasks not supported by browser!")},b.prototype.getLongTasksStats=function(){return this.performanceObserverStats?this.performanceObserverStats.getLongTasksStats():null},b.prototype.removeLongTasksStatsListener=function(e){this.eventEmitter.removeListener(u.e,e)},b.prototype.dispose=function(){try{this.callsStatsInstances.size||this.eventEmitter.emit(u.b);for(var e,t=_createForOfIteratorHelperLoose(this.callsStatsInstances.values());!(e=t()).done;){var n=e.value;this.stopCallStats(n.tpc)}for(var r,i=_createForOfIteratorHelperLoose(this.rtpStatsMap.keys());!(r=i()).done;){var o=r.value;this._stopRemoteStats(o)}this.eventEmitter&&this.eventEmitter.removeAllListeners()}finally{b.instances.delete(this)}},b.stopLocalStats=function(e){if(b.audioLevelsEnabled)for(var t=0;t<b.localStats.length;t++)if(b.localStats[t].stream===e){b.localStats.splice(t,1)[0].stop();break}},b.prototype._stopRemoteStats=function(e){var t=this.rtpStatsMap.get(e);t&&(t.stop(),this.rtpStatsMap.delete(e))},b.prototype.stopRemoteStats=function(e){this._stopRemoteStats(e.id)},b.prototype.startCallStats=function(e,t){if(this.callStatsIntegrationEnabled)if(this.callsStatsInstances.has(e.id))y.error("CallStats instance for ${tpc} exists already");else{y.info("Starting CallStats for "+e+"...");var n=new f.a(e,{confID:this.options.confID,remoteUserID:t});this.callsStatsInstances.set(e.id,n)}},b._getAllCallStatsInstances=function(){for(var e,t=new Set,n=_createForOfIteratorHelperLoose(b.instances);!(e=n()).done;)for(var r,i=_createForOfIteratorHelperLoose(e.value.callsStatsInstances.values());!(r=i()).done;){var o=r.value;t.add(o)}return t},b.prototype.stopCallStats=function(e){var t=this.callsStatsInstances.get(e.id);t&&(1===this.callsStatsInstances.size&&this.eventEmitter.emit(u.b),this.callsStatsInstances.delete(e.id),t.sendTerminateEvent())},b.prototype.isCallstatsEnabled=function(){return this.callStatsIntegrationEnabled},b.prototype.sendConnectionResumeOrHoldEvent=function(e,t){var n=this.callsStatsInstances.get(e.id);n&&n.sendResumeOrHoldEvent(t)},b.prototype.sendIceConnectionFailedEvent=function(e){var t=this.callsStatsInstances.get(e.id);t&&t.sendIceConnectionFailedEvent()},b.prototype.sendMuteEvent=function(e,t,n){var r=e&&this.callsStatsInstances.get(e.id);f.a.sendMuteEvent(t,n,r)},b.prototype.sendScreenSharingEvent=function(e,t){for(var n,r=_createForOfIteratorHelperLoose(this.callsStatsInstances.values());!(n=r()).done;){n.value.sendScreenSharingEvent(e,t)}},b.prototype.sendDominantSpeakerEvent=function(e){for(var t,n=_createForOfIteratorHelperLoose(this.callsStatsInstances.values());!(t=n()).done;){t.value.sendDominantSpeakerEvent()}this.xmpp.sendDominantSpeakerEvent(e)},b.sendActiveDeviceListEvent=function(e){var t=b._getAllCallStatsInstances();if(t.size)for(var n,r=_createForOfIteratorHelperLoose(t);!(n=r()).done;){var i=n.value;f.a.sendActiveDeviceListEvent(e,i)}else f.a.sendActiveDeviceListEvent(e,null)},b.prototype.associateStreamWithVideoTag=function(e,t,n,r,i,o){var a=this.callsStatsInstances.get(e.id);a&&a.associateStreamWithVideoTag(t,n,r,i,o)},b.sendGetUserMediaFailed=function(e){var t=e instanceof s.a?(function(e){var t=new Error;return t.stack=e.stack,t.name=(e.name||"Unknown error")+(e.gum&&e.gum.error&&e.gum.error.name?" - "+e.gum.error.name:""),t.constraintName=e.gum&&e.gum.constraints?JSON.stringify(e.gum.constraints):"",t.message=e.message,t})(e):e,n=b._getAllCallStatsInstances();if(n.size)for(var r,i=_createForOfIteratorHelperLoose(n);!(r=i()).done;){var o=r.value;f.a.sendGetUserMediaFailed(t,o)}else f.a.sendGetUserMediaFailed(t,null)},b.prototype.sendCreateOfferFailed=function(e,t){var n=this.callsStatsInstances.get(t.id);n&&n.sendCreateOfferFailed(e)},b.prototype.sendCreateAnswerFailed=function(e,t){var n=this.callsStatsInstances.get(t.id);n&&n.sendCreateAnswerFailed(e)},b.prototype.sendSetLocalDescFailed=function(e,t){var n=this.callsStatsInstances.get(t.id);n&&n.sendSetLocalDescFailed(e)},b.prototype.sendSetRemoteDescFailed=function(e,t){var n=this.callsStatsInstances.get(t.id);n&&n.sendSetRemoteDescFailed(e)},b.prototype.sendAddIceCandidateFailed=function(e,t){var n=this.callsStatsInstances.get(t.id);n&&n.sendAddIceCandidateFailed(e)},b.sendLog=function(e){for(var t,n=new Set,r=_createForOfIteratorHelperLoose(b.instances);!(t=r()).done;){var i=t.value;if(i.callStatsApplicationLogsDisabled)return;i.callsStatsInstances.size&&n.add(i.callsStatsInstances.values().next().value)}if(n.size)for(var o,a=_createForOfIteratorHelperLoose(n);!(o=a()).done;){var s=o.value;f.a.sendApplicationLog(e,s)}else f.a.sendApplicationLog(e,null)},b.prototype.sendFeedback=function(e,t){return b.analytics.sendEvent(c.n,{rating:e,comment:t}),f.a.sendFeedback(this.options.confID,e,t)},b.LOCAL_JID=n(151).LOCAL_JID,b.reportGlobalError=function(e){e instanceof s.a&&e.gum?b.sendGetUserMediaFailed(e):b.sendLog(e)},b.sendAnalyticsAndLog=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e?(t="object"==typeof e?e:{name:e,properties:n},y.log(JSON.stringify(t)),this.analytics.sendEvent(e,n)):y.warn("No event or event name given.")},b.sendAnalytics=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.analytics.sendEvent(e,t)}}).call(this,"modules/statistics/statistics.js")},function(e,t){e.exports={CREATE_ANSWER_FAILED:"rtc.create_answer_failed",CREATE_OFFER_FAILED:"rtc.create_offer_failed",DATA_CHANNEL_OPEN:"rtc.data_channel_open",ENDPOINT_CONN_STATUS_CHANGED:"rtc.endpoint_conn_status_changed",DOMINANT_SPEAKER_CHANGED:"rtc.dominant_speaker_changed",LASTN_ENDPOINT_CHANGED:"rtc.lastn_endpoint_changed",GRANTED_PERMISSIONS:"rtc.granted_permissions",SENDER_VIDEO_CONSTRAINTS_CHANGED:"rtc.sender_video_constraints_changed",LASTN_VALUE_CHANGED:"rtc.lastn_value_changed",LOCAL_TRACK_SSRC_UPDATED:"rtc.local_track_ssrc_updated",LOCAL_TRACK_MAX_ENABLED_RESOLUTION_CHANGED:"rtc.local_track_max_enabled_resolution_changed",TRACK_ATTACHED:"rtc.track_attached",REMOTE_TRACK_ADDED:"rtc.remote_track_added",REMOTE_TRACK_MUTE:"rtc.remote_track_mute",REMOTE_TRACK_REMOVED:"rtc.remote_track_removed",REMOTE_TRACK_UNMUTE:"rtc.remote_track_unmute",SET_LOCAL_DESCRIPTION_FAILED:"rtc.set_local_description_failed",SET_REMOTE_DESCRIPTION_FAILED:"rtc.set_remote_description_failed",AUDIO_OUTPUT_DEVICE_CHANGED:"rtc.audio_output_device_changed",DEVICE_LIST_CHANGED:"rtc.device_list_changed",DEVICE_LIST_WILL_CHANGE:"rtc.device_list_will_change",DEVICE_LIST_AVAILABLE:"rtc.device_list_available",ENDPOINT_MESSAGE_RECEIVED:"rtc.endpoint_message_received",LOCAL_UFRAG_CHANGED:"rtc.local_ufrag_changed",REMOTE_UFRAG_CHANGED:"rtc.remote_ufrag_changed"}},function(e,t,n){"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"t",function(){return o}),n.d(t,"u",function(){return a}),n.d(t,"v",function(){return s}),n.d(t,"w",function(){return c}),n.d(t,"a",function(){return u}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return l}),n.d(t,"d",function(){return h}),n.d(t,"e",function(){return p}),n.d(t,"f",function(){return f}),n.d(t,"g",function(){return m}),n.d(t,"h",function(){return v}),n.d(t,"i",function(){return g}),n.d(t,"j",function(){return _}),n.d(t,"k",function(){return y}),n.d(t,"l",function(){return S}),n.d(t,"m",function(){return E}),n.d(t,"n",function(){return b}),n.d(t,"o",function(){return C}),n.d(t,"p",function(){return T}),n.d(t,"q",function(){return R}),n.d(t,"r",function(){return A}),n.d(t,"s",function(){return k}),n.d(t,"z",function(){return I}),n.d(t,"B",function(){return w}),n.d(t,"A",function(){return P}),n.d(t,"C",function(){return O}),n.d(t,"D",function(){return D}),n.d(t,"E",function(){return N}),n.d(t,"F",function(){return M}),n.d(t,"J",function(){return L}),n.d(t,"G",function(){return x}),n.d(t,"H",function(){return F}),n.d(t,"I",function(){return j}),n.d(t,"K",function(){return H}),n.d(t,"L",function(){return U}),n.d(t,"M",function(){return J}),n.d(t,"x",function(){return B}),n.d(t,"y",function(){return G}),n.d(t,"N",function(){return V});var o="operational",a="page",s="track",c="ui",u="restart",d="session-accept.timeout",l="session-initiate.received",h="session-initiate.timeout",p="terminate",f="transport-replace.received",m="transport-replace.success",v="decline",g="established",_="failed",y="switch.to.jvb",S="available.device",E="connection.disconnected",b="feedback",C="ice.duration",T="ice.establishment.duration.diff",R="ice.state.changed",A="track.no-bytes-sent",k="track.unmuted",I=function(){return{action:"bridge.down",actionSubject:"bridge.down",type:o}},w=function(e,t,n){return{type:o,action:"connection.failed",attributes:r({error_type:e,error_message:t},n)}};function P(e,t){return{action:e,attributes:t,source:"conference",type:o}}var O=function(e,t){var n="connection.stage.reached";return{action:n,actionSubject:e,attributes:t,source:n,type:o}},D=function(e,t,n){return{attributes:{participant_id:e,region:t,rtt:n},name:"e2e_rtt",type:o}},N=function(){return{action:"focus.left",actionSubject:"focus.left",type:o}},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:o,source:"get.user.media",action:e,attributes:t}},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:o,source:"peer.conn.status",action:"duration",attributes:e}},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:o,action:e,source:"jingle",attributes:t}},F=function(e,t){return{attributes:{media_type:e,value:t},action:"track.no.data.from.source",type:o}},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:o,action:e,source:"p2p",attributes:t}},H=function(){return{type:o,action:"remotely.muted"}},U=function(e){return{type:o,action:"rtp.stats",attributes:e}},J=function(e){return{type:o,action:"transport.stats",attributes:e}};function B(e,t,n){return{type:o,action:"audio.output.problem",attributes:{userID:e,localAudioLevels:t,remoteAudioLevels:n}}}var G=function(e,t){return{type:o,action:"bridge-channel.error",attributes:{code:e,reason:t}}},V=function(e){return O("ttfm",e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return o});var r="audio",i="presenter",o="video"},function(e,t,n){"use strict";(function(e){var r=n(4),i=n(36),o=n.n(i),a=n(3),s=n(37),c=n.n(s),u=Object(r.getLogger)(e),d={filterSpecialChars:function(e){return e?e.replace(/[\\\/\{,\}\+]/g,""):e},iceparams:function(e,t){var n,r,i=null;return(r=d.findLine(e,"a=ice-ufrag:",t))&&(n=d.findLine(e,"a=ice-pwd:",t))&&(i={ufrag:d.parseICEUfrag(r),pwd:d.parseICEPwd(n)}),i},parseICEUfrag:function(e){return e.substring(12)},buildICEUfrag:function(e){return"a=ice-ufrag:"+e},parseICEPwd:function(e){return e.substring(10)},buildICEPwd:function(e){return"a=ice-pwd:"+e},parseMID:function(e){return e.substring(6)},parseMLine:function(e){var t={},n=e.substring(2).split(" ");return t.media=n.shift(),t.port=n.shift(),t.proto=n.shift(),""===n[n.length-1]&&n.pop(),t.fmt=n,t},buildMLine:function(e){return"m="+e.media+" "+e.port+" "+e.proto+" "+e.fmt.join(" ")},parseRTPMap:function(e){var t={},n=e.substring(9).split(" ");return t.id=n.shift(),n=n[0].split("/"),t.name=n.shift(),t.clockrate=n.shift(),t.channels=n.length?n.shift():"1",t},parseSCTPMap:function(e){var t=e.substring(10).split(" ");return[t[0],t[1],t.length>2?t[2]:null]},buildRTPMap:function(e){var t="a=rtpmap:"+e.getAttribute("id")+" "+e.getAttribute("name")+"/"+e.getAttribute("clockrate");return e.getAttribute("channels")&&"1"!==e.getAttribute("channels")&&(t+="/"+e.getAttribute("channels")),t},parseCrypto:function(e){var t={},n=e.substring(9).split(" ");return t.tag=n.shift(),t["crypto-suite"]=n.shift(),t["key-params"]=n.shift(),n.length&&(t["session-params"]=n.join(" ")),t},parseFingerprint:function(e){var t={},n=e.substring(14).split(" ");return t.hash=n.shift(),t.fingerprint=n.shift(),t},parseFmtp:function(e){var t=[],n=e.split(" ");n.shift(),n=n.join(" ").split(";");for(var r=0;r<n.length;r++){for(var i=n[r].split("=")[0];i.length&&" "===i[0];)i=i.substring(1);var o=n[r].split("=")[1];i&&o?t.push({name:i,value:o}):i&&t.push({name:"",value:i})}return t},parseICECandidate:function(e){var t={},n=e.split(" ");t.foundation=n[0].substring(12),t.component=n[1],t.protocol=n[2].toLowerCase(),t.priority=n[3],t.ip=n[4],t.port=n[5],t.type=n[7],t.generation=0;for(var r=8;r<n.length;r+=2)switch(n[r]){case"raddr":t["rel-addr"]=n[r+1];break;case"rport":t["rel-port"]=n[r+1];break;case"generation":t.generation=n[r+1];break;case"tcptype":t.tcptype=n[r+1];break;default:u.log("parseICECandidate not translating \""+n[r]+"\" = \""+n[r+1]+"\"")}return t.network="1",t.id=Math.random().toString(36).substr(2,10),t},buildICECandidate:function(e){var t=["a=candidate:"+e.foundation,e.component,e.protocol,e.priority,e.ip,e.port,"typ",e.type].join(" ");switch(t+=" ",e.type){case"srflx":case"prflx":case"relay":e.hasOwnAttribute("rel-addr")&&e.hasOwnAttribute("rel-port")&&(t+="raddr",t+=" ",t+=e["rel-addr"],t+=" ",t+="rport",t+=" ",t+=e["rel-port"],t+=" ")}return e.hasOwnAttribute("tcptype")&&(t+="tcptype",t+=" ",t+=e.tcptype,t+=" "),t+="generation",t+=" ",t+=e.hasOwnAttribute("generation")?e.generation:"0"},parseSSRC:function(e){for(var t=new Map,n=e.split("\r\n"),r=0;r<n.length;r++)if("a=ssrc:"===n[r].substring(0,7)){var i=n[r].split("a=ssrc:")[1].split(" ")[0];t.get(i)||t.set(i,[]),t.get(i).push(n[r])}return t},parseRTCPFB:function(e){var t=e.substr(10).split(" "),n={};return n.pt=t.shift(),n.type=t.shift(),n.params=t,n},parseExtmap:function(e){var t=e.substr(9).split(" "),n={};return n.value=t.shift(),-1===n.value.indexOf("/")?n.direction="both":(n.direction=n.value.substr(n.value.indexOf("/")+1),n.value=n.value.substr(0,n.value.indexOf("/"))),n.uri=t.shift(),n.params=t,n},findLine:function(e,t,n){for(var r=e.split("\r\n"),i=0;i<r.length;i++)if(r[i].substring(0,t.length)===t)return r[i];if(!n)return!1;r=n.split("\r\n");for(var o=0;o<r.length;o++)if(r[o].substring(0,t.length)===t)return r[o];return!1},findLines:function(e,t,n){for(var r=e.split("\r\n"),i=[],o=0;o<r.length;o++)r[o].substring(0,t.length)===t&&i.push(r[o]);if(i.length||!n)return i;r=n.split("\r\n");for(var a=0;a<r.length;a++)r[a].substring(0,t.length)===t&&i.push(r[a]);return i},candidateToJingle:function(e){if(0===e.indexOf("candidate:"))e="a="+e;else if("a=candidate:"!==e.substring(0,12))return u.log("parseCandidate called with a line that is not a candidate line"),u.log(e),null;"\r\n"===e.substring(e.length-2)&&(e=e.substring(0,e.length-2));var t={},n=e.split(" ");if("typ"!==n[6])return u.log("did not find typ in the right place"),u.log(e),null;t.foundation=n[0].substring(12),t.component=n[1],t.protocol=n[2].toLowerCase(),t.priority=n[3],t.ip=n[4],t.port=n[5],t.type=n[7],t.generation="0";for(var r=8;r<n.length;r+=2)switch(n[r]){case"raddr":t["rel-addr"]=n[r+1];break;case"rport":t["rel-port"]=n[r+1];break;case"generation":t.generation=n[r+1];break;case"tcptype":t.tcptype=n[r+1];break;default:u.log("not translating \""+n[r]+"\" = \""+n[r+1]+"\"")}return t.network="1",t.id=Math.random().toString(36).substr(2,10),t},candidateFromJingle:function(e){var t="a=candidate:";t+=e.getAttribute("foundation"),t+=" ",t+=e.getAttribute("component"),t+=" ";var n=e.getAttribute("protocol");switch(a.a.isFirefox()&&"ssltcp"===n.toLowerCase()&&(n="tcp"),t+=n,t+=" ",t+=e.getAttribute("priority"),t+=" ",t+=e.getAttribute("ip"),t+=" ",t+=e.getAttribute("port"),t+=" ",t+="typ",t+=" "+e.getAttribute("type"),t+=" ",e.getAttribute("type")){case"srflx":case"prflx":case"relay":e.getAttribute("rel-addr")&&e.getAttribute("rel-port")&&(t+="raddr",t+=" ",t+=e.getAttribute("rel-addr"),t+=" ",t+="rport",t+=" ",t+=e.getAttribute("rel-port"),t+=" ")}return"tcp"===n.toLowerCase()&&(t+="tcptype",t+=" ",t+=e.getAttribute("tcptype"),t+=" "),t+="generation",t+=" ",(t+=e.getAttribute("generation")||"0")+"\r\n"},parsePrimaryVideoSsrc:function(e){var t=e.ssrcs.map(function(e){return e.id}).filter(function(e,t,n){return n.indexOf(e)===t}).length,n=e.ssrcGroups&&e.ssrcGroups.length||0;if(!(t>1&&0===n)){var r=null;if(1===t)r=e.ssrcs[0].id;else if(2===t){var i=e.ssrcGroups.find(function(e){return"FID"===e.semantics});i&&(r=i.ssrcs.split(" ")[0])}else if(t>=3){var o=e.ssrcGroups.find(function(e){return"SIM"===e.semantics});o&&(r=o.ssrcs.split(" ")[0])}return r}},generateSsrc:function(){return c.a.randomInt(1,4294967295)},getSsrcAttribute:function(e,t,n){for(var r=0;r<e.ssrcs.length;++r){var i=e.ssrcs[r];if(i.id===t&&i.attribute===n)return i.value}},parseGroupSsrcs:function(e){return e.ssrcs.split(" ").map(function(e){return parseInt(e,10)})},getMedia:function(e,t){return e.media.find(function(e){return e.type===t})},getUfrag:function(e){var t=e.split("\n").filter(function(e){return e.startsWith("a=ice-ufrag:")});if(t.length>0)return t[0].substr("a=ice-ufrag:".length)},preferCodec:function(e,t){if(e&&t){var n=e.rtp.filter(function(e){return e.codec&&e.codec.toLowerCase()===t.toLowerCase()}).map(function(e){return e.payload});if(n){for(var r,i=e.payloads.toString().split(" ").map(function(e){return parseInt(e,10)}),o=_createForOfIteratorHelperLoose(n.reverse());!(r=o()).done;){var a=r.value,s=i.indexOf(a);i.splice(s,1),i.unshift(a)}e.payloads=i.join(" ")}}},stripCodec:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e&&t){for(var r,i=[],a=[],s=t.toLowerCase()===o.a.H264&&n,c=_createForOfIteratorHelperLoose(e.rtp);!(r=c()).done;){var u=r.value;u.codec&&u.codec.toLowerCase()===t.toLowerCase()&&(s?i.push(u.payload):a.push(u.payload))}if(s&&(a=e.fmtp.filter(function(e){return i.indexOf(e.payload)>-1&&e.config.includes("profile-level-id=64")}).map(function(e){return e.payload})),a.length>0){var d,l=a.map(function(e){return"apt="+e}),h=e.fmtp.filter(function(e){return-1!==l.indexOf(e.config)});(d=a).push.apply(d,_toConsumableArray(h.map(function(e){return e.payload})));var p=e.payloads.toString().split(" ").map(Number).filter(function(e){return-1===a.indexOf(e)});0===p.length?(e.port=0,e.direction="inactive",e.payloads="*"):e.payloads=p.join(" "),e.rtp=e.rtp.filter(function(e){return-1!==p.indexOf(e.payload)}),e.fmtp=e.fmtp.filter(function(e){return-1!==p.indexOf(e.payload)}),e.rtcpFb&&(e.rtcpFb=e.rtcpFb.filter(function(e){return-1!==p.indexOf(e.payload)}))}}}};t.a=d}).call(this,"modules/xmpp/SDPUtil.js")},function(e,t,n){"use strict";(function(e){var r=n(19),i=n.n(r),o=n(4),a=n(41),s=n.n(a),c=n(18),u=n(43),d=n.n(u),l=n(8),h=n(6),p=n.n(h),f=n(34),m=n.n(f),v=n(13),g=n.n(v),_=n(7),y=n(3),S=n(5),E=n(11),b=n.n(E),C=n(20),T=n(9),R=n(46);function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){k(e,t,n[t])})}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=Object(o.getLogger)(e);y.a.usesAdapter()&&n(164);var w,P,O=new i.a,D=["audio","video"],N={video:{height:{ideal:720,max:720,min:240}}},M=5,L="default",x=!1,F=!1,j=!1,H=!1,U=!1,J=!1,B=document.createElement("audio"),G=void 0!==B.setSinkId;function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={audio:!1,video:!1},r=y.a.isFirefox()||y.a.isSafari()||y.a.isReactNative();if(e.indexOf("video")>=0){if(n.video={mandatory:{},optional:[]},t.cameraDeviceId)r&&(n.video.deviceId=t.cameraDeviceId),n.video.mandatory.sourceId=t.cameraDeviceId;else{var i=t.facingMode||d.a.USER;r&&(n.video.facingMode=i),n.video.optional.push({facingMode:i})}(t.minFps||t.maxFps||t.fps)&&((t.minFps||t.fps)&&(t.minFps=t.minFps||t.fps,n.video.mandatory.minFrameRate=t.minFps),t.maxFps&&(n.video.mandatory.maxFrameRate=t.maxFps)),(function(e,t,n){m.a[n]&&(t&&(e.video.width={ideal:m.a[n].width},e.video.height={ideal:m.a[n].height}),e.video.mandatory.minWidth=m.a[n].width,e.video.mandatory.minHeight=m.a[n].height),e.video.mandatory.minWidth&&(e.video.mandatory.maxWidth=e.video.mandatory.minWidth),e.video.mandatory.minHeight&&(e.video.mandatory.maxHeight=e.video.mandatory.minHeight)})(n,r,t.resolution)}if(e.indexOf("audio")>=0&&(y.a.isReactNative()?n.audio=!0:y.a.isFirefox()?t.micDeviceId?n.audio={mandatory:{},deviceId:t.micDeviceId,optional:[{sourceId:t.micDeviceId}]}:n.audio=!0:(n.audio={mandatory:{},optional:[]},t.micDeviceId&&(r&&(n.audio.deviceId=t.micDeviceId),n.audio.optional.push({sourceId:t.micDeviceId})),n.audio.optional.push({echoCancellation:!j&&!F},{googEchoCancellation:!j&&!F},{googAutoGainControl:!U&&!F},{googNoiseSuppression:!H&&!F},{googHighpassFilter:!J&&!F},{googNoiseSuppression2:!H&&!F},{googEchoCancellation2:!j&&!F},{googAutoGainControl2:!U&&!F}))),e.indexOf("screen")>=0)if(y.a.isChrome())n.video={mandatory:q(A({},t,{source:"screen"})),optional:[]};else if(y.a.isFirefox())n.video={mozMediaSource:"window",mediaSource:"window",frameRate:t.frameRate||{min:M,max:M}};else{var o="'screen' WebRTC media source is supported only in Chrome and Firefox";b.a.callErrorHandler(new Error(o)),I.error(o)}return e.indexOf("desktop")>=0&&(n.video={mandatory:q(A({},t,{source:"desktop"})),optional:[]},y.a.isElectron()&&t.screenShareAudio&&t.desktopStream.indexOf("screen")>=0&&(n.audio={mandatory:{chromeMediaSource:n.video.mandatory.chromeMediaSource}})),t.bandwidth&&(n.video||(n.video={mandatory:{},optional:[]}),n.video.optional.push({bandwidth:t.bandwidth})),y.a.isFirefox()&&t.firefox_fake_device&&(n.fake=!0),n}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.desktopStream,n=e.frameRate,r=void 0===n?{min:M,max:M}:n,i=r.max,o=r.min,a={chromeMediaSource:e.source,maxWidth:window.screen.width,maxHeight:window.screen.height};return"number"==typeof o&&(a.minFrameRate=o),"number"==typeof i&&(a.maxFrameRate=i),void 0!==t&&(a.chromeMediaSourceId=t),a}function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={frameRate:M},n=e.desktopSharingFrameRate;return n&&n.max&&(t.frameRate=n.max),t}function W(e,t){var n=Boolean(t)&&t.getAudioTracks().length>0,r=Boolean(t)&&t.getVideoTracks().length>0,i={};-1!==e.indexOf("video")&&(i.video=r),-1!==e.indexOf("audio")&&(i.audio=n),O.emit(p.a.GRANTED_PERMISSIONS,i)}function z(e){var t=e.filter(function(e){return"audioinput"===e.kind}).length,n=e.filter(function(e){return"audiooutput"===e.kind}).length,r=e.filter(function(e){return"videoinput"===e.kind}).length,i=e.filter(function(e){return"videooutput"===e.kind}).length;e.forEach(function(e){var o={audio_input_device_count:t,audio_output_device_count:n,video_input_device_count:r,video_output_device_count:i,device_id:e.deviceId,device_group_id:e.groupId,device_kind:e.kind,device_label:e.label};S.a.sendAnalytics(_.l,o)})}var $=new((function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this,O)}return _createClass(n,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("boolean"==typeof t.disableAEC&&(j=t.disableAEC,I.info("Disable AEC: "+j)),"boolean"==typeof t.disableNS&&(H=t.disableNS,I.info("Disable NS: "+H)),"boolean"==typeof t.disableAP&&(F=t.disableAP,I.info("Disable AP: "+F)),"boolean"==typeof t.disableAGC&&(U=t.disableAGC,I.info("Disable AGC: "+U)),"boolean"==typeof t.disableHPF&&(J=t.disableHPF,I.info("Disable HPF: "+J)),w=[],window.clearInterval(P),P=void 0,this.enumerateDevices=(function(){if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)return function(e){navigator.mediaDevices.enumerateDevices().then(e,function(){return e([])})}})(),y.a.usesNewGumFlow())this.RTCPeerConnectionType=RTCPeerConnection,this.attachMediaStream=Q(function(e,t){e&&(e.srcObject=t)}),this.getStreamID=function(e){return e.id},this.getTrackID=function(e){return e.id};else{if(!y.a.isChromiumBased()&&!y.a.isReactNative()){var n="Endpoint does not appear to be WebRTC-capable";throw I.error(n),new Error(n)}this.RTCPeerConnectionType=RTCPeerConnection,this.attachMediaStream=Q(function(e,t){return(function(e,t){var n,r="srcObject";r in e||((r="mozSrcObject")in e||(r=null)),r?e[r]=t:(t&&((n=t.jitsiObjectURL)||(t.jitsiObjectURL=n=URL.createObjectURL(t))),e.src=n||"")})(e,t),e}),this.getStreamID=function(e){var t=e.id;return"number"==typeof t?t:T.a.filterSpecialChars(t)},this.getTrackID=function(e){return e.id},MediaStream.prototype.getVideoTracks||(MediaStream.prototype.getVideoTracks=function(){return this.videoTracks}),MediaStream.prototype.getAudioTracks||(MediaStream.prototype.getAudioTracks=function(){return this.audioTracks})}this._initPCConstraints(),R.a.init(t,this.getUserMediaWithConstraints.bind(this)),this.isDeviceListAvailable()&&this.enumerateDevices(function(t){w=t.splice(0),I.debug("Available devices: ",w),z(w),O.emit(p.a.DEVICE_LIST_AVAILABLE,w);var n=function(){return e.enumerateDevices(function(e){var t;(function(e){return e.length!==w.length||e.map(t).sort().join("")!==w.map(t).sort().join("");function t(e){return JSON.stringify({kind:e.kind,deviceId:e.deviceId,groupId:e.groupId,label:e.label,facing:e.facing})}})(e)&&(w=(t=e).slice(0),I.info("list of media devices has changed:",w),z(w),O.emit(p.a.DEVICE_LIST_WILL_CHANGE,t),O.emit(p.a.DEVICE_LIST_CHANGED,t))})};y.a.supportsDeviceChangeEvent()?navigator.mediaDevices.addEventListener("devicechange",n):P=window.setInterval(n,3e3)})}},{key:"_initPCConstraints",value:function(){y.a.isFirefox()?this.pcConstraints={}:(y.a.isChromiumBased()||y.a.isReactNative())&&(this.pcConstraints={optional:[{googHighStartBitrate:0},{googPayloadPadding:!0},{googScreencastMinBitrate:100},{googCpuOveruseDetection:!0},{googCpuOveruseEncodeUsage:!0},{googCpuUnderuseThreshold:55},{googCpuOveruseThreshold:85}]},this.p2pPcConstraints=JSON.parse(JSON.stringify(this.pcConstraints))),this.p2pPcConstraints=this.p2pPcConstraints||this.pcConstraints}},{key:"getUserMediaWithConstraints",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=V(e,t);return I.info("Get media constraints",n),new Promise(function(t,r){navigator.mediaDevices.getUserMedia(n).then(function(n){I.log("onUserMediaSuccess"),W(e,n),t(n)}).catch(function(t){I.warn("Failed to get access to local media.  "+t+" "+n+" "),W(e,void 0),r(new c.a(t,n,e))})})}},{key:"_newGetUserMediaWithConstraints",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,r){navigator.mediaDevices.getUserMedia(t).then(function(t){I.log("onUserMediaSuccess"),W(e,t),n(t)}).catch(function(n){I.warn("Failed to get access to local media.  "+n+" "+t+" "),W(e,void 0),r(new c.a(n,t,e))})})}},{key:"_newGetDesktopMedia",value:function(e){var t=this;return R.a.isSupported()&&y.a.supportsVideo()?new Promise(function(n,r){R.a.obtainStream(t._parseDesktopSharingOptions(e),function(e){n(e)},function(e){r(e)})}):Promise.reject(new Error("Desktop sharing is not supported!"))}},{key:"obtainAudioAndVideoPermissions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.devices=e.devices||[].concat(D),e.resolution=e.resolution||720,e.devices.includes("desktop")&&!R.a.isSupported()?Promise.reject(new Error("Desktop sharing is not supported!")):this._getAudioAndVideoStreams(e).then(function(t){return(function(e,t){var n,r,i,o=[];if(e){var a=e.audioVideo;if(a){var s=a.getAudioTracks();if(s.length){n=new MediaStream;for(var c=0;c<s.length;c++)n.addTrack(s[c])}var u=a.getVideoTracks();if(u.length){i=new MediaStream;for(var d=0;d<u.length;d++)i.addTrack(u[d])}}else n=e.audio,i=e.video;r=e.desktop}if(r){var h=r,p=h.stream,f=h.sourceId,m=h.sourceType;o.push({stream:p,sourceId:f,sourceType:m,track:p.getVideoTracks()[0],mediaType:l.c,videoType:g.a.DESKTOP})}return n&&o.push({stream:n,track:n.getAudioTracks()[0],mediaType:l.a,videoType:null}),i&&o.push({stream:i,track:i.getVideoTracks()[0],mediaType:l.c,videoType:g.a.CAMERA,resolution:t}),o})(t,e.resolution)})}},{key:"_getAudioAndVideoStreams",value:function(e){var t=this,n=e.devices.includes("desktop");return e.devices=e.devices.filter(function(e){return"desktop"!==e}),(e.devices.length?this.getUserMediaWithConstraints(e.devices,e):Promise.resolve(null)).then(function(n){var r=t._getMissingTracks(e.devices,n);return r.length?(t.stopMediaStream(n),t.getUserMediaWithConstraints(r,e).then(function(){return Promise.reject(new c.a({name:"UnknownError"},V(e.devices,e),r))})):n}).then(function(r){if(!n)return{audioVideo:r};if(e.desktopSharingSourceDevice)throw t.stopMediaStream(r),new Error("Using a camera as screenshare source isnot supported on this browser.");return new Promise(function(n,i){R.a.obtainStream(t._parseDesktopSharingOptions(e),function(e){return n({audioVideo:r,desktop:e})},function(e){r&&t.stopMediaStream(r),i(e)})})})}},{key:"_getMissingTracks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=[],r=e.includes("audio"),i=t&&t.getAudioTracks().length>0;r&&!i&&n.push("audio");var o=e.includes("video"),a=t&&t.getVideoTracks().length>0;return o&&!a&&n.push("video"),n}},{key:"_parseDesktopSharingOptions",value:function(e){return{desktopSharingSources:e.desktopSharingSources,gumOptions:{frameRate:e.desktopSharingFrameRate},trackOptions:K(e)}}},{key:"newObtainAudioAndVideoPermissions",value:function(e){var t=this;I.info("Using the new gUM flow");var n=[],r=function(){if(-1===(e.devices||[]).indexOf("desktop"))return Promise.resolve();var t=e.desktopSharingSourceDevice,n=e.desktopSharingSources,r=e.desktopSharingFrameRate;if(t){var i=w&&w.find(function(e){return"videoinput"===e.kind&&(e.deviceId===t||e.label===t)});if(!i)return Promise.reject(new c.a({name:"ConstraintNotSatisfiedError"},{},[t]));var o=this._parseDesktopSharingOptions(e),a=o.gumOptions,s=o.trackOptions,u={video:A({},a,{deviceId:i.deviceId})};return this._newGetUserMediaWithConstraints(["video"],u).then(function(e){var t=e&&e.getTracks()[0];return(t&&t.applyConstraints?t.applyConstraints(s):Promise.resolve()).then(function(){return{sourceType:"device",stream:e}})})}return this._newGetDesktopMedia({desktopSharingSources:n,desktopSharingFrameRate:r})}.bind(this),i=function(){var t=(e.devices||["audio","video"]).filter(function(e){return"audio"===e||"video"===e&&y.a.supportsVideo()});if(!t.length)return Promise.resolve();var n=(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s()(t.constraints||N);if(e.indexOf("video")>=0)if(n.video||(n.video={}),y.a.isSafari()&&(n.video.height&&n.video.height.ideal?n.video.height={ideal:s()(n.video.height.ideal)}:I.warn("Ideal camera height missing, camera may not start properly"),n.video.width&&n.video.width.ideal?n.video.width={ideal:s()(n.video.width.ideal)}:I.warn("Ideal camera width missing, camera may not start properly")),t.cameraDeviceId)n.video.deviceId=t.cameraDeviceId;else{var r=t.facingMode||d.a.USER;n.video.facingMode=r}else n.video=!1;return e.indexOf("audio")>=0?(n.audio&&"boolean"!=typeof n.audio||(n.audio={}),y.a.isFirefox()||y.a.isSafari()?n.audio={deviceId:t.micDeviceId,autoGainControl:!U&&!F,echoCancellation:!j&&!F,noiseSuppression:!H&&!F}:(n.audio.optional||(n.audio.optional=[]),n.audio.optional.push({sourceId:t.micDeviceId},{echoCancellation:!j&&!F},{googEchoCancellation:!j&&!F},{googAutoGainControl:!U&&!F},{googNoiseSuppression:!H&&!F},{googHighpassFilter:!J&&!F},{googNoiseSuppression2:!H&&!F},{googEchoCancellation2:!j&&!F},{googAutoGainControl2:!U&&!F}))):n.audio=!1,e.indexOf("desktop")>=0&&(n.video&&"boolean"!=typeof n.video||(n.video={}),n.video={mandatory:q(A({},t,{source:"desktop"}))}),n})(t,e);return I.info("Got media constraints: ",n),this._newGetUserMediaWithConstraints(t,n)}.bind(this);return r().then(function(e){if(e){var t=e.stream,r=e.sourceId,i=e.sourceType,o=t.getAudioTracks();if(o.length){var a=new MediaStream(o);n.push({stream:a,sourceId:r,sourceType:i,track:a.getAudioTracks()[0]})}var s=t.getVideoTracks();if(s.length){var c=new MediaStream(s);n.push({stream:c,sourceId:r,sourceType:i,track:c.getVideoTracks()[0],videoType:g.a.DESKTOP})}}}).then(i).then(function(t){if(t){var r=t.getAudioTracks();if(r.length){var i=new MediaStream(r);n.push({stream:i,track:i.getAudioTracks()[0],effects:e.effects})}var o=t.getVideoTracks();if(o.length){var a=new MediaStream(o);n.push({stream:a,track:a.getVideoTracks()[0],videoType:g.a.CAMERA,effects:e.effects})}}}).then(function(){return n}).catch(function(e){return n.forEach(function(e){var n=e.stream;t.stopMediaStream(n)}),Promise.reject(e)})}},{key:"isDeviceListAvailable",value:function(){return Boolean(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)}},{key:"isDeviceChangeAvailable",value:function(e){return"output"!==e&&"audiooutput"!==e||G}},{key:"stopMediaStream",value:function(e){if(e){e.getTracks().forEach(function(e){e.stop&&e.stop()}),e.stop&&e.stop(),e.release&&e.release();var t=e.jitsiObjectURL;t&&(delete e.jitsiObjectURL,URL.revokeObjectURL(t))}}},{key:"isDesktopSharingEnabled",value:function(){return R.a.isSupported()}},{key:"setAudioOutputDevice",value:function(e){return this.isDeviceChangeAvailable("output")?B.setSinkId(e).then(function(){L=e,x=!0,I.log("Audio output device set to "+e),O.emit(p.a.AUDIO_OUTPUT_DEVICE_CHANGED,e)}):Promise.reject(new Error("Audio output device change is not supported"))}},{key:"getAudioOutputDevice",value:function(){return L}},{key:"getCurrentlyAvailableMediaDevices",value:function(){return w}},{key:"getEventDataForActiveDevice",value:function(e){var t=[],n={deviceId:e.deviceId,kind:e.kind,label:e.label,groupId:e.groupId};return t.push(n),{deviceList:t}}},{key:"setSuspendVideo",value:function(e,t){e.optional||(e.optional=[]),e.optional=e.optional.filter(function(e){return!e.hasOwnProperty("googSuspendBelowMinBitrate")}),t&&e.optional.push({googSuspendBelowMinBitrate:"true"})}}]),n})(C.a));function Q(e){return function(t,n){var r=e.apply($,arguments);return n&&$.isDeviceChangeAvailable("output")&&n.getAudioTracks&&n.getAudioTracks().length&&x&&t.setSinkId($.getAudioOutputDevice()).catch(function(e){var n=new c.a(e,null,["audiooutput"]);b.a.callUnhandledRejectionHandler({promise:this,reason:n}),I.warn("Failed to set audio output device for the element. Default audio output device will be used instead",t,n)}),r}}t.a=$}).call(this,"modules/RTC/RTCUtils.js")},function(e,t){var n=[],r=window.onerror,i=window.onunhandledrejection;window.onerror=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.forEach(function(e){return e.apply(void 0,t)}),r&&r.apply(void 0,t)},window.onunhandledrejection=function(e){n.forEach(function(t){return t(null,null,null,null,e.reason)}),i&&i(e)};var o={addHandler:function(e){n.push(e)},callErrorHandler:function(e){var t=window.onerror;t&&t(null,null,null,null,e)},callUnhandledRejectionHandler:function(e){var t=window.onunhandledrejection;t&&t(e)}};e.exports=o},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return A});var r=n(4),i=n(1),o=n(8),a=n(6),s=n.n(a),c=n(13),u=n.n(c),d=n(3),l=n(5),h=n(11),p=n.n(h),f=n(20),m=n(27),v=n(113),g=n(74),_=n(10),y=n(115);function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=Object(r.getLogger)(e),b=0,C=0;function T(e,t){var n=[],r=null;return e.forEach(function(e){e.mediaType===o.a?r=t.micDeviceId:e.videoType===u.a.CAMERA&&(r=t.cameraDeviceId),C=Object(m.e)(C);var i=new g.a((function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){S(e,t,n[t])})}return e})({},e,{deviceId:r,facingMode:t.facingMode,rtcId:C,effects:t.effects}));n.push(i)}),n}function R(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(e){var t=e.sourceId,n=e.sourceType,r=e.stream,i=e.track,o=e.videoType,a=e.effects,s=i.getSettings(),c=s.deviceId,u=s.facingMode;return C=Object(m.e)(C),new g.a({deviceId:c,facingMode:u,mediaType:i.kind,rtcId:C,sourceId:t,sourceType:n,stream:r,track:i,videoType:o||null,effects:a})})}var A=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck(this,n),(r=t.call(this)).conference=e,r.peerConnections=new Map,r.localTracks=[],r.options=i,r._channel=null,r._lastN=-1,r._lastNEndpoints=null,r._senderVideoConstraints={},r._maxFrameHeight=void 0,r._pinnedEndpoint=null,r._selectedEndpoints=[],r._lastNChangeListener=r._onLastNChanged.bind(_assertThisInitialized(r)),r._onDeviceListChanged=r._onDeviceListChanged.bind(_assertThisInitialized(r)),r._updateAudioOutputForAudioTracks=r._updateAudioOutputForAudioTracks.bind(_assertThisInitialized(r)),_.a.isDeviceChangeAvailable("output")&&(_.a.addListener(s.a.AUDIO_OUTPUT_DEVICE_CHANGED,r._updateAudioOutputForAudioTracks),_.a.addListener(s.a.DEVICE_LIST_CHANGED,r._onDeviceListChanged)),r}return _createClass(n,[{key:"destroy",value:function(){_.a.removeListener(s.a.AUDIO_OUTPUT_DEVICE_CHANGED,this._updateAudioOutputForAudioTracks),_.a.removeListener(s.a.DEVICE_LIST_CHANGED,this._onDeviceListChanged),this.removeListener(s.a.LASTN_ENDPOINT_CHANGED,this._lastNChangeListener),this._channelOpenListener&&this.removeListener(s.a.DATA_CHANNEL_OPEN,this._channelOpenListener)}},{key:"initializeBridgeChannel",value:function(e,t){var n=this;this._channel=new v.a(e,t,this.eventEmitter,this._senderVideoConstraintsChanged.bind(this)),this._channelOpenListener=function(){try{n._channel.sendPinnedEndpointMessage(n._pinnedEndpoint),n._channel.sendSelectedEndpointsMessage(n._selectedEndpoints),void 0!==n._maxFrameHeight&&n._channel.sendReceiverVideoConstraintMessage(n._maxFrameHeight)}catch(e){p.a.callErrorHandler(e),E.error("Cannot send selected("+n._selectedEndpoint+")pinned("+n._pinnedEndpoint+")frameHeight("+n._maxFrameHeight+") endpoint message",e)}n.removeListener(s.a.DATA_CHANNEL_OPEN,n._channelOpenListener),n._channelOpenListener=null,-1!==n._lastN&&n._channel.sendSetLastNMessage(n._lastN)},this.addListener(s.a.DATA_CHANNEL_OPEN,this._channelOpenListener),this.addListener(s.a.LASTN_ENDPOINT_CHANGED,this._lastNChangeListener)}},{key:"_onDeviceListChanged",value:function(){this._updateAudioOutputForAudioTracks(_.a.getAudioOutputDevice())}},{key:"_senderVideoConstraintsChanged",value:function(e){this._senderVideoConstraints=e,this.eventEmitter.emit(s.a.SENDER_VIDEO_CONSTRAINTS_CHANGED)}},{key:"_onLastNChanged",value:function(){var e,t,n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=this._lastNEndpoints||[];this._lastNEndpoints=r,e=o.filter(function(e){return!n.isInLastN(e)}),t=r.filter(function(e){return-1===o.indexOf(e)}),this.conference.eventEmitter.emit(i.LAST_N_ENDPOINTS_CHANGED,e,t)}},{key:"onCallEnded",value:function(){this._channel&&(this._channel&&"websocket"===this._channel.mode&&this._channel.close(),this._channel=null)}},{key:"setReceiverVideoConstraint",value:function(e){this._maxFrameHeight=e,this._channel&&this._channel.isOpen()&&this._channel.sendReceiverVideoConstraintMessage(e)}},{key:"selectEndpoints",value:function(e){this._selectedEndpoints=e,this._channel&&this._channel.isOpen()&&this._channel.sendSelectedEndpointsMessage(e)}},{key:"pinEndpoint",value:function(e){this._pinnedEndpoint=e,this._channel&&this._channel.isOpen()&&this._channel.sendPinnedEndpointMessage(e)}},{key:"createPeerConnection",value:function(e,t,r,i){var o=n.getPCConstraints(r);void 0!==i.abtestSuspendVideo&&(_.a.setSuspendVideo(o,i.abtestSuspendVideo),l.a.analytics.addPermanentProperties({abtestSuspendVideo:i.abtestSuspendVideo})),i.enableInsertableStreams&&(E.debug("E2EE - setting insertable streams constraints"),t.encodedInsertableStreams=!0,t.forceEncodedAudioInsertableStreams=!0,t.forceEncodedVideoInsertableStreams=!0),d.a.supportsSdpSemantics()&&(t.sdpSemantics="plan-b"),t.bundlePolicy="max-bundle",b=Object(m.e)(b);var a=new y.a(this,b,e,t,o,r,i);return this.peerConnections.set(a.id,a),a}},{key:"_removePeerConnection",value:function(e){var t=e.id;return!!this.peerConnections.has(t)&&(this.peerConnections.delete(t),!0)}},{key:"addLocalTrack",value:function(e){if(!e)throw new Error("track must not be null nor undefined");this.localTracks.push(e),e.conference=this.conference}},{key:"getLastN",value:function(){return this._lastN}},{key:"getSenderVideoConstraints",value:function(){return this._senderVideoConstraints}},{key:"getLocalVideoTrack",value:function(){var e=this.getLocalTracks(o.c);return e.length?e[0]:void 0}},{key:"getLocalAudioTrack",value:function(){var e=this.getLocalTracks(o.a);return e.length?e[0]:void 0}},{key:"getLocalTracks",value:function(e){var t=this.localTracks.slice();return void 0!==e&&(t=t.filter(function(t){return t.getType()===e})),t}},{key:"getRemoteTracks",value:function(e){for(var t,n=[],r=_createForOfIteratorHelperLoose(this.peerConnections.values());!(t=r()).done;){var i=t.value.getRemoteTracks(void 0,e);i&&(n=n.concat(i))}return n}},{key:"setAudioMute",value:function(e){var t=[];return this.getLocalTracks(o.a).forEach(function(n){t.push(e?n.mute():n.unmute())}),Promise.all(t)}},{key:"removeLocalTrack",value:function(e){var t=this.localTracks.indexOf(e);-1!==t&&this.localTracks.splice(t,1)}},{key:"removeRemoteTracks",value:function(e){for(var t,n=[],r=_createForOfIteratorHelperLoose(this.peerConnections.values());!(t=r()).done;){var i=t.value.removeRemoteTracks(e);n=n.concat(i)}return E.debug("Removed remote tracks for "+e+" count: "+n.length),n}},{key:"closeBridgeChannel",value:function(){this._channel&&(this._channel.close(),this._channel=null,this.removeListener(s.a.LASTN_ENDPOINT_CHANGED,this._lastNChangeListener))}},{key:"setAudioLevel",value:function(e,t,n,r){var i=e.getTrackBySSRC(t);i&&(i.isAudioTrack()?(i.isLocal()!==r&&E.error(i+" was expected to "+(r?"be":"not be")+" local"),i.setAudioLevel(n,e)):E.warn("Received audio level for non-audio track: "+t))}},{key:"sendChannelMessage",value:function(e,t){if(!this._channel)throw new Error("Channel support is disabled!");this._channel.sendMessage(e,t)}},{key:"setLastN",value:function(e){this._lastN!==e&&(this._lastN=e,this._channel&&this._channel.isOpen()&&this._channel.sendSetLastNMessage(e),this.eventEmitter.emit(s.a.LASTN_VALUE_CHANGED,e))}},{key:"isInLastN",value:function(e){return!this._lastNEndpoints||this._lastNEndpoints.indexOf(e)>-1}},{key:"_updateAudioOutputForAudioTracks",value:function(e){for(var t,n=_createForOfIteratorHelperLoose(this.getRemoteTracks(o.a));!(t=n()).done;){t.value.setAudioOutput(e)}}}],[{key:"newCreateLocalTracks",value:function(e){return R(e)}},{key:"obtainAudioAndVideoPermissions",value:function(e){var t=d.a.usesNewGumFlow();return(t?_.a.newObtainAudioAndVideoPermissions(e):_.a.obtainAudioAndVideoPermissions(e)).then(function(n){return t?R(n):T(n,e)})}},{key:"addListener",value:function(e,t){_.a.addListener(e,t)}},{key:"removeListener",value:function(e,t){_.a.removeListener(e,t)}},{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.options=e,_.a.init(this.options)}},{key:"getPCConstraints",value:function(e){var t=e?_.a.p2pPcConstraints:_.a.pcConstraints;return t?JSON.parse(JSON.stringify(t)):{}}},{key:"attachMediaStream",value:function(e,t){return _.a.attachMediaStream(e,t)}},{key:"getStreamID",value:function(e){return _.a.getStreamID(e)}},{key:"getTrackID",value:function(e){return _.a.getTrackID(e)}},{key:"isDeviceListAvailable",value:function(){return _.a.isDeviceListAvailable()}},{key:"isDeviceChangeAvailable",value:function(e){return _.a.isDeviceChangeAvailable(e)}},{key:"isWebRtcSupported",value:function(){return d.a.isSupported()}},{key:"getAudioOutputDevice",value:function(){return _.a.getAudioOutputDevice()}},{key:"getCurrentlyAvailableMediaDevices",value:function(){return _.a.getCurrentlyAvailableMediaDevices()}},{key:"getEventDataForActiveDevice",value:function(e){return _.a.getEventDataForActiveDevice(e)}},{key:"setAudioOutputDevice",value:function(e){return _.a.setAudioOutputDevice(e)}},{key:"isUserStream",value:function(e){return n.isUserStreamById(_.a.getStreamID(e))}},{key:"isUserStreamById",value:function(e){return e&&"mixedmslabel"!==e&&"default"!==e}},{key:"enumerateDevices",value:function(e){_.a.enumerateDevices(e)}},{key:"stopMediaStream",value:function(e){_.a.stopMediaStream(e)}},{key:"isDesktopSharingEnabled",value:function(){return _.a.isDesktopSharingEnabled()}}]),n})(f.a)}).call(this,"modules/RTC/RTC.js")},function(e,t){e.exports={CAMERA:"camera",DESKTOP:"desktop"}},function(e,t,n){"use strict";n.r(t),n.d(t,"CONSTRAINT_FAILED",function(){return r}),n.d(t,"ELECTRON_DESKTOP_PICKER_ERROR",function(){return i}),n.d(t,"ELECTRON_DESKTOP_PICKER_NOT_FOUND",function(){return o}),n.d(t,"GENERAL",function(){return a}),n.d(t,"NOT_FOUND",function(){return s}),n.d(t,"PERMISSION_DENIED",function(){return c}),n.d(t,"SCREENSHARING_GENERIC_ERROR",function(){return u}),n.d(t,"SCREENSHARING_USER_CANCELED",function(){return d}),n.d(t,"TRACK_IS_DISPOSED",function(){return l}),n.d(t,"TRACK_NO_STREAM_FOUND",function(){return h}),n.d(t,"UNSUPPORTED_RESOLUTION",function(){return p});var r="gum.constraint_failed",i="gum.electron_desktop_picker_error",o="gum.electron_desktop_picker_not_found",a="gum.general",s="gum.not_found",c="gum.permission_denied",u="gum.screensharing_generic_error",d="gum.screensharing_user_canceled",l="track.track_is_disposed",h="track.no_stream_found",p="gum.unsupported_resolution"},function(e,t,n){"use strict";n.r(t),n.d(t,"LOCAL_TRACK_STOPPED",function(){return r}),n.d(t,"TRACK_AUDIO_LEVEL_CHANGED",function(){return i}),n.d(t,"TRACK_AUDIO_OUTPUT_CHANGED",function(){return o}),n.d(t,"TRACK_MUTE_CHANGED",function(){return a}),n.d(t,"TRACK_VIDEOTYPE_CHANGED",function(){return s}),n.d(t,"NO_DATA_FROM_SOURCE",function(){return c}),n.d(t,"NO_AUDIO_INPUT",function(){return u});var r="track.stopped",i="track.audioLevelsChanged",o="track.audioOutputChanged",a="track.trackMuteChanged",s="track.videoTypeChanged",c="track.no_data_from_source",u="track.no_audio_input"},function(e,t,n){"use strict";n.r(t),n.d(t,"AUTHENTICATION_REQUIRED",function(){return r}),n.d(t,"CHAT_ERROR",function(){return i}),n.d(t,"CONFERENCE_DESTROYED",function(){return o}),n.d(t,"CONFERENCE_MAX_USERS",function(){return a}),n.d(t,"CONNECTION_ERROR",function(){return s}),n.d(t,"NOT_ALLOWED_ERROR",function(){return c}),n.d(t,"MEMBERS_ONLY_ERROR",function(){return u}),n.d(t,"CONFERENCE_ACCESS_DENIED",function(){return d}),n.d(t,"FOCUS_DISCONNECTED",function(){return l}),n.d(t,"FOCUS_LEFT",function(){return h}),n.d(t,"GRACEFUL_SHUTDOWN",function(){return p}),n.d(t,"ICE_FAILED",function(){return f}),n.d(t,"INCOMPATIBLE_SERVER_VERSIONS",function(){return m}),n.d(t,"OFFER_ANSWER_FAILED",function(){return v}),n.d(t,"PASSWORD_NOT_SUPPORTED",function(){return g}),n.d(t,"PASSWORD_REQUIRED",function(){return _}),n.d(t,"RESERVATION_ERROR",function(){return y}),n.d(t,"VIDEOBRIDGE_NOT_AVAILABLE",function(){return S});var r="conference.authenticationRequired",i="conference.chatError",o="conference.destroyed",a="conference.max_users",s="conference.connectionError",c="conference.connectionError.notAllowed",u="conference.connectionError.membersOnly",d="conference.connectionError.accessDenied",l="conference.focusDisconnected",h="conference.focusLeft",p="conference.gracefulShutdown",f="conference.iceFailed",m="conference.incompatible_server_versions",v="conference.offerAnswerFailed",g="conference.passwordNotSupported",_="conference.passwordRequired",y="conference.reservationError",S="conference.videobridgeNotAvailable"},function(e,t,n){"use strict";n.d(t,"a",function(){return S}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return b});var r={};n.r(r),n.d(r,"CHROME",function(){return a}),n.d(r,"OPERA",function(){return s}),n.d(r,"FIREFOX",function(){return c}),n.d(r,"INTERNET_EXPLORER",function(){return u}),n.d(r,"SAFARI",function(){return d}),n.d(r,"NWJS",function(){return l}),n.d(r,"ELECTRON",function(){return h}),n.d(r,"REACT_NATIVE",function(){return p}),n.d(r,"UNKNOWN",function(){return f}),n(72);var i=n(86),o=n.n(i),a="chrome",s="opera",c="firefox",u="iexplorer",d="safari",l="nwjs",h="electron",p="react-native",f="unknown",m={Chrome:a,Chromium:a,Opera:s,Firefox:c,"Internet Explorer":u,Safari:d};function v(){var e=navigator.userAgent;if(e.match(/Electron/)){var t=e.match(/Electron\/([\d.]+)/)[1];return{name:h,version:t}}}function g(){var e=navigator.userAgent;if(e.match(/JitsiMeetNW/)){var t=e.match(/JitsiMeetNW\/([\d.]+)/)[1];return{name:l,version:t}}}function _(){var e,t,n=navigator.userAgent.match(/\b(react[ \t_-]*native)(?:\/(\S+))?/i);if(n||"ReactNative"===navigator.product)return n&&n.length>2&&(t=n[1],e=n[2]),t||(t="react-native"),e||(e="unknown"),{name:p,version:e}}function y(e){for(var t,n=[_,v,g],r=0;r<n.length;r++)if(t=n[r]())return t;var i=e.getBrowserName();return i in m?{name:m[i],version:e.getBrowserVersion()}:(t=(function(){var e=navigator.userAgent,t={name:f,version:void 0};if(e.match(/Chrome/)&&!e.match(/Edge/))if(e.match(/Edg(A?)/)){var n=e.match(/Chrome\/([\d.]+)/)[1];Number.parseInt(n,10)>72&&(t.name=a,t.version=n)}else t.name=a,t.version=e.match(/Chrome\/([\d.]+)/)[1];return t})())||{name:f,version:void 0}}var S=(function(){function e(t){var n,r;if(_classCallCheck(this,e),this._bowser=o.a.getParser(navigator.userAgent),void 0===t){var i=y(this._bowser);n=i.name,r=i.version}else t.name in m?(n=m[t.name],r=t.version):(n=f,r=void 0);this._name=n,this._version=r}return _createClass(e,[{key:"getName",value:function(){return this._name}},{key:"isChrome",value:function(){return this._name===a}},{key:"isOpera",value:function(){return this._name===s}},{key:"isFirefox",value:function(){return this._name===c}},{key:"isIExplorer",value:function(){return this._name===u}},{key:"isSafari",value:function(){return this._name===d}},{key:"isNWJS",value:function(){return this._name===l}},{key:"isElectron",value:function(){return this._name===h}},{key:"isReactNative",value:function(){return this._name===p}},{key:"getVersion",value:function(){return this._version}},{key:"_checkCondition",value:function(e){if(this._version)return this._bowser.satisfies(e)}},{key:"isVersionGreaterThan",value:function(e){return this._checkCondition(_defineProperty({},this._name,">"+e))}},{key:"isVersionLessThan",value:function(e){return this._checkCondition(_defineProperty({},this._name,"<"+e))}},{key:"isVersionEqualTo",value:function(e){return this._checkCondition(_defineProperty({},this._name,"~"+e))}}]),e})(),E=(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getItem",value:function(){}},{key:"setItem",value:function(){}},{key:"removeItem",value:function(){}},{key:"key",value:function(){}}]),e})(),b=new((function(e){_inherits(n,E);var t=_createSuper(n);function n(){var e,r;_classCallCheck(this,n),e=t.call(this);try{r=window.localStorage}catch(r){}return e.storage=r||new E,e}return _createClass(n,[{key:"getItem",value:function(e){return this.storage.getItem(e)}},{key:"setItem",value:function(e,t){return this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){return this.storage.removeItem(e)}},{key:"key",value:function(e){return this.storage.key(e)}}]),n})())},function(e,t,n){"use strict";var r=n(14),i={};function o(e,t,n){if("object"==typeof e&&void 0!==e.name)switch(this.gum={error:e,constraints:t,devices:n&&Array.isArray(n)?n.slice(0):void 0},e.name){case"NotAllowedError":case"PermissionDeniedError":case"SecurityError":this.name=r.PERMISSION_DENIED,this.message=i[this.name]+(this.gum.devices||[]).join(", ");break;case"DevicesNotFoundError":case"NotFoundError":this.name=r.NOT_FOUND,this.message=i[this.name]+(this.gum.devices||[]).join(", ");break;case"ConstraintNotSatisfiedError":case"OverconstrainedError":var o=e.constraintName||e.constraint;t&&t.video&&(!n||n.indexOf("video")>-1)&&("minWidth"===o||"maxWidth"===o||"minHeight"===o||"maxHeight"===o||"width"===o||"height"===o||"deviceId"===o)?(this.name=r.UNSUPPORTED_RESOLUTION,this.message=i[this.name]+(function(e,t){if(t&&t.video&&t.video.mandatory)switch(e){case"width":return t.video.mandatory.minWidth;case"height":return t.video.mandatory.minHeight;default:return t.video.mandatory[e]||""}return""})(o,t)):(this.name=r.CONSTRAINT_FAILED,this.message=i[this.name]+e.constraintName);break;default:this.name=r.GENERAL,this.message=e.message||i[this.name]}else{if("string"!=typeof e)throw new Error("Invalid arguments");i[e]?(this.name=e,this.message=t||i[e]):this.message=e}this.stack=e.stack||(new Error).stack}i[r.UNSUPPORTED_RESOLUTION]="Video resolution is not supported: ",i[r.SCREENSHARING_USER_CANCELED]="User canceled screen sharing prompt",i[r.SCREENSHARING_GENERIC_ERROR]="Unknown error from screensharing",i[r.ELECTRON_DESKTOP_PICKER_ERROR]="Unkown error from desktop picker",i[r.ELECTRON_DESKTOP_PICKER_NOT_FOUND]="Failed to detect desktop picker",i[r.GENERAL]="Generic getUserMedia error",i[r.PERMISSION_DENIED]="User denied permission to use device(s): ",i[r.NOT_FOUND]="Requested device(s) was/were not found: ",i[r.CONSTRAINT_FAILED]="Constraint could not be satisfied: ",i[r.TRACK_IS_DISPOSED]="Track has been already disposed",i[r.TRACK_NO_STREAM_FOUND]="Track does not have an associated Media Stream",o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,t.a=o},function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var c=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var i,o,a,s;if(u(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=d(e))>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,s=c,console&&console.warn&&console.warn(s)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function f(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?(function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t})(i):v(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return d(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)o(c,this,t);else{var u=c.length,d=v(c,u);for(n=0;n<u;++n)o(d[n],this,t)}return!0},s.prototype.addListener=function(e,t){return l(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return l(this,e,t,!0)},s.prototype.once=function(e,t){return u(t),this.on(e,p(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,p(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,o,a;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():(function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()})(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return f(this,e,!0)},s.prototype.rawListeners=function(e){return f(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(19),i=n.n(r),o=(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new i.a;_classCallCheck(this,e),this.eventEmitter=t,this.addEventListener=this.on=this.addListener,this.removeEventListener=this.off=this.removeListener}return _createClass(e,[{key:"addListener",value:function(e,t){var n=this;return this.eventEmitter.addListener(e,t),function(){return n.removeEventListener(e,t)}}},{key:"removeListener",value:function(e,t){this.eventEmitter.removeListener(e,t)}}]),e})()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3),i=n(9);function o(e){for(var t=e.split("\r\nm="),n=1,r=t.length;n<r;n++){var i="m="+t[n];n!==r-1&&(i+="\r\n"),t[n]=i}var o=t.shift()+"\r\n";this.media=t,this.raw=o+t.join(""),this.session=o}o.prototype.failICE=!1,o.prototype.removeTcpCandidates=!1,o.prototype.removeUdpCandidates=!1,o.prototype.getMediaSsrcMap=function(){for(var e=this,t={},n=function(n){var r={mediaindex:n,mid:i.a.parseMID(i.a.findLine(e.media[n],"a=mid:")),ssrcs:{},ssrcGroups:[]};t[n]=r,i.a.findLines(e.media[n],"a=ssrc:").forEach(function(e){var t=e.substring(7).split(" ")[0];r.ssrcs[t]||(r.ssrcs[t]={ssrc:t,lines:[]}),r.ssrcs[t].lines.push(e)}),i.a.findLines(e.media[n],"a=ssrc-group:").forEach(function(e){var t=e.indexOf(" "),n=e.substr(0,t).substr(13),i=e.substr(14+n.length).split(" ");i.length&&r.ssrcGroups.push({semantics:n,ssrcs:i})})},r=0;r<this.media.length;r++)n(r);return t},o.prototype.containsSSRC=function(e){var t=this.getMediaSsrcMap(),n=!1;return Object.keys(t).forEach(function(r){n||t[r].ssrcs[e]&&(n=!0)}),n},o.prototype.toJingle=function(e,t){i.a.findLines(this.session,"a=group:").forEach(function(t){var n=t.split(" "),r=n.shift().substr(8);e.c("group",{xmlns:"urn:xmpp:jingle:apps:grouping:0",semantics:r});for(var i=0;i<n.length;i++)e.c("content",{name:n[i]}).up();e.up()});for(var n=0;n<this.media.length;n++){var o=i.a.parseMLine(this.media[n].split("\r\n")[0]);if("audio"===o.media||"video"===o.media||"application"===o.media){var a,s=i.a.findLine(this.media[n],"a=ssrc:");a=!!s&&s.substring(7).split(" ")[0],e.c("content",{creator:t,name:o.media});var c=i.a.findLine(this.media[n],"a=mid:");if(c){var u=i.a.parseMID(c);e.attrs({name:u})}if("audio"===o.media||"video"===o.media){e.c("description",{xmlns:"urn:xmpp:jingle:apps:rtp:1",media:o.media}),a&&e.attrs({ssrc:a});for(var d=0;d<o.fmt.length;d++){var l=i.a.findLine(this.media[n],"a=rtpmap:"+o.fmt[d]);e.c("payload-type",i.a.parseRTPMap(l));var h=i.a.findLine(this.media[n],"a=fmtp:"+o.fmt[d]);if(h)for(var p=i.a.parseFmtp(h),f=0;f<p.length;f++)e.c("parameter",p[f]).up();this.rtcpFbToJingle(n,e,o.fmt[d]),e.up()}if(a){for(var m,v=_createForOfIteratorHelperLoose(i.a.parseSSRC(this.media[n]));!(m=v()).done;){var g=m.value,_=_slicedToArray(g,2),y=_[0],S=_[1];e.c("source",{ssrc:y,xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0"}),S.forEach(function(t){var n=t.indexOf(" "),r=t.substr(n+1);if(e.c("parameter"),-1===r.indexOf(":"))e.attrs({name:r});else{var o=r.split(":",2)[0];e.attrs({name:o});var a=r.split(":",2)[1];a=i.a.filterSpecialChars(a),e.attrs({value:a})}e.up()}),e.up()}i.a.findLines(this.media[n],"a=ssrc-group:").forEach(function(t){var n=t.indexOf(" "),r=t.substr(0,n).substr(13),i=t.substr(14+r.length).split(" ");i.length&&(e.c("ssrc-group",{semantics:r,xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0"}),i.forEach(function(t){return e.c("source",{ssrc:t}).up()}),e.up())})}var E=i.a.findLines(this.media[n],"a=rid");if(E.length&&r.a.usesRidsForSimulcast()){var b=E.map(function(e){return e.split(":")[1]}).map(function(e){return e.split(" ")[0]});b.forEach(function(t){e.c("source",{rid:t,xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0"}),e.up()}),i.a.findLine(this.media[n],"a=simulcast")&&(e.c("rid-group",{semantics:"SIM",xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0"}),b.forEach(function(t){e.c("source",{rid:t}).up()}),e.up())}i.a.findLine(this.media[n],"a=rtcp-mux")&&e.c("rtcp-mux").up(),this.rtcpFbToJingle(n,e,"*");for(var C=i.a.findLines(this.media[n],"a=extmap:"),T=0;T<C.length;T++){var R=i.a.parseExtmap(C[T]);if(e.c("rtp-hdrext",{xmlns:"urn:xmpp:jingle:apps:rtp:rtp-hdrext:0",uri:R.uri,id:R.value}),R.hasOwnProperty("direction"))switch(R.direction){case"sendonly":e.attrs({senders:"responder"});break;case"recvonly":e.attrs({senders:"initiator"});break;case"sendrecv":e.attrs({senders:"both"});break;case"inactive":e.attrs({senders:"none"})}e.up()}e.up()}this.transportToJingle(n,e);var A=this.media[n];i.a.findLine(A,"a=sendrecv",this.session)?e.attrs({senders:"both"}):i.a.findLine(A,"a=sendonly",this.session)?e.attrs({senders:"initiator"}):i.a.findLine(A,"a=recvonly",this.session)?e.attrs({senders:"responder"}):i.a.findLine(A,"a=inactive",this.session)&&e.attrs({senders:"none"}),"0"!==o.port||i.a.findLine(A,"a=bundle-only",this.session)||e.attrs({senders:"rejected"}),e.up()}}return e.up(),e},o.prototype.transportToJingle=function(e,t){var n=this;t.c("transport");var r=i.a.findLine(this.media[e],"a=sctpmap:",this.session);if(r){var o=i.a.parseSCTPMap(r);t.c("sctpmap",{xmlns:"urn:xmpp:jingle:transports:dtls-sctp:1",number:o[0],protocol:o[1]}),o.length>2&&t.attrs({streams:o[2]}),t.up()}i.a.findLines(this.media[e],"a=fingerprint:",this.session).forEach(function(r){var o=i.a.parseFingerprint(r);o.xmlns="urn:xmpp:jingle:apps:dtls:0",t.c("fingerprint").t(o.fingerprint),delete o.fingerprint;var a=i.a.findLine(n.media[e],"a=setup:",n.session);a&&(o.setup=a.substr(8)),t.attrs(o),t.up()});var a=i.a.iceparams(this.media[e],this.session);a&&(a.xmlns="urn:xmpp:jingle:transports:ice-udp:1",t.attrs(a),i.a.findLines(this.media[e],"a=candidate:",this.session).forEach(function(e){var r=i.a.candidateToJingle(e);n.failICE&&(r.ip="1.1.1.1");var o=r&&"string"==typeof r.protocol?r.protocol.toLowerCase():"";n.removeTcpCandidates&&("tcp"===o||"ssltcp"===o)||n.removeUdpCandidates&&"udp"===o||t.c("candidate",r).up()})),t.up()},o.prototype.rtcpFbToJingle=function(e,t,n){i.a.findLines(this.media[e],"a=rtcp-fb:"+n).forEach(function(e){var n=i.a.parseRTCPFB(e);"trr-int"===n.type?(t.c("rtcp-fb-trr-int",{xmlns:"urn:xmpp:jingle:apps:rtp:rtcp-fb:0",value:n.params[0]}),t.up()):(t.c("rtcp-fb",{xmlns:"urn:xmpp:jingle:apps:rtp:rtcp-fb:0",type:n.type}),n.params.length>0&&t.attrs({subtype:n.params[0]}),t.up())})},o.prototype.rtcpFbFromJingle=function(e,t){var n="",r=e.find('>rtcp-fb-trr-int[xmlns="urn:xmpp:jingle:apps:rtp:rtcp-fb:0"]');return r.length&&(n+="a=rtcp-fb:* trr-int ",r.attr("value")?n+=r.attr("value"):n+="0",n+="\r\n"),e.find('>rtcp-fb[xmlns="urn:xmpp:jingle:apps:rtp:rtcp-fb:0"]').each(function(e,r){n+="a=rtcp-fb:"+t+" "+r.getAttribute("type"),r.hasAttribute("subtype")&&(n+=" "+r.getAttribute("subtype")),n+="\r\n"}),n},o.prototype.fromJingle=function(e){var t=this,n=Date.now();this.raw="v=0\r\no=- "+n+" 2 IN IP4 0.0.0.0\r\ns=-\r\nt=0 0\r\n";var r=$(e).find('>group[xmlns="urn:xmpp:jingle:apps:grouping:0"]');r.length&&r.each(function(e,n){var r=$(n).find(">content").map(function(e,t){return t.getAttribute("name")}).get();r.length>0&&(t.raw+="a=group:"+(n.getAttribute("semantics")||n.getAttribute("type"))+" "+r.join(" ")+"\r\n")}),this.session=this.raw,e.find(">content").each(function(e,n){var r=t.jingle2media($(n));t.media.push(r)}),this.raw=this.session+this.media.join("")},o.prototype.jingle2media=function(e){var t=this,n=e.find(">description"),r=e.find('>transport[xmlns="urn:xmpp:jingle:transports:ice-udp:1"]'),o="",a=r.find('>sctpmap[xmlns="urn:xmpp:jingle:transports:dtls-sctp:1"]'),s={media:n.attr("media"),port:"1"};if("rejected"===e.attr("senders")&&(s.port="0"),r.find('>fingerprint[xmlns="urn:xmpp:jingle:apps:dtls:0"]').length?s.proto=a.length?"DTLS/SCTP":"RTP/SAVPF":s.proto="RTP/AVPF",a.length){o+="m=application "+s.port+" DTLS/SCTP "+a.attr("number")+"\r\n",o+="a=sctpmap:"+a.attr("number")+" "+a.attr("protocol");var c=a.attr("streams");o+=c?" "+c+"\r\n":"\r\n"}else s.fmt=n.find(">payload-type").map(function(e,t){return t.getAttribute("id")}).get(),o+=i.a.buildMLine(s)+"\r\n";switch(o+="c=IN IP4 0.0.0.0\r\n",a.length||(o+="a=rtcp:1 IN IP4 0.0.0.0\r\n"),r.length&&(r.attr("ufrag")&&(o+=i.a.buildICEUfrag(r.attr("ufrag"))+"\r\n"),r.attr("pwd")&&(o+=i.a.buildICEPwd(r.attr("pwd"))+"\r\n"),r.find('>fingerprint[xmlns="urn:xmpp:jingle:apps:dtls:0"]').each(function(e,t){o+="a=fingerprint:"+t.getAttribute("hash"),o+=" "+$(t).text(),o+="\r\n",t.hasAttribute("setup")&&(o+="a=setup:"+t.getAttribute("setup")+"\r\n")})),r.find(">candidate").each(function(e,n){var r=n.getAttribute("protocol");r="string"==typeof r?r.toLowerCase():"",t.removeTcpCandidates&&("tcp"===r||"ssltcp"===r)||t.removeUdpCandidates&&"udp"===r||(t.failICE&&n.setAttribute("ip","1.1.1.1"),o+=i.a.candidateFromJingle(n))}),e.attr("senders")){case"initiator":o+="a=sendonly\r\n";break;case"responder":o+="a=recvonly\r\n";break;case"none":o+="a=inactive\r\n";break;case"both":o+="a=sendrecv\r\n"}return o+="a=mid:"+e.attr("name")+"\r\n",n.find(">rtcp-mux").length&&(o+="a=rtcp-mux\r\n"),n.find(">payload-type").each(function(e,n){o+=i.a.buildRTPMap(n)+"\r\n",$(n).find(">parameter").length&&(o+="a=fmtp:"+n.getAttribute("id")+" ",o+=$(n).find(">parameter").map(function(e,t){var n=t.getAttribute("name");return(n?n+"=":"")+t.getAttribute("value")}).get().join("; "),o+="\r\n"),o+=t.rtcpFbFromJingle($(n),n.getAttribute("id"))}),o+=this.rtcpFbFromJingle(n,"*"),n.find('>rtp-hdrext[xmlns="urn:xmpp:jingle:apps:rtp:rtp-hdrext:0"]').each(function(e,t){o+="a=extmap:"+t.getAttribute("id")+" "+t.getAttribute("uri")+"\r\n"}),n.find('>ssrc-group[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each(function(e,t){var n=t.getAttribute("semantics"),r=$(t).find(">source").map(function(e,t){return t.getAttribute("ssrc")}).get();r.length&&(o+="a=ssrc-group:"+n+" "+r.join(" ")+"\r\n")}),n.find('>source[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each(function(e,t){var n=t.getAttribute("ssrc");$(t).find(">parameter").each(function(e,t){var r=t.getAttribute("name"),a=t.getAttribute("value");a=i.a.filterSpecialChars(a),o+="a=ssrc:"+n+" "+r,a&&a.length&&(o+=":"+a),o+="\r\n"})}),o}},function(e,t,n){"use strict";n.r(t),n.d(t,"DETECTOR_STATE_CHANGE",function(){return r}),n.d(t,"AUDIO_INPUT_STATE_CHANGE",function(){return i}),n.d(t,"NO_AUDIO_INPUT",function(){return o}),n.d(t,"VAD_NOISY_DEVICE",function(){return a}),n.d(t,"VAD_REPORT_PUBLISHED",function(){return s}),n.d(t,"VAD_SCORE_PUBLISHED",function(){return c}),n.d(t,"VAD_TALK_WHILE_MUTED",function(){return u});var r="detector_state_change",i="audio_input_state_changed",o="no_audio_input_detected",a="detection.vad_noise_device",s="vad-report-published",c="detection.vad_score_published",u="detection.vad_talk_while_muted"},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return a}),n.d(t,"e",function(){return s});var r="statistics.audioLevel",i="statistics.before_disposed",o="statistics.byte_sent_stats",a="statistics.connectionstats",s="statistics.long_tasks_stats"},function(e,t,n){"use strict";n.r(t),n.d(t,"STATUS_AVAILABLE",function(){return r}),n.d(t,"STATUS_UNDEFINED",function(){return i}),n.d(t,"STATUS_BUSY",function(){return o}),n.d(t,"STATE_ON",function(){return a}),n.d(t,"STATE_OFF",function(){return s}),n.d(t,"STATE_PENDING",function(){return c}),n.d(t,"STATE_RETRYING",function(){return u}),n.d(t,"STATE_FAILED",function(){return d}),n.d(t,"ERROR_NO_CONNECTION",function(){return l}),n.d(t,"ERROR_SESSION_EXISTS",function(){return h});var r="available",i="undefined",o="busy",a="on",s="off",c="pending",u="retrying",d="failed",l="error_no_connection",h="error_session_already_exists"},function(e,t,n){var r=n(156),i=n(157);t.write=i,t.parse=r.parse,t.parseFmtpConfig=r.parseFmtpConfig,t.parseParams=r.parseParams,t.parsePayloads=r.parsePayloads,t.parseRemoteCandidates=r.parseRemoteCandidates,t.parseImageAttributes=r.parseImageAttributes,t.parseSimulcastStreamList=r.parseSimulcastStreamList},function(e,t,n){"use strict";n.r(t),n.d(t,"CONNECTION_DISCONNECTED",function(){return r}),n.d(t,"CONNECTION_ESTABLISHED",function(){return i}),n.d(t,"CONNECTION_FAILED",function(){return o}),n.d(t,"WRONG_STATE",function(){return a}),n.d(t,"DISPLAY_NAME_REQUIRED",function(){return s});var r="connection.connectionDisconnected",i="connection.connectionEstablished",o="connection.connectionFailed",a="connection.wrongState",s="connection.display_name_required"},function(e,t,n){"use strict";function r(e){var t=e;return e>=Number.MAX_SAFE_INTEGER&&(t=0),t+1}function i(e){return e.length>0?e.reduce(function(e,t){return e+t})/e.length:0}function o(e){for(var t=0,n=0;n<e.length;n++)t+=Math.pow(31*e.charCodeAt(n),e.length-n),t&=t;return Math.abs(t)}function a(e){return e.filter(function(e){return e>=0})}n.d(t,"e",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"d",function(){return o}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return s});var s=(function(){function e(){_classCallCheck(this,e),this.average=0,this.n=0}return _createClass(e,[{key:"addNext",value:function(e){"number"==typeof e&&(this.n+=1,this.average=this.average+(e-this.average)/this.n)}},{key:"getAverage",value:function(){return this.average}}]),e})()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return T}),n.d(t,"b",function(){return R}),n.d(t,"c",function(){return A});var r=n(4),i=n(2),o=(n(152),n(39)),a=n(26),s=n(0),c=n.n(s),u=n(3),d=n(52),l=n(11),h=n.n(l),p=n(20),f=n(37),m=n.n(f),v=n(62),g=n(42),_=n(98),y=n(103),S=n(110),E=n(111),b=n(112),C=Object(r.getLogger)(e),T=[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}],R="type",A=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).connection=null,i.disconnectInProgress=!1,i.connectionTimes={},i.options=e,i.token=r,i.authenticatedUser=!1,Object(b.a)(),Object(S.a)(),i.connection=(function(e){var t=e.enableWebsocketResume,n=e.serviceUrl,r=void 0===n?"/http-bind":n,i=e.token,o=e.websocketKeepAlive;return i&&(r+=(-1===r.indexOf("?")?"?":"&")+"token="+i),new g.a({enableWebsocketResume:t,serviceUrl:r,websocketKeepAlive:o})})({enableWebsocketResume:e.enableWebsocketResume,serviceUrl:e.serviceUrl||e.bosh,token:r,websocketKeepAlive:e.websocketKeepAlive}),i._initStrophePlugins(),i.caps=new v.b(i.connection,i.options.clientNode),i.initFeaturesList(),$(window).on("beforeunload unload",function(e){i.disconnect(e).catch(function(){})}),i}return _createClass(n,[{key:"initFeaturesList",value:function(){this.caps.addFeature("urn:xmpp:jingle:1"),this.caps.addFeature("urn:xmpp:jingle:apps:rtp:1"),this.caps.addFeature("urn:xmpp:jingle:transports:ice-udp:1"),this.caps.addFeature("urn:xmpp:jingle:apps:dtls:0"),this.caps.addFeature("urn:xmpp:jingle:transports:dtls-sctp:1"),this.caps.addFeature("urn:xmpp:jingle:apps:rtp:audio"),this.caps.addFeature("urn:xmpp:jingle:apps:rtp:video"),this.options.disableRtx||this.caps.addFeature("urn:ietf:rfc:4588"),!0===this.options.enableOpusRed&&u.a.supportsAudioRed()&&this.caps.addFeature("http://jitsi.org/opus-red"),this.caps.addFeature("urn:ietf:rfc:5761"),this.caps.addFeature("urn:ietf:rfc:5888"),u.a.isChromiumBased()&&!0===this.options.enableLipSync&&(C.info("Lip-sync enabled !"),this.caps.addFeature("http://jitsi.org/meet/lipsync")),this.connection.rayo&&this.caps.addFeature("urn:xmpp:rayo:client:1"),d.a.isSupported(this.options)&&this.caps.addFeature("https://jitsi.org/meet/e2ee")}},{key:"getConnection",value:function(){return this.connection}},{key:"connectionHandler",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,s=window.performance.now(),u=i.Strophe.getStatusString(n).toLowerCase();if(this.connectionTimes[u]=s,C.log("(TIME) Strophe "+u+(r?"["+r+"]":"")+":\t",s),this.eventEmitter.emit(c.a.CONNECTION_STATUS_CHANGED,t,n,r),n===i.Strophe.Status.CONNECTED||n===i.Strophe.Status.ATTACHED){(this.options.useStunTurn||this.options.p2p&&this.options.p2p.useStunTurn)&&this.connection.jingle.getStunAndTurnCredentials(),C.info("My Jabber ID: "+this.connection.jid),this._resetState();var d=this.connection.domain;this.caps.getFeaturesAndIdentities(d).then(function(t){var n=t.features,r=t.identities;n.has(i.Strophe.NS.PING)||C.error("Ping NOT supported by "+d+" - please enable ping in your XMPP server config"),r.forEach(function(t){"speakerstats"===t.type&&(e.speakerStatsComponentAddress=t.name),"conference_duration"===t.type&&(e.conferenceDurationComponentAddress=t.name),"lobbyrooms"===t.type&&(e.lobbySupported=!0,t.name&&e.caps.getFeaturesAndIdentities(t.name,t.type).then(function(t){t.features.forEach(function(t){t.endsWith("#displayname_required")&&e.eventEmitter.emit(a.DISPLAY_NAME_REQUIRED)})}).catch(function(e){return C.warn("Error getting features from lobby.",e&&e.message)}))}),(e.speakerStatsComponentAddress||e.conferenceDurationComponentAddress)&&e.connection.addHandler(e._onPrivateMessage.bind(e),null,"message",null,null)}).catch(function(e){h.a.callErrorHandler(new Error("Feature discovery error: "+e)),C.error("Feature discovery error",e)}),t.password&&(this.authenticatedUser=!0),this.connection&&this.connection.connected&&i.Strophe.getResourceFromJid(this.connection.jid)&&this.eventEmitter.emit(a.CONNECTION_ESTABLISHED,i.Strophe.getResourceFromJid(this.connection.jid))}else if(n===i.Strophe.Status.CONNFAIL)"x-strophe-bad-non-anon-jid"===r?this.anonymousConnectionFailed=!0:this.connectionFailed=!0,this.lastErrorMsg=r,"giving-up"===r&&this.eventEmitter.emit(a.CONNECTION_FAILED,o.OTHER_ERROR,r);else if(n===i.Strophe.Status.ERROR)this.lastErrorMsg=r;else if(n===i.Strophe.Status.DISCONNECTED){this.connection.ping.stopInterval();var l=Boolean(this.disconnectInProgress),p=r||this.lastErrorMsg;if(this.anonymousConnectionFailed)this.eventEmitter.emit(a.CONNECTION_FAILED,o.PASSWORD_REQUIRED);else if(this.connectionFailed)this.eventEmitter.emit(a.CONNECTION_FAILED,o.OTHER_ERROR,p,void 0,this._getConnectionFailedReasonDetails());else if(l)this.eventEmitter.emit(a.CONNECTION_DISCONNECTED,p);else{C.error("XMPP connection dropped!");var f=i.Strophe.getLastErrorStatus();f>=500&&f<600?this.eventEmitter.emit(a.CONNECTION_FAILED,o.SERVER_ERROR,p||"server-error",void 0,this._getConnectionFailedReasonDetails()):this.eventEmitter.emit(a.CONNECTION_FAILED,o.CONNECTION_DROPPED_ERROR,p||"connection-dropped-error",void 0,this._getConnectionFailedReasonDetails())}}else n===i.Strophe.Status.AUTHFAIL&&this.eventEmitter.emit(a.CONNECTION_FAILED,o.PASSWORD_REQUIRED,r,t)}},{key:"_connect",value:function(e,t){this._resetState(),this.connection.connect(e,t,this.connectionHandler.bind(this,{jid:e,password:t}))}},{key:"attach",value:function(e){this._resetState();var t=this.connectionTimes.attaching=window.performance.now();C.log("(TIME) Strophe Attaching:\t",t),this.connection.attach(e.jid,e.sid,parseInt(e.rid,10)+1,this.connectionHandler.bind(this,{jid:e.jid,password:e.password}))}},{key:"_resetState",value:function(){this.anonymousConnectionFailed=!1,this.connectionFailed=!1,this.lastErrorMsg=void 0,this.disconnectInProgress=void 0}},{key:"connect",value:function(e,t){if(!e){var n=this.options.hosts,r=n.anonymousdomain,i=n.domain,o=r||i,a=window.location;if(r){var s=a&&a.search;(s&&-1!==s.indexOf("login=true")||this.token)&&(o=i)}e=o||a&&a.hostname}return this._connect(e,t)}},{key:"createRoom",value:function(e,t,n){var r=e+"@"+(t.customDomain?t.customDomain:this.options.hosts.muc.toLowerCase())+"/",i=n?n(this.connection.jid,this.authenticatedUser):m.a.randomHexString(8).toLowerCase();return C.info("JID "+this.connection.jid+" using MUC nickname "+i),r+=i,this.connection.emuc.createRoom(r,null,t)}},{key:"getJid",value:function(){return this.connection.jid}},{key:"getJingleLog",value:function(){var e=this.connection.jingle;return e?e.getLog():{}}},{key:"getXmppLog",value:function(){return(this.connection.logger||{}).log||null}},{key:"dial",value:function(){var e;(e=this.connection.rayo).dial.apply(e,arguments)}},{key:"ping",value:function(e){var t=this;return new Promise(function(n,r){t.connection.ping.ping(t.connection.domain,n,r,e)})}},{key:"getSessions",value:function(){return this.connection.jingle.sessions}},{key:"disconnect",value:function(e){var t=this;return this.disconnectInProgress?this.disconnectInProgress:this.connection?(this.disconnectInProgress=new Promise(function(e){t.eventEmitter.on(c.a.CONNECTION_STATUS_CHANGED,function n(r,o){o===i.Strophe.Status.DISCONNECTED&&(e(),t.eventEmitter.removeListener(c.a.CONNECTION_STATUS_CHANGED,n))})}),this._cleanupXmppConnection(e),this.disconnectInProgress):Promise.resolve()}},{key:"_cleanupXmppConnection",value:function(e){if(!this.connection.isUsingWebSocket&&this.connection.flush(),!this.connection.isUsingWebSocket&&null!=e){var t=e.type;if(("beforeunload"===t||"unload"===t)&&(this.connection.options.sync=!0,this.connection.sendUnavailableBeacon()))return}this.connection.disconnect(),!0!==this.connection.options.sync&&this.connection.flush()}},{key:"_initStrophePlugins",value:function(){var e={jvb:{iceServers:[]},p2p:{iceServers:[]}},t=this.options.p2p&&this.options.p2p.stunServers||T;Array.isArray(t)&&(C.info("P2P STUN servers: ",t),e.p2p.iceServers=t),this.options.p2p&&this.options.p2p.iceTransportPolicy&&(C.info("P2P ICE transport policy: ",this.options.p2p.iceTransportPolicy),e.p2p.iceTransportPolicy=this.options.p2p.iceTransportPolicy),this.connection.addConnectionPlugin("emuc",new _.a(this)),this.connection.addConnectionPlugin("jingle",new y.a(this,this.eventEmitter,e)),this.connection.addConnectionPlugin("rayo",new E.a)}},{key:"_getConnectionFailedReasonDetails",value:function(){var e={};if(this.options.deploymentInfo&&this.options.deploymentInfo.shard&&this.connection.lastResponseHeaders){var t={};this.connection.lastResponseHeaders.trim().split(/[\r\n]+/).forEach(function(e){var n=e.split(": "),r=n.shift(),i=n.join(": ");t[r]=i}),e.shard_changed=this.options.deploymentInfo.shard!==t["x-jitsi-shard"]}return e.suspend_time=this.connection.ping.getPingSuspendTime(),e.time_since_last_success=this.connection.getTimeSinceLastSuccess(),e}},{key:"sendDominantSpeakerEvent",value:function(e){if(this.speakerStatsComponentAddress&&e){var t=Object(i.$msg)({to:this.speakerStatsComponentAddress});t.c("speakerstats",{xmlns:"http://jitsi.org/jitmeet",room:e}).up(),this.connection.send(t)}}},{key:"tryParseJSONAndVerify",value:function(e){try{var t=JSON.parse(e);if(t&&"object"==typeof t){var n=t[R];if(void 0!==n)return t;C.debug("parsing valid json but does not have correct structure","topic: ",n)}}catch(e){return C.error(e),!1}return!1}},{key:"_onPrivateMessage",value:function(e){var t=e.getAttribute("from");if(t!==this.speakerStatsComponentAddress&&t!==this.conferenceDurationComponentAddress)return!0;var n=$(e).find(">json-message").text(),r=this.tryParseJSONAndVerify(n);return r&&"speakerstats"===r[R]&&r.users&&this.eventEmitter.emit(c.a.SPEAKER_STATS_RECEIVED,r.users),r&&"conference_duration"===r[R]&&r.created_timestamp&&this.eventEmitter.emit(c.a.CONFERENCE_TIMESTAMP_RECEIVED,r.created_timestamp),!0}}]),n})(p.a)}).call(this,"modules/xmpp/xmpp.js")},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return c});var r=n(25);function i(e){return parseInt(e.ssrcs.split(" ")[0],10)}function o(e){return parseInt(e.ssrcs.split(" ")[1],10)}function a(e){return e.ssrcs?e.ssrcs.map(function(e){return e.id}).filter(function(e,t,n){return n.indexOf(e)===t}).length:0}var s=(function(){function e(t){if(_classCallCheck(this,e),!t)throw new Error("mLine is undefined");this.mLine=t}return _createClass(e,[{key:"getSSRCAttrValue",value:function(e,t){var n=this.ssrcs.find(function(n){return n.id===e&&n.attribute===t});return n&&n.value}},{key:"removeSSRC",value:function(e){this.mLine.ssrcs&&this.mLine.ssrcs.length&&(this.mLine.ssrcs=this.mLine.ssrcs.filter(function(t){return t.id!==e}))}},{key:"addSSRCAttribute",value:function(e){this.ssrcs.push(e)}},{key:"findGroup",value:function(e,t){return this.ssrcGroups.find(function(n){return n.semantics===e&&(!t||t===n.ssrcs)})}},{key:"findGroups",value:function(e){return this.ssrcGroups.filter(function(t){return t.semantics===e})}},{key:"findGroupByPrimarySSRC",value:function(e,t){return this.ssrcGroups.find(function(n){return n.semantics===e&&i(n)===t})}},{key:"findSSRCByMSID",value:function(e){return this.ssrcs.find(function(t){return"msid"===t.attribute&&(null===e||t.value===e)})}},{key:"getSSRCCount",value:function(){return a(this.mLine)}},{key:"containsAnySSRCGroups",value:function(){return void 0!==this.mLine.ssrcGroups}},{key:"getPrimaryVideoSsrc",value:function(){var e=this.mLine.type;if("video"!==e)throw new Error("getPrimarySsrc doesn't work with '"+e+"'");if(1===a(this.mLine))return this.mLine.ssrcs[0].id;if(this.mLine.ssrcGroups){var t=this.findGroup("SIM");if(t)return i(t);var n=this.findGroup("FID");if(n)return i(n);var r=this.findGroup("FEC-FR");if(r)return i(r)}}},{key:"getRtxSSRC",value:function(e){var t=this.findGroupByPrimarySSRC("FID",e);return t&&o(t)}},{key:"getSSRCs",value:function(){return this.ssrcs.map(function(e){return e.id}).filter(function(e,t,n){return n.indexOf(e)===t})}},{key:"getPrimaryVideoSSRCs",value:function(){var e=this.mLine.type;if("video"!==e)throw new Error("getPrimaryVideoSSRCs doesn't work with "+e);for(var t,n=this.getSSRCs(),r=_createForOfIteratorHelperLoose(this.ssrcGroups);!(t=r()).done;){var i=t.value;if("FID"===i.semantics||"FEC-FR"===i.semantics){var a=o(i);n.splice(n.indexOf(a),1)}}return n}},{key:"dumpSSRCGroups",value:function(){return JSON.stringify(this.mLine.ssrcGroups)}},{key:"removeGroupsWithSSRC",value:function(e){this.mLine.ssrcGroups&&(this.mLine.ssrcGroups=this.mLine.ssrcGroups.filter(function(t){return-1===t.ssrcs.indexOf(""+e)}))}},{key:"removeGroupsBySemantics",value:function(e){this.mLine.ssrcGroups&&(this.mLine.ssrcGroups=this.mLine.ssrcGroups.filter(function(t){return t.semantics!==e}))}},{key:"replaceSSRC",value:function(e,t){this.mLine.ssrcs&&this.mLine.ssrcs.forEach(function(n){n.id===e&&(n.id=t)})}},{key:"addSSRCGroup",value:function(e){this.ssrcGroups.push(e)}},{key:"ssrcs",get:function(){return this.mLine.ssrcs||(this.mLine.ssrcs=[]),this.mLine.ssrcs},set:function(e){this.mLine.ssrcs=e}},{key:"direction",get:function(){return this.mLine.direction},set:function(e){this.mLine.direction=e}},{key:"ssrcGroups",get:function(){return this.mLine.ssrcGroups||(this.mLine.ssrcGroups=[]),this.mLine.ssrcGroups},set:function(e){this.mLine.ssrcGroups=e}}]),e})(),c=(function(){function e(t){_classCallCheck(this,e),this.parsedSDP=r.parse(t)}return _createClass(e,[{key:"selectMedia",value:function(e){var t=this.parsedSDP.media.find(function(t){return t.type===e});return t?new s(t):null}},{key:"toRawSDP",value:function(){return r.write(this.parsedSDP)}}]),e})()},function(e,t,n){"use strict";n.r(t),n.d(t,"LOCAL_STATS_UPDATED",function(){return r}),n.d(t,"REMOTE_STATS_UPDATED",function(){return i});var r="cq.local_stats_updated",i="cq.remote_stats_updated"},function(e,t,n){"use strict";(function(e){var r,i,o=n(17),a=n(4),s=n(102),c=n.n(s),u=Object(a.getLogger)(e);function d(){return(Math.random().toString(16)+"000000000").substr(2,8)}t.a={get callStatsUserName(){return r||((r=o.c.getItem("callStatsUserName"))||(e=c.a.generateUsername(),u.log("generated callstats uid",e),r=e,o.c.setItem("callStatsUserName",r))),r;var e},get machineId(){return i||((i=o.c.getItem("jitsiMeetId"))||(e=d()+d()+d()+d(),u.log("generated id",e),i=e,o.c.setItem("jitsiMeetId",i))),i;var e},get sessionId(){return o.c.getItem("sessionId")},set sessionId(e){e?o.c.setItem("sessionId",e):o.c.removeItem("sessionId")}}}).call(this,"modules/settings/Settings.js")},function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var r="pending",i="active",o="ended"},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={ACCEPT:"session-accept",CONNECTION_ERROR:"connection-error-encountered",INITIATE:"session-initiate",TERMINATE:"session-terminate",TRANSPORT_INFO:"transport-info",UNAVAILABLE:"unavailable"}},function(e,t){e.exports={1080:{width:1920,height:1080,order:8},fullhd:{width:1920,height:1080,order:8},720:{width:1280,height:720,order:7},hd:{width:1280,height:720,order:7},960:{width:960,height:720,order:6},540:{width:960,height:540,order:5},qhd:{width:960,height:540,order:5},360:{width:640,height:360,order:4},640:{width:640,height:480,order:3},vga:{width:640,height:480,order:3},180:{width:320,height:180,order:2},320:{width:320,height:240,order:1}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return h});var r,i=n(3),o=n(11),a=n.n(o),s=n(4).getLogger(e),c="applicationLog",u="error",d="event",l="mstWithUserID",h=(function(){function e(t,n){_classCallCheck(this,e),this.confID=n.confID,this.tpc=t,this.peerconnection=t.peerconnection,this.remoteUserID=n.remoteUserID||"jitsi",this.hasFabric=!1,e.fabrics.add(this),e.backendInitialized&&(this._addNewFabric(),1===e.fabrics.size&&e._emptyReportQueue(this))}return _createClass(e,null,[{key:"_addNewFabricCallback",value:function(t,n){e.backend&&"success"!==t&&s.error("Monitoring status: "+t+" msg: "+n)}},{key:"_initCallback",value:function(t,n){if(s.log("CallStats Status: err="+t+" msg="+n),"success"===t){e.backendInitialized=!0;for(var r,i=!1,o=null,a=_createForOfIteratorHelperLoose(e.fabrics.values());!(r=a()).done;){var c=r.value;c.hasFabric||(s.debug("addNewFabric - initCallback"),c._addNewFabric()&&(i=!0,o||(o=c)))}i&&e._emptyReportQueue(o)}}},{key:"_emptyReportQueue",value:function(t){for(var n,r=t.confID,i=t.peerconnection,o=_createForOfIteratorHelperLoose(e.reportsQueue);!(n=o()).done;){var a=n.value;if(a.type===u){var s=a.data;e._reportError(t,s.type,s.error,s.pc||i)}else if(a.type===d){var c=a.data;e.backend.sendFabricEvent(a.pc||i,c.event,r,c.eventData)}else if(a.type===l){var h=a.data;e.backend.associateMstWithUserID(a.pc||i,h.callStatsId,r,h.ssrc,h.usageLabel,h.containerId)}}e.reportsQueue.length=0}},{key:"_reportError",value:function(t,n,r,i){var o=r;o||(s.warn("No error is passed!"),o=new Error("Unknown error")),e.backendInitialized&&t?e.backend.reportError(i,t.confID,n,o):e.reportsQueue.push({type:u,data:{error:o,pc:i,type:n}})}},{key:"_reportEvent",value:function(t,n,r){var i=t&&t.peerconnection,o=t&&t.confID;e.backendInitialized&&t?e.backend.sendFabricEvent(i,n,o,r):e.reportsQueue.push({confID:o,pc:i,type:d,data:{event:n,eventData:r}})}},{key:"_traceAndCatchBackendCalls",value:function(e){for(var t=function(t){var n=e[t];e[t]=function(){try{for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return n.apply(e,r)}catch(e){a.a.callErrorHandler(e)}}},n=0,r=["associateMstWithUserID","sendFabricEvent","sendUserFeedback"];n<r.length;n++){t(r[n])}for(var o=function(t){var n=e[t];e[t]=function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];s.debug(t,i),n.apply(e,i)}},u=0,d=["associateMstWithUserID","sendFabricEvent","sendUserFeedback"];u<d.length;u++){o(d[u])}var l=e.reportError;e.reportError=function(t,n,r){for(var o=arguments.length,u=new Array(o>3?o-3:0),d=3;d<o;d++)u[d-3]=arguments[d];r===c?i.a.isReactNative()||console&&console.debug("reportError",t,n,r):s.debug.apply(s,["reportError",t,n,r].concat(u));try{l.call.apply(l,[e,t,n,r].concat(u))}catch(e){r===c?console&&console.error("reportError",e):a.a.callErrorHandler(e)}}}},{key:"initBackend",value:function(t){if(e.backend)throw new Error("CallStats backend has been initialized already!");try{var n,r=callstats;if(e.backend=new r,e._traceAndCatchBackendCalls(e.backend),e.userID={aliasName:t.aliasName,userName:t.userName},e.callStatsID=t.callStatsID,e.callStatsSecret=t.callStatsSecret,t.applicationName&&(n={applicationVersion:t.applicationName+" ("+i.a.getName()+")"}),t.confID){var o=t.confID.match(/.*\/(.*)\/.*/);n.siteID=t.siteID||o&&o[1]||"/"}e.backend.initialize(e.callStatsID,e.callStatsSecret,e.userID,e._initCallback,void 0,n);var c=t.getWiFiStatsMethod;return c&&(e.backend.attachWifiStatsHandler(c),c().then(function(e){e&&s.info("Reported wifi addresses:",JSON.parse(e).addresses)}).catch(function(){})),!0}catch(t){return a.a.callErrorHandler(t),e.backend=null,s.error(t),!1}}},{key:"isBackendInitialized",value:function(){return Boolean(e.backend)}},{key:"sendActiveDeviceListEvent",value:function(t,n){e._reportEvent(n,"activeDeviceList",t)}},{key:"sendApplicationLog",value:function(t,n){try{e._reportError(n,c,t,n&&n.peerconnection)}catch(t){console&&"function"==typeof console.error&&console.error("sendApplicationLog failed",t)}}},{key:"sendFeedback",value:function(t,n,r){return new Promise(function(i,o){if(e.backend)e.backend.sendUserFeedback(t,{userID:e.userID,overall:n,comment:r},function(e,t){"success"===e?i(t):o(t)});else{var a="Failed to submit feedback to CallStats - no backend";s.error(a),o(a)}})}},{key:"sendGetUserMediaFailed",value:function(t,n){e._reportError(n,"getUserMedia",t,null)}},{key:"sendMuteEvent",value:function(t,n,r){var i;i="video"===n?t?"videoPause":"videoResume":t?"audioMute":"audioUnmute",e._reportEvent(r,i)}},{key:"fabrics",get:function(){return r||(r=new Set),r}}]),_createClass(e,[{key:"_addNewFabric",value:function(){s.info("addNewFabric",this.remoteUserID);try{var t={remoteEndpointType:this.tpc.isP2P?e.backend.endpointType.peer:e.backend.endpointType.server},n=e.backend.addNewFabric(this.peerconnection,this.remoteUserID,e.backend.fabricUsage.multiplex,this.confID,t,e._addNewFabricCallback);this.hasFabric=!0;var r="success"===n.status;return r||s.error("callstats fabric not initilized",n.message),r}catch(e){return a.a.callErrorHandler(e),!1}}},{key:"associateStreamWithVideoTag",value:function(t,n,r,i,o){if(e.backend){var a=n?e.userID:r;e.backendInitialized?e.backend.associateMstWithUserID(this.peerconnection,a,this.confID,t,i,o):e.reportsQueue.push({type:l,pc:this.peerconnection,data:{callStatsId:a,containerId:o,ssrc:t,usageLabel:i}})}}},{key:"sendDominantSpeakerEvent",value:function(){e._reportEvent(this,"dominantSpeaker")}},{key:"sendTerminateEvent",value:function(){e.backendInitialized&&e.backend.sendFabricEvent(this.peerconnection,e.backend.fabricEvent.fabricTerminated,this.confID),e.fabrics.delete(this)}},{key:"sendIceConnectionFailedEvent",value:function(){e._reportError(this,"iceConnectionFailure",null,this.peerconnection)}},{key:"sendCreateOfferFailed",value:function(t){e._reportError(this,"createOffer",t,this.peerconnection)}},{key:"sendCreateAnswerFailed",value:function(t){e._reportError(this,"createAnswer",t,this.peerconnection)}},{key:"sendResumeOrHoldEvent",value:function(t){e._reportEvent(this,t?"fabricResume":"fabricHold")}},{key:"sendScreenSharingEvent",value:function(t,n){var r;n&&(r={ssrc:n}),e._reportEvent(this,t?"screenShareStart":"screenShareStop",r)}},{key:"sendSetLocalDescFailed",value:function(t){e._reportError(this,"setLocalDescription",t,this.peerconnection)}},{key:"sendSetRemoteDescFailed",value:function(t){e._reportError(this,"setRemoteDescription",t,this.peerconnection)}},{key:"sendAddIceCandidateFailed",value:function(t){e._reportError(this,"addIceCandidate",t,this.peerconnection)}}]),e})();h.backend=null,h.reportsQueue=[],h.backendInitialized=!1,h.callStatsID=null,h.callStatsSecret=null,h.userID=null}).call(this,"modules/statistics/CallStats.js")},function(e,t){e.exports={H264:"h264",VP8:"vp8",VP9:"vp9"}},function(e,t){function n(e,t){return Math.floor(Math.random()*(t-e+1))+e}function r(e){return e[n(0,e.length-1)]}var i={randomHexDigit:function(){return r("0123456789abcdef")},randomHexString:function(e){for(var t="";e--;)t+=this.randomHexDigit();return t},randomElement:r,randomAlphanumStr:function(e){for(var t="",n=0;n<e;n+=1)t+=r("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");return t},randomInt:n};e.exports=i},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(20);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(function(){return function e(){_classCallCheck(this,e)}})();return(function(t){_inherits(r,e);var n=_createSuper(r);function r(){var e;_classCallCheck(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).connection=null,e}return _createClass(r,[{key:"init",value:function(e){this.connection=e}}]),r})()}t.b=i();var o=i(r.a)},function(e,t,n){"use strict";n.r(t),n.d(t,"CONNECTION_DROPPED_ERROR",function(){return r}),n.d(t,"OTHER_ERROR",function(){return i}),n.d(t,"PASSWORD_REQUIRED",function(){return o}),n.d(t,"SERVER_ERROR",function(){return a});var r="connection.droppedError",i="connection.otherError",o="connection.passwordRequired",a="connection.serverError"},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var r="signaling.peerMuted",i="signaling.peerVideoType"},function(e,t,n){(function(e,n){var r="[object Arguments]",i="[object Function]",o="[object GeneratorFunction]",a="[object Map]",s="[object Set]",c=/\w*$/,u=/^\[object .+?Constructor\]$/,d=/^(?:0|[1-9]\d*)$/,l={};l[r]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object DataView]"]=l["[object Boolean]"]=l["[object Date]"]=l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l[a]=l["[object Number]"]=l["[object Object]"]=l["[object RegExp]"]=l[s]=l["[object String]"]=l["[object Symbol]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l["[object Error]"]=l[i]=l["[object WeakMap]"]=!1;var h="object"==typeof e&&e&&e.Object===Object&&e,p="object"==typeof self&&self&&self.Object===Object&&self,f=h||p||Function("return this")(),m=t&&!t.nodeType&&t,v=m&&"object"==typeof n&&n&&!n.nodeType&&n,g=v&&v.exports===m;function _(e,t){return e.set(t[0],t[1]),e}function y(e,t){return e.add(t),e}function S(e,t,n,r){var i=-1,o=e?e.length:0;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function E(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function b(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function C(e,t){return function(n){return e(t(n))}}function T(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var R,A=Array.prototype,k=Function.prototype,I=Object.prototype,w=f["__core-js_shared__"],P=(R=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||""))?"Symbol(src)_1."+R:"",O=k.toString,D=I.hasOwnProperty,N=I.toString,M=RegExp("^"+O.call(D).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),L=g?f.Buffer:void 0,x=f.Symbol,F=f.Uint8Array,j=C(Object.getPrototypeOf,Object),H=Object.create,U=I.propertyIsEnumerable,J=A.splice,B=Object.getOwnPropertySymbols,G=L?L.isBuffer:void 0,V=C(Object.keys,Object),q=ve(f,"DataView"),K=ve(f,"Map"),W=ve(f,"Promise"),z=ve(f,"Set"),$=ve(f,"WeakMap"),Q=ve(Object,"create"),X=Ee(q),Y=Ee(K),Z=Ee(W),ee=Ee(z),te=Ee($),ne=x?x.prototype:void 0,re=ne?ne.valueOf:void 0;function ie(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function oe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ae(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function se(e){this.__data__=new oe(e)}function ce(e,t){var n=Ce(e)||(function(e){return(function(e){return(function(e){return!!e&&"object"==typeof e})(e)&&Te(e)})(e)&&D.call(e,"callee")&&(!U.call(e,"callee")||N.call(e)==r)})(e)?(function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r})(e.length,String):[],i=n.length,o=!!i;for(var a in e)!t&&!D.call(e,a)||o&&("length"==a||ye(a,i))||n.push(a);return n}function ue(e,t,n){var r=e[t];D.call(e,t)&&be(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function de(e,t){for(var n=e.length;n--;)if(be(e[n][0],t))return n;return-1}function le(e,t,n,u,d,h,p){var f;if(u&&(f=h?u(e,d,h,p):u(e)),void 0!==f)return f;if(!ke(e))return e;var m=Ce(e);if(m){if(f=(function(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&D.call(e,"index")&&(n.index=e.index,n.input=e.input),n})(e),!t)return(function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t})(e,f)}else{var v=_e(e),g=v==i||v==o;if(Re(e))return(function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n})(e,t);if("[object Object]"==v||v==r||g&&!h){if(E(e))return h?e:{};if(f=(function(e){return"function"!=typeof e.constructor||Se(e)?{}:ke(t=j(e))?H(t):{};var t})(g?{}:e),!t)return(function(e,t){return fe(e,ge(e),t)})(e,(function(e,t){return e&&fe(t,Ie(t),e)})(f,e))}else{if(!l[v])return h?e:{};f=(function(e,t,n,r){var i,o=e.constructor;switch(t){case"[object ArrayBuffer]":return pe(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return(function(e,t){var n=r?pe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)})(e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return(function(e,t){var n=r?pe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)})(e);case a:return(function(e,t,n){return S(r?n(b(e),!0):b(e),_,new e.constructor)})(e,0,n);case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return(function(e){var t=new e.constructor(e.source,c.exec(e));return t.lastIndex=e.lastIndex,t})(e);case s:return(function(e,t,n){return S(r?n(T(e),!0):T(e),y,new e.constructor)})(e,0,n);case"[object Symbol]":return i=e,re?Object(re.call(i)):{}}})(e,v,le,t)}}p||(p=new se);var C=p.get(e);if(C)return C;if(p.set(e,f),!m)var R=n?(function(e){return(function(e,t,n){var r=Ie(e);return Ce(e)?r:(function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e})(r,n(e))})(e,0,ge)})(e):Ie(e);return(function(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n););})(R||e,function(r,i){R&&(r=e[i=r]),ue(f,i,le(r,t,n,u,i,e,p))}),f}function he(e){return!(!ke(e)||(t=e,P&&P in t))&&(Ae(e)||E(e)?M:u).test(Ee(e));var t}function pe(e){var t=new e.constructor(e.byteLength);return new F(t).set(new F(e)),t}function fe(e,t,n,r){n||(n={});for(var i=-1,o=t.length;++i<o;){var a=t[i],s=r?r(n[a],e[a],a,n,e):void 0;ue(n,a,void 0===s?e[a]:s)}return n}function me(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function ve(e,t){var n=(function(e,t){return null==e?void 0:e[t]})(e,t);return he(n)?n:void 0}ie.prototype.clear=function(){this.__data__=Q?Q(null):{}},ie.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ie.prototype.get=function(e){var t=this.__data__;if(Q){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return D.call(t,e)?t[e]:void 0},ie.prototype.has=function(e){var t=this.__data__;return Q?void 0!==t[e]:D.call(t,e)},ie.prototype.set=function(e,t){return this.__data__[e]=Q&&void 0===t?"__lodash_hash_undefined__":t,this},oe.prototype.clear=function(){this.__data__=[]},oe.prototype.delete=function(e){var t=this.__data__,n=de(t,e);return!(n<0||(n==t.length-1?t.pop():J.call(t,n,1),0))},oe.prototype.get=function(e){var t=this.__data__,n=de(t,e);return n<0?void 0:t[n][1]},oe.prototype.has=function(e){return de(this.__data__,e)>-1},oe.prototype.set=function(e,t){var n=this.__data__,r=de(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},ae.prototype.clear=function(){this.__data__={hash:new ie,map:new(K||oe),string:new ie}},ae.prototype.delete=function(e){return me(this,e).delete(e)},ae.prototype.get=function(e){return me(this,e).get(e)},ae.prototype.has=function(e){return me(this,e).has(e)},ae.prototype.set=function(e,t){return me(this,e).set(e,t),this},se.prototype.clear=function(){this.__data__=new oe},se.prototype.delete=function(e){return this.__data__.delete(e)},se.prototype.get=function(e){return this.__data__.get(e)},se.prototype.has=function(e){return this.__data__.has(e)},se.prototype.set=function(e,t){var n=this.__data__;if(n instanceof oe){var r=n.__data__;if(!K||r.length<199)return r.push([e,t]),this;n=this.__data__=new ae(r)}return n.set(e,t),this};var ge=B?C(B,Object):function(){return[]},_e=function(e){return N.call(e)};function ye(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||d.test(e))&&e>-1&&e%1==0&&e<t}function Se(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||I)}function Ee(e){if(null!=e){try{return O.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function be(e,t){return e===t||e!=e&&t!=t}(q&&"[object DataView]"!=_e(new q(new ArrayBuffer(1)))||K&&_e(new K)!=a||W&&"[object Promise]"!=_e(W.resolve())||z&&_e(new z)!=s||$&&"[object WeakMap]"!=_e(new $))&&(_e=function(e){var t=N.call(e),n="[object Object]"==t?e.constructor:void 0,r=n?Ee(n):void 0;if(r)switch(r){case X:return"[object DataView]";case Y:return a;case Z:return"[object Promise]";case ee:return s;case te:return"[object WeakMap]"}return t});var Ce=Array.isArray;function Te(e){return null!=e&&(function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991})(e.length)&&!Ae(e)}var Re=G||function(){return!1};function Ae(e){var t=ke(e)?N.call(e):"";return t==i||t==o}function ke(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ie(e){return Te(e)?ce(e):(function(e){if(!Se(e))return V(e);var t=[];for(var n in Object(e))D.call(e,n)&&"constructor"!=n&&t.push(n);return t})(e)}n.exports=function(e){return le(e,!0,!0)}}).call(this,n(44),n(79)(e))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return d});var r=n(4),i=n(2),o=(n(153),n(20)),a=n(94),s=n(96),c=n(97),u=Object(r.getLogger)(e),d=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,o=e.enableWebsocketResume,u=e.websocketKeepAlive,d=e.serviceUrl;return _classCallCheck(this,n),(r=t.call(this))._options={enableWebsocketResume:void 0===o||o,websocketKeepAlive:void 0===u?24e4:Number(u)},r._stropheConn=new i.Strophe.Connection(d),r._usesWebsocket=d.startsWith("ws:")||d.startsWith("wss:"),r._stropheConn.maxRetries=3,r._lastSuccessTracker=new s.a,r._lastSuccessTracker.startTracking(_assertThisInitialized(r),r._stropheConn),r._resumeTask=new a.a(r._stropheConn),r._deferredIQs=[],r.addConnectionPlugin("ping",new c.a({onPingThresholdExceeded:function(){return r._onPingErrorThresholdExceeded()}})),r}return _createClass(n,null,[{key:"Events",get:function(){return{CONN_STATUS_CHANGED:"CONN_STATUS_CHANGED"}}},{key:"Status",get:function(){return i.Strophe.Status}}]),_createClass(n,[{key:"addConnectionPlugin",value:function(e,t){this[e]=t,t.init(this)}},{key:"addHandler",value:function(){var e;(e=this._stropheConn).addHandler.apply(e,arguments)}},{key:"attach",value:function(e,t,n,r){for(var i,o=arguments.length,a=new Array(o>4?o-4:0),s=4;s<o;s++)a[s-4]=arguments[s];(i=this._stropheConn).attach.apply(i,[e,t,n,this._stropheConnectionCb.bind(this,r)].concat(a))}},{key:"connect",value:function(e,t,n){for(var r,i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];(r=this._stropheConn).connect.apply(r,[e,t,this._stropheConnectionCb.bind(this,n)].concat(o))}},{key:"_stropheConnectionCb",value:function(e,t){this._status=t;for(var r=!1,o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];t===i.Strophe.Status.CONNECTED||t===i.Strophe.Status.ATTACHED?(this._maybeEnableStreamResume(),this._maybeStartWSKeepAlive(),this._processDeferredIQs(),this._resumeTask.cancel(),this.ping.startInterval(this.domain)):t===i.Strophe.Status.DISCONNECTED&&(this.ping.stopInterval(),(r=this._tryResumingConnection())||clearTimeout(this._wsKeepAlive)),r||(e.apply(void 0,[t].concat(a)),this.eventEmitter.emit(n.Events.CONN_STATUS_CHANGED,t))}},{key:"_clearDeferredIQs",value:function(){for(var e,t=_createForOfIteratorHelperLoose(this._deferredIQs);!(e=t()).done;){e.value.reject(new Error("disconnect"))}this._deferredIQs=[]}},{key:"closeWebsocket",value:function(){this._stropheConn&&this._stropheConn._proto&&(this._stropheConn._proto._closeSocket(),this._stropheConn._proto._onClose(null))}},{key:"disconnect",value:function(){var e;this._resumeTask.cancel(),clearTimeout(this._wsKeepAlive),this._clearDeferredIQs(),(e=this._stropheConn).disconnect.apply(e,arguments)}},{key:"flush",value:function(){var e;(e=this._stropheConn).flush.apply(e,arguments)}},{key:"getTimeSinceLastSuccess",value:function(){return this._lastSuccessTracker.getTimeSinceLastSuccess()}},{key:"_maybeEnableStreamResume",value:function(){if(this._options.enableWebsocketResume){var e=this._stropheConn.streamManagement;this.isUsingWebSocket?e?e.isSupported()?e.getResumeToken()||(u.info("Enabling XEP-0198 stream management"),e.enable(!0)):u.warn("Stream resume enabled, but XEP-0198 is not supported by the server"):u.warn("Stream resume enabled, but Strophe streamManagement plugin is not installed"):u.warn("Stream resume enabled, but WebSockets are not enabled")}}},{key:"_maybeStartWSKeepAlive",value:function(){var e=this,t=this._options.websocketKeepAlive;if(this._usesWebsocket&&t>0){this._wsKeepAlive||u.info("WebSocket keep alive interval: "+t+"ms"),clearTimeout(this._wsKeepAlive);var n=.2*t+.8*Math.random()*t;u.debug("Scheduling next WebSocket keep-alive in "+n+"ms"),this._wsKeepAlive=setTimeout(function(){var t=e.service.replace("wss://","https://").replace("ws://","http://");fetch(t).catch(function(e){u.error("Websocket Keep alive failed for url: "+t,{error:e})}).then(function(){return e._maybeStartWSKeepAlive()})},n)}}},{key:"_processDeferredIQs",value:function(){for(var e,t=this,n=function(e){if(e.iq){clearTimeout(e.timeout);var n=Date.now()-e.start;t.sendIQ(e.iq,function(t){return e.resolve(t)},function(t){return e.reject(t)},n)}},r=_createForOfIteratorHelperLoose(this._deferredIQs);!(e=r()).done;){n(e.value)}this._deferredIQs=[]}},{key:"send",value:function(e){if(!this.connected)throw new Error("Not connected");this._stropheConn.send(e)}},{key:"sendIQ",value:function(e,t,n,r){if(this.connected)return this._stropheConn.sendIQ(e,t,n,r);n("Not connected")}},{key:"sendIQ2",value:function(e,t){var n=this,r=t.timeout;return new Promise(function(t,i){if(n.connected)n.sendIQ(e,function(e){return t(e)},function(e){return i(e)},r);else{var o={iq:e,resolve:t,reject:i,start:Date.now(),timeout:setTimeout(function(){o.iq=void 0,i(void 0)},r)};n._deferredIQs.push(o)}})}},{key:"_onPingErrorThresholdExceeded",value:function(){this.isUsingWebSocket&&(u.warn("Ping error threshold exceeded - killing the WebSocket"),this.closeWebsocket())}},{key:"sendPresence",value:function(e,t,n,r){this.connected?this._stropheConn.sendPresence(e,t,n,r):n("Not connected")}},{key:"sendUnavailableBeacon",value:function(){if(!navigator.sendBeacon||this._stropheConn.disconnecting||!this._stropheConn.connected)return!1;this._stropheConn._changeConnectStatus(i.Strophe.Status.DISCONNECTING),this._stropheConn.disconnecting=!0;var e=this._stropheConn._proto._buildBody().attrs({type:"terminate"}),t=Object(i.$pres)({xmlns:i.Strophe.NS.CLIENT,type:"unavailable"});e.cnode(t.tree());var n=navigator.sendBeacon(-1===this.service.indexOf("https://")?"https:"+this.service:this.service,i.Strophe.serialize(e.tree()));return u.info("Successfully send unavailable beacon "+n),this._stropheConn._proto._abortAllRequests(),this._stropheConn._doDisconnect(),!0}},{key:"_tryResumingConnection",value:function(){var e=this._stropheConn.streamManagement;return!(!e||!e.getResumeToken()||(this._resumeTask.schedule(),0))}},{key:"connected",get:function(){var e=this._stropheConn&&this._stropheConn._proto&&this._stropheConn._proto.socket;return(this._status===i.Strophe.Status.CONNECTED||this._status===i.Strophe.Status.ATTACHED)&&(!this.isUsingWebSocket||e&&e.readyState===WebSocket.OPEN)}},{key:"disco",get:function(){return this._stropheConn.disco}},{key:"disconnecting",get:function(){return!0===this._stropheConn.disconnecting}},{key:"domain",get:function(){return this._stropheConn.domain}},{key:"isUsingWebSocket",get:function(){return this._usesWebsocket}},{key:"jid",get:function(){return this._stropheConn.jid}},{key:"lastResponseHeaders",get:function(){return this._stropheConn._proto&&this._stropheConn._proto.lastResponseHeaders}},{key:"logger",get:function(){return this._stropheConn.logger}},{key:"options",get:function(){return this._stropheConn.options}},{key:"service",get:function(){return this._stropheConn.service}},{key:"status",get:function(){return this._status}}]),n})(o.a)}).call(this,"modules/xmpp/XmppConnection.js")},function(e,t){e.exports={ENVIRONMENT:"environment",USER:"user"}},function(e,t){var n;n=(function(){return this})();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(e,n){var r="[object Arguments]",i="[object Map]",o="[object Object]",a="[object Set]",s=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u[r]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u["[object Function]"]=u[i]=u["[object Number]"]=u[o]=u["[object RegExp]"]=u[a]=u["[object String]"]=u["[object WeakMap]"]=!1;var d="object"==typeof e&&e&&e.Object===Object&&e,l="object"==typeof self&&self&&self.Object===Object&&self,h=d||l||Function("return this")(),p=t&&!t.nodeType&&t,f=p&&"object"==typeof n&&n&&!n.nodeType&&n,m=f&&f.exports===p,v=m&&d.process,g=(function(){try{return v&&v.binding&&v.binding("util")}catch(e){}})(),_=g&&g.isTypedArray;function y(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function S(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function E(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var b,C,T,R=Array.prototype,A=Function.prototype,k=Object.prototype,I=h["__core-js_shared__"],w=A.toString,P=k.hasOwnProperty,O=(b=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+b:"",D=k.toString,N=RegExp("^"+w.call(P).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),M=m?h.Buffer:void 0,L=h.Symbol,x=h.Uint8Array,F=k.propertyIsEnumerable,j=R.splice,H=L?L.toStringTag:void 0,U=Object.getOwnPropertySymbols,J=M?M.isBuffer:void 0,B=(C=Object.keys,T=Object,function(e){return C(T(e))}),G=ge(h,"DataView"),V=ge(h,"Map"),q=ge(h,"Promise"),K=ge(h,"Set"),W=ge(h,"WeakMap"),z=ge(Object,"create"),$=Ee(G),Q=Ee(V),X=Ee(q),Y=Ee(K),Z=Ee(W),ee=L?L.prototype:void 0,te=ee?ee.valueOf:void 0;function ne(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function re(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ie(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function oe(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ie;++t<n;)this.add(e[t])}function ae(e){var t=this.__data__=new re(e);this.size=t.size}function se(e,t){var n=Te(e),r=!n&&Ce(e),i=!n&&!r&&Re(e),o=!n&&!r&&!i&&Pe(e),a=n||r||i||o,s=a?(function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r})(e.length,String):[],c=s.length;for(var u in e)!t&&!P.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Se(u,c))||s.push(u);return s}function ce(e,t){for(var n=e.length;n--;)if(be(e[n][0],t))return n;return-1}function ue(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":H&&H in Object(e)?(function(e){var t=P.call(e,H),n=e[H];try{e[H]=void 0}catch(e){}var r=D.call(e);return t?e[H]=n:delete e[H],r})(e):(function(e){return D.call(e)})(e)}function de(e){return we(e)&&ue(e)==r}function le(e,t,n,s,c){return e===t||(null==e||null==t||!we(e)&&!we(t)?e!=e&&t!=t:(function(e,t,n,s,c,u){var d=Te(e),l=Te(t),h=d?"[object Array]":ye(e),p=l?"[object Array]":ye(t),f=(h=h==r?o:h)==o,m=(p=p==r?o:p)==o,v=h==p;if(v&&Re(e)){if(!Re(t))return!1;d=!0,f=!1}if(v&&!f)return u||(u=new ae),d||Pe(e)?fe(e,t,n,s,c,u):(function(e,t,n,r,o,s,c){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new x(e),new x(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return be(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case i:var u=S;case a:var d=1&r;if(u||(u=E),e.size!=t.size&&!d)return!1;var l=c.get(e);if(l)return l==t;r|=2,c.set(e,t);var h=fe(u(e),u(t),r,o,s,c);return c.delete(e),h;case"[object Symbol]":if(te)return te.call(e)==te.call(t)}return!1})(e,t,h,n,s,c,u);if(!(1&n)){var g=f&&P.call(e,"__wrapped__"),_=m&&P.call(t,"__wrapped__");if(g||_){var y=g?e.value():e,b=_?t.value():t;return u||(u=new ae),c(y,b,n,s,u)}}return!!v&&(u||(u=new ae),(function(e,t,n,r,i,o){var a=1&n,s=me(e),c=s.length;if(c!=me(t).length&&!a)return!1;for(var u=c;u--;){var d=s[u];if(!(a?d in t:P.call(t,d)))return!1}var l=o.get(e);if(l&&o.get(t))return l==t;var h=!0;o.set(e,t),o.set(t,e);for(var p=a;++u<c;){var f=e[d=s[u]],m=t[d];if(r)var v=a?r(m,f,d,t,e,o):r(f,m,d,e,t,o);if(!(void 0===v?f===m||i(f,m,n,r,o):v)){h=!1;break}p||(p="constructor"==d)}if(h&&!p){var g=e.constructor,_=t.constructor;g==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof g&&g instanceof g&&"function"==typeof _&&_ instanceof _||(h=!1)}return o.delete(e),o.delete(t),h})(e,t,n,s,c,u))})(e,t,n,s,le,c))}function he(e){return!(!Ie(e)||(function(e){return!!O&&O in e})(e))&&(Ae(e)?N:s).test(Ee(e))}function pe(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||k))return B(e);var t,n,r=[];for(var i in Object(e))P.call(e,i)&&"constructor"!=i&&r.push(i);return r}function fe(e,t,n,r,i,o){var a=1&n,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var u=o.get(e);if(u&&o.get(t))return u==t;var d=-1,l=!0,h=2&n?new oe:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var p=e[d],f=t[d];if(r)var m=a?r(f,p,d,t,e,o):r(p,f,d,e,t,o);if(void 0!==m){if(m)continue;l=!1;break}if(h){if(!y(t,function(e,t){if(a=t,!h.has(a)&&(p===e||i(p,e,n,r,o)))return h.push(t);var a})){l=!1;break}}else if(p!==f&&!i(p,f,n,r,o)){l=!1;break}}return o.delete(e),o.delete(t),l}function me(e){return(function(e,t,n){var r=Oe(e);return Te(e)?r:(function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e})(r,n(e))})(e,0,_e)}function ve(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function ge(e,t){var n=(function(e,t){return null==e?void 0:e[t]})(e,t);return he(n)?n:void 0}ne.prototype.clear=function(){this.__data__=z?z(null):{},this.size=0},ne.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ne.prototype.get=function(e){var t=this.__data__;if(z){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return P.call(t,e)?t[e]:void 0},ne.prototype.has=function(e){var t=this.__data__;return z?void 0!==t[e]:P.call(t,e)},ne.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=z&&void 0===t?"__lodash_hash_undefined__":t,this},re.prototype.clear=function(){this.__data__=[],this.size=0},re.prototype.delete=function(e){var t=this.__data__,n=ce(t,e);return!(n<0||(n==t.length-1?t.pop():j.call(t,n,1),--this.size,0))},re.prototype.get=function(e){var t=this.__data__,n=ce(t,e);return n<0?void 0:t[n][1]},re.prototype.has=function(e){return ce(this.__data__,e)>-1},re.prototype.set=function(e,t){var n=this.__data__,r=ce(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},ie.prototype.clear=function(){this.size=0,this.__data__={hash:new ne,map:new(V||re),string:new ne}},ie.prototype.delete=function(e){var t=ve(this,e).delete(e);return this.size-=t?1:0,t},ie.prototype.get=function(e){return ve(this,e).get(e)},ie.prototype.has=function(e){return ve(this,e).has(e)},ie.prototype.set=function(e,t){var n=ve(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},oe.prototype.add=oe.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},oe.prototype.has=function(e){return this.__data__.has(e)},ae.prototype.clear=function(){this.__data__=new re,this.size=0},ae.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ae.prototype.get=function(e){return this.__data__.get(e)},ae.prototype.has=function(e){return this.__data__.has(e)},ae.prototype.set=function(e,t){var n=this.__data__;if(n instanceof re){var r=n.__data__;if(!V||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ie(r)}return n.set(e,t),this.size=n.size,this};var _e=U?function(e){return null==e?[]:(e=Object(e),(function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a)&&(o[i++]=a)}return o})(U(e),function(t){return F.call(e,t)}))}:function(){return[]},ye=ue;function Se(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||c.test(e))&&e>-1&&e%1==0&&e<t}function Ee(e){if(null!=e){try{return w.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function be(e,t){return e===t||e!=e&&t!=t}(G&&"[object DataView]"!=ye(new G(new ArrayBuffer(1)))||V&&ye(new V)!=i||q&&"[object Promise]"!=ye(q.resolve())||K&&ye(new K)!=a||W&&"[object WeakMap]"!=ye(new W))&&(ye=function(e){var t=ue(e),n=t==o?e.constructor:void 0,r=n?Ee(n):"";if(r)switch(r){case $:return"[object DataView]";case Q:return i;case X:return"[object Promise]";case Y:return a;case Z:return"[object WeakMap]"}return t});var Ce=de((function(){return arguments})())?de:function(e){return we(e)&&P.call(e,"callee")&&!F.call(e,"callee")},Te=Array.isArray,Re=J||function(){return!1};function Ae(e){if(!Ie(e))return!1;var t=ue(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ke(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Ie(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function we(e){return null!=e&&"object"==typeof e}var Pe=_?(function(e){return function(t){return e(t)}})(_):function(e){return we(e)&&ke(e.length)&&!!u[ue(e)]};function Oe(e){return null!=(t=e)&&ke(t.length)&&!Ae(t)?se(e):pe(e);var t}n.exports=function(e,t){return le(e,t)}}).call(this,n(44),n(79)(e))},function(e,t,n){"use strict";(function(e){var r=n(18),i=n(14),o=n(3);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(4).getLogger(e),c=null,u={obtainStream:null,init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;this.options=e,c=t,this.obtainStream=this._createObtainStreamMethod(),this.obtainStream||s.info("Desktop sharing disabled")},_createObtainStreamMethod:function(){return o.a.isNWJS()?function(e,t,n){window.JitsiMeetNW.obtainDesktopStream(t,function(e,t){var o;o=e&&"InvalidStateError"===e.name?new r.a(i.SCREENSHARING_USER_CANCELED):new r.a(e,t,["desktop"]),"function"==typeof n&&n(o)})}:o.a.isElectron()?this.obtainScreenOnElectron:o.a.supportsGetDisplayMedia()?this.obtainScreenFromGetDisplayMedia:(s.log("Screen sharing not supported on ",o.a.getName()),null)},isSupported:function(){return null!==this.obtainStream},obtainScreenOnElectron:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(window.JitsiMeetScreenObtainer&&window.JitsiMeetScreenObtainer.openDesktopPicker){var o=e.desktopSharingSources,s=e.gumOptions;window.JitsiMeetScreenObtainer.openDesktopPicker({desktopSharingSources:o||["screen","window"]},function(e,o){return(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{response:{},gumOptions:{}},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=e.response||{},s=o.streamId,u=o.streamType,d=o.screenShareAudio,l=o.error;if(s){var h=(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){a(e,t,n[t])})}return e})({desktopStream:s,screenShareAudio:d},e.gumOptions);c(["desktop"],h).then(function(e){return t({stream:e,sourceId:s,sourceType:u})},n)}else{if(""===s)return void n(new r.a(i.SCREENSHARING_USER_CANCELED));n(new r.a(i.SCREENSHARING_GENERIC_ERROR,l))}})({response:{streamId:e,streamType:o,screenShareAudio:arguments.length>2&&void 0!==arguments[2]&&arguments[2]},gumOptions:s},t,n)},function(e){return n(new r.a(i.ELECTRON_DESKTOP_PICKER_ERROR,e))})}else n(new r.a(i.ELECTRON_DESKTOP_PICKER_NOT_FOUND))},obtainScreenFromGetDisplayMedia:function(e,t,n){s.info("Using getDisplayMedia for screen sharing"),(navigator.getDisplayMedia?navigator.getDisplayMedia.bind(navigator):navigator.mediaDevices.getDisplayMedia.bind(navigator.mediaDevices))({video:!0,audio:!0}).then(function(n){var r;if(n&&n.getTracks()&&n.getTracks().length>0){var i=n.getVideoTracks()[0];i&&(r=i.applyConstraints(e.trackOptions))}else r=Promise.resolve();r.then(function(){return t({stream:n,sourceId:n.id})})}).catch(function(){return n(new r.a(i.SCREENSHARING_USER_CANCELED))})}};t.a=u}).call(this,"modules/RTC/ScreenObtainer.js")},function(e,t,n){var r=n(150),i={loadScript:function(e,t,n,i,o,a){var s=document,c=s.createElement("script"),u=s.getElementsByTagName("script")[0];if(c.async=t,i){var d=r();if(d){var l=d.src,h=l.substring(0,l.lastIndexOf("/")+1);l&&h&&(e=h+e)}}o&&(c.onload=o),a&&(c.onerror=a),c.src=e,n?u.parentNode.insertBefore(c,u):u.parentNode.appendChild(c)}};e.exports=i},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return m}),n.d(t,"b",function(){return v});var r=n(4),i=n(1),o=n(15),a=n(8),s=n(6),c=n.n(s),u=n(7),d=n(3),l=n(5);function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){p(e,t,n[t])})}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=Object(r.getLogger)(e),m={ACTIVE:"active",INACTIVE:"inactive",INTERRUPTED:"interrupted",RESTORING:"restoring"},v=(function(){function e(t,n,r){_classCallCheck(this,e),this.rtc=t,this.conference=n,this.trackTimers={},this.connStatusFromJvb={},this.outOfLastNTimeout="number"==typeof r.outOfLastNTimeout?r.outOfLastNTimeout:500,this.rtcMuteTimeout="number"==typeof r.rtcMuteTimeout?r.rtcMuteTimeout:1e4,this.rtcMutedTimestamp={},f.info("RtcMuteTimeout set to: "+this.rtcMuteTimeout),this.enteredLastNTimestamp=new Map,this.restoringTimers=new Map,this.connectionStatusMap=new Map}return _createClass(e,null,[{key:"_getNewStateForJvbMode",value:function(e,t,n,r,i){return e?r?m.ACTIVE:d.a.supportsVideoMuteOnConnInterrupted()?i?t?n?m.INTERRUPTED:m.RESTORING:m.INACTIVE:m.ACTIVE:t?m.ACTIVE:m.INACTIVE:m.INTERRUPTED}},{key:"_getNewStateForP2PMode",value:function(e,t){return d.a.supportsVideoMuteOnConnInterrupted()?e||!t?m.ACTIVE:m.INTERRUPTED:m.ACTIVE}}]),_createClass(e,[{key:"_getVideoFrozenTimeout",value:function(e){return this.rtc.isInLastN(e)?this.rtcMuteTimeout:this.outOfLastNTimeout}},{key:"init",value:function(){this._onEndpointConnStatusChanged=this.onEndpointConnStatusChanged.bind(this),this.rtc.addListener(c.a.ENDPOINT_CONN_STATUS_CHANGED,this._onEndpointConnStatusChanged),this._onP2PStatus=this.refreshConnectionStatusForAll.bind(this),this.conference.on(i.P2P_STATUS,this._onP2PStatus),this._onUserLeft=this.onUserLeft.bind(this),this.conference.on(i.USER_LEFT,this._onUserLeft),d.a.supportsVideoMuteOnConnInterrupted()&&(this._onTrackRtcMuted=this.onTrackRtcMuted.bind(this),this.rtc.addListener(c.a.REMOTE_TRACK_MUTE,this._onTrackRtcMuted),this._onTrackRtcUnmuted=this.onTrackRtcUnmuted.bind(this),this.rtc.addListener(c.a.REMOTE_TRACK_UNMUTE,this._onTrackRtcUnmuted),this._onRemoteTrackAdded=this.onRemoteTrackAdded.bind(this),this.conference.on(i.TRACK_ADDED,this._onRemoteTrackAdded),this._onRemoteTrackRemoved=this.onRemoteTrackRemoved.bind(this),this.conference.on(i.TRACK_REMOVED,this._onRemoteTrackRemoved),this._onSignallingMuteChanged=this.onSignallingMuteChanged.bind(this),this._onTrackVideoTypeChanged=this.onTrackVideoTypeChanged.bind(this)),this._onLastNChanged=this._onLastNChanged.bind(this),this.conference.on(i.LAST_N_ENDPOINTS_CHANGED,this._onLastNChanged),this._onLastNValueChanged=this.refreshConnectionStatusForAll.bind(this),this.rtc.on(c.a.LASTN_VALUE_CHANGED,this._onLastNValueChanged)}},{key:"dispose",value:function(){this.rtc.removeListener(c.a.ENDPOINT_CONN_STATUS_CHANGED,this._onEndpointConnStatusChanged),d.a.supportsVideoMuteOnConnInterrupted()&&(this.rtc.removeListener(c.a.REMOTE_TRACK_MUTE,this._onTrackRtcMuted),this.rtc.removeListener(c.a.REMOTE_TRACK_UNMUTE,this._onTrackRtcUnmuted),this.conference.off(i.TRACK_ADDED,this._onRemoteTrackAdded),this.conference.off(i.TRACK_REMOVED,this._onRemoteTrackRemoved)),this.conference.off(i.LAST_N_ENDPOINTS_CHANGED,this._onLastNChanged),this.rtc.removeListener(c.a.LASTN_VALUE_CHANGED,this._onLastNValueChanged),this.conference.off(i.P2P_STATUS,this._onP2PStatus),this.conference.off(i.USER_LEFT,this._onUserLeft);for(var e=0,t=Object.keys(this.trackTimers);e<t.length;e++){var n=t[e];this.clearTimeout(n),this.clearRtcMutedTimestamp(n)}for(var r in this.connectionStatusMap)this.connectionStatusMap.hasOwnProperty(r)&&this.onUserLeft(r);this.connStatusFromJvb={}}},{key:"onEndpointConnStatusChanged",value:function(e,t){f.debug("Detector RTCEvents.ENDPOINT_CONN_STATUS_CHANGED("+Date.now()+"): "+e+": "+t),e!==this.conference.myUserId()&&(this.connStatusFromJvb[e]=t,this.figureOutConnectionStatus(e))}},{key:"_changeConnectionStatus",value:function(e,t){if(e.getConnectionStatus()!==t){var n=e.getId();e._setConnectionStatus(t),f.debug("Emit endpoint conn status("+Date.now()+") "+n+": "+t),l.a.sendLog(JSON.stringify({id:"peer.conn.status",participant:n,status:t})),this.conference.eventEmitter.emit(i.PARTICIPANT_CONN_STATUS_CHANGED,n,t)}}},{key:"clearTimeout",value:function(e){this.trackTimers[e]&&(window.clearTimeout(this.trackTimers[e]),this.trackTimers[e]=null)}},{key:"clearRtcMutedTimestamp",value:function(e){this.rtcMutedTimestamp[e]=null}},{key:"onRemoteTrackAdded",value:function(e){var t=this;e.isLocal()||e.getType()!==a.c||(f.debug("Detector on remote track added for: "+e.getParticipantId()),e.on(o.TRACK_MUTE_CHANGED,this._onSignallingMuteChanged),e.on(o.TRACK_VIDEOTYPE_CHANGED,function(n){return t._onTrackVideoTypeChanged(e,n)}))}},{key:"onRemoteTrackRemoved",value:function(e){if(!e.isLocal()&&e.getType()===a.c){var t=e.getParticipantId();f.debug("Detector on remote track removed: "+t),e.off(o.TRACK_MUTE_CHANGED,this._onSignallingMuteChanged),this.clearTimeout(t),this.clearRtcMutedTimestamp(t),this.figureOutConnectionStatus(t)}}},{key:"isVideoTrackFrozen",value:function(e){if(!d.a.supportsVideoMuteOnConnInterrupted())return!1;var t=e.getId(),n=e.hasAnyVideoTrackWebRTCMuted(),r=this.rtcMutedTimestamp[t],i=this._getVideoFrozenTimeout(t);return n&&"number"==typeof r&&Date.now()-r>=i}},{key:"refreshConnectionStatusForAll",value:function(){for(var e,t=_createForOfIteratorHelperLoose(this.conference.getParticipants());!(e=t()).done;){var n=e.value;this.figureOutConnectionStatus(n.getId())}}},{key:"figureOutConnectionStatus",value:function(t){var n=this.conference.getParticipantById(t);if(n){var r=this.conference.isP2PActive(),i=this._isRestoringTimedout(t),o=0===this.rtc.getLastN(),s=n.isVideoMuted()||o,c=this.isVideoTrackFrozen(n),u=this.rtc.isInLastN(t),d=this.connStatusFromJvb[t];"boolean"!=typeof d&&(f.debug("Assuming connection active by JVB - no notification"),d=!0);var l=r?e._getNewStateForP2PMode(s,c):e._getNewStateForJvbMode(d,u,i,s,c);l!==m.RESTORING&&this._clearRestoringTimer(t),f.debug("Figure out conn status for "+t+", is video muted: "+s+" is active(jvb): "+d+" video track frozen: "+c+" p2p mode: "+r+" is in last N: "+u+" currentStatus => newStatus: "+n.getConnectionStatus()+" => "+l);var p=this.connectionStatusMap[t]||{};if(!("p2p"in p&&"connectionStatus"in p&&p.p2p===r&&p.connectionStatus===l)){var v=Date.now();if(this.maybeSendParticipantConnectionStatusEvent(t,v),this.connectionStatusMap[t]=h({},p,{connectionStatus:l,p2p:r,startedMs:v}),!("videoType"in this.connectionStatusMap[t])){var g=n.getTracksByMediaType(a.c);Array.isArray(g)&&0!==g.length&&(this.connectionStatusMap[t].videoType=g[0].videoType)}}this._changeConnectionStatus(n,l)}else f.debug("figure out conn status - no participant for: "+t)}},{key:"maybeSendParticipantConnectionStatusEvent",value:function(e,t){var n=this.connectionStatusMap[e];n&&"startedMs"in n&&"videoType"in n&&"connectionStatus"in n&&"p2p"in n&&(n.value=t-n.startedMs,l.a.sendAnalytics(Object(u.J)(n)))}},{key:"_onLastNChanged",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Date.now();f.debug("leaving/entering lastN",e,t,n);for(var r,i=_createForOfIteratorHelperLoose(e);!(r=i()).done;){var o=r.value;this.enteredLastNTimestamp.delete(o),this._clearRestoringTimer(o),this.figureOutConnectionStatus(o)}for(var a,s=_createForOfIteratorHelperLoose(t);!(a=s()).done;){var c=a.value;this.enteredLastNTimestamp.set(c,n),this.figureOutConnectionStatus(c)}}},{key:"_clearRestoringTimer",value:function(e){var t=this.restoringTimers.get(e);t&&(clearTimeout(t),this.restoringTimers.delete(e))}},{key:"_isRestoringTimedout",value:function(e){var t=this,n=this.enteredLastNTimestamp.get(e);return!!(n&&Date.now()-n>=1e4)||(this.restoringTimers.get(e)||this.restoringTimers.set(e,setTimeout(function(){return t.figureOutConnectionStatus(e)},1e4)),!1)}},{key:"onUserLeft",value:function(e){this.maybeSendParticipantConnectionStatusEvent(e,Date.now()),delete this.connectionStatusMap[e]}},{key:"onTrackRtcMuted",value:function(e){var t=this,n=e.getParticipantId(),r=this.conference.getParticipantById(n);if(f.debug("Detector track RTC muted: "+n,Date.now()),r){if(this.rtcMutedTimestamp[n]=Date.now(),!r.isVideoMuted()){this.clearTimeout(n);var i=this._getVideoFrozenTimeout(n);this.trackTimers[n]=window.setTimeout(function(){f.debug("Set RTC mute timeout for: "+n+"                     of "+i+" ms"),t.clearTimeout(n),t.figureOutConnectionStatus(n)},i)}}else f.error("No participant for id: "+n)}},{key:"onTrackRtcUnmuted",value:function(e){var t=e.getParticipantId();f.debug("Detector track RTC unmuted: "+t,Date.now()),this.clearTimeout(t),this.clearRtcMutedTimestamp(t),this.figureOutConnectionStatus(t)}},{key:"onSignallingMuteChanged",value:function(e){var t=e.getParticipantId();f.debug("Detector on track signalling mute changed: "+t,e.isMuted()),this.figureOutConnectionStatus(t)}},{key:"onTrackVideoTypeChanged",value:function(e,t){var n=e.getParticipantId(),r=Date.now();this.maybeSendParticipantConnectionStatusEvent(n,r),this.connectionStatusMap[n]=h({},this.connectionStatusMap[n]||{},{videoType:t,startedMs:r})}}]),e})()}).call(this,"modules/connectivity/ParticipantConnectionStatus.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var r=n(4),i=n(20),o="NETWORK_INFO_CHANGED",a=Object(r.getLogger)(e),s=new((function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this))._current={isOnline:!0},e}return _createClass(n,[{key:"updateNetworkInfo",value:function(e){var t=e.isOnline;a.debug("updateNetworkInfo",{isOnline:t}),this._current={isOnline:!0===t},this.eventEmitter.emit(o,this._current)}},{key:"isOnline",value:function(){return!0===this._current.isOnline}}]),n})(i.a));t.b=s}).call(this,"modules/connectivity/NetworkInfo.js")},function(e,t,n){"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},r.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},r.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach(function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)}),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(function(e){return parseInt(e,10)})}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},r.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},r.getCryptoParameters=function(e,t){return r.matchPrefix(e+t,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(e,t){var n=r.matchPrefix(e+t,"a=ice-ufrag:")[0],i=r.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&i?{usernameFragment:n.substr(12),password:i.substr(10)}:null},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e)[0].split(" "),i=3;i<n.length;i++){var o=n[i],a=r.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){var s=r.parseRtpMap(a),c=r.matchPrefix(e,"a=fmtp:"+o+" ");switch(s.parameters=c.length?r.parseFmtp(c[0]):{},s.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(r.parseRtcpFb),t.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(s.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(r.parseExtmap(e))}),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)});var i=0;return t.codecs.forEach(function(e){e.maxptime>i&&(i=e.maxptime)}),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach(function(e){n+=r.writeExtmap(e)}),n},r.parseRtpEncodingParameters=function(e){var t,n=[],i=r.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),a=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),c=s.length>0&&s[0].ssrc,u=r.matchPrefix(e,"a=ssrc-group:FID").map(function(e){return e.substr(17).split(" ").map(function(e){return parseInt(e,10)})});u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),i.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(r.rtx={ssrc:t}),n.push(r),o&&((r=JSON.parse(JSON.stringify(r))).fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},n.push(r))}}),0===n.length&&c&&n.push({ssrc:c});var d=r.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substr(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substr(5),10)*.95-16e3:void 0,n.forEach(function(e){e.maxBitrate=d})),n},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var i=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=r.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},r.parseMsid=function(e){var t,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var i=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return i.length>0?{stream:(t=i[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t,n=r.parseMLine(e),i=r.matchPrefix(e,"a=max-message-size:");i.length>0&&(t=parseInt(i[0].substr(19),10)),isNaN(t)&&(t=65536);var o=r.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:n.fmt,maxMessageSize:t};if(r.matchPrefix(e,"a=sctpmap:").length>0){var a=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:t}}},r.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){var i=void 0!==t?t:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,i){var o=r.writeRtpDescription(e.kind,t);if(o+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var a="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),o},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},e.exports=r},function(e,t,n){"use strict";t.a={getFocusRecordingUpdate:function(e){var t=e&&e.getElementsByTagName("jibri-recording-status")[0];if(t)return{error:t.getAttribute("failure_reason"),initiator:t.getAttribute("initiator"),recordingMode:t.getAttribute("recording_mode"),sessionID:t.getAttribute("session_id"),status:t.getAttribute("status")}},getHiddenDomainUpdate:function(e){var t=e.getElementsByTagName("live-stream-view-url")[0],n=t&&t.textContent,r=e.getElementsByTagName("mode")[0],i=r&&r.textContent&&r.textContent.toLowerCase(),o=e.getElementsByTagName("session_id")[0];return{liveStreamViewURL:n,mode:i,sessionID:o&&o.textContent}},getSessionIdFromIq:function(e){var t=e&&e.getElementsByTagName("jibri")[0];return t&&t.getAttribute("session_id")},getSessionId:function(e){var t=e.getElementsByTagName("session_id")[0];return t&&t.textContent},isFromFocus:function(e){return e.getAttribute("from").includes("focus")}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return p});var r=n(4),i=n(73),o=n.n(i),a=n(1),s=n(6),c=n.n(s),u=n(3),d=n(93),l=n(56),h=Object(r.getLogger)(e),p=(function(){function e(t){var n=this;_classCallCheck(this,e),this.conference=t,this._conferenceJoined=!1,this._enabled=!1,this._initialized=!1,this._e2eeCtx=new d.a({salt:t.getName()}),this._olmAdapter=new l.a(t),this._ratchetKey=o()(this._ratchetKeyImpl,5e3),this._rotateKey=o()(this._rotateKeyImpl,5e3),this.conference.on(a.USER_JOINED,this._onParticipantJoined.bind(this)),this.conference.on(a.USER_LEFT,this._onParticipantLeft.bind(this)),this.conference.on(a.CONFERENCE_JOINED,function(){n._conferenceJoined=!0}),this.conference.on(a._MEDIA_SESSION_STARTED,this._onMediaSessionStarted.bind(this)),this.conference.on(a.TRACK_ADDED,function(e){return e.isLocal()&&n._onLocalTrackAdded(e)}),this.conference.rtc.on(c.a.REMOTE_TRACK_ADDED,function(e,t){return n._setupReceiverE2EEForTrack(t,e)}),this.conference.on(a.TRACK_MUTE_CHANGED,this._trackMuteChanged.bind(this)),this._olmAdapter.on(l.a.events.PARTICIPANT_E2EE_CHANNEL_READY,this._onParticipantE2EEChannelReady.bind(this)),this._olmAdapter.on(l.a.events.PARTICIPANT_KEY_UPDATED,this._onParticipantKeyUpdated.bind(this))}return _createClass(e,[{key:"isEnabled",value:function(){return this._enabled}},{key:"setEnabled",value:function(e){var t=this;if(e!==this._enabled){this._enabled=e,!this._initialized&&e&&(this.conference._restartMediaSessions(),this._initialized=!0);var n=!!e&&this._generateKey();this._olmAdapter.updateKey(n).then(function(e){t._e2eeCtx.setKey(t.conference.myUserId(),n,e)})}}},{key:"_generateKey",value:function(){return window.crypto.getRandomValues(new Uint8Array(32))}},{key:"_onLocalTrackAdded",value:function(e){for(var t,n=_createForOfIteratorHelperLoose(this.conference._getMediaSessions());!(t=n()).done;){var r=t.value;this._setupSenderE2EEForTrack(r,e)}}},{key:"_onMediaSessionStarted",value:function(e){for(var t,n=_createForOfIteratorHelperLoose(this.conference.getLocalTracks());!(t=n()).done;){var r=t.value;this._setupSenderE2EEForTrack(e,r)}}},{key:"_onParticipantJoined",value:function(e){h.debug("Participant "+e+" joined"),this._conferenceJoined&&this._enabled&&this._ratchetKey()}},{key:"_onParticipantLeft",value:function(e){h.debug("Participant "+e+" left"),this._e2eeCtx.cleanup(e),this._enabled&&this._rotateKey()}},{key:"_onParticipantE2EEChannelReady",value:function(e){h.debug("E2EE channel with participant "+e+" is ready")}},{key:"_onParticipantKeyUpdated",value:function(e,t,n){h.debug("Participant "+e+" updated their key"),this._e2eeCtx.setKey(e,t,n)}},{key:"_ratchetKeyImpl",value:function(){return _regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(h.debug("Ratchetting key"),this._rotateKey()));case 1:case"end":return e.stop()}},null,this,null,Promise)}},{key:"_rotateKeyImpl",value:function(){var e,t;return _regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return h.debug("Rotating key"),e=this._generateKey(),n.next=4,_regeneratorRuntime.awrap(this._olmAdapter.updateKey(e));case 4:t=n.sent,this._e2eeCtx.setKey(this.conference.myUserId(),e,t);case 6:case"end":return n.stop()}},null,this,null,Promise)}},{key:"_setupReceiverE2EEForTrack",value:function(e,t){if(this._enabled){var n=e.findReceiverForTrack(t.track);n?this._e2eeCtx.handleReceiver(n,t.getType(),t.getParticipantId()):h.warn("Could not handle E2EE for "+t+": receiver not found in: "+e)}}},{key:"_setupSenderE2EEForTrack",value:function(e,t){if(this._enabled){var n=e.peerconnection,r=n&&n.findSenderForTrack(t.track);r?this._e2eeCtx.handleSender(r,t.getType(),t.getParticipantId()):h.warn("Could not handle E2EE for "+t+": sender not found in "+n)}}},{key:"_trackMuteChanged",value:function(e){if(u.a.doesVideoMuteByStreamRemove()&&e.isLocal()&&e.isVideoTrack()&&!e.isMuted())for(var t,n=_createForOfIteratorHelperLoose(this.conference._getMediaSessions());!(t=n()).done;){var r=t.value;this._setupSenderE2EEForTrack(r,e)}}}],[{key:"isSupported",value:function(e){return u.a.supportsInsertableStreams()&&l.a.isSupported()&&!(e.testing&&e.testing.disableE2EE)}}]),e})()}).call(this,"modules/e2ee/E2EEncryption.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return k});var r=n(4),i=n(2),o=n(36),a=n.n(o),s=n(6),c=n.n(s),u=n(7),d=n(0),l=n.n(d),h=n(5),p=n(104),f=n(11),m=n.n(f),v=n(106),g=n(3),_=n(107),y=n(32),S=n(54),E=n(21),b=n(58),C=n(9),T=n(108),R=n(42),A=Object(r.getLogger)(e),k=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o,a,s,c,u){var d;return _classCallCheck(this,n),(d=t.call(this,e,r,i,o,a,s,u))._bridgeSessionId=null,d._cachedOldLocalSdp=void 0,d._cachedNewLocalSdp=void 0,d._iceCheckingStartedTimestamp=null,d._gatheringStartedTimestamp=null,d.localRecvMaxFrameHeight=void 0,d._localVideoActive=!0,d._remoteVideoActive=!0,d._gatheringReported=!1,d.lasticecandidate=!1,d.closed=!1,d.isP2P=c,d.remoteRecvMaxFrameHeight=void 0,d.signalingLayer=new T.a,d.modificationQueue=new p.a,d.wasConnected=!1,d.establishmentDuration=void 0,d._xmppListeners=[],d._xmppListeners.push(o.addEventListener(R.a.Events.CONN_STATUS_CHANGED,d.onXmppStatusChanged.bind(_assertThisInitialized(d)))),d._removeSenderVideoConstraintsChangeListener=void 0,d}return _createClass(n,null,[{key:"parseVideoSenders",value:function(e){var t=e.find('>content[name="video"]');if(t.length){var n=t[0].getAttribute("senders");if("both"===n||"initiator"===n||"responder"===n||"none"===n)return n}return null}},{key:"parseMaxFrameHeight",value:function(e){var t=e.find('>content[name="video"]>max-frame-height');return t.length?Number(t.text()):null}}]),_createClass(n,[{key:"_assertNotEnded",value:function(){return this.state!==y.b}},{key:"doInitialize",value:function(e){var t=this;this.failICE=Boolean(e.failICE),this.lasticecandidate=!1,this.options=e,this.isReconnect=!1,this.wasstable=!1,this.webrtcIceUdpDisable=Boolean(e.webrtcIceUdpDisable),this.webrtcIceTcpDisable=Boolean(e.webrtcIceTcpDisable);var n={disableRtx:e.disableRtx};if(e.gatherStats&&(n.maxstats=300),n.capScreenshareBitrate=!1,n.enableInsertableStreams=e.enableInsertableStreams,n.videoQuality=e.videoQuality,n.videoQuality&&(n.disabledCodec=n.videoQuality.disabledCodec,n.preferredCodec=n.videoQuality.preferredCodec),this.isP2P){n.disableSimulcast=!0,n.disableH264=e.p2p&&e.p2p.disableH264,n.preferH264=e.p2p&&e.p2p.preferH264,e.p2p&&(n.disabledCodec=e.enableInsertableStreams?a.a.H264:e.p2p.disabledCodec,n.preferredCodec=e.p2p.preferredCodec);var r=this._abtestSuspendVideoEnabled(e);void 0!==r&&(n.abtestSuspendVideo=r)}else n.disableSimulcast=e.disableSimulcast||e.preferH264&&!e.disableH264,n.preferH264=e.preferH264,e.testing&&e.testing.capScreenshareBitrate&&"number"==typeof e.testing.capScreenshareBitrate&&(n.capScreenshareBitrate=Math.random()<e.testing.capScreenshareBitrate,h.a.analytics.addPermanentProperties({capScreenshareBitrate:n.capScreenshareBitrate}));e.startSilent&&(n.startSilent=!0),this.peerconnection=this.rtc.createPeerConnection(this.signalingLayer,this.iceConfig,this.isP2P,n),this.peerconnection.onicecandidate=function(e){if(e){var n=e.candidate,r=window.performance.now();if(n){null===t._gatheringStartedTimestamp&&(t._gatheringStartedTimestamp=r);var i=n.protocol;if("string"==typeof i)if("tcp"===(i=i.toLowerCase())||"ssltcp"===i){if(t.webrtcIceTcpDisable)return}else if("udp"===i&&t.webrtcIceUdpDisable)return}else t._gatheringReported||(h.a.sendAnalytics(u.o,{phase:"gathering",value:r-t._gatheringStartedTimestamp,p2p:t.isP2P,initiator:t.isInitiator}),t._gatheringReported=!0);t.sendIceCandidate(n)}},this.peerconnection.onsignalingstatechange=function(){"stable"===t.peerconnection.signalingState?t.wasstable=!0:"closed"!==t.peerconnection.signalingState&&"closed"!==t.peerconnection.connectionState||t.room.eventEmitter.emit(l.a.SUSPEND_DETECTED,t)},this.peerconnection.oniceconnectionstatechange=function(){var e=window.performance.now();switch(t.isP2P||(t.room.connectionTimes["ice.state."+t.peerconnection.iceConnectionState]=e),A.log("(TIME) ICE "+t.peerconnection.iceConnectionState+" P2P? "+t.isP2P+":\t",e),h.a.sendAnalytics(u.q,{p2p:t.isP2P,state:t.peerconnection.iceConnectionState,signaling_state:t.peerconnection.signalingState,reconnect:t.isReconnect,value:e}),t.room.eventEmitter.emit(l.a.ICE_CONNECTION_STATE_CHANGED,t,t.peerconnection.iceConnectionState),t.peerconnection.iceConnectionState){case"checking":t._iceCheckingStartedTimestamp=e;break;case"connected":if("stable"===t.peerconnection.signalingState&&t.isReconnect&&t.room.eventEmitter.emit(l.a.CONNECTION_RESTORED,t),!t.wasConnected&&t.wasstable){h.a.sendAnalytics(u.o,{phase:"checking",value:e-t._iceCheckingStartedTimestamp,p2p:t.isP2P,initiator:t.isInitiator});var n=Math.min(t._iceCheckingStartedTimestamp,t._gatheringStartedTimestamp);t.establishmentDuration=e-n,h.a.sendAnalytics(u.o,{phase:"establishment",value:t.establishmentDuration,p2p:t.isP2P,initiator:t.isInitiator}),t.wasConnected=!0,t.room.eventEmitter.emit(l.a.CONNECTION_ESTABLISHED,t)}t.isReconnect=!1;break;case"disconnected":t.isReconnect=!0,t.wasstable&&t.room.eventEmitter.emit(l.a.CONNECTION_INTERRUPTED,t);break;case"failed":t.room.eventEmitter.emit(l.a.CONNECTION_ICE_FAILED,t)}},this.peerconnection.onnegotiationneeded=function(){var e=t.peerconnection.signalingState,n=t.peerconnection.remoteDescription;if(g.a.usesUnifiedPlan()&&"stable"===e&&n&&"string"==typeof n.sdp){A.debug("onnegotiationneeded fired on "+t.peerconnection+" in state: "+e);t.modificationQueue.push(function(e){var n=new E.a(t.peerconnection.localDescription.sdp);t._renegotiate().then(function(){var r=new E.a(t.peerconnection.localDescription.sdp);t.notifyMySSRCUpdate(n,r),e()},e)},function(e){e?A.error("onnegotiationneeded error",e):A.debug("onnegotiationneeded executed - OK")})}},this.signalingLayer.setChatRoom(this.room),!this.isP2P&&e.enableLayerSuspension&&(this._removeSenderVideoConstraintsChangeListener=this.rtc.addListener(c.a.SENDER_VIDEO_CONSTRAINTS_CHANGED,function(){t.eventEmitter.emit(S.a.REMOTE_VIDEO_CONSTRAINTS_CHANGED,t)}))}},{key:"getRemoteRecvMaxFrameHeight",value:function(){return this.isP2P?this.remoteRecvMaxFrameHeight:this.options.enableLayerSuspension?this.rtc.getSenderVideoConstraints().idealHeight:void 0}},{key:"sendIceCandidate",value:function(e){var t=this,n=new E.a(this.peerconnection.localDescription.sdp);if(e&&e.candidate.length&&!this.lasticecandidate){var r=C.a.iceparams(n.media[e.sdpMLineIndex],n.session),i=C.a.candidateToJingle(e.candidate);if(!r||!i){var o="failed to get ice && jcand";return m.a.callErrorHandler(new Error(o)),void A.error(o)}r.xmlns="urn:xmpp:jingle:transports:ice-udp:1",this.usedrip?(0===this.dripContainer.length&&setTimeout(function(){0!==t.dripContainer.length&&(t.sendIceCandidates(t.dripContainer),t.dripContainer=[])},20),this.dripContainer.push(e)):this.sendIceCandidates([e])}else A.log("sendIceCandidate: last candidate."),this.lasticecandidate=!0}},{key:"sendIceCandidates",value:function(e){var t=this;if(this._assertNotEnded("sendIceCandidates")){A.log("sendIceCandidates",e);for(var n=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"transport-info",initiator:this.initiatorJid,sid:this.sid}),r=new E.a(this.peerconnection.localDescription.sdp),o=function(i){var o=e.filter(function(e){return e.sdpMLineIndex===i}),a=C.a.parseMLine(r.media[i].split("\r\n")[0]);if(o.length>0){var s=C.a.iceparams(r.media[i],r.session);s.xmlns="urn:xmpp:jingle:transports:ice-udp:1",n.c("content",{creator:t.initiatorJid===t.localJid?"initiator":"responder",name:o[0].sdpMid?o[0].sdpMid:a.media}).c("transport",s);for(var c=0;c<o.length;c++){var u=C.a.candidateToJingle(o[c].candidate);t.failICE&&(u.ip="1.1.1.1"),n.c("candidate",u).up()}var d=C.a.findLine(r.media[i],"a=fingerprint:",r.session);if(d){var l=C.a.parseFingerprint(d);l.required=!0,n.c("fingerprint",{xmlns:"urn:xmpp:jingle:apps:dtls:0"}).t(l.fingerprint),delete l.fingerprint,n.attrs(l),n.up()}n.up(),n.up()}},a=0;a<r.media.length;a++)o(a);this.connection.sendIQ(n,null,this.newJingleErrorHandler(n),1e4)}}},{key:"sendIceFailedNotification",value:function(){var e=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"session-info",initiator:this.initiatorJid,sid:this.sid}).c("ice-state",{xmlns:"http://jitsi.org/protocol/focus"}).t("failed").up();this._bridgeSessionId&&e.c("bridge-session",{xmlns:"http://jitsi.org/protocol/focus",id:this._bridgeSessionId}),this.connection.sendIQ2(e,{timeout:65}).catch(this.newJingleErrorHandler(e))}},{key:"addIceCandidates",value:function(e){var t=this;if("closed"!==this.peerconnection.signalingState){var n=[];e.find(">content>transport>candidate").each(function(e,t){var r=C.a.candidateFromJingle(t);r=r.replace("\r\n","").replace("a=","");var i=new RTCIceCandidate({sdpMLineIndex:0,sdpMid:"",candidate:r});n.push(i)}),n.length?(A.debug("Queued add ("+n.length+") ICE candidates task..."),this.modificationQueue.push(function(e){for(var r,i=_createForOfIteratorHelperLoose(n);!(r=i()).done;){var o=r.value;t.peerconnection.addIceCandidate(o).then(function(){return A.debug("addIceCandidate ok!")},function(e){return A.error("addIceCandidate failed!",e)})}e()})):A.error("No ICE candidates to add ?",e[0]&&e[0].outerHTML)}else A.warn("Ignored add ICE candidate when in closed state")}},{key:"readSsrcInfo",value:function(e){var t=this;$(e).find('>description>source[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each(function(e,n){var r=Number(n.getAttribute("ssrc"));t.isP2P?t.signalingLayer.setSSRCOwner(r,i.Strophe.getResourceFromJid(t.remoteJid)):$(n).find('>ssrc-info[xmlns="http://jitsi.org/jitmeet"]').each(function(e,n){var o=n.getAttribute("owner");o&&o.length&&(isNaN(r)||r<0?A.warn("Invalid SSRC "+r+" value received for "+o):t.signalingLayer.setSSRCOwner(r,i.Strophe.getResourceFromJid(o)))})})}},{key:"generateRecvonlySsrc",value:function(){this.peerconnection?this.peerconnection.generateRecvonlySsrc():A.error("Unable to generate recvonly SSRC - no peerconnection")}},{key:"acceptOffer",value:function(e,t,n,r){var i=this;this.setOfferAnswerCycle(e,function(){i.sendSessionAccept(t,n)},n,r)}},{key:"invite",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!this.isInitiator)throw new Error("Trying to invite from the responder session");this.modificationQueue.push(function(n){for(var r,i=[],o=_createForOfIteratorHelperLoose(t);!(r=o()).done;){var a=r.value;i.push(e.peerconnection.addTrack(a,e.isInitiator))}Promise.all(i).then(function(){return e.peerconnection.createOffer(e.mediaConstraints)}).then(function(t){return e.peerconnection.setLocalDescription(t)}).then(function(){e.sendSessionInitiate(e.peerconnection.localDescription.sdp)}).then(function(){return n()},function(e){return n(e)})},function(e){e?A.error("invite error",e):A.debug("invite executed - OK")})}},{key:"sendSessionInitiate",value:function(e){var t=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"session-initiate",initiator:this.initiatorJid,sid:this.sid});new E.a(e).toJingle(t,this.isInitiator?"initiator":"responder"),t=t.tree(),A.info("Session-initiate: ",t),this.connection.sendIQ(t,function(){A.info('Got RESULT for "session-initiate"')},function(e){A.error('"session-initiate" error',e)},1e4)}},{key:"setAnswer",value:function(e){if(!this.isInitiator)throw new Error("Trying to set an answer on the responder session");this.setOfferAnswerCycle(e,function(){A.info("setAnswer - succeeded")},function(e){A.error("setAnswer failed: ",e)})}},{key:"setOfferAnswerCycle",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];this.modificationQueue.push(function(t){for(var n,o=[],a=_createForOfIteratorHelperLoose(i);!(n=a()).done;){var s=n.value;o.push(r.peerconnection.addTrack(s,r.isInitiator))}var c=r._processNewJingleOfferIq(e),u=r.peerconnection.localDescription.sdp,d=$(e).find('>bridge-session[xmlns="http://jitsi.org/protocol/focus"]').attr("id");d!==r._bridgeSessionId&&(r._bridgeSessionId=d),Promise.all(o).then(function(){return r._renegotiate(c.raw)}).then(function(){if(r.state===y.c&&(r.state=y.a,!r.isP2P||r._localVideoActive&&!r.localRecvMaxFrameHeight||r.sendContentModify()),u){var e=new E.a(r.peerconnection.localDescription.sdp);r.notifyMySSRCUpdate(new E.a(u),e)}}).then(function(){return t()},function(e){return t(e)})},function(e){e?n(e):t()})}},{key:"replaceTransport",value:function(e,t,n){var r=this;this.room.eventEmitter.emit(l.a.ICE_RESTARTING,this);var i=e.clone();e.find(">content[name='data']").attr("senders","rejected"),e.find(">content>description>source").remove(),e.find(">content>description>ssrc-group").remove();var o=e.find(">content>transport>fingerprint");o.attr("hash","sha-1"),o.text("00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00"),this.setOfferAnswerCycle(e,function(){r.setOfferAnswerCycle(i,function(){var e=new E.a(r.peerconnection.localDescription.sdp);r.sendTransportAccept(e,t,n),r.room.eventEmitter.emit(l.a.ICE_RESTART_SUCCESS,r,i)},n)},n)}},{key:"sendSessionAccept",value:function(e,t){var n=this,r=new E.a(this.peerconnection.localDescription.sdp),o=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"session-accept",initiator:this.initiatorJid,responder:this.responderJid,sid:this.sid});this.webrtcIceTcpDisable&&(r.removeTcpCandidates=!0),this.webrtcIceUdpDisable&&(r.removeUdpCandidates=!0),this.failICE&&(r.failICE=!0),r.toJingle(o,this.initiatorJid===this.localJid?"initiator":"responder",null),o=o.tree(),A.info("Sending session-accept",o),this.connection.sendIQ(o,e,this.newJingleErrorHandler(o,function(e){t(e),n.room.eventEmitter.emit(l.a.SESSION_ACCEPT_TIMEOUT,n)}),1e4)}},{key:"sendContentModify",value:function(){var e=this.localRecvMaxFrameHeight,t=this._localVideoActive?"both":"none",n=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"content-modify",initiator:this.initiatorJid,sid:this.sid}).c("content",{name:"video",senders:t});void 0!==e&&(n=n.c("max-frame-height",{xmlns:"http://jitsi.org/jitmeet/video"}).t(e)),A.info(this+" sending content-modify, video senders: "+t+", max frame height: "+e),this.connection.sendIQ(n,null,this.newJingleErrorHandler(n),1e4)}},{key:"setReceiverVideoConstraint",value:function(e){A.info(this+" setReceiverVideoConstraint - max frame height: "+e),this.localRecvMaxFrameHeight=e,this.isP2P?this.state===y.a&&this.sendContentModify():this.rtc.setReceiverVideoConstraint(e)}},{key:"sendTransportAccept",value:function(e,t,n){var r=this,o=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"transport-accept",initiator:this.initiatorJid,sid:this.sid});e.media.forEach(function(t,n){var i=C.a.parseMLine(t.split("\r\n")[0]);o.c("content",{creator:r.initiatorJid===r.localJid?"initiator":"responder",name:i.media}),e.transportToJingle(n,o),o.up()}),o=o.tree(),A.info("Sending transport-accept: ",o),this.connection.sendIQ(o,t,this.newJingleErrorHandler(o,n),1e4)}},{key:"sendTransportReject",value:function(e,t){var n=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"transport-reject",initiator:this.initiatorJid,sid:this.sid});n=n.tree(),A.info("Sending 'transport-reject",n),this.connection.sendIQ(n,e,this.newJingleErrorHandler(n,t),1e4)}},{key:"setSenderMaxBitrates",value:function(){return this._assertNotEnded()?this.peerconnection.setMaxBitRate():Promise.resolve()}},{key:"setSenderVideoConstraint",value:function(e){return this._assertNotEnded()?(A.info(this+" setSenderVideoConstraint: "+e),this.peerconnection.setSenderVideoConstraint(e)):Promise.resolve()}},{key:"setSenderVideoDegradationPreference",value:function(){return this._assertNotEnded()?this.peerconnection.setSenderVideoDegradationPreference():Promise.resolve()}},{key:"terminate",value:function(e,t,n){if(this.state!==y.b){if(!n||Boolean(n.sendSessionTerminate)){var r=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"session-terminate",initiator:this.initiatorJid,sid:this.sid}).c("reason").c(n&&n.reason||"success").up();n&&n.reasonDescription?r.c("text").t(n.reasonDescription).up().up():r.up(),this._bridgeSessionId&&r.c("bridge-session",{xmlns:"http://jitsi.org/protocol/focus",id:this._bridgeSessionId,restart:n&&!0===n.requestRestart}).up(),r=r.tree(),A.info("Sending session-terminate",r),this.connection.sendIQ(r,e,this.newJingleErrorHandler(r,t),1e4)}else A.info("Skipped sending session-terminate for "+this);this.connection.jingle.terminate(this.sid)}}},{key:"onTerminated",value:function(e,t){A.info("Session terminated "+this,e,t),this._xmppListeners.forEach(function(e){return e()}),this._xmppListeners=[],this._removeSenderVideoConstraintsChangeListener&&this._removeSenderVideoConstraintsChangeListener(),this.close()}},{key:"onXmppStatusChanged",value:function(e){e===R.a.Status.CONNECTED&&this._cachedOldLocalSdp&&(A.info("Sending SSRC update on reconnect"),this.notifyMySSRCUpdate(this._cachedOldLocalSdp,this._cachedNewLocalSdp))}},{key:"_parseSsrcInfoFromSourceAdd",value:function(e,t){var n=[];return $(e).each(function(e,r){var i=$(r).attr("name"),o="";$(r).find('ssrc-group[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each(function(){var e=this.getAttribute("semantics"),t=$(this).find(">source").map(function(){return this.getAttribute("ssrc")}).get();t.length&&(o+="a=ssrc-group:"+e+" "+t.join(" ")+"\r\n")}),$(r).find('source[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each(function(){var e=$(this).attr("ssrc");t.containsSSRC(e)?A.warn("Source-add request for existing SSRC: "+e):$(this).find(">parameter").each(function(){o+="a=ssrc:"+e+" "+$(this).attr("name"),$(this).attr("value")&&$(this).attr("value").length&&(o+=":"+$(this).attr("value")),o+="\r\n"})}),t.media.forEach(function(e,t){C.a.findLine(e,"a=mid:"+i)&&(n[t]||(n[t]=""),n[t]+=o)})}),n}},{key:"addRemoteStream",value:function(e){this._addOrRemoveRemoteStream(!0,e)}},{key:"removeRemoteStream",value:function(e){this._addOrRemoveRemoteStream(!1,e)}},{key:"_addOrRemoveRemoteStream",value:function(e,t){var n=this,r=e?"addRemoteStream":"removeRemoteStream";e&&this.readSsrcInfo(t),this.modificationQueue.push(function(i){if(!n.peerconnection.localDescription||!n.peerconnection.localDescription.sdp){var o=r+" - localDescription not ready yet";return A.error(o),void i(o)}A.log("Processing "+r),A.log("ICE connection state: ",n.peerconnection.iceConnectionState);var a=new E.a(n.peerconnection.localDescription.sdp),s=new E.a(n.peerconnection.remoteDescription.sdp),c=e?n._parseSsrcInfoFromSourceAdd(t,s):n._parseSsrcInfoFromSourceRemove(t,s),u=e?n._processRemoteAddSource(c):n._processRemoteRemoveSource(c);n._renegotiate(u.raw).then(function(){var e=new E.a(n.peerconnection.localDescription.sdp);A.log(r+" - OK, SDPs: ",a,e),n.notifyMySSRCUpdate(a,e),i()},function(e){A.error(r+" failed:",e),i(e)})})}},{key:"_processNewJingleOfferIq",value:function(e){var t=new E.a("");return this.webrtcIceTcpDisable&&(t.removeTcpCandidates=!0),this.webrtcIceUdpDisable&&(t.removeUdpCandidates=!0),this.failICE&&(t.failICE=!0),t.fromJingle(e),this.readSsrcInfo($(e).find(">content")),t}},{key:"_processRemoteRemoveSource",value:function(e){var t=g.a.usesPlanB()?new E.a(this.peerconnection.remoteDescription.sdp):new E.a(this.peerconnection.peerconnection.remoteDescription.sdp);return e.forEach(function(e,n){(e=e.split("\r\n")).pop(),g.a.usesPlanB()?e.forEach(function(e){t.media[n]=t.media[n].replace(e+"\r\n","")}):e.forEach(function(e){var n=t.media.findIndex(function(t){return t.includes(e)});n>-1&&(t.media[n]=t.media[n].replace(e+"\r\n",""),g.a.isFirefox()&&(t.media[n]=t.media[n].replace("a=sendonly","a=inactive")))})}),t.raw=t.session+t.media.join(""),t}},{key:"_processRemoteAddSource",value:function(e){var t=new E.a(this.peerconnection.remoteDescription.sdp);return e.forEach(function(e,n){t.media[n]+=e}),t.raw=t.session+t.media.join(""),t}},{key:"_renegotiate",value:function(e){if("closed"===this.peerconnection.signalingState){var t=new Error("Attempted to renegotiate in state closed");return this.room.eventEmitter.emit(l.a.RENEGOTIATION_FAILED,t,this),Promise.reject(t)}var n=e||this.peerconnection.remoteDescription.sdp;if(!n){var r=new Error("Can not renegotiate without remote description, current state: "+this.state);return this.room.eventEmitter.emit(l.a.RENEGOTIATION_FAILED,r,this),Promise.reject(r)}var i=new RTCSessionDescription({type:this.isInitiator?"answer":"offer",sdp:n});return this.isInitiator?this._initiatorRenegotiate(i):this._responderRenegotiate(i)}},{key:"_responderRenegotiate",value:function(e){var t=this;return A.debug("Renegotiate: setting remote description"),this.peerconnection.setRemoteDescription(e).then(function(){return A.debug("Renegotiate: creating answer"),t.peerconnection.createAnswer(t.mediaConstraints).then(function(e){return A.debug("Renegotiate: setting local description"),t.peerconnection.setLocalDescription(e)})})}},{key:"_initiatorRenegotiate",value:function(e){var t=this;return A.debug("Renegotiate: creating offer"),this.peerconnection.createOffer(this.mediaConstraints).then(function(n){return A.debug("Renegotiate: setting local description"),t.peerconnection.setLocalDescription(n).then(function(){return A.debug("Renegotiate: setting remote description"),t.peerconnection.setRemoteDescription(e)})})}},{key:"replaceTrack",value:function(e,t){var n=this,r=function(r){var i=n.peerconnection.localDescription.sdp;g.a.usesPlanB()&&(n.peerconnection.options.capScreenshareBitrate&&e&&t&&t.isVideoTrack()&&n.peerconnection.clearRecvonlySsrc(),!e&&t&&t.isVideoTrack()?n.peerconnection.clearRecvonlySsrc():e&&e.isVideoTrack()&&!t&&(n.peerconnection.clearRecvonlySsrc(),n.peerconnection.generateRecvonlySsrc())),n.peerconnection.replaceTrack(e,t).then(function(r){var o=Promise.resolve();return r&&(e||t)&&n.state===y.a&&(o=n._renegotiate().then(function(){var e=new E.a(n.peerconnection.localDescription.sdp);n.notifyMySSRCUpdate(new E.a(i),e)})),o.then(function(){if(t&&t.isVideoTrack())return n.peerconnection.setSenderVideoDegradationPreference().then(function(){return n.peerconnection.setSenderVideoConstraint()}).then(function(){return n.peerconnection.setMaxBitRate()})})}).then(function(){return r()},function(e){return r(e)})};return new Promise(function(e,t){n.modificationQueue.push(r,function(n){n?(A.error("Replace track error:",n),t(n)):(A.info("Replace track done!"),e())})})}},{key:"_parseSsrcInfoFromSourceRemove",value:function(e,t){var n=[];return $(e).each(function(e,r){var i=$(r).attr("name"),o="";$(r).find('ssrc-group[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each(function(){var e=this.getAttribute("semantics"),t=$(this).find(">source").map(function(){return this.getAttribute("ssrc")}).get();t.length&&(o+="a=ssrc-group:"+e+" "+t.join(" ")+"\r\n")});var a=[];$(r).find('source[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each(function(){var e=$(this).attr("ssrc");a.push(e)}),t.media.forEach(function(e,t){C.a.findLine(e,"a=mid:"+i)&&(n[t]||(n[t]=""),a.forEach(function(r){var i=C.a.findLines(e,"a=ssrc:"+r);i.length&&(n[t]+=i.join("\r\n")+"\r\n")}),n[t]+=o)})}),n}},{key:"_verifyNoSSRCChanged",value:function(e,t){var n=new E.a(this.peerconnection.localDescription.sdp),r=new b.a(t,n),i=r.getNewMedia();if(Object.keys(i).length)return A.error(this+" - some SSRC were added on "+e,i),!1;var o=(r=new b.a(n,t)).getNewMedia();return!Object.keys(o).length||(A.error(this+" - some SSRCs were removed on "+e,o),!1)}},{key:"addTrackAsUnmute",value:function(e){var t=this;return this._addRemoveTrackAsMuteUnmute(!1,e).then(function(){if(e.isVideoTrack()&&g.a.doesVideoMuteByStreamRemove())return t.setSenderMaxBitrates().then(function(){return t.setSenderVideoDegradationPreference()}).then(function(){return t.setSenderVideoConstraint()})})}},{key:"removeTrackAsMute",value:function(e){return this._addRemoveTrackAsMuteUnmute(!0,e)}},{key:"_addRemoveTrackAsMuteUnmute",value:function(e,t){var n=this;if(!t)return Promise.reject('invalid "track" argument value');var r=e?"removeTrackMute":"addTrackUnmute",i=function(i){var o=n.peerconnection;if(o){var a=o.localDescription.sdp;(e?o.removeTrackMute(t):o.addTrackUnmute(t)).then(function(e){e&&a&&o.remoteDescription.sdp?n._renegotiate().then(function(){n._verifyNoSSRCChanged(r,new E.a(a)),i()}):i()},i)}else i("Error:  tried "+r+" track with no active peerconnection")};return new Promise(function(e,t){n.modificationQueue.push(i,function(n){n?t(n):e()})})}},{key:"setMediaTransferActive",value:function(e,t){var n=this;if(!this.peerconnection)return Promise.reject('Can not modify transfer active state, before "initialize" is called');var r=e?"audio active":"audio inactive",i=t?"video active":"video inactive";A.info("Queued make "+i+", "+r+" task...");var o=function(r){var i=n.state===y.a,o=n.peerconnection.setAudioTransferActive(e);n._localVideoActive!==t&&(n._localVideoActive=t,n.isP2P&&i&&n.sendContentModify());var a=n.peerconnection.setVideoTransferActive(n._localVideoActive&&n._remoteVideoActive);i&&(o||a)?n._renegotiate().then(r,r):r()};return new Promise(function(e,t){n.modificationQueue.push(o,function(n){n?t(n):e()})})}},{key:"modifyContents",value:function(e){var t=this,r=n.parseVideoSenders(e),i=n.parseMaxFrameHeight(e);i&&(A.info(this+" received remote max frame height: "+i),this.remoteRecvMaxFrameHeight=i,this.eventEmitter.emit(S.a.REMOTE_VIDEO_CONSTRAINTS_CHANGED,this)),null!==r?(A.debug(this+" queued \"content-modify\" task(video senders=\""+r+"\")"),this.modificationQueue.push(function(e){t._assertNotEnded("content-modify")&&t._modifyRemoteVideoActive(r)?t._renegotiate().then(e,e):e()},function(e){e&&A.error('"content-modify" failed',e)})):A.error(this+' - failed to parse video "senders" attribute in"content-modify" action')}},{key:"_modifyRemoteVideoActive",value:function(e){var t="both"===e||"initiator"===e&&this.isInitiator||"responder"===e&&!this.isInitiator;return t!==this._remoteVideoActive&&(A.debug(this+" new remote video active: "+t),this._remoteVideoActive=t),this.peerconnection.setVideoTransferActive(this._localVideoActive&&this._remoteVideoActive)}},{key:"notifyMySSRCUpdate",value:function(e,t){if(this.state===y.a){if(!this.connection.connected)return this._cachedOldLocalSdp||(this._cachedOldLocalSdp=e),this._cachedNewLocalSdp=t,void A.warn("Not sending SSRC update while the signaling is disconnected");this._cachedOldLocalSdp=void 0,this._cachedNewLocalSdp=void 0;var n=new b.a(t,e),r=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"source-remove",initiator:this.initiatorJid,sid:this.sid});n.toJingle(r)?(A.info("Sending source-remove",r.tree()),this.connection.sendIQ(r,null,this.newJingleErrorHandler(r),1e4)):A.log("removal not necessary"),n=new b.a(e,t);var o=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"source-add",initiator:this.initiatorJid,sid:this.sid});n.toJingle(o)?(A.info("Sending source-add",o.tree()),this.connection.sendIQ(o,null,this.newJingleErrorHandler(o),1e4)):A.log("addition not necessary")}else A.warn("Skipping SSRC update in '"+this.state+" ' state.")}},{key:"newJingleErrorHandler",value:function(e,t){var n=this;return function(e){var r={},i=$(e).find("error");if(i.length){r.code=i.attr("code");var o=$(e).find("error :first");o.length&&(r.reason=o[0].tagName);var a=i.find(">text");a.length&&(r.msg=a.text())}e||(r.reason="timeout"),r.session=n.toString(),t?t(r):n.state===y.b&&"item-not-found"===r.reason?A.debug("Jingle error: "+JSON.stringify(r)):m.a.callErrorHandler(new Error("Jingle error: "+JSON.stringify(r)))}}},{key:"getIceConnectionState",value:function(){return this.peerconnection.getConnectionState()}},{key:"close",value:function(){var e=this;this.state=y.b,this.establishmentDuration=void 0,this.peerconnection&&(this.peerconnection.onicecandidate=null,this.peerconnection.oniceconnectionstatechange=null,this.peerconnection.onnegotiationneeded=null,this.peerconnection.onsignalingstatechange=null),this.modificationQueue.clear(),this.modificationQueue.push(function(t){e.signalingLayer.setChatRoom(null),e.peerconnection&&e.peerconnection.close(),t()}),this.modificationQueue.shutdown()}},{key:"toString",value:function(){return"JingleSessionPC[p2p="+this.isP2P+",initiator="+this.isInitiator+",sid="+this.sid+"]"}},{key:"_abtestSuspendVideoEnabled",value:function(e){var t=e.abTesting;if(t&&t.enableSuspendVideoTest){var n=this._getInitiatorJid();return Object(v.integerHash)(n)%2==0}}}]),n})(_.a)}).call(this,"modules/xmpp/JingleSessionPC.js")},function(e,t,n){"use strict";t.a={REMOTE_VIDEO_CONSTRAINTS_CHANGED:"media_session.REMOTE_VIDEO_CONSTRAINTS_CHANGED"}},function(e,t,n){"use strict";n.r(t),n.d(t,"DEVICE_LIST_CHANGED",function(){return r}),n.d(t,"PERMISSION_PROMPT_IS_SHOWN",function(){return i});var r="mediaDevices.devicechange",i="mediaDevices.permissionPromptIsShown"},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return E});var r=n(57),i=n.n(r),o=n(4),a=n(45),s=n.n(a),c=n(145),u=n(1),d=n(68),l=n(20),h=n(28),p=Object(o.getLogger)(e),f="error",m="key-info",v="key-info-ack",g="session-ack",_="session-init",y=Symbol("OlmData"),S={PARTICIPANT_E2EE_CHANNEL_READY:"olm.participant_e2ee_channel_ready",PARTICIPANT_KEY_UPDATED:"olm.partitipant_key_updated"},E=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._conf=e,r._init=new d.a,r._key=void 0,r._keyIndex=-1,r._reqs=new Map,n.isSupported()?(r._bootstrapOlm(),r._conf.on(u.ENDPOINT_MESSAGE_RECEIVED,r._onEndpointMessageReceived.bind(_assertThisInitialized(r))),r._conf.on(u.CONFERENCE_JOINED,r._onConferenceJoined.bind(_assertThisInitialized(r))),r._conf.on(u.CONFERENCE_LEFT,r._onConferenceLeft.bind(_assertThisInitialized(r))),r._conf.on(u.USER_LEFT,r._onParticipantLeft.bind(_assertThisInitialized(r)))):r._init.reject(new Error("Olm not supported")),r}return _createClass(n,[{key:"updateKey",value:function(e){var t,n,r,i,o,a=this;return _regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:this._key=e,this._keyIndex++,t=[],n=function(e){var n,r=e.getId(),i=a._getParticipantOlmData(e);if(!i.session)return p.warn("Tried to send key to participant "+r+" but we have no session"),"continue";var o=Object(c.a)(),s=(_defineProperty(n={},h.b,"olm"),_defineProperty(n,"olm",{type:m,data:{ciphertext:a._encryptKeyInfo(i.session),uuid:o}}),n),u=new d.a;u.setRejectTimeout(5e3),u.catch(function(){a._reqs.delete(o)}),a._reqs.set(o,u),t.push(u),a._sendMessage(s,r)},r=_createForOfIteratorHelperLoose(this._conf.getParticipants());case 4:if((i=r()).done){s.next=11;break}if(o=i.value,"continue"!==n(o)){s.next=9;break}return s.abrupt("continue",9);case 9:s.next=4;break;case 11:return s.next=13,_regeneratorRuntime.awrap(Promise.allSettled(t));case 13:return s.abrupt("return",this._keyIndex);case 14:case"end":return s.stop()}},null,this,null,Promise)}},{key:"_bootstrapOlm",value:function(){var e;return _regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return p.debug("Initializing Olm..."),t.prev=1,t.next=4,_regeneratorRuntime.awrap(Olm.init());case 4:this._olmAccount=new Olm.Account,this._olmAccount.create(),e=JSON.parse(this._olmAccount.identity_keys()),this._idKey=e.curve25519,p.debug("Olm initialized!"),this._init.resolve(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),p.error("Failed to initialize Olm",t.t0),this._init.reject(t.t0);case 13:case"end":return t.stop()}},null,this,[[1,10]],Promise)}},{key:"_encryptKeyInfo",value:function(e){var t={};return void 0!==this._key&&(t.key=!!this._key&&i.a.fromByteArray(this._key),t.keyIndex=this._keyIndex),e.encrypt(JSON.stringify(t))}},{key:"_getParticipantOlmData",value:function(e){return e[y]=e[y]||{},e[y]}},{key:"_onConferenceJoined",value:function(){var e,t,n,r;return _regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return p.debug("Conference joined"),i.next=3,_regeneratorRuntime.awrap(this._init);case 3:for(e=[],t=_createForOfIteratorHelperLoose(this._conf.getParticipants());!(n=t()).done;)r=n.value,e.push(this._sendSessionInit(r));return i.next=7,_regeneratorRuntime.awrap(Promise.allSettled(e));case 7:case"end":return i.stop()}},null,this,null,Promise)}},{key:"_onConferenceLeft",value:function(){var e,t,n;return _regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return p.debug("Conference left"),r.next=3,_regeneratorRuntime.awrap(this._init);case 3:for(e=_createForOfIteratorHelperLoose(this._conf.getParticipants());!(t=e()).done;)n=t.value,this._onParticipantLeft(n.getId(),n);this._olmAccount&&(this._olmAccount.free(),this._olmAccount=void 0);case 5:case"end":return r.stop()}},null,this,null,Promise)}},{key:"_onEndpointMessageReceived",value:function(e,t){var n,r,o,a,c,u,d,l,y,E,C,T,R,A,k,I,w,P,O,D,N,M,L,x;return _regeneratorRuntime.async(function(F){for(;;)switch(F.prev=F.next){case 0:if("olm"===t[h.b]){F.next=2;break}return F.abrupt("return");case 2:if(t.olm){F.next=4;break}return F.abrupt("return",void p.warn("Incorrectly formatted message"));case 4:return F.next=6,_regeneratorRuntime.awrap(this._init);case 6:n=t.olm,r=e.getId(),o=this._getParticipantOlmData(e),F.t0=n.type,F.next=F.t0===_?10:F.t0===g?12:F.t0===f?14:F.t0===m?16:F.t0===v?18:19;break;case 10:return o.session?(p.warn("Participant "+r+" already has a session"),this._sendError(e,"Session already established")):((c=new Olm.Session).create_outbound(this._olmAccount,n.data.idKey,n.data.otKey),o.session=c,_defineProperty(a={},h.b,"olm"),_defineProperty(a,"olm",{type:g,data:{ciphertext:this._encryptKeyInfo(c),uuid:n.data.uuid}}),u=a,this._sendMessage(u,r)),F.abrupt("break",19);case 12:return o.session?(p.warn("Participant "+r+" already has a session"),this._sendError(e,"No session found")):n.data.uuid===o.pendingSessionUuid?(d=n.data.ciphertext,l=this._reqs.get(n.data.uuid),(y=new Olm.Session).create_inbound(this._olmAccount,d.body),this._olmAccount.remove_one_time_keys(y),E=y.decrypt(d.type,d.body),o.session=y,o.pendingSessionUuid=void 0,p.debug("Olm session established with "+r),this.eventEmitter.emit(S.PARTICIPANT_E2EE_CHANNEL_READY,r),this._reqs.delete(n.data.uuid),l.resolve(),(C=b(E)).key&&(T=i.a.toByteArray(C.key),R=C.keyIndex,o.lastKey=T,this.eventEmitter.emit(S.PARTICIPANT_KEY_UPDATED,r,T,R))):(p.warn("Received ACK with the wrong UUID"),this._sendError(e,"Invalid UUID")),F.abrupt("break",19);case 14:return p.error(n.data.error),F.abrupt("break",19);case 16:return o.session?(A=n.data.ciphertext,void 0!==(k=b(o.session.decrypt(A.type,A.body))).key&&void 0!==k.keyIndex&&(w=!!k.key&&i.a.toByteArray(k.key),P=k.keyIndex,s()(o.lastKey,w)||(o.lastKey=w,this.eventEmitter.emit(S.PARTICIPANT_KEY_UPDATED,r,w,P)),_defineProperty(I={},h.b,"olm"),_defineProperty(I,"olm",{type:v,data:{ciphertext:this._encryptKeyInfo(o.session),uuid:n.data.uuid}}),O=I,this._sendMessage(O,r))):(p.debug("Received key info message from "+r+" but we have no session for them!"),this._sendError(e,"No session found while processing key-info")),F.abrupt("break",19);case 18:o.session?(D=n.data.ciphertext,void 0!==(N=b(o.session.decrypt(D.type,D.body))).key&&void 0!==N.keyIndex&&(M=!!N.key&&i.a.toByteArray(N.key),L=N.keyIndex,s()(o.lastKey,M)||(o.lastKey=M,this.eventEmitter.emit(S.PARTICIPANT_KEY_UPDATED,r,M,L))),x=this._reqs.get(n.data.uuid),this._reqs.delete(n.data.uuid),x.resolve()):(p.debug("Received key info ack message from "+r+" but we have no session for them!"),this._sendError(e,"No session found while processing key-info-ack"));case 19:case"end":return F.stop()}},null,this,null,Promise)}},{key:"_onParticipantLeft",value:function(e,t){p.debug("Participant "+e+" left");var n=this._getParticipantOlmData(t);n.session&&(n.session.free(),n.session=void 0)}},{key:"_sendError",value:function(e,t){var n,r=e.getId(),i=(_defineProperty(n={},h.b,"olm"),_defineProperty(n,"olm",{type:f,data:{error:t}}),n);this._sendMessage(i,r)}},{key:"_sendMessage",value:function(e,t){this._conf.sendMessage(e,t)}},{key:"_sendSessionInit",value:function(e){var t,n=this,r=e.getId(),i=this._getParticipantOlmData(e);if(i.session)return p.warn("Tried to send session-init to "+r+" but we already have a session"),Promise.reject();if(void 0!==i.pendingSessionUuid)return p.warn("Tried to send session-init to "+r+" but we already have a pending session"),Promise.reject();this._olmAccount.generate_one_time_keys(1);var o=JSON.parse(this._olmAccount.one_time_keys()),a=Object.values(o.curve25519)[0];if(!a)return Promise.reject(new Error("No one-time-keys generated"));this._olmAccount.mark_keys_as_published();var s=Object(c.a)(),u=(_defineProperty(t={},h.b,"olm"),_defineProperty(t,"olm",{type:_,data:{idKey:this._idKey,otKey:a,uuid:s}}),t),l=new d.a;return l.setRejectTimeout(5e3),l.catch(function(){n._reqs.delete(s),i.pendingSessionUuid=void 0}),this._reqs.set(s,l),this._sendMessage(u,r),i.pendingSessionUuid=s,l}}],[{key:"isSupported",value:function(){return void 0!==window.Olm}}]),n})(l.a);function b(e){try{return JSON.parse(e)}catch(e){return{}}}E.events=S}).call(this,"modules/e2ee/OlmAdapter.js")},function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),a=r[0],s=r[1],c=new o(3*(a+s)/4-s),d=0,l=s>0?a-4:a;for(n=0;n<l;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;return 2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[d++]=255&t),1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(d(e,a,a+16383>s?s:a+16383));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function d(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(9);function i(e,t){if(!t)return!1;if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]instanceof Array&&t[n]instanceof Array){if(!e[n].equals(t[n]))return!1}else if(e[n]!==t[n])return!1;return!0}function o(e,t){if(this.mySDP=e,this.otherSDP=t,!e)throw new Error('"mySDP" is undefined!');if(!t)throw new Error('"otherSDP" is undefined!')}o.prototype.getNewMedia=function(){var e=this.mySDP.getMediaSsrcMap(),t=this.otherSDP.getMediaSsrcMap(),n={};return Object.keys(t).forEach(function(r){var o=e[r],a=t[r];o||!a?(Object.keys(a.ssrcs).forEach(function(e){-1===Object.keys(o.ssrcs).indexOf(e)?(n[r]||(n[r]={mediaindex:a.mediaindex,mid:a.mid,ssrcs:{},ssrcGroups:[]}),n[r].ssrcs[e]=a.ssrcs[e]):a.ssrcs[e].lines&&o.ssrcs[e].lines&&void 0!==o.ssrcs[e].lines.find(function(e){return-1!==e.indexOf("msid")})!=(void 0!==a.ssrcs[e].lines.find(function(e){return-1!==e.indexOf("msid")}))&&(n[r]||(n[r]={mediaindex:a.mediaindex,mid:a.mid,ssrcs:{},ssrcGroups:[]}),n[r].ssrcs[e]=a.ssrcs[e])}),a.ssrcGroups.forEach(function(e){for(var t=!1,s=0;s<o.ssrcGroups.length;s++){var c=o.ssrcGroups[s];if(e.semantics===c.semantics&&i(e.ssrcs,c.ssrcs)){t=!0;break}}t||(n[r]||(n[r]={mediaindex:a.mediaindex,mid:a.mid,ssrcs:{},ssrcGroups:[]}),n[r].ssrcGroups.push(e))})):n[r]=a}),n},o.prototype.toJingle=function(e){var t=this.getNewMedia(),n=!1;return Object.keys(t).forEach(function(i){n=!0;var o=t[i];e.c("content",{name:o.mid}),e.c("description",{xmlns:"urn:xmpp:jingle:apps:rtp:1",media:o.mid}),Object.keys(o.ssrcs).forEach(function(t){var n=o.ssrcs[t];e.c("source",{xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0"}),e.attrs({ssrc:n.ssrc}),n.lines.forEach(function(t){var n=t.indexOf(" "),i=t.substr(n+1);if(e.c("parameter"),-1===i.indexOf(":"))e.attrs({name:i});else{var o=i.split(":",2),a=o[0],s=r.a.filterSpecialChars(o[1]);e.attrs({name:a}),e.attrs({value:s})}e.up()}),e.up()}),o.ssrcGroups.forEach(function(t){t.ssrcs.length&&(e.c("ssrc-group",{semantics:t.semantics,xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0"}),t.ssrcs.forEach(function(t){e.c("source",{ssrc:t}).up()}),e.up())}),e.up(),e.up()}),n}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!(function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}})();var c,u=[],d=!1,l=-1;function h(){d&&c&&(d=!1,c.length?u=c.concat(u):l=-1,u.length&&p())}function p(){if(!d){var e=s(h);d=!0;for(var t=u.length;t;){for(c=u,u=[];++l<t;)c&&c[l].run();l=-1,t=u.length}c=null,d=!1,(function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}})(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new f(e,t)),1!==u.length||d||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),window.AudioContext=window.AudioContext||window.webkitAudioContext;var r=null;function i(e,t,n){this.stream=e,this.intervalId=null,this.intervalMilis=t,this.audioLevel=0,this.callback=n}window.AudioContext&&((r=new AudioContext).suspend&&r.suspend()),i.prototype.start=function(){var e=this;if(i.isLocalStatsSupported()){r.resume();var t=r.createAnalyser();t.smoothingTimeConstant=.8,t.fftSize=2048,r.createMediaStreamSource(this.stream).connect(t),this.intervalId=setInterval(function(){var n=new Uint8Array(t.frequencyBinCount);t.getByteTimeDomainData(n);var r=(function(e){for(var t=0,n=e.length,r=0;r<n;r++)t<e[r]&&(t=e[r]);return parseFloat(((t-127)/128).toFixed(3))})(n);e.audioLevel=(function(e,t){var n=t-e;return parseFloat((n>.2?t-.2:n<-.4?t+.4:e).toFixed(3))})(r,e.audioLevel),e.callback(e.audioLevel)},this.intervalMilis)}},i.prototype.stop=function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)},i.isLocalStatsSupported=function(){return Boolean(r)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r="https://api.callstats.io/static/callstats-ws.min.js"},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return d}),n.d(t,"b",function(){return p});var r=n(2),i=n(0),o=n.n(i),a=n(20),s=n(4).getLogger(e),c=["category","type","lang","name"],u=["category","type","lang"],d="Feature version mismatch";function l(e,t){var n=0;return u.some(function(r){return 0!==(n=e[r]>t[r]?1:e[r]<t[r]&&-1)}),n}function h(e,t){var n=e.sort(l).reduce(function(e,t){return c.reduce(function(e,n,r){return e+(0===r?"":"/")+(t[n]?t[n]:"")},"")+"<"},""),i=t.sort().reduce(function(e,t){return e+t+"<"},"");return Object(r.b64_sha1)(n+i)}var p=(function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"http://jitsi.org/jitsimeet";if(_classCallCheck(this,n),(e=t.call(this)).node=a,e.disco=i.disco,!e.disco)throw new Error("Missing strophe-plugins (disco plugin is required)!");e.versionToCapabilities=Object.create(null),e.jidToVersion=Object.create(null),e.version="",e.rooms=new Set;var s=i.emuc;return s.addListener(o.a.EMUC_ROOM_ADDED,function(t){return e._addChatRoom(t)}),s.addListener(o.a.EMUC_ROOM_REMOVED,function(t){return e._removeChatRoom(t)}),Object.keys(s.rooms).forEach(function(t){e._addChatRoom(s.rooms[t])}),r.Strophe.addNamespace("CAPS","http://jabber.org/protocol/caps"),e.disco.addFeature(r.Strophe.NS.CAPS),i.addHandler(e._handleCaps.bind(_assertThisInitialized(e)),r.Strophe.NS.CAPS),e._onMucMemberLeft=e._removeJidToVersionEntry.bind(_assertThisInitialized(e)),_possibleConstructorReturn(e)}return _createClass(n,[{key:"addFeature",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.disco.addFeature(e),this._generateVersion(),t&&this.submit()}},{key:"removeFeature",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.disco.removeFeature(e),this._generateVersion(),t&&this.submit()}},{key:"submit",value:function(){this.rooms.forEach(function(e){return e.sendPresence()})}},{key:"getFeatures",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,r=e in this.jidToVersion?this.jidToVersion[e]:null;if(!(r&&r.version in this.versionToCapabilities)){var i=r?r.node+"#"+r.version:null;return this._getDiscoInfo(e,i,n).then(function(e){var n=e.features,o=e.identities;if(r){var a=h(Array.from(o),Array.from(n)),c=r.node+"#"+a;return c===i?(t.versionToCapabilities[c]=n,n):t.versionToCapabilities[c]?t.versionToCapabilities[c]:(s.error("Expected node "+i+" but received "+c),Promise.reject(d))}return n})}return Promise.resolve(this.versionToCapabilities[r.version])}},{key:"getFeaturesAndIdentities",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return this._getDiscoInfo(e,t,n)}},{key:"_getDiscoInfo",value:function(e,t,n){var r=this;return new Promise(function(i,o){return r.disco.info(e,t,function(e){var t=new Set,n=new Set;$(e).find(">query>feature").each(function(e,n){return t.add(n.getAttribute("var"))}),$(e).find(">query>identity").each(function(e,t){return n.add({type:t.getAttribute("type"),name:t.getAttribute("name"),category:t.getAttribute("category")})}),i({features:t,identities:n})},o,n)})}},{key:"_addChatRoom",value:function(e){this.rooms.add(e),e.addListener(o.a.MUC_MEMBER_LEFT,this._onMucMemberLeft),this._fixChatRoomPresenceMap(e)}},{key:"_removeChatRoom",value:function(e){this.rooms.delete(e),e.removeListener(o.a.MUC_MEMBER_LEFT,this._onMucMemberLeft)}},{key:"_fixChatRoomPresenceMap",value:function(e){e.addToPresence("c",{attributes:{xmlns:r.Strophe.NS.CAPS,hash:"sha-1",node:this.node,ver:this.version}})}},{key:"_notifyVersionChanged",value:function(){var e=this;this.rooms.forEach(function(t){return e._fixChatRoomPresenceMap(t)})}},{key:"_generateVersion",value:function(){this.version=h(this.disco._identities,this.disco._features),this._notifyVersionChanged()}},{key:"_handleCaps",value:function(e){var t=e.getAttribute("from"),n=e.querySelector("c"),r=n.getAttribute("ver"),i=n.getAttribute("node"),a=this.jidToVersion[t];return this.jidToVersion[t]={version:r,node:i},a&&a.version!==r&&this.eventEmitter.emit(o.a.PARTCIPANT_FEATURES_CHANGED,t),!0}},{key:"_removeJidToVersionEntry",value:function(e){e in this.jidToVersion&&delete this.jidToVersion[e]}}]),n})(a.a)}).call(this,"modules/xmpp/Caps.js")},function(e,t,n){"use strict";n.r(t),n.d(t,"ON",function(){return r}),n.d(t,"OFF",function(){return i});var r="on",i="off"},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return h});var r=n(19),i=n.n(r),o=n(4),a=n(15),s=n(8),c=n(3),u=n(10),d=Object(o.getLogger)(e),l={track_mute:"onmute",track_unmute:"onunmute",track_ended:"onended"},h=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o,a,s){var c;return _classCallCheck(this,n),(c=t.call(this)).addEventListener=c.addListener,c.removeEventListener=c.off=c.removeListener,c.containers=[],c.conference=e,c.audioLevel=-1,c.type=a,c.track=i,c.videoType=s,c.handlers=new Map,c.disposed=!1,c._streamInactiveHandler=o,c._setStream(r),c}return _createClass(n,[{key:"_addMediaStreamInactiveHandler",value:function(e){c.a.isFirefox()?this.track.onended=e:this.stream.oninactive=e}},{key:"_setHandler",value:function(e,t){if(l.hasOwnProperty(e)){if(t?this.handlers.set(e,t):this.handlers.delete(e),this.stream)for(var n,r=_createForOfIteratorHelperLoose(this.stream.getTracks());!(n=r()).done;){n.value[l[e]]=t}}else d.error("Invalid handler type "+e)}},{key:"_unregisterHandlers",value:function(){if(this.stream){for(var e,t=_createForOfIteratorHelperLoose(this.handlers.keys());!(e=t()).done;)for(var n,r=e.value,i=_createForOfIteratorHelperLoose(this.stream.getVideoTracks());!(n=i()).done;){n.value[l[r]]=void 0}this._streamInactiveHandler&&this._addMediaStreamInactiveHandler(void 0)}else d.warn(this+": unable to unregister handlers - no stream object")}},{key:"_setStream",value:function(e){if(this.stream!==e&&(this.stream=e,this.stream)){for(var t,n=_createForOfIteratorHelperLoose(this.handlers.keys());!(t=n()).done;){var r=t.value;this._setHandler(r,this.handlers.get(r))}this._streamInactiveHandler&&this._addMediaStreamInactiveHandler(this._streamInactiveHandler)}}},{key:"getType",value:function(){return this.type}},{key:"isAudioTrack",value:function(){return this.getType()===s.a}},{key:"isWebRTCTrackMuted",value:function(){return this.track&&this.track.muted}},{key:"isVideoTrack",value:function(){return this.getType()===s.c}},{key:"isLocal",value:function(){throw new Error("Not implemented by subclass")}},{key:"isLocalAudioTrack",value:function(){return this.isAudioTrack()&&this.isLocal()}},{key:"getOriginalStream",value:function(){return this.stream}},{key:"getStreamId",value:function(){return this.stream?this.stream.id:null}},{key:"getTrack",value:function(){return this.track}},{key:"getTrackLabel",value:function(){return this.track.label}},{key:"getTrackId",value:function(){return this.track?this.track.id:null}},{key:"getUsageLabel",value:function(){return this.isAudioTrack()?"mic":this.videoType?this.videoType:"default"}},{key:"_maybeFireTrackAttached",value:function(e){this.conference&&e&&this.conference._onTrackAttach(this,e)}},{key:"attach",value:function(e){this.stream&&(this._onTrackAttach(e),u.a.attachMediaStream(e,this.stream)),this.containers.push(e),this._maybeFireTrackAttached(e),this._attachTTFMTracker(e)}},{key:"detach",value:function(e){for(var t=this.containers,n=t.length-1;n>=0;--n){var r=t[n];e||(this._onTrackDetach(r),u.a.attachMediaStream(r,null)),e&&r!==e||t.splice(n,1)}e&&(this._onTrackDetach(e),u.a.attachMediaStream(e,null))}},{key:"_onTrackAttach",value:function(e){}},{key:"_onTrackDetach",value:function(e){}},{key:"_attachTTFMTracker",value:function(e){}},{key:"dispose",value:function(){return this.removeAllListeners(),this.disposed=!0,Promise.resolve()}},{key:"isScreenSharing",value:function(){}},{key:"getId",value:function(){return this.stream?u.a.getStreamID(this.stream):null}},{key:"isActive",value:function(){return void 0===this.stream.active||this.stream.active}},{key:"setAudioLevel",value:function(e,t){c.a.supportsReceiverStats()&&!this.isLocalAudioTrack()&&this.isWebRTCTrackMuted()||(this.audioLevel!==e?(this.audioLevel=e,this.emit(a.TRACK_AUDIO_LEVEL_CHANGED,e,t)):0===this.audioLevel&&0===e&&this.isLocal()&&!this.isWebRTCTrackMuted()&&this.emit(a.NO_AUDIO_INPUT,e))}},{key:"getMSID",value:function(){var e=this.getStreamId(),t=this.getTrackId();return e&&t?e+" "+t:null}},{key:"setAudioOutput",value:function(e){var t=this;return u.a.isDeviceChangeAvailable("output")?this.isVideoTrack()?Promise.resolve():Promise.all(this.containers.map(function(t){return t.setSinkId(e).catch(function(e){throw d.warn("Failed to change audio output device on element. Default or previously set audio output device will be used.",t,e),e})})).then(function(){t.emit(a.TRACK_AUDIO_OUTPUT_CHANGED,e)}):Promise.reject(new Error("Audio output device change is not supported"))}}]),n})(i.a)}).call(this,"modules/RTC/JitsiTrack.js")},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(19),i=n.n(r),o=n(12),a=n(66),s=n(22),c=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this))._procNodeSampleRate=e,o._vadProcessor=r,o._localTrack=i,o._bufferResidue=new Float32Array([]),o._audioContext=Object(a.a)({sampleRate:r.getRequiredPCMFrequency()}),o._vadSampleSize=r.getSampleLength(),o._onAudioProcess=o._onAudioProcess.bind(_assertThisInitialized(o)),o._initializeAudioContext(),o}return _createClass(n,[{key:"_initializeAudioContext",value:function(){this._audioSource=this._audioContext.createMediaStreamSource(this._localTrack.stream),this._audioProcessingNode=this._audioContext.createScriptProcessor(this._procNodeSampleRate,1,1)}},{key:"_onAudioProcess",value:function(e){for(var t=e.inputBuffer.getChannelData(0),n=[].concat(_toConsumableArray(this._bufferResidue),_toConsumableArray(t)),r=Date.now(),i=0;i+this._vadSampleSize<n.length;i+=this._vadSampleSize){var o=n.slice(i,i+this._vadSampleSize),a=this._vadProcessor.calculateAudioFrameVAD(o.slice());this.emit(s.VAD_SCORE_PUBLISHED,{timestamp:r,score:a,pcmData:o,deviceId:this._localTrack.getDeviceId()})}this._bufferResidue=n.slice(i,n.length)}},{key:"_connectAudioGraph",value:function(){this._audioProcessingNode.onaudioprocess=this._onAudioProcess,this._audioSource.connect(this._audioProcessingNode),this._audioProcessingNode.connect(this._audioContext.destination)}},{key:"_disconnectAudioGraph",value:function(){this._audioProcessingNode.onaudioprocess=function(){},this._audioProcessingNode.disconnect(),this._audioSource.disconnect()}},{key:"_cleanupResources",value:function(){this._disconnectAudioGraph(),this._localTrack.stopStream()}},{key:"getDeviceId",value:function(){return this._localTrack.getDeviceId()}},{key:"getTrackLabel",value:function(){return this._localTrack.getDeviceLabel()}},{key:"start",value:function(){this._connectAudioGraph()}},{key:"stop",value:function(){this._disconnectAudioGraph(),this._bufferResidue=[]}},{key:"destroy",value:function(){this._destroyed||(this._cleanupResources(),this._destroyed=!0)}}],[{key:"create",value:function(e,t,r){return o.a.obtainAudioAndVideoPermissions({devices:["audio"],micDeviceId:e}).then(function(i){if(!i[0])throw new Error("Failed to create jitsi local track for device id: "+e);return new n(t,r,i[0])})}}]),n})(i.a)},function(e,t,n){"use strict";function r(e){var t=window.AudioContext||window.webkitAudioContext;if(t)return new t(e)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.r(t),n.d(t,"E2E_RTT_CHANGED",function(){return r});var r="e2eping.e2e_rtt_changed"},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=(function(){function e(){var t=this;_classCallCheck(this,e),this.promise=new Promise(function(e,n){t.resolve=function(){t.clearRejectTimeout(),e.apply(void 0,arguments)},t.reject=function(){t.clearRejectTimeout(),n.apply(void 0,arguments)}}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}return _createClass(e,[{key:"clearRejectTimeout",value:function(){clearTimeout(this._timeout)}},{key:"setRejectTimeout",value:function(e){var t=this;this._timeout=setTimeout(function(){t.reject(new Error("timeout"))},e)}}]),e})()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return h}),n.d(t,"b",function(){return p});var r=n(4),i=n(25),o=n.n(i),a=n(15),s=n(8),c=n(6),u=n.n(c),d=n(3),l=Object(r.getLogger)(e),h=["1","2","3"],p=(function(){function e(t,n){_classCallCheck(this,e),this.pc=t,this.videoBitrates=n,this.localStreamEncodingsConfig=[{active:!0,maxBitrate:d.a.isFirefox()?this.videoBitrates.high:this.videoBitrates.low,rid:"1",scaleResolutionDownBy:d.a.isFirefox()?1:4},{active:!0,maxBitrate:this.videoBitrates.standard,rid:"2",scaleResolutionDownBy:2},{active:!0,maxBitrate:d.a.isFirefox()?this.videoBitrates.low:this.videoBitrates.high,rid:"3",scaleResolutionDownBy:d.a.isFirefox()?4:1}]}return _createClass(e,[{key:"ensureCorrectOrderOfSsrcs",value:function(e){var t=o.a.parse(e.sdp);return t.media.forEach(function(e){if("audio"!==e.type&&e.ssrcGroups&&e.ssrcGroups.length){var t=[];e.ssrcGroups[0].ssrcs.split(" ").forEach(function(n){var r=e.ssrcs.filter(function(e){return e.id.toString()===n});t=t.concat(r)}),e.ssrcs=t}}),new RTCSessionDescription({type:e.type,sdp:o.a.write(t)})}},{key:"_getStreamEncodings",value:function(e){return this.pc.isSimulcastOn()&&e.isVideoTrack()?this.localStreamEncodingsConfig:e.isVideoTrack()?[{active:!0,maxBitrate:this.videoBitrates.high}]:[{active:!0}]}},{key:"insertUnifiedPlanSimulcastReceive",value:function(e){if(d.a.usesSdpMungingForSimulcast())return e;var t=o.a.parse(e.sdp),n=t.media.findIndex(function(e){return"video"===e.type});if(t.media[n].rids&&(t.media[n].simulcast_03||t.media[n].simulcast))return t.media.forEach(function(e,r){"video"===e.type&&r!==n&&(t.media[r].rids=void 0,t.media[r].simulcast=void 0,t.media[r].simulcast_03=void 0)}),new RTCSessionDescription({type:e.type,sdp:o.a.write(t)});t.media[n].rids=[{id:"1",direction:"recv"},{id:"2",direction:"recv"},{id:"3",direction:"recv"}];var r=d.a.isFirefox()&&d.a.isVersionGreaterThan(71)?"recv "+h.join(";"):"recv rid="+h.join(";");return t.media[n].simulcast_03={value:r},new RTCSessionDescription({type:e.type,sdp:o.a.write(t)})}},{key:"addTrack",value:function(e,t){var n=e.getTrack();if(t){var r={direction:"sendrecv",streams:[e.getOriginalStream()],sendEncodings:[]};d.a.isFirefox()||(r.sendEncodings=this._getStreamEncodings(e)),this.pc.peerconnection.addTransceiver(n,r)}else this.pc.peerconnection.addTrack(n)}},{key:"addTrackUnmute",value:function(e){var t=this,n=e.getType(),r=e.getTrack(),i=this.pc.peerconnection.getTransceivers().find(function(e){return e.receiver&&e.receiver.track&&e.receiver.track.kind===n});return i?(l.debug("Adding "+e+" on "+this.pc),"recvonly"===i.direction?e.getOriginalStream()?(this.pc.peerconnection.addStream(e.getOriginalStream()),this.setEncodings(e).then(function(){t.pc.localTracks.set(e.rtcId,e),i.direction="sendrecv"})):Promise.resolve():i.sender.replaceTrack(r)):Promise.reject(new Error("RTCRtpTransceiver for "+n+" not found"))}},{key:"getLocalStreamHeightConstraints",value:function(e){if(d.a.isReactNative())return null;for(var t,n=[],r=e.getSettings().height,i=_createForOfIteratorHelperLoose(this.localStreamEncodingsConfig);!(t=i()).done;){var o=t.value;n.push(r/o.scaleResolutionDownBy)}return n}},{key:"removeTrackMute",value:function(e){var t=e.getType(),n=this.pc.peerconnection.getTransceivers().find(function(t){return t.sender&&t.sender.track&&t.sender.track.id===e.getTrackId()});return n?(l.debug("Removing "+e+" on "+this.pc),n.sender.replaceTrack(null)):Promise.reject(new Error("RTCRtpTransceiver for "+t+" not found"))}},{key:"replaceTrack",value:function(e,t){var n=this;if(e&&t){var r=t.getType(),i=t.getOriginalStream(),o=r===s.a?i.getAudioTracks()[0]:i.getVideoTracks()[0],c=this.pc.peerconnection.getTransceivers().find(function(e){return e.receiver.track.kind===r&&!e.stopped});return c?(l.debug("Replacing "+e+" with "+t+" on "+this.pc),c.sender.replaceTrack(o).then(function(){var r=n.pc.localSSRCs.get(e.rtcId);n.pc.localTracks.delete(e.rtcId),n.pc.localSSRCs.delete(e.rtcId),n.pc._addedStreams=n.pc._addedStreams.filter(function(e){return e!==i}),n.pc.localTracks.set(t.rtcId,t),n.pc._addedStreams.push(i),n.pc.localSSRCs.set(t.rtcId,r),n.pc.eventEmitter.emit(u.a.LOCAL_TRACK_SSRC_UPDATED,t,n.pc._extractPrimarySSRC(r))})):Promise.reject(new Error("replace track failed"))}if(e&&!t){if(!this.removeTrackMute(e))return Promise.reject(new Error("replace track failed"));this.pc.localTracks.delete(e.rtcId),this.pc.localSSRCs.delete(e.rtcId)}else if(t&&!e){var d=this.pc.localSSRCs.get(t.rtcId);this.addTrackUnmute(t).then(function(){t.emit(a.TRACK_MUTE_CHANGED,t),n.pc.localTracks.set(t.rtcId,t),n.pc.localSSRCs.set(t.rtcId,d)})}return Promise.resolve()}},{key:"setAudioTransferActive",value:function(e){this.setMediaTransferActive(s.a,e)}},{key:"setEncodings",value:function(e){var t=this.pc.peerconnection.getTransceivers().find(function(t){return t.sender&&t.sender.track&&t.sender.track.kind===e.getType()}),n=t.sender.getParameters();return n.encodings=this._getStreamEncodings(e),t.sender.setParameters(n)}},{key:"setMediaTransferActive",value:function(e,t){var n=this.pc.peerconnection.getTransceivers().filter(function(t){return t.receiver&&t.receiver.track&&t.receiver.track.kind===e}),r=this.pc.getLocalTracks(e);l.info((t?"Enabling":"Suspending")+" "+e+" media transfer on "+this.pc),n.forEach(function(e,n){t?0===n&&r.length?e.direction="sendrecv":e.direction="recvonly":e.direction="inactive"})}},{key:"setVideoTransferActive",value:function(e){this.setMediaTransferActive(s.c,e)}}]),e})()}).call(this,"modules/RTC/TPCUtils.js")},function(e,t){e.exports=(function(){"use strict";function e(t,n,r){_classCallCheck(this,e),this._userId=t,this.setDisplayName(n),this._isLocalStats=r||!1,this.setDominantSpeaker(!1),this.totalDominantSpeakerTime=0,this._dominantSpeakerStart=0,this._hasLeft=!1}return _createClass(e,[{key:"getUserId",value:function(){return this._userId}},{key:"getDisplayName",value:function(){return this.displayName}},{key:"setDisplayName",value:function(e){this.displayName=e}},{key:"isLocalStats",value:function(){return this._isLocalStats}},{key:"isDominantSpeaker",value:function(){return this._dominantSpeakerStart>0}},{key:"setDominantSpeaker",value:function(e){if(!this.isDominantSpeaker()&&e)this._dominantSpeakerStart=Date.now();else if(this.isDominantSpeaker()&&!e){var t=Date.now()-this._dominantSpeakerStart;this.totalDominantSpeakerTime+=t,this._dominantSpeakerStart=0}}},{key:"getTotalDominantSpeakerTime",value:function(){var e=this.totalDominantSpeakerTime;return this.isDominantSpeaker()&&(e+=Date.now()-this._dominantSpeakerStart),e}},{key:"hasLeft",value:function(){return this._hasLeft}},{key:"markAsHasLeft",value:function(){this._hasLeft=!0,this.setDominantSpeaker(!1)}}]),e})()},function(e,t){e.exports={IDENTITY_UPDATED:"authentication.identity_updated"}},function(module,exports,__webpack_require__){(function(process,global){var __WEBPACK_AMD_DEFINE_RESULT__;!(function(){"use strict";var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD=__webpack_require__(149),ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}!root.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e){return function(t){return new Md5(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Md5},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createOutputMethod(n)}return e},nodeWrap=function nodeWrap(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("md5").update(e,"utf8").digest("hex");if(null==e)throw ERROR;return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash("md5").update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod};function Md5(e){if(e)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(e){if(!this.finalized){var t,n=typeof e;if("string"!==n){if("object"!==n)throw ERROR;if(null===e)throw ERROR;if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw ERROR;t=!0}for(var r,i,o=0,a=e.length,s=this.blocks,c=this.buffer8;o<a;){if(this.hashed&&(this.hashed=!1,s[0]=s[16],s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)if(ARRAY_BUFFER)for(i=this.start;o<a&&i<64;++o)c[i++]=e[o];else for(i=this.start;o<a&&i<64;++o)s[i>>2]|=e[o]<<SHIFT[3&i++];else if(ARRAY_BUFFER)for(i=this.start;o<a&&i<64;++o)(r=e.charCodeAt(o))<128?c[i++]=r:r<2048?(c[i++]=192|r>>6,c[i++]=128|63&r):r<55296||r>=57344?(c[i++]=224|r>>12,c[i++]=128|r>>6&63,c[i++]=128|63&r):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++o)),c[i++]=240|r>>18,c[i++]=128|r>>12&63,c[i++]=128|r>>6&63,c[i++]=128|63&r);else for(i=this.start;o<a&&i<64;++o)(r=e.charCodeAt(o))<128?s[i>>2]|=r<<SHIFT[3&i++]:r<2048?(s[i>>2]|=(192|r>>6)<<SHIFT[3&i++],s[i>>2]|=(128|63&r)<<SHIFT[3&i++]):r<55296||r>=57344?(s[i>>2]|=(224|r>>12)<<SHIFT[3&i++],s[i>>2]|=(128|r>>6&63)<<SHIFT[3&i++],s[i>>2]|=(128|63&r)<<SHIFT[3&i++]):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++o)),s[i>>2]|=(240|r>>18)<<SHIFT[3&i++],s[i>>2]|=(128|r>>12&63)<<SHIFT[3&i++],s[i>>2]|=(128|r>>6&63)<<SHIFT[3&i++],s[i>>2]|=(128|63&r)<<SHIFT[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=EXTRA[3&t],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var e,t,n,r,i,o,a=this.blocks;this.first?t=((t=((e=((e=a[0]-680876937)<<7|e>>>25)-271733879<<0)^(n=((n=(-271733879^(r=((r=(-1732584194^2004318071&e)+a[1]-117830708)<<12|r>>>20)+e<<0)&(-271733879^e))+a[2]-1126478375)<<17|n>>>15)+r<<0)&(r^e))+a[3]-1316259209)<<22|t>>>10)+n<<0:(e=this.h0,t=this.h1,n=this.h2,t=((t+=((e=((e+=((r=this.h3)^t&(n^r))+a[0]-680876936)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+a[1]-389564586)<<12|r>>>20)+e<<0)&(e^t))+a[2]+606105819)<<17|n>>>15)+r<<0)&(r^e))+a[3]-1044525330)<<22|t>>>10)+n<<0),t=((t+=((e=((e+=(r^t&(n^r))+a[4]-176418897)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+a[5]+1200080426)<<12|r>>>20)+e<<0)&(e^t))+a[6]-1473231341)<<17|n>>>15)+r<<0)&(r^e))+a[7]-45705983)<<22|t>>>10)+n<<0,t=((t+=((e=((e+=(r^t&(n^r))+a[8]+1770035416)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+a[9]-1958414417)<<12|r>>>20)+e<<0)&(e^t))+a[10]-42063)<<17|n>>>15)+r<<0)&(r^e))+a[11]-1990404162)<<22|t>>>10)+n<<0,t=((t+=((e=((e+=(r^t&(n^r))+a[12]+1804603682)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+a[13]-40341101)<<12|r>>>20)+e<<0)&(e^t))+a[14]-1502002290)<<17|n>>>15)+r<<0)&(r^e))+a[15]+1236535329)<<22|t>>>10)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+a[1]-165796510)<<5|e>>>27)+t<<0)^t))+a[6]-1069501632)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+a[11]+643717713)<<14|n>>>18)+r<<0)^r))+a[0]-373897302)<<20|t>>>12)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+a[5]-701558691)<<5|e>>>27)+t<<0)^t))+a[10]+38016083)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+a[15]-660478335)<<14|n>>>18)+r<<0)^r))+a[4]-405537848)<<20|t>>>12)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+a[9]+568446438)<<5|e>>>27)+t<<0)^t))+a[14]-1019803690)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+a[3]-187363961)<<14|n>>>18)+r<<0)^r))+a[8]+1163531501)<<20|t>>>12)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+a[13]-1444681467)<<5|e>>>27)+t<<0)^t))+a[2]-51403784)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+a[7]+1735328473)<<14|n>>>18)+r<<0)^r))+a[12]-1926607734)<<20|t>>>12)+n<<0,t=((t+=((o=(r=((r+=((i=t^n)^(e=((e+=(i^r)+a[5]-378558)<<4|e>>>28)+t<<0))+a[8]-2022574463)<<11|r>>>21)+e<<0)^e)^(n=((n+=(o^t)+a[11]+1839030562)<<16|n>>>16)+r<<0))+a[14]-35309556)<<23|t>>>9)+n<<0,t=((t+=((o=(r=((r+=((i=t^n)^(e=((e+=(i^r)+a[1]-1530992060)<<4|e>>>28)+t<<0))+a[4]+1272893353)<<11|r>>>21)+e<<0)^e)^(n=((n+=(o^t)+a[7]-155497632)<<16|n>>>16)+r<<0))+a[10]-1094730640)<<23|t>>>9)+n<<0,t=((t+=((o=(r=((r+=((i=t^n)^(e=((e+=(i^r)+a[13]+681279174)<<4|e>>>28)+t<<0))+a[0]-358537222)<<11|r>>>21)+e<<0)^e)^(n=((n+=(o^t)+a[3]-722521979)<<16|n>>>16)+r<<0))+a[6]+76029189)<<23|t>>>9)+n<<0,t=((t+=((o=(r=((r+=((i=t^n)^(e=((e+=(i^r)+a[9]-640364487)<<4|e>>>28)+t<<0))+a[12]-421815835)<<11|r>>>21)+e<<0)^e)^(n=((n+=(o^t)+a[15]+530742520)<<16|n>>>16)+r<<0))+a[2]-995338651)<<23|t>>>9)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+a[0]-198630844)<<6|e>>>26)+t<<0)|~n))+a[7]+1126891415)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+a[14]-1416354905)<<15|n>>>17)+r<<0)|~e))+a[5]-57434055)<<21|t>>>11)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+a[12]+1700485571)<<6|e>>>26)+t<<0)|~n))+a[3]-1894986606)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+a[10]-1051523)<<15|n>>>17)+r<<0)|~e))+a[1]-2054922799)<<21|t>>>11)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+a[8]+1873313359)<<6|e>>>26)+t<<0)|~n))+a[15]-30611744)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+a[6]-1560198380)<<15|n>>>17)+r<<0)|~e))+a[13]+1309151649)<<21|t>>>11)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+a[4]-145523070)<<6|e>>>26)+t<<0)|~n))+a[11]-1120210379)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+a[2]+718787259)<<15|n>>>17)+r<<0)|~e))+a[9]-343485551)<<21|t>>>11)+n<<0,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=n-1732584194<<0,this.h3=r+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0)},Md5.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3;return HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3;return[255&e,e>>8&255,e>>16&255,e>>24&255,255&t,t>>8&255,t>>16&255,t>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,255&r,r>>8&255,r>>16&255,r>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var e,t,n,r="",i=this.array(),o=0;o<15;)e=i[o++],t=i[o++],n=i[o++],r+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[63&(e<<4|t>>>4)]+BASE64_ENCODE_CHAR[63&(t<<2|n>>>6)]+BASE64_ENCODE_CHAR[63&n];return e=i[o],r+(BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[e<<4&63]+"==")};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()}).call(this,__webpack_require__(59),__webpack_require__(44))},function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,u=s||c||Function("return this")(),d=Object.prototype.toString,l=Math.max,h=Math.min,p=function(){return u.Date.now()};function f(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if((function(e){return"symbol"==typeof e||(function(e){return!!e&&"object"==typeof e})(e)&&"[object Symbol]"==d.call(e)})(e))return NaN;if(f(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=f(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var s=i.test(e);return s||o.test(e)?a(e.slice(2),s?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,o,a,s,c,u=0,d=!1,v=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function _(t){var n=r,o=i;return r=i=void 0,u=t,a=e.apply(o,n)}function y(e){return u=e,s=setTimeout(E,t),d?_(e):a}function S(e){var n=e-c;return void 0===c||n>=t||n<0||v&&e-u>=o}function E(){var e=p();if(S(e))return b(e);s=setTimeout(E,(function(e){var n=t-(e-c);return v?h(n,o-(e-u)):n})(e))}function b(e){return s=void 0,g&&r?_(e):(r=i=void 0,a)}function C(){var e=p(),n=S(e);if(r=arguments,i=this,c=e,n){if(void 0===s)return y(c);if(v)return s=setTimeout(E,t),_(c)}return void 0===s&&(s=setTimeout(E,t)),a}return t=m(t)||0,f(n)&&(d=!!n.leading,o=(v="maxWait"in n)?l(m(n.maxWait)||0,t):o,g="trailing"in n?!!n.trailing:g),C.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=c=i=s=void 0},C.flush=function(){return void 0===s?a:b(p())},C}}).call(this,n(44))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return S});var r=n(4),i=n(18),o=n(14),a=n(15),s=n(43),c=n.n(s),u=n(8),d=n(6),l=n.n(d),h=n(13),p=n.n(h),f=n(7),m=n(3),v=n(5),g=n(64),_=n(10),y=Object(r.getLogger)(e),S=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,i=e.deviceId,o=e.facingMode,s=e.mediaType,c=e.resolution,u=e.rtcId,d=e.sourceId,h=e.sourceType,f=e.stream,v=e.track,g=e.videoType,y=e.effects,S=void 0===y?[]:y;_classCallCheck(this,n),(r=t.call(this,null,f,v,function(){return r.emit(a.LOCAL_TRACK_STOPPED)},s,g))._setEffectInProgress=!1;var E=S.find(function(e){return e.isEnabled(_assertThisInitialized(r))});return E&&r._startStreamEffect(E),r.rtcId=u,r.sourceId=d,r.sourceType=h,m.a.usesNewGumFlow()?(r.resolution=v.getSettings().height,r.maxEnabledResolution=c,r._constraints=v.getConstraints(),Object.keys(r._constraints).length||g!==p.a.CAMERA||(r._constraints={height:v.getSettings().height,width:v.getSettings().width})):(r.resolution=m.a.isFirefox()?null:c,r.maxEnabledResolution=r.resolution),r.deviceId=i,r._prevSetMuted=Promise.resolve(),r._facingMode=o,r._trackEnded=!1,r._hasSentData=!1,r._testDataSent=!0,r._realDeviceId=""===r.deviceId?void 0:r.deviceId,r._trackMutedTS=0,r._onDeviceListWillChange=function(e){var t=r._realDeviceId;r._setRealDeviceIdFromDeviceList(e),(void 0===r.getTrack().readyState&&void 0!==r._realDeviceId&&!e.find(function(e){return e.deviceId===r._realDeviceId})||void 0!==t&&void 0===r._realDeviceId)&&(r._trackEnded=!0)},r.isAudioTrack()&&_.a.isDeviceChangeAvailable("output")&&(r._onAudioOutputDeviceChanged=r.setAudioOutput.bind(_assertThisInitialized(r)),_.a.addListener(l.a.AUDIO_OUTPUT_DEVICE_CHANGED,r._onAudioOutputDeviceChanged)),_.a.addListener(l.a.DEVICE_LIST_WILL_CHANGE,r._onDeviceListWillChange),r._initNoDataFromSourceHandlers(),r}return _createClass(n,[{key:"isEnded",value:function(){return this.isVideoTrack()&&this.isMuted()?this._trackEnded:"ended"===this.getTrack().readyState||this._trackEnded}},{key:"_initNoDataFromSourceHandlers",value:function(){var e=this;this._isNoDataFromSourceEventsEnabled()&&(this._setHandler("track_mute",function(){e._trackMutedTS=window.performance.now(),e._fireNoDataFromSourceEvent()}),this._setHandler("track_unmute",function(){e._fireNoDataFromSourceEvent(),v.a.sendAnalyticsAndLog(f.s,{media_type:e.getType(),track_type:"local",value:window.performance.now()-e._trackMutedTS})}),this.isVideoTrack()&&this.videoType===p.a.CAMERA&&this._setHandler("track_ended",function(){e.isReceivingData()||e._fireNoDataFromSourceEvent()}))}},{key:"_isNoDataFromSourceEventsEnabled",value:function(){return!this.isVideoTrack()||this.videoType!==p.a.DESKTOP}},{key:"_fireNoDataFromSourceEvent",value:function(){var e=!this.isReceivingData();this.emit(a.NO_DATA_FROM_SOURCE,e),v.a.sendAnalytics(Object(f.H)(this.getType(),e)),v.a.sendLog(JSON.stringify({name:a.NO_DATA_FROM_SOURCE,log:e}))}},{key:"_setRealDeviceIdFromDeviceList",value:function(e){var t=this.getTrack(),n=t.kind+"input",r=e.find(function(e){return e.kind===n&&e.label===t.label});if(!r&&"default"===this._realDeviceId){var i=(t.label||"").replace("Default - ","");r=e.find(function(e){return e.kind===n&&e.label===i})}this._realDeviceId=r?r.deviceId:void 0}},{key:"_setStream",value:function(e){_get(_getPrototypeOf(n.prototype),"_setStream",this).call(this,e),e?(this.storedMSID=this.getMSID(),y.debug("Setting new MSID: "+this.storedMSID+" on "+this)):y.debug("Setting 'null' stream on "+this)}},{key:"_startStreamEffect",value:function(e){this._streamEffect=e,this._originalStream=this.stream,this._setStream(this._streamEffect.startEffect(this._originalStream)),this.track=this.stream.getTracks()[0]}},{key:"_stopStreamEffect",value:function(){this._streamEffect&&(this._streamEffect.stopEffect(),this._setStream(this._originalStream),this._originalStream=null,this.track=this.stream.getTracks()[0])}},{key:"_switchStreamEffect",value:function(e){this._streamEffect&&(this._stopStreamEffect(),this._streamEffect=void 0),e&&this._startStreamEffect(e)}},{key:"setEffect",value:function(e){var t=this;if(void 0===this._streamEffect&&void 0===e)return Promise.resolve();if(void 0!==e&&!e.isEnabled(this))return Promise.reject(new Error("Incompatible effect instance!"));if(!0===this._setEffectInProgress)return Promise.reject(new Error("setEffect already in progress!"));if(this.isMuted()&&!this.isAudioTrack())return this._streamEffect=e,Promise.resolve();var n=this.conference;return n?(this._setEffectInProgress=!0,m.a.usesUnifiedPlan()?(this._switchStreamEffect(e),this.isVideoTrack()&&this.containers.forEach(function(e){return _.a.attachMediaStream(e,t.stream)}),n.replaceTrack(this,this).then(function(){t._setEffectInProgress=!1}).catch(function(e){throw t._setEffectInProgress=!1,t._switchStreamEffect(),y.error("Failed to switch to the new stream!",e),e})):n.removeTrack(this).then(function(){return t._switchStreamEffect(e),t.isVideoTrack()&&t.containers.forEach(function(e){return _.a.attachMediaStream(e,t.stream)}),n.addTrack(t)}).then(function(){t._setEffectInProgress=!1}).catch(function(e){throw t._setEffectInProgress=!1,t._switchStreamEffect(),y.error("Failed to switch to the new stream!",e),e})):(this._switchStreamEffect(e),Promise.resolve())}},{key:"mute",value:function(){return this._queueSetMuted(!0)}},{key:"unmute",value:function(){return this._queueSetMuted(!1)}},{key:"_queueSetMuted",value:function(e){var t=this._setMuted.bind(this,e);return this._prevSetMuted=this._prevSetMuted.then(t,t),this._prevSetMuted}},{key:"_setMuted",value:function(e){var t=this;if(this.isMuted()===e)return Promise.resolve();if(this.disposed)return Promise.reject(new i.a(o.TRACK_IS_DISPOSED));var n=Promise.resolve(),r=function(){return y.info("Mute "+t+": "+e)};if(this.isAudioTrack()||this.videoType===p.a.DESKTOP||!m.a.doesVideoMuteByStreamRemove())r(),this.track&&(this.track.enabled=!e);else if(e)n=new Promise(function(e,n){r(),t._removeStreamFromConferenceAsMute(function(){t._streamEffect&&t._stopStreamEffect(),t._unregisterHandlers(),t.stopStream(),t._setStream(null),e()},n)});else{r();var s={cameraDeviceId:this.getDeviceId(),devices:[u.c],effects:this._streamEffect?[this._streamEffect]:[],facingMode:this.getCameraFacingMode()};m.a.usesNewGumFlow()?n=_.a.newObtainAudioAndVideoPermissions(_extends({},s,{constraints:{video:this._constraints}})):(this.resolution&&(s.resolution=this.resolution),n=_.a.obtainAudioAndVideoPermissions(s)),n=n.then(function(e){var n=t.getType()===u.b?u.c:t.getType(),r=m.a.usesNewGumFlow()?e.find(function(e){return e.track.kind===n}):e.find(function(e){return e.mediaType===n});if(!r)throw new i.a(o.TRACK_NO_STREAM_FOUND);return t._setStream(r.stream),t.track=r.track,t.videoType!==r.videoType&&(y.warn(t+": video type has changed after unmute!",t.videoType,r.videoType),t.videoType=r.videoType),t._streamEffect&&t._startStreamEffect(t._streamEffect),t.containers.map(function(e){return _.a.attachMediaStream(e,t.stream)}),t._addStreamToConferenceAsUnmute()})}return n.then(function(){return t._sendMuteStatus(e)}).then(function(){return t.emit(a.TRACK_MUTE_CHANGED,t)})}},{key:"_addStreamToConferenceAsUnmute",value:function(){var e=this;return this.conference?new Promise(function(t,n){e.conference._addLocalTrackAsUnmute(e).then(t,function(e){return n(new Error(e))})}):Promise.resolve()}},{key:"_removeStreamFromConferenceAsMute",value:function(e,t){this.conference?this.conference._removeLocalTrackAsMute(this).then(e,function(e){return t(new Error(e))}):e()}},{key:"_sendMuteStatus",value:function(e){var t=this;return this.conference&&this.conference.room?new Promise(function(n){t.conference.room[t.isAudioTrack()?"setAudioMute":"setVideoMute"](e,n)}):Promise.resolve()}},{key:"dispose",value:function(){var e=this;this._switchStreamEffect();var t=Promise.resolve();return this.conference&&(t=this.conference.removeTrack(this)),this.stream&&(this.stopStream(),this.detach()),_.a.removeListener(l.a.DEVICE_LIST_WILL_CHANGE,this._onDeviceListWillChange),this._onAudioOutputDeviceChanged&&_.a.removeListener(l.a.AUDIO_OUTPUT_DEVICE_CHANGED,this._onAudioOutputDeviceChanged),t.then(function(){return _get(_getPrototypeOf(n.prototype),"dispose",e).call(e)})}},{key:"isMuted",value:function(){return!(this.stream&&(!this.isVideoTrack()||this.isActive())&&this.track&&this.track.enabled)}},{key:"_setConference",value:function(e){this.conference=e;for(var t=0;t<this.containers.length;t++)this._maybeFireTrackAttached(this.containers[t])}},{key:"isLocal",value:function(){return!0}},{key:"getDeviceId",value:function(){return this._realDeviceId||this.deviceId}},{key:"getParticipantId",value:function(){return this.conference&&this.conference.myUserId()}},{key:"_onByteSentStatsReceived",value:function(e,t){var n=this;t>0&&(this._hasSentData=!0);var r=e.getConnectionState();this._testDataSent&&"connected"===r&&(setTimeout(function(){n._hasSentData||(y.warn(n+" 'bytes sent' <= 0:                         "+t),v.a.analytics.sendEvent(f.r,{media_type:n.getType()}))},3e3),this._testDataSent=!1)}},{key:"getCameraFacingMode",value:function(){if(this.isVideoTrack()&&this.videoType===p.a.CAMERA){var e;try{e=this.track.getSettings()}catch(e){}return e&&"facingMode"in e?e.facingMode:void 0!==this._facingMode?this._facingMode:c.a.USER}}},{key:"stopStream",value:function(){this._stopStreamInProgress=!0;try{_.a.stopMediaStream(this.stream)}finally{this._stopStreamInProgress=!1}}},{key:"_switchCamera",value:function(){this.isVideoTrack()&&this.videoType===p.a.CAMERA&&"function"==typeof this.track._switchCamera&&(this.track._switchCamera(),this._facingMode=this._facingMode===c.a.ENVIRONMENT?c.a.USER:c.a.ENVIRONMENT)}},{key:"isReceivingData",value:function(){return!(!this.isVideoTrack()||!this.isMuted()&&!this._stopStreamInProgress&&this.videoType!==p.a.DESKTOP)||!!this.stream&&(this._effectEnabled?this._originalStream:this.stream).getTracks().some(function(e){return!("readyState"in e&&"live"!==e.readyState||"muted"in e&&!0===e.muted)})}},{key:"toString",value:function(){return"LocalTrack["+this.rtcId+","+this.getType()+"]"}}]),n})(g.a)}).call(this,"modules/RTC/JitsiLocalTrack.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return u});var r=n(19),i=n(4),o=n(1),a=n(22),s=n(65),c=Object(i.getLogger)(e),u=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this))._createVADProcessor=r,i._vadEmitter=null,i._isVADEmitterRunning=!1,i._detectionServices=[],i._vadInitTracker=Promise.resolve(),i._processVADScore=i._processVADScore.bind(_assertThisInitialized(i)),e.on(o.TRACK_ADDED,i._trackAdded.bind(_assertThisInitialized(i))),e.on(o.TRACK_REMOVED,i._trackRemoved.bind(_assertThisInitialized(i))),e.on(o.TRACK_MUTE_CHANGED,i._trackMuteChanged.bind(_assertThisInitialized(i))),i}return _createClass(n,[{key:"addVADDetectionService",value:function(e){var t=this;this._detectionServices.push(e),e.on(a.DETECTOR_STATE_CHANGE,function(){!t._detectionServices.filter(function(e){return!0===e.isActive()}).length&&t._isVADEmitterRunning?t._stopVADEmitter():t._isVADEmitterRunning||t._startVADEmitter()})}},{key:"_startVADEmitter",value:function(){this._vadEmitter.on(a.VAD_SCORE_PUBLISHED,this._processVADScore),this._vadEmitter.start(),this._isVADEmitterRunning=!0}},{key:"_stopVADEmitter",value:function(){this._vadEmitter.removeListener(a.VAD_SCORE_PUBLISHED,this._processVADScore),this._vadEmitter.stop(),this._isVADEmitterRunning=!1}},{key:"_processVADScore",value:function(e){for(var t,n=_createForOfIteratorHelperLoose(this._detectionServices);!(t=n()).done;){t.value.processVADScore(e)}}},{key:"_changeDetectorsMuteState",value:function(e){for(var t,n=_createForOfIteratorHelperLoose(this._detectionServices);!(t=n()).done;){t.value.changeMuteState(e)}}},{key:"_trackAdded",value:function(e){var t=this;e.isLocalAudioTrack()&&(this._vadInitTracker=this._vadInitTracker.then(function(){return t._createVADProcessor()}).then(function(t){return s.a.create(e.getDeviceId(),4096,t)}).then(function(n){c.debug("Created VAD emitter for track: ",e.getTrackLabel()),t._vadEmitter=n,t._changeDetectorsMuteState(e.isMuted())}))}},{key:"_trackMuteChanged",value:function(e){var t=this;e.isLocalAudioTrack()&&(this._vadInitTracker=this._vadInitTracker.then(function(){t._changeDetectorsMuteState(e.isMuted())}))}},{key:"_trackRemoved",value:function(e){var t=this;e.isLocalAudioTrack()&&(this._vadInitTracker=this._vadInitTracker.then(function(){c.debug("Removing track from VAD detection - ",e.getTrackLabel()),t._vadEmitter&&(t._stopVADEmitter(),t._vadEmitter.destroy(),t._vadEmitter=null);for(var n,r=_createForOfIteratorHelperLoose(t._detectionServices);!(n=r()).done;){n.value.reset()}}))}}]),n})(r.EventEmitter)}).call(this,"modules/detection/VADAudioAnalyser.js")},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(2),i=n(51),o=(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this._connection=t.connection,this._mode=t.mode,this._setSessionID(t.sessionID),this.setStatus(t.status)}return _createClass(e,[{key:"getError",value:function(){return this._error}},{key:"getID",value:function(){return this._sessionID}},{key:"getInitiator",value:function(){return this._initiator}},{key:"getLiveStreamViewURL",value:function(){return this._liveStreamViewURL}},{key:"getStatus",value:function(){return this._status}},{key:"getTerminator",value:function(){return this._terminator}},{key:"getMode",value:function(){return this._mode}},{key:"setError",value:function(e){this._error=e}},{key:"setLiveStreamViewURL",value:function(e){this._liveStreamViewURL=e}},{key:"setStatus",value:function(e){this._status=e}},{key:"setInitiator",value:function(e){this._initiator=e}},{key:"setTerminator",value:function(e){this._terminator=e}},{key:"start",value:function(e){var t=this,n=e.appData,r=e.broadcastId,o=e.focusMucJid,a=e.streamId;return new Promise(function(e,s){t._connection.sendIQ(t._createIQ({action:"start",appData:n,focusMucJid:o,broadcastId:r,streamId:a}),function(n){t.setStatus("pending"),t._setSessionID(i.a.getSessionIdFromIq(n)),e()},function(e){t._setErrorFromIq(e),s(e)})})}},{key:"stop",value:function(e){var t=this,n=e.focusMucJid;return new Promise(function(e,r){t._connection.sendIQ(t._createIQ({action:"stop",focusMucJid:n}),e,r)})}},{key:"_createIQ",value:function(e){var t=e.action,n=e.appData,i=e.broadcastId,o=e.focusMucJid,a=e.streamId;return Object(r.$iq)({to:o,type:"set"}).c("jibri",{xmlns:"http://jitsi.org/protocol/jibri",action:t,app_data:n,recording_mode:this._mode,streamid:a,you_tube_broadcast_id:i}).up()}},{key:"_setErrorFromIq",value:function(e){var t=e.getElementsByTagName("error")[0];this.setError(t.children[0].tagName)}},{key:"_setSessionID",value:function(e){this._sessionID=e}}]),e})()},function(e,t,n){"use strict";var r=n(19),i=n.n(r),o=n(55),a=n(12),s=n(3),c=n(5),u=n(8),d=n(6),l=n.n(d);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=new((function(){function e(){var t=this;_classCallCheck(this,e),this._eventEmitter=new i.a,this._grantedPermissions={},a.a.addListener(l.a.DEVICE_LIST_CHANGED,function(e){return t._eventEmitter.emit(o.DEVICE_LIST_CHANGED,e)}),a.a.addListener(l.a.DEVICE_LIST_AVAILABLE,function(e){return t._logOutputDevice(t.getAudioOutputDevice(),e)}),a.a.addListener(l.a.GRANTED_PERMISSIONS,function(e){return t._handleGrantedPermissions(e)}),this._permissionsApiSupported=new Promise(function(e){navigator.permissions?navigator.permissions.query({name:"camera"}).then(function(){return e(!0)},function(){return e(!1)}):e(!1)})}return _createClass(e,[{key:"_handleGrantedPermissions",value:function(e){this._grantedPermissions=(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){h(e,t,n[t])})}return e})({},this._grantedPermissions,e)}},{key:"_logOutputDevice",value:function(e,t){var n=t.find(function(t){return"audiooutput"===t.kind&&t.deviceId===e});n&&c.a.sendActiveDeviceListEvent(a.a.getEventDataForActiveDevice(n))}},{key:"enumerateDevices",value:function(e){a.a.enumerateDevices(e)}},{key:"isDeviceListAvailable",value:function(){return a.a.isDeviceListAvailable()}},{key:"isDeviceChangeAvailable",value:function(e){return a.a.isDeviceChangeAvailable(e)}},{key:"isDevicePermissionGranted",value:function(e){var t=this;return new Promise(function(n){e in t._grantedPermissions?n(t._grantedPermissions[e]):t._permissionsApiSupported.then(function(t){if(!t)return s.a.isSafari()?void n(!0):void n(!1);var r=[];switch(e){case u.c:r.push(navigator.permissions.query({name:"camera"}));break;case u.a:r.push(navigator.permissions.query({name:"microphone"}));break;default:r.push(navigator.permissions.query({name:"camera"})),r.push(navigator.permissions.query({name:"microphone"}))}Promise.all(r).then(function(e){return n(e.every(function(e){return"granted"===(e.state||e.status)}))},function(){return n(!1)})})})}},{key:"isMultipleAudioInputSupported",value:function(){return!s.a.isFirefox()}},{key:"getAudioOutputDevice",value:function(){return a.a.getAudioOutputDevice()}},{key:"setAudioOutputDevice",value:function(e){return a.a.getCurrentlyAvailableMediaDevices().length>0&&this._logOutputDevice(e,a.a.getCurrentlyAvailableMediaDevices()),a.a.setAudioOutputDevice(e)}},{key:"addEventListener",value:function(e,t){this._eventEmitter.addListener(e,t)}},{key:"removeEventListener",value:function(e,t){this._eventEmitter.removeListener(e,t)}},{key:"emitEvent",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this._eventEmitter).emit.apply(t,[e].concat(r))}},{key:"supportsVideo",value:function(){return s.a.supportsVideo()}}]),e})())},function(e,t){var n={trace:0,debug:1,info:2,log:3,warn:4,error:5};s.consoleTransport=console;var r=[s.consoleTransport];s.addGlobalTransport=function(e){-1===r.indexOf(e)&&r.push(e)},s.removeGlobalTransport=function(e){var t=r.indexOf(e);-1!==t&&r.splice(t,1)};var i={};function o(){var e={methodName:"",fileLocation:"",line:null,column:null},t=new Error,n=t.stack?t.stack.split("\n"):[];if(!n||n.length<1)return e;var r=null;return n[3]&&(r=n[3].match(/\s*at\s*(.+?)\s*\((\S*)\s*:(\d*)\s*:(\d*)\)/)),!r||r.length<=4?(0===n[2].indexOf("log@")?e.methodName=n[3].substr(0,n[3].indexOf("@")):e.methodName=n[2].substr(0,n[2].indexOf("@")),e):(e.methodName=r[1],e.fileLocation=r[2],e.line=r[3],e.column=r[4],e)}function a(){var e=arguments[0],t=arguments[1],a=Array.prototype.slice.call(arguments,2);if(!(n[t]<e.level))for(var s=!(e.options.disableCallerInfo||i.disableCallerInfo)&&o(),c=r.concat(e.transports),u=0;u<c.length;u++){var d=c[u],l=d[t];if(l&&"function"==typeof l){var h=[];h.push((new Date).toISOString()),e.id&&h.push("["+e.id+"]"),s&&s.methodName.length>1&&h.push("<"+s.methodName+">: ");var p=h.concat(a);l.bind(d).apply(d,p)}}}function s(e,t,r,i){this.id=t,this.options=i||{},this.transports=r,this.transports||(this.transports=[]),this.level=n[e];for(var o=Object.keys(n),s=0;s<o.length;s++)this[o[s]]=a.bind(null,this,o[s])}s.setGlobalOptions=function(e){i=e||{}},s.prototype.setLevel=function(e){this.level=n[e]},e.exports=s,s.levels={TRACE:"trace",DEBUG:"debug",INFO:"info",LOG:"log",WARN:"warn",ERROR:"error"}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var n=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-\.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))? (\S*)(?: (\S*))?/,names:["value","direction","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+" %s"+(e.config?" %s":"")}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),(t+=null!=e["network-id"]?" network-id %d":"%v")+(null!=e["network-cost"]?" network-cost %d":"%v")}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{push:"invalid",names:["value"]}]};Object.keys(n).forEach(function(e){n[e].forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})})},function(e,t,n){"use strict";n.r(t);var r=n(160),i=function(e){this.track=e,this.recorder=null,this.data=null,this.name=null,this.startTime=null};function o(e){if(void 0===e.recorder)throw new Error("Passed an object to startRecorder which is not a TrackRecorder object");e.recorder.start(),e.startTime=new Date}function a(e){if(void 0===e.recorder)throw new Error("Passed an object to stopRecorder which is not a TrackRecorder object");e.recorder.stop()}function s(){if(MediaRecorder.isTypeSupported("audio/webm"))return"audio/webm";if(MediaRecorder.isTypeSupported("audio/ogg"))return"audio/ogg";throw new Error("unable to create a MediaRecorder with the right mimetype!")}function c(e){this.recorders=[],this.fileType=s(),this.isRecording=!1,this.jitsiConference=e}c.determineCorrectFileType=s,c.prototype.addTrack=function(e){if(e.isAudioTrack()){var t=this.instantiateTrackRecorder(e);this.recorders.push(t),this.updateNames(),this.isRecording&&o(t)}},c.prototype.instantiateTrackRecorder=function(e){var t=new i(e),n=t.track.getOriginalStream(),r=(function(){if("undefined"!=typeof MediaStream)return new MediaStream;throw new Error("cannot create a clean mediaStream")})();return n.getAudioTracks().forEach(function(e){return r.addTrack(e)}),t.recorder=new MediaRecorder(r,{mimeType:this.fileType}),t.data=[],t.recorder.ondataavailable=function(e){e.data.size>0&&t.data.push(e.data)},t},c.prototype.removeTrack=function(e){if(!e.isVideoTrack()){var t,n=this.recorders;for(t=0;t<n.length;t++)if(n[t].track.getParticipantId()===e.getParticipantId()){var r=n[t];this.isRecording?a(r):n.splice(t,1)}this.updateNames()}},c.prototype.updateNames=function(){var e=this.jitsiConference;this.recorders.forEach(function(t){if(t.track.isLocal())t.name="the transcriber";else{var n=t.track.getParticipantId(),r=e.getParticipantById(n).getDisplayName();"undefined"!==r&&(t.name=r)}})},c.prototype.start=function(){if(this.isRecording)throw new Error("audiorecorder is already recording");this.isRecording=!0,this.recorders.forEach(function(e){return o(e)}),console.log("Started the recording of the audio. There are currently "+this.recorders.length+" recorders active.")},c.prototype.stop=function(){this.isRecording=!1,this.recorders.forEach(function(e){return a(e)}),console.log("stopped recording")},c.prototype.download=function(){var e=this;this.recorders.forEach(function(t){var n=new Blob(t.data,{type:e.fileType}),r=URL.createObjectURL(n),i=document.createElement("a");document.body.appendChild(i),i.style.display="none",i.href=r,i.download="test."+e.fileType.split("/")[1],i.click(),window.URL.revokeObjectURL(r)})},c.prototype.getRecordingResults=function(){var e=this;if(this.isRecording)throw new Error("cannot get blobs because the AudioRecorder is still recording!");this.updateNames();var t=[];return this.recorders.forEach(function(n){return t.push(new r(new Blob(n.data,{type:e.fileType}),n.name,n.startTime))}),t},c.prototype.getFileType=function(){return this.fileType},t.default=c},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(83),i=n(26),o=n(5),a=n(28),s=n(7);function c(e,t,n){this.appID=e,this.token=t,this.options=n,this.xmpp=new a.c(n,t),this.addEventListener(i.CONNECTION_FAILED,function(e,t,n,r){o.a.sendAnalyticsAndLog(Object(s.B)(e,t,r))}),this.addEventListener(i.CONNECTION_DISCONNECTED,function(e){e&&o.a.sendAnalytics(s.m,{message:e}),o.a.sendLog(JSON.stringify({id:s.m,msg:e}))})}c.prototype.connect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.xmpp.connect(e.id,e.password)},c.prototype.attach=function(e){this.xmpp.attach(e)},c.prototype.disconnect=function(){var e;return(e=this.xmpp).disconnect.apply(e,arguments)},c.prototype.getJid=function(){return this.xmpp.getJid()},c.prototype.setToken=function(e){this.token=e},c.prototype.initJitsiConference=function(e,t){return new r.a({name:e,config:t,connection:this})},c.prototype.addEventListener=function(e,t){this.xmpp.addListener(e,t)},c.prototype.removeEventListener=function(e,t){this.xmpp.removeListener(e,t)},c.prototype.getConnectionTimes=function(){return this.xmpp.connectionTimes},c.prototype.addFeature=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.xmpp.caps.addFeature(e,t)},c.prototype.removeFeature=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.xmpp.caps.removeFeature(e,t)},c.prototype.getLogs=function(){var e=this.xmpp.getJingleLog(),t={};t.time=new Date,t.url=window.location.href,t.ua=navigator.userAgent;var n=this.xmpp.getXmppLog();return n&&(t.xmpp=n),e.metadata=t,e}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return re});var r=n(19),i=n.n(r),o=n(4),a=n(45),s=n.n(a),c=n(2),u=n(16),d=n(84),l=n(1),h=n(91),p=n(18),f=n(14),m=n(15),v=n(92),g=n(12),_=n(3),y=n(120),S=n(121),E=n(48),b=n(22),C=n(122),T=n(123),R=n(75),A=n(124),k=n(125),I=n(52),w=n(126),P=n(127),O=n(128),D=n(129),N=n(31),M=n(130),L=n(131),x=n(132),F=n(5),j=n(133),H=n(11),U=n.n(H),J=n(27),B=n(37),G=n.n(B),V=n(134),q=n(135),K=n(24),W=n(28),z=n(8),Q=n(13),X=n.n(Q),Y=n(7),Z=n(0);function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){te(e,t,n[t])})}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne=Object(o.getLogger)(e);function re(e){if(!e.name||e.name.toLowerCase()!==e.name){var t="Invalid conference name (no conference name passed or it contains invalid characters like capital letters)!";throw ne.error(t),new Error(t)}this.eventEmitter=new i.a,this.options=e,this.eventManager=new d.a(this),this.participants={},this._init(e),this.componentsVersions=new V.a(this),this.jvbJingleSession=null,this.lastDominantSpeaker=null,this.dtmfManager=null,this.somebodySupportsDTMF=!1,this.authEnabled=!1,this.startAudioMuted=!1,this.startVideoMuted=!1,this.startMutedPolicy={audio:!1,video:!1},this.isMutedByFocus=!1,this.mutedByFocusActor=null,this.wasStopped=!1,this.properties={},this.connectionQuality=new y.a(this,this.eventEmitter,e),this.avgRtpStatsReporter=new L.a(this,e.config.avgRtpStatsN||15),this._audioOutputProblemDetector=new M.a(this),this.isJvbConnectionInterrupted=!1,this.speakerStatsCollector=new x.a(this),this.deferredStartP2PTask=null;var n=parseInt(e.config.p2p&&e.config.p2p.backToP2PDelay,10);this.backToP2PDelay=isNaN(n)?5:n,ne.info("backToP2PDelay: "+this.backToP2PDelay),this.isP2PConnectionInterrupted=!1,this.p2p=!1,this.p2pJingleSession=null,this.videoSIPGWHandler=new q.a(this.room),this.recordingManager=new D.a(this.room),this._conferenceJoinAnalyticsEventSent=void 0,this.isE2EESupported()&&(ne.info("End-to-End Encryprtion is supported"),this._e2eEncryption=new I.a(this))}re.prototype.constructor=re,re.resourceCreator=function(e,t){var n;return t?n=G.a.randomHexString(8).toLowerCase():(n=c.Strophe.getNodeFromJid(e).substr(0,8).toLowerCase(),/[0-9a-f]{8}/g.test(n)||(n=G.a.randomHexString(8).toLowerCase())),n},re.prototype._init=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.connection&&(this.connection=t.connection,this.xmpp=this.connection.xmpp,this.eventManager.setupXMPPListeners());var n=this.options.config;this._statsCurrentId=n.statisticsId?n.statisticsId:N.a.callStatsUserName,this.room=this.xmpp.createRoom(this.options.name,ee({},n,{statsId:this._statsCurrentId}),re.resourceCreator),this._onIceConnectionInterrupted=this._onIceConnectionInterrupted.bind(this),this.room.addListener(Z.CONNECTION_INTERRUPTED,this._onIceConnectionInterrupted),this._onIceConnectionRestored=this._onIceConnectionRestored.bind(this),this.room.addListener(Z.CONNECTION_RESTORED,this._onIceConnectionRestored),this._onIceConnectionEstablished=this._onIceConnectionEstablished.bind(this),this.room.addListener(Z.CONNECTION_ESTABLISHED,this._onIceConnectionEstablished),this._updateProperties=this._updateProperties.bind(this),this.room.addListener(Z.CONFERENCE_PROPERTIES_CHANGED,this._updateProperties),this._sendConferenceJoinAnalyticsEvent=this._sendConferenceJoinAnalyticsEvent.bind(this),this.room.addListener(Z.MEETING_ID_SET,this._sendConferenceJoinAnalyticsEvent),this.e2eping=new w.a(this,n,function(t,n){try{e.sendMessage(t,n,!0)}catch(t){ne.warn("Failed to send E2E ping request or response.",t&&t.msg)}}),this.rtc||(this.rtc=new g.a(this,t),this.eventManager.setupRTCListeners()),this.qualityController=new O.a(this),this.participantConnectionStatus=new E.b(this.rtc,this,{rtcMuteTimeout:n._peerConnStatusRtcMuteTimeout,outOfLastNTimeout:n._peerConnStatusOutOfLastNTimeout}),this.participantConnectionStatus.init();var r=!0;if(n.testing&&n.testing.callStatsThreshold&&(r=Object(J.d)(this.options.name)%100<n.testing.callStatsThreshold),this.statistics||(this.statistics=new F.a(this.xmpp,{aliasName:this._statsCurrentId,userName:n.statisticsDisplayName?n.statisticsDisplayName:this.myUserId(),confID:n.confID||this.connection.options.hosts.domain+"/"+this.options.name,siteID:n.siteID,customScriptUrl:n.callStatsCustomScriptUrl,callStatsID:n.callStatsID,callStatsSecret:n.callStatsSecret,callStatsApplicationLogsDisabled:n.callStatsApplicationLogsDisabled,enableCallStats:r,roomName:this.options.name,applicationName:n.applicationName,getWiFiStatsMethod:n.getWiFiStatsMethod}),F.a.analytics.addPermanentProperties({callstats_name:this._statsCurrentId}),n.longTasksStatsInterval&&this.statistics.attachLongTasksStats(this)),this.eventManager.setupChatRoomListeners(),this.eventManager.setupStatisticsListeners(),n.enableTalkWhileMuted&&!_.a.isSafari())if(n.createVADProcessor){ne.info("Using VAD detection for generating talk while muted events"),this._audioAnalyser||(this._audioAnalyser=new R.a(this,n.createVADProcessor));var i=new k.a;i.on(b.VAD_TALK_WHILE_MUTED,function(){return e.eventEmitter.emit(l.TALK_WHILE_MUTED)}),this._audioAnalyser.addVADDetectionService(i)}else ne.warn("No VAD Processor was provided. Talk while muted detection service was not initialized!");if(n.enableNoisyMicDetection&&!_.a.isSafari())if(n.createVADProcessor){this._audioAnalyser||(this._audioAnalyser=new R.a(this,n.createVADProcessor));var o=new A.a;o.on(b.VAD_NOISY_DEVICE,function(){return e.eventEmitter.emit(l.NOISY_MIC)}),this._audioAnalyser.addVADDetectionService(o)}else ne.warn("No VAD Processor was provided. Noisy microphone detection service was not initialized!");n.enableNoAudioDetection&&(this._noAudioSignalDetection=new C.a(this),this._noAudioSignalDetection.on(b.NO_AUDIO_INPUT,function(){e.eventEmitter.emit(l.NO_AUDIO_INPUT)}),this._noAudioSignalDetection.on(b.AUDIO_INPUT_STATE_CHANGE,function(t){e.eventEmitter.emit(l.AUDIO_INPUT_STATE_CHANGE,t)})),"channelLastN"in n&&this.setLastN(n.channelLastN),this.jvb121Status=new P.a(this),this.p2pDominantSpeakerDetection=new T.a(this),n&&n.deploymentInfo&&n.deploymentInfo.userRegion&&this.setLocalParticipantProperty("region",n.deploymentInfo.userRegion)},re.prototype.join=function(e){var t=this;this.room&&this.room.join(e).then(function(){return t._maybeSetSITimeout()})},re.prototype.authenticateAndUpgradeRole=function(e){return v.a.call(this,ee({},e,{onCreateResource:re.resourceCreator}))},re.prototype.isJoined=function(){return this.room&&this.room.joined},re.prototype.isP2PEnabled=function(){return Boolean(this.options.config.p2p&&this.options.config.p2p.enabled)||void 0===this.options.config.p2p},re.prototype.isP2PTestModeEnabled=function(){return Boolean(this.options.config.testing&&this.options.config.testing.p2pTestMode)},re.prototype.leave=function(){var e=this;if(this.participantConnectionStatus&&(this.participantConnectionStatus.dispose(),this.participantConnectionStatus=null),this.avgRtpStatsReporter&&(this.avgRtpStatsReporter.dispose(),this.avgRtpStatsReporter=null),this._audioOutputProblemDetector&&(this._audioOutputProblemDetector.dispose(),this._audioOutputProblemDetector=null),this.e2eping&&(this.e2eping.stop(),this.e2eping=null),this.getLocalTracks().forEach(function(t){return e.onLocalTrackRemoved(t)}),this.rtc.closeBridgeChannel(),this._sendConferenceLeftAnalyticsEvent(),this.statistics&&this.statistics.dispose(),this._delayedIceFailed&&this._delayedIceFailed.cancel(),this.jvbJingleSession&&(this.jvbJingleSession.close(),this.jvbJingleSession=null),this.p2pJingleSession&&(this.p2pJingleSession.close(),this.p2pJingleSession=null),this.room){var t=this.room;return t.removeListener(Z.CONNECTION_INTERRUPTED,this._onIceConnectionInterrupted),t.removeListener(Z.CONNECTION_RESTORED,this._onIceConnectionRestored),t.removeListener(Z.CONNECTION_ESTABLISHED,this._onIceConnectionEstablished),t.removeListener(Z.CONFERENCE_PROPERTIES_CHANGED,this._updateProperties),t.removeListener(Z.MEETING_ID_SET,this._sendConferenceJoinAnalyticsEvent),this.eventManager.removeXMPPListeners(),this.room=null,t.leave().then(function(){e.rtc&&e.rtc.destroy()}).catch(function(t){throw e.getParticipants().forEach(function(t){return e.onMemberLeft(t.getJid())}),t})}return Promise.reject(new Error("The conference is has been already left"))},re.prototype._getActiveMediaSession=function(){return this.isP2PActive()?this.p2pJingleSession:this.jvbJingleSession},re.prototype._getMediaSessions=function(){var e=[];return this.jvbJingleSession&&e.push(this.jvbJingleSession),this.p2pJingleSession&&e.push(this.p2pJingleSession),e},re.prototype.getName=function(){return this.options.name},re.prototype.getConnection=function(){return this.connection},re.prototype.isAuthEnabled=function(){return this.authEnabled},re.prototype.isLoggedIn=function(){return Boolean(this.authIdentity)},re.prototype.getAuthLogin=function(){return this.authIdentity},re.prototype.isExternalAuthEnabled=function(){return this.room&&this.room.moderator.isExternalAuthEnabled()},re.prototype.getExternalAuthUrl=function(e){var t=this;return new Promise(function(n,r){t.isExternalAuthEnabled()?e?t.room.moderator.getPopupLoginUrl(n,r):t.room.moderator.getLoginUrl(n,r):r()})},re.prototype.getLocalTracks=function(e){var t=[];return this.rtc&&(t=this.rtc.getLocalTracks(e)),t},re.prototype.getLocalAudioTrack=function(){return this.rtc?this.rtc.getLocalAudioTrack():null},re.prototype.getLocalVideoTrack=function(){return this.rtc?this.rtc.getLocalVideoTrack():null},re.prototype.getPerformanceStats=function(){return{longTasksStats:this.statistics.getLongTasksStats()}},re.prototype.on=function(e,t){this.eventEmitter&&this.eventEmitter.on(e,t)},re.prototype.off=function(e,t){this.eventEmitter&&this.eventEmitter.removeListener(e,t)},re.prototype.addEventListener=re.prototype.on,re.prototype.removeEventListener=re.prototype.off,re.prototype.addCommandListener=function(e,t){this.room&&this.room.addPresenceListener(e,t)},re.prototype.removeCommandListener=function(e,t){this.room&&this.room.removePresenceListener(e,t)},re.prototype.sendTextMessage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body";if(this.room){var n=(this.room.getFromPresence("nick")||{}).value;this.room.sendMessage(e,t,n)}},re.prototype.sendPrivateTextMessage=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"body";this.room&&this.room.sendPrivateMessage(e,t,n)},re.prototype.sendCommand=function(e,t){this.room?(this.room.addToPresence(e,t),this.room.sendPresence()):ne.warn("Not sending a command, room not initialized.")},re.prototype.sendCommandOnce=function(e,t){this.sendCommand(e,t),this.removeCommand(e)},re.prototype.removeCommand=function(e){this.room&&this.room.removeFromPresence(e)},re.prototype.setDisplayName=function(e){this.room&&(this.room.addToPresence("nick",{attributes:{xmlns:"http://jabber.org/protocol/nick"},value:e}),this.room.sendPresence())},re.prototype.setSubject=function(e){this.room&&this.isModerator()&&this.room.setSubject(e)},re.prototype.getTranscriber=function(){if(void 0===this.transcriber){this.transcriber=new j.a;for(var e,t=_createForOfIteratorHelperLoose(this.getLocalTracks(z.a));!(e=t()).done;){var n=e.value;this.transcriber.addTrack(n)}for(var r,i=_createForOfIteratorHelperLoose(this.rtc.getRemoteTracks(z.a));!(r=i()).done;){var o=r.value;this.transcriber.addTrack(o)}}return this.transcriber},re.prototype.getTranscriptionStatus=function(){return this.room.transcriptionStatus},re.prototype.addTrack=function(e){if(e.isVideoTrack()){var t=this.rtc.getLocalVideoTrack();if(t)return e===t?Promise.resolve(e):Promise.reject(new Error("cannot add second video track to the conference"))}return this.replaceTrack(null,e)},re.prototype._fireAudioLevelChangeEvent=function(e,t){var n=this.getActivePeerConnection();t&&n!==t||this.eventEmitter.emit(l.TRACK_AUDIO_LEVEL_CHANGED,this.myUserId(),e)},re.prototype._fireMuteChangeEvent=function(e){var t;if(this.isMutedByFocus&&e.isAudioTrack()&&!e.isMuted()&&(this.isMutedByFocus=!1,this.room.muteParticipant(this.room.myroomjid,!1)),this.mutedByFocusActor){var n=c.Strophe.getResourceFromJid(this.mutedByFocusActor);t=this.participants[n]}this.eventEmitter.emit(l.TRACK_MUTE_CHANGED,e,t)},re.prototype.onLocalTrackRemoved=function(e){e._setConference(null),this.rtc.removeLocalTrack(e),e.removeEventListener(m.TRACK_MUTE_CHANGED,e.muteHandler),e.removeEventListener(m.TRACK_AUDIO_LEVEL_CHANGED,e.audioLevelHandler),e.isVideoTrack()&&e.videoType===X.a.DESKTOP&&this.statistics.sendScreenSharingEvent(!1),this.eventEmitter.emit(l.TRACK_REMOVED,e)},re.prototype.removeTrack=function(e){return this.replaceTrack(e,null)},re.prototype.replaceTrack=function(e,t){var n=this;return e&&e.disposed||t&&t.disposed?Promise.reject(new p.a(f.TRACK_IS_DISPOSED)):this._doReplaceTrack(e,t).then(function(){return e&&n.onLocalTrackRemoved(e),t&&n._setupNewTrack(t),Promise.resolve()},function(e){return Promise.reject(new Error(e))})},re.prototype._doReplaceTrack=function(e,t){var n=[];return this.jvbJingleSession?n.push(this.jvbJingleSession.replaceTrack(e,t)):ne.info("_doReplaceTrack - no JVB JingleSession"),this.p2pJingleSession?n.push(this.p2pJingleSession.replaceTrack(e,t)):ne.info("_doReplaceTrack - no P2P JingleSession"),Promise.all(n)},re.prototype._setupNewTrack=function(e){if(e.isAudioTrack()||e.isVideoTrack()&&e.videoType!==X.a.DESKTOP){var t=g.a.getCurrentlyAvailableMediaDevices().find(function(t){return t.kind===e.getTrack().kind+"input"&&t.label===e.getTrack().label});t&&F.a.sendActiveDeviceListEvent(g.a.getEventDataForActiveDevice(t))}e.isVideoTrack()&&(this.removeCommand("videoType"),this.sendCommand("videoType",{value:e.videoType,attributes:{xmlns:"http://jitsi.org/jitmeet/video"}})),this.rtc.addLocalTrack(e),e.isAudioTrack()?this.room.setAudioMute(e.isMuted()):this.room.setVideoMute(e.isMuted()),e.muteHandler=this._fireMuteChangeEvent.bind(this,e),e.audioLevelHandler=this._fireAudioLevelChangeEvent.bind(this),e.addEventListener(m.TRACK_MUTE_CHANGED,e.muteHandler),e.addEventListener(m.TRACK_AUDIO_LEVEL_CHANGED,e.audioLevelHandler),e._setConference(this),this.eventEmitter.emit(l.TRACK_ADDED,e)},re.prototype._addLocalTrackAsUnmute=function(e){var t=[];return this.jvbJingleSession?t.push(this.jvbJingleSession.addTrackAsUnmute(e)):ne.info("Add local MediaStream as unmute - no JVB Jingle session started yet"),this.p2pJingleSession?t.push(this.p2pJingleSession.addTrackAsUnmute(e)):ne.info("Add local MediaStream as unmute - no P2P Jingle session started yet"),Promise.all(t)},re.prototype._removeLocalTrackAsMute=function(e){var t=[];return this.jvbJingleSession?t.push(this.jvbJingleSession.removeTrackAsMute(e)):ne.info("Remove local MediaStream - no JVB JingleSession started yet"),this.p2pJingleSession?t.push(this.p2pJingleSession.removeTrackAsMute(e)):ne.info("Remove local MediaStream - no P2P JingleSession started yet"),Promise.all(t)},re.prototype.getRole=function(){return this.room.role},re.prototype.isHidden=function(){return this.connection?c.Strophe.getDomainFromJid(this.connection.getJid())===this.options.config.hiddenDomain:null},re.prototype.isModerator=function(){return this.room?this.room.isModerator():null},re.prototype.lock=function(e){var t=this;return this.isModerator()?new Promise(function(n,r){t.room.lockRoom(e||"",function(){return n()},function(e){return r(e)},function(){return r(u.PASSWORD_NOT_SUPPORTED)})}):Promise.reject(new Error("You are not moderator."))},re.prototype.unlock=function(){return this.lock()},re.prototype.selectParticipant=function(e){this.selectParticipants([e])},re.prototype.selectParticipants=function(e){if(!Array.isArray(e))throw new Error("Invalid argument; participantIds must be an array.");this.rtc.selectEndpoints(e)},re.prototype.pinParticipant=function(e){this.rtc.pinEndpoint(e)},re.prototype.getLastN=function(){return this.rtc.getLastN()},re.prototype.setLastN=function(e){if(!Number.isInteger(e)&&!Number.parseInt(e,10))throw new Error("Invalid value for lastN: "+e);var t=Number(e);if(t<-1)throw new RangeError("lastN cannot be smaller than -1");if(this.rtc.setLastN(t),this.p2pJingleSession){var n=0!==t;this.p2pJingleSession.setMediaTransferActive(!0,n).catch(function(e){ne.error("Failed to adjust video transfer status ("+n+")",e)})}},re.prototype.isInLastN=function(e){return this.rtc.isInLastN(e)},re.prototype.getParticipants=function(){return Object.values(this.participants)},re.prototype.getParticipantCount=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getParticipants();return e||(t=t.filter(function(e){return!e.isHidden()})),t.length+1},re.prototype.getParticipantById=function(e){return this.participants[e]},re.prototype.grantOwner=function(e){var t=this.getParticipantById(e);t&&this.room.setAffiliation(t.getJid(),"owner")},re.prototype.kickParticipant=function(e){var t=this.getParticipantById(e);t&&this.room.kick(t.getJid())},re.prototype._maybeClearSITimeout=function(){this._sessionInitiateTimeout&&(this.jvbJingleSession||this.getParticipantCount()<2)&&(window.clearTimeout(this._sessionInitiateTimeout),this._sessionInitiateTimeout=null)},re.prototype._maybeSetSITimeout=function(){var e=this;!this.jvbJingleSession&&this.getParticipantCount()>=2&&!this._sessionInitiateTimeout&&(this._sessionInitiateTimeout=window.setTimeout(function(){e._sessionInitiateTimeout=null,F.a.sendAnalytics(Object(Y.G)(Y.d,{p2p:!1,value:5e3}))},5e3))},re.prototype.muteParticipant=function(e){var t=this.getParticipantById(e);t&&this.room.muteParticipant(t.getJid(),!0)},re.prototype.onMemberJoined=function(e,t,n,r,i,o,a,s){var u=c.Strophe.getResourceFromJid(e);if("focus"!==u&&this.myUserId()!==u){var d=new h.a(e,this,t,r,i,o,a);d._role=n,d._botType=s,this.participants[u]=d,this.eventEmitter.emit(l.USER_JOINED,u,d),this._updateFeatures(d),this._maybeStartOrStopP2P(),this._maybeSetSITimeout()}},re.prototype._updateFeatures=function(e){var t=this;e.getFeatures().then(function(n){e._supportsDTMF=n.has("urn:xmpp:jingle:dtmf:0"),t.updateDTMFSupport(),n.has("http://jitsi.org/protocol/jigasi")&&e.setProperty("features_jigasi",!0),n.has("https://jitsi.org/meet/e2ee")&&e.setProperty("features_e2ee",!0)}).catch(function(){return!1})},re.prototype._onMemberBotTypeChanged=function(e,t){var n=this.getParticipants().find(function(t){return t.getJid()===e});if(n){n._botType=t;var r=c.Strophe.getResourceFromJid(e);this.eventEmitter.emit(l.BOT_TYPE_CHANGED,r,t)}n._botType||this._maybeStartOrStopP2P()},re.prototype.onMemberLeft=function(e){var t=this,n=c.Strophe.getResourceFromJid(e);if("focus"!==n&&this.myUserId()!==n){var r=this.participants[n];delete this.participants[n],this.rtc.removeRemoteTracks(n).forEach(function(e){return t.eventEmitter.emit(l.TRACK_REMOVED,e)}),r&&this.eventEmitter.emit(l.USER_LEFT,n,r),this._maybeStartOrStopP2P(!0),this._maybeClearSITimeout()}},re.prototype.onMemberKicked=function(e,t,n){if(t!==this.myUserId()){var r=this.participants[t];if(e)return this.eventEmitter.emit(l.KICKED,r),void this.leave();var i=this.participants[n];this.eventEmitter.emit(l.PARTICIPANT_KICKED,r,i)}},re.prototype.onLocalRoleChanged=function(e){this.eventEmitter.emit(l.USER_ROLE_CHANGED,this.myUserId(),e)},re.prototype.onUserRoleChanged=function(e,t){var n=c.Strophe.getResourceFromJid(e),r=this.getParticipantById(n);r&&(r._role=t,this.eventEmitter.emit(l.USER_ROLE_CHANGED,n,t))},re.prototype.onDisplayNameChanged=function(e,t){var n=c.Strophe.getResourceFromJid(e),r=this.getParticipantById(n);r&&r._displayName!==t&&(r._displayName=t,this.eventEmitter.emit(l.DISPLAY_NAME_CHANGED,n,t))},re.prototype.onRemoteTrackAdded=function(e){var t=this;if(!e.isP2P||this.isP2PActive())if(e.isP2P||!this.isP2PActive()){var n=e.getParticipantId(),r=this.getParticipantById(n);if(r){r._tracks.push(e),this.transcriber&&this.transcriber.addTrack(e);var i=this.eventEmitter;e.addEventListener(m.TRACK_MUTE_CHANGED,function(){return i.emit(l.TRACK_MUTE_CHANGED,e)}),e.addEventListener(m.TRACK_AUDIO_LEVEL_CHANGED,function(e,r){t.getActivePeerConnection()===r&&i.emit(l.TRACK_AUDIO_LEVEL_CHANGED,n,e)}),i.emit(l.TRACK_ADDED,e)}else ne.error("No participant found for id: "+n)}else ne.info("Trying to add remote JVB track, when in P2P - IGNORED");else ne.info("Trying to add remote P2P track, when not in P2P - IGNORED")},re.prototype.onCallAccepted=function(e,t){this.p2pJingleSession===e&&(ne.info("P2P setAnswer"),this.p2pJingleSession.setAnswer(t),this.eventEmitter.emit(l._MEDIA_SESSION_STARTED,this.p2pJingleSession))},re.prototype.onTransportInfo=function(e,t){this.p2pJingleSession===e&&(ne.info("P2P addIceCandidates"),this.p2pJingleSession.addIceCandidates(t))},re.prototype.onRemoteTrackRemoved=function(e){var t=this;this.getParticipants().forEach(function(n){for(var r=n.getTracks(),i=0;i<r.length;i++)if(r[i]===e){n._tracks.splice(i,1),t.eventEmitter.emit(l.TRACK_REMOVED,e),t.transcriber&&t.transcriber.removeTrack(e);break}},this)},re.prototype._onIncomingCallP2P=function(e,t){var n;_.a.supportsP2P()?this.isP2PEnabled()||this.isP2PTestModeEnabled()?this.p2pJingleSession?n={reason:"busy",reasonDescription:"P2P already in progress",errorMsg:'Duplicated P2P "session-initiate"'}:this._shouldBeInP2PMode()||(n={reason:"decline",reasonDescription:"P2P requirements not met",errorMsg:'Received P2P "session-initiate" when should not be in P2P mode'},F.a.sendAnalytics(Object(Y.G)(Y.h))):n={reason:"decline",reasonDescription:"P2P disabled",errorMsg:"P2P mode disabled in the configuration"}:n={reason:"unsupported-applications",reasonDescription:"P2P not supported",errorMsg:"This client does not support P2P connections"},n?this._rejectIncomingCall(e,n):this._acceptP2PIncomingCall(e,t)},re.prototype.onIncomingCall=function(e,t,n){if(e.isP2P)this._onIncomingCallP2P(e,t);else{if(!this.room.isFocus(e.remoteJid)){var r="Rejecting session-initiate from non-focus.";return void this._rejectIncomingCall(e,{reason:"security-error",reasonDescription:r,errorMsg:r})}this._acceptJvbIncomingCall(e,t,n)}},re.prototype._acceptJvbIncomingCall=function(e,t,n){var r=this;this.jvbJingleSession=e,this.room.connectionTimes["session.initiate"]=n,this._sendConferenceJoinAnalyticsEvent(),this.wasStopped&&F.a.sendAnalyticsAndLog(Object(Y.G)(Y.a,{p2p:!1}));var i=$(t).find('>bridge-session[xmlns="http://jitsi.org/protocol/focus"]').attr("region");this.eventEmitter.emit(l.SERVER_REGION_CHANGED,i),this._maybeClearSITimeout(),F.a.sendAnalytics(Object(Y.G)(Y.c,{p2p:!1,value:n}));try{e.initialize(this.room,this.rtc,ee({},this.options.config,{enableInsertableStreams:this._isE2EEEnabled()}))}catch(e){U.a.callErrorHandler(e)}this._setBridgeChannel(t,e.peerconnection);var o=this.getLocalTracks();try{e.acceptOffer(t,function(){r.isP2PActive()&&r.jvbJingleSession&&r._suspendMediaTransferForJvbConnection(),r.eventEmitter.emit(l._MEDIA_SESSION_STARTED,e),r.isP2PActive()||r.eventEmitter.emit(l._MEDIA_SESSION_ACTIVE_CHANGED,e)},function(e){U.a.callErrorHandler(e),ne.error("Failed to accept incoming Jingle session",e)},o),ne.info("Starting CallStats for JVB connection..."),this.statistics.startCallStats(this.jvbJingleSession.peerconnection,"jitsi"),this.statistics.startRemoteStats(this.jvbJingleSession.peerconnection)}catch(e){U.a.callErrorHandler(e),ne.error(e)}},re.prototype._setBridgeChannel=function(e,t){var n,r=null,i=$(e).find(">content>transport>web-socket").first();switch(1===i.length&&(r=i[0].getAttribute("url")),this.options.config.openBridgeChannel){case"datachannel":case!0:case void 0:n="datachannel";break;case"websocket":n="websocket"}"datachannel"===n?this.rtc.initializeBridgeChannel(t,null):"websocket"===n&&r&&this.rtc.initializeBridgeChannel(null,r)},re.prototype._rejectIncomingCall=function(e,t){t&&t.errorMsg&&U.a.callErrorHandler(new Error(t.errorMsg)),e.terminate(null,function(e){ne.warn("An error occurred while trying to terminate invalid Jingle session",e)},{reason:t&&t.reason,reasonDescription:t&&t.reasonDescription,sendSessionTerminate:!0})},re.prototype.onCallEnded=function(e,t,n){ne.info("Call ended: "+t+" - "+n+" P2P ?"+e.isP2P),e===this.jvbJingleSession?(this.wasStopped=!0,F.a.sendAnalytics(Object(Y.G)(Y.e,{p2p:!1})),this.statistics&&(this.statistics.stopRemoteStats(this.jvbJingleSession.peerconnection),ne.info("Stopping JVB CallStats"),this.statistics.stopCallStats(this.jvbJingleSession.peerconnection)),this.jvbJingleSession=null,this.rtc.onCallEnded()):e===this.p2pJingleSession?("decline"===t&&"force JVB121"===n?(ne.info("In forced JVB 121 mode..."),F.a.analytics.addPermanentProperties({forceJvb121:!0})):"connectivity-error"===t&&"ICE FAILED"===n&&F.a.analytics.addPermanentProperties({p2pFailed:!0}),this._stopP2PSession()):ne.error("Received onCallEnded for invalid session",e.sid,e.remoteJid,t,n)},re.prototype.onSuspendDetected=function(e){e.isP2P||(this.leave(),this.eventEmitter.emit(l.SUSPEND_DETECTED))},re.prototype.updateDTMFSupport=function(){for(var e=!1,t=this.getParticipants(),n=0;n<t.length;n+=1)if(t[n].supportsDTMF()){e=!0;break}e!==this.somebodySupportsDTMF&&(this.somebodySupportsDTMF=e,this.eventEmitter.emit(l.DTMF_SUPPORT_CHANGED,e))},re.prototype.isDTMFSupported=function(){return this.somebodySupportsDTMF},re.prototype.myUserId=function(){return this.room&&this.room.myroomjid?c.Strophe.getResourceFromJid(this.room.myroomjid):null},re.prototype.sendTones=function(e,t,n){var r=this.getActivePeerConnection();r?r.sendTones(e,t,n):ne.warn("cannot sendTones: no peer connection")},re.prototype.startRecording=function(e){return this.room?this.recordingManager.startRecording(e):Promise.reject(new Error("The conference is not created yet!"))},re.prototype.stopRecording=function(e){return this.room?this.recordingManager.stopRecording(e):Promise.reject(new Error("The conference is not created yet!"))},re.prototype.isSIPCallingSupported=function(){return!!this.room&&this.room.isSIPCallingSupported()},re.prototype.dial=function(e){return this.room?this.room.dial(e):new Promise(function(e,t){t(new Error("The conference is not created yet!"))})},re.prototype.hangup=function(){return this.room?this.room.hangup():new Promise(function(e,t){t(new Error("The conference is not created yet!"))})},re.prototype.startTranscriber=function(){return this.dial("jitsi_meet_transcribe")},re.prototype.stopTranscriber=re.prototype.hangup,re.prototype.getPhoneNumber=function(){return this.room?this.room.getPhoneNumber():null},re.prototype.getPhonePin=function(){return this.room?this.room.getPhonePin():null},re.prototype.getMeetingUniqueId=function(){if(this.room)return this.room.getMeetingId()},re.prototype.getActivePeerConnection=function(){return this.isP2PActive()?this.p2pJingleSession.peerconnection:this.jvbJingleSession?this.jvbJingleSession.peerconnection:null},re.prototype.getConnectionState=function(){var e=this.getActivePeerConnection();return e?e.getConnectionState():null},re.prototype.setStartMutedPolicy=function(e){this.isModerator()&&(this.startMutedPolicy=e,this.room.addToPresence("startmuted",{attributes:{audio:e.audio,video:e.video,xmlns:"http://jitsi.org/jitmeet/start-muted"}}),this.room.sendPresence())},re.prototype.getStartMutedPolicy=function(){return this.startMutedPolicy},re.prototype.isStartAudioMuted=function(){return this.startAudioMuted},re.prototype.isStartVideoMuted=function(){return this.startVideoMuted},re.prototype.getConnectionTimes=function(){return this.room.connectionTimes},re.prototype.setLocalParticipantProperty=function(e,t){this.sendCommand("jitsi_participant_"+e,{value:t})},re.prototype.removeLocalParticipantProperty=function(e){this.removeCommand("jitsi_participant_"+e),this.room.sendPresence()},re.prototype.getLocalParticipantProperty=function(e){var t=this.room.presMap.nodes.find(function(t){return t.tagName==="jitsi_participant_"+e});return t?t.value:void 0},re.prototype.sendFeedback=function(e,t){return this.statistics.sendFeedback(e,t)},re.prototype.isCallstatsEnabled=function(){return this.statistics.isCallstatsEnabled()},re.prototype._onTrackAttach=function(e,t){var n=e.isLocal(),r=null,i=e.isP2P,o=i?e.getParticipantId():"jitsi",a=i?this.p2pJingleSession&&this.p2pJingleSession.peerconnection:this.jvbJingleSession&&this.jvbJingleSession.peerconnection;n?a&&(r=a.getLocalSSRC(e)):r=e.getSSRC(),t.id&&r&&a&&this.statistics.associateStreamWithVideoTag(a,r,n,o,e.getUsageLabel(),t.id)},re.prototype.sendApplicationLog=function(e){F.a.sendLog(e)},re.prototype._isFocus=function(e){return this.room?this.room.isFocus(e):null},re.prototype._fireIncompatibleVersionsEvent=function(){this.eventEmitter.emit(l.CONFERENCE_FAILED,u.INCOMPATIBLE_SERVER_VERSIONS)},re.prototype.sendEndpointMessage=function(e,t){this.rtc.sendChannelMessage(e,t)},re.prototype.broadcastEndpointMessage=function(e){this.sendEndpointMessage("",e)},re.prototype.sendMessage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=typeof e;if("object"===r||!n&&"string"===r)if(n)this.sendEndpointMessage(t,e);else{var i=e,o="body";if("object"===r){o="json-message",i.hasOwnProperty(W.b)||(i[W.b]="");try{i=JSON.stringify(i)}catch(e){return void ne.error("Can not send a message, stringify failed: ",e)}}t?this.sendPrivateTextMessage(t,i,o):this.sendTextMessage(i,o)}else ne.error("Can not send a message of type "+r)},re.prototype.isConnectionInterrupted=function(){return this.isP2PActive()?this.isP2PConnectionInterrupted:this.isJvbConnectionInterrupted},re.prototype._onIceConnectionInterrupted=function(e){e.isP2P?this.isP2PConnectionInterrupted=!0:this.isJvbConnectionInterrupted=!0,e.isP2P===this.isP2PActive()&&this.eventEmitter.emit(l.CONNECTION_INTERRUPTED)},re.prototype._onIceConnectionFailed=function(e){e.isP2P?(F.a.analytics.addPermanentProperties({p2pFailed:!0}),this.p2pJingleSession&&F.a.sendAnalyticsAndLog(Object(Y.I)(Y.j,{initiator:this.p2pJingleSession.isInitiator})),this._stopP2PSession("connectivity-error","ICE FAILED")):e&&this.jvbJingleSession===e&&(this._delayedIceFailed=new S.a(this),this._delayedIceFailed.start(e))},re.prototype._onIceConnectionRestored=function(e){e.isP2P?this.isP2PConnectionInterrupted=!1:(this.isJvbConnectionInterrupted=!1,this._delayedIceFailed&&this._delayedIceFailed.cancel()),e.isP2P===this.isP2PActive()&&this.eventEmitter.emit(l.CONNECTION_RESTORED)},re.prototype._acceptP2PIncomingCall=function(e,t){var n=this;this.isP2PConnectionInterrupted=!1,this.p2pJingleSession=e,this._sendConferenceJoinAnalyticsEvent(),this.p2pJingleSession.initialize(this.room,this.rtc,ee({},this.options.config,{enableInsertableStreams:this._isE2EEEnabled()})),ne.info("Starting CallStats for P2P connection...");var r=c.Strophe.getResourceFromJid(this.p2pJingleSession.remoteJid),i=this.participants[r];i&&(r=i.getStatsID()||r),this.statistics.startCallStats(this.p2pJingleSession.peerconnection,r);var o=this.getLocalTracks();this.p2pJingleSession.acceptOffer(t,function(){ne.debug('Got RESULT for P2P "session-accept"'),n.eventEmitter.emit(l._MEDIA_SESSION_STARTED,n.p2pJingleSession)},function(e){ne.error("Failed to accept incoming P2P Jingle session",e)},o)},re.prototype._addRemoteJVBTracks=function(){this._addRemoteTracks("JVB",this.jvbJingleSession.peerconnection.getRemoteTracks())},re.prototype._addRemoteP2PTracks=function(){this._addRemoteTracks("P2P",this.p2pJingleSession.peerconnection.getRemoteTracks())},re.prototype._addRemoteTracks=function(e,t){for(var n,r=_createForOfIteratorHelperLoose(t);!(n=r()).done;){var i=n.value;ne.info("Adding remote "+e+" track: "+i),this.onRemoteTrackAdded(i)}},re.prototype._onIceConnectionEstablished=function(e){null!==this.p2pJingleSession&&(this.p2pEstablishmentDuration=this.p2pJingleSession.establishmentDuration),null!==this.jvbJingleSession&&(this.jvbEstablishmentDuration=this.jvbJingleSession.establishmentDuration);var t=!1,n=this.options.config.forceJVB121Ratio;if(e.isP2P?this.p2pJingleSession!==e?(ne.error("CONNECTION_ESTABLISHED - wrong P2P session instance ?!"),t=!0):!e.isInitiator&&"number"==typeof n&&Math.random()<n&&(ne.info("Forcing JVB 121 mode (ratio="+n+")..."),F.a.analytics.addPermanentProperties({forceJvb121:!0}),this._stopP2PSession("decline","force JVB121"),t=!0):t=!0,!isNaN(this.p2pEstablishmentDuration)&&!isNaN(this.jvbEstablishmentDuration)){var r=this.p2pEstablishmentDuration-this.jvbEstablishmentDuration;F.a.sendAnalytics(Y.p,{value:r})}e.isP2P===this.isP2PActive()&&this.eventEmitter.emit(l.CONNECTION_ESTABLISHED),t||(this._setP2PStatus(!0),this.jvbJingleSession?this._removeRemoteJVBTracks():ne.info("Not removing remote JVB tracks - no session yet"),this._addRemoteP2PTracks(),this.jvbJingleSession&&this._suspendMediaTransferForJvbConnection(),ne.info("Starting remote stats with p2p connection"),this.statistics.startRemoteStats(this.p2pJingleSession.peerconnection),F.a.sendAnalyticsAndLog(Object(Y.I)(Y.i,{initiator:this.p2pJingleSession.isInitiator})))},re.prototype._updateProperties=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!s()(e,this.properties);this.properties=e,t&&(this.eventEmitter.emit(l.PROPERTIES_CHANGED,this.properties),["bridge-count","created-ms","octo-enabled"].forEach(function(t){void 0!==e[t]&&F.a.analytics.addPermanentProperties(_defineProperty({},t.replace("-","_"),e[t]))}))},re.prototype.getProperty=function(e){return this.properties[e]},re.prototype._maybeClearDeferredStartP2P=function(){this.deferredStartP2PTask&&(ne.info("Cleared deferred start P2P task"),clearTimeout(this.deferredStartP2PTask),this.deferredStartP2PTask=null)},re.prototype._removeRemoteJVBTracks=function(){this._removeRemoteTracks("JVB",this.jvbJingleSession.peerconnection.getRemoteTracks())},re.prototype._removeRemoteP2PTracks=function(){this._removeRemoteTracks("P2P",this.p2pJingleSession.peerconnection.getRemoteTracks())},re.prototype._removeRemoteTracks=function(e,t){for(var n,r=_createForOfIteratorHelperLoose(t);!(n=r()).done;){var i=n.value;ne.info("Removing remote "+e+" track: "+i),this.onRemoteTrackRemoved(i)}},re.prototype._resumeMediaTransferForJvbConnection=function(){ne.info("Resuming media transfer over the JVB connection..."),this.jvbJingleSession.setMediaTransferActive(!0,!0).then(function(){ne.info("Resumed media transfer over the JVB connection!")},function(e){ne.error("Failed to resume media transfer over the JVB connection:",e)})},re.prototype._setP2PStatus=function(e){if(this.p2p!==e){if(this.p2p=e,e){ne.info("Peer to peer connection established!"),F.a.analytics.addPermanentProperties({p2pFailed:!1,forceJvb121:!1});var t=0!==this.rtc.getLastN();this.p2pJingleSession.setMediaTransferActive(!0,t).catch(function(e){ne.error("Failed to sync up P2P video transfer status("+t+")",e)})}else ne.info("Peer to peer connection closed!");this.jvbJingleSession&&this.statistics.sendConnectionResumeOrHoldEvent(this.jvbJingleSession.peerconnection,!e),this.dtmfManager=null,this.eventEmitter.emit(l.P2P_STATUS,this,this.p2p),this.eventEmitter.emit(l._MEDIA_SESSION_ACTIVE_CHANGED,this._getActiveMediaSession()),this.eventEmitter.emit(this.isConnectionInterrupted()?l.CONNECTION_INTERRUPTED:l.CONNECTION_RESTORED)}else ne.debug("Called _setP2PStatus with the same status: "+e)},re.prototype._startP2PSession=function(e){if(this._maybeClearDeferredStartP2P(),this.p2pJingleSession)ne.error("P2P session already started!");else{this.isP2PConnectionInterrupted=!1,this.p2pJingleSession=this.xmpp.connection.jingle.newP2PJingleSession(this.room.myroomjid,e),ne.info("Created new P2P JingleSession",this.room.myroomjid,e),this._sendConferenceJoinAnalyticsEvent(),this.p2pJingleSession.initialize(this.room,this.rtc,ee({},this.options.config,{enableInsertableStreams:this._isE2EEEnabled()})),ne.info("Starting CallStats for P2P connection...");var t=c.Strophe.getResourceFromJid(this.p2pJingleSession.remoteJid),n=this.participants[t];n&&(t=n.getStatsID()||t),this.statistics.startCallStats(this.p2pJingleSession.peerconnection,t);var r=this.getLocalTracks();this.p2pJingleSession.invite(r)}},re.prototype._suspendMediaTransferForJvbConnection=function(){ne.info("Suspending media transfer over the JVB connection..."),this.jvbJingleSession.setMediaTransferActive(!1,!1).then(function(){ne.info("Suspended media transfer over the JVB connection !")},function(e){ne.error("Failed to suspend media transfer over the JVB connection:",e)})},re.prototype._maybeStartOrStopP2P=function(e){if(_.a.supportsP2P()&&this.isP2PEnabled()&&!this.isP2PTestModeEnabled()){var t=this.getParticipants(),n=t.length,r=this._shouldBeInP2PMode();if(!r&&this.deferredStartP2PTask&&this._maybeClearDeferredStartP2P(),!this.p2pJingleSession&&r){var i=n&&t[0],o=this.myUserId(),a=i.getId();if(o>a)return void ne.debug("I'm the bigger peersId - the other peer should start P2P",o,a);if(o===a)return void ne.error("The same IDs ? ",o,a);var s=i.getJid();if(e){if(this.deferredStartP2PTask)return void ne.error("Deferred start P2P task's been set already!");ne.info("Will start P2P with: "+s+" after "+this.backToP2PDelay+" seconds..."),this.deferredStartP2PTask=setTimeout(this._startP2PSession.bind(this,s),1e3*this.backToP2PDelay)}else ne.info("Will start P2P with: "+s),this._startP2PSession(s)}else this.p2pJingleSession&&!r&&(ne.info("Will stop P2P with: "+this.p2pJingleSession.remoteJid),this.p2pJingleSession.isInitiator&&n>1&&F.a.sendAnalyticsAndLog(Object(Y.I)(Y.k)),this._stopP2PSession())}else ne.info("Auto P2P disabled")},re.prototype._shouldBeInP2PMode=function(){var e=this.getParticipants(),t=e.length,n=void 0!==e.find(function(e){return"poltergeist"===e._botType}),r=1===t&&!n;return ne.debug("P2P? peerCount: "+t+", hasBotPeer: "+n+" => "+r),r},re.prototype._stopP2PSession=function(e,t){if(this.p2pJingleSession){var n=this.isP2PActive();n&&(this.jvbJingleSession&&this._resumeMediaTransferForJvbConnection(),this._removeRemoteP2PTracks()),ne.info("Stopping remote stats for P2P connection"),this.statistics.stopRemoteStats(this.p2pJingleSession.peerconnection),ne.info("Stopping CallStats for P2P connection"),this.statistics.stopCallStats(this.p2pJingleSession.peerconnection),this.p2pJingleSession.terminate(function(){ne.info("P2P session terminate RESULT")},function(t){e&&ne.error("An error occurred while trying to terminate P2P Jingle session",t)},{reason:e||"success",reasonDescription:t||"Turing off P2P session",sendSessionTerminate:this.room&&this.getParticipantById(c.Strophe.getResourceFromJid(this.p2pJingleSession.remoteJid))}),this.p2pJingleSession=null,this._setP2PStatus(!1),n&&(this.jvbJingleSession?this._addRemoteJVBTracks():ne.info("Not adding remote JVB tracks - no session yet"))}else ne.error("No P2P session to be stopped!")},re.prototype.isP2PActive=function(){return this.p2p},re.prototype.getP2PConnectionState=function(){return this.isP2PActive()?this.p2pJingleSession.peerconnection.getConnectionState():null},re.prototype.startP2PSession=function(){var e=this.getParticipants();if(1!==e.length)throw new Error("There must be exactly 1 participant to start the P2P session !");var t=e[0].getJid();this._startP2PSession(t)},re.prototype.stopP2PSession=function(){this._stopP2PSession()},re.prototype.getSpeakerStats=function(){return this.speakerStatsCollector.getStats()},re.prototype.setReceiverVideoConstraint=function(e){this.qualityController.setPreferredReceiveMaxFrameHeight(e)},re.prototype.setSenderVideoConstraint=function(e){return this.qualityController.setPreferredSendMaxFrameHeight(e)},re.prototype.createVideoSIPGWSession=function(e,t){return this.room?this.videoSIPGWHandler.createVideoSIPGWSession(e,t):new Error(K.ERROR_NO_CONNECTION)},re.prototype._sendConferenceJoinAnalyticsEvent=function(){var e=this.getMeetingUniqueId();!this._conferenceJoinAnalyticsEventSent&&e&&null!==this.getActivePeerConnection()&&(F.a.sendAnalytics(Object(Y.A)("joined",{meetingId:e,participantId:e+"."+this._statsCurrentId})),this._conferenceJoinAnalyticsEventSent=Date.now())},re.prototype._sendConferenceLeftAnalyticsEvent=function(){var e=this.getMeetingUniqueId();e&&this._conferenceJoinAnalyticsEventSent&&F.a.sendAnalytics(Object(Y.A)("left",{meetingId:e,participantId:e+"."+this._statsCurrentId,stats:{duration:Math.floor((Date.now()-this._conferenceJoinAnalyticsEventSent)/1e3),perf:this.getPerformanceStats()}}))},re.prototype._restartMediaSessions=function(){this.p2pJingleSession&&this.stopP2PSession(),this.jvbJingleSession&&this.jvbJingleSession.terminate(null,function(e){ne.warn("An error occurred while trying to terminate the JVB session",e)},{reason:"success",reasonDescription:"restart required",requestRestart:!0,sendSessionTerminate:!0}),this._maybeStartOrStopP2P(!1)},re.prototype._isE2EEEnabled=function(){return this._e2eEncryption&&this._e2eEncryption.isEnabled()},re.prototype.isE2EESupported=function(){return I.a.isSupported(this.options.config)},re.prototype.toggleE2EE=function(e){this.isE2EESupported()?this._e2eEncryption.setEnabled(e):ne.warn("Cannot enable / disable E2EE: platform is not supported.")},re.prototype.isLobbySupported=function(){return Boolean(this.room&&this.room.getLobby().isSupported())},re.prototype.isMembersOnly=function(){return Boolean(this.room&&this.room.membersOnlyEnabled)},re.prototype.enableLobby=function(){return this.room&&this.isModerator()?this.room.getLobby().enable():Promise.reject(new Error("The conference not started or user is not moderator"))},re.prototype.disableLobby=function(){this.room&&this.isModerator()&&this.room.getLobby().disable()},re.prototype.joinLobby=function(e,t){return this.room?this.room.getLobby().join(e,t):Promise.reject(new Error("The conference not started"))},re.prototype.lobbyDenyAccess=function(e){this.room&&this.room.getLobby().denyAccess(e)},re.prototype.lobbyApproveAccess=function(e){this.room&&this.room.getLobby().approveAccess(e)}}).call(this,"JitsiConference.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return E});var r=n(4),i=n(2),o=n(16),a=n(1),s=n(5),c=n(90),u=n.n(c),d=n(8),l=n(6),h=n.n(l),p=n(13),f=n.n(p),m=n(71),v=n.n(m),g=n(7),_=n(0),y=n.n(_),S=Object(r.getLogger)(e);function E(e){this.conference=e,this.xmppListeners={},e.on(a.TRACK_MUTE_CHANGED,function(t){if(t.isLocal()&&e.statistics){var n=t.isP2P?e.p2pJingleSession:e.jvbJingleSession,r=n&&n.peerconnection||null;e.statistics.sendMuteEvent(r,t.isMuted(),t.getType())}})}E.prototype.setupChatRoomListeners=function(){var e=this,t=this.conference,n=t.room;this.chatRoomForwarder=new u.a(n,this.conference.eventEmitter),n.addListener(y.a.ICE_RESTARTING,function(e){e.isP2P||t.rtc.closeBridgeChannel()}),n.addListener(y.a.ICE_RESTART_SUCCESS,function(e,n){!e.isP2P&&t._setBridgeChannel(n,e.peerconnection)}),n.addListener(y.a.AUDIO_MUTED_BY_FOCUS,function(e){s.a.sendAnalytics(Object(g.K)()),t.mutedByFocusActor=e,t.rtc.setAudioMute(!0).then(function(){t.isMutedByFocus=!0,t.mutedByFocusActor=null}).catch(function(e){t.mutedByFocusActor=null,S.warn("Error while audio muting due to focus request",e)})}),this.chatRoomForwarder.forward(y.a.SUBJECT_CHANGED,a.SUBJECT_CHANGED),this.chatRoomForwarder.forward(y.a.MUC_JOINED,a.CONFERENCE_JOINED),n.addListener(y.a.MUC_JOINED,function(){e.conference.isJvbConnectionInterrupted=!1,Object.keys(n.connectionTimes).forEach(function(e){var t=Object(g.C)("conference_"+e,{value:n.connectionTimes[e]});s.a.sendAnalytics(t)}),Object.keys(n.xmpp.connectionTimes).forEach(function(e){var t=Object(g.C)("xmpp_"+e,{value:n.xmpp.connectionTimes[e]});s.a.sendAnalytics(t)})}),n.addListener(y.a.RENEGOTIATION_FAILED,function(e,n){n.isP2P||t.eventEmitter.emit(a.CONFERENCE_FAILED,o.OFFER_ANSWER_FAILED,e)}),this.chatRoomForwarder.forward(y.a.ROOM_JOIN_ERROR,a.CONFERENCE_FAILED,o.CONNECTION_ERROR),this.chatRoomForwarder.forward(y.a.ROOM_CONNECT_ERROR,a.CONFERENCE_FAILED,o.CONNECTION_ERROR),this.chatRoomForwarder.forward(y.a.ROOM_CONNECT_NOT_ALLOWED_ERROR,a.CONFERENCE_FAILED,o.NOT_ALLOWED_ERROR),this.chatRoomForwarder.forward(y.a.ROOM_CONNECT_MEMBERS_ONLY_ERROR,a.CONFERENCE_FAILED,o.MEMBERS_ONLY_ERROR),this.chatRoomForwarder.forward(y.a.ROOM_MAX_USERS_ERROR,a.CONFERENCE_FAILED,o.CONFERENCE_MAX_USERS),this.chatRoomForwarder.forward(y.a.PASSWORD_REQUIRED,a.CONFERENCE_FAILED,o.PASSWORD_REQUIRED),this.chatRoomForwarder.forward(y.a.AUTHENTICATION_REQUIRED,a.CONFERENCE_FAILED,o.AUTHENTICATION_REQUIRED),this.chatRoomForwarder.forward(y.a.BRIDGE_DOWN,a.CONFERENCE_FAILED,o.VIDEOBRIDGE_NOT_AVAILABLE),n.addListener(y.a.BRIDGE_DOWN,function(){return s.a.sendAnalytics(Object(g.z)())}),this.chatRoomForwarder.forward(y.a.RESERVATION_ERROR,a.CONFERENCE_FAILED,o.RESERVATION_ERROR),this.chatRoomForwarder.forward(y.a.GRACEFUL_SHUTDOWN,a.CONFERENCE_FAILED,o.GRACEFUL_SHUTDOWN),n.addListener(y.a.CONNECTION_ICE_FAILED,function(e){t._onIceConnectionFailed(e)}),this.chatRoomForwarder.forward(y.a.MUC_DESTROYED,a.CONFERENCE_FAILED,o.CONFERENCE_DESTROYED),this.chatRoomForwarder.forward(y.a.CHAT_ERROR_RECEIVED,a.CONFERENCE_ERROR,o.CHAT_ERROR),this.chatRoomForwarder.forward(y.a.FOCUS_DISCONNECTED,a.CONFERENCE_FAILED,o.FOCUS_DISCONNECTED),n.addListener(y.a.FOCUS_LEFT,function(){s.a.sendAnalytics(Object(g.E)()),t.eventEmitter.emit(a.CONFERENCE_FAILED,o.FOCUS_LEFT)}),n.addListener(y.a.SESSION_ACCEPT_TIMEOUT,function(e){s.a.sendAnalyticsAndLog(Object(g.G)(g.b,{p2p:e.isP2P}))}),n.addListener(y.a.RECORDER_STATE_CHANGED,function(e,n){if(n){var r=t.getParticipantById(i.Strophe.getResourceFromJid(n));"off"===e.getStatus()?e.setTerminator(r):"on"===e.getStatus()&&e.setInitiator(r)}t.eventEmitter.emit(a.RECORDER_STATE_CHANGED,e)}),this.chatRoomForwarder.forward(y.a.TRANSCRIPTION_STATUS_CHANGED,a.TRANSCRIPTION_STATUS_CHANGED),this.chatRoomForwarder.forward(y.a.VIDEO_SIP_GW_AVAILABILITY_CHANGED,a.VIDEO_SIP_GW_AVAILABILITY_CHANGED),this.chatRoomForwarder.forward(y.a.VIDEO_SIP_GW_SESSION_STATE_CHANGED,a.VIDEO_SIP_GW_SESSION_STATE_CHANGED),this.chatRoomForwarder.forward(y.a.PHONE_NUMBER_CHANGED,a.PHONE_NUMBER_CHANGED),n.setParticipantPropertyListener(function(e,n){var r=t.getParticipantById(n);r&&r.setProperty(e.tagName.substring("jitsi_participant_".length),e.value)}),n.addListener(y.a.KICKED,t.onMemberKicked.bind(t)),n.addListener(y.a.SUSPEND_DETECTED,t.onSuspendDetected.bind(t)),this.chatRoomForwarder.forward(y.a.MUC_LOCK_CHANGED,a.LOCK_STATE_CHANGED),this.chatRoomForwarder.forward(y.a.MUC_MEMBERS_ONLY_CHANGED,a.MEMBERS_ONLY_CHANGED),n.addListener(y.a.MUC_MEMBER_JOINED,t.onMemberJoined.bind(t)),this.chatRoomForwarder.forward(y.a.MUC_LOBBY_MEMBER_JOINED,a.LOBBY_USER_JOINED),this.chatRoomForwarder.forward(y.a.MUC_LOBBY_MEMBER_UPDATED,a.LOBBY_USER_UPDATED),this.chatRoomForwarder.forward(y.a.MUC_LOBBY_MEMBER_LEFT,a.LOBBY_USER_LEFT),n.addListener(y.a.MUC_MEMBER_BOT_TYPE_CHANGED,t._onMemberBotTypeChanged.bind(t)),n.addListener(y.a.MUC_MEMBER_LEFT,t.onMemberLeft.bind(t)),this.chatRoomForwarder.forward(y.a.MUC_LEFT,a.CONFERENCE_LEFT),this.chatRoomForwarder.forward(y.a.MUC_DENIED_ACCESS,a.CONFERENCE_FAILED,o.CONFERENCE_ACCESS_DENIED),n.addListener(y.a.DISPLAY_NAME_CHANGED,t.onDisplayNameChanged.bind(t)),n.addListener(y.a.LOCAL_ROLE_CHANGED,function(e){t.onLocalRoleChanged(e),t.statistics&&t.isModerator()&&t.on(a.RECORDER_STATE_CHANGED,function(e){var t={error:e.getError(),id:"recorder_status",status:e.getStatus()};s.a.sendLog(JSON.stringify(t))})}),n.addListener(y.a.MUC_ROLE_CHANGED,t.onUserRoleChanged.bind(t)),n.addListener(v.a.IDENTITY_UPDATED,function(e,n){t.authEnabled=e,t.authIdentity=n,t.eventEmitter.emit(a.AUTH_STATUS_CHANGED,e,n)}),n.addListener(y.a.MESSAGE_RECEIVED,function(e,n,r,o,s){var c=i.Strophe.getResourceFromJid(e);t.eventEmitter.emit(a.MESSAGE_RECEIVED,c,r,s,n)}),n.addListener(y.a.PRIVATE_MESSAGE_RECEIVED,function(e,n,r,o,s){var c=i.Strophe.getResourceFromJid(e);t.eventEmitter.emit(a.PRIVATE_MESSAGE_RECEIVED,c,r,s)}),n.addListener(y.a.PRESENCE_STATUS,function(e,n){var r=i.Strophe.getResourceFromJid(e),o=t.getParticipantById(r);o&&o._status!==n&&(o._status=n,t.eventEmitter.emit(a.USER_STATUS_CHANGED,r,n))}),n.addListener(y.a.JSON_MESSAGE_RECEIVED,function(e,n){var r=i.Strophe.getResourceFromJid(e),o=t.getParticipantById(r);o?t.eventEmitter.emit(a.ENDPOINT_MESSAGE_RECEIVED,o,n):S.warn("Ignored XMPPEvents.JSON_MESSAGE_RECEIVED for not existing participant: "+e,n)}),n.addPresenceListener("startmuted",function(e,n){var r=!1;if(t.myUserId()===n&&t.isModerator())r=!0;else{var i=t.getParticipantById(n);i&&i.isModerator()&&(r=!0)}if(r){var o="true"===e.attributes.audio,s="true"===e.attributes.video,c=!1;o!==t.startMutedPolicy.audio&&(t.startMutedPolicy.audio=o,c=!0),s!==t.startMutedPolicy.video&&(t.startMutedPolicy.video=s,c=!0),c&&t.eventEmitter.emit(a.START_MUTED_POLICY_CHANGED,t.startMutedPolicy)}}),t.statistics&&(n.addListener(y.a.CONNECTION_ICE_FAILED,function(e){t.statistics.sendIceConnectionFailedEvent(e.peerconnection)}),n.addListener(y.a.ADD_ICE_CANDIDATE_FAILED,function(e,n){t.statistics.sendAddIceCandidateFailed(e,n)}))},E.prototype.setupRTCListeners=function(){var e=this.conference,t=e.rtc;t.addListener(h.a.REMOTE_TRACK_ADDED,e.onRemoteTrackAdded.bind(e)),t.addListener(h.a.REMOTE_TRACK_REMOVED,e.onRemoteTrackRemoved.bind(e)),t.addListener(h.a.DOMINANT_SPEAKER_CHANGED,function(t){e.lastDominantSpeaker!==t&&e.room&&(e.lastDominantSpeaker=t,e.eventEmitter.emit(a.DOMINANT_SPEAKER_CHANGED,t),e.statistics&&e.myUserId()===t&&e.statistics.sendDominantSpeakerEvent(e.room.roomjid))}),t.addListener(h.a.DATA_CHANNEL_OPEN,function(){var t=window.performance.now(),n="data.channel.opened";S.log("(TIME) data.channel.opened:\t",t),e.room.connectionTimes[n]=t,s.a.sendAnalytics(Object(g.C)(n,{value:t})),e.eventEmitter.emit(a.DATA_CHANNEL_OPENED)}),t.addListener(h.a.ENDPOINT_MESSAGE_RECEIVED,function(t,n){var r=e.getParticipantById(t);r?e.eventEmitter.emit(a.ENDPOINT_MESSAGE_RECEIVED,r,n):S.warn("Ignored ENDPOINT_MESSAGE_RECEIVED for not existing participant: "+t,n)}),t.addListener(h.a.LOCAL_UFRAG_CHANGED,function(e,t){e.isP2P||s.a.sendLog(JSON.stringify({id:"local_ufrag",value:t}))}),t.addListener(h.a.REMOTE_UFRAG_CHANGED,function(e,t){e.isP2P||s.a.sendLog(JSON.stringify({id:"remote_ufrag",value:t}))}),t.addListener(h.a.CREATE_ANSWER_FAILED,function(t,n){e.statistics.sendCreateAnswerFailed(t,n),n.isP2P||e.eventEmitter.emit(a.CONFERENCE_FAILED,o.OFFER_ANSWER_FAILED,t)}),t.addListener(h.a.CREATE_OFFER_FAILED,function(t,n){e.statistics.sendCreateOfferFailed(t,n),n.isP2P||e.eventEmitter.emit(a.CONFERENCE_FAILED,o.OFFER_ANSWER_FAILED,t)}),t.addListener(h.a.SET_LOCAL_DESCRIPTION_FAILED,function(t,n){e.statistics.sendSetLocalDescFailed(t,n),n.isP2P||e.eventEmitter.emit(a.CONFERENCE_FAILED,o.OFFER_ANSWER_FAILED,t)}),t.addListener(h.a.SET_REMOTE_DESCRIPTION_FAILED,function(t,n){e.statistics.sendSetRemoteDescFailed(t,n),n.isP2P||e.eventEmitter.emit(a.CONFERENCE_FAILED,o.OFFER_ANSWER_FAILED,t)}),t.addListener(h.a.LOCAL_TRACK_SSRC_UPDATED,function(t,n){t.isVideoTrack()&&t.videoType===f.a.DESKTOP&&e.statistics.sendScreenSharingEvent(!0,n)})},E.prototype.removeXMPPListeners=function(){var e=this,t=this.conference;t.xmpp.caps.removeListener(y.a.PARTCIPANT_FEATURES_CHANGED,this.xmppListeners[y.a.PARTCIPANT_FEATURES_CHANGED]),delete this.xmppListeners[y.a.PARTCIPANT_FEATURES_CHANGED],Object.keys(this.xmppListeners).forEach(function(n){t.xmpp.removeListener(n,e.xmppListeners[n])}),this.xmppListeners={}},E.prototype.setupXMPPListeners=function(){var e=this.conference,t=function(t){var n=e.getParticipantById(i.Strophe.getResourceFromJid(t));n&&e.eventEmitter.emit(a.PARTCIPANT_FEATURES_CHANGED,n)};e.xmpp.caps.addListener(y.a.PARTCIPANT_FEATURES_CHANGED,t),this.xmppListeners[y.a.PARTCIPANT_FEATURES_CHANGED]=t,this._addConferenceXMPPListener(y.a.CALL_INCOMING,e.onIncomingCall.bind(e)),this._addConferenceXMPPListener(y.a.CALL_ACCEPTED,e.onCallAccepted.bind(e)),this._addConferenceXMPPListener(y.a.TRANSPORT_INFO,e.onTransportInfo.bind(e)),this._addConferenceXMPPListener(y.a.CALL_ENDED,e.onCallEnded.bind(e)),this._addConferenceXMPPListener(y.a.START_MUTED_FROM_FOCUS,function(t,n){e.options.config.ignoreStartMuted||(e.startAudioMuted=t,e.startVideoMuted=n,e.getLocalTracks().forEach(function(t){switch(t.getType()){case d.a:e.startAudioMuted&&t.mute();break;case d.c:e.startVideoMuted&&t.mute()}}),e.eventEmitter.emit(a.STARTED_MUTED))}),this._addConferenceXMPPListener(y.a.CONFERENCE_TIMESTAMP_RECEIVED,function(t){e.eventEmitter.emit(a.CONFERENCE_CREATED_TIMESTAMP,t)})},E.prototype._addConferenceXMPPListener=function(e,t){this.xmppListeners[e]=t,this.conference.xmpp.addListener(e,t)},E.prototype.setupStatisticsListeners=function(){var e=this.conference;e.statistics&&(e.statistics.addAudioLevelListener(function(t,n,r,i){e.rtc.setAudioLevel(t,n,r,i)}),e.statistics.addBeforeDisposedListener(function(){e.eventEmitter.emit(a.BEFORE_STATISTICS_DISPOSED)}),e.options.config.startSilent||e.statistics.addByteSentStatsListener(function(t,n){e.getLocalTracks(d.a).forEach(function(e){var r=t.getLocalSSRC(e);r&&n.hasOwnProperty(r)&&e._onByteSentStatsReceived(t,n[r])})}))}}).call(this,"JitsiConferenceEventManager.js")},function(e,t,n){"use strict";(function(e,r){n.d(t,"a",function(){return s});var i=n(17),o=n(4),a=Object(o.getLogger)(e),s=(function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),e=t.call(this),a.info("This appears to be "+e.getName()+", ver: "+e.getVersion()),e}return _createClass(n,[{key:"doesVideoMuteByStreamRemove",value:function(){return this.isChromiumBased()||this.isSafari()}},{key:"supportsP2P",value:function(){return!this.usesUnifiedPlan()}},{key:"isChromiumBased",value:function(){return this.isChrome()||this.isElectron()||this.isNWJS()||this.isOpera()}},{key:"isSupported",value:function(){return this.isChromiumBased()||this.isFirefox()||this.isReactNative()||this.isSafari()&&!this.isVersionLessThan("12.1")}},{key:"isUserInteractionRequiredForUnmute",value:function(){return this.isFirefox()&&this.isVersionLessThan("68")}},{key:"supportsVideoMuteOnConnInterrupted",value:function(){return this.isChromiumBased()||this.isReactNative()||this.isSafari()}},{key:"supportsBandwidthStatistics",value:function(){return!this.isFirefox()&&!this.isSafari()}},{key:"supportsCodecPreferences",value:function(){return this.usesUnifiedPlan()&&void 0!==window.RTCRtpTransceiver&&Object.keys(window.RTCRtpTransceiver.prototype).indexOf("setCodecPreferences")>-1&&Object.keys(RTCRtpSender.prototype).indexOf("getCapabilities")>-1&&!this.isSafari()}},{key:"supportsDeviceChangeEvent",value:function(){return navigator.mediaDevices&&void 0!==navigator.mediaDevices.ondevicechange&&void 0!==navigator.mediaDevices.addEventListener}},{key:"supportsLocalCandidateRttStatistics",value:function(){return this.isChromiumBased()||this.isReactNative()||this.isSafari()}},{key:"supportsPerformanceObserver",value:function(){return void 0!==window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes.indexOf("longtask")>-1}},{key:"supportsReceiverStats",value:function(){return void 0!==window.RTCRtpReceiver&&Object.keys(RTCRtpReceiver.prototype).indexOf("getSynchronizationSources")>-1}},{key:"supportsRTTStatistics",value:function(){return!this.isFirefox()}},{key:"supportsVideo",value:function(){return!0}},{key:"usesPlanB",value:function(){return!this.usesUnifiedPlan()}},{key:"usesSdpMungingForSimulcast",value:function(){return this.isChromiumBased()||this.isReactNative()||this.isSafari()}},{key:"usesUnifiedPlan",value:function(){return!!this.isFirefox()||!(!this.isSafari()||void 0===window.RTCRtpTransceiver)&&Object.keys(RTCRtpTransceiver.prototype).indexOf("currentDirection")>-1}},{key:"usesNewGumFlow",value:function(){return this.isChrome()?!this.isVersionLessThan(61):!(!this.isFirefox()&&!this.isSafari())||!!this.isChromiumBased()&&this._getChromiumBasedVersion()>=61}},{key:"usesAdapter",value:function(){return this.usesNewGumFlow()}},{key:"usesRidsForSimulcast",value:function(){return!1}},{key:"supportsGetDisplayMedia",value:function(){return void 0!==navigator.getDisplayMedia||void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getDisplayMedia}},{key:"supportsInsertableStreams",value:function(){return Boolean(void 0!==window.RTCRtpSender&&(window.RTCRtpSender.prototype.createEncodedStreams||window.RTCRtpSender.prototype.createEncodedVideoStreams))}},{key:"supportsAudioRed",value:function(){return Boolean(window.RTCRtpSender&&window.RTCRtpSender.getCapabilities&&window.RTCRtpSender.getCapabilities("audio").codecs.some(function(e){return"audio/red"===e.mimeType})&&window.RTCRtpReceiver&&window.RTCRtpReceiver.getCapabilities&&window.RTCRtpReceiver.getCapabilities("audio").codecs.some(function(e){return"audio/red"===e.mimeType}))}},{key:"supportsSdpSemantics",value:function(){return this.isChromiumBased()&&this._getChromiumBasedVersion()>=65}},{key:"_getChromiumBasedVersion",value:function(){if(this.isChromiumBased()){if(this.isNWJS())return Number.parseInt(r.versions.chromium,10);var e=navigator.userAgent;if(e.match(/Chrome/))return Number.parseInt(e.match(/Chrome\/([\d.]+)/)[1],10)}return-1}}]),n})(i.a)}).call(this,"modules/browser/BrowserCapabilities.js",n(59))},function(e,t,n){e.exports=(function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)})({17:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(18),i=(function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,r){void 0===r&&(r=!1);var i=e.getVersionPrecision(t),o=e.getVersionPrecision(n),a=Math.max(i,o),s=0,c=e.map([t,n],function(t){var n=a-e.getVersionPrecision(t),r=t+new Array(n+1).join(".0");return e.map(r.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});for(r&&(s=a-Math.min(i,o)),a-=1;a>=s;){if(c[0][a]>c[1][a])return 1;if(c[0][a]===c[1][a]){if(a===s)return 0;a-=1}else if(c[0][a]<c[1][a])return-1}},e.map=function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e})();t.default=i,e.exports=t.default},18:function(e,t,n){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},o=n(18);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=(function(){function e(){}var t;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},(t=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}])&&a(e,t),e})();t.default=s,e.exports=t.default},91:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=c(n(92)),i=c(n(93)),o=c(n(94)),a=c(n(95)),s=c(n(17));function c(e){return e&&e.__esModule?e:{default:e}}var u=(function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=r.default.find(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=i.default.find(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=o.default.find(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=a.default.find(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return _extends({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},r=0,i={},o=0;if(Object.keys(e).forEach(function(t){var a=e[t];"string"==typeof a?(i[t]=a,o+=1):"object"==typeof a&&(n[t]=a,r+=1)}),r>0){var a=Object.keys(n),s=a.find(function(e){return t.isOS(e)});if(s){var c=this.satisfies(n[s]);if(void 0!==c)return c}var u=a.find(function(e){return t.isPlatform(e)});if(u){var d=this.satisfies(n[u]);if(void 0!==d)return d}}if(o>0){var l=Object.keys(i).find(function(e){return t.isBrowser(e,!0)});if(void 0!==l)return this.compareVersion(i[l])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),i=s.default.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n},t.compareVersion=function(e){var t=[0],n=e,r=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(s.default.compareVersions(i,n,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e){return this.isBrowser(e)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some(function(e){return t.is(e)})},e})();t.default=u,e.exports=t.default},92:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=a,e.exports=t.default},93:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows/i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=i.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:n}}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=i.default.getMacOSVersionName(t),r={name:o.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=i.default.getAndroidVersionName(t),r={name:o.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:o.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}];t.default=a,e.exports=t.default},94:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];t.default=a,e.exports=t.default},95:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},n=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},n=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},n=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},n=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=a,e.exports=t.default}})},function(e,t,n){"use strict";(function(e){var r=n(4),i=n(7),o=n(3);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=Object(r.getLogger)(e);t.a=new((function(){function e(){_classCallCheck(this,e),this.reset()}return _createClass(e,[{key:"reset",value:function(){this.disposed=!1,this.analyticsHandlers=new Set,this.cache=[],this.permanentProperties={},this.conferenceName="",this.addPermanentProperties({user_agent:navigator.userAgent,browser_name:o.a.getName()})}},{key:"dispose",value:function(){s.warn("Disposing of analytics adapter."),this.analyticsHandlers&&this.analyticsHandlers.size>0&&this.analyticsHandlers.forEach(function(e){"function"==typeof e.dispose&&e.dispose()}),this.setAnalyticsHandlers([]),this.disposed=!0}},{key:"setAnalyticsHandlers",value:function(e){var t=this;if(!this.disposed){this.analyticsHandlers=new Set(e),this._setUserProperties();var n=this.cache;this.cache=null,n&&n.forEach(function(e){return t._sendEvent(e)})}}},{key:"_setUserProperties",value:function(){var e=this;this.analyticsHandlers.forEach(function(t){try{t.setUserProperties(e.permanentProperties)}catch(t){s.warn("Error in setUserProperties method of one of the analytics handlers: "+t)}})}},{key:"addPermanentProperties",value:function(e){this.permanentProperties=(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){a(e,t,n[t])})}return e})({},this.permanentProperties,e),this._setUserProperties()}},{key:"setConferenceName",value:function(e){this.conferenceName=e,this.addPermanentProperties({conference_name:e})}},{key:"sendEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.disposed){var n=null;"string"==typeof e?n={type:i.t,action:e,actionSubject:e,source:e,attributes:t}:"object"==typeof e&&(n=e),this._verifyRequiredFields(n)?this._sendEvent(n):s.error("Dropping a mis-formatted event: "+JSON.stringify(n))}}},{key:"_verifyRequiredFields",value:function(e){if(!e)return!1;e.type||(e.type=i.t);var t=e.type;return t!==i.t&&t!==i.u&&t!==i.w&&t!==i.v?(s.error("Unknown event type: "+t),!1):t===i.u?Boolean(e.name):(e.action=e.action||e.name||e.actionSubject,e.actionSubject=e.actionSubject||e.name||e.action,e.source=e.source||e.name||e.action||e.actionSubject,e.action&&e.actionSubject&&e.source?!!(t!==i.v||(e.objectType=e.objectType||"generic-object-type",e.containerType=e.containerType||"conference","conference"!==e.containerType||e.containerId||(e.containerId=this.conferenceName),e.objectType&&e.objectId&&e.containerType&&e.containerId))||(s.error("Required field missing (containerId, containerType, objectId or objectType)"),!1):(s.error("Required field missing (action, actionSubject or source)"),!1))}},{key:"_maybeCacheEvent",value:function(e){return!!this.cache&&(this.cache.push(e),this.cache.length>100&&this.cache.splice(0,1),!0)}},{key:"_sendEvent",value:function(e){this._maybeCacheEvent(e)||this.analyticsHandlers.forEach(function(t){try{t.sendEvent(e)}catch(e){s.warn("Error sending analytics event: "+e)}})}}]),e})())}).call(this,"modules/statistics/AnalyticsAdapter.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var r=n(4),i=n(23),o=n(27),a=Object(r.getLogger)(e),s=(function(){function e(t,n){_classCallCheck(this,e),this.eventEmitter=t,this.longTasks=0,this.maxDuration=0,this.performanceStatsInterval=n,this.stats=new o.a}return _createClass(e,[{key:"getLongTasksStats",value:function(){return{avgRatePerMinute:(60*this.stats.getAverage()).toFixed(2),maxDurationMs:this.maxDuration}}},{key:"startObserver",value:function(){var e=this;this.longTaskEventHandler=function(t){for(var n,r=_createForOfIteratorHelperLoose(t.getEntries());!(n=r()).done;){var i=n.value;e.longTasks++,e.maxDuration=Math.max(e.maxDuration,i.duration).toFixed(3)}},a.info("Creating a Performance Observer for monitoring Long Tasks"),this.observer=new PerformanceObserver(this.longTaskEventHandler),this.observer.observe({type:"longtask",buffered:!0});var t=Date.now();this.longTasksIntervalId=setInterval(function(){var n=Date.now(),r=e._lastTimeStamp?(n-e._lastTimeStamp)/1e3:(n-t)/1e3,o=e.longTasks/r;e.stats.addNext(o),e.eventEmitter.emit(i.e,e.getLongTasksStats()),e.longTasks=0,e._lastTimeStamp=Date.now()},this.performanceStatsInterval)}},{key:"stopObserver",value:function(){this.observer&&this.observer.disconnect(),this.longTaskEventHandler=null,this.longTasksIntervalId&&(clearInterval(this.longTasksIntervalId),this.longTasksIntervalId=null)}}]),e})()}).call(this,"modules/statistics/PerformanceObserverStats.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return f});var r=n(17),i=n(4),o=n(8),a=n(23),s=n(3),c=n(11),u=Object(i.getLogger)(e),d={};function l(e,t){return!t||t<=0||!e||e<=0?0:Math.round(e/t*100)}function h(){this.loss={},this.bitrate={download:0,upload:0},this.resolution={},this.framerate=0,this.codec=""}function p(){this.bandwidth={},this.bitrate={},this.packetLoss=null,this.transport=[]}function f(e,t,n,r){this._browserType=s.a.getName();var i=d[this._browserType];if(!i)throw"The browser type '"+this._browserType+"' isn't supported!";this._usesPromiseGetStats=s.a.isSafari()||s.a.isFirefox(),this._getStatValue=this._usesPromiseGetStats?this._defineNewGetStatValueMethod(i):this._defineGetStatValueMethod(i),this.peerconnection=e,this.baselineAudioLevelsReport=null,this.currentAudioLevelsReport=null,this.currentStatsReport=null,this.previousStatsReport=null,this.audioLevelReportHistory={},this.audioLevelsIntervalId=null,this.eventEmitter=r,this.conferenceStats=new p,this.audioLevelsIntervalMilis=t,this.statsIntervalId=null,this.statsIntervalMilis=n,this.ssrc2stats=new Map}d[r.b.FIREFOX]={ssrc:"ssrc",packetsReceived:"packetsReceived",packetsLost:"packetsLost",packetsSent:"packetsSent",bytesReceived:"bytesReceived",bytesSent:"bytesSent",framerateMean:"framerateMean",ip:"address",port:"port",protocol:"protocol"},d[r.b.CHROME]={receiveBandwidth:"googAvailableReceiveBandwidth",sendBandwidth:"googAvailableSendBandwidth",remoteAddress:"googRemoteAddress",transportType:"googTransportType",localAddress:"googLocalAddress",activeConnection:"googActiveConnection",ssrc:"ssrc",packetsReceived:"packetsReceived",packetsSent:"packetsSent",packetsLost:"packetsLost",bytesReceived:"bytesReceived",bytesSent:"bytesSent",googCodecName:"googCodecName",googFrameHeightReceived:"googFrameHeightReceived",googFrameWidthReceived:"googFrameWidthReceived",googFrameHeightSent:"googFrameHeightSent",googFrameWidthSent:"googFrameWidthSent",googFrameRateReceived:"googFrameRateReceived",googFrameRateSent:"googFrameRateSent",audioInputLevel:"audioInputLevel",audioOutputLevel:"audioOutputLevel",currentRoundTripTime:"googRtt",remoteCandidateType:"googRemoteCandidateType",localCandidateType:"googLocalCandidateType",ip:"ip",port:"port",protocol:"protocol"},d[r.b.OPERA]=d[r.b.CHROME],d[r.b.NWJS]=d[r.b.CHROME],d[r.b.ELECTRON]=d[r.b.CHROME],d[r.b.SAFARI]=d[r.b.CHROME],d[r.b.REACT_NATIVE]=d[r.b.CHROME],h.prototype.setLoss=function(e){this.loss=e||{}},h.prototype.setResolution=function(e){this.resolution=e||{}},h.prototype.addBitrate=function(e){this.bitrate.download+=e.download,this.bitrate.upload+=e.upload},h.prototype.resetBitrate=function(){this.bitrate.download=0,this.bitrate.upload=0},h.prototype.setFramerate=function(e){this.framerate=e||0},h.prototype.setCodec=function(e){this.codec=e||""},f.prototype.stop=function(){this.audioLevelsIntervalId&&(clearInterval(this.audioLevelsIntervalId),this.audioLevelsIntervalId=null),this.statsIntervalId&&(clearInterval(this.statsIntervalId),this.statsIntervalId=null)},f.prototype.errorCallback=function(e){c.callErrorHandler(e),u.error("Get stats error",e),this.stop()},f.prototype.start=function(e){var t=this;e&&(s.a.supportsReceiverStats()&&u.info("Using RTCRtpSynchronizationSource for remote audio levels"),this.audioLevelsIntervalId=setInterval(function(){if(s.a.supportsReceiverStats()){var e=t.peerconnection.getAudioLevels();for(var n in e)if(e.hasOwnProperty(n)){var r=2.5*e[n];t.eventEmitter.emit(a.a,t.peerconnection,Number.parseInt(n,10),r,!1)}}else t.peerconnection.getStats(function(e){var n;n=e&&e.result&&"function"==typeof e.result?e.result():e,t.currentAudioLevelsReport=n,t._usesPromiseGetStats?t.processNewAudioLevelReport():t.processAudioLevelReport(),t.baselineAudioLevelsReport=t.currentAudioLevelsReport},function(e){return t.errorCallback(e)})},this.audioLevelsIntervalMilis)),this.statsIntervalId=setInterval(function(){t.peerconnection.getStats(function(e){var n;n=e&&e.result&&"function"==typeof e.result?e.result():e,t.currentStatsReport=n;try{t._usesPromiseGetStats?t.processNewStatsReport():t.processStatsReport()}catch(e){c.callErrorHandler(e),u.error("Unsupported key:"+e,e)}t.previousStatsReport=t.currentStatsReport},function(e){return t.errorCallback(e)})},this.statsIntervalMilis)},f.prototype._defineGetStatValueMethod=function(e){var t;switch(this._browserType){case r.b.CHROME:case r.b.OPERA:case r.b.NWJS:case r.b.ELECTRON:t=function(e,t){return e.stat(t)};break;case r.b.REACT_NATIVE:t=function(e,t){var n;return e.values.some(function(e){return!!e.hasOwnProperty(t)&&(n=e[t],!0)}),n};break;default:t=function(e,t){return e[t]}}return function(n,r){return t(n,(function(t){var n=e[t];if(n)return n;throw"The property '"+t+"' isn't supported!"})(r))}},f.prototype.getNonNegativeStat=function(e,t){var n=this._getStatValue(e,t);return"number"!=typeof n&&(n=Number(n)),isNaN(n)?0:Math.max(0,n)},f.prototype.processStatsReport=function(){var e=this;if(this.previousStatsReport){var t=this._getStatValue,n={};for(var r in this.currentStatsReport)if(this.currentStatsReport.hasOwnProperty(r)){var i=this.currentStatsReport[r];if(i){try{var o=t(i,"receiveBandwidth"),s=t(i,"sendBandwidth");(o||s)&&(this.conferenceStats.bandwidth={download:Math.round(o/1e3),upload:Math.round(s/1e3)})}catch(t){}if("googCandidatePair"===i.type)if("continue"===(function(){var n=void 0,r=void 0,o=void 0,a=void 0,s=void 0,c=void 0,u=void 0;try{if(!(n=t(i,"activeConnection")))return"continue";r=t(i,"remoteAddress"),u=t(i,"transportType"),a=t(i,"localAddress"),o=t(i,"localCandidateType"),s=t(i,"remoteCandidateType"),c=e.getNonNegativeStat(i,"currentRoundTripTime")}catch(e){}if(!r||!u||!a||"true"!==n)return"continue";var d=e.conferenceStats.transport;return d.some(function(e){return e.ip===r&&e.type===u&&e.localip===a})||d.push({ip:r,type:u,localip:a,p2p:e.peerconnection.isP2P,localCandidateType:o,remoteCandidateType:s,rtt:c}),"continue"})())continue;if("candidatepair"===i.type){if("succeeded"!==i.state||!i.selected)continue;var c=this.currentStatsReport[i.localCandidateId],d=this.currentStatsReport[i.remoteCandidateId];this.conferenceStats.transport.push({ip:d.ipAddress+":"+d.portNumber,type:c.transport,localip:c.ipAddress+":"+c.portNumber,p2p:this.peerconnection.isP2P,localCandidateType:c.candidateType,remoteCandidateType:d.candidateType})}if("ssrc"===i.type||"outboundrtp"===i.type||"inboundrtp"===i.type||"track"===i.type){var l=this.previousStatsReport[r],p=this.getNonNegativeStat(i,"ssrc");if("track"===i.type&&Array.isArray(i.ssrcIds)&&(p=Number(i.ssrcIds[0])),l&&p&&!0!==i.isRemote&&!0!==i.remoteSource){var f=this.ssrc2stats.get(p);f||(f=new h,this.ssrc2stats.set(p,f));var m=!0,v="packetsReceived",g=t(i,v);null!=g&&""!==g||(m=!1,null==(g=t(i,v="packetsSent"))&&u.warn("No packetsReceived nor packetsSent stat found")),(!g||g<0)&&(g=0);var _=this.getNonNegativeStat(l,v),y=Math.max(0,g-_),S=this.getNonNegativeStat(i,"packetsLost"),E=this.getNonNegativeStat(l,"packetsLost"),b=Math.max(0,S-E);f.setLoss({packetsTotal:y+b,packetsLost:b,isDownloadStream:m});var C=this.getNonNegativeStat(i,"bytesReceived"),T=this.getNonNegativeStat(l,"bytesReceived"),R=Math.max(0,C-T),A=0,k=t(i,"bytesSent");"number"!=typeof k&&"string"!=typeof k||(k=Number(k),isNaN(k)||(n[p]=k,k>0&&(A=k-t(l,"bytesSent")))),A=Math.max(0,A);var I=i.timestamp-l.timestamp,w=0,P=0;I>0&&(w=Math.round(8*R/I),P=Math.round(8*A/I)),f.addBitrate({download:w,upload:P});var O={height:null,width:null};try{var D=void 0,N=void 0;((D=t(i,"googFrameHeightReceived"))&&(N=t(i,"googFrameWidthReceived"))||(D=t(i,"googFrameHeightSent"))&&(N=t(i,"googFrameWidthSent")))&&(O.height=D,O.width=N)}catch(t){}var M=void 0,L=void 0;try{M=t(i,"googFrameRateReceived")||t(i,"googFrameRateSent")||0}catch(t){try{M=this.getNonNegativeStat(i,"framerateMean")}catch(t){}}f.setFramerate(Math.round(M||0)),O.height&&O.width?f.setResolution(O):f.setResolution(null);try{L=t(i,"googCodecName")||""}catch(t){}f.setCodec(L)}}}}this.eventEmitter.emit(a.c,this.peerconnection,n),this._processAndEmitReport()}},f.prototype._processAndEmitReport=function(){for(var e,t=this,n={download:0,upload:0},r={download:0,upload:0},i=0,o=0,s={},c={},d={},h=0,p=0,f="",m=0,v=0,g="",_=_createForOfIteratorHelperLoose(this.ssrc2stats);!(e=_()).done;){var y=e.value,S=_slicedToArray(y,2),E=S[0],b=S[1],C=b.loss,T=C.isDownloadStream?"download":"upload";n[T]+=C.packetsTotal,r[T]+=C.packetsLost,i+=b.bitrate.download,o+=b.bitrate.upload;var R=this.peerconnection.getTrackBySSRC(E);if(R){R.isAudioTrack()?(h+=b.bitrate.download,p+=b.bitrate.upload,f=b.codec):(m+=b.bitrate.download,v+=b.bitrate.upload,g=b.codec);var A=R.getParticipantId();if(A){var k=b.resolution;if(k.width&&k.height&&-1!==k.width&&-1!==k.height){var I=s[A]||{};I[E]=k,s[A]=I}if(0!==b.framerate){var w=c[A]||{};w[E]=b.framerate,c[A]=w}if(f.length&&g.length){var P={audio:f,video:g},O=d[A]||{};O[E]=P,d[A]=O}}else u.error("No participant ID returned by "+R)}b.resetBitrate()}this.conferenceStats.bitrate={upload:o,download:i},this.conferenceStats.bitrate.audio={upload:p,download:h},this.conferenceStats.bitrate.video={upload:v,download:m},this.conferenceStats.packetLoss={total:l(r.download+r.upload,n.download+n.upload),download:l(r.download,n.download),upload:l(r.upload,n.upload)};var D,N={};Object.keys(this.audioLevelReportHistory).forEach(function(e){var n=t.audioLevelReportHistory[e],r=n.data,i=n.isLocal,o=r.reduce(function(e,t){return e+t})/r.length;if(i)D=o;else{var a=t.peerconnection.getTrackBySSRC(Number(e));if(a){var s=a.getParticipantId();s&&(N[s]=o)}}}),this.audioLevelReportHistory={},this.eventEmitter.emit(a.d,this.peerconnection,{bandwidth:this.conferenceStats.bandwidth,bitrate:this.conferenceStats.bitrate,packetLoss:this.conferenceStats.packetLoss,resolution:s,framerate:c,codec:d,transport:this.conferenceStats.transport,localAvgAudioLevels:D,avgAudioLevels:N}),this.conferenceStats.transport=[]},f.prototype.processAudioLevelReport=function(){if(this.baselineAudioLevelsReport){var e=this._getStatValue;for(var t in this.currentAudioLevelsReport)if(this.currentAudioLevelsReport.hasOwnProperty(t)){var n=this.currentAudioLevelsReport[t];if("ssrc"===n.type||"track"===n.type){var r=this.baselineAudioLevelsReport[t],i=void 0,o=this.getNonNegativeStat(n,"ssrc");if(!o&&Array.isArray(n.ssrcIds)&&(o=Number(n.ssrcIds[0])),r)if(o){try{i=e(n,"audioInputLevel")||e(n,"audioOutputLevel")}catch(e){return u.warn("Audio Levels are not available in the statistics."),void clearInterval(this.audioLevelsIntervalId)}if(i){var s;s="ssrc"===n.type?!e(n,"packetsReceived"):!n.remoteSource,i/=32767,o in this.audioLevelReportHistory||(this.audioLevelReportHistory[o]={isLocal:s,data:[]}),this.audioLevelReportHistory[o].data.push(i),this.eventEmitter.emit(a.a,this.peerconnection,o,i,s)}}else Date.now()-n.timestamp<3e3&&u.warn("No ssrc: ");else u.warn(o+" not enough data")}}}},f.prototype._defineNewGetStatValueMethod=function(e){return function(t,n){return t[(function(t){var n=e[t];if(n)return n;throw"The property '"+t+"' isn't supported!"})(n)]}},f.prototype.getNonNegativeValue=function(e){var t=e;return"number"!=typeof t&&(t=Number(t)),isNaN(t)?0:Math.max(0,t)},f.prototype._calculateBitrate=function(e,t,n){var r=this.getNonNegativeValue(e[n]),i=this.getNonNegativeValue(t[n]),o=Math.max(0,r-i),a=e.timestamp-t.timestamp,s=0;return a>0&&(s=Math.round(8*o/a)),s},f.prototype.processNewStatsReport=function(){var e=this;if(this.previousStatsReport){var t=this._getStatValue,n={};this.currentStatsReport.forEach(function(r){if("candidate-pair"===r.type&&r.nominated&&"succeeded"===r.state){var i=r.availableIncomingBitrate,o=r.availableOutgoingBitrate;(i||o)&&(e.conferenceStats.bandwidth={download:Math.round(i/1e3),upload:Math.round(o/1e3)});var a=e.currentStatsReport.get(r.remoteCandidateId),s=e.currentStatsReport.get(r.localCandidateId);if(a&&s){var c=t(a,"ip")+":"+t(a,"port"),u=t(s,"ip")+":"+t(s,"port"),d=t(a,"protocol"),l=e.conferenceStats.transport;l.some(function(e){return e.ip===c&&e.type===d&&e.localip===u})||l.push({ip:c,type:d,localIp:u,p2p:e.peerconnection.isP2P,localCandidateType:s.candidateType,remoteCandidateType:a.candidateType,networkType:s.networkType,rtt:1e3*r.currentRoundTripTime})}}else if("inbound-rtp"===r.type||"outbound-rtp"===r.type){var p=e.previousStatsReport.get(r.id),f=e.getNonNegativeValue(r.ssrc);if(!p||!f)return;var m=e.ssrc2stats.get(f);m||(m=new h,e.ssrc2stats.set(f,m));var v=!0,g="packetsReceived";"outbound-rtp"===r.type&&(v=!1,g="packetsSent");var _=r[g];(!_||_<0)&&(_=0);var y=e.getNonNegativeValue(p[g]),S=Math.max(0,_-y),E=e.getNonNegativeValue(r.packetsLost),b=e.getNonNegativeValue(p.packetsLost),C=Math.max(0,E-b);m.setLoss({packetsTotal:S+C,packetsLost:C,isDownloadStream:v}),"inbound-rtp"===r.type?m.addBitrate({download:e._calculateBitrate(r,p,"bytesReceived"),upload:0}):(n[f]=e.getNonNegativeValue(r.bytesSent),m.addBitrate({download:0,upload:e._calculateBitrate(r,p,"bytesSent")}));var T=r.framerateMean;T&&m.setFramerate(Math.round(T||0))}else if("track"===r.type){var R={height:r.frameHeight,width:r.frameWidth},A=r.framesPerSecond;if(!A){var k=e.previousStatsReport.get(r.id);if(k){var I=r.timestamp-k.timestamp;I>0&&r.framesSent&&(A=(r.framesSent-k.framesSent)/I*1e3)}if(!A)return}var w=r.trackIdentifier,P=e.peerconnection.getSsrcByTrackId(w);if(!P)return;var O=e.ssrc2stats.get(P);O||(O=new h,e.ssrc2stats.set(P,O)),O.setFramerate(Math.round(A||0)),R.height&&R.width?O.setResolution(R):O.setResolution(null)}}),this.eventEmitter.emit(a.c,this.peerconnection,n),this._processAndEmitReport()}},f.prototype.processNewAudioLevelReport=function(){var e=this;this.baselineAudioLevelsReport&&this.currentAudioLevelsReport.forEach(function(t){if("track"===t.type){var n=t.audioLevel;if(n){var r=t.trackIdentifier,i=e.peerconnection.getSsrcByTrackId(r);if(i){var s=i===e.peerconnection.getLocalSSRC(e.peerconnection.getLocalTracks(o.a));e.eventEmitter.emit(a.a,e.peerconnection,i,n,s)}}}})}}).call(this,"modules/statistics/RTPStatsCollector.js")},function(e,t){function n(e,t){if(!e||!t||"function"!=typeof e.addListener||"function"!=typeof t.emit)throw new Error("Invalid arguments passed to EventEmitterForwarder");this.src=e,this.dest=t}n.prototype.forward=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];t[0]=this.dest,this.src.addListener(r,Function.prototype.bind.apply(this.dest.emit,t))},e.exports=n},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return d});var r=n(4),i=n(2),o=n(1),a=n(48),s=n(62),c=n(8),u=Object(r.getLogger)(e),d=(function(){function e(t,n,r,o,s,c,u){_classCallCheck(this,e),this._jid=t,this._id=i.Strophe.getResourceFromJid(t),this._conference=n,this._displayName=r,this._supportsDTMF=!1,this._tracks=[],this._role="none",this._status=c,this._hidden=o,this._statsID=s,this._connectionStatus=a.a.ACTIVE,this._properties={},this._identity=u}return _createClass(e,[{key:"getConference",value:function(){return this._conference}},{key:"getProperty",value:function(e){return this._properties[e]}},{key:"hasAnyVideoTrackWebRTCMuted",value:function(){return this.getTracks().some(function(e){return e.getType()===c.c&&e.isWebRTCTrackMuted()})}},{key:"_setConnectionStatus",value:function(e){this._connectionStatus=e}},{key:"getConnectionStatus",value:function(){return this._connectionStatus}},{key:"setProperty",value:function(e,t){var n=this._properties[e];t!==n&&(this._properties[e]=t,this._conference.eventEmitter.emit(o.PARTICIPANT_PROPERTY_CHANGED,this,e,n,t))}},{key:"getTracks",value:function(){return this._tracks.slice()}},{key:"getTracksByMediaType",value:function(e){return this.getTracks().filter(function(t){return t.getType()===e})}},{key:"getId",value:function(){return this._id}},{key:"getJid",value:function(){return this._jid}},{key:"getDisplayName",value:function(){return this._displayName}},{key:"getStatsID",value:function(){return this._statsID}},{key:"getStatus",value:function(){return this._status}},{key:"isModerator",value:function(){return"moderator"===this._role}},{key:"isHidden",value:function(){return this._hidden}},{key:"isAudioMuted",value:function(){return this._isMediaTypeMuted(c.a)}},{key:"_isMediaTypeMuted",value:function(e){return this.getTracks().reduce(function(t,n){return t&&(n.getType()!==e||n.isMuted())},!0)}},{key:"isVideoMuted",value:function(){return this._isMediaTypeMuted(c.c)}},{key:"getRole",value:function(){return this._role}},{key:"supportsDTMF",value:function(){return this._supportsDTMF}},{key:"getFeatures",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;return this._getFeaturesPromise?this._getFeaturesPromise:(this._getFeaturesPromise=this._conference.xmpp.caps.getFeatures(this._jid,t).catch(function(n){return n===s.a?e._conference.xmpp.caps.getFeatures(e._jid,t):(u.warn("Failed to discover features of "+e._jid,n),Promise.reject(n))}),this._getFeaturesPromise.then(function(t){return e._getFeaturesPromise=void 0,t},function(t){throw e._getFeaturesPromise=void 0,t}))}},{key:"getBotType",value:function(){return this._botType}}]),e})()}).call(this,"JitsiParticipant.js")},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(26),i=n(28);function o(e){var t,n=this,o=e.id,a=e.password,s=e.onCreateResource,c=e.onLoginSuccessful,u=e.roomPassword,d=!1,l=new i.c(this.connection.options),h=new Promise(function(e,i){t=i,l.addListener(r.CONNECTION_DISCONNECTED,function(){l=void 0}),l.addListener(r.CONNECTION_ESTABLISHED,function(){d||(c&&c(),l.createRoom(n.options.name,n.options.config,s).moderator.authenticate().then(function(){l&&l.disconnect(),d||(n.join(u),e())}).catch(function(e){var t=e.error,n=e.message;l.disconnect(),i({authenticationError:t,message:n})}))}),l.addListener(r.CONNECTION_FAILED,function(e,t,n){i({connectionError:e,credentials:n,message:t}),l=void 0}),d||l.connect(o,a)});return h.cancel=function(){d=!0,t({}),l&&l.disconnect()},h}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var r=n(4),i=Object(r.getLogger)(e),o=Symbol("kJitsiE2EE"),a=(function(){function e(t){_classCallCheck(this,e),this._options=t;var n="",r=document.querySelector('script[src*="lib-jitsi-meet"]');if(r){var o=r.src.lastIndexOf("/");n=r.src.substring(0,o)+"/"}var a=new Blob(["importScripts(\""+n+"lib-jitsi-meet.e2ee-worker.js\");"],{type:"application/javascript"}),s=window.URL.createObjectURL(a);this._worker=new Worker(s,{name:"E2EE Worker"}),this._worker.onerror=function(e){return i.onerror(e)};var c=new TextEncoder;this._worker.postMessage({operation:"initialize",salt:c.encode(t.salt)})}return _createClass(e,[{key:"cleanup",value:function(e){this._worker.postMessage({operation:"cleanup",participantId:e})}},{key:"handleReceiver",value:function(e,t,n){var r;e[o]||(e[o]=!0,r=e.createEncodedStreams?e.createEncodedStreams():"video"===t?e.createEncodedVideoStreams():e.createEncodedAudioStreams(),this._worker.postMessage({operation:"decode",readableStream:r.readable||r.readableStream,writableStream:r.writable||r.writableStream,participantId:n},[r.readable||r.readableStream,r.writable||r.writableStream]))}},{key:"handleSender",value:function(e,t,n){var r;e[o]||(e[o]=!0,r=e.createEncodedStreams?e.createEncodedStreams():"video"===t?e.createEncodedVideoStreams():e.createEncodedAudioStreams(),this._worker.postMessage({operation:"encode",readableStream:r.readable||r.readableStream,writableStream:r.writable||r.writableStream,participantId:n},[r.readable||r.readableStream,r.writable||r.writableStream]))}},{key:"setKey",value:function(e,t,n){this._worker.postMessage({operation:"setKey",participantId:e,key:t,keyIndex:n})}}]),e})()}).call(this,"modules/e2ee/E2EEContext.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var r=n(4),i=n(49),o=n(95),a=Object(r.getLogger)(e),s=(function(){function e(t){_classCallCheck(this,e),this._stropheConn=t,this._resumeRetryN=0,this._retryDelay=void 0}return _createClass(e,[{key:"schedule",value:function(){var e=this;this._cancelResume(),this._resumeRetryN+=1,this._networkOnlineListener=i.b.addEventListener(i.a,function(t){t.isOnline?e._scheduleResume():e._cancelResume()}),i.b.isOnline()&&this._scheduleResume()}},{key:"_scheduleResume",value:function(){var e=this;this._resumeTimeout||(this._resumeRetryN=Math.min(3,this._resumeRetryN),this._retryDelay=Object(o.a)(this._resumeRetryN,1500*this._resumeRetryN,3),a.info("Will try to resume the XMPP connection in "+this.retryDelay+"ms"),this._resumeTimeout=setTimeout(function(){return e._resumeConnection()},this.retryDelay))}},{key:"_cancelResume",value:function(){this._resumeTimeout&&(a.info("Canceling connection resume task"),clearTimeout(this._resumeTimeout),this._resumeTimeout=void 0,this._retryDelay=void 0)}},{key:"_resumeConnection",value:function(){var e=this._stropheConn.streamManagement,t=e.getResumeToken();if(t){a.info("Trying to resume the XMPP connection");var n=new URL(this._stropheConn.service),r=n.search;-1===r.indexOf("previd=")&&(r+=-1===r.indexOf("?")?"?previd="+t:"&previd="+t),n.search=r,this._stropheConn.service=n.toString(),e.resume()}}},{key:"cancel",value:function(){this._cancelResume(),this._resumeRetryN=0,this._networkOnlineListener&&(this._networkOnlineListener(),this._networkOnlineListener=null)}},{key:"retryDelay",get:function(){return this._retryDelay}}]),e})()}).call(this,"modules/xmpp/ResumeTask.js")},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return Math.floor(Math.random()*(1e3*Math.pow(n,e)-t)+t)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=(function(){function e(){_classCallCheck(this,e),this._lastSuccess=null}return _createClass(e,[{key:"startTracking",value:function(e,t){var n=this,r=t.rawInput;t.rawInput=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];e.connected&&(n._lastSuccess=Date.now()),r.apply(t,o)}}},{key:"getTimeSinceLastSuccess",value:function(){return this._lastSuccess?Date.now()-this._lastSuccess:null}}]),e})()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return u});var r=n(4),i=n(2),o=n(11),a=n.n(o),s=n(38),c=Object(r.getLogger)(e),u=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,i=e.onPingThresholdExceeded;return _classCallCheck(this,n),(r=t.call(this)).failedPings=0,r.pingExecIntervals=new Array(12),r._onPingThresholdExceeded=i,r}return _createClass(n,[{key:"init",value:function(e){_get(_getPrototypeOf(n.prototype),"init",this).call(this,e),i.Strophe.addNamespace("PING","urn:xmpp:ping")}},{key:"ping",value:function(e,t,n,r){this._addPingExecutionTimestamp();var o=Object(i.$iq)({type:"get",to:e});o.c("ping",{xmlns:i.Strophe.NS.PING}),this.connection.sendIQ2(o,{timeout:r}).then(t,n)}},{key:"startInterval",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;clearInterval(this.intervalId),this.intervalId=window.setInterval(function(){t.ping(e,function(){t.failedPings=0},function(e){t.failedPings+=1;var n="Ping "+(e?"error":"timeout");t.failedPings>=2?(a.a.callErrorHandler(new Error(n)),c.error(n,e),t._onPingThresholdExceeded&&t._onPingThresholdExceeded()):c.warn(n,e)},5e3)},n),c.info("XMPP pings will be sent every "+n+" ms")}},{key:"stopInterval",value:function(){this.intervalId&&(window.clearInterval(this.intervalId),this.intervalId=null,this.failedPings=0,c.info("Ping interval cleared"))}},{key:"_addPingExecutionTimestamp",value:function(){this.pingExecIntervals.push((new Date).getTime()),this.pingExecIntervals.length>12&&this.pingExecIntervals.shift()}},{key:"getPingSuspendTime",value:function(){var e=this.pingExecIntervals.slice();e.push((new Date).getTime());var t=0,n=e[0];return e.forEach(function(e){var r=e-n;r>t&&(t=r),n=e}),t-=1e4,Math.max(t,0)}}]),n})(s.b)}).call(this,"modules/xmpp/strophe.ping.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return d});var r=n(4),i=n(2),o=n(0),a=n.n(o),s=n(99),c=n(38),u=Object(r.getLogger)(e),d=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).xmpp=e,r.rooms={},r}return _createClass(n,[{key:"init",value:function(e){_get(_getPrototypeOf(n.prototype),"init",this).call(this,e),this.connection.addHandler(this.onPresence.bind(this),null,"presence",null,null,null,null),this.connection.addHandler(this.onPresenceUnavailable.bind(this),null,"presence","unavailable",null),this.connection.addHandler(this.onPresenceError.bind(this),null,"presence","error",null),this.connection.addHandler(this.onMessage.bind(this),null,"message",null,null),this.connection.addHandler(this.onMute.bind(this),"http://jitsi.org/jitmeet/audio","iq","set",null,null)}},{key:"createRoom",value:function(e,t,n){var r=i.Strophe.getBareJidFromJid(e);if(this.rooms[r]){var o="You are already in the room!";throw u.error(o),new Error(o)}return this.rooms[r]=new s.a(this.connection,e,t,this.xmpp,n),this.eventEmitter.emit(a.a.EMUC_ROOM_ADDED,this.rooms[r]),this.rooms[r]}},{key:"doLeave",value:function(e){this.eventEmitter.emit(a.a.EMUC_ROOM_REMOVED,this.rooms[e]),delete this.rooms[e]}},{key:"onPresence",value:function(e){var t=e.getAttribute("from");if(e.getAttribute("type"))return!0;var n=this.rooms[i.Strophe.getBareJidFromJid(t)];return!n||($(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>status[code="201"]').length&&n.createNonAnonymousRoom(),n.onPresence(e),!0)}},{key:"onPresenceUnavailable",value:function(e){var t=e.getAttribute("from"),n=this.rooms[i.Strophe.getBareJidFromJid(t)];return!n||(n.onPresenceUnavailable(e,t),!0)}},{key:"onPresenceError",value:function(e){var t=e.getAttribute("from"),n=this.rooms[i.Strophe.getBareJidFromJid(t)];return!n||(n.onPresenceError(e,t),!0)}},{key:"onMessage",value:function(e){var t=e.getAttribute("from"),n=this.rooms[i.Strophe.getBareJidFromJid(t)];return!n||(n.onMessage(e,t),!0)}},{key:"onMute",value:function(e){var t=e.getAttribute("from"),n=this.rooms[i.Strophe.getBareJidFromJid(t)];return!n||(n.onMute(e),!0)}}]),n})(c.a)}).call(this,"modules/xmpp/strophe.emuc.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return y});var r=n(4),i=n(2),o=n(63),a=n(8),s=n(0),c=n.n(s),u=n(11),d=n.n(u),l=n(20),h=n(100),p=n(42),f=n(101),m=Object(r.getLogger)(e),v={packet2JSON:function(e,t){for(var n=0,r=Array.from(e.children);n<r.length;n++){for(var o=r[n],a={attributes:{},children:[],tagName:o.tagName},s=0,c=Array.from(o.attributes);s<c.length;s++){var u=c[s];a.attributes[u.name]=u.value}var d=i.Strophe.getText(o);d&&(a.value=i.Strophe.xmlunescape(d)),t.push(a),this.packet2JSON(o,a.children)}},json2packet:function(e,t){for(var n=0;n<e.length;n++){var r=e[n];r&&(t.c(r.tagName,r.attributes),r.value&&t.t(r.value),r.children&&this.json2packet(r.children,t),t.up())}}};function g(e,t){for(var n=[],r=0;r<e.length;r++)e[r].tagName===t&&n.push(e[r]);return n}var _=["owner","admin","member"],y=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,s,c){var u;return _classCallCheck(this,n),(u=t.call(this)).xmpp=s,u.connection=e,u.roomjid=i.Strophe.getBareJidFromJid(r),u.myroomjid=r,u.password=a,m.info("Joined MUC as "+u.myroomjid),u.members={},u.presMap={},u.presHandlers={},u._removeConnListeners=[],u.joined=!1,u.role=null,u.focusMucJid=null,u.noBridgeAvailable=!1,u.options=c||{},u.moderator=new f.a(u.roomjid,u.xmpp,u.eventEmitter,{connection:u.xmpp.options,conference:u.options}),(void 0===u.options.enableLobby||u.options.enableLobby)&&(u.lobby=new h.a(_assertThisInitialized(u))),u.initPresenceMap(c),u.lastPresences={},u.phoneNumber=null,u.phonePin=null,u.connectionTimes={},u.participantPropertyListener=null,u.locked=!1,u.transcriptionStatus=o.OFF,u}return _createClass(n,[{key:"initPresenceMap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.presMap.to=this.myroomjid,this.presMap.xns="http://jabber.org/protocol/muc",this.presMap.nodes=[],e.statsId&&this.presMap.nodes.push({tagName:"stats-id",value:e.statsId}),this.addVideoInfoToPresence(!1),e.deploymentInfo&&e.deploymentInfo.userRegion&&this.presMap.nodes.push({tagName:"region",attributes:{id:e.deploymentInfo.userRegion,xmlns:"http://jitsi.org/jitsi-meet"}}),this.presenceUpdateTime=Date.now()}},{key:"join",value:function(e,t){var n=this;return this.password=e,new Promise(function(e){n.options.disableFocus&&m.info("Conference focus disabled for "+n.roomjid),(n.options.disableFocus?Promise.resolve():n.moderator.allocateConferenceFocus()).then(function(){n.sendPresence(!0,t),n._removeConnListeners.push(n.connection.addEventListener(p.a.Events.CONN_STATUS_CHANGED,n.onConnStatusChanged.bind(n))),e()})})}},{key:"sendPresence",value:function(e,t){var n=this.presMap.to;if(this.connection&&this.connection.connected&&n&&(this.joined||e)){var r=Object(i.$pres)({to:n});e&&(r.c("x",{xmlns:this.presMap.xns}),this.password&&r.c("password").t(this.password).up(),t&&Object.keys(t).forEach(function(e){r.c(e).t(t[e]).up()}),r.up()),v.json2packet(this.presMap.nodes,r),this.presenceSyncTime=Date.now(),this.connection.send(r),e&&this.connection.flush()}}},{key:"doLeave",value:function(){m.log("do leave",this.myroomjid);var e=Object(i.$pres)({to:this.myroomjid,type:"unavailable"});this.presMap.length=0,!this.connection.isUsingWebSocket&&this.connection.flush(),this.connection.send(e),this.connection.flush()}},{key:"discoRoomInfo",value:function(){var e=this,t=Object(i.$iq)({type:"get",to:this.roomjid}).c("query",{xmlns:i.Strophe.NS.DISCO_INFO});this.connection.sendIQ(t,function(t){var n=1===$(t).find('>query>feature[var="muc_passwordprotected"]').length;n!==e.locked&&(e.eventEmitter.emit(c.a.MUC_LOCK_CHANGED,n),e.locked=n);var r=$(t).find('>query>x[type="result"]>field[var="muc#roominfo_meetingId"]>value');r.length?e.setMeetingId(r.text()):m.warn("No meeting ID from backend");var i=1===$(t).find('>query>feature[var="muc_membersonly"]').length,o=$(t).find('>query>x[type="result"]>field[var="muc#roominfo_lobbyroom"]>value');e.lobby&&e.lobby.setLobbyRoomJid(o&&o.length?o.text():void 0),i!==e.membersOnlyEnabled&&(e.membersOnlyEnabled=i,e.eventEmitter.emit(c.a.MUC_MEMBERS_ONLY_CHANGED,i))},function(e){d.a.callErrorHandler(e),m.error("Error getting room info: ",e)})}},{key:"setMeetingId",value:function(e){this.meetingId!==e&&(this.meetingId&&m.warn("Meeting Id changed from:"+this.meetingId+" to:"+e),this.meetingId=e,this.eventEmitter.emit(c.a.MEETING_ID_SET,e))}},{key:"createNonAnonymousRoom",value:function(){var e=this;if(!this.options.disableDiscoInfo){var t=Object(i.$iq)({type:"get",to:this.roomjid}).c("query",{xmlns:"http://jabber.org/protocol/muc#owner"}).c("x",{xmlns:"jabber:x:data",type:"submit"});this.connection.sendIQ(t,function(t){if(!$(t).find('>query>x[xmlns="jabber:x:data"]>field[var="muc#roomconfig_whois"]').length){var n="non-anonymous rooms not supported";return d.a.callErrorHandler(new Error(n)),void m.error(n)}var r=Object(i.$iq)({to:e.roomjid,type:"set"}).c("query",{xmlns:"http://jabber.org/protocol/muc#owner"});r.c("x",{xmlns:"jabber:x:data",type:"submit"}),r.c("field",{var:"FORM_TYPE"}).c("value").t("http://jabber.org/protocol/muc#roomconfig").up().up(),r.c("field",{var:"muc#roomconfig_whois"}).c("value").t("anyone").up().up(),e.connection.sendIQ(r)},function(e){d.a.callErrorHandler(e),m.error("Error getting room configuration form: ",e)})}}},{key:"onConnStatusChanged",value:function(e){e===p.a.Status.CONNECTED&&this.sendPresence()}},{key:"onPresence",value:function(e){var t=e.getAttribute("from"),n={},r=e.getElementsByTagName("status")[0];r&&(n.status=r.textContent||"");var o=!1,a=!1,s=e.getElementsByTagNameNS("http://jabber.org/protocol/muc#user","x")[0],u=s&&s.getElementsByTagName("item")[0];n.affiliation=u&&u.getAttribute("affiliation"),n.role=u&&u.getAttribute("role");var d=u&&u.getAttribute("jid");n.jid=d,n.isFocus=d&&0===d.indexOf(this.moderator.getFocusUserJid()+"/"),n.isHiddenDomain=d&&d.indexOf("@")>0&&this.options.hiddenDomain===d.substring(d.indexOf("@")+1,d.indexOf("/")),this.eventEmitter.emit(c.a.PRESENCE_RECEIVED,{fromHiddenDomain:n.isHiddenDomain,presence:e});var l=e.querySelector("x");l&&l.remove();var h=[];v.packet2JSON(e,h),this.lastPresences[t]=h;for(var p=function(e){var t={},n=e.children.find(function(e){return"user"===e.tagName});if(n){t.user={};for(var r=function(e){var r=n.children.find(function(t){return t.tagName===e});r&&(t.user[e]=r.value)},i=0,o=["id","name","avatar"];i<o.length;i++){r(o[i])}}var a=e.children.find(function(e){return"group"===e.tagName});return a&&(t.group=a.value),t},f=0;f<h.length;f++){var g=h[f];switch(g.tagName){case"bot":var _=g.attributes;if(!_)break;var y=_.type;n.botType=y;break;case"nick":n.nick=g.value;break;case"userId":n.id=g.value;break;case"stats-id":n.statsID=g.value;break;case"identity":n.identity=p(g);break;case"stat":var S=g.attributes;if(!S)break;"version"===S.name&&(n.version=S.value)}}if(t===this.myroomjid){var E="owner"===n.affiliation?n.role:"none";if(this.role!==E&&(this.role=E,this.eventEmitter.emit(c.a.LOCAL_ROLE_CHANGED,this.role)),!this.joined){this.joined=!0;var b=this.connectionTimes["muc.joined"]=window.performance.now();m.log("(TIME) MUC joined:\t",b),this.password&&(this.locked=!0),this.presenceUpdateTime>=this.presenceSyncTime&&this.sendPresence(),this.eventEmitter.emit(c.a.MUC_JOINED),!this.options.disableDiscoInfo&&this.discoRoomInfo()}}else if(void 0===d)m.info("Ignoring member with undefined JID");else if(void 0===this.members[t])this.members[t]=n,m.log("entered",t,n),o=void 0!==n.status,a=void 0!==n.version,n.isFocus?this._initFocus(t,d):(this.eventEmitter.emit(c.a.MUC_MEMBER_JOINED,t,n.nick,n.role,n.isHiddenDomain,n.statsID,n.status,n.identity,n.botType,n.jid),o=!1);else{var C=this.members[t];C.role!==n.role&&(C.role=n.role,this.eventEmitter.emit(c.a.MUC_ROLE_CHANGED,t,n.role)),C.affiliation!==n.affiliation&&(C.affiliation=n.affiliation),C.botType!==n.botType&&(C.botType=n.botType,this.eventEmitter.emit(c.a.MUC_MEMBER_BOT_TYPE_CHANGED,t,n.botType)),n.isFocus&&(C.isFocus=!0,this._initFocus(t,d)),n.displayName&&(C.displayName=n.displayName),C.status!==n.status&&(o=!0,C.status=n.status),C.version!==n.version&&(a=!0,C.version=n.version)}for(var T=0;T<h.length;T++){var R=h[T];switch(R.tagName){case"nick":if(!n.isFocus){var A=this.xmpp.options.displayJids?i.Strophe.getResourceFromJid(t):n.nick;this.eventEmitter.emit(c.a.DISPLAY_NAME_CHANGED,t,A)}break;case"bridgeNotAvailable":n.isFocus&&!this.noBridgeAvailable&&(this.noBridgeAvailable=!0,this.eventEmitter.emit(c.a.BRIDGE_DOWN));break;case"conference-properties":if(n.isFocus){for(var k={},I=0;I<R.children.length;I++){var w=R.children[I].attributes;w&&w.key&&(k[w.key]=w.value)}this.eventEmitter.emit(c.a.CONFERENCE_PROPERTIES_CHANGED,k)}break;case"transcription-status":var P=R.attributes;if(!P)break;var O=P.status;O&&O!==this.transcriptionStatus&&(this.transcriptionStatus=O,this.eventEmitter.emit(c.a.TRANSCRIPTION_STATUS_CHANGED,O));break;case"call-control":var D=R.attributes;if(!D)break;this.phoneNumber=D.phone||null,this.phonePin=D.pin||null,this.eventEmitter.emit(c.a.PHONE_NUMBER_CHANGED);break;default:this.processNode(R,t)}}o&&this.eventEmitter.emit(c.a.PRESENCE_STATUS,t,n.status),a&&m.info("Received version for "+d+": "+n.version)}},{key:"_initFocus",value:function(e,t){var n=this;this.focusMucJid=e,m.info("Ignore focus: "+e+", real JID: "+t),this.xmpp.caps.getFeatures(t,15e3).then(function(e){n.focusFeatures=e,m.info("Jicofo supports restart by terminate: "+n.supportsRestartByTerminate())},function(e){m.error("Failed to discover Jicofo features",e&&e.message)})}},{key:"setParticipantPropertyListener",value:function(e){this.participantPropertyListener=e}},{key:"supportsRestartByTerminate",value:function(){return!!this.focusFeatures&&this.focusFeatures.has("https://jitsi.org/meet/jicofo/terminate-restart")}},{key:"processNode",value:function(e,t){try{var n=this.presHandlers[e.tagName];e.tagName.startsWith("jitsi_participant_")&&(n=[this.participantPropertyListener]),n&&n.forEach(function(n){n(e,i.Strophe.getResourceFromJid(t),t)})}catch(t){d.a.callErrorHandler(t),m.error("Error processing:"+e.tagName+" node.",t)}}},{key:"sendMessage",value:function(e,t,n){var r=Object(i.$msg)({to:this.roomjid,type:"groupchat"});"body"===t?r.c(t,e).up():r.c(t,{xmlns:"http://jitsi.org/jitmeet"},e).up(),n&&r.c("nick",{xmlns:"http://jabber.org/protocol/nick"}).t(n).up().up(),this.connection.send(r),this.eventEmitter.emit(c.a.SENDING_CHAT_MESSAGE,e)}},{key:"sendPrivateMessage",value:function(e,t,n,r){var o=Object(i.$msg)({to:this.roomjid+"/"+e,type:"chat"});"body"===n?o.c(n,t).up():o.c(n,{xmlns:"http://jitsi.org/jitmeet"},t).up(),r&&o.c("nick",{xmlns:"http://jabber.org/protocol/nick"}).t(r).up().up(),this.connection.send(o),this.eventEmitter.emit(c.a.SENDING_PRIVATE_CHAT_MESSAGE,t)}},{key:"setSubject",value:function(e){var t=Object(i.$msg)({to:this.roomjid,type:"groupchat"});t.c("subject",e),this.connection.send(t)}},{key:"onParticipantLeft",value:function(e,t){delete this.lastPresences[e],t||(this.eventEmitter.emit(c.a.MUC_MEMBER_LEFT,e),this.moderator.onMucMemberLeft(e))}},{key:"onPresenceUnavailable",value:function(e,t){var n=this;if($(e).find('>ignore[xmlns="http://jitsi.org/jitmeet/"]').length)return!0;var r=$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>destroy');if(r.length){var o,a=$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>destroy>reason');return a.length&&(o=a.text()),this.eventEmitter.emit(c.a.MUC_DESTROYED,o,r.attr("jid")),this.connection.emuc.doLeave(this.roomjid),!0}var s=$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>status[code="110"]').length,u=$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>status[code="307"]').length,d=Object.keys(this.members);if(u){var l,h=$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>item>actor');h.length&&(l=h.attr("nick")),this.eventEmitter.emit(c.a.KICKED,s,l,i.Strophe.getResourceFromJid(t))}s?(d.forEach(function(e){var t=n.members[e];delete n.members[e],n.onParticipantLeft(e,t.isFocus)}),this.connection.emuc.doLeave(this.roomjid),u||this.eventEmitter.emit(c.a.MUC_LEFT)):(delete this.members[t],this.onParticipantLeft(t,!1))}},{key:"onMessage",value:function(e,t){var n=$(e).find('>nick[xmlns="http://jabber.org/protocol/nick"]').text()||i.Strophe.getResourceFromJid(t),r=e.getAttribute("type");if("error"===r){var o=$(e).find(">error>text").text();return this.eventEmitter.emit(c.a.CHAT_ERROR_RECEIVED,o),!0}var a=$(e).find(">body").text(),s=$(e).find(">subject");if(s.length){var u=s.text();(u||""===u)&&(this.eventEmitter.emit(c.a.SUBJECT_CHANGED,u),m.log("Subject is changed to "+u))}var d,l=$(e).find(">delay").attr("stamp");if(!l&&(l=$(e).find('>[xmlns="jabber:x:delay"]').attr("stamp"))){var h=l.match(/(\d{4})(\d{2})(\d{2}T\d{2}:\d{2}:\d{2})/);l=h[1]+"-"+h[2]+"-"+h[3]+"Z"}if(t===this.roomjid)if($(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>status[code="104"]').length)this.discoRoomInfo();else if((d=$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>invite'))&&d.length){var p,f=$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>password');f&&f.length&&(p=f.text()),this.eventEmitter.emit(c.a.INVITE_MESSAGE_RECEIVED,t,d.attr("from"),a,p)}var v=$(e).find(">json-message").text();if(v){var g=this.xmpp.tryParseJSONAndVerify(v);if(g&&void 0===l)return void this.eventEmitter.emit(c.a.JSON_MESSAGE_RECEIVED,t,g)}a&&("chat"===r?this.eventEmitter.emit(c.a.PRIVATE_MESSAGE_RECEIVED,t,n,a,this.myroomjid,l):"groupchat"===r&&this.eventEmitter.emit(c.a.MESSAGE_RECEIVED,t,n,a,this.myroomjid,l))}},{key:"onPresenceError",value:function(e,t){if($(e).find('>error[type="auth"]>not-authorized[xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"]').length)m.log("on password required",t),this.eventEmitter.emit(c.a.PASSWORD_REQUIRED);else if($(e).find('>error[type="cancel"]>not-allowed[xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"]').length)i.Strophe.getDomainFromJid(e.getAttribute("to"))===this.xmpp.options.hosts.anonymousdomain?this.eventEmitter.emit(c.a.ROOM_JOIN_ERROR):(m.warn("onPresError ",e),this.eventEmitter.emit(c.a.ROOM_CONNECT_NOT_ALLOWED_ERROR));else if($(e).find(">error>service-unavailable").length)m.warn("Maximum users limit for the room has been reached",e),this.eventEmitter.emit(c.a.ROOM_MAX_USERS_ERROR);else if($(e).find('>error[type="auth"]>registration-required[xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"]').length){var n,r=$(e).find(">lobbyroom");r.length&&(n=r.text()),this.eventEmitter.emit(c.a.ROOM_CONNECT_MEMBERS_ONLY_ERROR,n)}else m.warn("onPresError ",e),this.eventEmitter.emit(c.a.ROOM_CONNECT_ERROR)}},{key:"setAffiliation",value:function(e,t){var n=Object(i.$iq)({to:this.roomjid,type:"set"}).c("query",{xmlns:"http://jabber.org/protocol/muc#admin"}).c("item",{affiliation:t,nick:i.Strophe.getResourceFromJid(e)}).c("reason").t("Your affiliation has been changed to '"+t+"'.").up().up().up();this.connection.sendIQ(n,function(n){return m.log("Set affiliation of participant with jid: ",e,"to",t,n)},function(e){return m.log("Set affiliation of participant error: ",e)})}},{key:"kick",value:function(e){var t=Object(i.$iq)({to:this.roomjid,type:"set"}).c("query",{xmlns:"http://jabber.org/protocol/muc#admin"}).c("item",{nick:i.Strophe.getResourceFromJid(e),role:"none"}).c("reason").t("You have been kicked.").up().up().up();this.connection.sendIQ(t,function(t){return m.log("Kick participant with jid: ",e,t)},function(e){return m.log("Kick participant error: ",e)})}},{key:"lockRoom",value:function(e,t,n,r){var o=this;this.connection.sendIQ(Object(i.$iq)({to:this.roomjid,type:"get"}).c("query",{xmlns:"http://jabber.org/protocol/muc#owner"}),function(a){if($(a).find('>query>x[xmlns="jabber:x:data"]>field[var="muc#roomconfig_roomsecret"]').length){var s=Object(i.$iq)({to:o.roomjid,type:"set"}).c("query",{xmlns:"http://jabber.org/protocol/muc#owner"});s.c("x",{xmlns:"jabber:x:data",type:"submit"}),s.c("field",{var:"FORM_TYPE"}).c("value").t("http://jabber.org/protocol/muc#roomconfig").up().up(),s.c("field",{var:"muc#roomconfig_roomsecret"}).c("value").t(e).up().up(),s.c("field",{var:"muc#roomconfig_passwordprotectedroom"}).c("value").t(null===e||0===e.length?"0":"1").up().up(),o.membersOnlyEnabled&&s.c("field",{var:"muc#roomconfig_membersonly"}).c("value").t("true").up().up(),s.c("field",{var:"muc#roomconfig_whois"}).c("value").t("anyone").up().up(),o.connection.sendIQ(s,t,n)}else r()},n)}},{key:"setMembersOnly",value:function(e,t,n){var r=this;e&&Object.values(this.members).filter(function(e){return!e.isFocus}).length&&Object.values(this.members).forEach(function(e){e.jid&&!_.includes(e.affiliation)&&r.xmpp.connection.sendIQ(Object(i.$iq)({to:r.roomjid,type:"set"}).c("query",{xmlns:"http://jabber.org/protocol/muc#admin"}).c("item",{affiliation:"member",jid:e.jid}).up().up())});var o=n||function(){};this.xmpp.connection.sendIQ(Object(i.$iq)({to:this.roomjid,type:"get"}).c("query",{xmlns:"http://jabber.org/protocol/muc#owner"}),function(n){if($(n).find('>query>x[xmlns="jabber:x:data"]>field[var="muc#roomconfig_membersonly"]').length){var a=Object(i.$iq)({to:r.roomjid,type:"set"}).c("query",{xmlns:"http://jabber.org/protocol/muc#owner"});a.c("x",{xmlns:"jabber:x:data",type:"submit"}),a.c("field",{var:"FORM_TYPE"}).c("value").t("http://jabber.org/protocol/muc#roomconfig").up().up(),a.c("field",{var:"muc#roomconfig_membersonly"}).c("value").t(e?"true":"false").up().up(),r.locked&&a.c("field",{var:"muc#roomconfig_passwordprotectedroom"}).c("value").t("1").up().up(),r.xmpp.connection.sendIQ(a,t,o)}else o(new Error("Setting members only room not supported!"))},o)}},{key:"addToPresence",value:function(e,t){t.tagName=e,this.removeFromPresence(e),this.presMap.nodes.push(t),this.presenceUpdateTime=Date.now()}},{key:"getFromPresence",value:function(e){return this.presMap.nodes.find(function(t){return e===t.tagName})}},{key:"removeFromPresence",value:function(e){var t=this.presMap.nodes.filter(function(t){return e!==t.tagName});this.presMap.nodes=t,this.presenceUpdateTime=Date.now()}},{key:"addPresenceListener",value:function(e,t){if("function"!=typeof t)throw new Error('"handler" is not a function');var n=this.presHandlers[e];n||(this.presHandlers[e]=n=[]),-1===n.indexOf(t)?n.push(t):m.warn("Trying to add the same handler more than once for: "+e)}},{key:"removePresenceListener",value:function(e,t){var n=this.presHandlers[e],r=n?n.indexOf(t):-1;-1!==r?n.splice(r,1):m.warn("Handler for: "+e+" was not registered")}},{key:"isFocus",value:function(e){var t=this.members[e];return t?t.isFocus:null}},{key:"isModerator",value:function(){return"moderator"===this.role}},{key:"getMemberRole",value:function(e){return this.members[e]?this.members[e].role:null}},{key:"setVideoMute",value:function(e,t){this.sendVideoInfoPresence(e),t&&t(e)}},{key:"setAudioMute",value:function(e,t){return this.sendAudioInfoPresence(e,t)}},{key:"addAudioInfoToPresence",value:function(e){this.addToPresence("audiomuted",{attributes:{xmlns:"http://jitsi.org/jitmeet/audio"},value:e.toString()})}},{key:"sendAudioInfoPresence",value:function(e,t){this.addAudioInfoToPresence(e),this.sendPresence(),t&&t()}},{key:"addVideoInfoToPresence",value:function(e){this.addToPresence("videomuted",{attributes:{xmlns:"http://jitsi.org/jitmeet/video"},value:e.toString()})}},{key:"sendVideoInfoPresence",value:function(e){this.addVideoInfoToPresence(e),this.sendPresence()}},{key:"getMediaPresenceInfo",value:function(e,t){var n=this.lastPresences[this.roomjid+"/"+e];if(!n)return null;var r={muted:!1,videoType:void 0},i=null;if(t===a.a)i=g(n,"audiomuted");else{if(t!==a.c)return m.error("Unsupported media type: "+t),null;i=g(n,"videomuted");var o=g(n,"videoType");o.length>0&&(r.videoType=o[0].value)}return r.muted=i.length>0&&"true"===i[0].value,r}},{key:"isSIPCallingSupported",value:function(){return!!this.moderator&&this.moderator.isSipGatewayEnabled()}},{key:"dial",value:function(e){return this.connection.rayo.dial(e,"fromnumber",i.Strophe.getBareJidFromJid(this.myroomjid),this.password,this.focusMucJid)}},{key:"hangup",value:function(){return this.connection.rayo.hangup()}},{key:"getLobby",value:function(){return this.lobby}},{key:"getPhoneNumber",value:function(){return this.phoneNumber}},{key:"getPhonePin",value:function(){return this.phonePin}},{key:"getMeetingId",value:function(){return this.meetingId}},{key:"muteParticipant",value:function(e,t){m.info("set mute",t);var n=Object(i.$iq)({to:this.focusMucJid,type:"set"}).c("mute",{xmlns:"http://jitsi.org/jitmeet/audio",jid:e}).t(t.toString()).up();this.connection.sendIQ(n,function(e){return m.log("set mute",e)},function(e){return m.log("set mute error",e)})}},{key:"onMute",value:function(e){if(e.getAttribute("from")===this.focusMucJid){var t=$(e).find("mute");t.length&&"true"===t.text()?this.eventEmitter.emit(c.a.AUDIO_MUTED_BY_FOCUS,t.attr("actor")):m.warn("Ignoring a mute request which does not explicitly specify a positive mute command.")}else m.warn("Ignored mute from non focus peer")}},{key:"clean",value:function(){this._removeConnListeners.forEach(function(e){return e()}),this._removeConnListeners=[],this.joined=!1}},{key:"leave",value:function(){var e=this;return new Promise(function(t,n){var r=setTimeout(function(){return o(!0)},5e3),i=e.eventEmitter;function o(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i.removeListener(c.a.MUC_LEFT,o),clearTimeout(r),e?n(new Error("The timeout for the confirmation about leaving the room expired.")):t()}e.clean(),i.on(c.a.MUC_LEFT,o),e.doLeave()})}}]),n})(l.a)}).call(this,"modules/xmpp/ChatRoom.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c});var r=n(4),i=n(2),o=n(0),a=n.n(o),s=Object(r.getLogger)(e),c=(function(){function e(t){var n=this;_classCallCheck(this,e),this.xmpp=t.xmpp,this.mainRoom=t;var r=this._maybeJoinLobbyRoom.bind(this);this.mainRoom.addEventListener(a.a.LOCAL_ROLE_CHANGED,r),this.mainRoom.addEventListener(a.a.MUC_MEMBERS_ONLY_CHANGED,r),this.mainRoom.addEventListener(a.a.ROOM_CONNECT_MEMBERS_ONLY_ERROR,function(e){n.lobbyRoomJid=e})}return _createClass(e,[{key:"isSupported",value:function(){return this.xmpp.lobbySupported}},{key:"enable",value:function(){var e=this;return this.isSupported()?new Promise(function(t,n){e.mainRoom.setMembersOnly(!0,t,n)}):Promise.reject(new Error("Lobby not supported!"))}},{key:"disable",value:function(){this.isSupported()&&this.mainRoom.isModerator()&&this.lobbyRoom&&this.mainRoom.membersOnlyEnabled&&this.mainRoom.setMembersOnly(!1)}},{key:"_leaveLobbyRoom",value:function(){var e=this;this.lobbyRoom&&this.lobbyRoom.leave().then(function(){e.lobbyRoom=void 0,s.info("Lobby room left!")}).catch(function(){})}},{key:"setLobbyRoomJid",value:function(e){this.lobbyRoomJid=e}},{key:"_maybeJoinLobbyRoom",value:function(){this.isSupported()&&this.mainRoom.joined&&this.mainRoom.isModerator()&&this.mainRoom.membersOnlyEnabled&&!this.lobbyRoom&&this.join().then(function(){return s.info("Joined lobby room")}).catch(function(e){return s.error("Failed joining lobby",e)})}},{key:"join",value:function(e,t){var n=this,r=this.mainRoom.joined&&this.mainRoom.isModerator();if(!this.lobbyRoomJid)return Promise.reject(new Error("Missing lobbyRoomJid, cannot join lobby room."));var o=i.Strophe.getNodeFromJid(this.lobbyRoomJid),c=i.Strophe.getDomainFromJid(this.lobbyRoomJid);return this.lobbyRoom=this.xmpp.createRoom(o,{customDomain:c,disableDiscoInfo:!0,disableFocus:!0,enableLobby:!1}),e&&(this.lobbyRoom.removeFromPresence("nick"),this.lobbyRoom.addToPresence("nick",{attributes:{xmlns:"http://jabber.org/protocol/nick"},value:e})),r?(this.lobbyRoom.addPresenceListener("email",function(e,t){n.mainRoom.eventEmitter.emit(a.a.MUC_LOBBY_MEMBER_UPDATED,t,{email:e.value})}),this.lobbyRoom.addEventListener(a.a.MUC_MEMBER_JOINED,function(e,t,r,o,s,c,u,d,l){Object.values(n.mainRoom.members).find(function(e){return e.jid===l})||n.mainRoom.eventEmitter.emit(a.a.MUC_LOBBY_MEMBER_JOINED,i.Strophe.getResourceFromJid(e),t,u?u.avatar:void 0)}),this.lobbyRoom.addEventListener(a.a.MUC_MEMBER_LEFT,function(e){n.mainRoom.eventEmitter.emit(a.a.MUC_LOBBY_MEMBER_LEFT,i.Strophe.getResourceFromJid(e))}),this.lobbyRoom.addEventListener(a.a.MUC_DESTROYED,function(){Object.keys(n.lobbyRoom.members).forEach(function(e){return n.mainRoom.eventEmitter.emit(a.a.MUC_LOBBY_MEMBER_LEFT,i.Strophe.getResourceFromJid(e))}),n.lobbyRoom.clean(),n.lobbyRoom=void 0,s.info("Lobby room left(destroyed)!")})):(this.lobbyRoom.addEventListener(a.a.KICKED,function(e){if(e)return n.mainRoom.eventEmitter.emit(a.a.MUC_DENIED_ACCESS),void n.lobbyRoom.clean()}),this.mainRoom.addEventListener(a.a.INVITE_MESSAGE_RECEIVED,function(e,t,r,i){s.debug("Received approval to join "+e+" "+t+" "+r),e===n.mainRoom.roomjid&&(n.mainRoom.join(i),n._leaveLobbyRoom())}),this.lobbyRoom.addEventListener(a.a.MUC_DESTROYED,function(e,t){t&&t===n.mainRoom.roomjid?n.mainRoom.join():(n.lobbyRoom.clean(),n.mainRoom.eventEmitter.emit(a.a.MUC_DESTROYED,e))}),this.mainRoom.addEventListener(a.a.MUC_JOINED,function(){n._leaveLobbyRoom()})),new Promise(function(e,i){n.lobbyRoom.addEventListener(a.a.MUC_JOINED,function(){e(),t&&!r&&(n.lobbyRoom.removeFromPresence("email"),n.lobbyRoom.addToPresence("email",{value:t}),n.lobbyRoom.sendPresence())}),n.lobbyRoom.addEventListener(a.a.ROOM_JOIN_ERROR,i),n.lobbyRoom.addEventListener(a.a.ROOM_CONNECT_NOT_ALLOWED_ERROR,i),n.lobbyRoom.addEventListener(a.a.ROOM_CONNECT_ERROR,i),n.lobbyRoom.join()})}},{key:"denyAccess",value:function(e){if(this.isSupported()&&this.mainRoom.isModerator()){var t=Object.keys(this.lobbyRoom.members).find(function(t){return i.Strophe.getResourceFromJid(t)===e});t?this.lobbyRoom.kick(t):s.error("Not found member for "+e+" in lobby room.")}}},{key:"approveAccess",value:function(e){if(this.isSupported()&&this.mainRoom.isModerator()){var t=Object.keys(this.lobbyRoom.members).find(function(t){return i.Strophe.getResourceFromJid(t)===e});if(t){var n=this.lobbyRoom.members[t].jid,r=Object(i.$msg)({to:this.mainRoom.roomjid}).c("x",{xmlns:"http://jabber.org/protocol/muc#user"}).c("invite",{to:n});this.xmpp.connection.sendIQ(r,function(){},function(e){s.error("Error sending invite for "+n,e)})}else s.error("Not found member for "+t+" in lobby room.")}}}]),e})()}).call(this,"modules/xmpp/Lobby.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return l});var r=n(4),i=n(2),o=n(31),a=n(71),s=n(0),c=n(11),u=Object(r.getLogger)(e);function d(e){var t=1;return function(n){if(!n){var r=Math.pow(2,t-1);return t+=1,r*e}t=1}}function l(e,t,n,r){function i(e){if(e.data&&e.data.sessionId){if(e.origin!==window.location.origin)return void u.warn("Ignoring sessionId from different origin: "+e.origin);o.a.sessionId=e.data.sessionId}}this.roomName=e,this.xmppService=t,this.getNextTimeout=d(1e3),this.getNextErrorTimeout=d(1e3),this.externalAuthEnabled=!1,this.options=r,this.sipGatewayEnabled=this.options.connection.hosts&&void 0!==this.options.connection.hosts.call_control,this.eventEmitter=n,this.connection=this.xmppService.connection,window.addEventListener?window.addEventListener("message",i,!1):window.attachEvent("onmessage",i)}l.prototype.isExternalAuthEnabled=function(){return this.externalAuthEnabled},l.prototype.isSipGatewayEnabled=function(){return this.sipGatewayEnabled},l.prototype.onMucMemberLeft=function(e){u.info("Someone left is it focus ? "+e),"focus"===i.Strophe.getResourceFromJid(e)&&(u.info("Focus has left the room - leaving conference"),this.eventEmitter.emit(s.FOCUS_LEFT))},l.prototype.setFocusUserJid=function(e){this.focusUserJid||(this.focusUserJid=e,u.info("Focus jid set to:  "+this.focusUserJid))},l.prototype.getFocusUserJid=function(){return this.focusUserJid},l.prototype.getFocusComponent=function(){var e=this.options.connection.hosts.focus;return e||(e="focus."+this.options.connection.hosts.domain),e},l.prototype.createConferenceIq=function(){var e,t=Object(i.$iq)({to:this.getFocusComponent(),type:"set"}),n=o.a.sessionId,r=o.a.machineId,a=this.options.conference;switch(u.info("Session ID: "+n+" machine UID: "+r),t.c("conference",{xmlns:"http://jitsi.org/protocol/focus",room:this.roomName,"machine-uid":r}),n&&t.attrs({"session-id":n}),void 0!==this.options.connection.enforcedBridge&&t.c("property",{name:"enforcedBridge",value:this.options.connection.enforcedBridge}).up(),void 0!==this.options.connection.hosts&&void 0!==this.options.connection.hosts.call_control&&t.c("property",{name:"call_control",value:this.options.connection.hosts.call_control}).up(),void 0!==a.channelLastN&&t.c("property",{name:"channelLastN",value:a.channelLastN}).up(),t.c("property",{name:"disableRtx",value:Boolean(a.disableRtx)}).up(),void 0!==a.enableTcc&&t.c("property",{name:"enableTcc",value:Boolean(a.enableTcc)}).up(),void 0!==a.enableRemb&&t.c("property",{name:"enableRemb",value:Boolean(a.enableRemb)}).up(),!0===a.enableOpusRed&&t.c("property",{name:"enableOpusRed",value:!0}).up(),void 0!==a.minParticipants&&t.c("property",{name:"minParticipants",value:a.minParticipants}).up(),t.c("property",{name:"enableLipSync",value:!0===this.options.connection.enableLipSync}).up(),void 0!==a.audioPacketDelay&&t.c("property",{name:"audioPacketDelay",value:a.audioPacketDelay}).up(),a.startBitrate&&t.c("property",{name:"startBitrate",value:a.startBitrate}).up(),a.minBitrate&&t.c("property",{name:"minBitrate",value:a.minBitrate}).up(),a.testing&&a.testing.octo&&"number"==typeof a.testing.octo.probability&&Math.random()<a.testing.octo.probability&&t.c("property",{name:"octo",value:!0}).up(),this.options.conference.openBridgeChannel){case"datachannel":case!0:case void 0:e=!0;break;case"websocket":e=!1}return t.c("property",{name:"openSctp",value:e}).up(),a.opusMaxAverageBitrate&&t.c("property",{name:"opusMaxAverageBitrate",value:a.opusMaxAverageBitrate}).up(),void 0!==this.options.conference.startAudioMuted&&t.c("property",{name:"startAudioMuted",value:this.options.conference.startAudioMuted}).up(),void 0!==this.options.conference.startVideoMuted&&t.c("property",{name:"startVideoMuted",value:this.options.conference.startVideoMuted}).up(),void 0!==this.options.conference.stereo&&t.c("property",{name:"stereo",value:this.options.conference.stereo}).up(),void 0!==this.options.conference.useRoomAsSharedDocumentName&&t.c("property",{name:"useRoomAsSharedDocumentName",value:this.options.conference.useRoomAsSharedDocumentName}).up(),t.up(),t},l.prototype.parseSessionId=function(e){var t=$(e).find("conference").attr("session-id");t&&(u.info("Received sessionId:  "+t),o.a.sessionId=t)},l.prototype.parseConfigOptions=function(e){this.setFocusUserJid($(e).find("conference").attr("focusjid"));var t=$(e).find(">conference>property[name='authentication'][value='true']").length>0;u.info("Authentication enabled: "+t),this.externalAuthEnabled=$(e).find(">conference>property[name='externalAuth'][value='true']").length>0,u.info("External authentication enabled: "+this.externalAuthEnabled),this.externalAuthEnabled||this.parseSessionId(e);var n=$(e).find(">conference").attr("identity");this.eventEmitter.emit(a.IDENTITY_UPDATED,t,n),$(e).find(">conference>property[name='sipGatewayEnabled'][value='true']").length&&(this.sipGatewayEnabled=!0),u.info("Sip gateway enabled:  "+this.sipGatewayEnabled)},l.prototype.allocateConferenceFocus=function(){var e=this;return new Promise(function(t){e.setFocusUserJid(e.options.connection.focusUserJid),e.connection.sendIQ(e.createConferenceIq(),function(n){return e._allocateConferenceFocusSuccess(n,t)},function(n){return e._allocateConferenceFocusError(n,t)}),e.connection.flush()})},l.prototype._allocateConferenceFocusError=function(e,t){var n=this,r=$(e).find(">error>session-invalid").length||$(e).find(">error>not-acceptable").length;if(r&&(u.info("Session expired! - removing"),o.a.sessionId=void 0),$(e).find(">error>graceful-shutdown").length)this.eventEmitter.emit(s.GRACEFUL_SHUTDOWN);else{var a=$(e).find(">error>reservation-error");if(a.length){var d,l=a.attr("error-code"),h=$(e).find(">error>text");return h&&(d=h.text()),void this.eventEmitter.emit(s.RESERVATION_ERROR,l,d)}if($(e).find(">error>not-authorized").length)return u.warn("Unauthorized to start the conference",e),i.Strophe.getDomainFromJid(e.getAttribute("to"))!==this.options.connection.hosts.anonymousdomain&&(this.externalAuthEnabled=!0),void this.eventEmitter.emit(s.AUTHENTICATION_REQUIRED);var p=this.getNextErrorTimeout(),f="Focus error, retry after "+p;c.callErrorHandler(new Error(f)),u.error(f,e);var m=this.getFocusComponent(),v=p/1e3;r||this.eventEmitter.emit(s.FOCUS_DISCONNECTED,m,v),this.getNextTimeout(!0),window.setTimeout(function(){return n.allocateConferenceFocus().then(t)},p)}},l.prototype._allocateConferenceFocusSuccess=function(e,t){var n=this;if(this.parseConfigOptions(e),this.getNextErrorTimeout(!0),"true"===$(e).find("conference").attr("ready"))this.getNextTimeout(!0),t();else{var r=this.getNextTimeout();u.info("Waiting for the focus... "+r),window.setTimeout(function(){return n.allocateConferenceFocus().then(t)},r)}},l.prototype.authenticate=function(){var e=this;return new Promise(function(t,n){e.connection.sendIQ(e.createConferenceIq(),function(n){e.parseSessionId(n),t()},function(e){return n({error:$(e).find("iq>error :first").prop("tagName"),message:$(e).find("iq>error>text").text()})})})},l.prototype.getLoginUrl=function(e,t){this._getLoginUrl(!1,e,t)},l.prototype._getLoginUrl=function(e,t,n){var r=Object(i.$iq)({to:this.getFocusComponent(),type:"get"}),a={xmlns:"http://jitsi.org/protocol/focus",room:this.roomName,"machine-uid":o.a.machineId},s="auth url";function d(e,t){c.callErrorHandler(new Error(e)),u.error(e,t),n(t)}e&&(a.popup=!0,s="POPUP "+s),r.c("login-url",a),this.connection.sendIQ(r,function(e){var n=$(e).find("login-url").attr("url");(n=decodeURIComponent(n))?(u.info("Got "+s+": "+n),t(n)):d("Failed to get "+s+" from the focus",e)},d.bind(void 0,"Get "+s+" error"))},l.prototype.getPopupLoginUrl=function(e,t){this._getLoginUrl(!0,e,t)},l.prototype.logout=function(e){var t=Object(i.$iq)({to:this.getFocusComponent(),type:"set"}),n=o.a.sessionId;n?(t.c("logout",{xmlns:"http://jitsi.org/protocol/focus","session-id":n}),this.connection.sendIQ(t,function(t){var n=$(t).find("logout").attr("logout-url");n&&(n=decodeURIComponent(n)),u.info("Log out OK, url: "+n,t),o.a.sessionId=void 0,e(n)},function(e){c.callErrorHandler(new Error("Logout error")),u.error("Logout error",e)})):e()}}).call(this,"modules/xmpp/moderator.js")},function(e,t,n){var r=n(37),i=["Aaliyah","Aaron","Abagail","Abbey","Abbie","Abbigail","Abby","Abdiel","Abdul","Abdullah","Abe","Abel","Abelardo","Abigail","Abigale","Abigayle","Abner","Abraham","Ada","Adah","Adalberto","Adaline","Adam","Adan","Addie","Addison","Adela","Adelbert","Adele","Adelia","Adeline","Adell","Adella","Adelle","Aditya","Adolf","Adolfo","Adolph","Adolphus","Adonis","Adrain","Adrian","Adriana","Adrianna","Adriel","Adrien","Adrienne","Afton","Aglae","Agnes","Agustin","Agustina","Ahmad","Ahmed","Aida","Aidan","Aiden","Aileen","Aisha","Aiyana","Akeem","Al","Alaina","Alan","Alana","Alanis","Alanna","Alayna","Alba","Albert","Alberta","Albertha","Alberto","Albin","Albina","Alda","Alden","Alec","Aleen","Alejandra","Alejandrin","Alek","Alena","Alene","Alessandra","Alessandro","Alessia","Aletha","Alex","Alexa","Alexander","Alexandra","Alexandre","Alexandrea","Alexandria","Alexandrine","Alexandro","Alexane","Alexanne","Alexie","Alexis","Alexys","Alexzander","Alf","Alfonso","Alfonzo","Alford","Alfred","Alfreda","Alfredo","Ali","Alia","Alice","Alicia","Alisa","Alisha","Alison","Alivia","Aliya","Aliyah","Aliza","Alize","Allan","Allen","Allene","Allie","Allison","Ally","Alphonso","Alta","Althea","Alva","Alvah","Alvena","Alvera","Alverta","Alvina","Alvis","Alyce","Alycia","Alysa","Alysha","Alyson","Alysson","Amalia","Amanda","Amani","Amara","Amari","Amaya","Amber","Ambrose","Amelia","Amelie","Amely","America","Americo","Amie","Amina","Amir","Amira","Amiya","Amos","Amparo","Amy","Amya","Ana","Anabel","Anabelle","Anahi","Anais","Anastacio","Anastasia","Anderson","Andre","Andreane","Andreanne","Andres","Andrew","Andy","Angel","Angela","Angelica","Angelina","Angeline","Angelita","Angelo","Angie","Angus","Anibal","Anika","Anissa","Anita","Aniya","Aniyah","Anjali","Anna","Annabel","Annabell","Annabelle","Annalise","Annamae","Annamarie","Anne","Annetta","Annette","Annie","Ansel","Ansley","Anthony","Antoinette","Antone","Antonetta","Antonette","Antonia","Antonietta","Antonina","Antonio","Antwan","Antwon","Anya","April","Ara","Araceli","Aracely","Arch","Archibald","Ardella","Arden","Ardith","Arely","Ari","Ariane","Arianna","Aric","Ariel","Arielle","Arjun","Arlene","Arlie","Arlo","Armand","Armando","Armani","Arnaldo","Arne","Arno","Arnold","Arnoldo","Arnulfo","Aron","Art","Arthur","Arturo","Arvel","Arvid","Arvilla","Aryanna","Asa","Asha","Ashlee","Ashleigh","Ashley","Ashly","Ashlynn","Ashton","Ashtyn","Asia","Assunta","Astrid","Athena","Aubree","Aubrey","Audie","Audra","Audreanne","Audrey","August","Augusta","Augustine","Augustus","Aurelia","Aurelie","Aurelio","Aurore","Austen","Austin","Austyn","Autumn","Ava","Avery","Avis","Axel","Ayana","Ayden","Ayla","Aylin","Baby","Bailee","Bailey","Barbara","Barney","Baron","Barrett","Barry","Bart","Bartholome","Barton","Baylee","Beatrice","Beau","Beaulah","Bell","Bella","Belle","Ben","Benedict","Benjamin","Bennett","Bennie","Benny","Benton","Berenice","Bernadette","Bernadine","Bernard","Bernardo","Berneice","Bernhard","Bernice","Bernie","Berniece","Bernita","Berry","Bert","Berta","Bertha","Bertram","Bertrand","Beryl","Bessie","Beth","Bethany","Bethel","Betsy","Bette","Bettie","Betty","Bettye","Beulah","Beverly","Bianka","Bill","Billie","Billy","Birdie","Blair","Blaise","Blake","Blanca","Blanche","Blaze","Bo","Bobbie","Bobby","Bonita","Bonnie","Boris","Boyd","Brad","Braden","Bradford","Bradley","Bradly","Brady","Braeden","Brain","Brandi","Brando","Brandon","Brandt","Brandy","Brandyn","Brannon","Branson","Brant","Braulio","Braxton","Brayan","Breana","Breanna","Breanne","Brenda","Brendan","Brenden","Brendon","Brenna","Brennan","Brennon","Brent","Bret","Brett","Bria","Brian","Briana","Brianne","Brice","Bridget","Bridgette","Bridie","Brielle","Brigitte","Brionna","Brisa","Britney","Brittany","Brock","Broderick","Brody","Brook","Brooke","Brooklyn","Brooks","Brown","Bruce","Bryana","Bryce","Brycen","Bryon","Buck","Bud","Buddy","Buford","Bulah","Burdette","Burley","Burnice","Buster","Cade","Caden","Caesar","Caitlyn","Cale","Caleb","Caleigh","Cali","Calista","Callie","Camden","Cameron","Camila","Camilla","Camille","Camren","Camron","Camryn","Camylle","Candace","Candelario","Candice","Candida","Candido","Cara","Carey","Carissa","Carlee","Carleton","Carley","Carli","Carlie","Carlo","Carlos","Carlotta","Carmel","Carmela","Carmella","Carmelo","Carmen","Carmine","Carol","Carolanne","Carole","Carolina","Caroline","Carolyn","Carolyne","Carrie","Carroll","Carson","Carter","Cary","Casandra","Casey","Casimer","Casimir","Casper","Cassandra","Cassandre","Cassidy","Cassie","Catalina","Caterina","Catharine","Catherine","Cathrine","Cathryn","Cathy","Cayla","Ceasar","Cecelia","Cecil","Cecile","Cecilia","Cedrick","Celestine","Celestino","Celia","Celine","Cesar","Chad","Chadd","Chadrick","Chaim","Chance","Chandler","Chanel","Chanelle","Charity","Charlene","Charles","Charley","Charlie","Charlotte","Chase","Chasity","Chauncey","Chaya","Chaz","Chelsea","Chelsey","Chelsie","Chesley","Chester","Chet","Cheyanne","Cheyenne","Chloe","Chris","Christ","Christa","Christelle","Christian","Christiana","Christina","Christine","Christop","Christophe","Christopher","Christy","Chyna","Ciara","Cicero","Cielo","Cierra","Cindy","Citlalli","Clair","Claire","Clara","Clarabelle","Clare","Clarissa","Clark","Claud","Claude","Claudia","Claudie","Claudine","Clay","Clemens","Clement","Clementina","Clementine","Clemmie","Cleo","Cleora","Cleta","Cletus","Cleve","Cleveland","Clifford","Clifton","Clint","Clinton","Clotilde","Clovis","Cloyd","Clyde","Coby","Cody","Colby","Cole","Coleman","Colin","Colleen","Collin","Colt","Colten","Colton","Columbus","Concepcion","Conner","Connie","Connor","Conor","Conrad","Constance","Constantin","Consuelo","Cooper","Cora","Coralie","Corbin","Cordelia","Cordell","Cordia","Cordie","Corene","Corine","Cornelius","Cornell","Corrine","Cortez","Cortney","Cory","Coty","Courtney","Coy","Craig","Crawford","Creola","Cristal","Cristian","Cristina","Cristobal","Cristopher","Cruz","Crystal","Crystel","Cullen","Curt","Curtis","Cydney","Cynthia","Cyril","Cyrus","Dagmar","Dahlia","Daija","Daisha","Daisy","Dakota","Dale","Dallas","Dallin","Dalton","Damaris","Dameon","Damian","Damien","Damion","Damon","Dan","Dana","Dandre","Dane","D'angelo","Dangelo","Danial","Daniela","Daniella","Danielle","Danika","Dannie","Danny","Dante","Danyka","Daphne","Daphnee","Daphney","Darby","Daren","Darian","Dariana","Darien","Dario","Darion","Darius","Darlene","Daron","Darrel","Darrell","Darren","Darrick","Darrin","Darrion","Darron","Darryl","Darwin","Daryl","Dashawn","Dasia","Dave","David","Davin","Davion","Davon","Davonte","Dawn","Dawson","Dax","Dayana","Dayna","Dayne","Dayton","Dean","Deangelo","Deanna","Deborah","Declan","Dedric","Dedrick","Dee","Deion","Deja","Dejah","Dejon","Dejuan","Delaney","Delbert","Delfina","Delia","Delilah","Dell","Della","Delmer","Delores","Delpha","Delphia","Delphine","Delta","Demarco","Demarcus","Demario","Demetris","Demetrius","Demond","Dena","Denis","Dennis","Deon","Deondre","Deontae","Deonte","Dereck","Derek","Derick","Deron","Derrick","Deshaun","Deshawn","Desiree","Desmond","Dessie","Destany","Destin","Destinee","Destiney","Destini","Destiny","Devan","Devante","Deven","Devin","Devon","Devonte","Devyn","Dewayne","Dewitt","Dexter","Diamond","Diana","Dianna","Diego","Dillan","Dillon","Dimitri","Dina","Dino","Dion","Dixie","Dock","Dolly","Dolores","Domenic","Domenica","Domenick","Domenico","Domingo","Dominic","Dominique","Don","Donald","Donato","Donavon","Donna","Donnell","Donnie","Donny","Dora","Dorcas","Dorian","Doris","Dorothea","Dorothy","Dorris","Dortha","Dorthy","Doug","Douglas","Dovie","Doyle","Drake","Drew","Duane","Dudley","Dulce","Duncan","Durward","Dustin","Dusty","Dwight","Dylan","Earl","Earlene","Earline","Earnest","Earnestine","Easter","Easton","Ebba","Ebony","Ed","Eda","Edd","Eddie","Eden","Edgar","Edgardo","Edison","Edmond","Edmund","Edna","Eduardo","Edward","Edwardo","Edwin","Edwina","Edyth","Edythe","Effie","Efrain","Efren","Eileen","Einar","Eino","Eladio","Elaina","Elbert","Elda","Eldon","Eldora","Eldred","Eldridge","Eleanora","Eleanore","Eleazar","Electa","Elena","Elenor","Elenora","Eleonore","Elfrieda","Eli","Elian","Eliane","Elias","Eliezer","Elijah","Elinor","Elinore","Elisa","Elisabeth","Elise","Eliseo","Elisha","Elissa","Eliza","Elizabeth","Ella","Ellen","Ellie","Elliot","Elliott","Ellis","Ellsworth","Elmer","Elmira","Elmo","Elmore","Elna","Elnora","Elody","Eloisa","Eloise","Elouise","Eloy","Elroy","Elsa","Else","Elsie","Elta","Elton","Elva","Elvera","Elvie","Elvis","Elwin","Elwyn","Elyse","Elyssa","Elza","Emanuel","Emelia","Emelie","Emely","Emerald","Emerson","Emery","Emie","Emil","Emile","Emilia","Emiliano","Emilie","Emilio","Emily","Emma","Emmalee","Emmanuel","Emmanuelle","Emmet","Emmett","Emmie","Emmitt","Emmy","Emory","Ena","Enid","Enoch","Enola","Enos","Enrico","Enrique","Ephraim","Era","Eriberto","Eric","Erica","Erich","Erick","Ericka","Erik","Erika","Erin","Erling","Erna","Ernest","Ernestina","Ernestine","Ernesto","Ernie","Ervin","Erwin","Eryn","Esmeralda","Esperanza","Esta","Esteban","Estefania","Estel","Estell","Estella","Estelle","Estevan","Esther","Estrella","Etha","Ethan","Ethel","Ethelyn","Ethyl","Ettie","Eudora","Eugene","Eugenia","Eula","Eulah","Eulalia","Euna","Eunice","Eusebio","Eva","Evalyn","Evan","Evangeline","Evans","Eve","Eveline","Evelyn","Everardo","Everett","Everette","Evert","Evie","Ewald","Ewell","Ezekiel","Ezequiel","Ezra","Fabian","Fabiola","Fae","Fannie","Fanny","Fatima","Faustino","Fausto","Favian","Fay","Faye","Federico","Felicia","Felicita","Felicity","Felipa","Felipe","Felix","Felton","Fermin","Fern","Fernando","Ferne","Fidel","Filiberto","Filomena","Finn","Fiona","Flavie","Flavio","Fleta","Fletcher","Flo","Florence","Florencio","Florian","Florida","Florine","Flossie","Floy","Floyd","Ford","Forest","Forrest","Foster","Frances","Francesca","Francesco","Francis","Francisca","Francisco","Franco","Frank","Frankie","Franz","Fred","Freda","Freddie","Freddy","Frederic","Frederick","Frederik","Frederique","Fredrick","Fredy","Freeda","Freeman","Freida","Frida","Frieda","Friedrich","Fritz","Furman","Gabe","Gabriel","Gabriella","Gabrielle","Gaetano","Gage","Gail","Gardner","Garett","Garfield","Garland","Garnet","Garnett","Garret","Garrett","Garrick","Garrison","Garry","Garth","Gaston","Gavin","Gay","Gayle","Gaylord","Gene","General","Genesis","Genevieve","Gennaro","Genoveva","Geo","Geoffrey","George","Georgette","Georgiana","Georgianna","Geovanni","Geovanny","Geovany","Gerald","Geraldine","Gerard","Gerardo","Gerda","Gerhard","Germaine","German","Gerry","Gerson","Gertrude","Gia","Gianni","Gideon","Gilbert","Gilberto","Gilda","Giles","Gillian","Gina","Gino","Giovani","Giovanna","Giovanni","Giovanny","Gisselle","Giuseppe","Gladyce","Gladys","Glen","Glenda","Glenna","Glennie","Gloria","Godfrey","Golda","Golden","Gonzalo","Gordon","Grace","Gracie","Graciela","Grady","Graham","Grant","Granville","Grayce","Grayson","Green","Greg","Gregg","Gregoria","Gregorio","Gregory","Greta","Gretchen","Greyson","Griffin","Grover","Guadalupe","Gudrun","Guido","Guillermo","Guiseppe","Gunnar","Gunner","Gus","Gussie","Gust","Gustave","Guy","Gwen","Gwendolyn","Hadley","Hailee","Hailey","Hailie","Hal","Haleigh","Haley","Halie","Halle","Hallie","Hank","Hanna","Hannah","Hans","Hardy","Harley","Harmon","Harmony","Harold","Harrison","Harry","Harvey","Haskell","Hassan","Hassie","Hattie","Haven","Hayden","Haylee","Hayley","Haylie","Hazel","Hazle","Heath","Heather","Heaven","Heber","Hector","Heidi","Helen","Helena","Helene","Helga","Hellen","Helmer","Heloise","Henderson","Henri","Henriette","Henry","Herbert","Herman","Hermann","Hermina","Herminia","Herminio","Hershel","Herta","Hertha","Hester","Hettie","Hilario","Hilbert","Hilda","Hildegard","Hillard","Hillary","Hilma","Hilton","Hipolito","Hiram","Hobart","Holden","Hollie","Hollis","Holly","Hope","Horace","Horacio","Hortense","Hosea","Houston","Howard","Howell","Hoyt","Hubert","Hudson","Hugh","Hulda","Humberto","Hunter","Hyman","Ian","Ibrahim","Icie","Ida","Idell","Idella","Ignacio","Ignatius","Ike","Ila","Ilene","Iliana","Ima","Imani","Imelda","Immanuel","Imogene","Ines","Irma","Irving","Irwin","Isaac","Isabel","Isabell","Isabella","Isabelle","Isac","Isadore","Isai","Isaiah","Isaias","Isidro","Ismael","Isobel","Isom","Israel","Issac","Itzel","Iva","Ivah","Ivory","Ivy","Izabella","Izaiah","Jabari","Jace","Jacey","Jacinthe","Jacinto","Jack","Jackeline","Jackie","Jacklyn","Jackson","Jacky","Jaclyn","Jacquelyn","Jacques","Jacynthe","Jada","Jade","Jaden","Jadon","Jadyn","Jaeden","Jaida","Jaiden","Jailyn","Jaime","Jairo","Jakayla","Jake","Jakob","Jaleel","Jalen","Jalon","Jalyn","Jamaal","Jamal","Jamar","Jamarcus","Jamel","Jameson","Jamey","Jamie","Jamil","Jamir","Jamison","Jammie","Jan","Jana","Janae","Jane","Janelle","Janessa","Janet","Janice","Janick","Janie","Janis","Janiya","Jannie","Jany","Jaquan","Jaquelin","Jaqueline","Jared","Jaren","Jarod","Jaron","Jarred","Jarrell","Jarret","Jarrett","Jarrod","Jarvis","Jasen","Jasmin","Jason","Jasper","Jaunita","Javier","Javon","Javonte","Jay","Jayce","Jaycee","Jayda","Jayde","Jayden","Jaydon","Jaylan","Jaylen","Jaylin","Jaylon","Jayme","Jayne","Jayson","Jazlyn","Jazmin","Jazmyn","Jazmyne","Jean","Jeanette","Jeanie","Jeanne","Jed","Jedediah","Jedidiah","Jeff","Jefferey","Jeffery","Jeffrey","Jeffry","Jena","Jenifer","Jennie","Jennifer","Jennings","Jennyfer","Jensen","Jerad","Jerald","Jeramie","Jeramy","Jerel","Jeremie","Jeremy","Jermain","Jermaine","Jermey","Jerod","Jerome","Jeromy","Jerrell","Jerrod","Jerrold","Jerry","Jess","Jesse","Jessica","Jessie","Jessika","Jessy","Jessyca","Jesus","Jett","Jettie","Jevon","Jewel","Jewell","Jillian","Jimmie","Jimmy","Jo","Joan","Joana","Joanie","Joanne","Joannie","Joanny","Joany","Joaquin","Jocelyn","Jodie","Jody","Joe","Joel","Joelle","Joesph","Joey","Johan","Johann","Johanna","Johathan","John","Johnathan","Johnathon","Johnnie","Johnny","Johnpaul","Johnson","Jolie","Jon","Jonas","Jonatan","Jonathan","Jonathon","Jordan","Jordane","Jordi","Jordon","Jordy","Jordyn","Jorge","Jose","Josefa","Josefina","Joseph","Josephine","Josh","Joshua","Joshuah","Josiah","Josiane","Josianne","Josie","Josue","Jovan","Jovani","Jovanny","Jovany","Joy","Joyce","Juana","Juanita","Judah","Judd","Jude","Judge","Judson","Judy","Jules","Julia","Julian","Juliana","Julianne","Julie","Julien","Juliet","Julio","Julius","June","Junior","Junius","Justen","Justice","Justina","Justine","Juston","Justus","Justyn","Juvenal","Juwan","Kacey","Kaci","Kacie","Kade","Kaden","Kadin","Kaela","Kaelyn","Kaia","Kailee","Kailey","Kailyn","Kaitlin","Kaitlyn","Kale","Kaleb","Kaleigh","Kaley","Kali","Kallie","Kameron","Kamille","Kamren","Kamron","Kamryn","Kane","Kara","Kareem","Karelle","Karen","Kari","Kariane","Karianne","Karina","Karine","Karl","Karlee","Karley","Karli","Karlie","Karolann","Karson","Kasandra","Kasey","Kassandra","Katarina","Katelin","Katelyn","Katelynn","Katharina","Katherine","Katheryn","Kathleen","Kathlyn","Kathryn","Kathryne","Katlyn","Katlynn","Katrina","Katrine","Kattie","Kavon","Kay","Kaya","Kaycee","Kayden","Kayla","Kaylah","Kaylee","Kayleigh","Kayley","Kayli","Kaylie","Kaylin","Keagan","Keanu","Keara","Keaton","Keegan","Keeley","Keely","Keenan","Keira","Keith","Kellen","Kelley","Kelli","Kellie","Kelly","Kelsi","Kelsie","Kelton","Kelvin","Ken","Kendall","Kendra","Kendrick","Kenna","Kennedi","Kennedy","Kenneth","Kennith","Kenny","Kenton","Kenya","Kenyatta","Kenyon","Keon","Keshaun","Keshawn","Keven","Kevin","Kevon","Keyon","Keyshawn","Khalid","Khalil","Kian","Kiana","Kianna","Kiara","Kiarra","Kiel","Kiera","Kieran","Kiley","Kim","Kimberly","King","Kip","Kira","Kirk","Kirsten","Kirstin","Kitty","Kobe","Koby","Kody","Kolby","Kole","Korbin","Korey","Kory","Kraig","Kris","Krista","Kristian","Kristin","Kristina","Kristofer","Kristoffer","Kristopher","Kristy","Krystal","Krystel","Krystina","Kurt","Kurtis","Kyla","Kyle","Kylee","Kyleigh","Kyler","Kylie","Kyra","Lacey","Lacy","Ladarius","Lafayette","Laila","Laisha","Lamar","Lambert","Lamont","Lance","Landen","Lane","Laney","Larissa","Laron","Larry","Larue","Laura","Laurel","Lauren","Laurence","Lauretta","Lauriane","Laurianne","Laurie","Laurine","Laury","Lauryn","Lavada","Lavern","Laverna","Laverne","Lavina","Lavinia","Lavon","Lavonne","Lawrence","Lawson","Layla","Layne","Lazaro","Lea","Leann","Leanna","Leanne","Leatha","Leda","Lee","Leif","Leila","Leilani","Lela","Lelah","Leland","Lelia","Lempi","Lemuel","Lenna","Lennie","Lenny","Lenora","Lenore","Leo","Leola","Leon","Leonard","Leonardo","Leone","Leonel","Leonie","Leonor","Leonora","Leopold","Leopoldo","Leora","Lera","Lesley","Leslie","Lesly","Lessie","Lester","Leta","Letha","Letitia","Levi","Lew","Lewis","Lexi","Lexie","Lexus","Lia","Liam","Liana","Libbie","Libby","Lila","Lilian","Liliana","Liliane","Lilla","Lillian","Lilliana","Lillie","Lilly","Lily","Lilyan","Lina","Lincoln","Linda","Lindsay","Lindsey","Linnea","Linnie","Linwood","Lionel","Lisa","Lisandro","Lisette","Litzy","Liza","Lizeth","Lizzie","Llewellyn","Lloyd","Logan","Lois","Lola","Lolita","Loma","Lon","London","Lonie","Lonnie","Lonny","Lonzo","Lora","Loraine","Loren","Lorena","Lorenz","Lorenza","Lorenzo","Lori","Lorine","Lorna","Lottie","Lou","Louie","Louisa","Lourdes","Louvenia","Lowell","Loy","Loyal","Loyce","Lucas","Luciano","Lucie","Lucienne","Lucile","Lucinda","Lucio","Lucious","Lucius","Lucy","Ludie","Ludwig","Lue","Luella","Luigi","Luis","Luisa","Lukas","Lula","Lulu","Luna","Lupe","Lura","Lurline","Luther","Luz","Lyda","Lydia","Lyla","Lynn","Lyric","Lysanne","Mabel","Mabelle","Mable","Mac","Macey","Maci","Macie","Mack","Mackenzie","Macy","Madaline","Madalyn","Maddison","Madeline","Madelyn","Madelynn","Madge","Madie","Madilyn","Madisen","Madison","Madisyn","Madonna","Madyson","Mae","Maegan","Maeve","Mafalda","Magali","Magdalen","Magdalena","Maggie","Magnolia","Magnus","Maia","Maida","Maiya","Major","Makayla","Makenna","Makenzie","Malachi","Malcolm","Malika","Malinda","Mallie","Mallory","Malvina","Mandy","Manley","Manuel","Manuela","Mara","Marc","Marcel","Marcelina","Marcelino","Marcella","Marcelle","Marcellus","Marcelo","Marcia","Marco","Marcos","Marcus","Margaret","Margarete","Margarett","Margaretta","Margarette","Margarita","Marge","Margie","Margot","Margret","Marguerite","Maria","Mariah","Mariam","Marian","Mariana","Mariane","Marianna","Marianne","Mariano","Maribel","Marie","Mariela","Marielle","Marietta","Marilie","Marilou","Marilyne","Marina","Mario","Marion","Marisa","Marisol","Maritza","Marjolaine","Marjorie","Marjory","Mark","Markus","Marlee","Marlen","Marlene","Marley","Marlin","Marlon","Marques","Marquis","Marquise","Marshall","Marta","Martin","Martina","Martine","Marty","Marvin","Mary","Maryam","Maryjane","Maryse","Mason","Mateo","Mathew","Mathias","Mathilde","Matilda","Matilde","Matt","Matteo","Mattie","Maud","Maude","Maudie","Maureen","Maurice","Mauricio","Maurine","Maverick","Mavis","Max","Maxie","Maxime","Maximilian","Maximillia","Maximillian","Maximo","Maximus","Maxine","Maxwell","May","Maya","Maybell","Maybelle","Maye","Maymie","Maynard","Mayra","Mazie","Mckayla","Mckenna","Mckenzie","Meagan","Meaghan","Meda","Megane","Meggie","Meghan","Mekhi","Melany","Melba","Melisa","Melissa","Mellie","Melody","Melvin","Melvina","Melyna","Melyssa","Mercedes","Meredith","Merl","Merle","Merlin","Merritt","Mertie","Mervin","Meta","Mia","Micaela","Micah","Michael","Michaela","Michale","Micheal","Michel","Michele","Michelle","Miguel","Mikayla","Mike","Mikel","Milan","Miles","Milford","Miller","Millie","Milo","Milton","Mina","Minerva","Minnie","Miracle","Mireille","Mireya","Misael","Missouri","Misty","Mitchel","Mitchell","Mittie","Modesta","Modesto","Mohamed","Mohammad","Mohammed","Moises","Mollie","Molly","Mona","Monica","Monique","Monroe","Monserrat","Monserrate","Montana","Monte","Monty","Morgan","Moriah","Morris","Mortimer","Morton","Mose","Moses","Moshe","Mossie","Mozell","Mozelle","Muhammad","Muriel","Murl","Murphy","Murray","Mustafa","Mya","Myah","Mylene","Myles","Myra","Myriam","Myrl","Myrna","Myron","Myrtice","Myrtie","Myrtis","Myrtle","Nadia","Nakia","Name","Nannie","Naomi","Naomie","Napoleon","Narciso","Nash","Nasir","Nat","Natalia","Natalie","Natasha","Nathan","Nathanael","Nathanial","Nathaniel","Nathen","Nayeli","Neal","Ned","Nedra","Neha","Neil","Nelda","Nella","Nelle","Nellie","Nels","Nelson","Neoma","Nestor","Nettie","Neva","Newell","Newton","Nia","Nicholas","Nicholaus","Nichole","Nick","Nicklaus","Nickolas","Nico","Nicola","Nicolas","Nicole","Nicolette","Nigel","Nikita","Nikki","Nikko","Niko","Nikolas","Nils","Nina","Noah","Noble","Noe","Noel","Noelia","Noemi","Noemie","Noemy","Nola","Nolan","Nona","Nora","Norbert","Norberto","Norene","Norma","Norris","Norval","Norwood","Nova","Novella","Nya","Nyah","Nyasia","Obie","Oceane","Ocie","Octavia","Oda","Odell","Odessa","Odie","Ofelia","Okey","Ola","Olaf","Ole","Olen","Oleta","Olga","Olin","Oliver","Ollie","Oma","Omari","Omer","Ona","Onie","Opal","Ophelia","Ora","Oral","Oran","Oren","Orie","Orin","Orion","Orland","Orlando","Orlo","Orpha","Orrin","Orval","Orville","Osbaldo","Osborne","Oscar","Osvaldo","Oswald","Oswaldo","Otha","Otho","Otilia","Otis","Ottilie","Ottis","Otto","Ova","Owen","Ozella","Pablo","Paige","Palma","Pamela","Pansy","Paolo","Paris","Parker","Pascale","Pasquale","Pat","Patience","Patricia","Patrick","Patsy","Pattie","Paul","Paula","Pauline","Paxton","Payton","Pearl","Pearlie","Pearline","Pedro","Peggie","Penelope","Percival","Percy","Perry","Pete","Peter","Petra","Peyton","Philip","Phoebe","Phyllis","Pierce","Pierre","Pietro","Pink","Pinkie","Piper","Polly","Porter","Precious","Presley","Preston","Price","Prince","Princess","Priscilla","Providenci","Prudence","Queen","Queenie","Quentin","Quincy","Quinn","Quinten","Quinton","Rachael","Rachel","Rachelle","Rae","Raegan","Rafael","Rafaela","Raheem","Rahsaan","Rahul","Raina","Raleigh","Ralph","Ramiro","Ramon","Ramona","Randal","Randall","Randi","Randy","Ransom","Raoul","Raphael","Raphaelle","Raquel","Rashad","Rashawn","Rasheed","Raul","Raven","Ray","Raymond","Raymundo","Reagan","Reanna","Reba","Rebeca","Rebecca","Rebeka","Rebekah","Reece","Reed","Reese","Regan","Reggie","Reginald","Reid","Reilly","Reina","Reinhold","Remington","Rene","Renee","Ressie","Reta","Retha","Retta","Reuben","Reva","Rex","Rey","Reyes","Reymundo","Reyna","Reynold","Rhea","Rhett","Rhianna","Rhiannon","Rhoda","Ricardo","Richard","Richie","Richmond","Rick","Rickey","Rickie","Ricky","Rico","Rigoberto","Riley","Rita","River","Robb","Robbie","Robert","Roberta","Roberto","Robin","Robyn","Rocio","Rocky","Rod","Roderick","Rodger","Rodolfo","Rodrick","Rodrigo","Roel","Rogelio","Roger","Rogers","Rolando","Rollin","Roma","Romaine","Roman","Ron","Ronaldo","Ronny","Roosevelt","Rory","Rosa","Rosalee","Rosalia","Rosalind","Rosalinda","Rosalyn","Rosamond","Rosanna","Rosario","Roscoe","Rose","Rosella","Roselyn","Rosemarie","Rosemary","Rosendo","Rosetta","Rosie","Rosina","Roslyn","Ross","Rossie","Rowan","Rowena","Rowland","Roxane","Roxanne","Roy","Royal","Royce","Rozella","Ruben","Rubie","Ruby","Rubye","Rudolph","Rudy","Rupert","Russ","Russel","Russell","Rusty","Ruth","Ruthe","Ruthie","Ryan","Ryann","Ryder","Rylan","Rylee","Ryleigh","Ryley","Sabina","Sabrina","Sabryna","Sadie","Sadye","Sage","Saige","Sallie","Sally","Salma","Salvador","Salvatore","Sam","Samanta","Samantha","Samara","Samir","Sammie","Sammy","Samson","Sandra","Sandrine","Sandy","Sanford","Santa","Santiago","Santina","Santino","Santos","Sarah","Sarai","Sarina","Sasha","Saul","Savanah","Savanna","Savannah","Savion","Scarlett","Schuyler","Scot","Scottie","Scotty","Seamus","Sean","Sebastian","Sedrick","Selena","Selina","Selmer","Serena","Serenity","Seth","Shad","Shaina","Shakira","Shana","Shane","Shanel","Shanelle","Shania","Shanie","Shaniya","Shanna","Shannon","Shanny","Shanon","Shany","Sharon","Shaun","Shawn","Shawna","Shaylee","Shayna","Shayne","Shea","Sheila","Sheldon","Shemar","Sheridan","Sherman","Sherwood","Shirley","Shyann","Shyanne","Sibyl","Sid","Sidney","Sienna","Sierra","Sigmund","Sigrid","Sigurd","Silas","Sim","Simeon","Simone","Sincere","Sister","Skye","Skyla","Skylar","Sofia","Soledad","Solon","Sonia","Sonny","Sonya","Sophia","Sophie","Spencer","Stacey","Stacy","Stan","Stanford","Stanley","Stanton","Stefan","Stefanie","Stella","Stephan","Stephania","Stephanie","Stephany","Stephen","Stephon","Sterling","Steve","Stevie","Stewart","Stone","Stuart","Summer","Sunny","Susan","Susana","Susanna","Susie","Suzanne","Sven","Syble","Sydnee","Sydney","Sydni","Sydnie","Sylvan","Sylvester","Sylvia","Tabitha","Tad","Talia","Talon","Tamara","Tamia","Tania","Tanner","Tanya","Tara","Taryn","Tate","Tatum","Tatyana","Taurean","Tavares","Taya","Taylor","Teagan","Ted","Telly","Terence","Teresa","Terrance","Terrell","Terrence","Terrill","Terry","Tess","Tessie","Tevin","Thad","Thaddeus","Thalia","Thea","Thelma","Theo","Theodora","Theodore","Theresa","Therese","Theresia","Theron","Thomas","Thora","Thurman","Tia","Tiana","Tianna","Tiara","Tierra","Tiffany","Tillman","Timmothy","Timmy","Timothy","Tina","Tito","Titus","Tobin","Toby","Tod","Tom","Tomas","Tomasa","Tommie","Toney","Toni","Tony","Torey","Torrance","Torrey","Toy","Trace","Tracey","Tracy","Travis","Travon","Tre","Tremaine","Tremayne","Trent","Trenton","Tressa","Tressie","Treva","Trever","Trevion","Trevor","Trey","Trinity","Trisha","Tristian","Tristin","Triston","Troy","Trudie","Trycia","Trystan","Turner","Twila","Tyler","Tyra","Tyree","Tyreek","Tyrel","Tyrell","Tyrese","Tyrique","Tyshawn","Tyson","Ubaldo","Ulices","Ulises","Una","Unique","Urban","Uriah","Uriel","Ursula","Vada","Valentin","Valentina","Valentine","Valerie","Vallie","Van","Vance","Vanessa","Vaughn","Veda","Velda","Vella","Velma","Velva","Vena","Verda","Verdie","Vergie","Verla","Verlie","Vern","Verna","Verner","Vernice","Vernie","Vernon","Verona","Veronica","Vesta","Vicenta","Vicente","Vickie","Vicky","Victor","Victoria","Vida","Vidal","Vilma","Vince","Vincent","Vincenza","Vincenzo","Vinnie","Viola","Violet","Violette","Virgie","Virgil","Virginia","Virginie","Vita","Vito","Viva","Vivian","Viviane","Vivianne","Vivien","Vivienne","Vladimir","Wade","Waino","Waldo","Walker","Wallace","Walter","Walton","Wanda","Ward","Warren","Watson","Wava","Waylon","Wayne","Webster","Weldon","Wellington","Wendell","Wendy","Werner","Westley","Weston","Whitney","Wilber","Wilbert","Wilburn","Wiley","Wilford","Wilfred","Wilfredo","Wilfrid","Wilhelm","Wilhelmine","Will","Willa","Willard","William","Willie","Willis","Willow","Willy","Wilma","Wilmer","Wilson","Wilton","Winfield","Winifred","Winnifred","Winona","Winston","Woodrow","Wyatt","Wyman","Xander","Xavier","Xzavier","Yadira","Yasmeen","Yasmin","Yasmine","Yazmin","Yesenia","Yessenia","Yolanda","Yoshiko","Yvette","Yvonne","Zachariah","Zachary","Zachery","Zack","Zackary","Zackery","Zakary","Zander","Zane","Zaria","Zechariah","Zelda","Zella","Zelma","Zena","Zetta","Zion","Zita","Zoe","Zoey","Zoie","Zoila","Zola","Zora","Zula"];e.exports={generateUsername:function(){return r.randomElement(i)+"-"+r.randomAlphanumStr(3)}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return v});var r=n(4),i=n(2),o=n(7),a=n(0),s=n.n(a),c=n(5),u=n(11),d=n.n(u),l=n(37),h=n.n(l),p=n(38),f=n(53),m=Object(r.getLogger)(e),v=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this)).xmpp=e,o.eventEmitter=r,o.sessions={},o.jvbIceConfig=i.jvb,o.p2pIceConfig=i.p2p,o.mediaConstraints={offerToReceiveAudio:!0,offerToReceiveVideo:!0},o}return _createClass(n,[{key:"init",value:function(e){_get(_getPrototypeOf(n.prototype),"init",this).call(this,e),this.connection.addHandler(this.onJingle.bind(this),"urn:xmpp:jingle:1","iq","set",null,null)}},{key:"onJingle",value:function(e){var t=$(e).find("jingle").attr("sid"),n=$(e).find("jingle").attr("action"),r=e.getAttribute("from"),a=Object(i.$iq)({type:"result",to:r,id:e.getAttribute("id")});m.log("on jingle "+n+" from "+r,e);var u=this.sessions[t];if("session-initiate"!==n){if(!u)return a.attrs({type:"error"}),a.c("error",{type:"cancel"}).c("item-not-found",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).up().c("unknown-session",{xmlns:"urn:xmpp:jingle:errors:1"}),m.warn("invalid session id",e),this.connection.send(a),!0;if(r!==u.remoteJid)return m.warn("jid mismatch for session id",t,u.remoteJid,e),a.attrs({type:"error"}),a.c("error",{type:"cancel"}).c("item-not-found",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).up().c("unknown-session",{xmlns:"urn:xmpp:jingle:errors:1"}),this.connection.send(a),!0}else if(void 0!==u)return a.attrs({type:"error"}),a.c("error",{type:"cancel"}).c("service-unavailable",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).up(),m.warn("duplicate session id",t,e),this.connection.send(a),!0;var l=window.performance.now(),h="focus"!==i.Strophe.getResourceFromJid(r);switch(n){case"session-initiate":m.log("(TIME) received session-initiate:\t",l);var p=$(e).find("jingle>startmuted");if(p&&p.length>0){var v=p.attr("audio"),g=p.attr("video");this.eventEmitter.emit(s.a.START_MUTED_FROM_FOCUS,"true"===v,"true"===g)}m.info("Marking session from "+r+" as "+(h?"":"*not*")+" P2P");var _=h?this.p2pIceConfig:this.jvbIceConfig;u=new f.a($(e).find("jingle").attr("sid"),$(e).attr("to"),r,this.connection,this.mediaConstraints,JSON.parse(JSON.stringify(_)),h,!1),this.sessions[u.sid]=u,this.eventEmitter.emit(s.a.CALL_INCOMING,u,$(e).find(">jingle"),l);break;case"session-accept":this.eventEmitter.emit(s.a.CALL_ACCEPTED,u,$(e).find(">jingle"));break;case"content-modify":u.modifyContents($(e).find(">jingle"));break;case"transport-info":this.eventEmitter.emit(s.a.TRANSPORT_INFO,u,$(e).find(">jingle"));break;case"session-terminate":m.log("terminating...",u.sid);var y=null,S=null;$(e).find(">jingle>reason").length&&(y=$(e).find(">jingle>reason>:first")[0].tagName,S=$(e).find(">jingle>reason>text").text()),this.terminate(u.sid,y,S),this.eventEmitter.emit(s.a.CALL_ENDED,u,y,S);break;case"transport-replace":m.info("(TIME) Start transport replace:\t",l),c.a.sendAnalytics(Object(o.G)(o.f,{p2p:h,value:l})),u.replaceTransport($(e).find(">jingle"),function(){var e=window.performance.now();m.info("(TIME) Transport replace success:\t",e),c.a.sendAnalytics(Object(o.G)(o.g,{p2p:h,value:e}))},function(e){d.a.callErrorHandler(e),m.error("Transport replace failed",e),u.sendTransportReject()});break;case"addsource":case"source-add":u.addRemoteStream($(e).find(">jingle>content"));break;case"removesource":case"source-remove":u.removeRemoteStream($(e).find(">jingle>content"));break;default:m.warn("jingle action not implemented",n),a.attrs({type:"error"}),a.c("error",{type:"cancel"}).c("bad-request",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).up()}return this.connection.send(a),!0}},{key:"newP2PJingleSession",value:function(e,t){var n=new f.a(h.a.randomHexString(12),e,t,this.connection,this.mediaConstraints,this.p2pIceConfig,!0,!0);return this.sessions[n.sid]=n,n}},{key:"terminate",value:function(e,t,n){this.sessions.hasOwnProperty(e)&&("ended"!==this.sessions[e].state&&this.sessions[e].onTerminated(t,n),delete this.sessions[e])}},{key:"getStunAndTurnCredentials",value:function(){var e=this;this.connection.sendIQ(Object(i.$iq)({type:"get",to:this.connection.domain}).c("services",{xmlns:"urn:xmpp:extdisco:1"}),function(t){var n=[];$(t).find(">services>service").each(function(e,t){var r={},i=(t=$(t)).attr("type");switch(i){case"stun":r.urls="stun:"+t.attr("host"),t.attr("port")&&(r.urls+=":"+t.attr("port")),n.push(r);break;case"turn":case"turns":r.urls=i+":";var o=t.attr("username");if(o){var a=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);a&&parseInt(a[2],10)<28?r.urls+=o+"@":r.username=o}r.urls+=t.attr("host"),t.attr("port")&&(r.urls+=":"+t.attr("port"));var s=t.attr("transport");s&&"udp"!==s&&(r.urls+="?transport="+s),r.credential=t.attr("password")||r.credential,n.push(r)}});for(var r,i=e.xmpp.options,o=n.length-1;o>0;o--){var a=Math.floor(Math.random()*(o+1)),s=n[o];n[o]=n[a],n[a]=s}i.useStunTurn&&(r=i.useTurnUdp?function(e){return e.urls.startsWith("turn")}:function(e){return e.urls.startsWith("turn")&&e.urls.indexOf("transport=tcp")>=0},e.jvbIceConfig.iceServers=n.filter(r));i.p2p&&i.p2p.useStunTurn&&(e.p2pIceConfig.iceServers=n)},function(e){m.warn("getting turn credentials failed",e),m.warn("is mod_turncredentials or similar installed?")})}},{key:"getLog",value:function(){var e=this,t={};return Object.keys(this.sessions).forEach(function(n){var r=e.sessions[n].peerconnection;r&&r.updateLog&&(t["jingle_"+n]={updateLog:r.updateLog,stats:r.stats,url:window.location.href})}),t}}]),n})(p.b)}).call(this,"modules/xmpp/strophe.jingle.js")},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(105),i=n.n(r),o=(function(){function e(){_classCallCheck(this,e),this._queue=i.a.queue(this._processQueueTasks.bind(this),1),this._stopped=!1}return _createClass(e,[{key:"clear",value:function(){this._queue.kill()}},{key:"_processQueueTasks",value:function(e,t){e(t)}},{key:"push",value:function(e,t){this._stopped?t&&t(new Error("The queue has been stopped")):this._queue.push(e,t)}},{key:"shutdown",value:function(){this._stopped=!0}}]),e})()},function(e,t,n){(function(n,r){var i;!(function(){var o,a,s={};function c(e){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,e.apply(o,arguments)}}null!=(o=this)&&(a=o.async),s.noConflict=function(){return o.async=a,s};var u=Object.prototype.toString,d=Array.isArray||function(e){return"[object Array]"===u.call(e)},l=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n+=1)t(e[n],n,e)},h=function(e,t){if(e.map)return e.map(t);var n=[];return l(e,function(e,r,i){n.push(t(e,r,i))}),n},p=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};void 0!==n&&n.nextTick?(s.nextTick=n.nextTick,s.setImmediate=void 0!==r?function(e){r(e)}:s.nextTick):"function"==typeof r?(s.nextTick=function(e){r(e)},s.setImmediate=s.nextTick):(s.nextTick=function(e){setTimeout(e,0)},s.setImmediate=s.nextTick),s.each=function(e,t,n){if(n=n||function(){},!e.length)return n();var r=0;function i(t){t?(n(t),n=function(){}):(r+=1)>=e.length&&n()}l(e,function(e){t(e,c(i))})},s.forEach=s.each,s.eachSeries=function(e,t,n){if(n=n||function(){},!e.length)return n();var r=0;!(function i(){t(e[r],function(t){t?(n(t),n=function(){}):(r+=1)>=e.length?n():i()})})()},s.forEachSeries=s.eachSeries,s.eachLimit=function(e,t,n,r){f(t).apply(null,[e,n,r])},s.forEachLimit=s.eachLimit;var f=function(e){return function(t,n,r){if(r=r||function(){},!t.length||e<=0)return r();var i=0,o=0,a=0;!(function s(){if(i>=t.length)return r();for(;a<e&&o<t.length;)a+=1,n(t[(o+=1)-1],function(e){e?(r(e),r=function(){}):(a-=1,(i+=1)>=t.length?r():s())})})()}},m=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[s.each].concat(t))}},v=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[s.eachSeries].concat(t))}},g=function(e,t,n,r){if(t=h(t,function(e,t){return{index:t,value:e}}),r){var i=[];e(t,function(e,t){n(e.value,function(n,r){i[e.index]=r,t(n)})},function(e){r(e,i)})}else e(t,function(e,t){n(e.value,function(e){t(e)})})};s.map=m(g),s.mapSeries=v(g),s.mapLimit=function(e,t,n,r){return _(t)(e,n,r)};var _=function(e){return(function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[f(e)].concat(n))}})(e,g)};s.reduce=function(e,t,n,r){s.eachSeries(e,function(e,r){n(t,e,function(e,n){t=n,r(e)})},function(e){r(e,t)})},s.inject=s.reduce,s.foldl=s.reduce,s.reduceRight=function(e,t,n,r){var i=h(e,function(e){return e}).reverse();s.reduce(i,t,n,r)},s.foldr=s.reduceRight;var y=function(e,t,n,r){var i=[];e(t=h(t,function(e,t){return{index:t,value:e}}),function(e,t){n(e.value,function(n){n&&i.push(e),t()})},function(e){r(h(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};s.filter=m(y),s.filterSeries=v(y),s.select=s.filter,s.selectSeries=s.filterSeries;var S=function(e,t,n,r){var i=[];e(t=h(t,function(e,t){return{index:t,value:e}}),function(e,t){n(e.value,function(n){n||i.push(e),t()})},function(e){r(h(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};s.reject=m(S),s.rejectSeries=v(S);var E=function(e,t,n,r){e(t,function(e,t){n(e,function(n){n?(r(e),r=function(){}):t()})},function(e){r()})};s.detect=m(E),s.detectSeries=v(E),s.some=function(e,t,n){s.each(e,function(e,r){t(e,function(e){e&&(n(!0),n=function(){}),r()})},function(e){n(!1)})},s.any=s.some,s.every=function(e,t,n){s.each(e,function(e,r){t(e,function(e){e||(n(!1),n=function(){}),r()})},function(e){n(!0)})},s.all=s.every,s.sortBy=function(e,t,n){s.map(e,function(e,n){t(e,function(t,r){t?n(t):n(null,{value:e,criteria:r})})},function(e,t){if(e)return n(e);n(null,h(t.sort(function(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}),function(e){return e.value}))})},s.auto=function(e,t){t=t||function(){};var n=p(e),r=n.length;if(!r)return t();var i={},o=[],a=function(e){o.unshift(e)},c=function(){r--,l(o.slice(0),function(e){e()})};a(function(){if(!r){var e=t;t=function(){},e(null,i)}}),l(n,function(n){var r=d(e[n])?e[n]:[e[n]],u=function(e){var r=Array.prototype.slice.call(arguments,1);if(r.length<=1&&(r=r[0]),e){var o={};l(p(i),function(e){o[e]=i[e]}),o[n]=r,t(e,o),t=function(){}}else i[n]=r,s.setImmediate(c)},h=r.slice(0,Math.abs(r.length-1))||[],f=function(){return t=function(e,t){return e&&i.hasOwnProperty(t)},r=!0,((e=h).reduce?e.reduce(t,r):(l(e,function(e,n,i){r=t(r,e)}),r))&&!i.hasOwnProperty(n);var e,t,r};if(f())r[r.length-1](u,i);else{a(function e(){f()&&((function(e){for(var t=0;t<o.length;t+=1)if(o[t]===e)return void o.splice(t,1)})(e),r[r.length-1](u,i))})}})},s.retry=function(e,t,n){var r=[];"function"==typeof e&&(n=t,t=e,e=5),e=parseInt(e,10)||5;var i=function(i,o){for(var a=function(e,t){return function(n){e(function(e,r){n(!e||t,{err:e,result:r})},o)}};e;)r.push(a(t,!(e-=1)));s.series(r,function(e,t){t=t[t.length-1],(i||n)(t.err,t.result)})};return n?i():i},s.waterfall=function(e,t){if(t=t||function(){},!d(e)){var n=new Error("First argument to waterfall must be an array of functions");return t(n)}if(!e.length)return t();!(function e(n){return function(r){if(r)t.apply(null,arguments),t=function(){};else{var i=Array.prototype.slice.call(arguments,1),o=n.next();o?i.push(e(o)):i.push(t),s.setImmediate(function(){n.apply(null,i)})}}})(s.iterator(e))()};var b=function(e,t,n){if(n=n||function(){},d(t))e.map(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},n);else{var r={};e.each(p(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,n(t)})},function(e){n(e,r)})}};s.parallel=function(e,t){b({map:s.map,each:s.each},e,t)},s.parallelLimit=function(e,t,n){b({map:_(t),each:f(t)},e,n)},s.series=function(e,t){if(t=t||function(){},d(e))s.mapSeries(e,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},t);else{var n={};s.eachSeries(p(e),function(t,r){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[t]=i,r(e)})},function(e){t(e,n)})}},s.iterator=function(e){return(function t(n){var r=function t(){return e.length&&e[n].apply(null,arguments),t.next()};return r.next=function(){return n<e.length-1?t(n+1):null},r})(0)},s.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var C=function(e,t,n,r){var i=[];e(t,function(e,t){n(e,function(e,n){i=i.concat(n||[]),t(e)})},function(e){r(e,i)})};s.concat=m(C),s.concatSeries=v(C),s.whilst=function(e,t,n){e()?t(function(r){if(r)return n(r);s.whilst(e,t,n)}):n()},s.doWhilst=function(e,t,n){e(function(r){if(r)return n(r);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?s.doWhilst(e,t,n):n()})},s.until=function(e,t,n){e()?n():t(function(r){if(r)return n(r);s.until(e,t,n)})},s.doUntil=function(e,t,n){e(function(r){if(r)return n(r);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?n():s.doUntil(e,t,n)})},s.queue=function(e,t){function n(e,t,n,r){if(e.started||(e.started=!0),d(t)||(t=[t]),0==t.length)return s.setImmediate(function(){e.drain&&e.drain()});l(t,function(t){var i={data:t,callback:"function"==typeof r?r:null};n?e.tasks.unshift(i):e.tasks.push(i),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),s.setImmediate(e.process)})}void 0===t&&(t=1);var r=0,i={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(e,t){n(i,e,!1,t)},kill:function(){i.drain=null,i.tasks=[]},unshift:function(e,t){n(i,e,!0,t)},process:function(){if(!i.paused&&r<i.concurrency&&i.tasks.length){var t=i.tasks.shift();i.empty&&0===i.tasks.length&&i.empty(),r+=1;var n=c(function(){r-=1,t.callback&&t.callback.apply(t,arguments),i.drain&&i.tasks.length+r===0&&i.drain(),i.process()});e(t.data,n)}},length:function(){return i.tasks.length},running:function(){return r},idle:function(){return i.tasks.length+r===0},pause:function(){!0!==i.paused&&(i.paused=!0,i.process())},resume:function(){!1!==i.paused&&(i.paused=!1,i.process())}};return i},s.priorityQueue=function(e,t){function n(e,t){return e.priority-t.priority}var r=s.queue(e,t);return r.push=function(e,t,i){!(function(e,t,r,i){if(e.started||(e.started=!0),d(t)||(t=[t]),0==t.length)return s.setImmediate(function(){e.drain&&e.drain()});l(t,function(t){var o={data:t,priority:r,callback:"function"==typeof i?i:null};e.tasks.splice((function(e,t,n){for(var r=-1,i=e.length-1;r<i;){var o=r+(i-r+1>>>1);n(t,e[o])>=0?r=o:i=o-1}return r})(e.tasks,o,n)+1,0,o),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),s.setImmediate(e.process)})})(r,e,t,i)},delete r.unshift,r},s.cargo=function(e,t){var n=!1,r=[],i={tasks:r,payload:t,saturated:null,empty:null,drain:null,drained:!0,push:function(e,n){d(e)||(e=[e]),l(e,function(e){r.push({data:e,callback:"function"==typeof n?n:null}),i.drained=!1,i.saturated&&r.length===t&&i.saturated()}),s.setImmediate(i.process)},process:function o(){if(!n){if(0===r.length)return i.drain&&!i.drained&&i.drain(),void(i.drained=!0);var a="number"==typeof t?r.splice(0,t):r.splice(0,r.length),s=h(a,function(e){return e.data});i.empty&&i.empty(),n=!0,e(s,function(){n=!1;var e=arguments;l(a,function(t){t.callback&&t.callback.apply(null,e)}),o()})}},length:function(){return r.length},running:function(){return n}};return i};var T=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&l(n,function(t){console[e](t)}))}]))}};s.log=T("log"),s.dir=T("dir"),s.memoize=function(e,t){var n={},r={};t=t||function(e){return e};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),a=t.apply(null,i);a in n?s.nextTick(function(){o.apply(null,n[a])}):a in r?r[a].push(o):(r[a]=[o],e.apply(null,i.concat([function(){n[a]=arguments;var e=r[a];delete r[a];for(var t=0,i=e.length;t<i;t++)e[t].apply(null,arguments)}])))};return i.memo=n,i.unmemoized=e,i},s.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},s.times=function(e,t,n){for(var r=[],i=0;i<e;i++)r.push(i);return s.map(r,t,n)},s.timesSeries=function(e,t,n){for(var r=[],i=0;i<e;i++)r.push(i);return s.mapSeries(r,t,n)},s.seq=function(){var e=arguments;return function(){var t=this,n=Array.prototype.slice.call(arguments),r=n.pop();s.reduce(e,n,function(e,n,r){n.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);r(e,t)}]))},function(e,n){r.apply(t,[e].concat(n))})}},s.compose=function(){return s.seq.apply(null,Array.prototype.reverse.call(arguments))};var R=function(e,t){var n=function(){var n=this,r=Array.prototype.slice.call(arguments),i=r.pop();return e(t,function(e,t){e.apply(n,r.concat([t]))},i)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return n.apply(this,r)}return n};s.applyEach=m(R),s.applyEachSeries=v(R),s.forever=function(e,t){!(function n(r){if(r){if(t)return t(r);throw r}e(n)})()},e.exports?e.exports=s:void 0===(i=function(){return s}.apply(t,[]))||(e.exports=i)})()}).call(this,n(59),n(154).setImmediate)},function(e,t){e.exports={integerHash:function(e){if(!e)return 0;var t,n=0;for(t=0;t<e.length;t++)n+=e.charCodeAt(t)*Math.pow(31,e.length-1-t),n=Math.abs(0|n);return n}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var r=n(4),i=n(20),o=n(32),a=Object(r.getLogger)(e),s=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o,a,s,c){var u;return _classCallCheck(this,n),(u=t.call(this)).sid=e,u.localJid=r,u.remoteJid=i,u.connection=o,u.mediaConstraints=a,u.iceConfig=s,u.isInitiator=c,u.usedrip=!0,u.dripContainer=[],u.room=null,u.state=null,u.rtc=null,u}return _createClass(n,[{key:"initialize",value:function(e,t,n){if(null!==this.state){var r="attempt to initiate on session "+this.sid+"\n                   in state "+this.state;throw a.error(r),new Error(r)}this.room=e,this.rtc=t,this.state=o.c,this.doInitialize(n)}},{key:"doInitialize",value:function(e){}},{key:"addIceCandidates",value:function(e){}},{key:"getState",value:function(){return this.state}},{key:"addSources",value:function(e){}},{key:"removeSources",value:function(e){}},{key:"terminate",value:function(e,t,n){}},{key:"acceptOffer",value:function(e,t,n){}},{key:"_getInitiatorJid",value:function(){return this.isInitiator?this.localJid:this.remoteJid}},{key:"initiatorJid",get:function(){return this.isInitiator?this.localJid:this.remoteJid}},{key:"responderJid",get:function(){return this.isInitiator?this.remoteJid:this.localJid}}]),n})(i.a)}).call(this,"modules/xmpp/JingleSession.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c});var r=n(4),i=n(8),o=n(40),a=n(109),s=Object(r.getLogger)(e),c=(function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).ssrcOwners=new Map,e.chatRoom=null,e}return _createClass(n,[{key:"setChatRoom",value:function(e){var t=this,n=this.chatRoom;this.chatRoom=e,n&&(n.removePresenceListener("audiomuted",this._audioMuteHandler),n.removePresenceListener("videomuted",this._videoMuteHandler),n.removePresenceListener("videoType",this._videoTypeHandler)),e&&(this._audioMuteHandler=function(e,n){t.eventEmitter.emit(o.a,n,i.a,"true"===e.value)},e.addPresenceListener("audiomuted",this._audioMuteHandler),this._videoMuteHandler=function(e,n){t.eventEmitter.emit(o.a,n,i.c,"true"===e.value)},e.addPresenceListener("videomuted",this._videoMuteHandler),this._videoTypeHandler=function(e,n){t.eventEmitter.emit(o.b,n,e.value)},e.addPresenceListener("videoType",this._videoTypeHandler))}},{key:"getPeerMediaInfo",value:function(e,t){if(this.chatRoom)return this.chatRoom.getMediaPresenceInfo(e,t);s.error("Requested peer media info, before room was set")}},{key:"getSSRCOwner",value:function(e){return this.ssrcOwners.get(e)}},{key:"setSSRCOwner",value:function(e,t){if("number"!=typeof e)throw new TypeError("SSRC("+e+") must be a number");this.ssrcOwners.set(e,t)}}]),n})(a.a)}).call(this,"modules/xmpp/SignalingLayerImpl.js")},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=(function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getSSRCOwner",value:function(e){throw new Error("not implemented")}},{key:"getPeerMediaInfo",value:function(e,t){throw new Error("not implemented")}}]),n})(n(20).a)},function(e,t,n){"use strict";var r=n(2),i=(function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).log=[],e}return _createClass(n,[{key:"init",value:function(e){_get(_getPrototypeOf(n.prototype),"init",this).call(this,e),this.connection.rawInput=this.logIncoming.bind(this),this.connection.rawOutput=this.logOutgoing.bind(this)}},{key:"logIncoming",value:function(e){this.log.push([(new Date).getTime(),"incoming",e])}},{key:"logOutgoing",value:function(e){this.log.push([(new Date).getTime(),"outgoing",e])}}]),n})(n(38).b);t.a=function(){r.Strophe.addConnectionPlugin("logger",new i)}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var r=n(4),i=n(2),o=n(38),a=Object(r.getLogger)(e),s=(function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(e){_get(_getPrototypeOf(n.prototype),"init",this).call(this,e),this.connection.addHandler(this.onRayo.bind(this),"urn:xmpp:rayo:1","iq","set",null,null)}},{key:"onRayo",value:function(e){a.info("Rayo IQ",e)}},{key:"dial",value:function(e,t,n,r,o){var s=this;return new Promise(function(c,u){if(o){var d=Object(i.$iq)({type:"set",to:o});d.c("dial",{xmlns:"urn:xmpp:rayo:1",to:e,from:t}),d.c("header",{name:"JvbRoomName",value:n}).up(),r&&r.length&&d.c("header",{name:"JvbRoomPassword",value:r}).up(),s.connection.sendIQ(d,function(e){a.info("Dial result ",e);var t=$(e).find("ref").attr("uri");s.callResource=t.substr("xmpp:".length),a.info("Received call resource: "+s.callResource),c()},function(e){a.info("Dial error ",e),u(e)})}else u(new Error("Internal error!"))})}},{key:"hangup",value:function(){var e=this;return new Promise(function(t,n){if(!e.callResource)return n(new Error("No call in progress")),void a.warn("No call in progress");var r=Object(i.$iq)({type:"set",to:e.callResource});r.c("hangup",{xmlns:"urn:xmpp:rayo:1"}),e.connection.sendIQ(r,function(n){a.info("Hangup result ",n),e.callResource=null,t()},function(t){a.info("Hangup error ",t),e.callResource=null,n(new Error("Hangup error "))})})}}]),n})(o.b)}).call(this,"modules/xmpp/strophe.rayo.js")},function(e,t,n){"use strict";(function(e){var r=n(4),i=n(2),o=n(11),a=n.n(o),s=Object(r.getLogger)(e),c=-1,u=/request id \d+.\d+ got 200/,d=/request errored, status: (\d+), number of errors: \d+/;t.a=function(){i.Strophe.log=function(e,t){switch(s.trace("Strophe",n,t),"string"==typeof t&&-1!==t.indexOf("Request ")&&-1!==t.indexOf("timed out (secondary), restarting")&&(_readOnlyError("e"),n=i.Strophe.LogLevel.WARN),n){case i.Strophe.LogLevel.DEBUG:-1!==c&&u.test(t)&&(s.debug("Reset lastErrorStatus"),c=-1);break;case i.Strophe.LogLevel.WARN:s.warn("Strophe: "+t);var n=d.exec(t);n&&2===n.length&&(c=parseInt(n[1],10),s.debug("lastErrorStatus set to: "+c));break;case i.Strophe.LogLevel.ERROR:case i.Strophe.LogLevel.FATAL:t="Strophe: "+t,a.a.callErrorHandler(new Error(t)),s.error(t)}},i.Strophe.getLastErrorStatus=function(){return c},i.Strophe.getStatusString=function(e){switch(e){case i.Strophe.Status.BINDREQUIRED:return"BINDREQUIRED";case i.Strophe.Status.ERROR:return"ERROR";case i.Strophe.Status.CONNECTING:return"CONNECTING";case i.Strophe.Status.CONNFAIL:return"CONNFAIL";case i.Strophe.Status.AUTHENTICATING:return"AUTHENTICATING";case i.Strophe.Status.AUTHFAIL:return"AUTHFAIL";case i.Strophe.Status.CONNECTED:return"CONNECTED";case i.Strophe.Status.DISCONNECTED:return"DISCONNECTED";case i.Strophe.Status.DISCONNECTING:return"DISCONNECTING";case i.Strophe.Status.ATTACHED:return"ATTACHED";default:return"unknown"}}}}).call(this,"modules/xmpp/strophe.util.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return l});var r=n(4),i=n(6),o=n.n(i),a=n(7),s=n(5),c=n(11),u=n.n(c),d=Object(r.getLogger)(e),l=(function(){function e(t,n,r,i){if(_classCallCheck(this,e),!t&&!n)throw new TypeError("At least peerconnection or wsUrl must be given");if(t&&n)throw new TypeError("Just one of peerconnection or wsUrl must be given");if(t?d.debug("constructor() with peerconnection"):d.debug("constructor() with wsUrl:\""+n+"\""),this._channel=null,this._eventEmitter=r,this._mode=null,this._areRetriesEnabled=!1,this._closedFromClient=!1,this._senderVideoConstraintsChanged=i,t){var o=t.createDataChannel("JVB data channel",{protocol:"http://jitsi.org/protocols/colibri"});this._handleChannel(o),this._mode="datachannel"}else n&&(this._areRetriesEnabled=!0,this._wsUrl=n,this._initWebSocket())}return _createClass(e,[{key:"_initWebSocket",value:function(){var e=new WebSocket(this._wsUrl);this._handleChannel(e),this._mode="websocket"}},{key:"_startConnectionRetries",value:function(){var e=this,t=1;this._retryTimeout=setTimeout(function n(){e.isOpen()||(e._initWebSocket(e._wsUrl),t=Math.min(2*t,60),e._retryTimeout=setTimeout(n,1e3*t))},1e3*t)}},{key:"_stopConnectionRetries",value:function(){this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=void 0)}},{key:"_retryWebSocketConnection",value:function(e){var t=this;if(this._areRetriesEnabled){var n=e.code,r=e.reason;s.a.sendAnalytics(Object(a.y)(n,r)),this._areRetriesEnabled=!1,this._eventEmitter.once(o.a.DATA_CHANNEL_OPEN,function(){t._stopConnectionRetries(),t._areRetriesEnabled=!0}),this._startConnectionRetries()}}},{key:"close",value:function(){if(this._closedFromClient=!0,this._stopConnectionRetries(),this._areRetriesEnabled=!1,this._channel){try{this._channel.close()}catch(e){}this._channel=null}}},{key:"isOpen",value:function(){return this._channel&&("open"===this._channel.readyState||this._channel.readyState===WebSocket.OPEN)}},{key:"sendMessage",value:function(e,t){this._send({colibriClass:"EndpointMessage",msgPayload:t,to:e})}},{key:"sendSetLastNMessage",value:function(e){var t={colibriClass:"LastNChangedEvent",lastN:e};this._send(t),d.log("Channel lastN set to: "+e)}},{key:"sendPinnedEndpointMessage",value:function(e){d.log("sending pinned changed notification to the bridge for endpoint ",e),this._send({colibriClass:"PinnedEndpointChangedEvent",pinnedEndpoint:e||null})}},{key:"sendSelectedEndpointsMessage",value:function(e){d.log("sending selected changed notification to the bridge for endpoints",e),this._send({colibriClass:"SelectedEndpointsChangedEvent",selectedEndpoints:e})}},{key:"sendReceiverVideoConstraintMessage",value:function(e){d.log("sending a ReceiverVideoConstraint message with a maxFrameHeight of "+e+" pixels"),this._send({colibriClass:"ReceiverVideoConstraint",maxFrameHeight:e})}},{key:"_handleChannel",value:function(e){var t=this,n=this._eventEmitter;e.onopen=function(){d.info(t._mode+" channel opened"),n.emit(o.a.DATA_CHANNEL_OPEN)},e.onerror=function(e){"websocket"!==t._mode&&d.error("Channel error: "+e.message)},e.onmessage=function(e){var r,i=e.data;try{r=JSON.parse(i)}catch(e){return u.a.callErrorHandler(e),void d.error("Failed to parse channel message as JSON: ",i,e)}var a=r.colibriClass;switch(a){case"DominantSpeakerEndpointChangeEvent":var s=r.dominantSpeakerEndpoint;d.info("Channel new dominant speaker event: ",s),n.emit(o.a.DOMINANT_SPEAKER_CHANGED,s);break;case"EndpointConnectivityStatusChangeEvent":var c=r.endpoint,l="true"===r.active;d.info("Endpoint connection status changed: "+c+" active ? "+l),n.emit(o.a.ENDPOINT_CONN_STATUS_CHANGED,c,l);break;case"EndpointMessage":n.emit(o.a.ENDPOINT_MESSAGE_RECEIVED,r.from,r.msgPayload);break;case"LastNEndpointsChangeEvent":var h=r.lastNEndpoints;d.info("Channel new last-n event: ",h,r),n.emit(o.a.LASTN_ENDPOINT_CHANGED,h,r);break;case"SenderVideoConstraints":var p=r.videoConstraints;p&&(d.info("SenderVideoConstraints: "+JSON.stringify(p)),t._senderVideoConstraintsChanged(p));break;default:d.debug("Channel JSON-formatted message: ",r),n.emit("rtc.datachannel."+a,r)}},e.onclose=function(e){d.info("Channel closed by "+(t._closedFromClient?"client":"server")),"websocket"===t._mode&&(t._closedFromClient||(d.error("Channel closed: "+e.code+" "+e.reason),t._retryWebSocketConnection(e))),t._channel=null},this._channel=e}},{key:"_send",value:function(e){var t=this._channel;if(!this.isOpen())throw d.error("Bridge Channel send: no opened channel."),new Error("No opened channel");t.send(JSON.stringify(e))}},{key:"mode",get:function(){return this._mode}}]),e})()}).call(this,"modules/RTC/BridgeChannel.js")},function(e,t,n){"use strict";var r=n(50);function i(e,t,n,i,o){var a=r.writeRtpDescription(e.kind,t);if(a+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":o||"active"),a+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?a+="a=sendrecv\r\n":e.rtpSender?a+="a=sendonly\r\n":e.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var c="msid:"+(i?i.id:"-")+" "+s+"\r\n";a+="a="+c,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),a}function o(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},i=function(e,t,n,i){var o=r(e.parameters.apt,n),a=r(t.parameters.apt,i);return o&&a&&o.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach(function(r){for(var o=0;o<t.codecs.length;o++){var a=t.codecs[o];if(r.name.toLowerCase()===a.name.toLowerCase()&&r.clockRate===a.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&a.parameters.apt&&!i(r,a,e.codecs,t.codecs))continue;(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(r.numChannels,a.numChannels),n.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter(function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}}),n}function a(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function s(e,t){var n=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return n||e.addRemoteCandidate(t),!n}function c(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}e.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,n,r,i){var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=i,e.setTimeout(function(){t._dispatchEvent("track",o)})}var d=function(n){var i=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){i[e]=o[e].bind(o)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=(function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof r;return i&&(r=[r]),r=r.filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)}),delete e.url,e.urls=i?r[0]:r,!!r.length}})})(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var a=n.iceCandidatePoolSize;a>0;a--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(d.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(d.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),d.prototype.onicecandidate=null,d.prototype.onaddstream=null,d.prototype.ontrack=null,d.prototype.onremovestream=null,d.prototype.onsignalingstatechange=null,d.prototype.oniceconnectionstatechange=null,d.prototype.onconnectionstatechange=null,d.prototype.onicegatheringstatechange=null,d.prototype.onnegotiationneeded=null,d.prototype.ondatachannel=null,d.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},d.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},d.prototype.getConfiguration=function(){return this._config},d.prototype.getLocalStreams=function(){return this.localStreams},d.prototype.getRemoteStreams=function(){return this.remoteStreams},d.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();r.iceTransport=i.iceTransport,r.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(r),r},d.prototype.addTrack=function(t,n){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find(function(e){return e.track===t}))throw c("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(r=this.transceivers[i]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},d.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach(function(t){n.addTrack(t,e)});else{var r=e.clone();e.getTracks().forEach(function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",function(e){n.enabled=e.enabled})}),r.getTracks().forEach(function(e){n.addTrack(e,r)})}},d.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find(function(e){return e.rtpSender===t});if(!n)throw c("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},d.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(e){var n=t.getSenders().find(function(t){return t.track===e});n&&t.removeTrack(n)})},d.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},d.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},d.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;i.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},d.prototype._gather=function(t,n){var i=this,o=this.transceivers[n].iceGatherer;if(!o.onlocalcandidate){var a=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),o.onlocalcandidate=function(e){if(!(i.usingBundle&&n>0)){var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:n};var s=e.candidate,c=!s||0===Object.keys(s).length;if(c)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),s.component=1,s.ufrag=o.getLocalParameters().usernameFragment;var u=r.writeCandidate(s);a.candidate=_extends(a.candidate,r.parseCandidate(u)),a.candidate.candidate=u,a.candidate.toJSON=function(){return{candidate:a.candidate.candidate,sdpMid:a.candidate.sdpMid,sdpMLineIndex:a.candidate.sdpMLineIndex,usernameFragment:a.candidate.usernameFragment}}}var d=r.getMediaSections(i._localDescription.sdp);d[a.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",i._localDescription.sdp=r.getDescription(i._localDescription.sdp)+d.join("");var l=i.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==i.iceGatheringState&&(i.iceGatheringState="gathering",i._emitGatheringStateChange()),c||i._dispatchEvent("icecandidate",a),l&&(i._dispatchEvent("icecandidate",new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange())}},e.setTimeout(function(){a.forEach(function(e){o.onlocalcandidate(e)})},0)}},d.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},d.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},d.prototype._transceive=function(e,n,i){var a=o(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(a.encodings=e.sendEncodingParameters,a.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(a.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(a)),i&&e.rtpReceiver&&a.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),e.recvEncodingParameters.length?a.encodings=e.recvEncodingParameters:a.encodings=[{}],a.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(a.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(a.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(a))},d.prototype.setLocalDescription=function(e){var t,n,i=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!a("setLocalDescription",e.type,i.signalingState)||i._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+i.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),n=t.shift(),t.forEach(function(e,t){var n=r.parseRtpParameters(e);i.transceivers[t].localCapabilities=n}),i.transceivers.forEach(function(e,t){i._gather(e.mid,t)});else if("answer"===e.type){t=r.splitSections(i._remoteDescription.sdp),n=t.shift();var s=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach(function(e,t){var a=i.transceivers[t],c=a.iceGatherer,u=a.iceTransport,d=a.dtlsTransport,l=a.localCapabilities,h=a.remoteCapabilities;if(!(r.isRejected(e)&&0===r.matchPrefix(e,"a=bundle-only").length||a.rejected)){var p=r.getIceParameters(e,n),f=r.getDtlsParameters(e,n);s&&(f.role="server"),i.usingBundle&&0!==t||(i._gather(a.mid,t),"new"===u.state&&u.start(c,p,s?"controlling":"controlled"),"new"===d.state&&d.start(f));var m=o(l,h);i._transceive(a,m.codecs.length>0,!1)}})}return i._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?i._updateSignalingState("have-local-offer"):i._updateSignalingState("stable"),Promise.resolve()},d.prototype.setRemoteDescription=function(i){var d=this;if(-1===["offer","answer"].indexOf(i.type))return Promise.reject(c("TypeError",'Unsupported type "'+i.type+'"'));if(!a("setRemoteDescription",i.type,d.signalingState)||d._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+i.type+" in state "+d.signalingState));var l={};d.remoteStreams.forEach(function(e){l[e.id]=e});var h=[],p=r.splitSections(i.sdp),f=p.shift(),m=r.matchPrefix(f,"a=ice-lite").length>0,v=r.matchPrefix(f,"a=group:BUNDLE ").length>0;d.usingBundle=v;var g=r.matchPrefix(f,"a=ice-options:")[0];return d.canTrickleIceCandidates=!!g&&g.substr(14).split(" ").indexOf("trickle")>=0,p.forEach(function(a,c){var u=r.splitLines(a),p=r.getKind(a),g=r.isRejected(a)&&0===r.matchPrefix(a,"a=bundle-only").length,_=u[0].substr(2).split(" ")[2],y=r.getDirection(a,f),S=r.parseMsid(a),E=r.getMid(a)||r.generateIdentifier();if(g||"application"===p&&("DTLS/SCTP"===_||"UDP/DTLS/SCTP"===_))d.transceivers[c]={mid:E,kind:p,protocol:_,rejected:!0};else{var b,C,T,R,A,k,I,w,P;!g&&d.transceivers[c]&&d.transceivers[c].rejected&&(d.transceivers[c]=d._createTransceiver(p,!0));var O,D,N=r.parseRtpParameters(a);g||(O=r.getIceParameters(a,f),(D=r.getDtlsParameters(a,f)).role="client"),I=r.parseRtpEncodingParameters(a);var M=r.parseRtcpParameters(a),L=r.matchPrefix(a,"a=end-of-candidates",f).length>0,x=r.matchPrefix(a,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return 1===e.component});if(("offer"===i.type||"answer"===i.type)&&!g&&v&&c>0&&d.transceivers[c]&&(d._disposeIceAndDtlsTransports(c),d.transceivers[c].iceGatherer=d.transceivers[0].iceGatherer,d.transceivers[c].iceTransport=d.transceivers[0].iceTransport,d.transceivers[c].dtlsTransport=d.transceivers[0].dtlsTransport,d.transceivers[c].rtpSender&&d.transceivers[c].rtpSender.setTransport(d.transceivers[0].dtlsTransport),d.transceivers[c].rtpReceiver&&d.transceivers[c].rtpReceiver.setTransport(d.transceivers[0].dtlsTransport)),"offer"!==i.type||g)"answer"!==i.type||g||(C=(b=d.transceivers[c]).iceGatherer,T=b.iceTransport,R=b.dtlsTransport,A=b.rtpReceiver,k=b.sendEncodingParameters,w=b.localCapabilities,d.transceivers[c].recvEncodingParameters=I,d.transceivers[c].remoteCapabilities=N,d.transceivers[c].rtcpParameters=M,x.length&&"new"===T.state&&(!m&&!L||v&&0!==c?x.forEach(function(e){s(b.iceTransport,e)}):T.setRemoteCandidates(x)),v&&0!==c||("new"===T.state&&T.start(C,O,"controlling"),"new"===R.state&&R.start(D)),!o(b.localCapabilities,b.remoteCapabilities).codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&b.sendEncodingParameters[0].rtx&&delete b.sendEncodingParameters[0].rtx,d._transceive(b,"sendrecv"===y||"recvonly"===y,"sendrecv"===y||"sendonly"===y),!A||"sendrecv"!==y&&"sendonly"!==y?delete b.rtpReceiver:(P=A.track,S?(l[S.stream]||(l[S.stream]=new e.MediaStream),n(P,l[S.stream]),h.push([P,A,l[S.stream]])):(l.default||(l.default=new e.MediaStream),n(P,l.default),h.push([P,A,l.default]))));else{(b=d.transceivers[c]||d._createTransceiver(p)).mid=E,b.iceGatherer||(b.iceGatherer=d._createIceGatherer(c,v)),x.length&&"new"===b.iceTransport.state&&(!L||v&&0!==c?x.forEach(function(e){s(b.iceTransport,e)}):b.iceTransport.setRemoteCandidates(x)),w=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(w.codecs=w.codecs.filter(function(e){return"rtx"!==e.name})),k=b.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var F,j=!1;"sendrecv"===y||"sendonly"===y?(j=!b.rtpReceiver,A=b.rtpReceiver||new e.RTCRtpReceiver(b.dtlsTransport,p),j&&(P=A.track,S&&"-"===S.stream||(S?(l[S.stream]||(l[S.stream]=new e.MediaStream,Object.defineProperty(l[S.stream],"id",{get:function(){return S.stream}})),Object.defineProperty(P,"id",{get:function(){return S.track}}),F=l[S.stream]):(l.default||(l.default=new e.MediaStream),F=l.default)),F&&(n(P,F),b.associatedRemoteMediaStreams.push(F)),h.push([P,A,F]))):b.rtpReceiver&&b.rtpReceiver.track&&(b.associatedRemoteMediaStreams.forEach(function(t){var n=t.getTracks().find(function(e){return e.id===b.rtpReceiver.track.id});n&&(function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))})(n,t)}),b.associatedRemoteMediaStreams=[]),b.localCapabilities=w,b.remoteCapabilities=N,b.rtpReceiver=A,b.rtcpParameters=M,b.sendEncodingParameters=k,b.recvEncodingParameters=I,d._transceive(d.transceivers[c],!1,j)}}}),void 0===d._dtlsRole&&(d._dtlsRole="offer"===i.type?"active":"passive"),d._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?d._updateSignalingState("have-remote-offer"):d._updateSignalingState("stable"),Object.keys(l).forEach(function(t){var n=l[t];if(n.getTracks().length){if(-1===d.remoteStreams.indexOf(n)){d.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout(function(){d._dispatchEvent("addstream",r)})}h.forEach(function(e){var t=e[0],r=e[1];n.id===e[2].id&&u(d,t,r,[n])})}}),h.forEach(function(e){e[2]||u(d,e[0],e[1],[])}),e.setTimeout(function(){d&&d.transceivers&&d.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},d.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},d.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},d.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout(function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}},0))},d.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++}),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},d.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},d.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var o=n.transceivers.filter(function(e){return"audio"===e.kind}).length,a=n.transceivers.filter(function(e){return"video"===e.kind}).length,s=arguments[0];if(s){if(s.mandatory||s.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==s.offerToReceiveAudio&&(o=!0===s.offerToReceiveAudio?1:!1===s.offerToReceiveAudio?0:s.offerToReceiveAudio),void 0!==s.offerToReceiveVideo&&(a=!0===s.offerToReceiveVideo?1:!1===s.offerToReceiveVideo?0:s.offerToReceiveVideo)}for(n.transceivers.forEach(function(e){"audio"===e.kind?--o<0&&(e.wantReceive=!1):"video"===e.kind&&--a<0&&(e.wantReceive=!1)});o>0||a>0;)o>0&&(n._createTransceiver("audio"),o--),a>0&&(n._createTransceiver("video"),a--);var u=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach(function(i,o){var a=i.track,s=i.kind,c=i.mid||r.generateIdentifier();i.mid=c,i.iceGatherer||(i.iceGatherer=n._createIceGatherer(o,n.usingBundle));var u=e.RTCRtpSender.getCapabilities(s);t<15019&&(u.codecs=u.codecs.filter(function(e){return"rtx"!==e.name})),u.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),i.remoteCapabilities&&i.remoteCapabilities.codecs&&i.remoteCapabilities.codecs.forEach(function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)})}),u.headerExtensions.forEach(function(e){(i.remoteCapabilities&&i.remoteCapabilities.headerExtensions||[]).forEach(function(t){e.uri===t.uri&&(e.id=t.id)})});var d=i.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];a&&t>=15019&&"video"===s&&!d[0].rtx&&(d[0].rtx={ssrc:d[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,s)),i.localCapabilities=u,i.sendEncodingParameters=d}),"max-compat"!==n._config.bundlePolicy&&(u+="a=group:BUNDLE "+n.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",n.transceivers.forEach(function(e,t){u+=i(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,u+="a="+r.writeCandidate(e)+"\r\n"}),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))});var d=new e.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(d)},d.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var a=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(a+="a=group:BUNDLE "+n.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),a+="a=ice-options:trickle\r\n";var s=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach(function(e,r){if(!(r+1>s)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?a+="m=application 0 DTLS/SCTP 5000\r\n":a+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?a+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(a+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(a+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;e.stream&&("audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var u=o(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,a+=i(e,u,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(a+="a=rtcp-rsize\r\n")}});var u=new e.RTCSessionDescription({type:"answer",sdp:a});return Promise.resolve(u)},d.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(i,o){if(!n._remoteDescription)return o(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var a=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<n.transceivers.length;u++)if(n.transceivers[u].mid===e.sdpMid){a=u;break}var d=n.transceivers[a];if(!d)return o(c("OperationError","Can not add ICE candidate"));if(d.rejected)return i();var l=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===l.protocol&&(0===l.port||9===l.port))return i();if(l.component&&1!==l.component)return i();if((0===a||a>0&&d.iceTransport!==n.transceivers[0].iceTransport)&&!s(d.iceTransport,l))return o(c("OperationError","Can not add ICE candidate"));var h=e.candidate.trim();0===h.indexOf("a=")&&(h=h.substr(2)),(t=r.getMediaSections(n._remoteDescription.sdp))[a]+="a="+(l.type?h:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var p=0;p<n.transceivers.length&&(n.transceivers[p].rejected||(n.transceivers[p].iceTransport.addRemoteCandidate({}),(t=r.getMediaSections(n._remoteDescription.sdp))[p]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));p++);i()})},d.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach(function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)}),!n)throw c("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(t){e[t]&&r.push(e[t].getStats())})}),Promise.all(r).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then(function(e){var t=new Map;return Object.keys(e).forEach(function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])}),t})}}});var l=["createOffer","createAnswer"];return l.forEach(function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then(function(t){"function"==typeof e[0]&&e[0].apply(null,[t])},function(t){"function"==typeof e[1]&&e[1].apply(null,[t])}):t.apply(this,arguments)}}),(l=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)},function(t){"function"==typeof e[2]&&e[2].apply(null,[t])}):t.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),d}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return A});var r=n(144),i=n(4),o=n(25),a=n.n(o),s=n(36),c=n(8),u=n(6),d=n.n(u),l=n(40),h=n(13),p=n(3),f=n(11),m=n(116),v=n(21),g=n(9),_=n(117),y=n(29),S=n(118),E=n(119),b=n(12),C=n(10),T=n(69),R=Object(i.getLogger)(e);function A(e,t,i,o,a,u,d){var h=this;this.audioTransferActive=!(!0===d.startSilent),this._dtmfSender=void 0,this._dtmfTonesQueue=[],this.videoTransferActive=!0,this.rtc=e,this.id=t,this.isP2P=u,this.remoteTracks=new Map,this.localTracks=new Map,this._addedStreams=[],this.localSSRCs=new Map,this.localUfrag=null,this.remoteUfrag=null,this.signalingLayer=i,this._peerVideoTypeChanged=this._peerVideoTypeChanged.bind(this),this.signalingLayer.on(l.b,this._peerVideoTypeChanged),this._peerMutedChanged=this._peerMutedChanged.bind(this),this.signalingLayer.on(l.a,this._peerMutedChanged),this.options=d,this.peerconnection=new C.a.RTCPeerConnectionType(o,a);this.videoBitrates=this.options.videoQuality&&this.options.videoQuality.maxBitratesVideo?this.options.videoQuality.maxBitratesVideo:{low:2e5,standard:7e5,high:25e5},this.tpcUtils=new T.b(this,this.videoBitrates),this.updateLog=[],this.stats={},this.statsinterval=null,this.maxstats=d.maxstats,this.interop=new r.a;var f=n(158);this.simulcast=new f({numOfLayers:T.a.length,explodeRemoteSimulcast:!1,usesUnifiedPlan:p.a.usesUnifiedPlan()}),this.sdpConsistency=new _.a(this.toString()),this.localSdpMunger=new E.a(this),this.eventEmitter=e.eventEmitter,this.rtxModifier=new m.a,this.senderVideoMaxHeight=null;var v=function(e){return"string"==typeof e?Object.values(s).find(function(t){return t===e.toLowerCase()}):null},g=v(this.options.preferredCodec||this.options.preferH264&&s.H264);p.a.isFirefox()&&g===s.VP9&&(g=null);var y=v(this.options.disabledCodec||this.options.disableH264&&s.H264);y===s.VP8&&(R.warn("Disabling VP8 is not permitted, setting is ignored!"),y=null),(g||y)&&(this.codecPreference={enable:null===y,mediaType:c.c,mimeType:y||g}),this.trace=function(e,t){R.debug(e,t),h.updateLog.push({time:new Date,type:e,value:t||""})},this.onicecandidate=null,this.peerconnection.onicecandidate=function(e){h.trace("onicecandidate",JSON.stringify(e.candidate,null," ")),null!==h.onicecandidate&&h.onicecandidate(e)},p.a.usesPlanB()?(this.peerconnection.onaddstream=function(e){return h._remoteStreamAdded(e.stream)},this.peerconnection.onremovestream=function(e){return h._remoteStreamRemoved(e.stream)}):this.peerconnection.ontrack=function(e){var t=e.streams[0];h._remoteTrackAdded(t,e.track,e.transceiver),t.onremovetrack=function(e){h._remoteTrackRemoved(t,e.track)}},this.onsignalingstatechange=null,this.peerconnection.onsignalingstatechange=function(e){h.trace("onsignalingstatechange",h.signalingState),null!==h.onsignalingstatechange&&h.onsignalingstatechange(e)},this.oniceconnectionstatechange=null,this.peerconnection.oniceconnectionstatechange=function(e){h.trace("oniceconnectionstatechange",h.iceConnectionState),null!==h.oniceconnectionstatechange&&h.oniceconnectionstatechange(e)},this.onnegotiationneeded=null,this.peerconnection.onnegotiationneeded=function(e){h.trace("onnegotiationneeded"),null!==h.onnegotiationneeded&&h.onnegotiationneeded(e)},this.ondatachannel=null,this.peerconnection.ondatachannel=function(e){h.trace("ondatachannel"),null!==h.ondatachannel&&h.ondatachannel(e)},this.maxstats&&(this.statsinterval=window.setInterval(function(){h.getStats(function(e){if(e.result&&"function"==typeof e.result)for(var t=e.result(),n=function(e){var n=t[e];n.names().forEach(function(e){h._processStat(n,e,n.stat(e))})},r=0;r<t.length;++r)n(r);else e.forEach(function(e){return h._processStat(e,"",e)})},function(){})},1e3)),R.info("Create new "+this)}A.prototype._processStat=function(e,t,n){var r=e.id+"-"+t,i=this.stats[r],o=new Date;i||(this.stats[r]=i={startTime:o,endTime:o,values:[],times:[]}),i.values.push(n),i.times.push(o.getTime()),i.values.length>this.maxstats&&(i.values.shift(),i.times.shift()),i.endTime=o};var k=function(e){return null==e?"":"type: "+e.type+"\r\n"+e.sdp};A.prototype.getConnectionState=function(){var e=this.peerconnection.iceConnectionState;return"completed"===e?"connected":e},A.prototype._getDesiredMediaDirection=function(e){var t=!0;return e===c.a?t=this.audioTransferActive:e===c.c&&(t=this.videoTransferActive),t?this.hasAnyTracksOfType(e)?"sendrecv":"recvonly":"inactive"},A.prototype.isSimulcastOn=function(){return!this.options.disableSimulcast},A.prototype._peerVideoTypeChanged=function(e,t){if(e){var n=this.getRemoteTracks(e,c.c);n.length&&n[0]._setVideoType(t)}else R.error("No endpointID on peerVideoTypeChanged "+this)},A.prototype._peerMutedChanged=function(e,t,n){if(e){var r=this.getRemoteTracks(e,t);r.length&&r[0].setMute(n)}else R.error("On peerMuteChanged - no endpoint ID")},A.prototype.getAudioLevels=function(){var e={};return this.peerconnection.getReceivers().filter(function(e){return e.track&&e.track.kind===c.a}).forEach(function(t){var n=t.getSynchronizationSources();n&&n.length&&(e[n[0].source]=n[0].audioLevel)}),e},A.prototype.getLocalTracks=function(e){var t=Array.from(this.localTracks.values());return void 0!==e&&(t=t.filter(function(t){return t.getType()===e})),t},A.prototype.getLocalVideoTrack=function(){return this.getLocalTracks(c.c)[0]},A.prototype.hasAnyTracksOfType=function(e){if(!e)throw new Error('"mediaType" is required');return this.getLocalTracks(e).length>0},A.prototype.getRemoteTracks=function(e,t){for(var n,r=[],i=_createForOfIteratorHelperLoose(e?[e]:this.remoteTracks.keys());!(n=i()).done;){var o=n.value,a=this.remoteTracks.get(o);if(a)for(var s,c=_createForOfIteratorHelperLoose(a.keys());!(s=c()).done;){var u=s.value;if(!t||t===u){var d=a.get(u);d&&r.push(d)}}}return r},A.prototype.getTrackBySSRC=function(e){if("number"!=typeof e)throw new Error("SSRC "+e+" is not a number");for(var t,n=_createForOfIteratorHelperLoose(this.localTracks.values());!(t=n()).done;){var r=t.value;if(this.getLocalSSRC(r)===e)return r}for(var i,o=_createForOfIteratorHelperLoose(this.getRemoteTracks());!(i=o()).done;){var a=i.value;if(a.getSSRC()===e)return a}return null},A.prototype.getSsrcByTrackId=function(e){var t=function(t){return t.getTrack().id===e},n=this.getLocalTracks().find(t);if(n)return this.getLocalSSRC(n);var r=this.getRemoteTracks().find(t);return r?r.getSSRC():null},A.prototype._remoteStreamAdded=function(e){var t=this,n=b.a.getStreamID(e);if(b.a.isUserStreamById(n)){p.a.isChromiumBased()&&(e.onaddtrack=function(n){t._remoteTrackAdded(e,n.track)},e.onremovetrack=function(n){t._remoteTrackRemoved(e,n.track)});for(var r,i=_createForOfIteratorHelperLoose(e.getAudioTracks());!(r=i()).done;){var o=r.value;this._remoteTrackAdded(e,o)}for(var a,s=_createForOfIteratorHelperLoose(e.getVideoTracks());!(a=s()).done;){var c=a.value;this._remoteTrackAdded(e,c)}}else R.info(this+" ignored remote 'stream added' event for non-user streamid: "+n)},A.prototype._remoteTrackAdded=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=b.a.getStreamID(e),i=t.kind;if(this.isP2P||b.a.isUserStreamById(r))if(R.info(this+" remote track added:",r,i),i){var o,a=p.a.usesPlanB()?new v.a(this.remoteDescription.sdp):new v.a(this.peerconnection.remoteDescription.sdp);if(p.a.usesUnifiedPlan())if(n&&n.mid){var s=n.mid;o=a.media.filter(function(e){return g.a.findLine(e,"a=mid:"+s)})}else o=a.media.filter(function(e){var t=g.a.findLine(e,"a=msid");return void 0!==t&&r===t.substring(7).split(" ")[0]});else o=a.media.filter(function(e){return e.startsWith("m="+i)});if(o.length){var c=g.a.findLines(o[0],"a=ssrc:");if((c=c.filter(function(e){return-1!==e.indexOf("msid:"+r)})).length){var u=c[0].substring(7).split(" ")[0],d=Number(u),l=this.signalingLayer.getSSRCOwner(d);if(isNaN(d)||d<0)f.callErrorHandler(new Error("Invalid SSRC: "+u+" for remote track, msid: "+r+" media type: "+i));else if(l){R.log(this+" associated ssrc",l,d);var h=this.signalingLayer.getPeerMediaInfo(l,i);if(h){var m=h.muted,_=h.videoType;this._createRemoteTrack(l,e,t,i,_,d,m)}else f.callErrorHandler(new Error(this+": no peer media info available for "+l))}else f.callErrorHandler(new Error("No SSRC owner known for: "+d+" for remote track, msid: "+r+" media type: "+i))}else f.callErrorHandler(new Error("No SSRC lines for streamId "+r+" for remote track, media type: "+i))}else f.callErrorHandler(new Error("No media lines for type "+i+" found in remote SDP for remote track: "+r))}else f.callErrorHandler(new Error("MediaType undefined for remote track, stream id: "+r));else R.info(this+" ignored remote 'stream added' event for non-user streamid: "+r)},A.prototype._createRemoteTrack=function(e,t,n,r,i,o,a){var s=this.remoteTracks.get(e);s||(s=new Map,this.remoteTracks.set(e,s));var c=s.get(r);if(c&&c.getTrack()===n)R.info(this+" ignored duplicated remote track added event for: "+e+", "+r);else{c&&R.error(this+" overwriting remote track for"+e+" "+r);var u=new S.a(this.rtc,this.rtc.conference,e,t,n,r,i,o,a,this.isP2P);s.set(r,u),this.eventEmitter.emit(d.a.REMOTE_TRACK_ADDED,u,this)}},A.prototype._remoteStreamRemoved=function(e){if(b.a.isUserStream(e)){for(var t,n=_createForOfIteratorHelperLoose(e.getVideoTracks());!(t=n()).done;){var r=t.value;this._remoteTrackRemoved(e,r)}for(var i,o=_createForOfIteratorHelperLoose(e.getAudioTracks());!(i=o()).done;){var a=i.value;this._remoteTrackRemoved(e,a)}}else{var s=b.a.getStreamID(e);R.info("Ignored remote 'stream removed' event for non-user stream "+s)}},A.prototype._remoteTrackRemoved=function(e,t){var n=b.a.getStreamID(e),r=t&&b.a.getTrackID(t);R.info(this+" - remote track removed: "+n+", "+r),n?r?this._removeRemoteTrackById(n,r)||R.warn(this+" Removed track not found for msid: "+n+",\n             track id: "+r):f.callErrorHandler(new Error(this+" remote track removal failed - no track ID")):f.callErrorHandler(new Error(this+" remote track removal failed - no stream ID"))},A.prototype._getRemoteTrackById=function(e,t){for(var n,r=_createForOfIteratorHelperLoose(this.remoteTracks.values());!(n=r()).done;)for(var i,o=_createForOfIteratorHelperLoose(n.value.values());!(i=o()).done;){var a=i.value;if(a.getStreamId()==e&&a.getTrackId()==t)return a}},A.prototype.removeRemoteTracks=function(e){var t=[],n=this.remoteTracks.get(e);if(n){var r=n.get(c.a),i=n.get(c.c);r&&t.push(r),i&&t.push(i),this.remoteTracks.delete(e)}return R.debug(this+" removed remote tracks for "+e+" count: "+t.length),t},A.prototype._removeRemoteTrack=function(e){e.dispose();var t=e.getParticipantId(),n=this.remoteTracks.get(t);n?n.delete(e.getType())||R.error("Failed to remove "+e+" - type mapping messed up ?"):R.error("removeRemoteTrack: no remote tracks map for "+t),this.eventEmitter.emit(d.a.REMOTE_TRACK_REMOVED,e)},A.prototype._removeRemoteTrackById=function(e,t){var n=this._getRemoteTrackById(e,t);return n&&this._removeRemoteTrack(n),n};var I=function(e){if("object"!=typeof e||null===e||"string"!=typeof e.sdp)return R.warn("An empty description was passed as an argument."),e;var t=n(25),r=t.parse(e.sdp);void 0!==r&&void 0!==r.media&&Array.isArray(r.media)&&r.media.forEach(function(e){var t=[],n=[];if(void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&e.ssrcGroups.forEach(function(e){void 0!==e.semantics&&"FID"===e.semantics&&void 0!==e.ssrcs&&t.push(Number(e.ssrcs.split(" ")[0]))}),Array.isArray(e.ssrcs)){var r;for(r=0;r<e.ssrcs.length;r++)"object"==typeof e.ssrcs[r]&&void 0!==e.ssrcs[r].id&&t.indexOf(e.ssrcs[r].id)>=0&&(n.push(e.ssrcs[r]),delete e.ssrcs[r]);for(r=0;r<e.ssrcs.length;r++)void 0!==e.ssrcs[r]&&n.push(e.ssrcs[r]);e.ssrcs=(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!p.a.isChrome()||!p.a.isVersionGreaterThan(70))return e;var t=_toConsumableArray(e);return e.filter(function(e){return"mslabel"===e.attribute&&"-"===e.value}).map(function(e){return e.id}).forEach(function(e){var n=t.find(function(t){return t.id===e&&"cname"===t.attribute});n.value="recvonly-"+e,(t=t.filter(function(t){return t.id!==e})).push(n)}),t})(n)}});var i=t.write(r);return new RTCSessionDescription({type:e.type,sdp:i})};A.prototype.getLocalSSRC=function(e){var t=this._getSSRC(e.rtcId);return t&&t.ssrcs[0]},A.prototype._injectSsrcGroupForUnifiedSimulcast=function(e){var t=a.a.parse(e.sdp),n=t.media.find(function(e){return"video"===e.type});n.ssrcGroups=n.ssrcGroups||[];var r=n.ssrcGroups.filter(function(e){return"FID"===e.semantics});if(n.simulcast||n.simulcast_03){var i=[];if(r&&r.length?r.forEach(function(e){i.push(e.ssrcs.split(" ")[0])}):n.ssrcs.forEach(function(e){"msid"===e.attribute&&i.push(e.id)}),n.ssrcGroups.find(function(e){return"SIM"===e.semantics}))return e;n.ssrcGroups.push({semantics:"SIM",ssrcs:i.join(" ")})}return new RTCSessionDescription({type:e.type,sdp:a.a.write(t)})};var w={signalingState:function(){return this.peerconnection.signalingState},iceConnectionState:function(){return this.peerconnection.iceConnectionState},localDescription:function(){var e=this.peerconnection.localDescription;return e?(this.trace("getLocalDescription::preTransform",k(e)),p.a.usesUnifiedPlan()?(e=this.interop.toPlanB(e),this.trace("getLocalDescription::postTransform (Plan B)",k(e)),e=this._injectSsrcGroupForUnifiedSimulcast(e),this.trace("getLocalDescription::postTransform (inject ssrc group)",k(e))):(p.a.doesVideoMuteByStreamRemove()&&(e=this.localSdpMunger.maybeAddMutedLocalVideoTracksToSDP(e),R.debug("getLocalDescription::postTransform (munge local SDP)",e)),e=(function(e,t){if(!e)throw new Error("No local description passed in.");var n=new y.a(e.sdp),r=n.selectMedia("audio"),i=!1;r&&"sendrecv"!==r.direction&&(t.startSilent?r.direction="inactive":r.direction="sendrecv",i=!0);var o=n.selectMedia("video");return o&&"sendrecv"!==o.direction&&(o.direction="sendrecv",i=!0),i?new RTCSessionDescription({type:e.type,sdp:n.toRawSDP()}):e})(e,this.options)),e=this.localSdpMunger.transformStreamIdentifiers(e)):(R.debug("getLocalDescription no localDescription found"),{})},remoteDescription:function(){var e=this.peerconnection.remoteDescription;return e?(this.trace("getRemoteDescription::preTransform",k(e)),p.a.usesUnifiedPlan()&&(e=this.interop.toPlanB(e),this.trace("getRemoteDescription::postTransform (Plan B)",k(e))),e):(R.debug("getRemoteDescription no remoteDescription found"),{})}};function P(e){return e.getLocalTracks().some(function(e){return"camera"===e.videoType})}Object.keys(w).forEach(function(e){Object.defineProperty(A.prototype,e,{get:w[e]})}),A.prototype._getSSRC=function(e){return this.localSSRCs.get(e)},A.prototype._mungeCodecOrder=function(e){var t=this;if(!this.codecPreference||p.a.supportsCodecPreferences())return e;var n=a.a.parse(e.sdp),r=n.media.find(function(e){return e.type===t.codecPreference.mediaType});return this.codecPreference.enable?(g.a.preferCodec(r,this.codecPreference.mimeType),this.codecPreference.mimeType===s.H264&&p.a.isReactNative()&&this.isP2P&&g.a.stripCodec(r,this.codecPreference.mimeType,!0)):g.a.stripCodec(r,this.codecPreference.mimeType),new RTCSessionDescription({type:e.type,sdp:a.a.write(n)})},A.prototype.containsTrack=function(e){if(e.isLocal())return this.localTracks.has(e.rtcId);var t=e.getParticipantId(),n=this.remoteTracks.get(t);return Boolean(n&&n.get(e.getType())===e)},A.prototype.addTrack=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.rtcId;if(R.info("add "+e+" to: "+this),this.localTracks.has(n))return Promise.reject(new Error(e+" is already in "+this));if(this.localTracks.set(n,e),p.a.usesUnifiedPlan()&&this.isP2P)this.tpcUtils.addTrack(e,t);else{var r=e.getOriginalStream();if(r)this._addStream(r);else if(!p.a.doesVideoMuteByStreamRemove()||e.isAudioTrack()||e.isVideoTrack()&&!e.isMuted())return Promise.reject(new Error(this+" no WebRTC stream for: "+e));if(p.a.usesPlanB()&&p.a.doesVideoMuteByStreamRemove()&&e.isVideoTrack()&&e.isMuted()){var i=this.generateNewStreamSSRCInfo(e);this.sdpConsistency.setPrimarySsrc(i.ssrcs[0]);var o=i.groups.find(function(e){return"SIM"===e.semantics});o&&this.simulcast.setSsrcCache(o.ssrcs);var a=i.groups.filter(function(e){return"FID"===e.semantics});if(a){var s=new Map;a.forEach(function(e){var t=e.ssrcs[0],n=e.ssrcs[1];s.set(t,n)}),this.rtxModifier.setSsrcCache(s)}}}var c=Promise.resolve();return p.a.isFirefox()&&(c=this.tpcUtils.setEncodings(e)),c},A.prototype.addTrackUnmute=function(e){if(!this._assertTrackBelongs("addTrackUnmute",e))return Promise.reject("Track not found on the peerconnection");R.info("Adding "+e+" as unmute to "+this);var t=e.getOriginalStream();return t?p.a.usesUnifiedPlan()?this.tpcUtils.addTrackUnmute(e):(this._addStream(t),Promise.resolve(!0)):(R.error("Unable to add "+e+" as unmute to "+this+" - no WebRTC stream"),Promise.reject("Stream not found"))},A.prototype._addStream=function(e){this.peerconnection.addStream(e),this._addedStreams.push(e)},A.prototype._removeStream=function(e){this.peerconnection.removeStream(e),this._addedStreams=this._addedStreams.filter(function(t){return t!==e})},A.prototype._assertTrackBelongs=function(e,t){var n=this.localTracks.has(t.rtcId);return n||R.error(e+": "+t+" does not belong to "+this),n},A.prototype.isMediaStreamInPc=function(e){return this._addedStreams.indexOf(e)>-1},A.prototype.removeTrack=function(e){var t=e.getOriginalStream();this.trace("removeStream",e.rtcId,t?t.id:void 0),this._assertTrackBelongs("removeStream",e)&&(this.localTracks.delete(e.rtcId),this.localSSRCs.delete(e.rtcId),t&&this.peerconnection.removeStream(t))},A.prototype.findSenderByKind=function(e){return this.peerconnection.getSenders().find(function(t){return t.track&&t.track.kind===e})},A.prototype.findReceiverForTrack=function(e){return this.peerconnection.getReceivers().find(function(t){return t.track===e})},A.prototype.findSenderForTrack=function(e){return this.peerconnection.getSenders().find(function(t){return t.track===e})},A.prototype.replaceTrack=function(e,t){var n=this;if(p.a.usesUnifiedPlan())return this.tpcUtils.replaceTrack(e,t).then(function(){return n.isSimulcastOn()&&p.a.usesSdpMungingForSimulcast()});var r=Promise.resolve();return e&&this.removeTrack(e),t&&(r=this.addTrack(t)),r.then(function(){return!0})},A.prototype.removeTrackMute=function(e){var t=e.getOriginalStream();return this.trace("removeStreamMute",e.rtcId,t?t.id:null),this._assertTrackBelongs("removeStreamMute",e)?p.a.usesUnifiedPlan()?this.tpcUtils.removeTrackMute(e):t?(R.info("Removing "+e+" as mute from "+this),this._removeStream(t),Promise.resolve(!0)):(R.error("removeStreamMute - no WebRTC stream for "+e),Promise.reject("Stream not found")):Promise.reject("Track not found in the peerconnection")},A.prototype.createDataChannel=function(e,t){return this.trace("createDataChannel",e,t),this.peerconnection.createDataChannel(e,t)},A.prototype._ensureSimulcastGroupIsLast=function(e){var t=e.sdp,n=t.indexOf("m=video"),r=t.indexOf("a=ssrc-group:SIM",n),i=t.lastIndexOf("a=ssrc-group");if(-1===r||-1===i||i===r)return e;var o=t.indexOf("\r\n",r),a=t.substring(r,o+2);i=(t=t.replace(a,"")).lastIndexOf("a=ssrc-group");var s=t.indexOf("\r\n",i);return t=t.slice(0,s)+"\r\n"+a.trim()+t.slice(s),new RTCSessionDescription({type:e.type,sdp:t})},A.prototype._adjustLocalMediaDirection=function(e){var t=new y.a(e.sdp),n=!1,r=t.selectMedia("audio");if(r){var i=this._getDesiredMediaDirection(c.a);r.direction!==i&&(r.direction=i,R.info("Adjusted local audio direction to "+i),n=!0)}else R.warn('No "audio" media found int the local description');var o=t.selectMedia("video");if(o){var a=this._getDesiredMediaDirection(c.c);o.direction!==a&&(o.direction=a,R.info("Adjusted local video direction to "+a),n=!0)}else R.warn('No "video" media found in the local description');return n?new RTCSessionDescription({type:e.type,sdp:t.toRawSDP()}):e},A.prototype.setLocalDescription=function(e){var t=this,n=e;return this.trace("setLocalDescription::preTransform",k(n)),n=this._mungeCodecOrder(n),p.a.usesPlanB()?(n=this._adjustLocalMediaDirection(n),n=this._ensureSimulcastGroupIsLast(n)):(n=this.interop.toUnifiedPlan(n),this.trace("setLocalDescription::postTransform (Unified Plan)",k(n))),new Promise(function(e,r){t.peerconnection.setLocalDescription(n).then(function(){t.trace("setLocalDescriptionOnSuccess");var r=g.a.getUfrag(n.sdp);r!==t.localUfrag&&(t.localUfrag=r,t.eventEmitter.emit(d.a.LOCAL_UFRAG_CHANGED,t,r)),e()},function(e){t.trace("setLocalDescriptionOnFailure",e),t.eventEmitter.emit(d.a.SET_LOCAL_DESCRIPTION_FAILED,e,t),r(e)})})},A.prototype.setAudioTransferActive=function(e){R.debug(this+" audio transfer active: "+e);var t=this.audioTransferActive!==e;return this.audioTransferActive=e,p.a.usesUnifiedPlan()?(this.tpcUtils.setAudioTransferActive(e),!1):t},A.prototype.setSenderVideoDegradationPreference=function(){if(!this.peerconnection.getSenders)return R.debug("Browser does not support RTCRtpSender"),Promise.resolve();var e=this.getLocalVideoTrack(),t=this.findSenderByKind(c.c);if(!t)return Promise.resolve();var n=t.getParameters();if(!n.encodings||!n.encodings.length)return Promise.resolve();for(var r in n.encodings)if(n.encodings.hasOwnProperty(r)){var i=e.videoType===h.CAMERA?"maintain-framerate":"maintain-resolution";R.info("Setting video sender degradation preference on "+this+" to "+i),n.encodings[r].degradationPreference=i}return t.setParameters(n)},A.prototype.setMaxBitRate=function(){if(!this.peerconnection.getSenders)return R.debug("Browser doesn't support RTCRtpSender"),Promise.resolve();var e=this.getLocalVideoTrack();if(!e)return Promise.resolve();var t=e.videoType;if(!(this.options.videoQuality&&this.options.videoQuality.maxBitratesVideo||p.a.usesPlanB()&&this.options.capScreenshareBitrate&&t===h.DESKTOP||p.a.usesUnifiedPlan()))return Promise.resolve();var n=e._originalStream&&e._originalStream.id!==e.getStreamId(),r=this.findSenderByKind(c.c);if(!r)return Promise.resolve();var i=r.getParameters();if(!i.encodings||!i.encodings.length)return Promise.resolve();if(this.isSimulcastOn()){for(var o in i.encodings)if(i.encodings.hasOwnProperty(o)){var a=p.a.usesPlanB()&&t===h.DESKTOP&&this.options.capScreenshareBitrate?n?this.videoBitrates.high:5e5:this.tpcUtils.localStreamEncodingsConfig[o].maxBitrate;R.info(this+" Setting a max bitrate of "+a+" bps on layer "+this.tpcUtils.localStreamEncodingsConfig[o].rid),i.encodings[o].maxBitrate=a}}else{var s=this.videoBitrates.high;if(t===h.CAMERA){var u=this.senderVideoMaxHeight?Math.floor(e.resolution/this.senderVideoMaxHeight):1,d=this.tpcUtils.localStreamEncodingsConfig.find(function(e){return e.scaleResolutionDownBy===u});d&&(R.info(this+" Setting a max bitrate of "+d.maxBitrate+" bps on local video track"),s=d.maxBitrate)}i.encodings[0].maxBitrate=s}return r.setParameters(i)},A.prototype.setRemoteDescription=function(e){var t=this;if(this.trace("setRemoteDescription::preTransform",k(e)),e=this._mungeCodecOrder(e),p.a.usesPlanB())this.isSimulcastOn()&&(e=this.simulcast.mungeRemoteDescription(e),this.trace("setRemoteDescription::postTransform (simulcast)",k(e))),e=I(e);else{var n=this.peerconnection.remoteDescription;e=this.interop.toUnifiedPlan(e,n),this.trace("setRemoteDescription::postTransform (Unified)",k(e)),this.isSimulcastOn()&&(e=this.simulcast.mungeRemoteDescription(e),e=this.tpcUtils.insertUnifiedPlanSimulcastReceive(e),this.trace("setRemoteDescription::postTransform (sim receive)",k(e)),e=this.tpcUtils.ensureCorrectOrderOfSsrcs(e))}return new Promise(function(n,r){t.peerconnection.setRemoteDescription(e).then(function(){t.trace("setRemoteDescriptionOnSuccess");var r=g.a.getUfrag(e.sdp);r!==t.remoteUfrag&&(t.remoteUfrag=r,t.eventEmitter.emit(d.a.REMOTE_UFRAG_CHANGED,t,r)),n()},function(e){t.trace("setRemoteDescriptionOnFailure",e),t.eventEmitter.emit(d.a.SET_REMOTE_DESCRIPTION_FAILED,e,t),r(e)})})},A.prototype.setSenderVideoConstraint=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t<0)throw new Error("Invalid frameHeight: "+t);if(p.a.isReactNative())return Promise.resolve();var n=null===t?this.senderVideoMaxHeight:t;this.senderVideoMaxHeight=n,R.log(this+" senderVideoMaxHeight: "+n);var r=this.getLocalVideoTrack();if(!r||r.isMuted()||r.videoType!==h.CAMERA)return Promise.resolve();var i=this.findSenderByKind(c.c);if(!i)return Promise.resolve();var o=i.getParameters();if(!o||!o.encodings||!o.encodings.length)return Promise.resolve();if(this.isSimulcastOn()){var a=this.tpcUtils.getLocalStreamHeightConstraints(r.track).map(function(e){return e<=n}),s=this.tpcUtils.localStreamEncodingsConfig.findIndex(function(e){return 4===e.scaleResolutionDownBy});for(var u in n>0&&-1!==s&&(a[s]=!0),o.encodings)o.encodings.hasOwnProperty(u)&&(o.encodings[u].active=a[u])}else n>0?(o.encodings[0].scaleResolutionDownBy=r.resolution>=n?Math.floor(r.resolution/n):1,o.encodings[0].active=!0):(o.encodings[0].scaleResolutionDownBy=void 0,o.encodings[0].active=!1);return R.info(this+" setting max height of "+n+", encodings: "+JSON.stringify(o.encodings)),i.setParameters(o).then(function(){if(r.maxEnabledResolution=n,e.eventEmitter.emit(d.a.LOCAL_TRACK_MAX_ENABLED_RESOLUTION_CHANGED,r),e.isP2P||!e.isSimulcastOn())return e.setMaxBitRate()})},A.prototype.setVideoTransferActive=function(e){R.debug(this+" video transfer active: "+e);var t=this.videoTransferActive!==e;return this.videoTransferActive=e,p.a.usesUnifiedPlan()?(this.tpcUtils.setVideoTransferActive(e),!1):t},A.prototype.sendTones=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;if(!this._dtmfSender){if(this.peerconnection.getSenders){var r=this.peerconnection.getSenders().find(function(e){return e.dtmf});this._dtmfSender=r&&r.dtmf,this._dtmfSender&&R.info(this+" initialized DTMFSender using getSenders")}if(!this._dtmfSender){var i=Array.from(this.localTracks.values()).find(function(e){return e.isAudioTrack()});this.peerconnection.createDTMFSender&&i&&(this._dtmfSender=this.peerconnection.createDTMFSender(i.getTrack())),this._dtmfSender&&R.info(this+" initialized DTMFSender using deprecated createDTMFSender")}this._dtmfSender&&(this._dtmfSender.ontonechange=this._onToneChange.bind(this))}if(this._dtmfSender){if(this._dtmfSender.toneBuffer)return void this._dtmfTonesQueue.push({tones:e,duration:t,interToneGap:n});this._dtmfSender.insertDTMF(e,t,n)}else R.warn(this+" sendTones - failed to select DTMFSender")},A.prototype._onToneChange=function(e){if(this._dtmfSender&&""===e.tone&&this._dtmfTonesQueue.length){var t=this._dtmfTonesQueue.shift(),n=t.tones,r=t.duration,i=t.interToneGap;this._dtmfSender.insertDTMF(n,r,i)}},A.prototype.generateRecvonlySsrc=function(){var e=g.a.generateSsrc();R.info(this+" generated new recvonly SSRC: "+e),this.sdpConsistency.setPrimarySsrc(e)},A.prototype.clearRecvonlySsrc=function(){R.info("Clearing primary video SSRC!"),this.sdpConsistency.clearVideoSsrcCache()},A.prototype.close=function(){this.trace("stop"),this.signalingLayer.off(l.a,this._peerMutedChanged),this.signalingLayer.off(l.b,this._peerVideoTypeChanged);for(var e,t=_createForOfIteratorHelperLoose(this.remoteTracks.values());!(e=t()).done;)for(var n,r=_createForOfIteratorHelperLoose(e.value.values());!(n=r()).done;){var i=n.value;this._removeRemoteTrack(i)}this.remoteTracks.clear(),this._addedStreams=[],this._dtmfSender=null,this._dtmfTonesQueue=[],this.rtc._removePeerConnection(this)||R.error("RTC._removePeerConnection returned false"),null!==this.statsinterval&&(window.clearInterval(this.statsinterval),this.statsinterval=null),R.info("Closing "+this+"..."),this.peerconnection.close()},A.prototype.createAnswer=function(e){return this._createOfferOrAnswer(!1,e)},A.prototype.createOffer=function(e){return this._createOfferOrAnswer(!0,e)},A.prototype._createOfferOrAnswer=function(e,t){var n=this,r=e?"Offer":"Answer";this.trace("create"+r,JSON.stringify(t,null," "));var i=function(e,t,i){try{n.trace("create"+r+"OnSuccess::preTransform",k(e)),p.a.usesPlanB()&&(n.hasAnyTracksOfType(c.c)||n.sdpConsistency.hasPrimarySsrcCached()||n.generateRecvonlySsrc(),e=new RTCSessionDescription({type:e.type,sdp:n.sdpConsistency.makeVideoPrimarySsrcsConsistent(e.sdp)}),n.trace("create"+r+"OnSuccess::postTransform (make primary audio/video ssrcs consistent)",k(e))),n.isSimulcastOn()&&p.a.usesSdpMungingForSimulcast()&&(!n.options.capScreenshareBitrate||n.options.capScreenshareBitrate&&P(n))&&(e=n.simulcast.mungeLocalDescription(e),n.trace("create"+r+"OnSuccess::postTransform (simulcast)",k(e))),!n.options.disableRtx&&p.a.usesSdpMungingForSimulcast()&&(e=new RTCSessionDescription({type:e.type,sdp:n.rtxModifier.modifyRtxSsrcs(e.sdp)}),n.trace("create"+r+"OnSuccess::postTransform (rtx modifier)",k(e)));var o=(function(e){var t=new Map,n=new Map;if("object"!=typeof e||null===e||"string"!=typeof e.sdp)return R.warn("An empty description was passed as an argument."),t;var r=a.a.parse(e.sdp);if(!Array.isArray(r.media))return t;for(var i,o=_createForOfIteratorHelperLoose(r.media);!(i=o()).done;){var s=i.value;if(Array.isArray(s.ssrcs)){if(Array.isArray(s.ssrcGroups))for(var c,u=_createForOfIteratorHelperLoose(s.ssrcGroups);!(c=u()).done;){var d=c.value;if(void 0!==d.semantics&&void 0!==d.ssrcs){var l=d.ssrcs.split(" ").map(function(e){return parseInt(e,10)}),h=l[0];d.ssrcs=l,n.has(h)||n.set(h,[]),n.get(h).push(d)}}for(var p,f=_createForOfIteratorHelperLoose(s.ssrcs);!(p=f()).done;){var m=p.value;if("msid"===m.attribute){var v=m.value,g=t.get(v);g||(g={ssrcs:[],groups:[],msid:v},t.set(v,g));var _=m.id;if(g.ssrcs.push(_),n.has(_))for(var y,S=_createForOfIteratorHelperLoose(n.get(_));!(y=S()).done;){var E=y.value;g.groups.push(E)}}}}}return t})(e);R.debug("Got local SSRCs MAP: ",o),n._processLocalSSRCsMap(o),t(e)}catch(t){n.trace("create"+r+"OnError",t),n.trace("create"+r+"OnError",k(e)),R.error("create"+r+"OnError",t,k(e)),i(t)}},o=function(t,i){n.trace("create"+r+"OnFailure",t);var o=e?d.a.CREATE_OFFER_FAILED:d.a.CREATE_ANSWER_FAILED;n.eventEmitter.emit(o,t,n),i(t)};return new Promise(function(r,a){(e?n.peerconnection.createOffer(t):n.peerconnection.createAnswer(t)).then(function(e){return i(e,r,a)},function(e){return o(e,a)})})},A.prototype._extractPrimarySSRC=function(e){return e&&e.groups&&e.groups.length?e.groups[0].ssrcs[0]:e&&e.ssrcs&&e.ssrcs.length?e.ssrcs[0]:null},A.prototype._processLocalSSRCsMap=function(e){for(var t,n=_createForOfIteratorHelperLoose(this.localTracks.values());!(t=n()).done;){var r=t.value,i=r.storedMSID;if(e.has(i)){var o=e.get(i);if(!o)return void R.error("No SSRC found for: "+i+" in "+this);var a=this.localSSRCs.get(r.rtcId),s=this._extractPrimarySSRC(o),c=this._extractPrimarySSRC(a);s!==c?(null===c?R.info("Storing new local SSRC for "+r+" in "+this,o):R.error("Overwriting SSRC for "+r+" "+i+" in "+this+" with: ",o),this.localSSRCs.set(r.rtcId,o),this.eventEmitter.emit(d.a.LOCAL_TRACK_SSRC_UPDATED,r,s)):R.debug("The local SSRC("+s+") for "+r+" "+i+"is still up to date in "+this)}else r.isVideoTrack()||r.isMuted()||R.warn("No SSRCs found in the local SDP for "+r+" MSID: "+i+" in "+this)}},A.prototype.addIceCandidate=function(e){return this.trace("addIceCandidate",JSON.stringify({candidate:e.candidate,sdpMid:e.sdpMid,sdpMLineIndex:e.sdpMLineIndex,usernameFragment:e.usernameFragment},null," ")),this.peerconnection.addIceCandidate(e)},A.prototype.getStats=function(e,t){p.a.isSafari()||p.a.isFirefox()||p.a.isReactNative()?this.peerconnection.getStats().then(e).catch(t||function(){}):this.peerconnection.getStats(e)},A.prototype.generateNewStreamSSRCInfo=function(e){var t=e.rtcId,n=this._getSSRC(t);if(n&&R.error("Will overwrite local SSRCs for track ID: "+t),this.isSimulcastOn()&&(!this.options.capScreenshareBitrate||this.options.capScreenshareBitrate&&P(this))){n={ssrcs:[],groups:[]};for(var r=0;r<T.a.length;r++)n.ssrcs.push(g.a.generateSsrc());n.groups.push({ssrcs:n.ssrcs.slice(),semantics:"SIM"})}else n={ssrcs:[g.a.generateSsrc()],groups:[]};if(!this.options.disableRtx)for(var i=n.ssrcs.length,o=0;o<i;++o){var a=n.ssrcs[o],s=g.a.generateSsrc();n.ssrcs.push(s),n.groups.push({ssrcs:[a,s],semantics:"FID"})}return n.msid=e.storedMSID,this.localSSRCs.set(t,n),n},A.prototype.toString=function(){return"TPC["+this.id+",p2p:"+this.isP2P+"]"}}).call(this,"modules/RTC/TraceablePeerConnection.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c});var r=n(4),i=n(9),o=n(29),a=Object(r.getLogger)(e);function s(e,t,n){a.debug("Updating mline to associate "+n+"rtx ssrc with primary stream, "+t.id);var r=t.id,i=t.msid,o=t.cname,s=e.getRtxSSRC(r);s!==n?(s&&(a.debug(r+" was previously associated with rtx"+s+", removing all references to it"),e.removeSSRC(s),a.debug("groups before filtering for "+s),a.debug(e.dumpSSRCGroups()),e.removeGroupsWithSSRC(s)),e.addSSRCAttribute({id:n,attribute:"cname",value:o}),e.addSSRCAttribute({id:n,attribute:"msid",value:i}),e.addSSRCGroup({semantics:"FID",ssrcs:r+" "+n})):a.debug(n+" was already associated with "+r)}var c=(function(){function e(){_classCallCheck(this,e),this.correspondingRtxSsrcs=new Map}return _createClass(e,[{key:"clearSsrcCache",value:function(){this.correspondingRtxSsrcs.clear()}},{key:"setSsrcCache",value:function(e){a.debug("Setting ssrc cache to ",e),this.correspondingRtxSsrcs=e}},{key:"modifyRtxSsrcs",value:function(e){var t=new o.a(e),n=t.selectMedia("video");return n?this.modifyRtxSsrcs2(n)?t.toRawSDP():e:(a.debug("No 'video' media found in the sdp: "+e),e)}},{key:"modifyRtxSsrcs2",value:function(e){if("recvonly"===e.direction)return a.debug("RtxModifier doing nothing, video m line is recvonly"),!1;if(e.getSSRCCount()<1)return a.debug("RtxModifier doing nothing, no video ssrcs present"),!1;a.debug("Current ssrc mapping: ",this.correspondingRtxSsrcs);var t=e.getPrimaryVideoSSRCs();a.debug("Parsed primary video ssrcs ",t," making sure all have rtx streams");for(var n,r=_createForOfIteratorHelperLoose(t);!(n=r()).done;){var o=n.value,c=e.getSSRCAttrValue(o,"msid"),u=e.getSSRCAttrValue(o,"cname"),d=this.correspondingRtxSsrcs.get(o);if(d)a.debug("Already have an associated rtx ssrc forvideo ssrc "+o+": "+d);else{a.debug("No previously associated rtx ssrc for video ssrc "+o);var l=e.getRtxSSRC(o);l?(a.debug("Rtx stream "+l+" already existed in the sdp as an rtx stream for "+o),d=l):(d=i.a.generateSsrc(),a.debug("Generated rtx ssrc "+d+" for ssrc "+o)),a.debug("Caching rtx ssrc "+d+" for video ssrc "+o),this.correspondingRtxSsrcs.set(o,d)}s(e,{id:o,cname:u,msid:c},d)}return!0}},{key:"stripRtx",value:function(e){var t=new o.a(e),n=t.selectMedia("video");if(!n)return a.debug("No 'video' media found in the sdp: "+e),e;if("recvonly"===n.direction)return a.debug("RtxModifier doing nothing, video m line is recvonly"),e;if(n.getSSRCCount()<1)return a.debug("RtxModifier doing nothing, no video ssrcs present"),e;if(!n.containsAnySSRCGroups())return a.debug("RtxModifier doing nothing, no video ssrcGroups present"),e;var r=n.findGroups("FID");n.removeGroupsBySemantics("FID");for(var i,s=_createForOfIteratorHelperLoose(r);!(i=s()).done;){var c=i.value,u=Object(o.c)(c);n.removeSSRC(u)}return t.toRawSDP()}}]),e})()}).call(this,"modules/xmpp/RtxModifier.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var r=n(4),i=n(29),o=Object(r.getLogger)(e),a=(function(){function e(t){_classCallCheck(this,e),this.clearVideoSsrcCache(),this.logPrefix=t}return _createClass(e,[{key:"clearVideoSsrcCache",value:function(){this.cachedPrimarySsrc=null,this.injectRecvOnly=!1}},{key:"setPrimarySsrc",value:function(e){if("number"!=typeof e)throw new Error("Primary SSRC must be a number!");this.cachedPrimarySsrc=e}},{key:"hasPrimarySsrcCached",value:function(){return Boolean(this.cachedPrimarySsrc)}},{key:"makeVideoPrimarySsrcsConsistent",value:function(e){var t=new i.a(e),n=t.selectMedia("video");if(!n)return o.debug(this.logPrefix+" no 'video' media found in the sdp: "+e),e;if("recvonly"===n.direction)this.cachedPrimarySsrc&&this.injectRecvOnly?n.addSSRCAttribute({id:this.cachedPrimarySsrc,attribute:"cname",value:"recvonly-"+this.cachedPrimarySsrc}):o.info(this.logPrefix+" no SSRC found for the recvonly videostream!");else{var r=n.getPrimaryVideoSsrc();if(!r)return o.info(this.logPrefix+" sdp-consistency couldn't parse new primary ssrc"),e;if(this.cachedPrimarySsrc){o.info(this.logPrefix+" sdp-consistency replacing new ssrc"+r+" with cached "+this.cachedPrimarySsrc),n.replaceSSRC(r,this.cachedPrimarySsrc);for(var a,s=_createForOfIteratorHelperLoose(n.ssrcGroups);!(a=s()).done;){var c=a.value;if("FID"===c.semantics){var u=Object(i.b)(c),d=Object(i.c)(c);u===r&&(c.ssrcs=this.cachedPrimarySsrc+" "+d)}}}else this.cachedPrimarySsrc=r,o.info(this.logPrefix+" sdp-consistency caching primary ssrc"+this.cachedPrimarySsrc);this.injectRecvOnly=!0}return t.toRawSDP()}}]),e})()}).call(this,"modules/xmpp/SdpConsistency.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return h});var r=n(15),i=n(7),o=n(5),a=n(64),s=n(4).getLogger(e),c=n(6),u=!1,d=!1,l=["abort","canplay","canplaythrough","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","ratechange","stalled","suspend","waiting"],h=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o,a,c,u,d,h,p){var f;if(_classCallCheck(this,n),(f=t.call(this,r,o,a,function(){},c,u)).rtc=e,"number"!=typeof d)throw new TypeError("SSRC "+d+" is not a number");return f.ssrc=d,f.ownerEndpointId=i,f.muted=h,f.isP2P=p,s.debug("New remote track added: "+_assertThisInitialized(f)),f.hasBeenMuted=h,f.rtc&&f.track&&f._bindTrackHandlers(),f._containerHandlers={},l.forEach(function(e){f._containerHandlers[e]=f._containerEventHandler.bind(_assertThisInitialized(f),e)}),_possibleConstructorReturn(f)}return _createClass(n,[{key:"_bindTrackHandlers",value:function(){var e=this;this.track.addEventListener("mute",function(){return e._onTrackMute()}),this.track.addEventListener("unmute",function(){return e._onTrackUnmute()}),this.track.addEventListener("ended",function(){s.debug("\"onended\" event("+Date.now()+"): "+e)})}},{key:"_onTrackMute",value:function(){s.debug("\"onmute\" event("+Date.now()+"): "+this),this.rtc.eventEmitter.emit(c.REMOTE_TRACK_MUTE,this)}},{key:"_onTrackUnmute",value:function(){s.debug("\"onunmute\" event("+Date.now()+"): "+this),this.rtc.eventEmitter.emit(c.REMOTE_TRACK_UNMUTE,this)}},{key:"setMute",value:function(e){this.muted!==e&&(e&&(this.hasBeenMuted=!0),this.stream&&(this.stream.muted=e),this.muted=e,this.emit(r.TRACK_MUTE_CHANGED,this))}},{key:"isMuted",value:function(){return this.muted}},{key:"getParticipantId",value:function(){return this.ownerEndpointId}},{key:"isLocal",value:function(){return!1}},{key:"getSSRC",value:function(){return this.ssrc}},{key:"_setVideoType",value:function(e){this.videoType!==e&&(this.videoType=e,this.emit(r.TRACK_VIDEOTYPE_CHANGED,e))}},{key:"_playCallback",value:function(){var e=this.isVideoTrack()?"video":"audio",t=window.performance.now();console.log("(TIME) Render "+e+":\t",t),this.conference.getConnectionTimes()[e+".render"]=t;var n=window.connectionTimes["obtainPermissions.start"],r=window.connectionTimes["obtainPermissions.end"],a=isNaN(r)||isNaN(n)?0:r-n,s=t-(this.conference.getConnectionTimes()["session.initiate"]-this.conference.getConnectionTimes()["muc.joined"])-a;this.conference.getConnectionTimes()[e+".ttfm"]=s,console.log("(TIME) TTFM "+e+":\t",s),o.a.sendAnalytics(Object(i.N)({media_type:e,muted:this.hasBeenMuted,value:s}))}},{key:"_attachTTFMTracker",value:function(e){u&&this.isAudioTrack()||d&&this.isVideoTrack()||(this.isAudioTrack()&&(u=!0),this.isVideoTrack()&&(d=!0),e.addEventListener("canplay",this._playCallback.bind(this)))}},{key:"_onTrackAttach",value:function(e){var t=this;s.debug("Track has been attached to a container: "+this),l.forEach(function(n){e.addEventListener(n,t._containerHandlers[n])})}},{key:"_onTrackDetach",value:function(e){var t=this;s.debug("Track has been detached from a container: "+this),l.forEach(function(n){e.removeEventListener(n,t._containerHandlers[n])})}},{key:"_containerEventHandler",value:function(e){s.debug(e+" handler was called for a container with attached "+this)}},{key:"_getStatus",value:function(){var e=this.track,t=e.enabled,n=e.muted;return"readyState: "+e.readyState+", muted: "+n+", enabled: "+t}},{key:"toString",value:function(){return"RemoteTrack[userID: "+this.getParticipantId()+", type: "+this.getType()+", ssrc: "+this.getSSRC()+", p2p: "+this.isP2P+", status: "+this._getStatus()+"]"}}]),n})(a.a)}).call(this,"modules/RTC/JitsiRemoteTrack.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var r=n(4),i=n(8),o=n(29),a=Object(r.getLogger)(e),s=(function(){function e(t){_classCallCheck(this,e),this.tpc=t}return _createClass(e,[{key:"_addMutedLocalVideoTracksToSDP",value:function(e){var t=this.tpc.getLocalTracks(i.c);if(!t.length)return!1;1!==t.length&&a.error(this.tpc+" there is more than 1 video track ! Strange things may happen !",t);var n=e.selectMedia("video");if(!n)return a.debug(this.tpc+' unable to hack local video track SDP- no "video" media'),!1;for(var r,o=!1,s=_createForOfIteratorHelperLoose(t);!(r=s()).done;){var c=r.value,u=c.isMuted(),d=c.getOriginalStream(),l=d&&this.tpc.isMediaStreamInPc(d),h=u||!l;if(a.debug(this.tpc+" "+c+" muted: "+u+", is in PeerConnection: "+l+" => should fake sdp ? : "+h),h){var p=this.tpc.isSimulcastOn()?this.tpc.simulcast.ssrcCache:[this.tpc.sdpConsistency.cachedPrimarySsrc];if(p.length){o=!0,n.direction="sendrecv";for(var f,m="injected-"+p[0],v=_createForOfIteratorHelperLoose(p);!(f=v()).done;){var g=f.value;n.removeSSRC(g),a.debug(this.tpc+" injecting video SSRC: "+g+" for "+c),n.addSSRCAttribute({id:g,attribute:"cname",value:m}),n.addSSRCAttribute({id:g,attribute:"msid",value:c.storedMSID})}if(p.length>1){var _={ssrcs:p.join(" "),semantics:"SIM"};n.findGroup(_.semantics,_.ssrcs)||(a.debug(this.tpc+" injecting SIM group for "+c,_),n.addSSRCGroup(_))}this.tpc.options.disableRtx||this.tpc.rtxModifier.modifyRtxSsrcs2(n)}else a.error("No SSRCs stored for: "+c+" in "+this.tpc)}}return o}},{key:"_transformMediaIdentifiers",value:function(e){for(var t,n=this.tpc.id,r=_createForOfIteratorHelperLoose(e.ssrcs);!(t=r()).done;){var i=t.value;switch(i.attribute){case"cname":case"label":case"mslabel":i.value=i.value&&i.value+"-"+n;break;case"msid":if(i.value){var o=i.value.split(" ");if(2===o.length){var s=o[0],c=o[1];i.value=s+"-"+n+" "+c+"-"+n}else a.warn("Unable to munge local MSID- weird format detected: "+i.value)}}}}},{key:"maybeAddMutedLocalVideoTracksToSDP",value:function(e){if(!e)throw new Error("No local description passed in.");var t=new o.a(e.sdp);return this._addMutedLocalVideoTracksToSDP(t)?new RTCSessionDescription({type:e.type,sdp:t.toRawSDP()}):e}},{key:"transformStreamIdentifiers",value:function(e){if(!e||!e.sdp||!e.type)return e;var t=new o.a(e.sdp),n=t.selectMedia("audio");n&&this._transformMediaIdentifiers(n);var r=t.selectMedia("video");return r&&this._transformMediaIdentifiers(r),new RTCSessionDescription({type:e.type,sdp:t.toRawSDP()})}}]),e})()}).call(this,"modules/RTC/LocalSdpMunger.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return m});var r=n(4),i=n(1),o=n(6),a=n(30),s=n(34),c=n(13),u=n(0),d=Object(r.getLogger)(e),l=[{width:1920,height:1080,layers:3,max:5e3,target:4e3,min:800},{width:1280,height:720,layers:3,max:2500,target:2500,min:600},{width:960,height:540,layers:3,max:900,target:900,min:450},{width:640,height:360,layers:2,max:700,target:500,min:150},{width:480,height:270,layers:2,max:450,target:350,min:150},{width:320,height:180,layers:1,max:200,target:150,min:30}],h=800,p=null;function f(e,t,n){if(n<15e3)return 1;var r=0,i=Math.min(t.height,t.width);if(e){var o=l.find(function(e){return e.height<=i});if(o){var a=function(){var e=i;if(!(o=l.find(function(t){return t.height===e})))return"break";r+=o.target};for(i=o.height;i>=180;i/=2){if("break"===a())break}}}else{var s=t.width*t.height;r=s<=76800?600:s<=307200?1700:s<=518400?2e3:2500}return Math.min(r,(function(e){return e>6e4?Number.MAX_SAFE_INTEGER:h*Math.pow(1.08,e/1e3)})(Math.max(0,n-1e3)))}var m=(function(){function e(t,n,r){var s=this;_classCallCheck(this,e),this.eventEmitter=n,this._conference=t,this._localStats={connectionQuality:100,jvbRTT:void 0},this._lastConnectionQualityUpdate=-1,this._remoteStats={},this._timeIceConnected=-1,this._timeVideoUnmuted=-1,this._timeLastBwCapRemoved=-1,r.config.startBitrate&&r.config.startBitrate>0&&(h=r.config.startBitrate),t.on(i.CONNECTION_INTERRUPTED,function(){s._updateLocalConnectionQuality(0),s.eventEmitter.emit(a.LOCAL_STATS_UPDATED,s._localStats),s._broadcastLocalStats()}),t.room.addListener(u.ICE_CONNECTION_STATE_CHANGED,function(e,t){e.isP2P||"connected"!==t||(s._timeIceConnected=window.performance.now())}),t.on(i.ENDPOINT_MESSAGE_RECEIVED,function(e,t){"stats"===t.type&&s._updateRemoteStats(e.getId(),t.values)}),t.statistics.addConnectionStatsListener(this._updateLocalStats.bind(this)),t.on(i.TRACK_MUTE_CHANGED,function(e){e.isVideoTrack()&&(e.isMuted()?s._timeVideoUnmuted=-1:s._maybeUpdateUnmuteTime())}),t.on(i.TRACK_ADDED,function(e){e.isVideoTrack()&&!e.isMuted()&&s._maybeUpdateUnmuteTime()}),t.rtc.on(o.LOCAL_TRACK_MAX_ENABLED_RESOLUTION_CHANGED,function(e){s._localStats.maxEnabledResolution=e.maxEnabledResolution}),t.on(i.SERVER_REGION_CHANGED,function(e){s._localStats.serverRegion=e}),t.on(i.PROPERTIES_CHANGED,function(e){s._localStats.bridgeCount=Number((e||{})["bridge-count"])})}return _createClass(e,[{key:"_maybeUpdateUnmuteTime",value:function(){this._timeVideoUnmuted<0&&(this._timeVideoUnmuted=window.performance.now())}},{key:"_calculateConnectionQuality",value:function(e,t,n){var r,i=s[n],o=100;if(this._localStats.packetLoss&&(r=this._localStats.packetLoss.upload,t&&(r*=.5)),t||!i||e===c.DESKTOP||this._timeIceConnected<0||this._timeVideoUnmuted<0)void 0===r?(d.error("Cannot calculate connection quality, unknown packet loss."),o=100):o=r<=2?100:r<=4?70:r<=6?50:r<=8?30:r<=12?10:0;else{var a=this._conference.getActivePeerConnection(),u=Boolean(a&&a.isSimulcastOn()),l=a&&a.bandwidthLimiter&&a.bandwidthLimiter.getBandwidthLimit("video");!l&&p&&(this._timeLastBwCapRemoved=window.performance.now(),h=p),p=l;var m=f(u,i,window.performance.now()-Math.max(this._timeVideoUnmuted,this._timeIceConnected,this._timeLastBwCapRemoved));m=Math.min(.9*m,2500),p&&(m=Math.min(m,p)),o=100*this._localStats.bitrate.upload/m,r&&r>=10&&(o=Math.min(o,30))}if(this._lastConnectionQualityUpdate>0){var v=this._localStats.connectionQuality,g=(window.performance.now()-this._lastConnectionQualityUpdate)/1e3;o=Math.min(o,v+2*g)}return Math.min(100,o)}},{key:"_updateLocalConnectionQuality",value:function(e){this._localStats.connectionQuality=e,this._lastConnectionQualityUpdate=window.performance.now()}},{key:"_broadcastLocalStats",value:function(){var e={bitrate:this._localStats.bitrate,packetLoss:this._localStats.packetLoss,connectionQuality:this._localStats.connectionQuality,jvbRTT:this._localStats.jvbRTT,serverRegion:this._localStats.serverRegion,maxEnabledResolution:this._localStats.maxEnabledResolution,avgAudioLevels:this._localStats.localAvgAudioLevels};try{this._conference.broadcastEndpointMessage({type:"stats",values:e})}catch(e){}}},{key:"_updateLocalStats",value:function(e,t){if(!e.isP2P){var n=t.transport&&t.transport.length&&t.transport[0].rtt;this._localStats.jvbRTT=n||void 0}if(e===this._conference.getActivePeerConnection()){var r,i=!this._conference.isConnectionInterrupted(),o=this._conference.getLocalVideoTrack(),s=o?o.videoType:void 0,c=!o||o.isMuted(),u=o?Math.min(o.resolution,o.maxEnabledResolution):null;for(r in c||this._maybeUpdateUnmuteTime(),t)t.hasOwnProperty(r)&&(this._localStats[r]=t[r]);i&&this._updateLocalConnectionQuality(this._calculateConnectionQuality(s,c,u)),this.eventEmitter.emit(a.LOCAL_STATS_UPDATED,this._localStats),this._broadcastLocalStats()}}},{key:"_updateRemoteStats",value:function(e,t){this._remoteStats[e]={bitrate:t.bitrate,packetLoss:t.packetLoss,connectionQuality:t.connectionQuality,jvbRTT:t.jvbRTT,serverRegion:t.serverRegion,maxEnabledResolution:t.maxEnabledResolution,avgAudioLevels:t.avgAudioLevels},this.eventEmitter.emit(a.REMOTE_STATS_UPDATED,e,this._remoteStats[e])}},{key:"getStats",value:function(){return this._localStats}}]),e})()}).call(this,"modules/connectivity/ConnectionQuality.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var r=n(4),i=n(16),o=n(1),a=Object(r.getLogger)(e),s=(function(){function e(t){_classCallCheck(this,e),this._conference=t}return _createClass(e,[{key:"_actOnIceFailed",value:function(){var e=this._conference.options.config.enableIceRestart,t=void 0!==e&&!e,n=this._conference.room.supportsRestartByTerminate(),r=n&&!e;if(a.info("ICE failed, enableIceRestart: "+e+", supports restart by terminate: "+n),t||!e&&!n)return a.info("ICE failed, but ICE restarts are disabled"),void this._conference.eventEmitter.emit(o.CONFERENCE_FAILED,i.ICE_FAILED);var s=this._conference.jvbJingleSession,c=s&&s.getIceConnectionState();s?"connected"===c?a.info("ICE connection restored - not sending ICE failed"):(a.info("Sending ICE failed - the connection did not recover, ICE state: "+c+", use 'session-terminate': "+r),r?this._conference.jvbJingleSession.terminate(function(){a.info("session-terminate for ice restart - done")},function(e){a.error("session-terminate for ice restart - error: "+e.message)},{reason:"connectivity-error",reasonDescription:"ICE FAILED",requestRestart:!0,sendSessionTerminate:!0}):this._conference.jvbJingleSession.sendIceFailedNotification()):a.warn("Not sending ICE failed - no JVB connection")}},{key:"start",value:function(){var e=this;this._conference.xmpp.ping(65e3).then(function(){e._canceled||(e._iceFailedTimeout=window.setTimeout(function(){e._iceFailedTimeout=void 0,e._actOnIceFailed()},2e3))},function(e){a.error("PING error/timeout - not sending ICE failed",e)})}},{key:"cancel",value:function(){this._canceled=!0,window.clearTimeout(this._iceFailedTimeout)}}]),e})()}).call(this,"modules/connectivity/IceFailedHandling.js")},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(19),i=n.n(r),o=n(1),a=n(15),s=n(3),c=n(22),u=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._conference=e,r._timeoutTrigger=null,r._hasAudioInput=null,s.a.supportsReceiverStats()||e.statistics.addAudioLevelListener(r._audioLevel.bind(_assertThisInitialized(r))),e.on(o.TRACK_ADDED,r._trackAdded.bind(_assertThisInitialized(r))),r}return _createClass(n,[{key:"_clearTriggerTimeout",value:function(){clearTimeout(this._timeoutTrigger),this._timeoutTrigger=null}},{key:"_handleAudioInputStateChange",value:function(e){var t=0!==e;null!==this._hasAudioInput&&this._hasAudioInput===t||(this._hasAudioInput=t,this.emit(c.AUDIO_INPUT_STATE_CHANGE,this._hasAudioInput))}},{key:"_handleNoAudioInputDetection",value:function(e){var t=this;this._eventFired||(0!==e||this._timeoutTrigger?0!==e&&this._timeoutTrigger&&this._clearTriggerTimeout():this._timeoutTrigger=setTimeout(function(){t._eventFired=!0,t.emit(c.NO_AUDIO_INPUT)},4e3))}},{key:"_audioLevel",value:function(e,t,n,r){if(r&&this._audioTrack){var i=e.localSSRCs.get(this._audioTrack.rtcId);i&&i.ssrcs.includes(t)&&(this._handleAudioInputStateChange(n),this._handleNoAudioInputDetection(n))}}},{key:"_trackAdded",value:function(e){var t=this;e.isLocalAudioTrack()&&(this._audioTrack=e,this._eventFired=!1,this._clearTriggerTimeout(),s.a.supportsReceiverStats()&&(e.on(a.NO_AUDIO_INPUT,function(e){t._handleNoAudioInputDetection(e)}),e.on(a.TRACK_AUDIO_LEVEL_CHANGED,function(e){t._handleNoAudioInputDetection(e),t._handleAudioInputStateChange(e)})))}}]),n})(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),i=n(6),o=n.n(i),a=(function(){function e(t){_classCallCheck(this,e),this.conference=t,t.addEventListener(r.TRACK_AUDIO_LEVEL_CHANGED,this._audioLevel.bind(this)),this.myUserID=this.conference.myUserId()}return _createClass(e,[{key:"_audioLevel",value:function(e,t){!this.conference.isP2PActive()||t<=.6||e===this.myUserID&&this.conference.getLocalAudioTrack().isMuted()||this.conference.rtc.eventEmitter.emit(o.a.DOMINANT_SPEAKER_CHANGED,e)}}]),e})()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(19),i=n(27),o=n(22),a=(function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this))._processing=!1,e._scoreArray=[],e._audioLvlArray=[],e._active=!1,e._calculateNoisyScore=e._calculateNoisyScore.bind(_assertThisInitialized(e)),e}return _createClass(n,[{key:"_calculateNoisyScore",value:function(){var e=Object(i.b)(this._scoreArray),t=Object(i.b)(this._audioLvlArray);e<.2&&t>.04&&(this.emit(o.VAD_NOISY_DEVICE),this._setActiveState(!1)),this.reset()}},{key:"_recordValues",value:function(e,t){this._scoreArray.push(e),this._audioLvlArray.push(t)}},{key:"_setActiveState",value:function(e){this._active=e,this.emit(o.DETECTOR_STATE_CHANGE,this._active)}},{key:"changeMuteState",value:function(e){this._setActiveState(!e),this.reset()}},{key:"isActive",value:function(){return this._active}},{key:"reset",value:function(){this._processing=!1,this._scoreArray=[],this._audioLvlArray=[],clearTimeout(this._processTimeout)}},{key:"processVADScore",value:function(e){if(this._active)if(this._processing){var t=Object(i.c)(e.pcmData);this._recordValues(e.score,Object(i.b)(t))}else if(e.score<.2){var n=Object(i.c)(e.pcmData),r=Object(i.b)(n);r>.02&&(this._processing=!0,this._recordValues(e.score,r),this._processTimeout=setTimeout(this._calculateNoisyScore,1500))}}}]),n})(r.EventEmitter)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(19),i=n(27),o=n(22),a=(function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this))._processing=!1,e._scoreArray=[],e._active=!1,e._calculateVADScore=e._calculateVADScore.bind(_assertThisInitialized(e)),e}return _createClass(n,[{key:"_calculateVADScore",value:function(){Object(i.b)(this._scoreArray)>.6&&(this.emit(o.VAD_TALK_WHILE_MUTED),this._setActiveState(!1)),this.reset()}},{key:"_setActiveState",value:function(e){this._active=e,this.emit(o.DETECTOR_STATE_CHANGE,this._active)}},{key:"changeMuteState",value:function(e){this._setActiveState(e),this.reset()}},{key:"isActive",value:function(){return this._active}},{key:"processVADScore",value:function(e){this._active&&(this._processing?this._scoreArray.push(e.score):e.score>.9&&(this._processing=!0,this._scoreArray.push(e.score),this._processTimeout=setTimeout(this._calculateVADScore,700)))}},{key:"reset",value:function(){this._processing=!1,this._scoreArray=[],clearTimeout(this._processTimeout)}}]),n})(r.EventEmitter)},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return d});var r=n(4),i=n(1),o=n(67),a=n(7),s=n(5),c=Object(r.getLogger)(e),u=(function(){function e(t,n){_classCallCheck(this,e),this.participant=t,this.e2eping=n,this.id=t.getId(),this.requests={},this.lastRequestId=1,this.clearIntervals=this.clearIntervals.bind(this),this.sendRequest=this.sendRequest.bind(this),this.handleResponse=this.handleResponse.bind(this),this.maybeSendAnalytics=this.maybeSendAnalytics.bind(this),this.sendAnalytics=this.sendAnalytics.bind(this),n.isDataChannelOpen&&this.sendRequest(),this.pingInterval=window.setInterval(this.sendRequest,n.pingIntervalMs),this.analyticsInterval=window.setTimeout(this.maybeSendAnalytics,this.e2eping.analyticsIntervalMs)}return _createClass(e,[{key:"clearIntervals",value:function(){this.pingInterval&&window.clearInterval(this.pingInterval),this.analyticsInterval&&window.clearInterval(this.analyticsInterval)}},{key:"sendRequest",value:function(){var e=this.lastRequestId++,t={type:"e2e-ping-request",id:e};this.e2eping.sendMessage(t,this.id),this.requests[e]={id:e,timeSent:window.performance.now()}}},{key:"handleResponse",value:function(e){var t=this.requests[e.id];t&&(t.rtt=window.performance.now()-t.timeSent,this.e2eping.eventEmitter.emit(o.E2E_RTT_CHANGED,this.participant,t.rtt)),this.maybeSendAnalytics()}},{key:"maybeSendAnalytics",value:function(){var e,t,n=window.performance.now(),r=1/0;for(t in this.requests)this.requests.hasOwnProperty(t)&&((e=this.requests[t]).timeSent<n-this.e2eping.analyticsIntervalMs?delete this.requests[t]:e.rtt&&(r=Math.min(r,e.rtt)));r<1/0&&this.sendAnalytics(r)}},{key:"sendAnalytics",value:function(e){s.a.sendAnalytics(Object(a.D)(this.id,this.participant.getProperty("region"),e))}}]),e})(),d=(function(){function e(t,n,r){_classCallCheck(this,e),this.conference=t,this.eventEmitter=t.eventEmitter,this.sendMessage=r,this.pingIntervalMs=1e4,this.analyticsIntervalMs=6e4,this.participants={},this.isDataChannelOpen=!1,n&&n.e2eping&&("number"==typeof n.e2eping.pingInterval&&(this.pingIntervalMs=n.e2eping.pingInterval),"number"==typeof n.e2eping.analyticsInterval&&(this.analyticsIntervalMs=n.e2eping.analyticsInterval),this.analyticsIntervalMs>0&&this.analyticsIntervalMs<this.pingIntervalMs&&(this.analyticsIntervalMs=this.pingIntervalMs)),c.info("Initializing e2e ping; pingInterval="+this.pingIntervalMs+", analyticsInterval="+this.analyticsIntervalMs+"."),this.participantJoined=this.participantJoined.bind(this),t.on(i.USER_JOINED,this.participantJoined),this.participantLeft=this.participantLeft.bind(this),t.on(i.USER_LEFT,this.participantLeft),this.messageReceived=this.messageReceived.bind(this),t.on(i.ENDPOINT_MESSAGE_RECEIVED,this.messageReceived),this.dataChannelOpened=this.dataChannelOpened.bind(this),t.on(i.DATA_CHANNEL_OPENED,this.dataChannelOpened)}return _createClass(e,[{key:"dataChannelOpened",value:function(){for(var e in this.isDataChannelOpen=!0,this.participants)if(this.participants.hasOwnProperty(e)){var t=this.participants[e];window.setTimeout(t.sendRequest,200)}}},{key:"messageReceived",value:function(e,t){"e2e-ping-request"===t.type?this.handleRequest(e.getId(),t):"e2e-ping-response"===t.type&&this.handleResponse(e.getId(),t)}},{key:"participantJoined",value:function(e,t){this.pingIntervalMs<=0||(this.participants[e]&&(c.info("Participant wrapper already exists for "+e+". Clearing."),this.participants[e].clearIntervals(),delete this.participants[e]),this.participants[e]=new u(t,this))}},{key:"participantLeft",value:function(e){this.pingIntervalMs<=0||this.participants[e]&&(this.participants[e].clearIntervals(),delete this.participants[e])}},{key:"handleRequest",value:function(e,t){if(t&&t.id){var n={type:"e2e-ping-response",id:t.id};this.sendMessage(n,e)}else c.info("Received an invalid e2e ping request from "+e+".")}},{key:"handleResponse",value:function(e,t){var n=this.participants[e];n&&n.handleResponse(t)}},{key:"stop",value:function(){for(var e in c.info("Stopping e2eping"),this.conference.off(i.USER_JOINED,this.participantJoined),this.conference.off(i.USER_LEFT,this.participantLeft),this.conference.off(i.ENDPOINT_MESSAGE_RECEIVED,this.messageReceived),this.conference.off(i.DATA_CHANNEL_OPENED,this.dataChannelOpened),this.participants)this.participants.hasOwnProperty(e)&&this.participants[e].clearIntervals();this.participants={}}}]),e})()}).call(this,"modules/e2eping/e2eping.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var r=n(4),i=n(1),o=Object(r.getLogger)(e),a=(function(){function e(t){var n=this;_classCallCheck(this,e),this._conference=t,this._jvb121=!0,this._conference.addEventListener(i.USER_JOINED,function(){return n.evaluateStatus()}),this._conference.addEventListener(i.USER_LEFT,function(){return n.evaluateStatus()}),this._conference.addEventListener(i.P2P_STATUS,function(){return n.evaluateStatus()})}return _createClass(e,[{key:"evaluateStatus",value:function(){var e=this._jvb121,t=!this._conference.isP2PActive()&&this._conference.getParticipantCount()<=2;e!==t&&(this._jvb121=t,o.debug("JVB121 status "+e+" => "+t),this._conference.eventEmitter.emit(i.JVB121_STATUS,e,t))}}]),e})()}).call(this,"modules/event/Jvb121EventGenerator.js")},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(1),i=n(54),o=(function(){function e(t){var n=this;_classCallCheck(this,e),this.conference=t,this.conference.on(r._MEDIA_SESSION_STARTED,function(e){return n._onMediaSessionStarted(e)}),this.conference.on(r._MEDIA_SESSION_ACTIVE_CHANGED,function(){return n._propagateSendMaxFrameHeight()})}return _createClass(e,[{key:"_onMediaSessionStarted",value:function(e){var t=this;e.addListener(i.a.REMOTE_VIDEO_CONSTRAINTS_CHANGED,function(e){e===t.conference._getActiveMediaSession()&&t._propagateSendMaxFrameHeight()}),this.preferredReceiveMaxFrameHeight&&e.setReceiverVideoConstraint(this.preferredReceiveMaxFrameHeight),e.setSenderVideoDegradationPreference(),e.setSenderMaxBitrates()}},{key:"_propagateSendMaxFrameHeight",value:function(){var e=this.selectSendMaxFrameHeight(),t=[];if(e>=0)for(var n,r=_createForOfIteratorHelperLoose(this.conference._getMediaSessions());!(n=r()).done;){var i=n.value;t.push(i.setSenderVideoConstraint(e))}return Promise.all(t)}},{key:"selectSendMaxFrameHeight",value:function(){var e=this.conference._getActiveMediaSession(),t=e&&e.getRemoteRecvMaxFrameHeight();return this.preferredSendMaxFrameHeight>=0&&t>=0?Math.min(this.preferredSendMaxFrameHeight,t):t>=0?t:this.preferredSendMaxFrameHeight}},{key:"setPreferredReceiveMaxFrameHeight",value:function(e){this.preferredReceiveMaxFrameHeight=e;for(var t,n=_createForOfIteratorHelperLoose(this.conference._getMediaSessions());!(t=n()).done;){var r=t.value;e&&r.setReceiverVideoConstraint(e)}}},{key:"setPreferredSendMaxFrameHeight",value:function(e){return this.preferredSendMaxFrameHeight=e,this._propagateSendMaxFrameHeight()}}]),e})()},function(e,t,n){"use strict";(function(e){var r=n(4),i=n(0),o=n.n(i),a=n(76),s=n(51);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=Object(r.getLogger)(e);t.a=(function(){function e(t){_classCallCheck(this,e),this._sessions={},this._chatRoom=t,this.onPresence=this.onPresence.bind(this),this._chatRoom.eventEmitter.addListener(o.a.PRESENCE_RECEIVED,this.onPresence)}return _createClass(e,[{key:"getSession",value:function(e){return this._sessions[e]}},{key:"onPresence",value:function(e){var t=e.fromHiddenDomain,n=e.presence;s.a.isFromFocus(n)?this._handleFocusPresence(n):t&&this._handleJibriPresence(n)}},{key:"startRecording",value:function(e){var t=this,n=new a.a((function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){c(e,t,n[t])})}return e})({},e,{connection:this._chatRoom.connection}));return n.start({appData:e.appData,broadcastId:e.broadcastId,focusMucJid:this._chatRoom.focusMucJid,streamId:e.streamId}).then(function(){return t.getSession(n.getID())||(t._addSession(n),t._emitSessionUpdate(n)),n}).catch(function(e){return t._emitSessionUpdate(n),Promise.reject(e)})}},{key:"stopRecording",value:function(e){var t=this.getSession(e);return t?t.stop({focusMucJid:this._chatRoom.focusMucJid}):Promise.reject(new Error("Could not find session"))}},{key:"_addSession",value:function(e){this._sessions[e.getID()]=e}},{key:"_createSession",value:function(e,t,n){var r=new a.a({connection:this._chatRoom.connection,focusMucJid:this._chatRoom.focusMucJid,mode:n,sessionID:e,status:t});return this._addSession(r),r}},{key:"_emitSessionUpdate",value:function(e,t){this._chatRoom.eventEmitter.emit(o.a.RECORDER_STATE_CHANGED,e,t)}},{key:"_handleFocusPresence",value:function(e){var t=s.a.getFocusRecordingUpdate(e);if(t){var n=t.error,r=t.initiator,i=t.recordingMode,o=t.sessionID,a=t.status,c=this.getSession(o);c||"off"!==a?c&&c.getStatus()===a&&c.getError()===n?u.warn("Ignoring duplicate presence update: ",JSON.stringify(t)):(c||(c=this._createSession(o,a,i)),c.setStatus(a),n&&c.setError(n),this._emitSessionUpdate(c,r)):u.warn("Ignoring recording presence update","Received a new session with status off.")}}},{key:"_handleJibriPresence",value:function(e){var t=s.a.getHiddenDomainUpdate(e),n=t.liveStreamViewURL,r=t.mode,i=t.sessionID;if(i){var o=this.getSession(i);o||(o=this._createSession(i,"",r)),o.setLiveStreamViewURL(n),this._emitSessionUpdate(o)}else u.warn("Ignoring potential jibri presence due to no session id.")}}]),e})()}).call(this,"modules/recording/RecordingManager.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return d});var r=n(4),i=n(1),o=n(8),a=n(30),s=n(7),c=n(5),u=Object(r.getLogger)(e),d=(function(){function e(t){_classCallCheck(this,e),this._conference=t,this._localAudioLevelCache={},this._reportedParticipants=[],this._audioProblemCandidates={},this._numberOfRemoteAudioLevelsReceived={},this._onLocalAudioLevelsReport=this._onLocalAudioLevelsReport.bind(this),this._onRemoteAudioLevelReceived=this._onRemoteAudioLevelReceived.bind(this),this._clearUserData=this._clearUserData.bind(this),this._conference.on(a.REMOTE_STATS_UPDATED,this._onRemoteAudioLevelReceived),this._conference.statistics.addConnectionStatsListener(this._onLocalAudioLevelsReport),this._conference.on(i.USER_LEFT,this._clearUserData)}return _createClass(e,[{key:"_onRemoteAudioLevelReceived",value:function(e,t){var n=t.avgAudioLevels,r=this._numberOfRemoteAudioLevelsReceived[e]+1||0;if(this._numberOfRemoteAudioLevelsReceived[e]=r,!(-1!==this._reportedParticipants.indexOf(e)||e in this._audioProblemCandidates||n<=0||r<3)){var i=this._conference.getParticipantById(e);if(!(i&&i.getTracksByMediaType(o.a).length>0&&i.isAudioMuted())){var a=this._localAudioLevelCache[e];Array.isArray(a)&&!a.every(function(e){return 0===e})||(this._audioProblemCandidates[e]={remoteAudioLevels:n,localAudioLevels:[]})}}}},{key:"_onLocalAudioLevelsReport",value:function(e,t){var n=this,r=t.avgAudioLevels;e===this._conference.getActivePeerConnection()&&(Object.keys(r).forEach(function(e){if(-1===n._reportedParticipants.indexOf(e)){var t=n._localAudioLevelCache[e];Array.isArray(t)?t.length>=2&&t.shift():n._localAudioLevelCache[e]=[],n._localAudioLevelCache[e].push(r[e])}}),Object.keys(this._audioProblemCandidates).forEach(function(e){var t=n._audioProblemCandidates[e],i=t.localAudioLevels,o=t.remoteAudioLevels;if(i.push(r[e]),2===i.length){if(i.every(function(e){return void 0===e||0===e})){var a=JSON.stringify(i);c.a.sendAnalytics(Object(s.x)(e,a,o)),u.warn("A potential problem is detected with the audio output for participant "+e+", local audio levels: "+a+", remote audio levels: "+o),n._reportedParticipants.push(e),n._clearUserData(e)}delete n._audioProblemCandidates[e]}}))}},{key:"_clearUserData",value:function(e){delete this._localAudioLevelCache[e]}},{key:"dispose",value:function(){this._conference.off(a.REMOTE_STATS_UPDATED,this._onRemoteAudioLevelReceived),this._conference.off(i.USER_LEFT,this._clearUserData),this._conference.statistics.removeConnectionStatsListener(this._onLocalAudioLevelsReport),this._localAudioLevelCache=void 0,this._audioProblemCandidates=void 0,this._reportedParticipants=void 0,this._numberOfRemoteAudioLevelsReceived=void 0,this._conference=void 0}}]),e})()}).call(this,"modules/statistics/AudioOutputProblemDetector.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return v});var r=n(4),i=n(45),o=n.n(i),a=n(1),s=n(8),c=n(13),u=n(30),d=n(7),l=n(3),h=n(5),p=Object(r.getLogger)(e),f=(function(){function e(t){_classCallCheck(this,e),this.name=t,this.count=0,this.sum=0,this.samples=[]}return _createClass(e,[{key:"addNext",value:function(e){"number"!=typeof e?p.error(this.name+" - invalid value for idx: "+this.count,e):isNaN(e)||(this.sum+=e,this.samples.push(e),this.count+=1)}},{key:"calculate",value:function(){return this.sum/this.count}},{key:"appendReport",value:function(e){e[this.name+"_avg"]=this.calculate(),e[this.name+"_samples"]=JSON.stringify(this.samples)}},{key:"reset",value:function(){this.samples=[],this.sum=0,this.count=0}}]),e})(),m=(function(){function e(t,n,r){var i=this;_classCallCheck(this,e),this.isP2P=n,this._n=r,this._sampleIdx=0,this._avgRTT=new f("rtt"),this._avgRemoteRTTMap=new Map,this._avgRtpStatsReporter=t,this._avgEnd2EndRTT=void 0,this._onConnectionStats=function(e,t){i.isP2P===e.isP2P&&i._calculateAvgStats(t)};var o=t._conference;o.statistics.addConnectionStatsListener(this._onConnectionStats),this.isP2P||(this._onUserLeft=function(e){return i._avgRemoteRTTMap.delete(e)},o.on(a.USER_LEFT,this._onUserLeft),this._onRemoteStatsUpdated=function(e,t){return i._processRemoteStats(e,t)},o.on(u.REMOTE_STATS_UPDATED,this._onRemoteStatsUpdated))}return _createClass(e,[{key:"_calculateAvgStats",value:function(e){if(e){if(l.a.supportsRTTStatistics()&&e.transport&&e.transport.length&&this._avgRTT.addNext(e.transport[0].rtt),this._sampleIdx+=1,this._sampleIdx>=this._n){if(l.a.supportsRTTStatistics()){var t=this._avgRtpStatsReporter._conference,n={p2p:this.isP2P,conference_size:t.getParticipantCount()};if(e.transport&&e.transport.length&&_extends(n,{local_candidate_type:e.transport[0].localCandidateType,remote_candidate_type:e.transport[0].remoteCandidateType,transport_type:e.transport[0].type}),this._avgRTT.appendReport(n),this.isP2P){var r=this._avgRtpStatsReporter.jvbStatsMonitor._avgEnd2EndRTT;isNaN(r)||(n.rtt_diff=this._avgRTT.calculate()-r)}else{var i=this._calculateAvgRemoteRTT(),o=this._avgRTT.calculate();this._avgEnd2EndRTT=o+i,isNaN(o)||isNaN(i)||(n.end2end_rtt_avg=this._avgEnd2EndRTT)}h.a.sendAnalytics(Object(d.L)(n))}this._resetAvgStats()}}else p.error("No stats")}},{key:"_calculateAvgRemoteRTT",value:function(){for(var e,t=0,n=0,r=_createForOfIteratorHelperLoose(this._avgRemoteRTTMap.values());!(e=r()).done;){var i=e.value,o=i.calculate();isNaN(o)||(n+=o,t+=1,i.reset())}return n/t}},{key:"_processRemoteStats",value:function(e,t){var n="number"==typeof t.jvbRTT,r=this._avgRemoteRTTMap.get(e);!r&&n&&(r=new f(e+"_stat_rtt"),this._avgRemoteRTTMap.set(e,r)),n?r.addNext(t.jvbRTT):r&&this._avgRemoteRTTMap.delete(e)}},{key:"_resetAvgStats",value:function(){this._avgRTT.reset(),this._avgRemoteRTTMap&&this._avgRemoteRTTMap.clear(),this._sampleIdx=0}},{key:"dispose",value:function(){var e=this._avgRtpStatsReporter._conference;e.statistics.removeConnectionStatsListener(this._onConnectionStats),this.isP2P||(e.off(u.REMOTE_STATS_UPDATED,this._onRemoteStatsUpdated),e.off(a.USER_LEFT,this._onUserLeft))}}]),e})(),v=(function(){function e(t,n){var r=this;_classCallCheck(this,e),this._n=n,n>0?(p.info("Avg RTP stats will be calculated every "+n+" samples"),this._sampleIdx=0,this._conference=t,this._avgAudioBitrateUp=new f("bitrate_audio_upload"),this._avgAudioBitrateDown=new f("bitrate_audio_download"),this._avgVideoBitrateUp=new f("bitrate_video_upload"),this._avgVideoBitrateDown=new f("bitrate_video_download"),this._avgBandwidthUp=new f("bandwidth_upload"),this._avgBandwidthDown=new f("bandwidth_download"),this._avgPacketLossTotal=new f("packet_loss_total"),this._avgPacketLossUp=new f("packet_loss_upload"),this._avgPacketLossDown=new f("packet_loss_download"),this._avgRemoteFPS=new f("framerate_remote"),this._avgRemoteScreenFPS=new f("framerate_screen_remote"),this._avgLocalFPS=new f("framerate_local"),this._avgLocalScreenFPS=new f("framerate_screen_local"),this._avgRemoteCameraPixels=new f("pixels_remote"),this._avgRemoteScreenPixels=new f("pixels_screen_remote"),this._avgLocalCameraPixels=new f("pixels_local"),this._avgLocalScreenPixels=new f("pixels_screen_local"),this._avgCQ=new f("connection_quality"),this._cachedTransportStats=void 0,this._onLocalStatsUpdated=function(e){r._calculateAvgStats(e),r._maybeSendTransportAnalyticsEvent(e)},t.on(u.LOCAL_STATS_UPDATED,this._onLocalStatsUpdated),this._onP2PStatusChanged=function(){p.debug("Resetting average stats calculation"),r._resetAvgStats(),r.jvbStatsMonitor._resetAvgStats(),r.p2pStatsMonitor._resetAvgStats()},t.on(a.P2P_STATUS,this._onP2PStatusChanged),this._onJvb121StatusChanged=function(e,t){!0===t&&(p.info("Resetting JVB avg RTP stats"),r._resetAvgJvbStats())},t.on(a.JVB121_STATUS,this._onJvb121StatusChanged),this.jvbStatsMonitor=new m(this,!1,n),this.p2pStatsMonitor=new m(this,!0,n)):p.info("Avg RTP stats reports are disabled.")}return _createClass(e,[{key:"_calculateAvgStats",value:function(e){if(e){var t=this._conference.isP2PActive(),n=this._conference.getParticipantCount();if(t||!(n<2)){var r=e.bitrate,i=e.bandwidth,o=e.packetLoss,a=e.framerate,s=e.resolution;if(r)if(i)if(o)if(a)if(s){if(this._avgAudioBitrateUp.addNext(r.audio.upload),this._avgAudioBitrateDown.addNext(r.audio.download),this._avgVideoBitrateUp.addNext(r.video.upload),this._avgVideoBitrateDown.addNext(r.video.download),l.a.supportsBandwidthStatistics()&&(this._avgBandwidthUp.addNext(i.upload),this._avgBandwidthDown.addNext(i.download)),this._avgPacketLossUp.addNext(o.upload),this._avgPacketLossDown.addNext(o.download),this._avgPacketLossTotal.addNext(o.total),this._avgCQ.addNext(e.connectionQuality),a&&(this._avgRemoteFPS.addNext(this._calculateAvgVideoFps(a,!1,c.CAMERA)),this._avgRemoteScreenFPS.addNext(this._calculateAvgVideoFps(a,!1,c.DESKTOP)),this._avgLocalFPS.addNext(this._calculateAvgVideoFps(a,!0,c.CAMERA)),this._avgLocalScreenFPS.addNext(this._calculateAvgVideoFps(a,!0,c.DESKTOP))),s&&(this._avgRemoteCameraPixels.addNext(this._calculateAvgVideoPixels(s,!1,c.CAMERA)),this._avgRemoteScreenPixels.addNext(this._calculateAvgVideoPixels(s,!1,c.DESKTOP)),this._avgLocalCameraPixels.addNext(this._calculateAvgVideoPixels(s,!0,c.CAMERA)),this._avgLocalScreenPixels.addNext(this._calculateAvgVideoPixels(s,!0,c.DESKTOP))),this._sampleIdx+=1,this._sampleIdx>=this._n){var u={p2p:t,conference_size:n};e.transport&&e.transport.length&&_extends(u,{local_candidate_type:e.transport[0].localCandidateType,remote_candidate_type:e.transport[0].remoteCandidateType,transport_type:e.transport[0].type}),this._avgAudioBitrateUp.appendReport(u),this._avgAudioBitrateDown.appendReport(u),this._avgVideoBitrateUp.appendReport(u),this._avgVideoBitrateDown.appendReport(u),l.a.supportsBandwidthStatistics()&&(this._avgBandwidthUp.appendReport(u),this._avgBandwidthDown.appendReport(u)),this._avgPacketLossUp.appendReport(u),this._avgPacketLossDown.appendReport(u),this._avgPacketLossTotal.appendReport(u),this._avgRemoteFPS.appendReport(u),isNaN(this._avgRemoteScreenFPS.calculate())||this._avgRemoteScreenFPS.appendReport(u),this._avgLocalFPS.appendReport(u),isNaN(this._avgLocalScreenFPS.calculate())||this._avgLocalScreenFPS.appendReport(u),this._avgRemoteCameraPixels.appendReport(u),isNaN(this._avgRemoteScreenPixels.calculate())||this._avgRemoteScreenPixels.appendReport(u),this._avgLocalCameraPixels.appendReport(u),isNaN(this._avgLocalScreenPixels.calculate())||this._avgLocalScreenPixels.appendReport(u),this._avgCQ.appendReport(u),h.a.sendAnalytics(Object(d.L)(u)),this._resetAvgStats()}}else p.error("No resolution");else p.error('No "framerate"');else p.error('No "packetloss"');else p.error('No "bandwidth"');else p.error('No "bitrate"')}}else p.error("No stats")}},{key:"_calculateAvgVideoPixels",value:function(e,t,n){for(var r=0,i=0,o=this._conference.myUserId(),a=0,s=Object.keys(e);a<s.length;a++){var c=s[a];if(t?c===o:c!==o){var u=t?null:this._conference.getParticipantById(c),d=e[c];if((t||u)&&d){var l=this._calculatePeerAvgVideoPixels(d,u,n);isNaN(l)||(r+=l,i+=1)}}}return r/i}},{key:"_calculatePeerAvgVideoPixels",value:function(e,t,n){var r=Object.keys(e).map(function(e){return Number(e)}),i=null,o=this._conference.getActivePeerConnection();t?(i=t.getTracksByMediaType(s.c))&&(r=r.filter(function(e){return i.find(function(t){return!t.isMuted()&&t.getSSRC()===e&&t.videoType===n})})):(i=this._conference.getLocalTracks(s.c),r=r.filter(function(e){return i.find(function(t){return!t.isMuted()&&o.getLocalSSRC(t)===e&&t.videoType===n})}));for(var a,c=0,u=0,d=_createForOfIteratorHelperLoose(r);!(a=d()).done;){var l=a.value,h=Number(e[l].height)*Number(e[l].width);!isNaN(h)&&h>0&&(c+=h,u+=1)}return c/u}},{key:"_calculateAvgVideoFps",value:function(e,t,n){for(var r=0,i=0,o=this._conference.myUserId(),a=0,s=Object.keys(e);a<s.length;a++){var c=s[a];if(t?c===o:c!==o){var u=t?null:this._conference.getParticipantById(c),d=e[c];if((t||u)&&d){var l=this._calculatePeerAvgVideoFps(d,u,n);isNaN(l)||(r+=l,i+=1)}}}return r/i}},{key:"_calculatePeerAvgVideoFps",value:function(e,t,n){var r=Object.keys(e).map(function(e){return Number(e)}),i=null,o=this._conference.getActivePeerConnection();t?(i=t.getTracksByMediaType(s.c))&&(r=r.filter(function(e){return i.find(function(t){return!t.isMuted()&&t.getSSRC()===e&&t.videoType===n})})):(i=this._conference.getLocalTracks(s.c),r=r.filter(function(e){return i.find(function(t){return!t.isMuted()&&o.getLocalSSRC(t)===e&&t.videoType===n})}));for(var a,c=0,u=0,d=_createForOfIteratorHelperLoose(r);!(a=d()).done;){var l=a.value,h=Number(e[l]);!isNaN(h)&&h>0&&(c+=h,u+=1)}return c/u}},{key:"_maybeSendTransportAnalyticsEvent",value:function(e){if(e&&e.transport&&e.transport.length){var t={p2p:e.transport[0].p2p,local_candidate_type:e.transport[0].localCandidateType,remote_candidate_type:e.transport[0].remoteCandidateType,transport_type:e.transport[0].type};this._cachedTransportStats&&o()(t,this._cachedTransportStats)||(this._cachedTransportStats=t,h.a.sendAnalytics(Object(d.M)(t)))}}},{key:"_resetAvgJvbStats",value:function(){this._resetAvgStats(),this.jvbStatsMonitor._resetAvgStats()}},{key:"_resetAvgStats",value:function(){this._avgAudioBitrateUp.reset(),this._avgAudioBitrateDown.reset(),this._avgVideoBitrateUp.reset(),this._avgVideoBitrateDown.reset(),this._avgBandwidthUp.reset(),this._avgBandwidthDown.reset(),this._avgPacketLossUp.reset(),this._avgPacketLossDown.reset(),this._avgPacketLossTotal.reset(),this._avgRemoteFPS.reset(),this._avgRemoteScreenFPS.reset(),this._avgLocalFPS.reset(),this._avgLocalScreenFPS.reset(),this._avgRemoteCameraPixels.reset(),this._avgRemoteScreenPixels.reset(),this._avgLocalCameraPixels.reset(),this._avgLocalScreenPixels.reset(),this._avgCQ.reset(),this._sampleIdx=0}},{key:"dispose",value:function(){this._conference.off(a.P2P_STATUS,this._onP2PStatusChanged),this._conference.off(u.LOCAL_STATS_UPDATED,this._onLocalStatsUpdated),this._conference.off(a.JVB121_STATUS,this._onJvb121StatusChanged),this.jvbStatsMonitor.dispose(),this.p2pStatsMonitor.dispose()}}]),e})()}).call(this,"modules/statistics/AvgRTPStatsReporter.js")},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(1),i=n(0),o=n.n(i),a=n(70),s=n.n(a),c=(function(){function e(t){_classCallCheck(this,e),this.stats={users:{},dominantSpeakerId:null};var n=t.myUserId();this.stats.users[n]=new s.a(n,null,!0),this.conference=t,t.addEventListener(r.DOMINANT_SPEAKER_CHANGED,this._onDominantSpeaker.bind(this)),t.addEventListener(r.USER_JOINED,this._onUserJoin.bind(this)),t.addEventListener(r.USER_LEFT,this._onUserLeave.bind(this)),t.addEventListener(r.DISPLAY_NAME_CHANGED,this._onDisplayNameChange.bind(this)),t.xmpp&&t.xmpp.addListener(o.a.SPEAKER_STATS_RECEIVED,this._updateStats.bind(this))}return _createClass(e,[{key:"_onDominantSpeaker",value:function(e){var t=this.stats.users[this.stats.dominantSpeakerId],n=this.stats.users[e];t&&t.setDominantSpeaker(!1),n&&n.setDominantSpeaker(!0),this.stats.dominantSpeakerId=e}},{key:"_onUserJoin",value:function(e,t){t.isHidden()||this.stats.users[e]||(this.stats.users[e]=new s.a(e,t.getDisplayName()))}},{key:"_onUserLeave",value:function(e){var t=this.stats.users[e];t&&t.markAsHasLeft()}},{key:"_onDisplayNameChange",value:function(e,t){var n=this.stats.users[e];n&&n.setDisplayName(t)}},{key:"getStats",value:function(){return this.stats.users}},{key:"_updateStats",value:function(e){for(var t in e){var n=void 0,r=this.conference.getParticipantById(t);r&&r.isHidden()||(this.stats.users[t]?(n=this.stats.users[t]).getDisplayName()||n.setDisplayName(e[t].displayName):(n=new s.a(t,e[t].displayName),this.stats.users[t]=n,n.markAsHasLeft())),n.totalDominantSpeakerTime=e[t].totalDominantSpeakerTime}}}]),e})()},function(e,t,n){"use strict";var r=n(81),i=n(161);function o(){this.audioRecorder=new r,this.transcriptionService=new i,this.counter=null,this.startTime=null,this.transcription=null,this.callback=null,this.results=[],this.state="before",this.lineLength=0}function a(e,t){if(console.log("retrieved an answer from the transcription service. The answer has an array of length: "+t.wordArray.length),t.wordArray.length>0){var n=t.startTime.getUTCMilliseconds()-e.startTime.getUTCMilliseconds();n<0&&(n=0);var r="[";t.wordArray.forEach(function(e){e.begin+=n,e.end+=n,r+=e.word+","}),r+="]",console.log(r),t.wordArray.name=t.name}e.results.push(t.wordArray),e.counter--,console.log("current counter: "+e.counter),e.maybeMerge()}function s(e){for(var t=0;t<e.length;t++)0===e[t].length&&e.splice(t,1);return e.length>0}o.prototype.start=function(){if("before"!==this.state)throw new Error("The transcription can only start when it's in the \"before\" state. It's currently in the \""+this.state+"\" state");this.state="recording",this.audioRecorder.start(),this.startTime=new Date},o.prototype.stop=function(e){var t=this;if("recording"!==this.state)throw new Error("The transcription can only stop when it's in the \"recording\" state. It's currently in the \""+this.state+"\" state");console.log("stopping recording and sending audio files"),this.audioRecorder.stop();var n=a.bind(null,this);this.audioRecorder.getRecordingResults().forEach(function(e){t.transcriptionService.send(e,n),t.counter++}),this.state="transcribing",this.callback=e},o.prototype.maybeMerge=function(){"transcribing"===this.state&&0===this.counter&&this.merge()},o.prototype.merge=function(){var e=this;console.log("starting merge process!\n The length of the array: "+this.results.length),this.transcription="";var t=this.results,n=[],r=function(){var n=t[0];t.forEach(function(e){e[0].begin<n[0].begin&&(n=e)});var r=n.shift(),i=function(){var i=!1,o=n[0].begin;if(t.forEach(function(e){e[0].begin<o&&(i=!0)}),i)return"break";r=n.shift(),e.updateTranscription(r,null)};for(e.updateTranscription(r,n.name);n.length>0;){if("break"===i())break}};for(s(t),t.forEach(function(e){return(function(e,t){if(0===e.length)e.push(t);else{if(e[e.length-1].begin<=t.begin)return void e.push(t);for(var n=0;n<e.length;n++)if(t.begin<e[n].begin)return void e.splice(n,0,t);e.push(t)}})(n,e)});s(t);)r();this.state="finished",this.callback&&this.callback(this.transcription)},o.prototype.updateTranscription=function(e,t){null!=t&&(this.transcription+="\n"+t+":",this.lineLength=t.length+1),this.lineLength+e.word.length>80&&(this.transcription+="\n    ",this.lineLength=4),this.transcription+=" "+e.word,this.lineLength+=e.word.length+1},o.prototype.addTrack=function(e){this.audioRecorder.addTrack(e)},o.prototype.removeTrack=function(e){this.audioRecorder.removeTrack(e)},o.prototype.getTranscription=function(){if("finished"!==this.state)throw new Error("The transcription can only be retrieved when it's in the \"finished\" state. It's currently in the \""+this.state+"\" state");return this.transcription},o.prototype.getState=function(){return this.state},o.prototype.reset=function(){this.state="before",this.counter=null,this.transcription=null,this.startTime=null,this.callback=null,this.results=[],this.lineLength=0},t.a=o},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var r=n(5),i=n(4).getLogger(e);function o(e){this.versions={},this.conference=e,this.conference.addCommandListener("versions",this.processVersions.bind(this))}o.prototype.processVersions=function(e,t,n){var o=this;if(this.conference._isFocus(n)){var a=[];e.children.forEach(function(e){var t=e.attributes.name,n=e.value;o.versions[t]!==n&&(o.versions[t]=n,i.info("Got "+t+" version: "+n),a.push({id:"component_version",component:t,version:n}))}),a.length>0&&r.a.sendLog(JSON.stringify(a))}else i.warn("Received versions not from the focus user: "+e,n)},o.prototype.getComponentVersion=function(e){return this.versions[e]}}).call(this,"modules/version/ComponentsVersions.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return u});var r=n(4),i=n(0),o=n.n(i),a=n(136),s=n(24),c=Object(r.getLogger)(e),u=(function(){function e(t){_classCallCheck(this,e),this.chatRoom=t,this.eventEmitter=t.eventEmitter,c.debug("creating VideoSIPGW"),this.sessions={},this.sessionStateChangeListener=this.sessionStateChanged.bind(this),t.addPresenceListener("jibri-sip-call-state",this.handleJibriSIPState.bind(this))}return _createClass(e,[{key:"handleJibriSIPState",value:function(e){var t=e.attributes;if(t){c.debug("Handle video sip gw state : ",t);var n=t.state;if(n!==this.state)switch(n){case s.STATE_ON:case s.STATE_OFF:case s.STATE_PENDING:case s.STATE_RETRYING:case s.STATE_FAILED:var r=t.sipaddress;if(!r)return;var i=this.sessions[r];i?i.setState(n,t.failure_reason):c.warn("Video SIP GW session not found:",r)}}}},{key:"createVideoSIPGWSession",value:function(e,t){if(this.sessions[e])return c.warn("There was already a Video SIP GW session for address",e),new Error(s.ERROR_SESSION_EXISTS);var n=new a.a(e,t,this.chatRoom);return n.addStateListener(this.sessionStateChangeListener),this.sessions[e]=n,n}},{key:"sessionStateChanged",value:function(e){var t=e.address;if(e.newState===s.STATE_OFF||e.newState===s.STATE_FAILED){var n=this.sessions[t];if(!n)return void c.error("Missing Video SIP GW session with address:",t);n.removeStateListener(this.sessionStateChangeListener),delete this.sessions[t]}this.eventEmitter.emit(o.a.VIDEO_SIP_GW_SESSION_STATE_CHANGED,e)}}]),e})()}).call(this,"modules/videosipgw/VideoSIPGW.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c});var r=n(4),i=n(2),o=n(20),a=n(24),s=Object(r.getLogger)(e),c=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this)).sipAddress=e,o.displayName=r,o.chatRoom=i,o.state=void 0,o}return _createClass(n,[{key:"stop",value:function(){this.state!==a.STATE_OFF&&this.state!==a.STATE_FAILED?this._sendJibriIQ("stop"):s.warn("Video SIP GW session already stopped or failed!")}},{key:"start",value:function(){this.state!==a.STATE_ON&&this.state!==a.STATE_OFF&&this.state!==a.STATE_PENDING&&this.state!==a.STATE_RETRYING?this._sendJibriIQ("start"):s.warn("Video SIP GW session already started!")}},{key:"setState",value:function(e,t){if(e!==this.state){var n=this.state;this.state=e,this.eventEmitter.emit("STATE_CHANGED",{address:this.sipAddress,failureReason:t,oldState:n,newState:this.state,displayName:this.displayName})}}},{key:"addStateListener",value:function(e){this.addListener("STATE_CHANGED",e)}},{key:"removeStateListener",value:function(e){this.removeListener("STATE_CHANGED",e)}},{key:"_sendJibriIQ",value:function(e){var t=this,n={xmlns:"http://jitsi.org/protocol/jibri",action:e,sipaddress:this.sipAddress};n.displayname=this.displayName;var r=Object(i.$iq)({to:this.chatRoom.focusMucJid,type:"set"}).c("jibri",n).up();s.debug(e+" video SIP GW session",r.nodeTree),this.chatRoom.connection.sendIQ(r,function(){},function(n){s.error("Failed to "+e+" video SIP GW session, error: ",n),t.setState(a.STATE_FAILED)})}}]),n})(o.a)}).call(this,"modules/videosipgw/JitsiVideoSIPGWSession.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c});var r=n(4),i=n(15),o=n(12),a=n(5),s=Object(r.getLogger)(e);function c(){return new Promise(function(e){o.a.enumerateDevices(function(t){for(var n,r=[],c=_createForOfIteratorHelperLoose(t.filter(function(e){return"audioinput"===e.kind}));!(n=c()).done;){var d=n.value,l=o.a.obtainAudioAndVideoPermissions({devices:["audio"],micDeviceId:d.deviceId}).then(function(e){var t=e[0],n=t.getOriginalStream();return a.a.startLocalStats(n,t.setAudioLevel.bind(t)),t.addEventListener(i.LOCAL_TRACK_STOPPED,function(){a.a.stopLocalStats(n)}),t});r.push(l)}Promise.allSettled(r).then(function(t){for(var n,r=t.filter(function(e){return"fulfilled"===e.status}),o=t.filter(function(e){return"rejected"===e.status}),a=r.map(function(e){return e.value}),c=_createForOfIteratorHelperLoose(o.map(function(e){return e.value}));!(n=c()).done;){var d=n.value;s.error("Failed to acquire audio device with error: ",d)}for(var l,h=function(t){t.on(i.TRACK_AUDIO_LEVEL_CHANGED,function(n){n>.008&&(u(a),e({deviceId:t.deviceId,deviceLabel:t.track.label}))})},p=_createForOfIteratorHelperLoose(a);!(l=p()).done;){h(l.value)}setTimeout(function(){u(a),e({deviceId:"",deviceLabel:""})},3e3)})})})}function u(e){for(var t,n=_createForOfIteratorHelperLoose(e);!(t=n()).done;){t.value.stopStream()}}}).call(this,"modules/detection/ActiveDeviceDetector.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return m});var r=n(4),i=n(2),o=n(8),a=n(13),s=n.n(a),c=n(12),u=n(139),d=n(33);function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){h(e,t,n[t])})}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(null==e)return{};var n,r,i=(function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i})(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var f=Object(r.getLogger)(e),m=(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e);var n=t.jitsiConnection,r=p(t,["jitsiConnection"]);this._options=l({iceConfig:n&&n.xmpp.connection.jingle.p2pIceConfig},r),this._peerConnection=null,this._onFatalError=this._onFatalError.bind(this),this._onSendMessage=this._onSendMessage.bind(this),this._onRemoteStream=this._onRemoteStream.bind(this)}return _createClass(e,[{key:"processMessage",value:function(e){var t=e.from;if(t)if(this._peerConnection&&this._peerConnection.getPeerJid()!==t)this._onFatalError(t,d.a.CONNECTION_ERROR,"rejected");else{var n=this._convertStringToXML(e.data.iq),r=n&&n.find("jingle"),i=r&&r.attr("action");i===d.a.INITIATE&&(this._peerConnection=this._createPeerConnection(t,{isInitiator:!1,receiveVideo:!0})),this._peerConnection&&this._peerConnection.processMessage(r),i!==d.a.CONNECTION_ERROR&&i!==d.a.UNAVAILABLE&&i!==d.a.TERMINATE||this._selfCloseConnection()}}},{key:"start",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._peerConnection=this._createPeerConnection(e,{isInitiator:!0,receiveVideo:!1}),this._peerConnection.start(t)}},{key:"stop",value:function(){this._peerConnection&&this._peerConnection.stop(),this._peerConnection=null}},{key:"_convertStringToXML",value:function(e){try{var t=(new DOMParser).parseFromString(e,"text/xml");return $(t)}catch(e){return f.error("Attempted to convert incorrectly formatted xml"),null}}},{key:"_createPeerConnection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("Cannot create ProxyConnectionPC without a peer.");var n=l({iceConfig:this._options.iceConfig,onError:this._onFatalError,onRemoteStream:this._onRemoteStream,onSendMessage:this._onSendMessage,peerJid:e},t);return new u.a(n)}},{key:"_onFatalError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";f.error("Received a proxy connection error",e,t,n);var r=Object(i.$iq)({to:e,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:t}).c("details").t(n).up();this._onSendMessage(e,r),this._peerConnection&&this._peerConnection.getPeerJid()===e&&this._selfCloseConnection()}},{key:"_onRemoteStream",value:function(e){if(!this._options.onRemoteStream)return f.error("Remote track received without callback."),void e.dispose();var t,n=e.isVideoTrack();n&&(t=this._options.convertVideoToDesktop?s.a.DESKTOP:s.a.CAMERA);var r=e.getOriginalStream(),i=c.a.newCreateLocalTracks([{deviceId:"proxy:"+this._peerConnection.getPeerJid(),mediaType:n?o.c:o.a,sourceType:"proxy",stream:r,track:r.getVideoTracks()[0],videoType:t}]);this._options.onRemoteStream(i[0])}},{key:"_onSendMessage",value:function(e,t){if(this._options.onSendMessage)try{var n=(new XMLSerializer).serializeToString(t.nodeTree||t);this._options.onSendMessage(e,{iq:n})}catch(e){f.error("Attempted to send an incorrectly formatted iq.")}}},{key:"_selfCloseConnection",value:function(){this.stop(),this._options.onConnectionClosed&&this._options.onConnectionClosed()}}]),e})()}).call(this,"modules/proxyconnection/ProxyConnectionService.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return m});var r=n(4),i=n(6),o=n.n(i),a=n(0),s=n.n(a),c=n(12),u=n(53),d=n(28),l=n(33);function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){p(e,t,n[t])})}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=Object(r.getLogger)(e),m=(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this._options=h({iceConfig:{},isInitiator:!1,receiveAudio:!1,receiveVideo:!1},t),this._tracks=[],this._peerConnection=null,this._onError=this._onError.bind(this),this._onRemoteStream=this._onRemoteStream.bind(this),this._onSendMessage=this._onSendMessage.bind(this)}return _createClass(e,[{key:"getPeerJid",value:function(){return this._options.peerJid}},{key:"processMessage",value:function(e){switch(e.attr("action")){case l.a.ACCEPT:this._onSessionAccept(e);break;case l.a.INITIATE:this._onSessionInitiate(e);break;case l.a.TERMINATE:this._onSessionTerminate(e);break;case l.a.TRANSPORT_INFO:this._onTransportInfo(e)}}},{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._peerConnection||(this._tracks=this._tracks.concat(e),this._peerConnection=this._createPeerConnection(),this._peerConnection.invite(e))}},{key:"stop",value:function(){this._peerConnection&&this._peerConnection.terminate(),this._onSessionTerminate()}},{key:"_createPeerConnection",value:function(){var e=this,t={connected:!0,jingle:{terminate:function(){}},sendIQ:this._onSendMessage,addEventListener:function(){return function(){}}},n=h({iceServers:d.a},this._options.iceConfig),r={addPresenceListener:function(){},connectionTimes:[],eventEmitter:{emit:function(t){switch(t){case s.a.CONNECTION_ICE_FAILED:case s.a.CONNECTION_FAILED:e._onError(l.a.CONNECTION_ERROR,t)}}},getMediaPresenceInfo:function(){return{}},removePresenceListener:function(){}};this._rtc=new c.a({},{}),this._rtc.addListener(o.a.REMOTE_TRACK_ADDED,this._onRemoteStream);var i=new u.a(void 0,void 0,this._options.peerJid,t,{offerToReceiveAudio:this._options.receiveAudio,offerToReceiveVideo:this._options.receiveVideo},n,!0,this._options.isInitiator);return i.initialize(r,this._rtc,{}),i}},{key:"_onError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._options.onError(this._options.peerJid,e,t)}},{key:"_onRemoteStream",value:function(e){this._tracks.push(e),this._options.onRemoteStream(e)}},{key:"_onSendMessage",value:function(e){this._options.onSendMessage(this._options.peerJid,e)}},{key:"_onSessionAccept",value:function(e){this._peerConnection?this._peerConnection.setAnswer(e):f.error("Received an answer when no peer connection exists.")}},{key:"_onSessionInitiate",value:function(e){var t=this;this._peerConnection?f.error("Received an offer when an offer was already sent."):(this._peerConnection=this._createPeerConnection(),this._peerConnection.acceptOffer(e,function(){},function(){return t._onError(t._options.peerJid,l.a.CONNECTION_ERROR,"session initiate error")}))}},{key:"_onSessionTerminate",value:function(){this._tracks.forEach(function(e){return e.dispose()}),this._tracks=[],this._peerConnection&&this._peerConnection.onTerminated(),this._rtc&&(this._rtc.removeListener(o.a.REMOTE_TRACK_ADDED,this._onRemoteStream),this._rtc.destroy())}},{key:"_onTransportInfo",value:function(e){this._peerConnection.addIceCandidates(e)}}]),e})()}).call(this,"modules/proxyconnection/ProxyConnectionPC.js")},function(e,t,n){"use strict";t.a={error:{BUSY:"busy",ERROR:"error",RESOURCE_CONSTRAINT:"resource-constraint",SERVICE_UNAVAILABLE:"service-unavailable"},mode:{FILE:"file",STREAM:"stream"},status:{OFF:"off",ON:"on",PENDING:"pending"}}},function(e,t,n){"use strict";var r=n(19),i=n.n(r),o=n(3),a=n(31),s=n(47),c=n.n(s),u=n(61),d=new i.a,l=!1,h=null;t.a={init:function(e){return _regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(!l){t.next=2;break}throw new Error("Precall Test already initialized");case 2:return t.next=4,_regeneratorRuntime.awrap((function(){if(!o.a.isReactNative())return new Promise(function(e){c.a.loadScript(u.a,!0,!0,void 0,e)})})());case 4:return h=new window.callstats,t.abrupt("return",(function(e){return new Promise(function(t,n){if(!e.disableThirdPartyRequests){var r=e.callStatsID,i=e.callStatsSecret,o=e.statisticsId||e.statisticsDisplayName||a.a.callStatsUserName;h.initialize(r,i,o,function(e,r){"success"===e?(h.on("preCallTestResults",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];d.emit.apply(d,["preCallTestResults"].concat(t))}),l=!0,t()):n({status:e,message:r})},null,{disablePrecalltest:!0})}})})(e));case 6:case"end":return t.stop()}},null,null,null,Promise)},execute:function(){return l?new Promise(function(e,t){d.on("preCallTestResults",function(n,r){"success"===n?e(r):t({status:n,payload:r})}),h.makePrecallTest()}):Promise.reject("uninitialized")}}},function(e,t){e.exports={getTokenAuthUrl:function(e,t,n){return"string"!=typeof e?null:e.replace("{room}",t).replace("{roleUpgrade}",!0===n)}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var r=n(4),i=n(66),o=Object(r.getLogger)(e),a=(function(){function e(){_classCallCheck(this,e),this._started=!1,this._streamsToMix=[],this._streamMSSArray=[]}return _createClass(e,[{key:"addMediaStream",value:function(e){e.getAudioTracks()||o.warn("Added MediaStream doesn't contain audio tracks."),this._streamsToMix.push(e)}},{key:"start",value:function(){if(this._started)return this._mixedMSD.stream;if(this._audioContext=Object(i.a)(),!this._streamsToMix.length)return o.warn("No MediaStream's added to AudioMixer, nothing will happen."),null;this._started=!0,this._mixedMSD=this._audioContext.createMediaStreamDestination();for(var e,t=_createForOfIteratorHelperLoose(this._streamsToMix);!(e=t()).done;){var n=e.value,r=this._audioContext.createMediaStreamSource(n);r.connect(this._mixedMSD),this._streamMSSArray.push(r)}return this._mixedMSD.stream}},{key:"reset",value:function(){this._started=!1,this._streamsToMix=[];for(var e,t=_createForOfIteratorHelperLoose(this._streamMSSArray);!(e=t()).done;){e.value.disconnect()}this._streamMSSArray=[],this._audioContext&&(this._audioContext=void 0)}}]),e})()}).call(this,"modules/webaudio/AudioMixer.js")},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(41),i=n.n(r),o=n(25),a=n.n(o),s=function(e,t){return void 0!==e&&void 0!==e.media&&Array.isArray(e.media)&&e.media.forEach(function(e){e.sources&&e.sources.length&&(e.ssrcs=[],e.sources.forEach(function(t){Object.keys(t).forEach(function(n){"id"!==n&&e.ssrcs.push({id:t.id,attribute:n,value:t[n]})})}),delete e.sources),e.ssrcGroups&&e.ssrcGroups.length&&e.ssrcGroups.forEach(function(e){void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&(e.ssrcs=e.ssrcs.join(" "))})}),a.a.write(e,t)},c=function(e){var t=a.a.parse(e);return void 0!==t&&void 0!==t.media&&Array.isArray(t.media)&&t.media.forEach(function(e){void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&(e.sources=[],e.ssrcs.forEach(function(t){var n=e.sources.findIndex(function(e){return e.id===t.id});if(n>-1)e.sources[n][t.attribute]=t.value;else{var r={id:t.id};r[t.attribute]=t.value,e.sources.push(r)}}),delete e.ssrcs),void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&e.ssrcGroups.forEach(function(e){"string"==typeof e.ssrcs&&(e.ssrcs=e.ssrcs.split(" "))})}),t},u=["audio","video","data"],d=function(e){return e.find(function(e){return"SIM"===e.semantics})},l=function(e){return e.find(function(e){return"FID"===e.semantics})};function h(e,t,n,r){if(e&&t){var i=function(e){return r.find(function(t){return t.id.toString()===e})};t.ssrcs.forEach(function(t){e.sources.push(i(t));var r=n[parseInt(t,10)].find(function(e){return"FID"===e.semantics});if(r){var o=r.ssrcs.find(function(e){return e!==t});e.sources.push(i(o)),e.ssrcGroups.push(r)}}),e.ssrcGroups.push(t)}}function p(e,t,n,r){if(e&&t){if(e.sources=[],e.ssrcGroups=[],!n[t.id])return e.sources.push(t),void(e.msid=t.msid);var i=d(n[t.id]),o=l(n[t.id]);if(i)h(e,i,n,r);else if(o){var a=o.ssrcs.find(function(e){return e!==t}),s=d(n[a]);s?h(e,s,n,r):(o.ssrcs.forEach(function(t){e.sources.push((function(e){return r.find(function(t){return t.id.toString()===e})})(t))}),e.ssrcGroups.push(o))}e.msid=e.sources[0].msid}}function f(e,t,n){if(!n.find(function(t){return!!t.sources&&t.sources.some(function(t){return t.id===e.id})})){if(!t[e.id])return!1;var r=d(t[e.id]),i=l(t[e.id]);return r?n.some(function(e){return e.sources&&e.sources.some(function(e){return e.id.toString()===r.ssrcs[0]})}):!(!i||e.id.toString()===i.ssrcs[0])&&f({id:i.ssrcs[0]},t,n)}return!0}var m=(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"toPlanB",value:function(e){if(!e||"string"!=typeof e.sdp)return console.warn("An empty description was passed as an argument."),e;var t=c(e.sdp);if(!t.media||!t.media.length)return console.warn("The description has no media."),e;if(t.media.every(function(e){return-1!==u.indexOf(e.mid)}))return console.warn("The description does not look like unified plan sdp"),e;var n={},r=t.media;t.media=[],r.forEach(function(e){var t=e.type;if("application"===t)return e.mid="data",void(n[e.mid]=e);if(void 0===n[t]){var r=i()(e);r.sources&&Array.isArray(r.sources)&&r.sources.forEach(function(t){e.msid?t.msid=e.msid:delete t.msid}),r.ssrcGroups&&e.msid||(r.ssrcGroups=[]),delete r.msid,r.mid=t,n[t]=r}else e.msid&&(e.sources&&Array.isArray(e.sources)&&(n[t].sources=n[t].sources.concat(e.sources)),void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&(n[t].ssrcGroups=n[t].ssrcGroups.concat(e.ssrcGroups)))}),t.media=Object.values(n);var o=[];Object.values(n).forEach(function(e){"inactive"!==e.direction&&o.push(e.mid)}),t.groups.forEach(function(e){"BUNDLE"===e.type&&(e.mids=o.join(" "))}),t.msidSemantic={semantic:"WMS",token:"*"};var a=s(t);return new RTCSessionDescription({type:e.type,sdp:a})}},{key:"toUnifiedPlan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e||"string"!=typeof e.sdp)return console.warn("An empty description was passed as an argument."),e;var n=c(e.sdp);if(!n.media||!n.media.length)return console.warn("The description has no media."),e;if(n.media.length>3||n.media.every(function(e){return-1===u.indexOf(e.mid)}))return console.warn("The description does not look like plan-b"),e;var r=t?c(t.sdp):null,o={};n.media.forEach(function(e){var t=e.type;if("application"!==t){var n=(function(e){var t={};return e&&Array.isArray(e)?(e.forEach(function(e){e.ssrcs&&Array.isArray(e.ssrcs)&&e.ssrcs.forEach(function(n){void 0===t[n]&&(t[n]=[]),t[n].push(e)})}),t):t})(e.ssrcGroups);e.sources&&e.sources.forEach(function(a,s){if(a.msid){if(!r||!r.media){if(f(a,n,Object.values(o)))return;var c=i()(e);return c.mid=Object.keys(o).length.toString(),c.direction=s||"sendonly"===e.direction?"sendonly":"sendrecv",c.bundleOnly=void 0,p(c,a,n,e.sources),void(o[c.mid]=c)}if(!f(a,n,r.media)){var u=r.media.findIndex(function(e){return e.direction&&"inactive"===e.direction&&e.type===t});if(u>-1)r.media[u].direction="sendonly",p(r.media[u],a,n,e.sources);else{var d=i()(e);d.mid=r.media.length.toString(),d.direction="sendonly",p(d,a,n,e.sources),r.media.push(d)}}}})}else{if(!r||!r.media){var a=i()(e);return a.mid=Object.keys(o).length.toString(),void(o[e.mid]=a)}var s=r.media.findIndex(function(e){return e.type===t});s&&(r.media[s]=e,r.media[s].mid=s)}}),n.media=r?r.media:Object.values(o);var a=[];n.media.forEach(function(e){a.push(e.mid)}),n.groups.forEach(function(e){"BUNDLE"===e.type&&(e.mids=a.join(" "))}),n.msidSemantic={semantic:"WMS",token:"*"},n.origin.sessionVersion++;var d=s(n);return new RTCSessionDescription({type:e.type,sdp:d})}}]),e})()},function(e,t,n){"use strict";var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),i=new Uint8Array(16);function o(){if(!r)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}for(var a=[],s=0;s<256;++s)a.push((s+256).toString(16).substr(1));var c=function(e,t){var n=t||0,r=a;return(r[e[n+0]]+r[e[n+1]]+r[e[n+2]]+r[e[n+3]]+"-"+r[e[n+4]]+r[e[n+5]]+"-"+r[e[n+6]]+r[e[n+7]]+"-"+r[e[n+8]]+r[e[n+9]]+"-"+r[e[n+10]]+r[e[n+11]]+r[e[n+12]]+r[e[n+13]]+r[e[n+14]]+r[e[n+15]]).toLowerCase()};t.a=function(e,t,n){"string"==typeof e&&(t="binary"===e?new Uint8Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){for(var i=n||0,a=0;a<16;++a)t[i+a]=r[a];return t}return c(r)}},function(e,t,n){e.exports=n(147).default},function(e,t,n){"use strict";n.r(t),function(e){var r=n(4),i=n.n(r),o=n(16),a=n(1),s=n(82),c=n(39),u=n(26),d=n(77),l=n(55),h=n(18),p=n(14),f=n(15),m=n(63),v=n(12),g=n(3),_=n(49),y=n(48),S=n(137),E=n(22),b=n(65),C=n(138),T=n(140),R=n(60),A=n(141),k=n(5),I=n(142),w=n.n(I),P=n(11),O=n.n(P),D=n(47),N=n.n(D),M=n(24),L=n(143),x=n(8),F=n(34),j=n.n(F),H=n(30),U=n(67),J=n(7),B=i.a.getLogger(e);function G(e){var t={audio_requested:e.devices.includes("audio"),video_requested:e.devices.includes("video"),screen_sharing_requested:e.devices.includes("desktop")};return t.video_requested&&(t.resolution=e.resolution),t}t.default=(function(e){return"object"==typeof window.JitsiMeetJS?_extends({},window.JitsiMeetJS,e):e})({version:"development",JitsiConnection:s.a,ProxyConnectionService:C.a,constants:{participantConnectionStatus:y.a,recording:T.a,sipVideoGW:M,transcriptionStatus:m},events:{conference:a,connection:u,detection:E,track:f,mediaDevices:l,connectionQuality:H,e2eping:U},errors:{conference:o,connection:c,track:p},errorTypes:{JitsiTrackError:h.a},logLevels:i.a.levels,mediaDevices:d.a,analytics:k.a.analytics,init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k.a.init(e),window.connectionTimes||(window.connectionTimes={}),!0!==e.enableAnalyticsLogging&&(B.warn("Analytics disabled, disposing."),this.analytics.dispose()),e.enableWindowOnErrorHandler&&O.a.addHandler(this.getGlobalOnErrorHandler.bind(this));var t=e.deploymentInfo;if(t&&Object.keys(t).length>0){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);n.id="deployment_info",k.a.sendLog(JSON.stringify(n))}if(this.version){var i={id:"component_version",component:"lib-jitsi-meet",version:this.version};k.a.sendLog(JSON.stringify(i))}return v.a.init(e)},isDesktopSharingEnabled:function(){return v.a.isDesktopSharingEnabled()},isWebRtcSupported:function(){return v.a.isWebRtcSupported()},setLogLevel:function(e){i.a.setLogLevel(e)},setLogLevelById:function(e,t){i.a.setLogLevelById(e,t)},addGlobalLogTransport:function(e){i.a.addGlobalTransport(e)},removeGlobalLogTransport:function(e){i.a.removeGlobalTransport(e)},setGlobalLogOptions:function(e){i.a.setGlobalOptions(e)},createLocalTracks:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=!1;return!0===n&&window.setTimeout(function(){i||d.a.emitEvent(l.PERMISSION_PROMPT_IS_SHOWN,g.a.getName())},1e3),window.connectionTimes||(window.connectionTimes={}),window.connectionTimes["obtainPermissions.start"]=window.performance.now(),v.a.obtainAudioAndVideoPermissions(t).then(function(n){if(i=!0,window.connectionTimes["obtainPermissions.end"]=window.performance.now(),k.a.sendAnalytics(Object(J.F)("success",G(t))),!v.a.options.disableAudioLevels)for(var r=function(e){var t=n[e],r=t.getOriginalStream();t.getType()===x.a&&(k.a.startLocalStats(r,t.setAudioLevel.bind(t)),t.addEventListener(f.LOCAL_TRACK_STOPPED,function(){k.a.stopLocalStats(r)}))},o=0;o<n.length;o++)r(o);var a=v.a.getCurrentlyAvailableMediaDevices();if(a)for(var s=0;s<n.length;s++)n[s]._setRealDeviceIdFromDeviceList(a);for(var c,u=_createForOfIteratorHelperLoose(n);!(c=u()).done;){var d=c.value;d.type===x.c&&"desktop"===d.videoType&&e.setVideoTrackContentHints(d.track,"detail")}return n}).catch(function(n){if(i=!0,n.name===p.UNSUPPORTED_RESOLUTION&&!g.a.usesNewGumFlow()){var o=t.resolution||"720",a=(function(e){if(!j.a[e])return null;var t=j.a[e].order,n=null,r=null;return Object.keys(j.a).forEach(function(e){var i=j.a[e];(!n||n.order<i.order&&i.order<t)&&(r=e,n=i)}),r===e&&(r=null),r})(o);if(null!==a)return t.resolution=a,B.debug("Retry createLocalTracks with resolution",a),k.a.sendAnalytics(Object(J.F)("warning",{old_resolution:o,new_resolution:a,reason:"unsupported resolution"})),e.createLocalTracks(t,void 0,r||_extends({},t));if(r&&n.gum.constraints&&n.gum.constraints.video&&n.gum.constraints.video.mandatory&&n.gum.constraints.video.mandatory.sourceId)return r.cameraDeviceId=void 0,e.createLocalTracks(r)}if(n.name===p.SCREENSHARING_USER_CANCELED){var s={id:"screensharing_user_canceled",message:n.message};k.a.sendLog(JSON.stringify(s)),k.a.sendAnalytics(Object(J.F)("warning",{reason:"extension install user canceled"}))}else if(n.name===p.NOT_FOUND){var c={id:"usermedia_missing_device",status:n.gum.devices};k.a.sendLog(JSON.stringify(c));var u=G(t);u.reason="device not found",u.devices=n.gum.devices.join("."),k.a.sendAnalytics(Object(J.F)("error",u))}else{k.a.sendGetUserMediaFailed(n);var d=G(t);d.reason=n.name,k.a.sendAnalytics(Object(J.F)("error",d))}return window.connectionTimes["obtainPermissions.end"]=window.performance.now(),Promise.reject(n)})},createTrackVADEmitter:function(e,t,n){return b.a.create(e,t,n)},createAudioMixer:function(){return new L.a},getActiveAudioDevice:function(){return Object(S.a)()},isDeviceListAvailable:function(){return B.warn("This method is deprecated, use JitsiMeetJS.mediaDevices.isDeviceListAvailable instead"),this.mediaDevices.isDeviceListAvailable()},isDeviceChangeAvailable:function(e){return B.warn("This method is deprecated, use JitsiMeetJS.mediaDevices.isDeviceChangeAvailable instead"),this.mediaDevices.isDeviceChangeAvailable(e)},isMultipleAudioInputSupported:function(){return this.mediaDevices.isMultipleAudioInputSupported()},isCollectingLocalStats:function(){return k.a.audioLevelsEnabled&&R.a.isLocalStatsSupported()},enumerateDevices:function(e){B.warn("This method is deprecated, use JitsiMeetJS.mediaDevices.enumerateDevices instead"),this.mediaDevices.enumerateDevices(e)},getGlobalOnErrorHandler:function(e,t,n,r,i){B.error("UnhandledError: "+e,"Script: "+t,"Line: "+n,"Column: "+r,"StackTrace: ",i),k.a.reportGlobalError(i)},setNetworkInfo:function(e){var t=e.isOnline;_.b.updateNetworkInfo({isOnline:t})},setVideoTrackContentHints:function(e,t){"contentHint"in e?(e.contentHint=t,e.contentHint!==t&&B.debug("Invalid video track contentHint")):B.debug("MediaStreamTrack contentHint attribute not supported")},precallTest:A.a,util:{AuthUtil:w(),ScriptUtil:N(),browser:g.a}})}.call(this,"JitsiMeetJS.js")},function(e,t,n){var r=n(78);function i(e,t){this.logStorage=e,this.stringifyObjects=!(!t||!t.stringifyObjects)&&t.stringifyObjects,this.storeInterval=t&&t.storeInterval?t.storeInterval:3e4,this.maxEntryLength=t&&t.maxEntryLength?t.maxEntryLength:1e4,Object.keys(r.levels).forEach(function(e){this[r.levels[e]]=function(){this._log.apply(this,arguments)}.bind(this,e)}.bind(this)),this.storeLogsIntervalID=null,this.queue=[],this.totalLen=0,this.outputCache=[]}i.prototype.stringify=function(e){try{return JSON.stringify(e)}catch(e){return"[object with circular refs?]"}},i.prototype.formatLogMessage=function(e){for(var t="",n=1,i=arguments.length;n<i;n++){var o=arguments[n];!this.stringifyObjects&&e!==r.levels.ERROR||"object"!=typeof o||(o=this.stringify(o)),t+=o,n!==i-1&&(t+=" ")}return t.length?t:null},i.prototype._log=function(){var e=arguments[1],t=this.formatLogMessage.apply(this,arguments);if(t){var n=this.queue[this.queue.length-1];(n&&n.text)===t?n.count+=1:(this.queue.push({text:t,timestamp:e,count:1}),this.totalLen+=t.length)}this.totalLen>=this.maxEntryLength&&this._flush(!0,!0)},i.prototype.start=function(){this._reschedulePublishInterval()},i.prototype._reschedulePublishInterval=function(){this.storeLogsIntervalID&&(window.clearTimeout(this.storeLogsIntervalID),this.storeLogsIntervalID=null),this.storeLogsIntervalID=window.setTimeout(this._flush.bind(this,!1,!0),this.storeInterval)},i.prototype.flush=function(){this._flush(!1,!0)},i.prototype._flush=function(e,t){this.totalLen>0&&(this.logStorage.isReady()||e)&&(this.logStorage.isReady()?(this.outputCache.length&&(this.outputCache.forEach(function(e){this.logStorage.storeLogs(e)}.bind(this)),this.outputCache=[]),this.logStorage.storeLogs(this.queue)):this.outputCache.push(this.queue),this.queue=[],this.totalLen=0),t&&this._reschedulePublishInterval()},i.prototype.stop=function(){this._flush(!1,!1)},e.exports=i},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){var r,i;this||window,void 0===(i="function"==typeof(r=function(){var e=/^(interactive|loaded|complete)$/,t=window.location?window.location.href:null,n=t&&t.replace(/#.*$/,"").replace(/\?.*$/,"")||null,r=document.getElementsByTagName("script"),i="readyState"in(r[0]||document.createElement("script")),o=!window.opera||"[object Opera]"!==window.opera.toString(),a="currentScript"in document;"stackTraceLimit"in Error&&Error.stackTraceLimit!==1/0&&(Error.stackTraceLimit,Error.stackTraceLimit=1/0);var s=!1,c=!1;function u(){if(0===r.length)return null;var t,d,l,h,p,f=[],m=u.skipStackDepth||1;for(t=0;t<r.length;t++)o&&i?e.test(r[t].readyState)&&f.push(r[t]):f.push(r[t]);if(d=new Error,s&&(l=d.stack),!l&&c)try{throw d}catch(e){l=e.stack}if(l&&!(p=(function(e,t){var n,i=null;if(t=t||r,"string"==typeof e&&e)for(n=t.length;n--;)if(t[n].src===e){i=t[n];break}return i})(h=(function e(t,n){var r,i=null,o="number"==typeof n;return n=o?Math.round(n):0,"string"==typeof t&&t&&(o?r=t.match(/(data:text\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/):(r=t.match(/^(?:|[^:@]*@|.+\)@(?=data:text\/javascript|blob|http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)(data:text\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/))&&r[1]||(r=t.match(/\)@(data:text\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/)),r&&r[1]&&(i=n>0?e(t.slice(t.indexOf(r[0])+r[0].length),n-1):r[1])),i})(l,m),f))&&n&&h===n&&(p=(function(e){var t,n,i=null;for(t=0,n=(e=e||r).length;t<n;t++)if(!e[t].hasAttribute("src")){if(i){i=null;break}i=e[t]}return i})(f)),p||1===f.length&&(p=f[0]),p||a&&(p=document.currentScript),!p&&o&&i)for(t=f.length;t--;)if("interactive"===f[t].readyState){p=f[t];break}return p||(p=f[f.length-1]||null),p}(function(){try{var e=new Error;throw s="string"==typeof e.stack&&!!e.stack,e}catch(e){c="string"==typeof e.stack&&!!e.stack}})(),u.skipStackDepth=1;var d=u;return d.near=u,d.far=function(){return null},d.origin=function(){return null},d})?r.apply(t,[]):r)||(e.exports=i)},function(e,t){e.exports={LOCAL_JID:"local"}},function(e,t,n){!(function(e){"use strict";e.Strophe.addConnectionPlugin("disco",{_connection:null,_identities:[],_features:[],_items:[],init:function(t){this._connection=t,this._identities=[],this._features=[],this._items=[],t.addHandler(this._onDiscoInfo.bind(this),e.Strophe.NS.DISCO_INFO,"iq","get",null,null),t.addHandler(this._onDiscoItems.bind(this),e.Strophe.NS.DISCO_ITEMS,"iq","get",null,null)},addIdentity:function(e,t,n,r){for(var i=0;i<this._identities.length;i++)if(this._identities[i].category==e&&this._identities[i].type==t&&this._identities[i].name==n&&this._identities[i].lang==r)return!1;return this._identities.push({category:e,type:t,name:n,lang:r}),!0},addFeature:function(e){for(var t=0;t<this._features.length;t++)if(this._features[t]==e)return!1;return this._features.push(e),!0},removeFeature:function(e){for(var t=0;t<this._features.length;t++)if(this._features[t]===e)return this._features.splice(t,1),!0;return!1},addItem:function(e,t,n,r){return!(n&&!r||(this._items.push({jid:e,name:t,node:n,call_back:r}),0))},info:function(t,n,r,i,o){var a={xmlns:e.Strophe.NS.DISCO_INFO};n&&(a.node=n);var s=e.$iq({from:this._connection.jid,to:t,type:"get"}).c("query",a);this._connection.sendIQ(s,r,i,o)},items:function(t,n,r,i,o){var a={xmlns:e.Strophe.NS.DISCO_ITEMS};n&&(a.node=n);var s=e.$iq({from:this._connection.jid,to:t,type:"get"}).c("query",a);this._connection.sendIQ(s,r,i,o)},_buildIQResult:function(t,n){var r=t.getAttribute("id"),i=t.getAttribute("from"),o=e.$iq({type:"result",id:r});return null!==i&&o.attrs({to:i}),o.c("query",n)},_onDiscoInfo:function(t){var n,r=t.getElementsByTagName("query")[0].getAttribute("node"),i={xmlns:e.Strophe.NS.DISCO_INFO};r&&(i.node=r);var o=this._buildIQResult(t,i);for(n=0;n<this._identities.length;n++)i={category:this._identities[n].category,type:this._identities[n].type},this._identities[n].name&&(i.name=this._identities[n].name),this._identities[n].lang&&(i["xml:lang"]=this._identities[n].lang),o.c("identity",i).up();for(n=0;n<this._features.length;n++)o.c("feature",{var:this._features[n]}).up();return this._connection.send(o.tree()),!0},_onDiscoItems:function(t){var n,r,i={xmlns:e.Strophe.NS.DISCO_ITEMS},o=t.getElementsByTagName("query")[0].getAttribute("node");if(o){for(i.node=o,n=[],r=0;r<this._items.length;r++)if(this._items[r].node==o){n=this._items[r].call_back(t);break}}else n=this._items;var a=this._buildIQResult(t,i);for(r=0;r<n.length;r++){var s={jid:n[r].jid};n[r].name&&(s.name=n[r].name),n[r].node&&(s.node=n[r].node),a.c("item",s).up()}return this._connection.send(a.tree()),!0}})})(n(2))},function(e,t,n){!(function(e){"use strict";e.Strophe.addConnectionPlugin("streamManagement",{logging:!1,autoSendCountOnEveryIncomingStanza:!1,requestResponseInterval:5,_c:null,_NS:"urn:xmpp:sm:3",_isStreamManagementEnabled:!1,_serverProcesssedStanzasCounter:null,_clientProcessedStanzasCounter:null,_clientSentStanzasCounter:null,_originalXMLOutput:null,_requestHandler:null,_incomingHandler:null,_requestResponseIntervalCount:0,_isSupported:!1,_unacknowledgedStanzas:[],_acknowledgedStanzaListeners:[],addAcknowledgedStanzaListener:function(e){this._acknowledgedStanzaListeners.push(e)},enable:function(t){if(!this._isSupported)throw new Error("The server doesn't support urn:xmpp:sm:3 namespace");if(this._connectionStatus!==e.Strophe.Status.CONNECTED)throw new Error("enable() can only be called in the CONNECTED state");this._c.send(e.$build("enable",{xmlns:this._NS,resume:t})),this._c.flush(),this._c.pause()},getResumeToken:function(){return this._resumeToken},isSupported:function(){return this._isSupported},resume:function(){if(!this.getResumeToken())throw new Error("No resume token");if(this._connectionStatus!==e.Strophe.Status.DISCONNECTED)throw new Error("resume() can only be called in the DISCONNECTED state");this._c.options.explicitResourceBinding=!0,this._resuming=!0,this._originalConnect.apply(this._c,this._connectArgs)},requestAcknowledgement:function(){if(this._connectionStatus!==e.Strophe.Status.CONNECTED)throw new Error("requestAcknowledgement() can only be called in the CONNECTED state");this._requestResponseIntervalCount=0,this._c.send(e.$build("r",{xmlns:this._NS}))},getOutgoingCounter:function(){return this._clientSentStanzasCounter},getIncomingCounter:function(){return this._clientProcessedStanzasCounter},init:function(t){this._c=t,e.Strophe.addNamespace("SM",this._NS),this._originalXMLOutput=this._c.xmlOutput,this._c.xmlOutput=this.xmlOutput.bind(this),this._originalConnect=this._c.connect,this._c.connect=this._interceptConnectArgs.bind(this),this._originalOnStreamFeaturesAfterSASL=this._c._onStreamFeaturesAfterSASL,this._c._onStreamFeaturesAfterSASL=this._onStreamFeaturesAfterSASL.bind(this),this._originalDoDisconnect=this._c._doDisconnect,this._c._doDisconnect=this._interceptDoDisconnect.bind(this),this._originalDisconnect=this._c.disconnect,this._c.disconnect=this._interceptDisconnect.bind(this)},_interceptDisconnect:function(){this._resumeToken=void 0,this._originalDisconnect.apply(this._c,arguments)},_interceptDoDisconnect:function(){this.getResumeToken()&&!this._resuming&&this._c.connected&&!this._c.disconnecting&&(this._resumeState={handlers:this._c.handlers,timedHandlers:this._c.timedHandlers,removeTimeds:this._c.removeTimeds,removeHandlers:this._c.removeHandlers,addTimeds:this._c.addTimeds,addHandlers:this._c.addHandlers},this._storedJid=this._c.jid,this.logging&&e.Strophe.debug("SM stored resume state, handler count: "+this._resumeState.handlers.length)),this._c._data=[],this._originalDoDisconnect.apply(this._c,arguments)},_interceptConnectArgs:function(){this._connectArgs=arguments,this._originalConnect.apply(this._c,arguments)},_onStreamFeaturesAfterSASL:function(e){return this._isSupported=e.getElementsByTagNameNS(this._NS,"sm").length>0,this._originalOnStreamFeaturesAfterSASL.apply(this._c,arguments)},statusChanged:function(t){if(this._connectionStatus=t,this.getResumeToken()||t!==e.Strophe.Status.CONNECTED&&t!==e.Strophe.Status.DISCONNECTED)if(t===e.Strophe.Status.BINDREQUIRED){for(var n in this._c.jid=this._storedJid,this._resumeState)this._c[n]=this._resumeState[n];this._c.send(e.$build("resume",{xmlns:this._NS,h:this._clientProcessedStanzasCounter,previd:this._resumeToken})),this._c.flush()}else t===e.Strophe.Status.ERROR&&(this.logging&&e.Strophe.debug("SM cleared resume token on error"),this._resumeToken=void 0);else this.logging&&e.Strophe.debug("SM reset state"),this._serverProcesssedStanzasCounter=0,this._clientProcessedStanzasCounter=0,this._clientSentStanzasCounter=0,this._isStreamManagementEnabled=!1,this._requestResponseIntervalCount=0,this._resuming=!1,t===e.Strophe.Status.DISCONNECTED&&(this._isSupported=!1),this._unacknowledgedStanzas=[],this._requestHandler&&this._c.deleteHandler(this._requestHandler),this._incomingHandler&&this._c.deleteHandler(this._incomingHandler),this._requestHandler=this._c.addHandler(this._handleServerRequestHandler.bind(this),this._NS,"r"),this._ackHandler=this._c.addHandler(this._handleServerAck.bind(this),this._NS,"a"),this._incomingHandler=this._c.addHandler(this._incomingStanzaHandler.bind(this)),this._enabledHandler=this._c._addSysHandler(this._handleEnabled.bind(this),this._NS,"enabled"),this._resumeFailedHandler=this._c._addSysHandler(this._handleResumeFailed.bind(this),this._NS,"failed"),this._resumedHandler=this._c._addSysHandler(this._handleResumed.bind(this),this._NS,"resumed")},xmlOutput:function(t){return(e.Strophe.isTagEqual(t,"iq")||e.Strophe.isTagEqual(t,"presence")||e.Strophe.isTagEqual(t,"message"))&&this._increaseSentStanzasCounter(t),this._originalXMLOutput.call(this._c,t)},_handleEnabled:function(e){return this._isStreamManagementEnabled=!0,this._resumeToken="true"===e.getAttribute("resume")&&e.getAttribute("id"),this._c.resume(),!0},_handleResumeFailed:function(t){var n=t&&t.firstElementChild&&t.firstElementChild.tagName;return this._c._changeConnectStatus(e.Strophe.Status.ERROR,n,t),this._c._doDisconnect(),!0},_handleResumed:function(t){var n=parseInt(t.getAttribute("h"));if(this._handleAcknowledgedStanzas(n,this._serverProcesssedStanzasCounter),this._resuming=!1,this._c.do_bind=!1,this._c.authenticated=!0,this._c.restored=!0,this._unacknowledgedStanzas.length>0){this.logging&&e.Strophe.debug("SM Sending unacknowledged stanzas",this._unacknowledgedStanzas);for(var r,i=_createForOfIteratorHelperLoose(this._unacknowledgedStanzas);!(r=i()).done;){var o=r.value;this._c.send(o)}}else this.logging&&e.Strophe.debug("SM No unacknowledged stanzas",this._unacknowledgedStanzas);return this._c._changeConnectStatus(e.Strophe.Status.CONNECTED,null),!0},_incomingStanzaHandler:function(t){return(e.Strophe.isTagEqual(t,"iq")||e.Strophe.isTagEqual(t,"presence")||e.Strophe.isTagEqual(t,"message"))&&(this._increaseReceivedStanzasCounter(),this.autoSendCountOnEveryIncomingStanza&&this._answerProcessedStanzas()),!0},_handleAcknowledgedStanzas:function(t,n){var r=t-n;r<0&&this._throwError("New reported stanza count lower than previous. New: "+t+" - Previous: "+n),r>this._unacknowledgedStanzas.length&&this._throwError("Higher reported acknowledge count than unacknowledged stanzas. Reported Acknowledge Count: "+r+" - Unacknowledge Stanza Count: "+this._unacknowledgedStanzas.length+" - New: "+t+" - Previous: "+n);for(var i=0;i<r;i++)for(var o=this._unacknowledgedStanzas.shift(),a=0;a<this._acknowledgedStanzaListeners.length;a++)this._acknowledgedStanzaListeners[a](o);this.logging&&this._unacknowledgedStanzas.length>0&&e.Strophe.warn("SM Unacknowledged stanzas",this._unacknowledgedStanzas),this._serverProcesssedStanzasCounter=t,this.requestResponseInterval>0&&(this._requestResponseIntervalCount=0)},_handleServerRequestHandler:function(){return this._answerProcessedStanzas(),!0},_handleServerAck:function(e){var t=parseInt(e.getAttribute("h"));return this._handleAcknowledgedStanzas(t,this._serverProcesssedStanzasCounter),!0},_answerProcessedStanzas:function(){this._isStreamManagementEnabled&&this._c.send(e.$build("a",{xmlns:this._NS,h:this._clientProcessedStanzasCounter}))},_increaseSentStanzasCounter:function(t){var n=this;if(this._isStreamManagementEnabled){if(-1!==this._unacknowledgedStanzas.indexOf(t))return;this._unacknowledgedStanzas.push(t),this._clientSentStanzasCounter++,this.requestResponseInterval>0&&(this._requestResponseIntervalCount++,this._requestResponseIntervalCount===this.requestResponseInterval&&setTimeout(function(){n._connectionStatus===e.Strophe.Status.CONNECTED&&n.requestAcknowledgement()},1))}},_increaseReceivedStanzasCounter:function(){this._isStreamManagementEnabled&&this._clientProcessedStanzasCounter++},_throwError:function(t){throw e.Strophe.error(t),new Error(t)}})})(n(2))},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(155),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(44))},function(e,t,n){(function(e,t){!(function(e,n){"use strict";if(!e.setImmediate){var r,i,o,a,s,c=1,u={},d=!1,l=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){f(e)})}:(function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}})()?(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&f(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){f(e.data)},r=function(e){o.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(i=l.documentElement,r=function(e){var t=l.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(f,0,e)},h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[c]=i,r(c),c++},h.clearImmediate=p}function p(e){delete u[e]}function f(e){if(d)setTimeout(f,0,e);else{var t=u[e];if(t){d=!0;try{!(function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}})(t)}finally{p(e),d=!1}}}}})("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(44),n(59))},function(e,t,n){var r=function(e){return String(Number(e))===e?Number(e):e},i=function(e,t,n){var i=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:i&&!t[e.name]&&(t[e.name]={});var o=e.push?{}:i?t[e.name]:t;!(function(e,t,n,i){if(i&&!n)t[i]=r(e[1]);else for(var o=0;o<n.length;o+=1)null!=e[o+1]&&(t[n[o]]=r(e[o+1]))})(n.match(e.reg),o,e.names,e.name),e.push&&t[e.push].push(o)},o=n(80),a=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(a).forEach(function(e){var t=e[0],a=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var s=0;s<(o[t]||[]).length;s+=1){var c=o[t][s];if(c.reg.test(a))return i(c,r,a)}}),t.media=n,t};var s=function(e,t){var n=t.split(/=(.+)/,2);return 2===n.length&&(e[n[0]]=r(n[1])),e};t.parseParams=function(e){return e.split(/\;\s?/).reduce(s,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),i=0;i<n.length;i+=3)t.push({component:n[i],ip:n[i+1],port:n[i+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map(function(e){return e.substring(1,e.length-1).split(",").reduce(s,{})})},t.parseSimulcastStreamList=function(e){return e.split(";").map(function(e){return e.split(",").map(function(e){var t,n=!1;return"~"!==e[0]?t=r(e):(t=r(e.substring(1,e.length)),n=!0),{scid:t,paused:n}})})}},function(e,t,n){var r=n(80),i=/%[sdv%]/g,o=function(e){var t=1,n=arguments,r=n.length;return e.replace(i,function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}})},a=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var a=t.names[i];t.name?r.push(n[t.name][a]):r.push(n[t.names[i]])}else r.push(n[t.name]);return o.apply(null,r)},s=["v","o","s","i","u","e","p","c","b","t","r","z","a"],c=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var n=t.outerOrder||s,i=t.innerOrder||c,o=[];return n.forEach(function(t){r[t].forEach(function(n){n.name in e&&null!=e[n.name]?o.push(a(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){o.push(a(t,n,e))})})}),e.media.forEach(function(e){o.push(a("m",r.m[0],e)),i.forEach(function(t){r[t].forEach(function(n){n.name in e&&null!=e[n.name]?o.push(a(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){o.push(a(t,n,e))})})})}),o.join("\r\n")+"\r\n"}},function(e,t,n){var r=n(25),i=n(159),o=i.parseSsrcs,a=i.writeSsrcs;function s(e,t,n){return e.ssrcs.filter(function(e){return e.id===t}).filter(function(e){return e.attribute===n}).map(function(e){return e.value})[0]}function c(e){this.options=e||{},this.options.numOfLayers||(this.options.numOfLayers=3),console.log("SdpSimulcast: using "+this.options.numOfLayers+" layers"),this.ssrcCache=[]}function u(e,t){null!=e&&Array.isArray(e.media)&&e.media.forEach(function(e){"video"===e.type&&t(e)})}function d(e){return e&&null!=e&&e.type&&""!=e.type&&e.sdp&&""!=e.sdp}c.prototype.clearSsrcCache=function(){this.ssrcCache=[]},c.prototype.setSsrcCache=function(e){this.ssrcCache=e},c.prototype._parseSimLayers=function(e){var t=e.ssrcGroups&&e.ssrcGroups.find(function(e){return"SIM"===e.semantics});return t?t.ssrcs.split(" ").map(function(e){return parseInt(e)}):[e.ssrcs[0].id]},c.prototype._buildNewToOldSsrcMap=function(e,t){for(var n={},r=0;r<e.length;++r){var i=e[r],o=t[r]||null;n[i]=o}return n},c.prototype._fillInSourceDataFromCache=function(e){console.log("SdpSimulcast restoring from cache: ",this.ssrcCache);var t=this._parseSimLayers(e);console.log("SdpSimulcast Parsed new sim ssrcs: ",t);var n=s(e,t[0],"msid"),r=s(e,t[0],"cname"),i=this._buildNewToOldSsrcMap(t,this.ssrcCache);console.log("SdpSimulcast built replacement map: ",i);var o=this.ssrcCache.filter(function(e){return-1===Object.values(i).indexOf(e)});return console.log("SdpSimulcast built ssrcs to add: ",o),e.ssrcs.forEach(function(e){i[e.id]&&(e.id=i[e.id])}),o.forEach(function(t){e.ssrcs.push({id:t,attribute:"msid",value:n}),e.ssrcs.push({id:t,attribute:"cname",value:r})}),e.ssrcGroups=e.ssrcGroups||[],e.ssrcGroups.push({semantics:"SIM",ssrcs:this.ssrcCache.join(" ")}),e},c.prototype._generateSourceData=function(e,t){var n=function(e,t){e.ssrcs.push({id:t,attribute:"cname",value:i}),e.ssrcs.push({id:t,attribute:"msid",value:r})},r=s(e,t,"msid"),i=s(e,t,"cname");this.options.usesUnifiedPlan&&!r&&(r=e.msid,e.ssrcs.forEach(function(t){e.ssrcs.push({id:t.id,attribute:"msid",value:r})}));for(var o=[],a=0;a<this.options.numOfLayers-1;++a){var c=Math.floor(4294967295*Math.random())+0;n(e,c),o.push(c)}return e.ssrcGroups=e.ssrcGroups||[],e.ssrcGroups.push({semantics:"SIM",ssrcs:t+" "+o.join(" ")}),e},c.prototype._restoreSimulcast=function(e){var t,n=e.ssrcs&&e.ssrcs.map(function(e){return e.id}).filter(function(e,t,n){return n.indexOf(e)===t}).length||0,r=e.ssrcGroups&&e.ssrcGroups.length||0;if(0===n||n>2)return e;if(2==n&&0===r)return e;if(1===n)t=e.ssrcs[0].id;else{var i=e.ssrcGroups.filter(function(e){return"FID"===e.semantics})[0];if(!i)return e;t=parseInt(i.ssrcs.split(" ")[0])}return console.log("SdpSimulcast: current ssrc cache: ",this.ssrcCache),console.log("SdpSimulcast: parsed primary ssrc "+t),-1!==this.ssrcCache.indexOf(t)?(console.log("SdpSimulcast: Have seen primary ssrc before, filling in data from cache"),e=this._fillInSourceDataFromCache(e)):(console.log("SdpSimulcast: Have not seen primary ssrc before, generating source data"),e=this._generateSourceData(e,t)),this.ssrcCache=this._parseSimLayers(e),e},c.prototype.mungeRemoteDescription=function(e){if(!d(e))return e;var t=r.parse(e.sdp),n=this;return u(t,function(e){n.options.explodeRemoteSimulcast?(function(e){if(e&&Array.isArray(e.ssrcGroups))for(var t=o(e),n=[],r=e.ssrcGroups.length;r--;)if("SIM"===e.ssrcGroups[r].semantics){for(var i=e.ssrcGroups[r].ssrcs.split(" "),s=0;s<i.length;s++){var c=i[s];n.push(c);var u=t[c].msid.split(" ");t[c].msid=[u[0],"/",s," ",u[1],"/",s].join(""),t[c].cname=[t[c].cname,"/",s].join(""),e.ssrcGroups.forEach(function(e){if("SIM"!==e.semantics){var r=e.ssrcs.split(" ");-1!==r.indexOf(c)&&r.forEach(function(e){t[e].msid=t[c].msid,t[e].cname=t[c].cname,e!==c&&n.push(e)})}})}e.ssrcs=a(t,n),e.ssrcGroups.splice(r,1)}})(e):(function(e){if(e&&Array.isArray(e.ssrcGroups)){var t=o(e);e.ssrcGroups.forEach(function(n){if("SIM"===n.semantics){console.info("Imploding SIM group: "+n.ssrcs),n.nuke=!0;for(var r=n.ssrcs.split(" "),i=1;i<r.length;i++){var o=r[i];delete t[o],e.ssrcGroups.forEach(function(e){if("SIM"!==e.semantics){var n=e.ssrcs.split(" ");-1!==n.indexOf(o)&&(n.forEach(function(e){delete t[e]}),e.nuke=!0)}})}}}),e.ssrcs=a(t);for(var n=e.ssrcGroups.length;n--;)e.ssrcGroups[n].nuke&&e.ssrcGroups.splice(n,1)}else console.info("Halt: There are no SSRC groups in the remote description.")})(e),n.options.usesUnifiedPlan||(function(e){e&&(Array.isArray(e.invalid)||(e.invalid=[]),e.invalid.some(function(e){return"x-google-flag:conference"===e.value})||e.invalid.push({value:"x-google-flag:conference"}))})(e)}),new RTCSessionDescription({type:e.type,sdp:r.write(t)})},c.prototype.mungeLocalDescription=function(e){if(!d(e))return e;var t=r.parse(e.sdp),n=this;return u(t,function(e){"recvonly"!=e.direction&&"inactive"!=e.direction&&n._restoreSimulcast(e)}),new RTCSessionDescription({type:e.type,sdp:r.write(t)})},e.exports=c},function(e,t){t.writeSsrcs=function(e,t){var n=[];if(void 0!==e&&0!==Object.keys(e).length){Array.isArray(t)||(t=[]);for(var r=0;r<t.length;r++){var i=t[r],o=e[i];Object.keys(o).forEach(function(e){n.push({id:i,attribute:e,value:o[e]})})}Object.keys(e).forEach(function(r){if(r=parseInt(r),!(t.indexOf(r)>=0)){var i=e[r];Object.keys(i).forEach(function(e){n.push({id:r,attribute:e,value:i[e]})})}})}return n},t.parseSsrcs=function(e){var t={};return void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&e.ssrcs.forEach(function(e){t[e.id]||(t[e.id]={}),t[e.id][e.attribute]=e.value}),t}},function(e,t,n){"use strict";n.r(t),t.default=function(e,t,n,r){this.blob=e,this.name=t,this.startTime=n,this.wordArray=r}},function(e,t,n){var r=n(162),i=n(81),o=n(163),a=function(){this.url=(function(){var e="config does not contain an url to a Sphinx4 https server";if(void 0===config.sphinxURL)console.log(e);else{var t=config.sphinxURL;if(void 0!==t.includes&&t.includes("https://"))return t;console.log(e)}})()};a.prototype=Object.create(o.prototype),a.constructor=a,a.prototype.sendRequest=function(e,t){console.log("sending an audio file  to "+this.url),console.log("the audio file being sent: "+e);var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE&&200===n.status)t(n.responseText);else if(n.readyState===XMLHttpRequest.DONE)throw new Error("unable to accept response from sphinx server. status: "+n.status)},n.open("POST",this.url),n.setRequestHeader("Content-Type",i.determineCorrectFileType()),n.send(e),console.log("send "+e)},a.prototype.formatResponse=function(e){var t=JSON.parse(e).objects;t.shift();var n=[];return t.forEach(function(e){return e.filler||n.push(new r(e.word,e.start,e.end))}),n},a.prototype.verify=function(e){if(console.log("response from server:"+e.toString()),"string"!=typeof e)return!1;var t;try{t=JSON.parse(e)}catch(e){return console.log(e),!1}if(void 0===t.objects)return!1;var n=t.objects;return!(!n[0]||!n[0]["session-id"])},e.exports=a},function(e,t,n){"use strict";n.r(t);var r=function(e,t,n){this.word=e,this.begin=t,this.end=n};r.prototype.getWord=function(){return this.word},r.prototype.getBeginTime=function(){return this.begin},r.prototype.getEndTime=function(){return this.end},t.default=r},function(e,t){var n=function(){throw new Error("TranscriptionService is abstract and cannot becreated")};n.prototype.send=function(e,t){var n=this;this.sendRequest(e.blob,function(r){n.verify(r)?e.wordArray=n.formatResponse(r):(console.log("the retrieved response from the server is not valid!"),e.wordArray=[]),t(e)})},n.prototype.sendRequest=function(e,t){throw new Error("TranscriptionService.sendRequest is abstract")},n.prototype.formatResponse=function(e){throw new Error("TranscriptionService.format is abstract")},n.prototype.verify=function(e){throw new Error("TranscriptionService.verify is abstract")},e.exports=n},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"shimGetUserMedia",function(){return E}),n.d(r,"shimGetDisplayMedia",function(){return b}),n.d(r,"shimMediaStream",function(){return C}),n.d(r,"shimOnTrack",function(){return T}),n.d(r,"shimGetSendersWithDtmf",function(){return R}),n.d(r,"shimGetStats",function(){return A}),n.d(r,"shimSenderReceiverGetStats",function(){return k}),n.d(r,"shimAddTrackRemoveTrackWithNative",function(){return I}),n.d(r,"shimAddTrackRemoveTrack",function(){return w}),n.d(r,"shimPeerConnection",function(){return P}),n.d(r,"fixNegotiationNeeded",function(){return O});var i={};n.r(i),n.d(i,"shimGetUserMedia",function(){return M}),n.d(i,"shimGetDisplayMedia",function(){return L}),n.d(i,"shimPeerConnection",function(){return x}),n.d(i,"shimReplaceTrack",function(){return F});var o={};n.r(o),n.d(o,"shimGetUserMedia",function(){return j}),n.d(o,"shimGetDisplayMedia",function(){return H}),n.d(o,"shimOnTrack",function(){return U}),n.d(o,"shimPeerConnection",function(){return J}),n.d(o,"shimSenderGetStats",function(){return B}),n.d(o,"shimReceiverGetStats",function(){return G}),n.d(o,"shimRemoveStream",function(){return V}),n.d(o,"shimRTCDataChannel",function(){return q}),n.d(o,"shimAddTransceiver",function(){return K}),n.d(o,"shimCreateOffer",function(){return W}),n.d(o,"shimCreateAnswer",function(){return z});var a={};n.r(a),n.d(a,"shimLocalStreamsAPI",function(){return $}),n.d(a,"shimRemoteStreamsAPI",function(){return Q}),n.d(a,"shimCallbacksAPI",function(){return X}),n.d(a,"shimGetUserMedia",function(){return Y}),n.d(a,"shimConstraints",function(){return Z}),n.d(a,"shimRTCIceServerUrls",function(){return ee}),n.d(a,"shimTrackEventTransceiver",function(){return te}),n.d(a,"shimCreateOfferLegacy",function(){return ne});var s={};n.r(s),n.d(s,"shimRTCIceCandidate",function(){return oe}),n.d(s,"shimMaxMessageSize",function(){return ae}),n.d(s,"shimSendThrowTypeError",function(){return se}),n.d(s,"shimConnectionState",function(){return ce}),n.d(s,"removeAllowExtmapMixed",function(){return ue});var c=!0,u=!0;function d(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function l(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var o=function(e){var t=n(e);t&&r(t)};return this._eventMap=this._eventMap||{},this._eventMap[r]=o,i.apply(this,[e,o])};var o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[n])return o.apply(this,arguments);var r=this._eventMap[n];return delete this._eventMap[n],o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function h(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(c=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function p(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(u=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function f(){if("object"==typeof window){if(c)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function m(e,t){u&&console.warn(e+" is deprecated, please use "+t+" instead.")}function v(e){var t=e.navigator,n={browser:null,version:null};if(void 0===e||!e.navigator)return n.browser="Not a browser.",n;if(t.mozGetUserMedia)n.browser="firefox",n.version=d(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)n.browser="chrome",n.version=d(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=d(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=d(t.userAgent,/AppleWebKit\/(\d+)\./,1),n.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return n}function g(e){return"[object Object]"===Object.prototype.toString.call(e)}function _(e){return g(e)?Object.keys(e).reduce(function(t,n){var r=g(e[n]),i=r?_(e[n]):e[n],o=r&&!Object.keys(i).length;return void 0===i||o?t:_extends(t,_defineProperty({},n,i))},{}):e}function y(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var o=[];return e.forEach(function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)}),o.forEach(function(t){e.forEach(function(n){n.type===r&&n.trackId===t.id&&(function e(t,n,r){n&&!r.has(n.id)&&(r.set(n.id,n),Object.keys(n).forEach(function(i){i.endsWith("Id")?e(t,t.get(n[i]),r):i.endsWith("Ids")&&n[i].forEach(function(n){e(t,t.get(n),r)})}))})(e,n,i)})}),i}var S=f;function E(e){var t=e&&e.navigator;if(t.mediaDevices){var n=v(e),r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"==typeof r.ideal?(o[i("min",n)]=r.ideal,t.optional.push(o),(o={})[i("max",n)]=r.ideal,t.optional.push(o)):(o[i("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach(function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(n.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){var o=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};o((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),o(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){var a=e.video.facingMode;a=a&&("object"==typeof a?a:{ideal:a});var s,c=n.version<66;if(a&&("user"===a.exact||"environment"===a.exact||"user"===a.ideal||"environment"===a.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||c))if(delete e.video.facingMode,"environment"===a.exact||"environment"===a.ideal?s=["back","rear"]:"user"!==a.exact&&"user"!==a.ideal||(s=["front"]),s)return t.mediaDevices.enumerateDevices().then(function(t){var n=(t=t.filter(function(e){return"videoinput"===e.kind})).find(function(e){return s.some(function(t){return e.label.toLowerCase().includes(t)})});return!n&&t.length&&s.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=a.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=r(e.video),S("chrome: "+JSON.stringify(e)),i(e)});e.video=r(e.video)}return S("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return n.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,n,r){i(e,function(e){t.webkitGetUserMedia(e,n,function(e){r&&r(o(e))})})}.bind(t),t.mediaDevices.getUserMedia){var a=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return i(e,function(e){return a(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return t},function(e){return Promise.reject(o(e))})})}}}}function b(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then(function(t){var r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function C(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function T(e){if("object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype)l(e,"track",function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e});else{Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find(function(e){return e.track&&e.track.id===r.track.id}):{track:r.track};var o=new Event("track");o.track=r.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)}),t.stream.getTracks().forEach(function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find(function(e){return e.track&&e.track.id===r.id}):{track:r};var o=new Event("track");o.track=r,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}}function R(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach(function(e){n._senders.push(t(n,e))})};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach(function(e){var n=t._senders.find(function(t){return t.track===e});n&&t._senders.splice(t._senders.indexOf(n),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function A(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),r=n[0],i=n[1],o=n[2];if(arguments.length>0&&"function"==typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof r))return t.apply(this,[]);var a=function(e){var t={};return e.result().forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t},s=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]]}))};if(arguments.length>=2){return t.apply(this,[function(e){i(s(a(e)))},r])}return new Promise(function(n,r){t.apply(e,[function(e){n(s(a(e)))},r])}).then(i,o)}}}function k(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach(function(t){return t._pc=e}),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return y(t,e.track,!0)})}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=r.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t}),l(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return y(t,e.track,!1)})}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,n,r,o=arguments[0];return this.getSenders().forEach(function(e){e.track===o&&(t?r=!0:t=e)}),this.getReceivers().forEach(function(e){return e.track===o&&(n?r=!0:n=e),e.track===o}),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}}}function I(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(t){return e._shimmedLocalStreams[t][0]})};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(e){if(t.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")});var r=this.getSenders();n.apply(this,arguments);var i=this.getSenders().filter(function(e){return-1===r.indexOf(e)});this._shimmedLocalStreams[e.id]=[e].concat(i)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]}),i.apply(this,arguments)}}function w(e){if(e.RTCPeerConnection){var t=v(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return I(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map(function(t){return e._reverseStreams[t.id]})};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(function(e){if(n.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}r.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then(function(){r.dispatchEvent(new Event("negotiationneeded"))});else{var a=new e.MediaStream([t]);this._streams[n.id]=a,this._reverseStreams[a.id]=n,this.addStream(a)}return this.getSenders().find(function(e){return e.track===t})},["createOffer","createAnswer"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t],r=_defineProperty({},t,function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[function(n){var r=s(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then(function(t){return s(e,t)})});e.RTCPeerConnection.prototype[t]=r[t]});var o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=(e=this,t=arguments[0],n=t.sdp,Object.keys(e._reverseStreams||[]).forEach(function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:n})),o.apply(this,arguments)):o.apply(this,arguments);var e,t,n};var a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach(function(r){n._streams[r].getTracks().find(function(t){return e.track===t})&&(t=n._streams[r])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function s(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)}),new RTCSessionDescription({type:t.type,sdp:n})}}function P(e){var t=v(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection){var n=0===e.RTCPeerConnection.prototype.addIceCandidate.length;t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t],r=_defineProperty({},t,function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)});e.RTCPeerConnection.prototype[t]=r[t]});var r=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return n||arguments[0]?t.version<78&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}}function O(e){l(e,"negotiationneeded",function(e){if("stable"===e.target.signalingState)return e})}var D=n(114),N=n.n(D);function M(e){var t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch(function(e){return Promise.reject((function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}})(e))})}}function L(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function x(e){var t=v(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var r=N()(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&m("RTCIceServer.url","RTCIceServer.urls");var r="string"==typeof t;return r&&(t=[t]),t=t.filter(function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n}),delete e.url,e.urls=r?t[0]:t,!!t.length}})})(e.iceServers,t.version),f("ICE servers after filtering:",e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype}function F(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}function j(e){var t=v(e),n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){m("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var i=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"==typeof e&&"object"==typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),i(e.audio,"autoGainControl","mozAutoGainControl"),i(e.audio,"noiseSuppression","mozNoiseSuppression")),o(e)},r&&r.prototype.getSettings){var a=r.prototype.getSettings;r.prototype.getSettings=function(){var e=a.apply(this,arguments);return i(e,"mozAutoGainControl","autoGainControl"),i(e,"mozNoiseSuppression","noiseSuppression"),e}}if(r&&r.prototype.applyConstraints){var s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"==typeof e&&(e=JSON.parse(JSON.stringify(e)),i(e,"autoGainControl","mozAutoGainControl"),i(e,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[e])}}}}function H(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function U(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function J(e){var t=v(e);if("object"==typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){if(!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t],r=_defineProperty({},t,function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)});e.RTCPeerConnection.prototype[t]=r[t]}),t.version<68){var n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}var r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),n=e[0],o=e[1],a=e[2];return i.apply(this,[n||null]).then(function(e){if(t.version<53&&!o)try{e.forEach(function(e){e.type=r[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach(function(t,n){e.set(n,_extends({},t,{type:r[t.type]||t.type}))})}return e}).then(o,a)}}}function B(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach(function(t){return t._pc=e}),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function G(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach(function(t){return t._pc=e}),n}),l(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function V(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;m("removeStream","removeTrack"),this.getSenders().forEach(function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)})})}function q(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function K(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach(function(e){if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});var r=t.apply(this,arguments);if(n){var i=r.sender,o=i.getParameters();"encodings"in o||(o.encodings=e.sendEncodings,this.setParametersPromises.push(i.setParameters(o).catch(function(){})))}return r})}}function W(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return t.apply(n,e)}).finally(function(){n.setParametersPromises=[]}):t.apply(this,arguments)}}}function z(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return t.apply(n,e)}).finally(function(){n.setParametersPromises=[]}):t.apply(this,arguments)}}}function $(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(function(r){return t.call(n,r,e)}),e.getVideoTracks().forEach(function(r){return t.call(n,r,e)})},e.RTCPeerConnection.prototype.addTrack=function(e){var n=arguments[1];return n&&(this._localStreams?this._localStreams.includes(n)||this._localStreams.push(n):this._localStreams=[n]),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach(function(e){r.includes(e.track)&&t.removeTrack(e)})}})}}function Q(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}})})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}})}),t.apply(e,arguments)}}}function X(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};var s=function(e,t,n){var r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=s}}function Y(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(Z(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function Z(e){return e&&void 0!==e.video?_extends({},e,{video:_(e.video)}):e}function ee(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],i=0;i<e.iceServers.length;i++){var o=e.iceServers[i];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(m("RTCIceServer.url","RTCIceServer.urls"),(o=JSON.parse(JSON.stringify(o))).urls=o.url,delete o.url,r.push(o)):r.push(e.iceServers[i])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}function te(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function ne(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find(function(e){return"audio"===e.receiver.track.kind});!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find(function(e){return"video"===e.receiver.track.kind});!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}}var re=n(50),ie=n.n(re);function oe(e){if(e.RTCIceCandidate&&!(e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),r=ie.a.parseCandidate(e.candidate),i=_extends(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,l(e,"icecandidate",function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t})}}function ae(e){if(e.RTCPeerConnection){var t=v(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=function(e){if(!e||!e.sdp)return!1;var t=ie.a.splitSections(e.sdp);return t.shift(),t.some(function(e){var t=ie.a.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})},r=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n},i=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},o=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var i=ie.a.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){(this._sctp=null,"chrome"===t.browser&&t.version>=76)&&("plan-b"===this.getConfiguration().sdpSemantics&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0}));if(n(arguments[0])){var e,s=r(arguments[0]),c=i(s),u=o(arguments[0],s);e=0===c&&0===u?Number.POSITIVE_INFINITY:0===c||0===u?Math.max(c,u):Math.min(c,u);var d={};Object.defineProperty(d,"maxMessageSize",{get:function(){return e}}),this._sctp=d}return a.apply(this,arguments)}}}function se(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},l(e,"datachannel",function(e){return n(e.channel,e.target),e})}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function ce(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}}function ue(e){if(e.RTCPeerConnection){var t=v(e);if(!("chrome"===t.browser&&t.version>=71)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter(function(e){return"a=extmap-allow-mixed"!==e.trim()}).join("\n")),n.apply(this,arguments)}}}}var de=(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},n=f,c=v(e),u={browserDetails:c,commonShim:s,extractVersion:d,disableLog:h,disableWarnings:p};switch(c.browser){case"chrome":if(!P||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),u;n("adapter.js shimming chrome."),u.browserShim=r,E(e),C(e),P(e),T(e),w(e),R(e),A(e),k(e),O(e),oe(e),ce(e),ae(e),se(e),ue(e);break;case"firefox":if(!J||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),u;n("adapter.js shimming firefox."),u.browserShim=o,j(e),J(e),U(e),V(e),B(e),G(e),q(e),K(e),W(e),z(e),oe(e),ce(e),ae(e),se(e);break;case"edge":if(!x||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),u;n("adapter.js shimming edge."),u.browserShim=i,M(e),L(e),x(e),F(e),ae(e),se(e);break;case"safari":if(!t.shimSafari)return n("Safari shim is not included in this adapter release."),u;n("adapter.js shimming safari."),u.browserShim=a,ee(e),ne(e),X(e),$(e),Q(e),te(e),Y(e),oe(e),ae(e),se(e),ue(e);break;default:n("Unsupported browser!")}return u})({window:window});t.default=de}])},"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.JitsiMeetJS=t():e.JitsiMeetJS=t()},469,[470,16,42,111,17,54,48,29,30,45,47,44,25]);
__d(function(g,r,i,a,m,e,d){m.exports=function(n){throw new Error("\""+n+"\" is read-only")}},470,[]);
__d(function(global,_$$_REQUIRE,_$$_IMPORT_DEFAULT,_$$_IMPORT_ALL,module,exports,_dependencyMap){var _readOnlyError=_$$_REQUIRE(_dependencyMap[0]),_extends=_$$_REQUIRE(_dependencyMap[1]),_get=_$$_REQUIRE(_dependencyMap[2]),_regeneratorRuntime=_$$_REQUIRE(_dependencyMap[3]),_slicedToArray=_$$_REQUIRE(_dependencyMap[4]),_defineProperty=_$$_REQUIRE(_dependencyMap[5]),_assertThisInitialized=_$$_REQUIRE(_dependencyMap[6]),_classCallCheck=_$$_REQUIRE(_dependencyMap[7]),_createClass=_$$_REQUIRE(_dependencyMap[8]),_inherits=_$$_REQUIRE(_dependencyMap[9]),_possibleConstructorReturn=_$$_REQUIRE(_dependencyMap[10]),_getPrototypeOf=_$$_REQUIRE(_dependencyMap[11]),_toConsumableArray=_$$_REQUIRE(_dependencyMap[12]),e,t;function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _createForOfIteratorHelperLoose(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e=window,t=function(){return(function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=146)})([function(e,t){e.exports={ADD_ICE_CANDIDATE_FAILED:"xmpp.add_ice_candidate_failed",AUDIO_MUTED_BY_FOCUS:"xmpp.audio_muted_by_focus",AUTHENTICATION_REQUIRED:"xmpp.authentication_required",BRIDGE_DOWN:"xmpp.bridge_down",CALL_ACCEPTED:"xmpp.callaccepted.jingle",CALL_INCOMING:"xmpp.callincoming.jingle",CALL_ENDED:"xmpp.callended.jingle",CHAT_ERROR_RECEIVED:"xmpp.chat_error_received",CONFERENCE_PROPERTIES_CHANGED:"xmpp.conference_properties_changed",CONNECTION_ESTABLISHED:"xmpp.connection.connected",CONNECTION_FAILED:"xmpp.connection.failed",CONNECTION_INTERRUPTED:"xmpp.connection.interrupted",CONNECTION_RESTORED:"xmpp.connection.restored",CONNECTION_ICE_FAILED:"xmpp.connection.ice.failed",CONNECTION_STATUS_CHANGED:"xmpp.connection.status.changed",DISPLAY_NAME_CHANGED:"xmpp.display_name_changed",EMUC_ROOM_ADDED:"xmpp.emuc_room_added",EMUC_ROOM_REMOVED:"xmpp.emuc_room_removed",ETHERPAD:"xmpp.etherpad",FOCUS_DISCONNECTED:"xmpp.focus_disconnected",FOCUS_LEFT:"xmpp.focus_left",GRACEFUL_SHUTDOWN:"xmpp.graceful_shutdown",ICE_RESTARTING:"rtc.ice_restarting",ICE_RESTART_SUCCESS:"rtc.ice_restart_success",KICKED:"xmpp.kicked",LOCAL_ROLE_CHANGED:"xmpp.localrole_changed",MEETING_ID_SET:"xmpp.meeting_id_set",MESSAGE_RECEIVED:"xmpp.message_received",INVITE_MESSAGE_RECEIVED:"xmpp.invite_message_received",PRIVATE_MESSAGE_RECEIVED:"xmpp.private_message_received",MUC_MEMBER_BOT_TYPE_CHANGED:"xmpp.muc_member_bot_type_changed",MUC_DESTROYED:"xmpp.muc_destroyed",MUC_JOINED:"xmpp.muc_joined",MUC_MEMBER_JOINED:"xmpp.muc_member_joined",MUC_MEMBER_LEFT:"xmpp.muc_member_left",MUC_LOBBY_MEMBER_JOINED:"xmpp.muc_lobby_member_joined",MUC_LOBBY_MEMBER_UPDATED:"xmpp.muc_lobby_member_updated",MUC_LOBBY_MEMBER_LEFT:"xmpp.muc_lobby_member_left",MUC_DENIED_ACCESS:"xmpp.muc_denied access",MUC_LEFT:"xmpp.muc_left",MUC_ROLE_CHANGED:"xmpp.muc_role_changed",MUC_LOCK_CHANGED:"xmpp.muc_lock_changed",MUC_MEMBERS_ONLY_CHANGED:"xmpp.muc_members_only_changed",PARTICIPANT_AUDIO_MUTED:"xmpp.audio_muted",PARTICIPANT_VIDEO_MUTED:"xmpp.video_muted",PARTICIPANT_VIDEO_TYPE_CHANGED:"xmpp.video_type",PARTCIPANT_FEATURES_CHANGED:"xmpp.partcipant_features_changed",PASSWORD_REQUIRED:"xmpp.password_required",PHONE_NUMBER_CHANGED:"conference.phoneNumberChanged",PRESENCE_RECEIVED:"xmpp.presence_received",PRESENCE_STATUS:"xmpp.presence_status",PROMPT_FOR_LOGIN:"xmpp.prompt_for_login",READY_TO_JOIN:"xmpp.ready_to_join",RECORDER_STATE_CHANGED:"xmpp.recorderStateChanged",REMOTE_STATS:"xmpp.remote_stats",RENEGOTIATION_FAILED:"xmpp.renegotiation_failed",RESERVATION_ERROR:"xmpp.room_reservation_error",ROOM_CONNECT_ERROR:"xmpp.room_connect_error",ROOM_CONNECT_NOT_ALLOWED_ERROR:"xmpp.room_connect_error.not_allowed",ROOM_JOIN_ERROR:"xmpp.room_join_error",ROOM_CONNECT_MEMBERS_ONLY_ERROR:"xmpp.room_connect_error.members_only",ROOM_MAX_USERS_ERROR:"xmpp.room_max_users_error",SENDING_CHAT_MESSAGE:"xmpp.sending_chat_message",SENDING_PRIVATE_CHAT_MESSAGE:"xmpp.sending_private_chat_message",SESSION_ACCEPT_TIMEOUT:"xmpp.session_accept_timeout",SPEAKER_STATS_RECEIVED:"xmpp.speaker_stats_received",CONFERENCE_TIMESTAMP_RECEIVED:"xmpp.conference_timestamp_received",START_MUTED_FROM_FOCUS:"xmpp.start_muted_from_focus",SUBJECT_CHANGED:"xmpp.subject_changed",SUSPEND_DETECTED:"xmpp.suspend_detected",TRANSCRIPTION_STATUS_CHANGED:"xmpp.transcription_status_changed",TRANSPORT_INFO:"xmpp.transportinfo.jingle",VIDEO_SIP_GW_AVAILABILITY_CHANGED:"xmpp.videoSIPGWAvailabilityChanged",VIDEO_SIP_GW_SESSION_STATE_CHANGED:"xmpp.videoSIPGWSessionStateChanged",ICE_CONNECTION_STATE_CHANGED:"xmpp.ice_connection_state_changed",JSON_MESSAGE_RECEIVED:"xmmp.json_message_received"}},function(e,t,n){"use strict";n.r(t),n.d(t,"AUDIO_INPUT_STATE_CHANGE",function(){return r}),n.d(t,"AUTH_STATUS_CHANGED",function(){return i}),n.d(t,"BEFORE_STATISTICS_DISPOSED",function(){return o}),n.d(t,"CONFERENCE_ERROR",function(){return a}),n.d(t,"CONFERENCE_FAILED",function(){return s}),n.d(t,"CONFERENCE_JOINED",function(){return c}),n.d(t,"CONFERENCE_LEFT",function(){return u}),n.d(t,"CONNECTION_ESTABLISHED",function(){return d}),n.d(t,"CONNECTION_INTERRUPTED",function(){return l}),n.d(t,"CONNECTION_RESTORED",function(){return h}),n.d(t,"DATA_CHANNEL_OPENED",function(){return p}),n.d(t,"DISPLAY_NAME_CHANGED",function(){return f}),n.d(t,"DOMINANT_SPEAKER_CHANGED",function(){return m}),n.d(t,"CONFERENCE_CREATED_TIMESTAMP",function(){return v}),n.d(t,"DTMF_SUPPORT_CHANGED",function(){return g}),n.d(t,"ENDPOINT_MESSAGE_RECEIVED",function(){return _}),n.d(t,"JVB121_STATUS",function(){return y}),n.d(t,"KICKED",function(){return S}),n.d(t,"PARTICIPANT_KICKED",function(){return E}),n.d(t,"LAST_N_ENDPOINTS_CHANGED",function(){return b}),n.d(t,"LOCK_STATE_CHANGED",function(){return C}),n.d(t,"SERVER_REGION_CHANGED",function(){return T}),n.d(t,"_MEDIA_SESSION_STARTED",function(){return R}),n.d(t,"_MEDIA_SESSION_ACTIVE_CHANGED",function(){return A}),n.d(t,"MEMBERS_ONLY_CHANGED",function(){return k}),n.d(t,"MESSAGE_RECEIVED",function(){return I}),n.d(t,"NO_AUDIO_INPUT",function(){return w}),n.d(t,"NOISY_MIC",function(){return P}),n.d(t,"PRIVATE_MESSAGE_RECEIVED",function(){return O}),n.d(t,"PARTICIPANT_CONN_STATUS_CHANGED",function(){return D}),n.d(t,"PARTCIPANT_FEATURES_CHANGED",function(){return N}),n.d(t,"PARTICIPANT_PROPERTY_CHANGED",function(){return M}),n.d(t,"P2P_STATUS",function(){return L}),n.d(t,"PHONE_NUMBER_CHANGED",function(){return x}),n.d(t,"PROPERTIES_CHANGED",function(){return F}),n.d(t,"RECORDER_STATE_CHANGED",function(){return j}),n.d(t,"VIDEO_SIP_GW_AVAILABILITY_CHANGED",function(){return H}),n.d(t,"VIDEO_SIP_GW_SESSION_STATE_CHANGED",function(){return U}),n.d(t,"START_MUTED_POLICY_CHANGED",function(){return J}),n.d(t,"STARTED_MUTED",function(){return B}),n.d(t,"SUBJECT_CHANGED",function(){return G}),n.d(t,"SUSPEND_DETECTED",function(){return V}),n.d(t,"TALK_WHILE_MUTED",function(){return q}),n.d(t,"TRACK_ADDED",function(){return K}),n.d(t,"TRACK_AUDIO_LEVEL_CHANGED",function(){return z}),n.d(t,"TRACK_MUTE_CHANGED",function(){return W}),n.d(t,"TRACK_REMOVED",function(){return $}),n.d(t,"TRANSCRIPTION_STATUS_CHANGED",function(){return Q}),n.d(t,"USER_JOINED",function(){return X}),n.d(t,"USER_LEFT",function(){return Y}),n.d(t,"USER_ROLE_CHANGED",function(){return Z}),n.d(t,"USER_STATUS_CHANGED",function(){return ee}),n.d(t,"BOT_TYPE_CHANGED",function(){return te}),n.d(t,"LOBBY_USER_JOINED",function(){return ne}),n.d(t,"LOBBY_USER_UPDATED",function(){return re}),n.d(t,"LOBBY_USER_LEFT",function(){return ie});var r="conference.audio_input_state_changed",i="conference.auth_status_changed",o="conference.beforeStatisticsDisposed",a="conference.error",s="conference.failed",c="conference.joined",u="conference.left",d="conference.connectionEstablished",l="conference.connectionInterrupted",h="conference.connectionRestored",p="conference.dataChannelOpened",f="conference.displayNameChanged",m="conference.dominantSpeaker",v="conference.createdTimestamp",g="conference.dtmfSupportChanged",_="conference.endpoint_message_received",y="conference.jvb121Status",S="conference.kicked",E="conference.participant_kicked",b="conference.lastNEndpointsChanged",C="conference.lock_state_changed",T="conference.server_region_changed",R="conference.media_session.started",A="conference.media_session.active_changed",k="conference.membersOnlyChanged",I="conference.messageReceived",w="conference.no_audio_input",P="conference.noisy_mic",O="conference.privateMessageReceived",D="conference.participant_conn_status_changed",N="conference.partcipant_features_changed",M="conference.participant_property_changed",L="conference.p2pStatus",x="conference.phoneNumberChanged",F="conference.propertiesChanged",j="conference.recorderStateChanged",H="conference.videoSIPGWAvailabilityChanged",U="conference.videoSIPGWSessionStateChanged",J="conference.start_muted_policy_changed",B="conference.started_muted",G="conference.subjectChanged",V="conference.suspendDetected",q="conference.talk_while_muted",K="conference.trackAdded",z="conference.audioLevelsChanged",W="conference.trackMuteChanged",$="conference.trackRemoved",Q="conference.transcriptionStatusChanged",X="conference.userJoined",Y="conference.userLeft",Z="conference.roleChanged",ee="conference.statusChanged",te="conference.bot_type_changed",ne="conference.lobby.userJoined",re="conference.lobby.userUpdated",ie="conference.lobby.userLeft"},function(e,t,n){(function(t){var n;n=function(){"use strict";var e=void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return(function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}})(e)||(function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)})(e)||(function(){throw new TypeError("Invalid attempt to spread non-iterable instance")})()}var i=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},o=function(e){if("string"!=typeof e)throw new Error("str2binl was passed a non-string");for(var t=[],n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t},a=function(e,t,n,r,o,a){return i((s=i(i(t,e),i(r,a)))<<(c=o)|s>>>32-c,n);var s,c},s=function(e,t,n,r,i,o,s){return a(t&n|~t&r,e,t,i,o,s)},c=function(e,t,n,r,i,o,s){return a(t&r|n&~r,e,t,i,o,s)},u=function(e,t,n,r,i,o,s){return a(t^n^r,e,t,i,o,s)},d=function(e,t,n,r,i,o,s){return a(n^(t|~r),e,t,i,o,s)},l=function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n,r,o,a,l=1732584193,h=-271733879,p=-1732584194,f=271733878,m=0;m<e.length;m+=16)n=l,r=h,o=p,a=f,l=s(l,h,p,f,e[m+0],7,-680876936),f=s(f,l,h,p,e[m+1],12,-389564586),p=s(p,f,l,h,e[m+2],17,606105819),h=s(h,p,f,l,e[m+3],22,-1044525330),l=s(l,h,p,f,e[m+4],7,-176418897),f=s(f,l,h,p,e[m+5],12,1200080426),p=s(p,f,l,h,e[m+6],17,-1473231341),h=s(h,p,f,l,e[m+7],22,-45705983),l=s(l,h,p,f,e[m+8],7,1770035416),f=s(f,l,h,p,e[m+9],12,-1958414417),p=s(p,f,l,h,e[m+10],17,-42063),h=s(h,p,f,l,e[m+11],22,-1990404162),l=s(l,h,p,f,e[m+12],7,1804603682),f=s(f,l,h,p,e[m+13],12,-40341101),p=s(p,f,l,h,e[m+14],17,-1502002290),h=s(h,p,f,l,e[m+15],22,1236535329),l=c(l,h,p,f,e[m+1],5,-165796510),f=c(f,l,h,p,e[m+6],9,-1069501632),p=c(p,f,l,h,e[m+11],14,643717713),h=c(h,p,f,l,e[m+0],20,-373897302),l=c(l,h,p,f,e[m+5],5,-701558691),f=c(f,l,h,p,e[m+10],9,38016083),p=c(p,f,l,h,e[m+15],14,-660478335),h=c(h,p,f,l,e[m+4],20,-405537848),l=c(l,h,p,f,e[m+9],5,568446438),f=c(f,l,h,p,e[m+14],9,-1019803690),p=c(p,f,l,h,e[m+3],14,-187363961),h=c(h,p,f,l,e[m+8],20,1163531501),l=c(l,h,p,f,e[m+13],5,-1444681467),f=c(f,l,h,p,e[m+2],9,-51403784),p=c(p,f,l,h,e[m+7],14,1735328473),h=c(h,p,f,l,e[m+12],20,-1926607734),l=u(l,h,p,f,e[m+5],4,-378558),f=u(f,l,h,p,e[m+8],11,-2022574463),p=u(p,f,l,h,e[m+11],16,1839030562),h=u(h,p,f,l,e[m+14],23,-35309556),l=u(l,h,p,f,e[m+1],4,-1530992060),f=u(f,l,h,p,e[m+4],11,1272893353),p=u(p,f,l,h,e[m+7],16,-155497632),h=u(h,p,f,l,e[m+10],23,-1094730640),l=u(l,h,p,f,e[m+13],4,681279174),f=u(f,l,h,p,e[m+0],11,-358537222),p=u(p,f,l,h,e[m+3],16,-722521979),h=u(h,p,f,l,e[m+6],23,76029189),l=u(l,h,p,f,e[m+9],4,-640364487),f=u(f,l,h,p,e[m+12],11,-421815835),p=u(p,f,l,h,e[m+15],16,530742520),h=u(h,p,f,l,e[m+2],23,-995338651),l=d(l,h,p,f,e[m+0],6,-198630844),f=d(f,l,h,p,e[m+7],10,1126891415),p=d(p,f,l,h,e[m+14],15,-1416354905),h=d(h,p,f,l,e[m+5],21,-57434055),l=d(l,h,p,f,e[m+12],6,1700485571),f=d(f,l,h,p,e[m+3],10,-1894986606),p=d(p,f,l,h,e[m+10],15,-1051523),h=d(h,p,f,l,e[m+1],21,-2054922799),l=d(l,h,p,f,e[m+8],6,1873313359),f=d(f,l,h,p,e[m+15],10,-30611744),p=d(p,f,l,h,e[m+6],15,-1560198380),h=d(h,p,f,l,e[m+13],21,1309151649),l=d(l,h,p,f,e[m+4],6,-145523070),f=d(f,l,h,p,e[m+11],10,-1120210379),p=d(p,f,l,h,e[m+2],15,718787259),h=d(h,p,f,l,e[m+9],21,-343485551),l=i(l,n),h=i(h,r),p=i(p,o),f=i(f,a);return[l,h,p,f]},h={hexdigest:function(e){return(function(e){for(var t="",n=0;n<4*e.length;n++)t+="0123456789abcdef".charAt(e[n>>2]>>n%4*8+4&15)+"0123456789abcdef".charAt(e[n>>2]>>n%4*8&15);return t})(l(o(e),8*e.length))},hash:function(e){return(function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t})(l(o(e),8*e.length))}};function p(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;var n,r,i,o,a,s,c,u,d=new Array(80),l=1732584193,h=-271733879,p=-1732584194,v=271733878,y=-1009589776;for(n=0;n<e.length;n+=16){for(o=l,a=h,s=p,c=v,u=y,r=0;r<80;r++)d[r]=r<16?e[n+r]:_(d[r-3]^d[r-8]^d[r-14]^d[r-16],1),i=g(g(_(l,5),f(r,h,p,v)),g(g(y,d[r]),m(r))),y=v,v=p,p=_(h,30),h=l,l=i;l=g(l,o),h=g(h,a),p=g(p,s),v=g(v,c),y=g(y,u)}return[l,h,p,v,y]}function f(e,t,n,r){return e<20?t&n|~t&r:e<40?t^n^r:e<60?t&n|t&r|n&r:t^n^r}function m(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function v(e,t){var n=y(e);n.length>16&&(n=p(n,8*e.length));for(var r=new Array(16),i=new Array(16),o=0;o<16;o++)r[o]=909522486^n[o],i[o]=1549556828^n[o];var a=p(r.concat(y(t)),512+8*t.length);return p(i.concat(a),672)}function g(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function _(e,t){return e<<t|e>>>32-t}function y(e){for(var t=[],n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<24-n%32;return t}function S(e){for(var t,n,r="",i=0;i<4*e.length;i+=3)for(t=(e[i>>2]>>8*(3-i%4)&255)<<16|(e[i+1>>2]>>8*(3-(i+1)%4)&255)<<8|e[i+2>>2]>>8*(3-(i+2)%4)&255,n=0;n<4;n++)8*i+6*n>32*e.length?r+="=":r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t>>6*(3-n)&63);return r}function E(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>24-n%32&255);return t}var b={b64_hmac_sha1:function(e,t){return S(v(e,t))},b64_sha1:function(e){return S(p(y(e),8*e.length))},binb2str:E,core_hmac_sha1:v,str_hmac_sha1:function(e,t){return E(v(e,t))},str_sha1:function(e){return E(p(y(e),8*e.length))}},C=function(e){var t,n,r="",i=e.length;for(t=0;t<i;t++)(n=e.charCodeAt(t))>=0&&n<=127?r+=e.charAt(t):n>2047?(r+=String.fromCharCode(224|n>>12&15),r+=String.fromCharCode(128|n>>6&63),r+=String.fromCharCode(128|n>>0&63)):(r+=String.fromCharCode(192|n>>6&31),r+=String.fromCharCode(128|n>>0&63));return r},T=function(e){for(var t in e=e||{})if(Object.prototype.hasOwnProperty.call(e,t)){var r="",i="",o="",a=e[t],s="object"===n(a),c=escape(unescape(s?a.value:a));s&&(r=a.expires?";expires="+a.expires:"",i=a.domain?";domain="+a.domain:"",o=a.path?";path="+a.path:""),document.cookie=t+"="+c+r+i+o}};function R(e,t){return new I.Builder(e,t)}function A(e){return new I.Builder("iq",e)}function k(e){return new I.Builder("presence",e)}var I={VERSION:"@VERSION@",NS:{HTTPBIND:"http://jabber.org/protocol/httpbind",BOSH:"urn:xmpp:xbosh",CLIENT:"jabber:client",AUTH:"jabber:iq:auth",ROSTER:"jabber:iq:roster",PROFILE:"jabber:iq:profile",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",MUC:"http://jabber.org/protocol/muc",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",STREAM:"http://etherx.jabber.org/streams",FRAMING:"urn:ietf:params:xml:ns:xmpp-framing",BIND:"urn:ietf:params:xml:ns:xmpp-bind",SESSION:"urn:ietf:params:xml:ns:xmpp-session",VERSION:"jabber:iq:version",STANZAS:"urn:ietf:params:xml:ns:xmpp-stanzas",XHTML_IM:"http://jabber.org/protocol/xhtml-im",XHTML:"http://www.w3.org/1999/xhtml"},XHTML:{tags:["a","blockquote","br","cite","em","img","li","ol","p","span","strong","ul","body"],attributes:{a:["href"],blockquote:["style"],br:[],cite:["style"],em:[],img:["src","alt","style","height","width"],li:["style"],ol:["style"],p:["style"],span:["style"],strong:[],ul:["style"],body:[]},css:["background-color","color","font-family","font-size","font-style","font-weight","margin-left","margin-right","text-align","text-decoration"],validTag:function(e){for(var t=0;t<I.XHTML.tags.length;t++)if(e===I.XHTML.tags[t])return!0;return!1},validAttribute:function(e,t){if(void 0!==I.XHTML.attributes[e]&&I.XHTML.attributes[e].length>0)for(var n=0;n<I.XHTML.attributes[e].length;n++)if(t===I.XHTML.attributes[e][n])return!0;return!1},validCSS:function(e){for(var t=0;t<I.XHTML.css.length;t++)if(e===I.XHTML.css[t])return!0;return!1}},Status:{ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8,REDIRECT:9,CONNTIMEOUT:10,BINDREQUIRED:11},ErrorCondition:{BAD_FORMAT:"bad-format",CONFLICT:"conflict",MISSING_JID_NODE:"x-strophe-bad-non-anon-jid",NO_AUTH_MECH:"no-auth-mech",UNKNOWN_REASON:"unknown"},LogLevel:{DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},ElementType:{NORMAL:1,TEXT:3,CDATA:4,FRAGMENT:11},TIMEOUT:1.1,SECONDARY_TIMEOUT:.1,addNamespace:function(e,t){I.NS[e]=t},forEachChild:function(e,t,n){for(var r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];i.nodeType!==I.ElementType.NORMAL||t&&!this.isTagEqual(i,t)||n(i)}},isTagEqual:function(e,t){return e.tagName===t},_xmlGenerator:null,_makeGenerator:function(){var e;return void 0===document.implementation.createDocument||document.implementation.createDocument&&document.documentMode&&document.documentMode<10?(e=this._getIEXmlDom()).appendChild(e.createElement("strophe")):e=document.implementation.createDocument("jabber:client","strophe",null),e},xmlGenerator:function(){return I._xmlGenerator||(I._xmlGenerator=I._makeGenerator()),I._xmlGenerator},_getIEXmlDom:function(){for(var e=null,t=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"],n=0;n<t.length&&null===e;n++)try{e=new ActiveXObject(t[n])}catch(t){e=null}return e},xmlElement:function(e){if(!e)return null;for(var t=I.xmlGenerator().createElement(e),r=1;r<arguments.length;r++){var i=arguments[r];if(i)if("string"==typeof i||"number"==typeof i)t.appendChild(I.xmlTextNode(i));else if("object"===n(i)&&"function"==typeof i.sort)for(var o=0;o<i.length;o++){var a=i[o];"object"===n(a)&&"function"==typeof a.sort&&void 0!==a[1]&&null!==a[1]&&t.setAttribute(a[0],a[1])}else if("object"===n(i))for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&void 0!==i[s]&&null!==i[s]&&t.setAttribute(s,i[s])}return t},xmlescape:function(e){return(e=(e=(e=(e=e.replace(/\&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/'/g,"&apos;")).replace(/"/g,"&quot;")},xmlunescape:function(e){return(e=(e=(e=(e=e.replace(/\&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&apos;/g,"'")).replace(/&quot;/g,'"')},xmlTextNode:function(e){return I.xmlGenerator().createTextNode(e)},xmlHtmlNode:function(e){var t;return DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)),t},getText:function(e){if(!e)return null;var t="";0===e.childNodes.length&&e.nodeType===I.ElementType.TEXT&&(t+=e.nodeValue);for(var n=0;n<e.childNodes.length;n++)e.childNodes[n].nodeType===I.ElementType.TEXT&&(t+=e.childNodes[n].nodeValue);return I.xmlescape(t)},copyElement:function(e){var t;if(e.nodeType===I.ElementType.NORMAL){t=I.xmlElement(e.tagName);for(var n=0;n<e.attributes.length;n++)t.setAttribute(e.attributes[n].nodeName,e.attributes[n].value);for(var r=0;r<e.childNodes.length;r++)t.appendChild(I.copyElement(e.childNodes[r]))}else e.nodeType===I.ElementType.TEXT&&(t=I.xmlGenerator().createTextNode(e.nodeValue));return t},createHtml:function(e){var t;if(e.nodeType===I.ElementType.NORMAL){var r=e.nodeName.toLowerCase();if(I.XHTML.validTag(r))try{t=I.xmlElement(r);for(var i=0;i<I.XHTML.attributes[r].length;i++){var o=I.XHTML.attributes[r][i],a=e.getAttribute(o);if(null!=a&&""!==a&&!1!==a&&0!==a)if("style"===o&&"object"===n(a)&&void 0!==a.cssText&&(a=a.cssText),"style"===o){for(var s=[],c=a.split(";"),u=0;u<c.length;u++){var d=c[u].split(":"),l=d[0].replace(/^\s*/,"").replace(/\s*$/,"").toLowerCase();if(I.XHTML.validCSS(l)){var h=d[1].replace(/^\s*/,"").replace(/\s*$/,"");s.push(l+": "+h)}}s.length>0&&(a=s.join("; "),t.setAttribute(o,a))}else t.setAttribute(o,a)}for(var p=0;p<e.childNodes.length;p++)t.appendChild(I.createHtml(e.childNodes[p]))}catch(e){t=I.xmlTextNode("")}else{t=I.xmlGenerator().createDocumentFragment();for(var f=0;f<e.childNodes.length;f++)t.appendChild(I.createHtml(e.childNodes[f]))}}else if(e.nodeType===I.ElementType.FRAGMENT){t=I.xmlGenerator().createDocumentFragment();for(var m=0;m<e.childNodes.length;m++)t.appendChild(I.createHtml(e.childNodes[m]))}else e.nodeType===I.ElementType.TEXT&&(t=I.xmlTextNode(e.nodeValue));return t},escapeNode:function(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},unescapeNode:function(e){return"string"!=typeof e?e:e.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},getNodeFromJid:function(e){return e.indexOf("@")<0?null:e.split("@")[0]},getDomainFromJid:function(e){var t=I.getBareJidFromJid(e);if(t.indexOf("@")<0)return t;var n=t.split("@");return n.splice(0,1),n.join("@")},getResourceFromJid:function(e){if(!e)return null;var t=e.split("/");return t.length<2?null:(t.splice(0,1),t.join("/"))},getBareJidFromJid:function(e){return e?e.split("/")[0]:null},_handleError:function(e){void 0!==e.stack&&I.fatal(e.stack),e.sourceURL?I.fatal("error: "+this.handler+" "+e.sourceURL+":"+e.line+" - "+e.name+": "+e.message):e.fileName?I.fatal("error: "+this.handler+" "+e.fileName+":"+e.lineNumber+" - "+e.name+": "+e.message):I.fatal("error: "+e.message)},log:function(e,t){e===this.LogLevel.FATAL&&"object"===n(window.console)&&"function"==typeof window.console.error&&window.console.error(t)},debug:function(e){this.log(this.LogLevel.DEBUG,e)},info:function(e){this.log(this.LogLevel.INFO,e)},warn:function(e){this.log(this.LogLevel.WARN,e)},error:function(e){this.log(this.LogLevel.ERROR,e)},fatal:function(e){this.log(this.LogLevel.FATAL,e)},serialize:function(e){if(!e)return null;"function"==typeof e.tree&&(e=e.tree());var t=r(Array(e.attributes.length).keys()).map(function(t){return e.attributes[t].nodeName});t.sort();var n=t.reduce(function(t,n){return"".concat(t," ").concat(n,'="').concat(I.xmlescape(e.attributes.getNamedItem(n).value),'"')},"<".concat(e.nodeName));if(e.childNodes.length>0){n+=">";for(var i=0;i<e.childNodes.length;i++){var o=e.childNodes[i];switch(o.nodeType){case I.ElementType.NORMAL:n+=I.serialize(o);break;case I.ElementType.TEXT:n+=I.xmlescape(o.nodeValue);break;case I.ElementType.CDATA:n+="<![CDATA["+o.nodeValue+"]]>"}}n+="</"+e.nodeName+">"}else n+="/>";return n},_requestId:0,_connectionPlugins:{},addConnectionPlugin:function(e,t){I._connectionPlugins[e]=t},Builder:function(e,t){"presence"!==e&&"message"!==e&&"iq"!==e||(t&&!t.xmlns?t.xmlns=I.NS.CLIENT:t||(t={xmlns:I.NS.CLIENT})),this.nodeTree=I.xmlElement(e,t),this.node=this.nodeTree}};I.Builder.prototype={tree:function(){return this.nodeTree},toString:function(){return I.serialize(this.nodeTree)},up:function(){return this.node=this.node.parentNode,this},root:function(){return this.node=this.nodeTree,this},attrs:function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(void 0===e[t]?this.node.removeAttribute(t):this.node.setAttribute(t,e[t]));return this},c:function(e,t,n){var r=I.xmlElement(e,t,n);return this.node.appendChild(r),"string"!=typeof n&&"number"!=typeof n&&(this.node=r),this},cnode:function(e){var t,n=I.xmlGenerator();try{t=void 0!==n.importNode}catch(e){t=!1}var r=t?n.importNode(e,!0):I.copyElement(e);return this.node.appendChild(r),this.node=r,this},t:function(e){var t=I.xmlTextNode(e);return this.node.appendChild(t),this},h:function(e){var t=document.createElement("body");t.innerHTML=e;for(var n=I.createHtml(t);n.childNodes.length>0;)this.node.appendChild(n.childNodes[0]);return this}},I.Handler=function(e,t,n,r,i,o,a){this.handler=e,this.ns=t,this.name=n,this.type=r,this.id=i,this.options=a||{matchBareFromJid:!1,ignoreNamespaceFragment:!1},this.options.matchBare&&(I.warn('The "matchBare" option is deprecated, use "matchBareFromJid" instead.'),this.options.matchBareFromJid=this.options.matchBare,delete this.options.matchBare),this.options.matchBareFromJid?this.from=o?I.getBareJidFromJid(o):null:this.from=o,this.user=!0},I.Handler.prototype={getNamespace:function(e){var t=e.getAttribute("xmlns");return t&&this.options.ignoreNamespaceFragment&&(t=t.split("#")[0]),t},namespaceMatch:function(e){var t=this,n=!1;return!this.ns||(I.forEachChild(e,null,function(e){t.getNamespace(e)===t.ns&&(n=!0)}),n||this.getNamespace(e)===this.ns)},isMatch:function(e){var t=e.getAttribute("from");this.options.matchBareFromJid&&(t=I.getBareJidFromJid(t));var n=e.getAttribute("type");return!(!this.namespaceMatch(e)||this.name&&!I.isTagEqual(e,this.name)||this.type&&(Array.isArray(this.type)?-1===this.type.indexOf(n):n!==this.type)||this.id&&e.getAttribute("id")!==this.id||this.from&&t!==this.from)},run:function(e){var t=null;try{t=this.handler(e)}catch(e){throw I._handleError(e),e}return t},toString:function(){return"{Handler: "+this.handler+"("+this.name+","+this.id+","+this.ns+")}"}},I.TimedHandler=function(e,t){this.period=e,this.handler=t,this.lastCalled=(new Date).getTime(),this.user=!0},I.TimedHandler.prototype={run:function(){return this.lastCalled=(new Date).getTime(),this.handler()},reset:function(){this.lastCalled=(new Date).getTime()},toString:function(){return"{TimedHandler: "+this.handler+"("+this.period+")}"}},I.Connection=function(e,t){var n=this;this.service=e,this.options=t||{};var r=this.options.protocol||"";for(var i in 0===e.indexOf("ws:")||0===e.indexOf("wss:")||0===r.indexOf("ws")?this._proto=new I.Websocket(this):this._proto=new I.Bosh(this),this.jid="",this.domain=null,this.features=null,this._sasl_data={},this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.protocolErrorHandlers={HTTP:{},websocket:{}},this._idleTimeout=null,this._disconnectTimeout=null,this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.do_authentication=!0,this.paused=!1,this.restored=!1,this._data=[],this._uniqueId=0,this._sasl_success_handler=null,this._sasl_failure_handler=null,this._sasl_challenge_handler=null,this.maxRetries=5,this._idleTimeout=setTimeout(function(){return n._onIdle()},100),T(this.options.cookies),this.registerSASLMechanisms(this.options.mechanisms),I._connectionPlugins)if(Object.prototype.hasOwnProperty.call(I._connectionPlugins,i)){var o=function(){};o.prototype=I._connectionPlugins[i],this[i]=new o,this[i].init(this)}},I.Connection.prototype={reset:function(){this._proto._reset(),this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.restored=!1,this._data=[],this._requests=[],this._uniqueId=0},pause:function(){this.paused=!0},resume:function(){this.paused=!1},getUniqueId:function(e){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)});return"string"==typeof e||"number"==typeof e?t+":"+e:t+""},addProtocolErrorHandler:function(e,t,n){this.protocolErrorHandlers[e][t]=n},connect:function(e,t,n,r,i,o,a){this.jid=e,this.authzid=I.getBareJidFromJid(this.jid),this.authcid=a||I.getNodeFromJid(this.jid),this.pass=t,this.servtype="xmpp",this.connect_callback=n,this.disconnecting=!1,this.connected=!1,this.authenticated=!1,this.restored=!1,this.domain=I.getDomainFromJid(this.jid),this._changeConnectStatus(I.Status.CONNECTING,null),this._proto._connect(r,i,o)},attach:function(e,t,n,r,i,o,a){if(!(this._proto instanceof I.Bosh)){var s=new Error('The "attach" method can only be used with a BOSH connection.');throw s.name="StropheSessionError",s}this._proto._attach(e,t,n,r,i,o,a)},restore:function(e,t,n,r,i){if(!this._sessionCachingSupported()){var o=new Error('The "restore" method can only be used with a BOSH connection.');throw o.name="StropheSessionError",o}this._proto._restore(e,t,n,r,i)},_sessionCachingSupported:function(){if(this._proto instanceof I.Bosh){if(!JSON)return!1;try{sessionStorage.setItem("_strophe_","_strophe_"),sessionStorage.removeItem("_strophe_")}catch(e){return!1}return!0}return!1},xmlInput:function(e){},xmlOutput:function(e){},rawInput:function(e){},rawOutput:function(e){},nextValidRid:function(e){},send:function(e){if(null!==e){if("function"==typeof e.sort)for(var t=0;t<e.length;t++)this._queueData(e[t]);else"function"==typeof e.tree?this._queueData(e.tree()):this._queueData(e);this._proto._send()}},flush:function(){clearTimeout(this._idleTimeout),this._onIdle()},sendPresence:function(e,t,n,r){var i=this,o=null;"function"==typeof e.tree&&(e=e.tree());var a=e.getAttribute("id");if(a||(a=this.getUniqueId("sendPresence"),e.setAttribute("id",a)),"function"==typeof t||"function"==typeof n){var s=this.addHandler(function(e){o&&i.deleteTimedHandler(o),"error"===e.getAttribute("type")?n&&n(e):t&&t(e)},null,"presence",null,a);r&&(o=this.addTimedHandler(r,function(){return i.deleteHandler(s),n&&n(null),!1}))}return this.send(e),a},sendIQ:function(e,t,n,r){var i=this,o=null;"function"==typeof e.tree&&(e=e.tree());var a=e.getAttribute("id");if(a||(a=this.getUniqueId("sendIQ"),e.setAttribute("id",a)),"function"==typeof t||"function"==typeof n){var s=this.addHandler(function(e){o&&i.deleteTimedHandler(o);var r=e.getAttribute("type");if("result"===r)t&&t(e);else{if("error"!==r){var a=new Error("Got bad IQ type of ".concat(r));throw a.name="StropheError",a}n&&n(e)}},null,"iq",["error","result"],a);r&&(o=this.addTimedHandler(r,function(){return i.deleteHandler(s),n&&n(null),!1}))}return this.send(e),a},_queueData:function(e){if(null===e||!e.tagName||!e.childNodes){var t=new Error("Cannot queue non-DOMElement.");throw t.name="StropheError",t}this._data.push(e)},_sendRestart:function(){var e=this;this._data.push("restart"),this._proto._sendRestart(),this._idleTimeout=setTimeout(function(){return e._onIdle()},100)},addTimedHandler:function(e,t){var n=new I.TimedHandler(e,t);return this.addTimeds.push(n),n},deleteTimedHandler:function(e){this.removeTimeds.push(e)},addHandler:function(e,t,n,r,i,o,a){var s=new I.Handler(e,t,n,r,i,o,a);return this.addHandlers.push(s),s},deleteHandler:function(e){this.removeHandlers.push(e);var t=this.addHandlers.indexOf(e);t>=0&&this.addHandlers.splice(t,1)},registerSASLMechanisms:function(e){this.mechanisms={},(e=e||[I.SASLAnonymous,I.SASLExternal,I.SASLMD5,I.SASLOAuthBearer,I.SASLXOAuth2,I.SASLPlain,I.SASLSHA1]).forEach(this.registerSASLMechanism.bind(this))},registerSASLMechanism:function(e){this.mechanisms[e.prototype.name]=e},disconnect:function(e){if(this._changeConnectStatus(I.Status.DISCONNECTING,e),I.warn("Disconnect was called because: "+e),this.connected){var t=!1;this.disconnecting=!0,this.authenticated&&(t=k({xmlns:I.NS.CLIENT,type:"unavailable"})),this._disconnectTimeout=this._addSysTimedHandler(3e3,this._onDisconnectTimeout.bind(this)),this._proto._disconnect(t)}else I.warn("Disconnect was called before Strophe connected to the server"),this._proto._abortAllRequests(),this._doDisconnect()},_changeConnectStatus:function(e,t,n){for(var r in I._connectionPlugins)if(Object.prototype.hasOwnProperty.call(I._connectionPlugins,r)){var i=this[r];if(i.statusChanged)try{i.statusChanged(e,t)}catch(e){I.error("".concat(r," plugin caused an exception changing status: ").concat(e))}}if(this.connect_callback)try{this.connect_callback(e,t,n)}catch(e){I._handleError(e),I.error("User connection callback caused an exception: ".concat(e))}},_doDisconnect:function(e){"number"==typeof this._idleTimeout&&clearTimeout(this._idleTimeout),null!==this._disconnectTimeout&&(this.deleteTimedHandler(this._disconnectTimeout),this._disconnectTimeout=null),I.debug("_doDisconnect was called"),this._proto._doDisconnect(),this.authenticated=!1,this.disconnecting=!1,this.restored=!1,this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._changeConnectStatus(I.Status.DISCONNECTED,e),this.connected=!1},_dataRecv:function(e,t){var n=this;I.debug("_dataRecv called");var r=this._proto._reqToData(e);if(null!==r){for(this.xmlInput!==I.Connection.prototype.xmlInput&&(r.nodeName===this._proto.strip&&r.childNodes.length?this.xmlInput(r.childNodes[0]):this.xmlInput(r)),this.rawInput!==I.Connection.prototype.rawInput&&(t?this.rawInput(t):this.rawInput(I.serialize(r)));this.removeHandlers.length>0;){var i=this.removeHandlers.pop(),o=this.handlers.indexOf(i);o>=0&&this.handlers.splice(o,1)}for(;this.addHandlers.length>0;)this.handlers.push(this.addHandlers.pop());if(this.disconnecting&&this._proto._emptyQueue())this._doDisconnect();else{var a=r.getAttribute("type");if(null!==a&&"terminate"===a){if(this.disconnecting)return;var s=r.getAttribute("condition"),c=r.getElementsByTagName("conflict");return null!==s?("remote-stream-error"===s&&c.length>0&&(s="conflict"),this._changeConnectStatus(I.Status.CONNFAIL,s)):this._changeConnectStatus(I.Status.CONNFAIL,I.ErrorCondition.UNKOWN_REASON),void this._doDisconnect(s)}I.forEachChild(r,null,function(e){var t=n.handlers;n.handlers=[];for(var r=0;r<t.length;r++){var i=t[r];try{(!i.isMatch(e)||!n.authenticated&&i.user||i.run(e))&&n.handlers.push(i)}catch(e){I.warn("Removing Strophe handlers due to uncaught exception: "+e.message)}}})}}},mechanisms:{},_connect_cb:function(e,t,n){var r;I.debug("_connect_cb was called"),this.connected=!0;try{r=this._proto._reqToData(e)}catch(e){if(e.name!==I.ErrorCondition.BAD_FORMAT)throw e;this._changeConnectStatus(I.Status.CONNFAIL,I.ErrorCondition.BAD_FORMAT),this._doDisconnect(I.ErrorCondition.BAD_FORMAT)}if(r&&(this.xmlInput!==I.Connection.prototype.xmlInput&&(r.nodeName===this._proto.strip&&r.childNodes.length?this.xmlInput(r.childNodes[0]):this.xmlInput(r)),this.rawInput!==I.Connection.prototype.rawInput&&(n?this.rawInput(n):this.rawInput(I.serialize(r))),this._proto._connect_cb(r)!==I.Status.CONNFAIL))if(r.getElementsByTagNameNS?r.getElementsByTagNameNS(I.NS.STREAM,"features").length>0:r.getElementsByTagName("stream:features").length>0||r.getElementsByTagName("features").length>0){var i=[],o=r.getElementsByTagName("mechanism");if(o.length>0)for(var a=0;a<o.length;a++){var s=I.getText(o[a]);this.mechanisms[s]&&i.push(this.mechanisms[s])}0!==i.length||0!==r.getElementsByTagName("auth").length?!1!==this.do_authentication&&this.authenticate(i):this._proto._no_auth_received(t)}else this._proto._no_auth_received(t)},sortMechanismsByPriority:function(e){for(var t=0;t<e.length-1;++t){for(var n=t,r=t+1;r<e.length;++r)e[r].prototype.priority>e[n].prototype.priority&&(n=r);if(n!==t){var i=e[t];e[t]=e[n],e[n]=i}}return e},authenticate:function(e){this._attemptSASLAuth(e)||this._attemptLegacyAuth()},_attemptSASLAuth:function(e){e=this.sortMechanismsByPriority(e||[]);for(var t=!1,n=0;n<e.length;++n)if(e[n].prototype.test(this)){this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge_cb.bind(this),null,"challenge",null,null),this._sasl_mechanism=new e[n],this._sasl_mechanism.onStart(this);var r=R("auth",{xmlns:I.NS.SASL,mechanism:this._sasl_mechanism.name});if(this._sasl_mechanism.isClientFirst){var i=this._sasl_mechanism.onChallenge(this,null);r.t(btoa(i))}this.send(r.tree()),t=!0;break}return t},_sasl_challenge_cb:function(e){var t=atob(I.getText(e)),n=this._sasl_mechanism.onChallenge(this,t),r=R("response",{xmlns:I.NS.SASL});return""!==n&&r.t(btoa(n)),this.send(r.tree()),!0},_attemptLegacyAuth:function(){null===I.getNodeFromJid(this.jid)?(this._changeConnectStatus(I.Status.CONNFAIL,I.ErrorCondition.MISSING_JID_NODE),this.disconnect(I.ErrorCondition.MISSING_JID_NODE)):(this._changeConnectStatus(I.Status.AUTHENTICATING,null),this._addSysHandler(this._onLegacyAuthIQResult.bind(this),null,null,null,"_auth_1"),this.send(A({type:"get",to:this.domain,id:"_auth_1"}).c("query",{xmlns:I.NS.AUTH}).c("username",{}).t(I.getNodeFromJid(this.jid)).tree()))},_onLegacyAuthIQResult:function(e){var t=A({type:"set",id:"_auth_2"}).c("query",{xmlns:I.NS.AUTH}).c("username",{}).t(I.getNodeFromJid(this.jid)).up().c("password").t(this.pass);return I.getResourceFromJid(this.jid)||(this.jid=I.getBareJidFromJid(this.jid)+"/strophe"),t.up().c("resource",{}).t(I.getResourceFromJid(this.jid)),this._addSysHandler(this._auth2_cb.bind(this),null,null,null,"_auth_2"),this.send(t.tree()),!1},_sasl_success_cb:function(e){var t=this;if(this._sasl_data["server-signature"]){var n,r=atob(I.getText(e)).match(/([a-z]+)=([^,]+)(,|$)/);if("v"===r[1]&&(n=r[2]),n!==this._sasl_data["server-signature"])return this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_data={},this._sasl_failure_cb(null)}I.info("SASL authentication succeeded."),this._sasl_mechanism&&this._sasl_mechanism.onSuccess(),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null);var i=[],o=function(e,n){for(;e.length;)t.deleteHandler(e.pop());return t._onStreamFeaturesAfterSASL(n),!1};return i.push(this._addSysHandler(function(e){return o(i,e)},null,"stream:features",null,null)),i.push(this._addSysHandler(function(e){return o(i,e)},I.NS.STREAM,"features",null,null)),this._sendRestart(),!1},_onStreamFeaturesAfterSASL:function(e){this.features=e;for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];"bind"===n.nodeName&&(this.do_bind=!0),"session"===n.nodeName&&(this.do_session=!0)}return this.do_bind?(this.options.explicitResourceBinding?this._changeConnectStatus(I.Status.BINDREQUIRED,null):this.bind(),!1):(this._changeConnectStatus(I.Status.AUTHFAIL,null),!1)},bind:function(){if(this.do_bind){this._addSysHandler(this._onResourceBindResultIQ.bind(this),null,null,null,"_bind_auth_2");var e=I.getResourceFromJid(this.jid);e?this.send(A({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:I.NS.BIND}).c("resource",{}).t(e).tree()):this.send(A({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:I.NS.BIND}).tree())}else I.log(I.LogLevel.INFO,'Strophe.Connection.prototype.bind called but "do_bind" is false')},_onResourceBindResultIQ:function(e){var t;if("error"===e.getAttribute("type"))return I.warn("Resource binding failed."),e.getElementsByTagName("conflict").length>0&&(t=I.ErrorCondition.CONFLICT),this._changeConnectStatus(I.Status.AUTHFAIL,t,e),!1;var n=e.getElementsByTagName("bind");if(!(n.length>0))return I.warn("Resource binding failed."),this._changeConnectStatus(I.Status.AUTHFAIL,null,e),!1;var r=n[0].getElementsByTagName("jid");r.length>0&&(this.jid=I.getText(r[0]),this.do_session?this._establishSession():(this.authenticated=!0,this._changeConnectStatus(I.Status.CONNECTED,null)))},_establishSession:function(){if(!this.do_session)throw new Error("Strophe.Connection.prototype._establishSession "+"called but apparently ".concat(I.NS.SESSION," wasn't advertised by the server"));this._addSysHandler(this._onSessionResultIQ.bind(this),null,null,null,"_session_auth_2"),this.send(A({type:"set",id:"_session_auth_2"}).c("session",{xmlns:I.NS.SESSION}).tree())},_onSessionResultIQ:function(e){if("result"===e.getAttribute("type"))this.authenticated=!0,this._changeConnectStatus(I.Status.CONNECTED,null);else if("error"===e.getAttribute("type"))return I.warn("Session creation failed."),this._changeConnectStatus(I.Status.AUTHFAIL,null,e),!1;return!1},_sasl_failure_cb:function(e){return this._sasl_success_handler&&(this.deleteHandler(this._sasl_success_handler),this._sasl_success_handler=null),this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_mechanism&&this._sasl_mechanism.onFailure(),this._changeConnectStatus(I.Status.AUTHFAIL,null,e),!1},_auth2_cb:function(e){return"result"===e.getAttribute("type")?(this.authenticated=!0,this._changeConnectStatus(I.Status.CONNECTED,null)):"error"===e.getAttribute("type")&&(this._changeConnectStatus(I.Status.AUTHFAIL,null,e),this.disconnect("authentication failed")),!1},_addSysTimedHandler:function(e,t){var n=new I.TimedHandler(e,t);return n.user=!1,this.addTimeds.push(n),n},_addSysHandler:function(e,t,n,r,i){var o=new I.Handler(e,t,n,r,i);return o.user=!1,this.addHandlers.push(o),o},_onDisconnectTimeout:function(){return I.debug("_onDisconnectTimeout was called"),this._changeConnectStatus(I.Status.CONNTIMEOUT,null),this._proto._onDisconnectTimeout(),this._doDisconnect(),!1},_onIdle:function(){for(var e=this;this.addTimeds.length>0;)this.timedHandlers.push(this.addTimeds.pop());for(;this.removeTimeds.length>0;){var t=this.removeTimeds.pop(),n=this.timedHandlers.indexOf(t);n>=0&&this.timedHandlers.splice(n,1)}for(var r=(new Date).getTime(),i=[],o=0;o<this.timedHandlers.length;o++){var a=this.timedHandlers[o];!this.authenticated&&a.user||(a.lastCalled+a.period-r<=0?a.run()&&i.push(a):i.push(a))}this.timedHandlers=i,clearTimeout(this._idleTimeout),this._proto._onIdle(),this.connected&&(this._idleTimeout=setTimeout(function(){return e._onIdle()},100))}},I.SASLMechanism=function(e,t,n){this.name=e,this.isClientFirst=t,this.priority=n},I.SASLMechanism.prototype={test:function(e){return!0},onStart:function(e){this._connection=e},onChallenge:function(e,t){throw new Error("You should implement challenge handling!")},onFailure:function(){this._connection=null},onSuccess:function(){this._connection=null}},I.SASLAnonymous=function(){},I.SASLAnonymous.prototype=new I.SASLMechanism("ANONYMOUS",!1,20),I.SASLAnonymous.prototype.test=function(e){return null===e.authcid},I.SASLPlain=function(){},I.SASLPlain.prototype=new I.SASLMechanism("PLAIN",!0,50),I.SASLPlain.prototype.test=function(e){return null!==e.authcid},I.SASLPlain.prototype.onChallenge=function(e){var t=e.authzid;return t+="\0",t+=e.authcid,t+="\0",t+=e.pass,C(t)},I.SASLSHA1=function(){},I.SASLSHA1.prototype=new I.SASLMechanism("SCRAM-SHA-1",!0,70),I.SASLSHA1.prototype.test=function(e){return null!==e.authcid},I.SASLSHA1.prototype.onChallenge=function(e,t,n){var r=n||h.hexdigest(""+1234567890*Math.random()),i="n="+C(e.authcid);return i+=",r=",i+=r,e._sasl_data.cnonce=r,e._sasl_data["client-first-message-bare"]=i,i="n,,"+i,this.onChallenge=function(e,t){for(var n,r,i,o,a,s,c,u,d="c=biws,",l="".concat(e._sasl_data["client-first-message-bare"],",").concat(t,","),h=e._sasl_data.cnonce,p=/([a-z]+)=([^,]+)(,|$)/;t.match(p);){var f=t.match(p);switch(t=t.replace(f[0],""),f[1]){case"r":n=f[2];break;case"s":r=f[2];break;case"i":i=f[2]}}if(n.substr(0,h.length)!==h)return e._sasl_data={},e._sasl_failure_cb();l+=d+="r="+n,r=atob(r),r+="\0\0\0\x01";var m=C(e.pass);for(o=s=b.core_hmac_sha1(m,r),c=1;c<i;c++){for(a=b.core_hmac_sha1(m,b.binb2str(s)),u=0;u<5;u++)o[u]^=a[u];s=a}o=b.binb2str(o);var v=b.core_hmac_sha1(o,"Client Key"),g=b.str_hmac_sha1(o,"Server Key"),_=b.core_hmac_sha1(b.str_sha1(b.binb2str(v)),l);for(e._sasl_data["server-signature"]=b.b64_hmac_sha1(g,l),u=0;u<5;u++)v[u]^=_[u];return d+",p="+btoa(b.binb2str(v))},i},I.SASLMD5=function(){},I.SASLMD5.prototype=new I.SASLMechanism("DIGEST-MD5",!1,60),I.SASLMD5.prototype.test=function(e){return null!==e.authcid},I.SASLMD5.prototype._quote=function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},I.SASLMD5.prototype.onChallenge=function(e,t,n){for(var r=/([a-z]+)=("[^"]+"|[^,"]+)(?:,|$)/,i=n||h.hexdigest(""+1234567890*Math.random()),o="",a=null,s="";t.match(r);){var c=t.match(r);switch(t=t.replace(c[0],""),c[2]=c[2].replace(/^"(.+)"$/,"$1"),c[1]){case"realm":o=c[2];break;case"nonce":s=c[2];break;case"qop":c[2];break;case"host":a=c[2]}}var u=e.servtype+"/"+e.domain;null!==a&&(u=u+"/"+a);var d=C(e.authcid+":"+o+":"+this._connection.pass),l=h.hash(d)+":"+s+":"+i,p="AUTHENTICATE:"+u,f="";return f+="charset=utf-8,",f+="username="+this._quote(C(e.authcid))+",",f+="realm="+this._quote(o)+",",f+="nonce="+this._quote(s)+",",f+="nc=00000001,",f+="cnonce="+this._quote(i)+",",f+="digest-uri="+this._quote(u)+",",f+="response="+h.hexdigest(h.hexdigest(l)+":"+s+":00000001:"+i+":auth:"+h.hexdigest(p))+",",f+="qop=auth",this.onChallenge=function(){return""},f},I.SASLOAuthBearer=function(){},I.SASLOAuthBearer.prototype=new I.SASLMechanism("OAUTHBEARER",!0,40),I.SASLOAuthBearer.prototype.test=function(e){return null!==e.pass},I.SASLOAuthBearer.prototype.onChallenge=function(e){var t="n,";return null!==e.authcid&&(t=t+"a="+e.authzid),t+=",",t+="\x01",t+="auth=Bearer ",t+=e.pass,t+="\x01",C(t+="\x01")},I.SASLExternal=function(){},I.SASLExternal.prototype=new I.SASLMechanism("EXTERNAL",!0,10),I.SASLExternal.prototype.onChallenge=function(e){return e.authcid===e.authzid?"":e.authzid},I.SASLXOAuth2=function(){},I.SASLXOAuth2.prototype=new I.SASLMechanism("X-OAUTH2",!0,30),I.SASLXOAuth2.prototype.test=function(e){return null!==e.pass},I.SASLXOAuth2.prototype.onChallenge=function(e){var t="\0";return null!==e.authcid&&(t+=e.authzid),t+="\0",t+=e.pass,C(t)};var w={Strophe:I,$build:R,$iq:A,$msg:function(e){return new I.Builder("message",e)},$pres:k,SHA1:b,MD5:h,b64_hmac_sha1:b.b64_hmac_sha1,b64_sha1:b.b64_sha1,str_hmac_sha1:b.str_hmac_sha1,str_sha1:b.str_sha1},P=w.Strophe,O=w.$build;P.Request=function(e,t,n,r){this.id=++P._requestId,this.xmlData=e,this.data=P.serialize(e),this.origFunc=t,this.func=t,this.rid=n,this.date=NaN,this.sends=r||0,this.abort=!1,this.dead=null,this.age=function(){return this.date?(new Date-this.date)/1e3:0},this.timeDead=function(){return this.dead?(new Date-this.dead)/1e3:0},this.xhr=this._newXHR()},P.Request.prototype={getResponse:function(){var e=null;if(this.xhr.responseXML&&this.xhr.responseXML.documentElement){if("parsererror"===(e=this.xhr.responseXML.documentElement).tagName)throw P.error("invalid response received"),P.error("responseText: "+this.xhr.responseText),P.error("responseXML: "+P.serialize(this.xhr.responseXML)),new Error("parsererror")}else if(this.xhr.responseText){if(P.debug("Got responseText but no responseXML; attempting to parse it with DOMParser..."),!(e=(new DOMParser).parseFromString(this.xhr.responseText,"application/xml").documentElement))throw new Error("Parsing produced null node");if(e.querySelector("parsererror")){P.error("invalid response received: "+e.querySelector("parsererror").textContent),P.error("responseText: "+this.xhr.responseText);var t=new Error;throw t.name=P.ErrorCondition.BAD_FORMAT,t}}return e},_newXHR:function(){var e=null;return window.XMLHttpRequest?(e=new XMLHttpRequest).overrideMimeType&&e.overrideMimeType("text/xml; charset=utf-8"):window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e.onreadystatechange=this.func.bind(null,this),e}},P.Bosh=function(e){this._conn=e,this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.hold=1,this.wait=60,this.window=5,this.errors=0,this.inactivity=null,this.lastResponseHeaders=null,this._requests=[]},P.Bosh.prototype={strip:null,_buildBody:function(){var e=O("body",{rid:this.rid++,xmlns:P.NS.HTTPBIND});return null!==this.sid&&e.attrs({sid:this.sid}),this._conn.options.keepalive&&this._conn._sessionCachingSupported()&&this._cacheSession(),e},_reset:function(){this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.errors=0,this._conn._sessionCachingSupported()&&window.sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)},_connect:function(e,t,n){this.wait=e||this.wait,this.hold=t||this.hold,this.errors=0;var r=this._buildBody().attrs({to:this._conn.domain,"xml:lang":"en",wait:this.wait,hold:this.hold,content:"text/xml; charset=utf-8",ver:"1.6","xmpp:version":"1.0","xmlns:xmpp":P.NS.BOSH});n&&r.attrs({route:n});var i=this._conn._connect_cb;this._requests.push(new P.Request(r.tree(),this._onRequestStateChange.bind(this,i.bind(this._conn)),r.tree().getAttribute("rid"))),this._throttledRequestHandler()},_attach:function(e,t,n,r,i,o,a){this._conn.jid=e,this.sid=t,this.rid=n,this._conn.connect_callback=r,this._conn.domain=P.getDomainFromJid(this._conn.jid),this._conn.authenticated=!0,this._conn.connected=!0,this.wait=i||this.wait,this.hold=o||this.hold,this.window=a||this.window,this._conn._changeConnectStatus(P.Status.ATTACHED,null)},_restore:function(e,t,n,r,i){var o=JSON.parse(window.sessionStorage.getItem("strophe-bosh-session"));if(!(null!=o&&o.rid&&o.sid&&o.jid&&(null==e||P.getBareJidFromJid(o.jid)===P.getBareJidFromJid(e)||null===P.getNodeFromJid(e)&&P.getDomainFromJid(o.jid)===e))){var a=new Error("_restore: no restoreable session.");throw a.name="StropheSessionError",a}this._conn.restored=!0,this._attach(o.jid,o.sid,o.rid,t,n,r,i)},_cacheSession:function(){this._conn.authenticated?this._conn.jid&&this.rid&&this.sid&&window.sessionStorage.setItem("strophe-bosh-session",JSON.stringify({jid:this._conn.jid,rid:this.rid,sid:this.sid})):window.sessionStorage.removeItem("strophe-bosh-session")},_connect_cb:function(e){var t=e.getAttribute("type");if(null!==t&&"terminate"===t){var n=e.getAttribute("condition");P.error("BOSH-Connection failed: "+n);var r=e.getElementsByTagName("conflict");return null!==n?("remote-stream-error"===n&&r.length>0&&(n="conflict"),this._conn._changeConnectStatus(P.Status.CONNFAIL,n)):this._conn._changeConnectStatus(P.Status.CONNFAIL,"unknown"),this._conn._doDisconnect(n),P.Status.CONNFAIL}this.sid||(this.sid=e.getAttribute("sid"));var i=e.getAttribute("requests");i&&(this.window=parseInt(i,10));var o=e.getAttribute("hold");o&&(this.hold=parseInt(o,10));var a=e.getAttribute("wait");a&&(this.wait=parseInt(a,10));var s=e.getAttribute("inactivity");s&&(this.inactivity=parseInt(s,10))},_disconnect:function(e){this._sendTerminate(e)},_doDisconnect:function(){this.sid=null,this.rid=Math.floor(4294967295*Math.random()),this._conn._sessionCachingSupported()&&window.sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)},_emptyQueue:function(){return 0===this._requests.length},_callProtocolErrorHandlers:function(e){var t=this._getRequestStatus(e),n=this._conn.protocolErrorHandlers.HTTP[t];n&&n.call(this,t)},_hitError:function(e){this.errors++,P.warn("request errored, status: "+e+", number of errors: "+this.errors),this.errors>4&&this._conn._onDisconnectTimeout()},_no_auth_received:function(e){P.warn("Server did not yet offer a supported authentication mechanism. Sending a blank poll request."),e=e?e.bind(this._conn):this._conn._connect_cb.bind(this._conn);var t=this._buildBody();this._requests.push(new P.Request(t.tree(),this._onRequestStateChange.bind(this,e),t.tree().getAttribute("rid"))),this._throttledRequestHandler()},_onDisconnectTimeout:function(){this._abortAllRequests()},_abortAllRequests:function(){for(;this._requests.length>0;){var e=this._requests.pop();e.abort=!0,e.xhr.abort(),e.xhr.onreadystatechange=function(){}}},_onIdle:function(){var e=this._conn._data;if(this._conn.authenticated&&0===this._requests.length&&0===e.length&&!this._conn.disconnecting&&(P.debug("no requests during idle cycle, sending blank request"),e.push(null)),!this._conn.paused){if(this._requests.length<2&&e.length>0){for(var t=this._buildBody(),n=0;n<e.length;n++)null!==e[n]&&("restart"===e[n]?t.attrs({to:this._conn.domain,"xml:lang":"en","xmpp:restart":"true","xmlns:xmpp":P.NS.BOSH}):t.cnode(e[n]).up());delete this._conn._data,this._conn._data=[],this._requests.push(new P.Request(t.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),t.tree().getAttribute("rid"))),this._throttledRequestHandler()}if(this._requests.length>0){var r=this._requests[0].age();null!==this._requests[0].dead&&this._requests[0].timeDead()>Math.floor(P.SECONDARY_TIMEOUT*this.wait)&&this._throttledRequestHandler(),r>Math.floor(P.TIMEOUT*this.wait)&&(P.warn("Request "+this._requests[0].id+" timed out, over "+Math.floor(P.TIMEOUT*this.wait)+" seconds since last activity"),this._throttledRequestHandler())}}},_getRequestStatus:function(e,t){var n;if(4===e.xhr.readyState)try{n=e.xhr.status}catch(e){P.error("Caught an error while retrieving a request's status, reqStatus: "+n)}return void 0===n&&(n="number"==typeof t?t:0),n},_onRequestStateChange:function(e,t){if(P.debug("request id "+t.id+"."+t.sends+" state changed to "+t.xhr.readyState),t.abort)t.abort=!1;else if(4===t.xhr.readyState){var n=this._getRequestStatus(t);if(this.lastResponseHeaders=t.xhr.getAllResponseHeaders(),this.disconnecting&&n>=400)return this._hitError(n),void this._callProtocolErrorHandlers(t);var r=n>0&&n<500,i=t.sends>this._conn.maxRetries;if((r||i)&&(this._removeRequest(t),P.debug("request id "+t.id+" should now be removed")),200===n){var o=this._requests[0]===t;(this._requests[1]===t||o&&this._requests.length>0&&this._requests[0].age()>Math.floor(P.SECONDARY_TIMEOUT*this.wait))&&this._restartRequest(0),this._conn.nextValidRid(Number(t.rid)+1),P.debug("request id "+t.id+"."+t.sends+" got 200"),e(t),this.errors=0}else 0===n||n>=400&&n<600||n>=12e3?(P.error("request id "+t.id+"."+t.sends+" error "+n+" happened"),this._hitError(n),this._callProtocolErrorHandlers(t),n>=400&&n<500&&(this._conn._changeConnectStatus(P.Status.DISCONNECTING,null),this._conn._doDisconnect())):P.error("request id "+t.id+"."+t.sends+" error "+n+" happened");r||i?i&&!this._conn.connected&&this._conn._changeConnectStatus(P.Status.CONNFAIL,"giving-up"):this._throttledRequestHandler()}},_processRequest:function(e){var t=this,n=this._requests[e],r=this._getRequestStatus(n,-1);if(n.sends>this._conn.maxRetries)this._conn._onDisconnectTimeout();else{var i=n.age(),o=!isNaN(i)&&i>Math.floor(P.TIMEOUT*this.wait),a=null!==n.dead&&n.timeDead()>Math.floor(P.SECONDARY_TIMEOUT*this.wait),s=4===n.xhr.readyState&&(r<1||r>=500);if((o||a||s)&&(a&&P.error("Request ".concat(this._requests[e].id," timed out (secondary), restarting")),n.abort=!0,n.xhr.abort(),n.xhr.onreadystatechange=function(){},this._requests[e]=new P.Request(n.xmlData,n.origFunc,n.rid,n.sends),n=this._requests[e]),0===n.xhr.readyState){P.debug("request id "+n.id+"."+n.sends+" posting");try{var c=this._conn.options.contentType||"text/xml; charset=utf-8";n.xhr.open("POST",this._conn.service,!this._conn.options.sync),void 0!==n.xhr.setRequestHeader&&n.xhr.setRequestHeader("Content-Type",c),this._conn.options.withCredentials&&(n.xhr.withCredentials=!0)}catch(e){return P.error("XHR open failed: "+e.toString()),this._conn.connected||this._conn._changeConnectStatus(P.Status.CONNFAIL,"bad-service"),void this._conn.disconnect()}var u=function(){if(n.date=new Date,t._conn.options.customHeaders){var e=t._conn.options.customHeaders;for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.xhr.setRequestHeader(r,e[r])}n.xhr.send(n.data)};if(n.sends>1){var d=1e3*Math.min(Math.floor(P.TIMEOUT*this.wait),Math.pow(n.sends,3));setTimeout(function(){u()},d)}else u();n.sends++,this._conn.xmlOutput!==P.Connection.prototype.xmlOutput&&(n.xmlData.nodeName===this.strip&&n.xmlData.childNodes.length?this._conn.xmlOutput(n.xmlData.childNodes[0]):this._conn.xmlOutput(n.xmlData)),this._conn.rawOutput!==P.Connection.prototype.rawOutput&&this._conn.rawOutput(n.data)}else P.debug("_processRequest: "+(0===e?"first":"second")+" request has readyState of "+n.xhr.readyState)}},_removeRequest:function(e){P.debug("removing request");for(var t=this._requests.length-1;t>=0;t--)e===this._requests[t]&&this._requests.splice(t,1);e.xhr.onreadystatechange=function(){},this._throttledRequestHandler()},_restartRequest:function(e){var t=this._requests[e];null===t.dead&&(t.dead=new Date),this._processRequest(e)},_reqToData:function(e){try{return e.getResponse()}catch(e){if("parsererror"!==e.message)throw e;this._conn.disconnect("strophe-parsererror")}},_sendTerminate:function(e){P.debug("_sendTerminate was called");var t=this._buildBody().attrs({type:"terminate"});e&&t.cnode(e.tree());var n=new P.Request(t.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),t.tree().getAttribute("rid"));this._requests.push(n),this._throttledRequestHandler()},_send:function(){var e=this;clearTimeout(this._conn._idleTimeout),this._throttledRequestHandler(),this._conn._idleTimeout=setTimeout(function(){return e._conn._onIdle()},100)},_sendRestart:function(){this._throttledRequestHandler(),clearTimeout(this._conn._idleTimeout)},_throttledRequestHandler:function(){this._requests?P.debug("_throttledRequestHandler called with "+this._requests.length+" requests"):P.debug("_throttledRequestHandler called with undefined requests"),this._requests&&0!==this._requests.length&&(this._requests.length>0&&this._processRequest(0),this._requests.length>1&&Math.abs(this._requests[0].rid-this._requests[1].rid)<this.window&&this._processRequest(1))}};var D=w.Strophe,N=w.$build;return D.Websocket=function(e){this._conn=e,this.strip="wrapper";var t=e.service;if(0!==t.indexOf("ws:")&&0!==t.indexOf("wss:")){var n="";"ws"===e.options.protocol&&"https:"!==window.location.protocol?n+="ws":n+="wss",n+="://"+window.location.host,0!==t.indexOf("/")?n+=window.location.pathname+t:n+=t,e.service=n}},D.Websocket.prototype={_buildStream:function(){return N("open",{xmlns:D.NS.FRAMING,to:this._conn.domain,version:"1.0"})},_check_streamerror:function(e,t){var n;if(0===(n=e.getElementsByTagNameNS?e.getElementsByTagNameNS(D.NS.STREAM,"error"):e.getElementsByTagName("stream:error")).length)return!1;for(var r=n[0],i="",o="",a=0;a<r.childNodes.length;a++){var s=r.childNodes[a];if("urn:ietf:params:xml:ns:xmpp-streams"!==s.getAttribute("xmlns"))break;"text"===s.nodeName?o=s.textContent:i=s.nodeName}var c="WebSocket stream error: ";return c+=i||"unknown",o&&(c+=" - "+o),D.error(c),this._conn._changeConnectStatus(t,i),this._conn._doDisconnect(),!0},_reset:function(){},_connect:function(){this._closeSocket(),this.socket=new WebSocket(this._conn.service,"xmpp"),this.socket.onopen=this._onOpen.bind(this),this.socket.onerror=this._onError.bind(this),this.socket.onclose=this._onClose.bind(this),this.socket.onmessage=this._connect_cb_wrapper.bind(this)},_connect_cb:function(e){if(this._check_streamerror(e,D.Status.CONNFAIL))return D.Status.CONNFAIL},_handleStreamStart:function(e){var t=!1,n=e.getAttribute("xmlns");"string"!=typeof n?t="Missing xmlns in <open />":n!==D.NS.FRAMING&&(t="Wrong xmlns in <open />: "+n);var r=e.getAttribute("version");return"string"!=typeof r?t="Missing version in <open />":"1.0"!==r&&(t="Wrong version in <open />: "+r),!t||(this._conn._changeConnectStatus(D.Status.CONNFAIL,t),this._conn._doDisconnect(),!1)},_connect_cb_wrapper:function(e){if(0===e.data.indexOf("<open ")||0===e.data.indexOf("<?xml")){var t=e.data.replace(/^(<\?.*?\?>\s*)*/,"");if(""===t)return;var n=(new DOMParser).parseFromString(t,"text/xml").documentElement;this._conn.xmlInput(n),this._conn.rawInput(e.data),this._handleStreamStart(n)&&this._connect_cb(n)}else if(0===e.data.indexOf("<close ")){var r=(new DOMParser).parseFromString(e.data,"text/xml").documentElement;this._conn.xmlInput(r),this._conn.rawInput(e.data);var i=r.getAttribute("see-other-uri");if(i){var o=this._conn.service;(o.indexOf("wss:")>=0&&i.indexOf("wss:")>=0||o.indexOf("ws:")>=0)&&(this._conn._changeConnectStatus(D.Status.REDIRECT,"Received see-other-uri, resetting connection"),this._conn.reset(),this._conn.service=i,this._connect())}else this._conn._changeConnectStatus(D.Status.CONNFAIL,"Received closing stream"),this._conn._doDisconnect()}else{var a=this._streamWrap(e.data),s=(new DOMParser).parseFromString(a,"text/xml").documentElement;this.socket.onmessage=this._onMessage.bind(this),this._conn._connect_cb(s,null,e.data)}},_disconnect:function(e){if(this.socket&&this.socket.readyState!==WebSocket.CLOSED){e&&this._conn.send(e);var t=N("close",{xmlns:D.NS.FRAMING});this._conn.xmlOutput(t.tree());var n=D.serialize(t);this._conn.rawOutput(n);try{this.socket.send(n)}catch(e){D.warn("Couldn't send <close /> tag.")}}this._conn._doDisconnect()},_doDisconnect:function(){D.debug("WebSockets _doDisconnect was called"),this._closeSocket()},_streamWrap:function(e){return"<wrapper>"+e+"</wrapper>"},_closeSocket:function(){if(this.socket)try{this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null,this.socket.close()}catch(e){D.debug(e.message)}this.socket=null},_emptyQueue:function(){return!0},_onClose:function(e){this._conn.connected&&!this._conn.disconnecting?(D.error("Websocket closed unexpectedly"),this._conn._doDisconnect()):e&&1006===e.code&&!this._conn.connected&&this.socket?(D.error("Websocket closed unexcectedly"),this._conn._changeConnectStatus(D.Status.CONNFAIL,"The WebSocket connection could not be established or was disconnected."),this._conn._doDisconnect()):D.debug("Websocket closed")},_no_auth_received:function(e){D.error("Server did not offer a supported authentication mechanism"),this._conn._changeConnectStatus(D.Status.CONNFAIL,D.ErrorCondition.NO_AUTH_MECH),e&&e.call(this._conn),this._conn._doDisconnect()},_onDisconnectTimeout:function(){},_abortAllRequests:function(){},_onError:function(e){D.error("Websocket error "+e),this._conn._changeConnectStatus(D.Status.CONNFAIL,"The WebSocket connection could not be established or was disconnected."),this._disconnect()},_onIdle:function(){var e=this._conn._data;if(e.length>0&&!this._conn.paused){for(var t=0;t<e.length;t++)if(null!==e[t]){var n;n="restart"===e[t]?this._buildStream().tree():e[t];var r=D.serialize(n);this._conn.xmlOutput(n),this._conn.rawOutput(r),this.socket.send(r)}this._conn._data=[]}},_onMessage:function(e){var t,n='<close xmlns="urn:ietf:params:xml:ns:xmpp-framing" />';if(e.data===n)return this._conn.rawInput(n),this._conn.xmlInput(e),void(this._conn.disconnecting||this._conn._doDisconnect());if(0===e.data.search("<open ")){if(t=(new DOMParser).parseFromString(e.data,"text/xml").documentElement,!this._handleStreamStart(t))return}else{var r=this._streamWrap(e.data);t=(new DOMParser).parseFromString(r,"text/xml").documentElement}return this._check_streamerror(t,D.Status.ERROR)?void 0:this._conn.disconnecting&&"presence"===t.firstChild.nodeName&&"unavailable"===t.firstChild.getAttribute("type")?(this._conn.xmlInput(t),void this._conn.rawInput(D.serialize(t))):void this._conn._dataRecv(t,e.data)},_onOpen:function(){D.debug("Websocket open");var e=this._buildStream();this._conn.xmlOutput(e.tree());var t=D.serialize(e);this._conn.rawOutput(t),this.socket.send(t)},_reqToData:function(e){return e},_send:function(){this._conn.flush()},_sendRestart:function(){clearTimeout(this._conn._idleTimeout),this._conn._onIdle.bind(this._conn)()}},e.Strophe=w.Strophe,e.$build=w.$build,e.$iq=w.$iq,e.$msg=w.$msg,e.$pres=w.$pres,w},e.exports=n()}).call(this,n(44))},function(e,t,n){"use strict";var r=n(85);t.a=new r.a},function(e,t,n){var r=n(78),i=n(148),o={},a=[],s=r.levels.TRACE;e.exports={addGlobalTransport:function(e){r.addGlobalTransport(e)},removeGlobalTransport:function(e){r.removeGlobalTransport(e)},setGlobalOptions:function(e){r.setGlobalOptions(e)},getLogger:function(e,t,n){var i=new r(s,e,t,n);return e?(o[e]=o[e]||[],o[e].push(i)):a.push(i),i},setLogLevelById:function(e,t){for(var n=t?o[t]||[]:a,r=0;r<n.length;r++)n[r].setLevel(e)},setLogLevel:function(e){s=e;for(var t=0;t<a.length;t++)a[t].setLevel(e);for(var n in o){var r=o[n]||[];for(t=0;t<r.length;t++)r[t].setLevel(e)}},levels:r.levels,LogCollector:i}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return b});var r,i=n(19),o=n.n(i),a=n(1),s=n(18),c=n(7),u=n(23),d=n(3),l=n(47),h=n.n(l),p=n(87),f=n(35),m=n(60),v=n(88),g=n(89),_=n(61),y=n(4).getLogger(e),S=!1;function E(e){f.a.isBackendInitialized()||f.a.initBackend({callStatsID:e.callStatsID,callStatsSecret:e.callStatsSecret,userName:e.userName,aliasName:e.aliasName,applicationName:e.applicationName,getWiFiStatsMethod:e.getWiFiStatsMethod,confID:e.confID,siteID:e.siteID})||y.error("CallStats Backend initialization failed bad")}function b(e,t){this.rtpStatsMap=new Map,this.eventEmitter=new o.a,this.xmpp=e,this.options=t||{},this.callStatsIntegrationEnabled=this.options.callStatsID&&this.options.callStatsSecret&&this.options.enableCallStats&&!0!==b.disableThirdPartyRequests,this.callStatsIntegrationEnabled&&(this.callStatsApplicationLogsDisabled=this.options.callStatsApplicationLogsDisabled,d.a.isReactNative()?E(this.options):(function(e){S||(h.a.loadScript(e.customScriptUrl||_.a,!0,!0,void 0,function(){return E(e)}),S=!0)})(this.options),this.options.confID||y.warn('"confID" is not defined')),this.callsStatsInstances=new Map,b.instances.add(this)}b.init=function(e){b.audioLevelsEnabled=!e.disableAudioLevels,"number"==typeof e.pcStatsInterval&&(b.pcStatsInterval=e.pcStatsInterval),"number"==typeof e.audioLevelsInterval&&(b.audioLevelsInterval=e.audioLevelsInterval),"number"==typeof e.longTasksStatsInterval&&(b.longTasksStatsInterval=e.longTasksStatsInterval),b.disableThirdPartyRequests=e.disableThirdPartyRequests},b.audioLevelsEnabled=!1,b.audioLevelsInterval=200,b.pcStatsInterval=1e4,b.disableThirdPartyRequests=!1,b.analytics=p.a,Object.defineProperty(b,"instances",{get:function(){return r||(r=new Set),r}}),b.prototype.startRemoteStats=function(e){this.stopRemoteStats(e);try{var t=new g.a(e,b.audioLevelsInterval,b.pcStatsInterval,this.eventEmitter);t.start(b.audioLevelsEnabled),this.rtpStatsMap.set(e.id,t)}catch(e){y.error("Failed to start collecting remote statistics: "+e)}},b.localStats=[],b.startLocalStats=function(e,t){if(b.audioLevelsEnabled){var n=new m.a(e,b.audioLevelsInterval,t);this.localStats.push(n),n.start()}},b.prototype.addAudioLevelListener=function(e){b.audioLevelsEnabled&&this.eventEmitter.on(u.a,e)},b.prototype.removeAudioLevelListener=function(e){b.audioLevelsEnabled&&this.eventEmitter.removeListener(u.a,e)},b.prototype.addBeforeDisposedListener=function(e){this.eventEmitter.on(u.b,e)},b.prototype.removeBeforeDisposedListener=function(e){this.eventEmitter.removeListener(u.b,e)},b.prototype.addConnectionStatsListener=function(e){this.eventEmitter.on(u.d,e)},b.prototype.removeConnectionStatsListener=function(e){this.eventEmitter.removeListener(u.d,e)},b.prototype.addByteSentStatsListener=function(e){this.eventEmitter.on(u.c,e)},b.prototype.removeByteSentStatsListener=function(e){this.eventEmitter.removeListener(u.c,e)},b.prototype.addLongTasksStatsListener=function(e){this.eventEmitter.on(u.e,e)},b.prototype.attachLongTasksStats=function(e){var t=this;d.a.supportsPerformanceObserver()?(this.performanceObserverStats=new v.a(this.eventEmitter,b.longTasksStatsInterval),e.on(a.CONFERENCE_JOINED,function(){return t.performanceObserverStats.startObserver()}),e.on(a.CONFERENCE_LEFT,function(){return t.performanceObserverStats.stopObserver()})):y.warn("Performance observer for long tasks not supported by browser!")},b.prototype.getLongTasksStats=function(){return this.performanceObserverStats?this.performanceObserverStats.getLongTasksStats():null},b.prototype.removeLongTasksStatsListener=function(e){this.eventEmitter.removeListener(u.e,e)},b.prototype.dispose=function(){try{this.callsStatsInstances.size||this.eventEmitter.emit(u.b);for(var e,t=_createForOfIteratorHelperLoose(this.callsStatsInstances.values());!(e=t()).done;){var n=e.value;this.stopCallStats(n.tpc)}for(var r,i=_createForOfIteratorHelperLoose(this.rtpStatsMap.keys());!(r=i()).done;){var o=r.value;this._stopRemoteStats(o)}this.eventEmitter&&this.eventEmitter.removeAllListeners()}finally{b.instances.delete(this)}},b.stopLocalStats=function(e){if(b.audioLevelsEnabled)for(var t=0;t<b.localStats.length;t++)if(b.localStats[t].stream===e){b.localStats.splice(t,1)[0].stop();break}},b.prototype._stopRemoteStats=function(e){var t=this.rtpStatsMap.get(e);t&&(t.stop(),this.rtpStatsMap.delete(e))},b.prototype.stopRemoteStats=function(e){this._stopRemoteStats(e.id)},b.prototype.startCallStats=function(e,t){if(this.callStatsIntegrationEnabled)if(this.callsStatsInstances.has(e.id))y.error("CallStats instance for ${tpc} exists already");else{y.info("Starting CallStats for "+e+"...");var n=new f.a(e,{confID:this.options.confID,remoteUserID:t});this.callsStatsInstances.set(e.id,n)}},b._getAllCallStatsInstances=function(){for(var e,t=new Set,n=_createForOfIteratorHelperLoose(b.instances);!(e=n()).done;)for(var r,i=_createForOfIteratorHelperLoose(e.value.callsStatsInstances.values());!(r=i()).done;){var o=r.value;t.add(o)}return t},b.prototype.stopCallStats=function(e){var t=this.callsStatsInstances.get(e.id);t&&(1===this.callsStatsInstances.size&&this.eventEmitter.emit(u.b),this.callsStatsInstances.delete(e.id),t.sendTerminateEvent())},b.prototype.isCallstatsEnabled=function(){return this.callStatsIntegrationEnabled},b.prototype.sendConnectionResumeOrHoldEvent=function(e,t){var n=this.callsStatsInstances.get(e.id);n&&n.sendResumeOrHoldEvent(t)},b.prototype.sendIceConnectionFailedEvent=function(e){var t=this.callsStatsInstances.get(e.id);t&&t.sendIceConnectionFailedEvent()},b.prototype.sendMuteEvent=function(e,t,n){var r=e&&this.callsStatsInstances.get(e.id);f.a.sendMuteEvent(t,n,r)},b.prototype.sendScreenSharingEvent=function(e,t){for(var n,r=_createForOfIteratorHelperLoose(this.callsStatsInstances.values());!(n=r()).done;){n.value.sendScreenSharingEvent(e,t)}},b.prototype.sendDominantSpeakerEvent=function(e){for(var t,n=_createForOfIteratorHelperLoose(this.callsStatsInstances.values());!(t=n()).done;){t.value.sendDominantSpeakerEvent()}this.xmpp.sendDominantSpeakerEvent(e)},b.sendActiveDeviceListEvent=function(e){var t=b._getAllCallStatsInstances();if(t.size)for(var n,r=_createForOfIteratorHelperLoose(t);!(n=r()).done;){var i=n.value;f.a.sendActiveDeviceListEvent(e,i)}else f.a.sendActiveDeviceListEvent(e,null)},b.prototype.associateStreamWithVideoTag=function(e,t,n,r,i,o){var a=this.callsStatsInstances.get(e.id);a&&a.associateStreamWithVideoTag(t,n,r,i,o)},b.sendGetUserMediaFailed=function(e){var t=e instanceof s.a?(function(e){var t=new Error;return t.stack=e.stack,t.name=(e.name||"Unknown error")+(e.gum&&e.gum.error&&e.gum.error.name?" - "+e.gum.error.name:""),t.constraintName=e.gum&&e.gum.constraints?JSON.stringify(e.gum.constraints):"",t.message=e.message,t})(e):e,n=b._getAllCallStatsInstances();if(n.size)for(var r,i=_createForOfIteratorHelperLoose(n);!(r=i()).done;){var o=r.value;f.a.sendGetUserMediaFailed(t,o)}else f.a.sendGetUserMediaFailed(t,null)},b.prototype.sendCreateOfferFailed=function(e,t){var n=this.callsStatsInstances.get(t.id);n&&n.sendCreateOfferFailed(e)},b.prototype.sendCreateAnswerFailed=function(e,t){var n=this.callsStatsInstances.get(t.id);n&&n.sendCreateAnswerFailed(e)},b.prototype.sendSetLocalDescFailed=function(e,t){var n=this.callsStatsInstances.get(t.id);n&&n.sendSetLocalDescFailed(e)},b.prototype.sendSetRemoteDescFailed=function(e,t){var n=this.callsStatsInstances.get(t.id);n&&n.sendSetRemoteDescFailed(e)},b.prototype.sendAddIceCandidateFailed=function(e,t){var n=this.callsStatsInstances.get(t.id);n&&n.sendAddIceCandidateFailed(e)},b.sendLog=function(e){for(var t,n=new Set,r=_createForOfIteratorHelperLoose(b.instances);!(t=r()).done;){var i=t.value;if(i.callStatsApplicationLogsDisabled)return;i.callsStatsInstances.size&&n.add(i.callsStatsInstances.values().next().value)}if(n.size)for(var o,a=_createForOfIteratorHelperLoose(n);!(o=a()).done;){var s=o.value;f.a.sendApplicationLog(e,s)}else f.a.sendApplicationLog(e,null)},b.prototype.sendFeedback=function(e,t){return b.analytics.sendEvent(c.n,{rating:e,comment:t}),f.a.sendFeedback(this.options.confID,e,t)},b.LOCAL_JID=n(151).LOCAL_JID,b.reportGlobalError=function(e){e instanceof s.a&&e.gum?b.sendGetUserMediaFailed(e):b.sendLog(e)},b.sendAnalyticsAndLog=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e?(t="object"==typeof e?e:{name:e,properties:n},y.log(JSON.stringify(t)),this.analytics.sendEvent(e,n)):y.warn("No event or event name given.")},b.sendAnalytics=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.analytics.sendEvent(e,t)}}).call(this,"modules/statistics/statistics.js")},function(e,t){e.exports={CREATE_ANSWER_FAILED:"rtc.create_answer_failed",CREATE_OFFER_FAILED:"rtc.create_offer_failed",DATA_CHANNEL_OPEN:"rtc.data_channel_open",ENDPOINT_CONN_STATUS_CHANGED:"rtc.endpoint_conn_status_changed",DOMINANT_SPEAKER_CHANGED:"rtc.dominant_speaker_changed",LASTN_ENDPOINT_CHANGED:"rtc.lastn_endpoint_changed",GRANTED_PERMISSIONS:"rtc.granted_permissions",SENDER_VIDEO_CONSTRAINTS_CHANGED:"rtc.sender_video_constraints_changed",LASTN_VALUE_CHANGED:"rtc.lastn_value_changed",LOCAL_TRACK_SSRC_UPDATED:"rtc.local_track_ssrc_updated",LOCAL_TRACK_MAX_ENABLED_RESOLUTION_CHANGED:"rtc.local_track_max_enabled_resolution_changed",TRACK_ATTACHED:"rtc.track_attached",REMOTE_TRACK_ADDED:"rtc.remote_track_added",REMOTE_TRACK_MUTE:"rtc.remote_track_mute",REMOTE_TRACK_REMOVED:"rtc.remote_track_removed",REMOTE_TRACK_UNMUTE:"rtc.remote_track_unmute",SET_LOCAL_DESCRIPTION_FAILED:"rtc.set_local_description_failed",SET_REMOTE_DESCRIPTION_FAILED:"rtc.set_remote_description_failed",AUDIO_OUTPUT_DEVICE_CHANGED:"rtc.audio_output_device_changed",DEVICE_LIST_CHANGED:"rtc.device_list_changed",DEVICE_LIST_WILL_CHANGE:"rtc.device_list_will_change",DEVICE_LIST_AVAILABLE:"rtc.device_list_available",ENDPOINT_MESSAGE_RECEIVED:"rtc.endpoint_message_received",LOCAL_UFRAG_CHANGED:"rtc.local_ufrag_changed",REMOTE_UFRAG_CHANGED:"rtc.remote_ufrag_changed"}},function(e,t,n){"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"t",function(){return o}),n.d(t,"u",function(){return a}),n.d(t,"v",function(){return s}),n.d(t,"w",function(){return c}),n.d(t,"a",function(){return u}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return l}),n.d(t,"d",function(){return h}),n.d(t,"e",function(){return p}),n.d(t,"f",function(){return f}),n.d(t,"g",function(){return m}),n.d(t,"h",function(){return v}),n.d(t,"i",function(){return g}),n.d(t,"j",function(){return _}),n.d(t,"k",function(){return y}),n.d(t,"l",function(){return S}),n.d(t,"m",function(){return E}),n.d(t,"n",function(){return b}),n.d(t,"o",function(){return C}),n.d(t,"p",function(){return T}),n.d(t,"q",function(){return R}),n.d(t,"r",function(){return A}),n.d(t,"s",function(){return k}),n.d(t,"z",function(){return I}),n.d(t,"B",function(){return w}),n.d(t,"A",function(){return P}),n.d(t,"C",function(){return O}),n.d(t,"D",function(){return D}),n.d(t,"E",function(){return N}),n.d(t,"F",function(){return M}),n.d(t,"J",function(){return L}),n.d(t,"G",function(){return x}),n.d(t,"H",function(){return F}),n.d(t,"I",function(){return j}),n.d(t,"K",function(){return H}),n.d(t,"L",function(){return U}),n.d(t,"M",function(){return J}),n.d(t,"x",function(){return B}),n.d(t,"y",function(){return G}),n.d(t,"N",function(){return V});var o="operational",a="page",s="track",c="ui",u="restart",d="session-accept.timeout",l="session-initiate.received",h="session-initiate.timeout",p="terminate",f="transport-replace.received",m="transport-replace.success",v="decline",g="established",_="failed",y="switch.to.jvb",S="available.device",E="connection.disconnected",b="feedback",C="ice.duration",T="ice.establishment.duration.diff",R="ice.state.changed",A="track.no-bytes-sent",k="track.unmuted",I=function(){return{action:"bridge.down",actionSubject:"bridge.down",type:o}},w=function(e,t,n){return{type:o,action:"connection.failed",attributes:r({error_type:e,error_message:t},n)}};function P(e,t){return{action:e,attributes:t,source:"conference",type:o}}var O=function(e,t){var n="connection.stage.reached";return{action:n,actionSubject:e,attributes:t,source:n,type:o}},D=function(e,t,n){return{attributes:{participant_id:e,region:t,rtt:n},name:"e2e_rtt",type:o}},N=function(){return{action:"focus.left",actionSubject:"focus.left",type:o}},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:o,source:"get.user.media",action:e,attributes:t}},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:o,source:"peer.conn.status",action:"duration",attributes:e}},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:o,action:e,source:"jingle",attributes:t}},F=function(e,t){return{attributes:{media_type:e,value:t},action:"track.no.data.from.source",type:o}},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:o,action:e,source:"p2p",attributes:t}},H=function(){return{type:o,action:"remotely.muted"}},U=function(e){return{type:o,action:"rtp.stats",attributes:e}},J=function(e){return{type:o,action:"transport.stats",attributes:e}};function B(e,t,n){return{type:o,action:"audio.output.problem",attributes:{userID:e,localAudioLevels:t,remoteAudioLevels:n}}}var G=function(e,t){return{type:o,action:"bridge-channel.error",attributes:{code:e,reason:t}}},V=function(e){return O("ttfm",e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return o});var r="audio",i="presenter",o="video"},function(e,t,n){"use strict";(function(e){var r=n(4),i=n(36),o=n.n(i),a=n(3),s=n(37),c=n.n(s),u=Object(r.getLogger)(e),d={filterSpecialChars:function(e){return e?e.replace(/[\\\/\{,\}\+]/g,""):e},iceparams:function(e,t){var n,r,i=null;return(r=d.findLine(e,"a=ice-ufrag:",t))&&(n=d.findLine(e,"a=ice-pwd:",t))&&(i={ufrag:d.parseICEUfrag(r),pwd:d.parseICEPwd(n)}),i},parseICEUfrag:function(e){return e.substring(12)},buildICEUfrag:function(e){return"a=ice-ufrag:"+e},parseICEPwd:function(e){return e.substring(10)},buildICEPwd:function(e){return"a=ice-pwd:"+e},parseMID:function(e){return e.substring(6)},parseMLine:function(e){var t={},n=e.substring(2).split(" ");return t.media=n.shift(),t.port=n.shift(),t.proto=n.shift(),""===n[n.length-1]&&n.pop(),t.fmt=n,t},buildMLine:function(e){return"m="+e.media+" "+e.port+" "+e.proto+" "+e.fmt.join(" ")},parseRTPMap:function(e){var t={},n=e.substring(9).split(" ");return t.id=n.shift(),n=n[0].split("/"),t.name=n.shift(),t.clockrate=n.shift(),t.channels=n.length?n.shift():"1",t},parseSCTPMap:function(e){var t=e.substring(10).split(" ");return[t[0],t[1],t.length>2?t[2]:null]},buildRTPMap:function(e){var t="a=rtpmap:"+e.getAttribute("id")+" "+e.getAttribute("name")+"/"+e.getAttribute("clockrate");return e.getAttribute("channels")&&"1"!==e.getAttribute("channels")&&(t+="/"+e.getAttribute("channels")),t},parseCrypto:function(e){var t={},n=e.substring(9).split(" ");return t.tag=n.shift(),t["crypto-suite"]=n.shift(),t["key-params"]=n.shift(),n.length&&(t["session-params"]=n.join(" ")),t},parseFingerprint:function(e){var t={},n=e.substring(14).split(" ");return t.hash=n.shift(),t.fingerprint=n.shift(),t},parseFmtp:function(e){var t=[],n=e.split(" ");n.shift(),n=n.join(" ").split(";");for(var r=0;r<n.length;r++){for(var i=n[r].split("=")[0];i.length&&" "===i[0];)i=i.substring(1);var o=n[r].split("=")[1];i&&o?t.push({name:i,value:o}):i&&t.push({name:"",value:i})}return t},parseICECandidate:function(e){var t={},n=e.split(" ");t.foundation=n[0].substring(12),t.component=n[1],t.protocol=n[2].toLowerCase(),t.priority=n[3],t.ip=n[4],t.port=n[5],t.type=n[7],t.generation=0;for(var r=8;r<n.length;r+=2)switch(n[r]){case"raddr":t["rel-addr"]=n[r+1];break;case"rport":t["rel-port"]=n[r+1];break;case"generation":t.generation=n[r+1];break;case"tcptype":t.tcptype=n[r+1];break;default:u.log("parseICECandidate not translating \""+n[r]+"\" = \""+n[r+1]+"\"")}return t.network="1",t.id=Math.random().toString(36).substr(2,10),t},buildICECandidate:function(e){var t=["a=candidate:"+e.foundation,e.component,e.protocol,e.priority,e.ip,e.port,"typ",e.type].join(" ");switch(t+=" ",e.type){case"srflx":case"prflx":case"relay":e.hasOwnAttribute("rel-addr")&&e.hasOwnAttribute("rel-port")&&(t+="raddr",t+=" ",t+=e["rel-addr"],t+=" ",t+="rport",t+=" ",t+=e["rel-port"],t+=" ")}return e.hasOwnAttribute("tcptype")&&(t+="tcptype",t+=" ",t+=e.tcptype,t+=" "),t+="generation",t+=" ",t+=e.hasOwnAttribute("generation")?e.generation:"0"},parseSSRC:function(e){for(var t=new Map,n=e.split("\r\n"),r=0;r<n.length;r++)if("a=ssrc:"===n[r].substring(0,7)){var i=n[r].split("a=ssrc:")[1].split(" ")[0];t.get(i)||t.set(i,[]),t.get(i).push(n[r])}return t},parseRTCPFB:function(e){var t=e.substr(10).split(" "),n={};return n.pt=t.shift(),n.type=t.shift(),n.params=t,n},parseExtmap:function(e){var t=e.substr(9).split(" "),n={};return n.value=t.shift(),-1===n.value.indexOf("/")?n.direction="both":(n.direction=n.value.substr(n.value.indexOf("/")+1),n.value=n.value.substr(0,n.value.indexOf("/"))),n.uri=t.shift(),n.params=t,n},findLine:function(e,t,n){for(var r=e.split("\r\n"),i=0;i<r.length;i++)if(r[i].substring(0,t.length)===t)return r[i];if(!n)return!1;r=n.split("\r\n");for(var o=0;o<r.length;o++)if(r[o].substring(0,t.length)===t)return r[o];return!1},findLines:function(e,t,n){for(var r=e.split("\r\n"),i=[],o=0;o<r.length;o++)r[o].substring(0,t.length)===t&&i.push(r[o]);if(i.length||!n)return i;r=n.split("\r\n");for(var a=0;a<r.length;a++)r[a].substring(0,t.length)===t&&i.push(r[a]);return i},candidateToJingle:function(e){if(0===e.indexOf("candidate:"))e="a="+e;else if("a=candidate:"!==e.substring(0,12))return u.log("parseCandidate called with a line that is not a candidate line"),u.log(e),null;"\r\n"===e.substring(e.length-2)&&(e=e.substring(0,e.length-2));var t={},n=e.split(" ");if("typ"!==n[6])return u.log("did not find typ in the right place"),u.log(e),null;t.foundation=n[0].substring(12),t.component=n[1],t.protocol=n[2].toLowerCase(),t.priority=n[3],t.ip=n[4],t.port=n[5],t.type=n[7],t.generation="0";for(var r=8;r<n.length;r+=2)switch(n[r]){case"raddr":t["rel-addr"]=n[r+1];break;case"rport":t["rel-port"]=n[r+1];break;case"generation":t.generation=n[r+1];break;case"tcptype":t.tcptype=n[r+1];break;default:u.log("not translating \""+n[r]+"\" = \""+n[r+1]+"\"")}return t.network="1",t.id=Math.random().toString(36).substr(2,10),t},candidateFromJingle:function(e){var t="a=candidate:";t+=e.getAttribute("foundation"),t+=" ",t+=e.getAttribute("component"),t+=" ";var n=e.getAttribute("protocol");switch(a.a.isFirefox()&&"ssltcp"===n.toLowerCase()&&(n="tcp"),t+=n,t+=" ",t+=e.getAttribute("priority"),t+=" ",t+=e.getAttribute("ip"),t+=" ",t+=e.getAttribute("port"),t+=" ",t+="typ",t+=" "+e.getAttribute("type"),t+=" ",e.getAttribute("type")){case"srflx":case"prflx":case"relay":e.getAttribute("rel-addr")&&e.getAttribute("rel-port")&&(t+="raddr",t+=" ",t+=e.getAttribute("rel-addr"),t+=" ",t+="rport",t+=" ",t+=e.getAttribute("rel-port"),t+=" ")}return"tcp"===n.toLowerCase()&&(t+="tcptype",t+=" ",t+=e.getAttribute("tcptype"),t+=" "),t+="generation",t+=" ",(t+=e.getAttribute("generation")||"0")+"\r\n"},parsePrimaryVideoSsrc:function(e){var t=e.ssrcs.map(function(e){return e.id}).filter(function(e,t,n){return n.indexOf(e)===t}).length,n=e.ssrcGroups&&e.ssrcGroups.length||0;if(!(t>1&&0===n)){var r=null;if(1===t)r=e.ssrcs[0].id;else if(2===t){var i=e.ssrcGroups.find(function(e){return"FID"===e.semantics});i&&(r=i.ssrcs.split(" ")[0])}else if(t>=3){var o=e.ssrcGroups.find(function(e){return"SIM"===e.semantics});o&&(r=o.ssrcs.split(" ")[0])}return r}},generateSsrc:function(){return c.a.randomInt(1,4294967295)},getSsrcAttribute:function(e,t,n){for(var r=0;r<e.ssrcs.length;++r){var i=e.ssrcs[r];if(i.id===t&&i.attribute===n)return i.value}},parseGroupSsrcs:function(e){return e.ssrcs.split(" ").map(function(e){return parseInt(e,10)})},getMedia:function(e,t){return e.media.find(function(e){return e.type===t})},getUfrag:function(e){var t=e.split("\n").filter(function(e){return e.startsWith("a=ice-ufrag:")});if(t.length>0)return t[0].substr("a=ice-ufrag:".length)},preferCodec:function(e,t){if(e&&t){var n=e.rtp.filter(function(e){return e.codec&&e.codec.toLowerCase()===t.toLowerCase()}).map(function(e){return e.payload});if(n){for(var r,i=e.payloads.toString().split(" ").map(function(e){return parseInt(e,10)}),o=_createForOfIteratorHelperLoose(n.reverse());!(r=o()).done;){var a=r.value,s=i.indexOf(a);i.splice(s,1),i.unshift(a)}e.payloads=i.join(" ")}}},stripCodec:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e&&t){for(var r,i=[],a=[],s=t.toLowerCase()===o.a.H264&&n,c=_createForOfIteratorHelperLoose(e.rtp);!(r=c()).done;){var u=r.value;u.codec&&u.codec.toLowerCase()===t.toLowerCase()&&(s?i.push(u.payload):a.push(u.payload))}if(s&&(a=e.fmtp.filter(function(e){return i.indexOf(e.payload)>-1&&e.config.includes("profile-level-id=64")}).map(function(e){return e.payload})),a.length>0){var d,l=a.map(function(e){return"apt="+e}),h=e.fmtp.filter(function(e){return-1!==l.indexOf(e.config)});(d=a).push.apply(d,_toConsumableArray(h.map(function(e){return e.payload})));var p=e.payloads.toString().split(" ").map(Number).filter(function(e){return-1===a.indexOf(e)});0===p.length?(e.port=0,e.direction="inactive",e.payloads="*"):e.payloads=p.join(" "),e.rtp=e.rtp.filter(function(e){return-1!==p.indexOf(e.payload)}),e.fmtp=e.fmtp.filter(function(e){return-1!==p.indexOf(e.payload)}),e.rtcpFb&&(e.rtcpFb=e.rtcpFb.filter(function(e){return-1!==p.indexOf(e.payload)}))}}}};t.a=d}).call(this,"modules/xmpp/SDPUtil.js")},function(e,t,n){"use strict";(function(e){var r=n(19),i=n.n(r),o=n(4),a=n(41),s=n.n(a),c=n(18),u=n(43),d=n.n(u),l=n(8),h=n(6),p=n.n(h),f=n(34),m=n.n(f),v=n(13),g=n.n(v),_=n(7),y=n(3),S=n(5),E=n(11),b=n.n(E),C=n(20),T=n(9),R=n(46);function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){k(e,t,n[t])})}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=Object(o.getLogger)(e);y.a.usesAdapter()&&n(164);var w,P,O=new i.a,D=["audio","video"],N={video:{height:{ideal:720,max:720,min:240}}},M=5,L="default",x=!1,F=!1,j=!1,H=!1,U=!1,J=!1,B=document.createElement("audio"),G=void 0!==B.setSinkId;function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={audio:!1,video:!1},r=y.a.isFirefox()||y.a.isSafari()||y.a.isReactNative();if(e.indexOf("video")>=0){if(n.video={mandatory:{},optional:[]},t.cameraDeviceId)r&&(n.video.deviceId=t.cameraDeviceId),n.video.mandatory.sourceId=t.cameraDeviceId;else{var i=t.facingMode||d.a.USER;r&&(n.video.facingMode=i),n.video.optional.push({facingMode:i})}(t.minFps||t.maxFps||t.fps)&&((t.minFps||t.fps)&&(t.minFps=t.minFps||t.fps,n.video.mandatory.minFrameRate=t.minFps),t.maxFps&&(n.video.mandatory.maxFrameRate=t.maxFps)),(function(e,t,n){m.a[n]&&(t&&(e.video.width={ideal:m.a[n].width},e.video.height={ideal:m.a[n].height}),e.video.mandatory.minWidth=m.a[n].width,e.video.mandatory.minHeight=m.a[n].height),e.video.mandatory.minWidth&&(e.video.mandatory.maxWidth=e.video.mandatory.minWidth),e.video.mandatory.minHeight&&(e.video.mandatory.maxHeight=e.video.mandatory.minHeight)})(n,r,t.resolution)}if(e.indexOf("audio")>=0&&(y.a.isReactNative()?n.audio=!0:y.a.isFirefox()?t.micDeviceId?n.audio={mandatory:{},deviceId:t.micDeviceId,optional:[{sourceId:t.micDeviceId}]}:n.audio=!0:(n.audio={mandatory:{},optional:[]},t.micDeviceId&&(r&&(n.audio.deviceId=t.micDeviceId),n.audio.optional.push({sourceId:t.micDeviceId})),n.audio.optional.push({echoCancellation:!j&&!F},{googEchoCancellation:!j&&!F},{googAutoGainControl:!U&&!F},{googNoiseSuppression:!H&&!F},{googHighpassFilter:!J&&!F},{googNoiseSuppression2:!H&&!F},{googEchoCancellation2:!j&&!F},{googAutoGainControl2:!U&&!F}))),e.indexOf("screen")>=0)if(y.a.isChrome())n.video={mandatory:q(A({},t,{source:"screen"})),optional:[]};else if(y.a.isFirefox())n.video={mozMediaSource:"window",mediaSource:"window",frameRate:t.frameRate||{min:M,max:M}};else{var o="'screen' WebRTC media source is supported only in Chrome and Firefox";b.a.callErrorHandler(new Error(o)),I.error(o)}return e.indexOf("desktop")>=0&&(n.video={mandatory:q(A({},t,{source:"desktop"})),optional:[]},y.a.isElectron()&&t.screenShareAudio&&t.desktopStream.indexOf("screen")>=0&&(n.audio={mandatory:{chromeMediaSource:n.video.mandatory.chromeMediaSource}})),t.bandwidth&&(n.video||(n.video={mandatory:{},optional:[]}),n.video.optional.push({bandwidth:t.bandwidth})),y.a.isFirefox()&&t.firefox_fake_device&&(n.fake=!0),n}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.desktopStream,n=e.frameRate,r=void 0===n?{min:M,max:M}:n,i=r.max,o=r.min,a={chromeMediaSource:e.source,maxWidth:window.screen.width,maxHeight:window.screen.height};return"number"==typeof o&&(a.minFrameRate=o),"number"==typeof i&&(a.maxFrameRate=i),void 0!==t&&(a.chromeMediaSourceId=t),a}function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={frameRate:M},n=e.desktopSharingFrameRate;return n&&n.max&&(t.frameRate=n.max),t}function z(e,t){var n=Boolean(t)&&t.getAudioTracks().length>0,r=Boolean(t)&&t.getVideoTracks().length>0,i={};-1!==e.indexOf("video")&&(i.video=r),-1!==e.indexOf("audio")&&(i.audio=n),O.emit(p.a.GRANTED_PERMISSIONS,i)}function W(e){var t=e.filter(function(e){return"audioinput"===e.kind}).length,n=e.filter(function(e){return"audiooutput"===e.kind}).length,r=e.filter(function(e){return"videoinput"===e.kind}).length,i=e.filter(function(e){return"videooutput"===e.kind}).length;e.forEach(function(e){var o={audio_input_device_count:t,audio_output_device_count:n,video_input_device_count:r,video_output_device_count:i,device_id:e.deviceId,device_group_id:e.groupId,device_kind:e.kind,device_label:e.label};S.a.sendAnalytics(_.l,o)})}var $=new((function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this,O)}return _createClass(n,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("boolean"==typeof t.disableAEC&&(j=t.disableAEC,I.info("Disable AEC: "+j)),"boolean"==typeof t.disableNS&&(H=t.disableNS,I.info("Disable NS: "+H)),"boolean"==typeof t.disableAP&&(F=t.disableAP,I.info("Disable AP: "+F)),"boolean"==typeof t.disableAGC&&(U=t.disableAGC,I.info("Disable AGC: "+U)),"boolean"==typeof t.disableHPF&&(J=t.disableHPF,I.info("Disable HPF: "+J)),w=[],window.clearInterval(P),P=void 0,this.enumerateDevices=(function(){if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)return function(e){navigator.mediaDevices.enumerateDevices().then(e,function(){return e([])})}})(),y.a.usesNewGumFlow())this.RTCPeerConnectionType=RTCPeerConnection,this.attachMediaStream=Q(function(e,t){e&&(e.srcObject=t)}),this.getStreamID=function(e){return e.id},this.getTrackID=function(e){return e.id};else{if(!y.a.isChromiumBased()&&!y.a.isReactNative()){var n="Endpoint does not appear to be WebRTC-capable";throw I.error(n),new Error(n)}this.RTCPeerConnectionType=RTCPeerConnection,this.attachMediaStream=Q(function(e,t){return(function(e,t){var n,r="srcObject";r in e||((r="mozSrcObject")in e||(r=null)),r?e[r]=t:(t&&((n=t.jitsiObjectURL)||(t.jitsiObjectURL=n=URL.createObjectURL(t))),e.src=n||"")})(e,t),e}),this.getStreamID=function(e){var t=e.id;return"number"==typeof t?t:T.a.filterSpecialChars(t)},this.getTrackID=function(e){return e.id},MediaStream.prototype.getVideoTracks||(MediaStream.prototype.getVideoTracks=function(){return this.videoTracks}),MediaStream.prototype.getAudioTracks||(MediaStream.prototype.getAudioTracks=function(){return this.audioTracks})}this._initPCConstraints(),R.a.init(t,this.getUserMediaWithConstraints.bind(this)),this.isDeviceListAvailable()&&this.enumerateDevices(function(t){w=t.splice(0),I.debug("Available devices: ",w),W(w),O.emit(p.a.DEVICE_LIST_AVAILABLE,w);var n=function(){return e.enumerateDevices(function(e){var t;(function(e){return e.length!==w.length||e.map(t).sort().join("")!==w.map(t).sort().join("");function t(e){return JSON.stringify({kind:e.kind,deviceId:e.deviceId,groupId:e.groupId,label:e.label,facing:e.facing})}})(e)&&(w=(t=e).slice(0),I.info("list of media devices has changed:",w),W(w),O.emit(p.a.DEVICE_LIST_WILL_CHANGE,t),O.emit(p.a.DEVICE_LIST_CHANGED,t))})};y.a.supportsDeviceChangeEvent()?navigator.mediaDevices.addEventListener("devicechange",n):P=window.setInterval(n,3e3)})}},{key:"_initPCConstraints",value:function(){y.a.isFirefox()?this.pcConstraints={}:(y.a.isChromiumBased()||y.a.isReactNative())&&(this.pcConstraints={optional:[{googHighStartBitrate:0},{googPayloadPadding:!0},{googScreencastMinBitrate:100},{googCpuOveruseDetection:!0},{googCpuOveruseEncodeUsage:!0},{googCpuUnderuseThreshold:55},{googCpuOveruseThreshold:85}]},this.p2pPcConstraints=JSON.parse(JSON.stringify(this.pcConstraints))),this.p2pPcConstraints=this.p2pPcConstraints||this.pcConstraints}},{key:"getUserMediaWithConstraints",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=V(e,t);return I.info("Get media constraints",n),new Promise(function(t,r){navigator.mediaDevices.getUserMedia(n).then(function(n){I.log("onUserMediaSuccess"),z(e,n),t(n)}).catch(function(t){I.warn("Failed to get access to local media.  "+t+" "+n+" "),z(e,void 0),r(new c.a(t,n,e))})})}},{key:"_newGetUserMediaWithConstraints",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,r){navigator.mediaDevices.getUserMedia(t).then(function(t){I.log("onUserMediaSuccess"),z(e,t),n(t)}).catch(function(n){I.warn("Failed to get access to local media.  "+n+" "+t+" "),z(e,void 0),r(new c.a(n,t,e))})})}},{key:"_newGetDesktopMedia",value:function(e){var t=this;return R.a.isSupported()&&y.a.supportsVideo()?new Promise(function(n,r){R.a.obtainStream(t._parseDesktopSharingOptions(e),function(e){n(e)},function(e){r(e)})}):Promise.reject(new Error("Desktop sharing is not supported!"))}},{key:"obtainAudioAndVideoPermissions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.devices=e.devices||[].concat(D),e.resolution=e.resolution||720,e.devices.includes("desktop")&&!R.a.isSupported()?Promise.reject(new Error("Desktop sharing is not supported!")):this._getAudioAndVideoStreams(e).then(function(t){return(function(e,t){var n,r,i,o=[];if(e){var a=e.audioVideo;if(a){var s=a.getAudioTracks();if(s.length){n=new MediaStream;for(var c=0;c<s.length;c++)n.addTrack(s[c])}var u=a.getVideoTracks();if(u.length){i=new MediaStream;for(var d=0;d<u.length;d++)i.addTrack(u[d])}}else n=e.audio,i=e.video;r=e.desktop}if(r){var h=r,p=h.stream,f=h.sourceId,m=h.sourceType;o.push({stream:p,sourceId:f,sourceType:m,track:p.getVideoTracks()[0],mediaType:l.c,videoType:g.a.DESKTOP})}return n&&o.push({stream:n,track:n.getAudioTracks()[0],mediaType:l.a,videoType:null}),i&&o.push({stream:i,track:i.getVideoTracks()[0],mediaType:l.c,videoType:g.a.CAMERA,resolution:t}),o})(t,e.resolution)})}},{key:"_getAudioAndVideoStreams",value:function(e){var t=this,n=e.devices.includes("desktop");return e.devices=e.devices.filter(function(e){return"desktop"!==e}),(e.devices.length?this.getUserMediaWithConstraints(e.devices,e):Promise.resolve(null)).then(function(n){var r=t._getMissingTracks(e.devices,n);return r.length?(t.stopMediaStream(n),t.getUserMediaWithConstraints(r,e).then(function(){return Promise.reject(new c.a({name:"UnknownError"},V(e.devices,e),r))})):n}).then(function(r){if(!n)return{audioVideo:r};if(e.desktopSharingSourceDevice)throw t.stopMediaStream(r),new Error("Using a camera as screenshare source isnot supported on this browser.");return new Promise(function(n,i){R.a.obtainStream(t._parseDesktopSharingOptions(e),function(e){return n({audioVideo:r,desktop:e})},function(e){r&&t.stopMediaStream(r),i(e)})})})}},{key:"_getMissingTracks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=[],r=e.includes("audio"),i=t&&t.getAudioTracks().length>0;r&&!i&&n.push("audio");var o=e.includes("video"),a=t&&t.getVideoTracks().length>0;return o&&!a&&n.push("video"),n}},{key:"_parseDesktopSharingOptions",value:function(e){return{desktopSharingSources:e.desktopSharingSources,gumOptions:{frameRate:e.desktopSharingFrameRate},trackOptions:K(e)}}},{key:"newObtainAudioAndVideoPermissions",value:function(e){var t=this;I.info("Using the new gUM flow");var n=[],r=function(){if(-1===(e.devices||[]).indexOf("desktop"))return Promise.resolve();var t=e.desktopSharingSourceDevice,n=e.desktopSharingSources,r=e.desktopSharingFrameRate;if(t){var i=w&&w.find(function(e){return"videoinput"===e.kind&&(e.deviceId===t||e.label===t)});if(!i)return Promise.reject(new c.a({name:"ConstraintNotSatisfiedError"},{},[t]));var o=this._parseDesktopSharingOptions(e),a=o.gumOptions,s=o.trackOptions,u={video:A({},a,{deviceId:i.deviceId})};return this._newGetUserMediaWithConstraints(["video"],u).then(function(e){var t=e&&e.getTracks()[0];return(t&&t.applyConstraints?t.applyConstraints(s):Promise.resolve()).then(function(){return{sourceType:"device",stream:e}})})}return this._newGetDesktopMedia({desktopSharingSources:n,desktopSharingFrameRate:r})}.bind(this),i=function(){var t=(e.devices||["audio","video"]).filter(function(e){return"audio"===e||"video"===e&&y.a.supportsVideo()});if(!t.length)return Promise.resolve();var n=(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s()(t.constraints||N);if(e.indexOf("video")>=0)if(n.video||(n.video={}),y.a.isSafari()&&(n.video.height&&n.video.height.ideal?n.video.height={ideal:s()(n.video.height.ideal)}:I.warn("Ideal camera height missing, camera may not start properly"),n.video.width&&n.video.width.ideal?n.video.width={ideal:s()(n.video.width.ideal)}:I.warn("Ideal camera width missing, camera may not start properly")),t.cameraDeviceId)n.video.deviceId=t.cameraDeviceId;else{var r=t.facingMode||d.a.USER;n.video.facingMode=r}else n.video=!1;return e.indexOf("audio")>=0?(n.audio&&"boolean"!=typeof n.audio||(n.audio={}),y.a.isFirefox()||y.a.isSafari()?n.audio={deviceId:t.micDeviceId,autoGainControl:!U&&!F,echoCancellation:!j&&!F,noiseSuppression:!H&&!F}:(n.audio.optional||(n.audio.optional=[]),n.audio.optional.push({sourceId:t.micDeviceId},{echoCancellation:!j&&!F},{googEchoCancellation:!j&&!F},{googAutoGainControl:!U&&!F},{googNoiseSuppression:!H&&!F},{googHighpassFilter:!J&&!F},{googNoiseSuppression2:!H&&!F},{googEchoCancellation2:!j&&!F},{googAutoGainControl2:!U&&!F}))):n.audio=!1,e.indexOf("desktop")>=0&&(n.video&&"boolean"!=typeof n.video||(n.video={}),n.video={mandatory:q(A({},t,{source:"desktop"}))}),n})(t,e);return I.info("Got media constraints: ",n),this._newGetUserMediaWithConstraints(t,n)}.bind(this);return r().then(function(e){if(e){var t=e.stream,r=e.sourceId,i=e.sourceType,o=t.getAudioTracks();if(o.length){var a=new MediaStream(o);n.push({stream:a,sourceId:r,sourceType:i,track:a.getAudioTracks()[0]})}var s=t.getVideoTracks();if(s.length){var c=new MediaStream(s);n.push({stream:c,sourceId:r,sourceType:i,track:c.getVideoTracks()[0],videoType:g.a.DESKTOP})}}}).then(i).then(function(t){if(t){var r=t.getAudioTracks();if(r.length){var i=new MediaStream(r);n.push({stream:i,track:i.getAudioTracks()[0],effects:e.effects})}var o=t.getVideoTracks();if(o.length){var a=new MediaStream(o);n.push({stream:a,track:a.getVideoTracks()[0],videoType:g.a.CAMERA,effects:e.effects})}}}).then(function(){return n}).catch(function(e){return n.forEach(function(e){var n=e.stream;t.stopMediaStream(n)}),Promise.reject(e)})}},{key:"isDeviceListAvailable",value:function(){return Boolean(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)}},{key:"isDeviceChangeAvailable",value:function(e){return"output"!==e&&"audiooutput"!==e||G}},{key:"stopMediaStream",value:function(e){if(e){e.getTracks().forEach(function(e){e.stop&&e.stop()}),e.stop&&e.stop(),e.release&&e.release();var t=e.jitsiObjectURL;t&&(delete e.jitsiObjectURL,URL.revokeObjectURL(t))}}},{key:"isDesktopSharingEnabled",value:function(){return R.a.isSupported()}},{key:"setAudioOutputDevice",value:function(e){return this.isDeviceChangeAvailable("output")?B.setSinkId(e).then(function(){L=e,x=!0,I.log("Audio output device set to "+e),O.emit(p.a.AUDIO_OUTPUT_DEVICE_CHANGED,e)}):Promise.reject(new Error("Audio output device change is not supported"))}},{key:"getAudioOutputDevice",value:function(){return L}},{key:"getCurrentlyAvailableMediaDevices",value:function(){return w}},{key:"getEventDataForActiveDevice",value:function(e){var t=[],n={deviceId:e.deviceId,kind:e.kind,label:e.label,groupId:e.groupId};return t.push(n),{deviceList:t}}},{key:"setSuspendVideo",value:function(e,t){e.optional||(e.optional=[]),e.optional=e.optional.filter(function(e){return!e.hasOwnProperty("googSuspendBelowMinBitrate")}),t&&e.optional.push({googSuspendBelowMinBitrate:"true"})}}]),n})(C.a));function Q(e){return function(t,n){var r=e.apply($,arguments);return n&&$.isDeviceChangeAvailable("output")&&n.getAudioTracks&&n.getAudioTracks().length&&x&&t.setSinkId($.getAudioOutputDevice()).catch(function(e){var n=new c.a(e,null,["audiooutput"]);b.a.callUnhandledRejectionHandler({promise:this,reason:n}),I.warn("Failed to set audio output device for the element. Default audio output device will be used instead",t,n)}),r}}t.a=$}).call(this,"modules/RTC/RTCUtils.js")},function(e,t){var n=[],r=window.onerror,i=window.onunhandledrejection;window.onerror=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.forEach(function(e){return e.apply(void 0,t)}),r&&r.apply(void 0,t)},window.onunhandledrejection=function(e){n.forEach(function(t){return t(null,null,null,null,e.reason)}),i&&i(e)};var o={addHandler:function(e){n.push(e)},callErrorHandler:function(e){var t=window.onerror;t&&t(null,null,null,null,e)},callUnhandledRejectionHandler:function(e){var t=window.onunhandledrejection;t&&t(e)}};e.exports=o},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return A});var r=n(4),i=n(1),o=n(8),a=n(6),s=n.n(a),c=n(13),u=n.n(c),d=n(3),l=n(5),h=n(11),p=n.n(h),f=n(20),m=n(27),v=n(113),g=n(74),_=n(10),y=n(115);function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=Object(r.getLogger)(e),b=0,C=0;function T(e,t){var n=[],r=null;return e.forEach(function(e){e.mediaType===o.a?r=t.micDeviceId:e.videoType===u.a.CAMERA&&(r=t.cameraDeviceId),C=Object(m.e)(C);var i=new g.a((function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){S(e,t,n[t])})}return e})({},e,{deviceId:r,facingMode:t.facingMode,rtcId:C,effects:t.effects}));n.push(i)}),n}function R(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(e){var t=e.sourceId,n=e.sourceType,r=e.stream,i=e.track,o=e.videoType,a=e.effects,s=i.getSettings(),c=s.deviceId,u=s.facingMode;return C=Object(m.e)(C),new g.a({deviceId:c,facingMode:u,mediaType:i.kind,rtcId:C,sourceId:t,sourceType:n,stream:r,track:i,videoType:o||null,effects:a})})}var A=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck(this,n),(r=t.call(this)).conference=e,r.peerConnections=new Map,r.localTracks=[],r.options=i,r._channel=null,r._lastN=-1,r._lastNEndpoints=null,r._senderVideoConstraints={},r._maxFrameHeight=void 0,r._pinnedEndpoint=null,r._selectedEndpoints=[],r._lastNChangeListener=r._onLastNChanged.bind(_assertThisInitialized(r)),r._onDeviceListChanged=r._onDeviceListChanged.bind(_assertThisInitialized(r)),r._updateAudioOutputForAudioTracks=r._updateAudioOutputForAudioTracks.bind(_assertThisInitialized(r)),_.a.isDeviceChangeAvailable("output")&&(_.a.addListener(s.a.AUDIO_OUTPUT_DEVICE_CHANGED,r._updateAudioOutputForAudioTracks),_.a.addListener(s.a.DEVICE_LIST_CHANGED,r._onDeviceListChanged)),r}return _createClass(n,[{key:"destroy",value:function(){_.a.removeListener(s.a.AUDIO_OUTPUT_DEVICE_CHANGED,this._updateAudioOutputForAudioTracks),_.a.removeListener(s.a.DEVICE_LIST_CHANGED,this._onDeviceListChanged),this.removeListener(s.a.LASTN_ENDPOINT_CHANGED,this._lastNChangeListener),this._channelOpenListener&&this.removeListener(s.a.DATA_CHANNEL_OPEN,this._channelOpenListener)}},{key:"initializeBridgeChannel",value:function(e,t){var n=this;this._channel=new v.a(e,t,this.eventEmitter,this._senderVideoConstraintsChanged.bind(this)),this._channelOpenListener=function(){try{n._channel.sendPinnedEndpointMessage(n._pinnedEndpoint),n._channel.sendSelectedEndpointsMessage(n._selectedEndpoints),void 0!==n._maxFrameHeight&&n._channel.sendReceiverVideoConstraintMessage(n._maxFrameHeight)}catch(e){p.a.callErrorHandler(e),E.error("Cannot send selected("+n._selectedEndpoint+")pinned("+n._pinnedEndpoint+")frameHeight("+n._maxFrameHeight+") endpoint message",e)}n.removeListener(s.a.DATA_CHANNEL_OPEN,n._channelOpenListener),n._channelOpenListener=null,-1!==n._lastN&&n._channel.sendSetLastNMessage(n._lastN)},this.addListener(s.a.DATA_CHANNEL_OPEN,this._channelOpenListener),this.addListener(s.a.LASTN_ENDPOINT_CHANGED,this._lastNChangeListener)}},{key:"_onDeviceListChanged",value:function(){this._updateAudioOutputForAudioTracks(_.a.getAudioOutputDevice())}},{key:"_senderVideoConstraintsChanged",value:function(e){this._senderVideoConstraints=e,this.eventEmitter.emit(s.a.SENDER_VIDEO_CONSTRAINTS_CHANGED)}},{key:"_onLastNChanged",value:function(){var e,t,n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=this._lastNEndpoints||[];this._lastNEndpoints=r,e=o.filter(function(e){return!n.isInLastN(e)}),t=r.filter(function(e){return-1===o.indexOf(e)}),this.conference.eventEmitter.emit(i.LAST_N_ENDPOINTS_CHANGED,e,t)}},{key:"onCallEnded",value:function(){this._channel&&(this._channel&&"websocket"===this._channel.mode&&this._channel.close(),this._channel=null)}},{key:"setReceiverVideoConstraint",value:function(e){this._maxFrameHeight=e,this._channel&&this._channel.isOpen()&&this._channel.sendReceiverVideoConstraintMessage(e)}},{key:"selectEndpoints",value:function(e){this._selectedEndpoints=e,this._channel&&this._channel.isOpen()&&this._channel.sendSelectedEndpointsMessage(e)}},{key:"pinEndpoint",value:function(e){this._pinnedEndpoint=e,this._channel&&this._channel.isOpen()&&this._channel.sendPinnedEndpointMessage(e)}},{key:"createPeerConnection",value:function(e,t,r,i){var o=n.getPCConstraints(r);void 0!==i.abtestSuspendVideo&&(_.a.setSuspendVideo(o,i.abtestSuspendVideo),l.a.analytics.addPermanentProperties({abtestSuspendVideo:i.abtestSuspendVideo})),i.enableInsertableStreams&&(E.debug("E2EE - setting insertable streams constraints"),t.encodedInsertableStreams=!0,t.forceEncodedAudioInsertableStreams=!0,t.forceEncodedVideoInsertableStreams=!0),d.a.supportsSdpSemantics()&&(t.sdpSemantics="plan-b"),t.bundlePolicy="max-bundle",b=Object(m.e)(b);var a=new y.a(this,b,e,t,o,r,i);return this.peerConnections.set(a.id,a),a}},{key:"_removePeerConnection",value:function(e){var t=e.id;return!!this.peerConnections.has(t)&&(this.peerConnections.delete(t),!0)}},{key:"addLocalTrack",value:function(e){if(!e)throw new Error("track must not be null nor undefined");this.localTracks.push(e),e.conference=this.conference}},{key:"getLastN",value:function(){return this._lastN}},{key:"getSenderVideoConstraints",value:function(){return this._senderVideoConstraints}},{key:"getLocalVideoTrack",value:function(){var e=this.getLocalTracks(o.c);return e.length?e[0]:void 0}},{key:"getLocalAudioTrack",value:function(){var e=this.getLocalTracks(o.a);return e.length?e[0]:void 0}},{key:"getLocalTracks",value:function(e){var t=this.localTracks.slice();return void 0!==e&&(t=t.filter(function(t){return t.getType()===e})),t}},{key:"getRemoteTracks",value:function(e){for(var t,n=[],r=_createForOfIteratorHelperLoose(this.peerConnections.values());!(t=r()).done;){var i=t.value.getRemoteTracks(void 0,e);i&&(n=n.concat(i))}return n}},{key:"setAudioMute",value:function(e){var t=[];return this.getLocalTracks(o.a).forEach(function(n){t.push(e?n.mute():n.unmute())}),Promise.all(t)}},{key:"removeLocalTrack",value:function(e){var t=this.localTracks.indexOf(e);-1!==t&&this.localTracks.splice(t,1)}},{key:"removeRemoteTracks",value:function(e){for(var t,n=[],r=_createForOfIteratorHelperLoose(this.peerConnections.values());!(t=r()).done;){var i=t.value.removeRemoteTracks(e);n=n.concat(i)}return E.debug("Removed remote tracks for "+e+" count: "+n.length),n}},{key:"closeBridgeChannel",value:function(){this._channel&&(this._channel.close(),this._channel=null,this.removeListener(s.a.LASTN_ENDPOINT_CHANGED,this._lastNChangeListener))}},{key:"setAudioLevel",value:function(e,t,n,r){var i=e.getTrackBySSRC(t);i&&(i.isAudioTrack()?(i.isLocal()!==r&&E.error(i+" was expected to "+(r?"be":"not be")+" local"),i.setAudioLevel(n,e)):E.warn("Received audio level for non-audio track: "+t))}},{key:"sendChannelMessage",value:function(e,t){if(!this._channel)throw new Error("Channel support is disabled!");this._channel.sendMessage(e,t)}},{key:"setLastN",value:function(e){this._lastN!==e&&(this._lastN=e,this._channel&&this._channel.isOpen()&&this._channel.sendSetLastNMessage(e),this.eventEmitter.emit(s.a.LASTN_VALUE_CHANGED,e))}},{key:"isInLastN",value:function(e){return!this._lastNEndpoints||this._lastNEndpoints.indexOf(e)>-1}},{key:"_updateAudioOutputForAudioTracks",value:function(e){for(var t,n=_createForOfIteratorHelperLoose(this.getRemoteTracks(o.a));!(t=n()).done;){t.value.setAudioOutput(e)}}}],[{key:"newCreateLocalTracks",value:function(e){return R(e)}},{key:"obtainAudioAndVideoPermissions",value:function(e){var t=d.a.usesNewGumFlow();return(t?_.a.newObtainAudioAndVideoPermissions(e):_.a.obtainAudioAndVideoPermissions(e)).then(function(n){return t?R(n):T(n,e)})}},{key:"addListener",value:function(e,t){_.a.addListener(e,t)}},{key:"removeListener",value:function(e,t){_.a.removeListener(e,t)}},{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.options=e,_.a.init(this.options)}},{key:"getPCConstraints",value:function(e){var t=e?_.a.p2pPcConstraints:_.a.pcConstraints;return t?JSON.parse(JSON.stringify(t)):{}}},{key:"attachMediaStream",value:function(e,t){return _.a.attachMediaStream(e,t)}},{key:"getStreamID",value:function(e){return _.a.getStreamID(e)}},{key:"getTrackID",value:function(e){return _.a.getTrackID(e)}},{key:"isDeviceListAvailable",value:function(){return _.a.isDeviceListAvailable()}},{key:"isDeviceChangeAvailable",value:function(e){return _.a.isDeviceChangeAvailable(e)}},{key:"isWebRtcSupported",value:function(){return d.a.isSupported()}},{key:"getAudioOutputDevice",value:function(){return _.a.getAudioOutputDevice()}},{key:"getCurrentlyAvailableMediaDevices",value:function(){return _.a.getCurrentlyAvailableMediaDevices()}},{key:"getEventDataForActiveDevice",value:function(e){return _.a.getEventDataForActiveDevice(e)}},{key:"setAudioOutputDevice",value:function(e){return _.a.setAudioOutputDevice(e)}},{key:"isUserStream",value:function(e){return n.isUserStreamById(_.a.getStreamID(e))}},{key:"isUserStreamById",value:function(e){return e&&"mixedmslabel"!==e&&"default"!==e}},{key:"enumerateDevices",value:function(e){_.a.enumerateDevices(e)}},{key:"stopMediaStream",value:function(e){_.a.stopMediaStream(e)}},{key:"isDesktopSharingEnabled",value:function(){return _.a.isDesktopSharingEnabled()}}]),n})(f.a)}).call(this,"modules/RTC/RTC.js")},function(e,t){e.exports={CAMERA:"camera",DESKTOP:"desktop"}},function(e,t,n){"use strict";n.r(t),n.d(t,"CONSTRAINT_FAILED",function(){return r}),n.d(t,"ELECTRON_DESKTOP_PICKER_ERROR",function(){return i}),n.d(t,"ELECTRON_DESKTOP_PICKER_NOT_FOUND",function(){return o}),n.d(t,"GENERAL",function(){return a}),n.d(t,"NOT_FOUND",function(){return s}),n.d(t,"PERMISSION_DENIED",function(){return c}),n.d(t,"SCREENSHARING_GENERIC_ERROR",function(){return u}),n.d(t,"SCREENSHARING_USER_CANCELED",function(){return d}),n.d(t,"TRACK_IS_DISPOSED",function(){return l}),n.d(t,"TRACK_NO_STREAM_FOUND",function(){return h}),n.d(t,"UNSUPPORTED_RESOLUTION",function(){return p});var r="gum.constraint_failed",i="gum.electron_desktop_picker_error",o="gum.electron_desktop_picker_not_found",a="gum.general",s="gum.not_found",c="gum.permission_denied",u="gum.screensharing_generic_error",d="gum.screensharing_user_canceled",l="track.track_is_disposed",h="track.no_stream_found",p="gum.unsupported_resolution"},function(e,t,n){"use strict";n.r(t),n.d(t,"LOCAL_TRACK_STOPPED",function(){return r}),n.d(t,"TRACK_AUDIO_LEVEL_CHANGED",function(){return i}),n.d(t,"TRACK_AUDIO_OUTPUT_CHANGED",function(){return o}),n.d(t,"TRACK_MUTE_CHANGED",function(){return a}),n.d(t,"TRACK_VIDEOTYPE_CHANGED",function(){return s}),n.d(t,"NO_DATA_FROM_SOURCE",function(){return c}),n.d(t,"NO_AUDIO_INPUT",function(){return u});var r="track.stopped",i="track.audioLevelsChanged",o="track.audioOutputChanged",a="track.trackMuteChanged",s="track.videoTypeChanged",c="track.no_data_from_source",u="track.no_audio_input"},function(e,t,n){"use strict";n.r(t),n.d(t,"AUTHENTICATION_REQUIRED",function(){return r}),n.d(t,"CHAT_ERROR",function(){return i}),n.d(t,"CONFERENCE_DESTROYED",function(){return o}),n.d(t,"CONFERENCE_MAX_USERS",function(){return a}),n.d(t,"CONNECTION_ERROR",function(){return s}),n.d(t,"NOT_ALLOWED_ERROR",function(){return c}),n.d(t,"MEMBERS_ONLY_ERROR",function(){return u}),n.d(t,"CONFERENCE_ACCESS_DENIED",function(){return d}),n.d(t,"FOCUS_DISCONNECTED",function(){return l}),n.d(t,"FOCUS_LEFT",function(){return h}),n.d(t,"GRACEFUL_SHUTDOWN",function(){return p}),n.d(t,"ICE_FAILED",function(){return f}),n.d(t,"INCOMPATIBLE_SERVER_VERSIONS",function(){return m}),n.d(t,"OFFER_ANSWER_FAILED",function(){return v}),n.d(t,"PASSWORD_NOT_SUPPORTED",function(){return g}),n.d(t,"PASSWORD_REQUIRED",function(){return _}),n.d(t,"RESERVATION_ERROR",function(){return y}),n.d(t,"VIDEOBRIDGE_NOT_AVAILABLE",function(){return S});var r="conference.authenticationRequired",i="conference.chatError",o="conference.destroyed",a="conference.max_users",s="conference.connectionError",c="conference.connectionError.notAllowed",u="conference.connectionError.membersOnly",d="conference.connectionError.accessDenied",l="conference.focusDisconnected",h="conference.focusLeft",p="conference.gracefulShutdown",f="conference.iceFailed",m="conference.incompatible_server_versions",v="conference.offerAnswerFailed",g="conference.passwordNotSupported",_="conference.passwordRequired",y="conference.reservationError",S="conference.videobridgeNotAvailable"},function(e,t,n){"use strict";n.d(t,"a",function(){return S}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return b});var r={};n.r(r),n.d(r,"CHROME",function(){return a}),n.d(r,"OPERA",function(){return s}),n.d(r,"FIREFOX",function(){return c}),n.d(r,"INTERNET_EXPLORER",function(){return u}),n.d(r,"SAFARI",function(){return d}),n.d(r,"NWJS",function(){return l}),n.d(r,"ELECTRON",function(){return h}),n.d(r,"REACT_NATIVE",function(){return p}),n.d(r,"UNKNOWN",function(){return f}),n(72);var i=n(86),o=n.n(i),a="chrome",s="opera",c="firefox",u="iexplorer",d="safari",l="nwjs",h="electron",p="react-native",f="unknown",m={Chrome:a,Chromium:a,Opera:s,Firefox:c,"Internet Explorer":u,Safari:d};function v(){var e=navigator.userAgent;if(e.match(/Electron/)){var t=e.match(/Electron\/([\d.]+)/)[1];return{name:h,version:t}}}function g(){var e=navigator.userAgent;if(e.match(/JitsiMeetNW/)){var t=e.match(/JitsiMeetNW\/([\d.]+)/)[1];return{name:l,version:t}}}function _(){var e,t,n=navigator.userAgent.match(/\b(react[ \t_-]*native)(?:\/(\S+))?/i);if(n||"ReactNative"===navigator.product)return n&&n.length>2&&(t=n[1],e=n[2]),t||(t="react-native"),e||(e="unknown"),{name:p,version:e}}function y(e){for(var t,n=[_,v,g],r=0;r<n.length;r++)if(t=n[r]())return t;var i=e.getBrowserName();return i in m?{name:m[i],version:e.getBrowserVersion()}:(t=(function(){var e=navigator.userAgent,t={name:f,version:void 0};if(e.match(/Chrome/)&&!e.match(/Edge/))if(e.match(/Edg(A?)/)){var n=e.match(/Chrome\/([\d.]+)/)[1];Number.parseInt(n,10)>72&&(t.name=a,t.version=n)}else t.name=a,t.version=e.match(/Chrome\/([\d.]+)/)[1];return t})())||{name:f,version:void 0}}var S=(function(){function e(t){var n,r;if(_classCallCheck(this,e),this._bowser=o.a.getParser(navigator.userAgent),void 0===t){var i=y(this._bowser);n=i.name,r=i.version}else t.name in m?(n=m[t.name],r=t.version):(n=f,r=void 0);this._name=n,this._version=r}return _createClass(e,[{key:"getName",value:function(){return this._name}},{key:"isChrome",value:function(){return this._name===a}},{key:"isOpera",value:function(){return this._name===s}},{key:"isFirefox",value:function(){return this._name===c}},{key:"isIExplorer",value:function(){return this._name===u}},{key:"isSafari",value:function(){return this._name===d}},{key:"isNWJS",value:function(){return this._name===l}},{key:"isElectron",value:function(){return this._name===h}},{key:"isReactNative",value:function(){return this._name===p}},{key:"getVersion",value:function(){return this._version}},{key:"_checkCondition",value:function(e){if(this._version)return this._bowser.satisfies(e)}},{key:"isVersionGreaterThan",value:function(e){return this._checkCondition(_defineProperty({},this._name,">"+e))}},{key:"isVersionLessThan",value:function(e){return this._checkCondition(_defineProperty({},this._name,"<"+e))}},{key:"isVersionEqualTo",value:function(e){return this._checkCondition(_defineProperty({},this._name,"~"+e))}}]),e})(),E=(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getItem",value:function(){}},{key:"setItem",value:function(){}},{key:"removeItem",value:function(){}},{key:"key",value:function(){}}]),e})(),b=new((function(e){_inherits(n,E);var t=_createSuper(n);function n(){var e,r;_classCallCheck(this,n),e=t.call(this);try{r=window.localStorage}catch(r){}return e.storage=r||new E,e}return _createClass(n,[{key:"getItem",value:function(e){return this.storage.getItem(e)}},{key:"setItem",value:function(e,t){return this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){return this.storage.removeItem(e)}},{key:"key",value:function(e){return this.storage.key(e)}}]),n})())},function(e,t,n){"use strict";var r=n(14),i={};function o(e,t,n){if("object"==typeof e&&void 0!==e.name)switch(this.gum={error:e,constraints:t,devices:n&&Array.isArray(n)?n.slice(0):void 0},e.name){case"NotAllowedError":case"PermissionDeniedError":case"SecurityError":this.name=r.PERMISSION_DENIED,this.message=i[this.name]+(this.gum.devices||[]).join(", ");break;case"DevicesNotFoundError":case"NotFoundError":this.name=r.NOT_FOUND,this.message=i[this.name]+(this.gum.devices||[]).join(", ");break;case"ConstraintNotSatisfiedError":case"OverconstrainedError":var o=e.constraintName||e.constraint;t&&t.video&&(!n||n.indexOf("video")>-1)&&("minWidth"===o||"maxWidth"===o||"minHeight"===o||"maxHeight"===o||"width"===o||"height"===o||"deviceId"===o)?(this.name=r.UNSUPPORTED_RESOLUTION,this.message=i[this.name]+(function(e,t){if(t&&t.video&&t.video.mandatory)switch(e){case"width":return t.video.mandatory.minWidth;case"height":return t.video.mandatory.minHeight;default:return t.video.mandatory[e]||""}return""})(o,t)):(this.name=r.CONSTRAINT_FAILED,this.message=i[this.name]+e.constraintName);break;default:this.name=r.GENERAL,this.message=e.message||i[this.name]}else{if("string"!=typeof e)throw new Error("Invalid arguments");i[e]?(this.name=e,this.message=t||i[e]):this.message=e}this.stack=e.stack||(new Error).stack}i[r.UNSUPPORTED_RESOLUTION]="Video resolution is not supported: ",i[r.SCREENSHARING_USER_CANCELED]="User canceled screen sharing prompt",i[r.SCREENSHARING_GENERIC_ERROR]="Unknown error from screensharing",i[r.ELECTRON_DESKTOP_PICKER_ERROR]="Unkown error from desktop picker",i[r.ELECTRON_DESKTOP_PICKER_NOT_FOUND]="Failed to detect desktop picker",i[r.GENERAL]="Generic getUserMedia error",i[r.PERMISSION_DENIED]="User denied permission to use device(s): ",i[r.NOT_FOUND]="Requested device(s) was/were not found: ",i[r.CONSTRAINT_FAILED]="Constraint could not be satisfied: ",i[r.TRACK_IS_DISPOSED]="Track has been already disposed",i[r.TRACK_NO_STREAM_FOUND]="Track does not have an associated Media Stream",o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,t.a=o},function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var c=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var i,o,a,s;if(u(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=d(e))>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,s=c,console&&console.warn&&console.warn(s)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function f(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?(function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t})(i):v(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return d(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)o(c,this,t);else{var u=c.length,d=v(c,u);for(n=0;n<u;++n)o(d[n],this,t)}return!0},s.prototype.addListener=function(e,t){return l(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return l(this,e,t,!0)},s.prototype.once=function(e,t){return u(t),this.on(e,p(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,p(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,o,a;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():(function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()})(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return f(this,e,!0)},s.prototype.rawListeners=function(e){return f(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(19),i=n.n(r),o=(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new i.a;_classCallCheck(this,e),this.eventEmitter=t,this.addEventListener=this.on=this.addListener,this.removeEventListener=this.off=this.removeListener}return _createClass(e,[{key:"addListener",value:function(e,t){var n=this;return this.eventEmitter.addListener(e,t),function(){return n.removeEventListener(e,t)}}},{key:"removeListener",value:function(e,t){this.eventEmitter.removeListener(e,t)}}]),e})()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3),i=n(9);function o(e){for(var t=e.split("\r\nm="),n=1,r=t.length;n<r;n++){var i="m="+t[n];n!==r-1&&(i+="\r\n"),t[n]=i}var o=t.shift()+"\r\n";this.media=t,this.raw=o+t.join(""),this.session=o}o.prototype.failICE=!1,o.prototype.removeTcpCandidates=!1,o.prototype.removeUdpCandidates=!1,o.prototype.getMediaSsrcMap=function(){for(var e=this,t={},n=function(n){var r={mediaindex:n,mid:i.a.parseMID(i.a.findLine(e.media[n],"a=mid:")),ssrcs:{},ssrcGroups:[]};t[n]=r,i.a.findLines(e.media[n],"a=ssrc:").forEach(function(e){var t=e.substring(7).split(" ")[0];r.ssrcs[t]||(r.ssrcs[t]={ssrc:t,lines:[]}),r.ssrcs[t].lines.push(e)}),i.a.findLines(e.media[n],"a=ssrc-group:").forEach(function(e){var t=e.indexOf(" "),n=e.substr(0,t).substr(13),i=e.substr(14+n.length).split(" ");i.length&&r.ssrcGroups.push({semantics:n,ssrcs:i})})},r=0;r<this.media.length;r++)n(r);return t},o.prototype.containsSSRC=function(e){var t=this.getMediaSsrcMap(),n=!1;return Object.keys(t).forEach(function(r){n||t[r].ssrcs[e]&&(n=!0)}),n},o.prototype.toJingle=function(e,t){i.a.findLines(this.session,"a=group:").forEach(function(t){var n=t.split(" "),r=n.shift().substr(8);e.c("group",{xmlns:"urn:xmpp:jingle:apps:grouping:0",semantics:r});for(var i=0;i<n.length;i++)e.c("content",{name:n[i]}).up();e.up()});for(var n=0;n<this.media.length;n++){var o=i.a.parseMLine(this.media[n].split("\r\n")[0]);if("audio"===o.media||"video"===o.media||"application"===o.media){var a,s=i.a.findLine(this.media[n],"a=ssrc:");a=!!s&&s.substring(7).split(" ")[0],e.c("content",{creator:t,name:o.media});var c=i.a.findLine(this.media[n],"a=mid:");if(c){var u=i.a.parseMID(c);e.attrs({name:u})}if("audio"===o.media||"video"===o.media){e.c("description",{xmlns:"urn:xmpp:jingle:apps:rtp:1",media:o.media}),a&&e.attrs({ssrc:a});for(var d=0;d<o.fmt.length;d++){var l=i.a.findLine(this.media[n],"a=rtpmap:"+o.fmt[d]);e.c("payload-type",i.a.parseRTPMap(l));var h=i.a.findLine(this.media[n],"a=fmtp:"+o.fmt[d]);if(h)for(var p=i.a.parseFmtp(h),f=0;f<p.length;f++)e.c("parameter",p[f]).up();this.rtcpFbToJingle(n,e,o.fmt[d]),e.up()}if(a){for(var m,v=_createForOfIteratorHelperLoose(i.a.parseSSRC(this.media[n]));!(m=v()).done;){var g=m.value,_=_slicedToArray(g,2),y=_[0],S=_[1];e.c("source",{ssrc:y,xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0"}),S.forEach(function(t){var n=t.indexOf(" "),r=t.substr(n+1);if(e.c("parameter"),-1===r.indexOf(":"))e.attrs({name:r});else{var o=r.split(":",2)[0];e.attrs({name:o});var a=r.split(":",2)[1];a=i.a.filterSpecialChars(a),e.attrs({value:a})}e.up()}),e.up()}i.a.findLines(this.media[n],"a=ssrc-group:").forEach(function(t){var n=t.indexOf(" "),r=t.substr(0,n).substr(13),i=t.substr(14+r.length).split(" ");i.length&&(e.c("ssrc-group",{semantics:r,xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0"}),i.forEach(function(t){return e.c("source",{ssrc:t}).up()}),e.up())})}var E=i.a.findLines(this.media[n],"a=rid");if(E.length&&r.a.usesRidsForSimulcast()){var b=E.map(function(e){return e.split(":")[1]}).map(function(e){return e.split(" ")[0]});b.forEach(function(t){e.c("source",{rid:t,xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0"}),e.up()}),i.a.findLine(this.media[n],"a=simulcast")&&(e.c("rid-group",{semantics:"SIM",xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0"}),b.forEach(function(t){e.c("source",{rid:t}).up()}),e.up())}i.a.findLine(this.media[n],"a=rtcp-mux")&&e.c("rtcp-mux").up(),this.rtcpFbToJingle(n,e,"*");for(var C=i.a.findLines(this.media[n],"a=extmap:"),T=0;T<C.length;T++){var R=i.a.parseExtmap(C[T]);if(e.c("rtp-hdrext",{xmlns:"urn:xmpp:jingle:apps:rtp:rtp-hdrext:0",uri:R.uri,id:R.value}),R.hasOwnProperty("direction"))switch(R.direction){case"sendonly":e.attrs({senders:"responder"});break;case"recvonly":e.attrs({senders:"initiator"});break;case"sendrecv":e.attrs({senders:"both"});break;case"inactive":e.attrs({senders:"none"})}e.up()}e.up()}this.transportToJingle(n,e);var A=this.media[n];i.a.findLine(A,"a=sendrecv",this.session)?e.attrs({senders:"both"}):i.a.findLine(A,"a=sendonly",this.session)?e.attrs({senders:"initiator"}):i.a.findLine(A,"a=recvonly",this.session)?e.attrs({senders:"responder"}):i.a.findLine(A,"a=inactive",this.session)&&e.attrs({senders:"none"}),"0"!==o.port||i.a.findLine(A,"a=bundle-only",this.session)||e.attrs({senders:"rejected"}),e.up()}}return e.up(),e},o.prototype.transportToJingle=function(e,t){var n=this;t.c("transport");var r=i.a.findLine(this.media[e],"a=sctpmap:",this.session);if(r){var o=i.a.parseSCTPMap(r);t.c("sctpmap",{xmlns:"urn:xmpp:jingle:transports:dtls-sctp:1",number:o[0],protocol:o[1]}),o.length>2&&t.attrs({streams:o[2]}),t.up()}i.a.findLines(this.media[e],"a=fingerprint:",this.session).forEach(function(r){var o=i.a.parseFingerprint(r);o.xmlns="urn:xmpp:jingle:apps:dtls:0",t.c("fingerprint").t(o.fingerprint),delete o.fingerprint;var a=i.a.findLine(n.media[e],"a=setup:",n.session);a&&(o.setup=a.substr(8)),t.attrs(o),t.up()});var a=i.a.iceparams(this.media[e],this.session);a&&(a.xmlns="urn:xmpp:jingle:transports:ice-udp:1",t.attrs(a),i.a.findLines(this.media[e],"a=candidate:",this.session).forEach(function(e){var r=i.a.candidateToJingle(e);n.failICE&&(r.ip="1.1.1.1");var o=r&&"string"==typeof r.protocol?r.protocol.toLowerCase():"";n.removeTcpCandidates&&("tcp"===o||"ssltcp"===o)||n.removeUdpCandidates&&"udp"===o||t.c("candidate",r).up()})),t.up()},o.prototype.rtcpFbToJingle=function(e,t,n){i.a.findLines(this.media[e],"a=rtcp-fb:"+n).forEach(function(e){var n=i.a.parseRTCPFB(e);"trr-int"===n.type?(t.c("rtcp-fb-trr-int",{xmlns:"urn:xmpp:jingle:apps:rtp:rtcp-fb:0",value:n.params[0]}),t.up()):(t.c("rtcp-fb",{xmlns:"urn:xmpp:jingle:apps:rtp:rtcp-fb:0",type:n.type}),n.params.length>0&&t.attrs({subtype:n.params[0]}),t.up())})},o.prototype.rtcpFbFromJingle=function(e,t){var n="",r=e.find('>rtcp-fb-trr-int[xmlns="urn:xmpp:jingle:apps:rtp:rtcp-fb:0"]');return r.length&&(n+="a=rtcp-fb:* trr-int ",r.attr("value")?n+=r.attr("value"):n+="0",n+="\r\n"),e.find('>rtcp-fb[xmlns="urn:xmpp:jingle:apps:rtp:rtcp-fb:0"]').each(function(e,r){n+="a=rtcp-fb:"+t+" "+r.getAttribute("type"),r.hasAttribute("subtype")&&(n+=" "+r.getAttribute("subtype")),n+="\r\n"}),n},o.prototype.fromJingle=function(e){var t=this,n=Date.now();this.raw="v=0\r\no=- "+n+" 2 IN IP4 0.0.0.0\r\ns=-\r\nt=0 0\r\n";var r=$(e).find('>group[xmlns="urn:xmpp:jingle:apps:grouping:0"]');r.length&&r.each(function(e,n){var r=$(n).find(">content").map(function(e,t){return t.getAttribute("name")}).get();r.length>0&&(t.raw+="a=group:"+(n.getAttribute("semantics")||n.getAttribute("type"))+" "+r.join(" ")+"\r\n")}),this.session=this.raw,e.find(">content").each(function(e,n){var r=t.jingle2media($(n));t.media.push(r)}),this.raw=this.session+this.media.join("")},o.prototype.jingle2media=function(e){var t=this,n=e.find(">description"),r=e.find('>transport[xmlns="urn:xmpp:jingle:transports:ice-udp:1"]'),o="",a=r.find('>sctpmap[xmlns="urn:xmpp:jingle:transports:dtls-sctp:1"]'),s={media:n.attr("media"),port:"1"};if("rejected"===e.attr("senders")&&(s.port="0"),r.find('>fingerprint[xmlns="urn:xmpp:jingle:apps:dtls:0"]').length?s.proto=a.length?"DTLS/SCTP":"RTP/SAVPF":s.proto="RTP/AVPF",a.length){o+="m=application "+s.port+" DTLS/SCTP "+a.attr("number")+"\r\n",o+="a=sctpmap:"+a.attr("number")+" "+a.attr("protocol");var c=a.attr("streams");o+=c?" "+c+"\r\n":"\r\n"}else s.fmt=n.find(">payload-type").map(function(e,t){return t.getAttribute("id")}).get(),o+=i.a.buildMLine(s)+"\r\n";switch(o+="c=IN IP4 0.0.0.0\r\n",a.length||(o+="a=rtcp:1 IN IP4 0.0.0.0\r\n"),r.length&&(r.attr("ufrag")&&(o+=i.a.buildICEUfrag(r.attr("ufrag"))+"\r\n"),r.attr("pwd")&&(o+=i.a.buildICEPwd(r.attr("pwd"))+"\r\n"),r.find('>fingerprint[xmlns="urn:xmpp:jingle:apps:dtls:0"]').each(function(e,t){o+="a=fingerprint:"+t.getAttribute("hash"),o+=" "+$(t).text(),o+="\r\n",t.hasAttribute("setup")&&(o+="a=setup:"+t.getAttribute("setup")+"\r\n")})),r.find(">candidate").each(function(e,n){var r=n.getAttribute("protocol");r="string"==typeof r?r.toLowerCase():"",t.removeTcpCandidates&&("tcp"===r||"ssltcp"===r)||t.removeUdpCandidates&&"udp"===r||(t.failICE&&n.setAttribute("ip","1.1.1.1"),o+=i.a.candidateFromJingle(n))}),e.attr("senders")){case"initiator":o+="a=sendonly\r\n";break;case"responder":o+="a=recvonly\r\n";break;case"none":o+="a=inactive\r\n";break;case"both":o+="a=sendrecv\r\n"}return o+="a=mid:"+e.attr("name")+"\r\n",n.find(">rtcp-mux").length&&(o+="a=rtcp-mux\r\n"),n.find(">payload-type").each(function(e,n){o+=i.a.buildRTPMap(n)+"\r\n",$(n).find(">parameter").length&&(o+="a=fmtp:"+n.getAttribute("id")+" ",o+=$(n).find(">parameter").map(function(e,t){var n=t.getAttribute("name");return(n?n+"=":"")+t.getAttribute("value")}).get().join("; "),o+="\r\n"),o+=t.rtcpFbFromJingle($(n),n.getAttribute("id"))}),o+=this.rtcpFbFromJingle(n,"*"),n.find('>rtp-hdrext[xmlns="urn:xmpp:jingle:apps:rtp:rtp-hdrext:0"]').each(function(e,t){o+="a=extmap:"+t.getAttribute("id")+" "+t.getAttribute("uri")+"\r\n"}),n.find('>ssrc-group[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each(function(e,t){var n=t.getAttribute("semantics"),r=$(t).find(">source").map(function(e,t){return t.getAttribute("ssrc")}).get();r.length&&(o+="a=ssrc-group:"+n+" "+r.join(" ")+"\r\n")}),n.find('>source[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each(function(e,t){var n=t.getAttribute("ssrc");$(t).find(">parameter").each(function(e,t){var r=t.getAttribute("name"),a=t.getAttribute("value");a=i.a.filterSpecialChars(a),o+="a=ssrc:"+n+" "+r,a&&a.length&&(o+=":"+a),o+="\r\n"})}),o}},function(e,t,n){"use strict";n.r(t),n.d(t,"DETECTOR_STATE_CHANGE",function(){return r}),n.d(t,"AUDIO_INPUT_STATE_CHANGE",function(){return i}),n.d(t,"NO_AUDIO_INPUT",function(){return o}),n.d(t,"VAD_NOISY_DEVICE",function(){return a}),n.d(t,"VAD_REPORT_PUBLISHED",function(){return s}),n.d(t,"VAD_SCORE_PUBLISHED",function(){return c}),n.d(t,"VAD_TALK_WHILE_MUTED",function(){return u});var r="detector_state_change",i="audio_input_state_changed",o="no_audio_input_detected",a="detection.vad_noise_device",s="vad-report-published",c="detection.vad_score_published",u="detection.vad_talk_while_muted"},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return a}),n.d(t,"e",function(){return s});var r="statistics.audioLevel",i="statistics.before_disposed",o="statistics.byte_sent_stats",a="statistics.connectionstats",s="statistics.long_tasks_stats"},function(e,t,n){"use strict";n.r(t),n.d(t,"STATUS_AVAILABLE",function(){return r}),n.d(t,"STATUS_UNDEFINED",function(){return i}),n.d(t,"STATUS_BUSY",function(){return o}),n.d(t,"STATE_ON",function(){return a}),n.d(t,"STATE_OFF",function(){return s}),n.d(t,"STATE_PENDING",function(){return c}),n.d(t,"STATE_RETRYING",function(){return u}),n.d(t,"STATE_FAILED",function(){return d}),n.d(t,"ERROR_NO_CONNECTION",function(){return l}),n.d(t,"ERROR_SESSION_EXISTS",function(){return h});var r="available",i="undefined",o="busy",a="on",s="off",c="pending",u="retrying",d="failed",l="error_no_connection",h="error_session_already_exists"},function(e,t,n){var r=n(156),i=n(157);t.write=i,t.parse=r.parse,t.parseFmtpConfig=r.parseFmtpConfig,t.parseParams=r.parseParams,t.parsePayloads=r.parsePayloads,t.parseRemoteCandidates=r.parseRemoteCandidates,t.parseImageAttributes=r.parseImageAttributes,t.parseSimulcastStreamList=r.parseSimulcastStreamList},function(e,t,n){"use strict";n.r(t),n.d(t,"CONNECTION_DISCONNECTED",function(){return r}),n.d(t,"CONNECTION_ESTABLISHED",function(){return i}),n.d(t,"CONNECTION_FAILED",function(){return o}),n.d(t,"WRONG_STATE",function(){return a}),n.d(t,"DISPLAY_NAME_REQUIRED",function(){return s});var r="connection.connectionDisconnected",i="connection.connectionEstablished",o="connection.connectionFailed",a="connection.wrongState",s="connection.display_name_required"},function(e,t,n){"use strict";function r(e){var t=e;return e>=Number.MAX_SAFE_INTEGER&&(t=0),t+1}function i(e){return e.length>0?e.reduce(function(e,t){return e+t})/e.length:0}function o(e){for(var t=0,n=0;n<e.length;n++)t+=Math.pow(31*e.charCodeAt(n),e.length-n),t&=t;return Math.abs(t)}function a(e){return e.filter(function(e){return e>=0})}n.d(t,"e",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"d",function(){return o}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return s});var s=(function(){function e(){_classCallCheck(this,e),this.average=0,this.n=0}return _createClass(e,[{key:"addNext",value:function(e){"number"==typeof e&&(this.n+=1,this.average=this.average+(e-this.average)/this.n)}},{key:"getAverage",value:function(){return this.average}}]),e})()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return T}),n.d(t,"b",function(){return R}),n.d(t,"c",function(){return A});var r=n(4),i=n(2),o=(n(152),n(39)),a=n(26),s=n(0),c=n.n(s),u=n(3),d=n(52),l=n(11),h=n.n(l),p=n(20),f=n(37),m=n.n(f),v=n(62),g=n(42),_=n(98),y=n(103),S=n(110),E=n(111),b=n(112),C=Object(r.getLogger)(e),T=[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}],R="type",A=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).connection=null,i.disconnectInProgress=!1,i.connectionTimes={},i.options=e,i.token=r,i.authenticatedUser=!1,Object(b.a)(),Object(S.a)(),i.connection=(function(e){var t=e.enableWebsocketResume,n=e.serviceUrl,r=void 0===n?"/http-bind":n,i=e.token,o=e.websocketKeepAlive;return i&&(r+=(-1===r.indexOf("?")?"?":"&")+"token="+i),new g.a({enableWebsocketResume:t,serviceUrl:r,websocketKeepAlive:o})})({enableWebsocketResume:e.enableWebsocketResume,serviceUrl:e.serviceUrl||e.bosh,token:r,websocketKeepAlive:e.websocketKeepAlive}),i._initStrophePlugins(),i.caps=new v.b(i.connection,i.options.clientNode),i.initFeaturesList(),$(window).on("beforeunload unload",function(e){i.disconnect(e).catch(function(){})}),i}return _createClass(n,[{key:"initFeaturesList",value:function(){this.caps.addFeature("urn:xmpp:jingle:1"),this.caps.addFeature("urn:xmpp:jingle:apps:rtp:1"),this.caps.addFeature("urn:xmpp:jingle:transports:ice-udp:1"),this.caps.addFeature("urn:xmpp:jingle:apps:dtls:0"),this.caps.addFeature("urn:xmpp:jingle:transports:dtls-sctp:1"),this.caps.addFeature("urn:xmpp:jingle:apps:rtp:audio"),this.caps.addFeature("urn:xmpp:jingle:apps:rtp:video"),this.options.disableRtx||this.caps.addFeature("urn:ietf:rfc:4588"),!0===this.options.enableOpusRed&&u.a.supportsAudioRed()&&this.caps.addFeature("http://abcpen.com/opus-red"),this.caps.addFeature("urn:ietf:rfc:5761"),this.caps.addFeature("urn:ietf:rfc:5888"),u.a.isChromiumBased()&&!0===this.options.enableLipSync&&(C.info("Lip-sync enabled !"),this.caps.addFeature("http://abcpen.com/meet/lipsync")),this.connection.rayo&&this.caps.addFeature("urn:xmpp:rayo:client:1"),d.a.isSupported(this.options)&&this.caps.addFeature("https://abcpen.com/meet/e2ee")}},{key:"getConnection",value:function(){return this.connection}},{key:"connectionHandler",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,s=window.performance.now(),u=i.Strophe.getStatusString(n).toLowerCase();if(this.connectionTimes[u]=s,C.log("(TIME) Strophe "+u+(r?"["+r+"]":"")+":\t",s),this.eventEmitter.emit(c.a.CONNECTION_STATUS_CHANGED,t,n,r),n===i.Strophe.Status.CONNECTED||n===i.Strophe.Status.ATTACHED){(this.options.useStunTurn||this.options.p2p&&this.options.p2p.useStunTurn)&&this.connection.jingle.getStunAndTurnCredentials(),C.info("My Jabber ID: "+this.connection.jid),this._resetState();var d=this.connection.domain;this.caps.getFeaturesAndIdentities(d).then(function(t){var n=t.features,r=t.identities;n.has(i.Strophe.NS.PING)||C.error("Ping NOT supported by "+d+" - please enable ping in your XMPP server config"),r.forEach(function(t){"speakerstats"===t.type&&(e.speakerStatsComponentAddress=t.name),"conference_duration"===t.type&&(e.conferenceDurationComponentAddress=t.name),"lobbyrooms"===t.type&&(e.lobbySupported=!0,t.name&&e.caps.getFeaturesAndIdentities(t.name,t.type).then(function(t){t.features.forEach(function(t){t.endsWith("#displayname_required")&&e.eventEmitter.emit(a.DISPLAY_NAME_REQUIRED)})}).catch(function(e){return C.warn("Error getting features from lobby.",e&&e.message)}))}),(e.speakerStatsComponentAddress||e.conferenceDurationComponentAddress)&&e.connection.addHandler(e._onPrivateMessage.bind(e),null,"message",null,null)}).catch(function(e){h.a.callErrorHandler(new Error("Feature discovery error: "+e)),C.error("Feature discovery error",e)}),t.password&&(this.authenticatedUser=!0),this.connection&&this.connection.connected&&i.Strophe.getResourceFromJid(this.connection.jid)&&this.eventEmitter.emit(a.CONNECTION_ESTABLISHED,i.Strophe.getResourceFromJid(this.connection.jid))}else if(n===i.Strophe.Status.CONNFAIL)"x-strophe-bad-non-anon-jid"===r?this.anonymousConnectionFailed=!0:this.connectionFailed=!0,this.lastErrorMsg=r,"giving-up"===r&&this.eventEmitter.emit(a.CONNECTION_FAILED,o.OTHER_ERROR,r);else if(n===i.Strophe.Status.ERROR)this.lastErrorMsg=r;else if(n===i.Strophe.Status.DISCONNECTED){this.connection.ping.stopInterval();var l=Boolean(this.disconnectInProgress),p=r||this.lastErrorMsg;if(this.anonymousConnectionFailed)this.eventEmitter.emit(a.CONNECTION_FAILED,o.PASSWORD_REQUIRED);else if(this.connectionFailed)this.eventEmitter.emit(a.CONNECTION_FAILED,o.OTHER_ERROR,p,void 0,this._getConnectionFailedReasonDetails());else if(l)this.eventEmitter.emit(a.CONNECTION_DISCONNECTED,p);else{C.error("XMPP connection dropped!");var f=i.Strophe.getLastErrorStatus();f>=500&&f<600?this.eventEmitter.emit(a.CONNECTION_FAILED,o.SERVER_ERROR,p||"server-error",void 0,this._getConnectionFailedReasonDetails()):this.eventEmitter.emit(a.CONNECTION_FAILED,o.CONNECTION_DROPPED_ERROR,p||"connection-dropped-error",void 0,this._getConnectionFailedReasonDetails())}}else n===i.Strophe.Status.AUTHFAIL&&this.eventEmitter.emit(a.CONNECTION_FAILED,o.PASSWORD_REQUIRED,r,t)}},{key:"_connect",value:function(e,t){this._resetState(),this.connection.connect(e,t,this.connectionHandler.bind(this,{jid:e,password:t}))}},{key:"attach",value:function(e){this._resetState();var t=this.connectionTimes.attaching=window.performance.now();C.log("(TIME) Strophe Attaching:\t",t),this.connection.attach(e.jid,e.sid,parseInt(e.rid,10)+1,this.connectionHandler.bind(this,{jid:e.jid,password:e.password}))}},{key:"_resetState",value:function(){this.anonymousConnectionFailed=!1,this.connectionFailed=!1,this.lastErrorMsg=void 0,this.disconnectInProgress=void 0}},{key:"connect",value:function(e,t){if(!e){var n=this.options.hosts,r=n.anonymousdomain,i=n.domain,o=r||i,a=window.location;if(r){var s=a&&a.search;(s&&-1!==s.indexOf("login=true")||this.token)&&(o=i)}e=o||a&&a.hostname}return this._connect(e,t)}},{key:"createRoom",value:function(e,t,n){var r=e+"@"+(t.customDomain?t.customDomain:this.options.hosts.muc.toLowerCase())+"/",i=n?n(this.connection.jid,this.authenticatedUser):m.a.randomHexString(8).toLowerCase();return C.info("JID "+this.connection.jid+" using MUC nickname "+i),r+=i,this.connection.emuc.createRoom(r,null,t)}},{key:"getJid",value:function(){return this.connection.jid}},{key:"getJingleLog",value:function(){var e=this.connection.jingle;return e?e.getLog():{}}},{key:"getXmppLog",value:function(){return(this.connection.logger||{}).log||null}},{key:"dial",value:function(){var e;(e=this.connection.rayo).dial.apply(e,arguments)}},{key:"ping",value:function(e){var t=this;return new Promise(function(n,r){t.connection.ping.ping(t.connection.domain,n,r,e)})}},{key:"getSessions",value:function(){return this.connection.jingle.sessions}},{key:"disconnect",value:function(e){var t=this;return this.disconnectInProgress?this.disconnectInProgress:this.connection?(this.disconnectInProgress=new Promise(function(e){t.eventEmitter.on(c.a.CONNECTION_STATUS_CHANGED,function n(r,o){o===i.Strophe.Status.DISCONNECTED&&(e(),t.eventEmitter.removeListener(c.a.CONNECTION_STATUS_CHANGED,n))})}),this._cleanupXmppConnection(e),this.disconnectInProgress):Promise.resolve()}},{key:"_cleanupXmppConnection",value:function(e){if(!this.connection.isUsingWebSocket&&this.connection.flush(),!this.connection.isUsingWebSocket&&null!=e){var t=e.type;if(("beforeunload"===t||"unload"===t)&&(this.connection.options.sync=!0,this.connection.sendUnavailableBeacon()))return}this.connection.disconnect(),!0!==this.connection.options.sync&&this.connection.flush()}},{key:"_initStrophePlugins",value:function(){var e={jvb:{iceServers:[]},p2p:{iceServers:[]}},t=this.options.p2p&&this.options.p2p.stunServers||T;Array.isArray(t)&&(C.info("P2P STUN servers: ",t),e.p2p.iceServers=t),this.options.p2p&&this.options.p2p.iceTransportPolicy&&(C.info("P2P ICE transport policy: ",this.options.p2p.iceTransportPolicy),e.p2p.iceTransportPolicy=this.options.p2p.iceTransportPolicy),this.connection.addConnectionPlugin("emuc",new _.a(this)),this.connection.addConnectionPlugin("jingle",new y.a(this,this.eventEmitter,e)),this.connection.addConnectionPlugin("rayo",new E.a)}},{key:"_getConnectionFailedReasonDetails",value:function(){var e={};if(this.options.deploymentInfo&&this.options.deploymentInfo.shard&&this.connection.lastResponseHeaders){var t={};this.connection.lastResponseHeaders.trim().split(/[\r\n]+/).forEach(function(e){var n=e.split(": "),r=n.shift(),i=n.join(": ");t[r]=i}),e.shard_changed=this.options.deploymentInfo.shard!==t["x-jitsi-shard"]}return e.suspend_time=this.connection.ping.getPingSuspendTime(),e.time_since_last_success=this.connection.getTimeSinceLastSuccess(),e}},{key:"sendDominantSpeakerEvent",value:function(e){if(this.speakerStatsComponentAddress&&e){var t=Object(i.$msg)({to:this.speakerStatsComponentAddress});t.c("speakerstats",{xmlns:"http://abcpen.com/zmeet",room:e}).up(),this.connection.send(t)}}},{key:"tryParseJSONAndVerify",value:function(e){try{var t=JSON.parse(e);if(t&&"object"==typeof t){var n=t[R];if(void 0!==n)return t;C.debug("parsing valid json but does not have correct structure","topic: ",n)}}catch(e){return C.error(e),!1}return!1}},{key:"_onPrivateMessage",value:function(e){var t=e.getAttribute("from");if(t!==this.speakerStatsComponentAddress&&t!==this.conferenceDurationComponentAddress)return!0;var n=$(e).find(">json-message").text(),r=this.tryParseJSONAndVerify(n);return r&&"speakerstats"===r[R]&&r.users&&this.eventEmitter.emit(c.a.SPEAKER_STATS_RECEIVED,r.users),r&&"conference_duration"===r[R]&&r.created_timestamp&&this.eventEmitter.emit(c.a.CONFERENCE_TIMESTAMP_RECEIVED,r.created_timestamp),!0}}]),n})(p.a)}).call(this,"modules/xmpp/xmpp.js")},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return c});var r=n(25);function i(e){return parseInt(e.ssrcs.split(" ")[0],10)}function o(e){return parseInt(e.ssrcs.split(" ")[1],10)}function a(e){return e.ssrcs?e.ssrcs.map(function(e){return e.id}).filter(function(e,t,n){return n.indexOf(e)===t}).length:0}var s=(function(){function e(t){if(_classCallCheck(this,e),!t)throw new Error("mLine is undefined");this.mLine=t}return _createClass(e,[{key:"getSSRCAttrValue",value:function(e,t){var n=this.ssrcs.find(function(n){return n.id===e&&n.attribute===t});return n&&n.value}},{key:"removeSSRC",value:function(e){this.mLine.ssrcs&&this.mLine.ssrcs.length&&(this.mLine.ssrcs=this.mLine.ssrcs.filter(function(t){return t.id!==e}))}},{key:"addSSRCAttribute",value:function(e){this.ssrcs.push(e)}},{key:"findGroup",value:function(e,t){return this.ssrcGroups.find(function(n){return n.semantics===e&&(!t||t===n.ssrcs)})}},{key:"findGroups",value:function(e){return this.ssrcGroups.filter(function(t){return t.semantics===e})}},{key:"findGroupByPrimarySSRC",value:function(e,t){return this.ssrcGroups.find(function(n){return n.semantics===e&&i(n)===t})}},{key:"findSSRCByMSID",value:function(e){return this.ssrcs.find(function(t){return"msid"===t.attribute&&(null===e||t.value===e)})}},{key:"getSSRCCount",value:function(){return a(this.mLine)}},{key:"containsAnySSRCGroups",value:function(){return void 0!==this.mLine.ssrcGroups}},{key:"getPrimaryVideoSsrc",value:function(){var e=this.mLine.type;if("video"!==e)throw new Error("getPrimarySsrc doesn't work with '"+e+"'");if(1===a(this.mLine))return this.mLine.ssrcs[0].id;if(this.mLine.ssrcGroups){var t=this.findGroup("SIM");if(t)return i(t);var n=this.findGroup("FID");if(n)return i(n);var r=this.findGroup("FEC-FR");if(r)return i(r)}}},{key:"getRtxSSRC",value:function(e){var t=this.findGroupByPrimarySSRC("FID",e);return t&&o(t)}},{key:"getSSRCs",value:function(){return this.ssrcs.map(function(e){return e.id}).filter(function(e,t,n){return n.indexOf(e)===t})}},{key:"getPrimaryVideoSSRCs",value:function(){var e=this.mLine.type;if("video"!==e)throw new Error("getPrimaryVideoSSRCs doesn't work with "+e);for(var t,n=this.getSSRCs(),r=_createForOfIteratorHelperLoose(this.ssrcGroups);!(t=r()).done;){var i=t.value;if("FID"===i.semantics||"FEC-FR"===i.semantics){var a=o(i);n.splice(n.indexOf(a),1)}}return n}},{key:"dumpSSRCGroups",value:function(){return JSON.stringify(this.mLine.ssrcGroups)}},{key:"removeGroupsWithSSRC",value:function(e){this.mLine.ssrcGroups&&(this.mLine.ssrcGroups=this.mLine.ssrcGroups.filter(function(t){return-1===t.ssrcs.indexOf(""+e)}))}},{key:"removeGroupsBySemantics",value:function(e){this.mLine.ssrcGroups&&(this.mLine.ssrcGroups=this.mLine.ssrcGroups.filter(function(t){return t.semantics!==e}))}},{key:"replaceSSRC",value:function(e,t){this.mLine.ssrcs&&this.mLine.ssrcs.forEach(function(n){n.id===e&&(n.id=t)})}},{key:"addSSRCGroup",value:function(e){this.ssrcGroups.push(e)}},{key:"ssrcs",get:function(){return this.mLine.ssrcs||(this.mLine.ssrcs=[]),this.mLine.ssrcs},set:function(e){this.mLine.ssrcs=e}},{key:"direction",get:function(){return this.mLine.direction},set:function(e){this.mLine.direction=e}},{key:"ssrcGroups",get:function(){return this.mLine.ssrcGroups||(this.mLine.ssrcGroups=[]),this.mLine.ssrcGroups},set:function(e){this.mLine.ssrcGroups=e}}]),e})(),c=(function(){function e(t){_classCallCheck(this,e),this.parsedSDP=r.parse(t)}return _createClass(e,[{key:"selectMedia",value:function(e){var t=this.parsedSDP.media.find(function(t){return t.type===e});return t?new s(t):null}},{key:"toRawSDP",value:function(){return r.write(this.parsedSDP)}}]),e})()},function(e,t,n){"use strict";n.r(t),n.d(t,"LOCAL_STATS_UPDATED",function(){return r}),n.d(t,"REMOTE_STATS_UPDATED",function(){return i});var r="cq.local_stats_updated",i="cq.remote_stats_updated"},function(e,t,n){"use strict";(function(e){var r,i,o=n(17),a=n(4),s=n(102),c=n.n(s),u=Object(a.getLogger)(e);function d(){return(Math.random().toString(16)+"000000000").substr(2,8)}t.a={get callStatsUserName(){return r||((r=o.c.getItem("callStatsUserName"))||(e=c.a.generateUsername(),u.log("generated callstats uid",e),r=e,o.c.setItem("callStatsUserName",r))),r;var e},get machineId(){return i||((i=o.c.getItem("jitsiMeetId"))||(e=d()+d()+d()+d(),u.log("generated id",e),i=e,o.c.setItem("jitsiMeetId",i))),i;var e},get sessionId(){return o.c.getItem("sessionId")},set sessionId(e){e?o.c.setItem("sessionId",e):o.c.removeItem("sessionId")}}}).call(this,"modules/settings/Settings.js")},function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var r="pending",i="active",o="ended"},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={ACCEPT:"session-accept",CONNECTION_ERROR:"connection-error-encountered",INITIATE:"session-initiate",TERMINATE:"session-terminate",TRANSPORT_INFO:"transport-info",UNAVAILABLE:"unavailable"}},function(e,t){e.exports={1080:{width:1920,height:1080,order:8},fullhd:{width:1920,height:1080,order:8},720:{width:1280,height:720,order:7},hd:{width:1280,height:720,order:7},960:{width:960,height:720,order:6},540:{width:960,height:540,order:5},qhd:{width:960,height:540,order:5},360:{width:640,height:360,order:4},640:{width:640,height:480,order:3},vga:{width:640,height:480,order:3},180:{width:320,height:180,order:2},320:{width:320,height:240,order:1}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return h});var r,i=n(3),o=n(11),a=n.n(o),s=n(4).getLogger(e),c="applicationLog",u="error",d="event",l="mstWithUserID",h=(function(){function e(t,n){_classCallCheck(this,e),this.confID=n.confID,this.tpc=t,this.peerconnection=t.peerconnection,this.remoteUserID=n.remoteUserID||"jitsi",this.hasFabric=!1,e.fabrics.add(this),e.backendInitialized&&(this._addNewFabric(),1===e.fabrics.size&&e._emptyReportQueue(this))}return _createClass(e,null,[{key:"_addNewFabricCallback",value:function(t,n){e.backend&&"success"!==t&&s.error("Monitoring status: "+t+" msg: "+n)}},{key:"_initCallback",value:function(t,n){if(s.log("CallStats Status: err="+t+" msg="+n),"success"===t){e.backendInitialized=!0;for(var r,i=!1,o=null,a=_createForOfIteratorHelperLoose(e.fabrics.values());!(r=a()).done;){var c=r.value;c.hasFabric||(s.debug("addNewFabric - initCallback"),c._addNewFabric()&&(i=!0,o||(o=c)))}i&&e._emptyReportQueue(o)}}},{key:"_emptyReportQueue",value:function(t){for(var n,r=t.confID,i=t.peerconnection,o=_createForOfIteratorHelperLoose(e.reportsQueue);!(n=o()).done;){var a=n.value;if(a.type===u){var s=a.data;e._reportError(t,s.type,s.error,s.pc||i)}else if(a.type===d){var c=a.data;e.backend.sendFabricEvent(a.pc||i,c.event,r,c.eventData)}else if(a.type===l){var h=a.data;e.backend.associateMstWithUserID(a.pc||i,h.callStatsId,r,h.ssrc,h.usageLabel,h.containerId)}}e.reportsQueue.length=0}},{key:"_reportError",value:function(t,n,r,i){var o=r;o||(s.warn("No error is passed!"),o=new Error("Unknown error")),e.backendInitialized&&t?e.backend.reportError(i,t.confID,n,o):e.reportsQueue.push({type:u,data:{error:o,pc:i,type:n}})}},{key:"_reportEvent",value:function(t,n,r){var i=t&&t.peerconnection,o=t&&t.confID;e.backendInitialized&&t?e.backend.sendFabricEvent(i,n,o,r):e.reportsQueue.push({confID:o,pc:i,type:d,data:{event:n,eventData:r}})}},{key:"_traceAndCatchBackendCalls",value:function(e){for(var t=function(t){var n=e[t];e[t]=function(){try{for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return n.apply(e,r)}catch(e){a.a.callErrorHandler(e)}}},n=0,r=["associateMstWithUserID","sendFabricEvent","sendUserFeedback"];n<r.length;n++){t(r[n])}for(var o=function(t){var n=e[t];e[t]=function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];s.debug(t,i),n.apply(e,i)}},u=0,d=["associateMstWithUserID","sendFabricEvent","sendUserFeedback"];u<d.length;u++){o(d[u])}var l=e.reportError;e.reportError=function(t,n,r){for(var o=arguments.length,u=new Array(o>3?o-3:0),d=3;d<o;d++)u[d-3]=arguments[d];r===c?i.a.isReactNative()||console&&console.debug("reportError",t,n,r):s.debug.apply(s,["reportError",t,n,r].concat(u));try{l.call.apply(l,[e,t,n,r].concat(u))}catch(e){r===c?console&&console.error("reportError",e):a.a.callErrorHandler(e)}}}},{key:"initBackend",value:function(t){if(e.backend)throw new Error("CallStats backend has been initialized already!");try{var n,r=callstats;if(e.backend=new r,e._traceAndCatchBackendCalls(e.backend),e.userID={aliasName:t.aliasName,userName:t.userName},e.callStatsID=t.callStatsID,e.callStatsSecret=t.callStatsSecret,t.applicationName&&(n={applicationVersion:t.applicationName+" ("+i.a.getName()+")"}),t.confID){var o=t.confID.match(/.*\/(.*)\/.*/);n.siteID=t.siteID||o&&o[1]||"/"}e.backend.initialize(e.callStatsID,e.callStatsSecret,e.userID,e._initCallback,void 0,n);var c=t.getWiFiStatsMethod;return c&&(e.backend.attachWifiStatsHandler(c),c().then(function(e){e&&s.info("Reported wifi addresses:",JSON.parse(e).addresses)}).catch(function(){})),!0}catch(t){return a.a.callErrorHandler(t),e.backend=null,s.error(t),!1}}},{key:"isBackendInitialized",value:function(){return Boolean(e.backend)}},{key:"sendActiveDeviceListEvent",value:function(t,n){e._reportEvent(n,"activeDeviceList",t)}},{key:"sendApplicationLog",value:function(t,n){try{e._reportError(n,c,t,n&&n.peerconnection)}catch(t){console&&"function"==typeof console.error&&console.error("sendApplicationLog failed",t)}}},{key:"sendFeedback",value:function(t,n,r){return new Promise(function(i,o){if(e.backend)e.backend.sendUserFeedback(t,{userID:e.userID,overall:n,comment:r},function(e,t){"success"===e?i(t):o(t)});else{var a="Failed to submit feedback to CallStats - no backend";s.error(a),o(a)}})}},{key:"sendGetUserMediaFailed",value:function(t,n){e._reportError(n,"getUserMedia",t,null)}},{key:"sendMuteEvent",value:function(t,n,r){var i;i="video"===n?t?"videoPause":"videoResume":t?"audioMute":"audioUnmute",e._reportEvent(r,i)}},{key:"fabrics",get:function(){return r||(r=new Set),r}}]),_createClass(e,[{key:"_addNewFabric",value:function(){s.info("addNewFabric",this.remoteUserID);try{var t={remoteEndpointType:this.tpc.isP2P?e.backend.endpointType.peer:e.backend.endpointType.server},n=e.backend.addNewFabric(this.peerconnection,this.remoteUserID,e.backend.fabricUsage.multiplex,this.confID,t,e._addNewFabricCallback);this.hasFabric=!0;var r="success"===n.status;return r||s.error("callstats fabric not initilized",n.message),r}catch(e){return a.a.callErrorHandler(e),!1}}},{key:"associateStreamWithVideoTag",value:function(t,n,r,i,o){if(e.backend){var a=n?e.userID:r;e.backendInitialized?e.backend.associateMstWithUserID(this.peerconnection,a,this.confID,t,i,o):e.reportsQueue.push({type:l,pc:this.peerconnection,data:{callStatsId:a,containerId:o,ssrc:t,usageLabel:i}})}}},{key:"sendDominantSpeakerEvent",value:function(){e._reportEvent(this,"dominantSpeaker")}},{key:"sendTerminateEvent",value:function(){e.backendInitialized&&e.backend.sendFabricEvent(this.peerconnection,e.backend.fabricEvent.fabricTerminated,this.confID),e.fabrics.delete(this)}},{key:"sendIceConnectionFailedEvent",value:function(){e._reportError(this,"iceConnectionFailure",null,this.peerconnection)}},{key:"sendCreateOfferFailed",value:function(t){e._reportError(this,"createOffer",t,this.peerconnection)}},{key:"sendCreateAnswerFailed",value:function(t){e._reportError(this,"createAnswer",t,this.peerconnection)}},{key:"sendResumeOrHoldEvent",value:function(t){e._reportEvent(this,t?"fabricResume":"fabricHold")}},{key:"sendScreenSharingEvent",value:function(t,n){var r;n&&(r={ssrc:n}),e._reportEvent(this,t?"screenShareStart":"screenShareStop",r)}},{key:"sendSetLocalDescFailed",value:function(t){e._reportError(this,"setLocalDescription",t,this.peerconnection)}},{key:"sendSetRemoteDescFailed",value:function(t){e._reportError(this,"setRemoteDescription",t,this.peerconnection)}},{key:"sendAddIceCandidateFailed",value:function(t){e._reportError(this,"addIceCandidate",t,this.peerconnection)}}]),e})();h.backend=null,h.reportsQueue=[],h.backendInitialized=!1,h.callStatsID=null,h.callStatsSecret=null,h.userID=null}).call(this,"modules/statistics/CallStats.js")},function(e,t){e.exports={H264:"h264",VP8:"vp8",VP9:"vp9"}},function(e,t){function n(e,t){return Math.floor(Math.random()*(t-e+1))+e}function r(e){return e[n(0,e.length-1)]}var i={randomHexDigit:function(){return r("0123456789abcdef")},randomHexString:function(e){for(var t="";e--;)t+=this.randomHexDigit();return t},randomElement:r,randomAlphanumStr:function(e){for(var t="",n=0;n<e;n+=1)t+=r("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");return t},randomInt:n};e.exports=i},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(20);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(function(){return function e(){_classCallCheck(this,e)}})();return(function(t){_inherits(r,e);var n=_createSuper(r);function r(){var e;_classCallCheck(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).connection=null,e}return _createClass(r,[{key:"init",value:function(e){this.connection=e}}]),r})()}t.b=i();var o=i(r.a)},function(e,t,n){"use strict";n.r(t),n.d(t,"CONNECTION_DROPPED_ERROR",function(){return r}),n.d(t,"OTHER_ERROR",function(){return i}),n.d(t,"PASSWORD_REQUIRED",function(){return o}),n.d(t,"SERVER_ERROR",function(){return a});var r="connection.droppedError",i="connection.otherError",o="connection.passwordRequired",a="connection.serverError"},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var r="signaling.peerMuted",i="signaling.peerVideoType"},function(e,t,n){(function(e,n){var r="[object Arguments]",i="[object Function]",o="[object GeneratorFunction]",a="[object Map]",s="[object Set]",c=/\w*$/,u=/^\[object .+?Constructor\]$/,d=/^(?:0|[1-9]\d*)$/,l={};l[r]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object DataView]"]=l["[object Boolean]"]=l["[object Date]"]=l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l[a]=l["[object Number]"]=l["[object Object]"]=l["[object RegExp]"]=l[s]=l["[object String]"]=l["[object Symbol]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l["[object Error]"]=l[i]=l["[object WeakMap]"]=!1;var h="object"==typeof e&&e&&e.Object===Object&&e,p="object"==typeof self&&self&&self.Object===Object&&self,f=h||p||Function("return this")(),m=t&&!t.nodeType&&t,v=m&&"object"==typeof n&&n&&!n.nodeType&&n,g=v&&v.exports===m;function _(e,t){return e.set(t[0],t[1]),e}function y(e,t){return e.add(t),e}function S(e,t,n,r){var i=-1,o=e?e.length:0;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function E(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function b(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function C(e,t){return function(n){return e(t(n))}}function T(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var R,A=Array.prototype,k=Function.prototype,I=Object.prototype,w=f["__core-js_shared__"],P=(R=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||""))?"Symbol(src)_1."+R:"",O=k.toString,D=I.hasOwnProperty,N=I.toString,M=RegExp("^"+O.call(D).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),L=g?f.Buffer:void 0,x=f.Symbol,F=f.Uint8Array,j=C(Object.getPrototypeOf,Object),H=Object.create,U=I.propertyIsEnumerable,J=A.splice,B=Object.getOwnPropertySymbols,G=L?L.isBuffer:void 0,V=C(Object.keys,Object),q=ve(f,"DataView"),K=ve(f,"Map"),z=ve(f,"Promise"),W=ve(f,"Set"),$=ve(f,"WeakMap"),Q=ve(Object,"create"),X=Ee(q),Y=Ee(K),Z=Ee(z),ee=Ee(W),te=Ee($),ne=x?x.prototype:void 0,re=ne?ne.valueOf:void 0;function ie(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function oe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ae(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function se(e){this.__data__=new oe(e)}function ce(e,t){var n=Ce(e)||(function(e){return(function(e){return(function(e){return!!e&&"object"==typeof e})(e)&&Te(e)})(e)&&D.call(e,"callee")&&(!U.call(e,"callee")||N.call(e)==r)})(e)?(function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r})(e.length,String):[],i=n.length,o=!!i;for(var a in e)!t&&!D.call(e,a)||o&&("length"==a||ye(a,i))||n.push(a);return n}function ue(e,t,n){var r=e[t];D.call(e,t)&&be(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function de(e,t){for(var n=e.length;n--;)if(be(e[n][0],t))return n;return-1}function le(e,t,n,u,d,h,p){var f;if(u&&(f=h?u(e,d,h,p):u(e)),void 0!==f)return f;if(!ke(e))return e;var m=Ce(e);if(m){if(f=(function(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&D.call(e,"index")&&(n.index=e.index,n.input=e.input),n})(e),!t)return(function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t})(e,f)}else{var v=_e(e),g=v==i||v==o;if(Re(e))return(function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n})(e,t);if("[object Object]"==v||v==r||g&&!h){if(E(e))return h?e:{};if(f=(function(e){return"function"!=typeof e.constructor||Se(e)?{}:ke(t=j(e))?H(t):{};var t})(g?{}:e),!t)return(function(e,t){return fe(e,ge(e),t)})(e,(function(e,t){return e&&fe(t,Ie(t),e)})(f,e))}else{if(!l[v])return h?e:{};f=(function(e,t,n,r){var i,o=e.constructor;switch(t){case"[object ArrayBuffer]":return pe(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return(function(e,t){var n=r?pe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)})(e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return(function(e,t){var n=r?pe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)})(e);case a:return(function(e,t,n){return S(r?n(b(e),!0):b(e),_,new e.constructor)})(e,0,n);case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return(function(e){var t=new e.constructor(e.source,c.exec(e));return t.lastIndex=e.lastIndex,t})(e);case s:return(function(e,t,n){return S(r?n(T(e),!0):T(e),y,new e.constructor)})(e,0,n);case"[object Symbol]":return i=e,re?Object(re.call(i)):{}}})(e,v,le,t)}}p||(p=new se);var C=p.get(e);if(C)return C;if(p.set(e,f),!m)var R=n?(function(e){return(function(e,t,n){var r=Ie(e);return Ce(e)?r:(function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e})(r,n(e))})(e,0,ge)})(e):Ie(e);return(function(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n););})(R||e,function(r,i){R&&(r=e[i=r]),ue(f,i,le(r,t,n,u,i,e,p))}),f}function he(e){return!(!ke(e)||(t=e,P&&P in t))&&(Ae(e)||E(e)?M:u).test(Ee(e));var t}function pe(e){var t=new e.constructor(e.byteLength);return new F(t).set(new F(e)),t}function fe(e,t,n,r){n||(n={});for(var i=-1,o=t.length;++i<o;){var a=t[i],s=r?r(n[a],e[a],a,n,e):void 0;ue(n,a,void 0===s?e[a]:s)}return n}function me(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function ve(e,t){var n=(function(e,t){return null==e?void 0:e[t]})(e,t);return he(n)?n:void 0}ie.prototype.clear=function(){this.__data__=Q?Q(null):{}},ie.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ie.prototype.get=function(e){var t=this.__data__;if(Q){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return D.call(t,e)?t[e]:void 0},ie.prototype.has=function(e){var t=this.__data__;return Q?void 0!==t[e]:D.call(t,e)},ie.prototype.set=function(e,t){return this.__data__[e]=Q&&void 0===t?"__lodash_hash_undefined__":t,this},oe.prototype.clear=function(){this.__data__=[]},oe.prototype.delete=function(e){var t=this.__data__,n=de(t,e);return!(n<0||(n==t.length-1?t.pop():J.call(t,n,1),0))},oe.prototype.get=function(e){var t=this.__data__,n=de(t,e);return n<0?void 0:t[n][1]},oe.prototype.has=function(e){return de(this.__data__,e)>-1},oe.prototype.set=function(e,t){var n=this.__data__,r=de(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},ae.prototype.clear=function(){this.__data__={hash:new ie,map:new(K||oe),string:new ie}},ae.prototype.delete=function(e){return me(this,e).delete(e)},ae.prototype.get=function(e){return me(this,e).get(e)},ae.prototype.has=function(e){return me(this,e).has(e)},ae.prototype.set=function(e,t){return me(this,e).set(e,t),this},se.prototype.clear=function(){this.__data__=new oe},se.prototype.delete=function(e){return this.__data__.delete(e)},se.prototype.get=function(e){return this.__data__.get(e)},se.prototype.has=function(e){return this.__data__.has(e)},se.prototype.set=function(e,t){var n=this.__data__;if(n instanceof oe){var r=n.__data__;if(!K||r.length<199)return r.push([e,t]),this;n=this.__data__=new ae(r)}return n.set(e,t),this};var ge=B?C(B,Object):function(){return[]},_e=function(e){return N.call(e)};function ye(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||d.test(e))&&e>-1&&e%1==0&&e<t}function Se(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||I)}function Ee(e){if(null!=e){try{return O.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function be(e,t){return e===t||e!=e&&t!=t}(q&&"[object DataView]"!=_e(new q(new ArrayBuffer(1)))||K&&_e(new K)!=a||z&&"[object Promise]"!=_e(z.resolve())||W&&_e(new W)!=s||$&&"[object WeakMap]"!=_e(new $))&&(_e=function(e){var t=N.call(e),n="[object Object]"==t?e.constructor:void 0,r=n?Ee(n):void 0;if(r)switch(r){case X:return"[object DataView]";case Y:return a;case Z:return"[object Promise]";case ee:return s;case te:return"[object WeakMap]"}return t});var Ce=Array.isArray;function Te(e){return null!=e&&(function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991})(e.length)&&!Ae(e)}var Re=G||function(){return!1};function Ae(e){var t=ke(e)?N.call(e):"";return t==i||t==o}function ke(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ie(e){return Te(e)?ce(e):(function(e){if(!Se(e))return V(e);var t=[];for(var n in Object(e))D.call(e,n)&&"constructor"!=n&&t.push(n);return t})(e)}n.exports=function(e){return le(e,!0,!0)}}).call(this,n(44),n(79)(e))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return d});var r=n(4),i=n(2),o=(n(153),n(20)),a=n(94),s=n(96),c=n(97),u=Object(r.getLogger)(e),d=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,o=e.enableWebsocketResume,u=e.websocketKeepAlive,d=e.serviceUrl;return _classCallCheck(this,n),(r=t.call(this))._options={enableWebsocketResume:void 0===o||o,websocketKeepAlive:void 0===u?24e4:Number(u)},r._stropheConn=new i.Strophe.Connection(d),r._usesWebsocket=d.startsWith("ws:")||d.startsWith("wss:"),r._stropheConn.maxRetries=3,r._lastSuccessTracker=new s.a,r._lastSuccessTracker.startTracking(_assertThisInitialized(r),r._stropheConn),r._resumeTask=new a.a(r._stropheConn),r._deferredIQs=[],r.addConnectionPlugin("ping",new c.a({onPingThresholdExceeded:function(){return r._onPingErrorThresholdExceeded()}})),r}return _createClass(n,null,[{key:"Events",get:function(){return{CONN_STATUS_CHANGED:"CONN_STATUS_CHANGED"}}},{key:"Status",get:function(){return i.Strophe.Status}}]),_createClass(n,[{key:"addConnectionPlugin",value:function(e,t){this[e]=t,t.init(this)}},{key:"addHandler",value:function(){var e;(e=this._stropheConn).addHandler.apply(e,arguments)}},{key:"attach",value:function(e,t,n,r){for(var i,o=arguments.length,a=new Array(o>4?o-4:0),s=4;s<o;s++)a[s-4]=arguments[s];(i=this._stropheConn).attach.apply(i,[e,t,n,this._stropheConnectionCb.bind(this,r)].concat(a))}},{key:"connect",value:function(e,t,n){for(var r,i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];(r=this._stropheConn).connect.apply(r,[e,t,this._stropheConnectionCb.bind(this,n)].concat(o))}},{key:"_stropheConnectionCb",value:function(e,t){this._status=t;for(var r=!1,o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];t===i.Strophe.Status.CONNECTED||t===i.Strophe.Status.ATTACHED?(this._maybeEnableStreamResume(),this._maybeStartWSKeepAlive(),this._processDeferredIQs(),this._resumeTask.cancel(),this.ping.startInterval(this.domain)):t===i.Strophe.Status.DISCONNECTED&&(this.ping.stopInterval(),(r=this._tryResumingConnection())||clearTimeout(this._wsKeepAlive)),r||(e.apply(void 0,[t].concat(a)),this.eventEmitter.emit(n.Events.CONN_STATUS_CHANGED,t))}},{key:"_clearDeferredIQs",value:function(){for(var e,t=_createForOfIteratorHelperLoose(this._deferredIQs);!(e=t()).done;){e.value.reject(new Error("disconnect"))}this._deferredIQs=[]}},{key:"closeWebsocket",value:function(){this._stropheConn&&this._stropheConn._proto&&(this._stropheConn._proto._closeSocket(),this._stropheConn._proto._onClose(null))}},{key:"disconnect",value:function(){var e;this._resumeTask.cancel(),clearTimeout(this._wsKeepAlive),this._clearDeferredIQs(),(e=this._stropheConn).disconnect.apply(e,arguments)}},{key:"flush",value:function(){var e;(e=this._stropheConn).flush.apply(e,arguments)}},{key:"getTimeSinceLastSuccess",value:function(){return this._lastSuccessTracker.getTimeSinceLastSuccess()}},{key:"_maybeEnableStreamResume",value:function(){if(this._options.enableWebsocketResume){var e=this._stropheConn.streamManagement;this.isUsingWebSocket?e?e.isSupported()?e.getResumeToken()||(u.info("Enabling XEP-0198 stream management"),e.enable(!0)):u.warn("Stream resume enabled, but XEP-0198 is not supported by the server"):u.warn("Stream resume enabled, but Strophe streamManagement plugin is not installed"):u.warn("Stream resume enabled, but WebSockets are not enabled")}}},{key:"_maybeStartWSKeepAlive",value:function(){var e=this,t=this._options.websocketKeepAlive;if(this._usesWebsocket&&t>0){this._wsKeepAlive||u.info("WebSocket keep alive interval: "+t+"ms"),clearTimeout(this._wsKeepAlive);var n=.2*t+.8*Math.random()*t;u.debug("Scheduling next WebSocket keep-alive in "+n+"ms"),this._wsKeepAlive=setTimeout(function(){var t=e.service.replace("wss://","https://").replace("ws://","http://");fetch(t).catch(function(e){u.error("Websocket Keep alive failed for url: "+t,{error:e})}).then(function(){return e._maybeStartWSKeepAlive()})},n)}}},{key:"_processDeferredIQs",value:function(){for(var e,t=this,n=function(e){if(e.iq){clearTimeout(e.timeout);var n=Date.now()-e.start;t.sendIQ(e.iq,function(t){return e.resolve(t)},function(t){return e.reject(t)},n)}},r=_createForOfIteratorHelperLoose(this._deferredIQs);!(e=r()).done;){n(e.value)}this._deferredIQs=[]}},{key:"send",value:function(e){if(!this.connected)throw new Error("Not connected");this._stropheConn.send(e)}},{key:"sendIQ",value:function(e,t,n,r){if(this.connected)return this._stropheConn.sendIQ(e,t,n,r);n("Not connected")}},{key:"sendIQ2",value:function(e,t){var n=this,r=t.timeout;return new Promise(function(t,i){if(n.connected)n.sendIQ(e,function(e){return t(e)},function(e){return i(e)},r);else{var o={iq:e,resolve:t,reject:i,start:Date.now(),timeout:setTimeout(function(){o.iq=void 0,i(void 0)},r)};n._deferredIQs.push(o)}})}},{key:"_onPingErrorThresholdExceeded",value:function(){this.isUsingWebSocket&&(u.warn("Ping error threshold exceeded - killing the WebSocket"),this.closeWebsocket())}},{key:"sendPresence",value:function(e,t,n,r){this.connected?this._stropheConn.sendPresence(e,t,n,r):n("Not connected")}},{key:"sendUnavailableBeacon",value:function(){if(!navigator.sendBeacon||this._stropheConn.disconnecting||!this._stropheConn.connected)return!1;this._stropheConn._changeConnectStatus(i.Strophe.Status.DISCONNECTING),this._stropheConn.disconnecting=!0;var e=this._stropheConn._proto._buildBody().attrs({type:"terminate"}),t=Object(i.$pres)({xmlns:i.Strophe.NS.CLIENT,type:"unavailable"});e.cnode(t.tree());var n=navigator.sendBeacon(-1===this.service.indexOf("https://")?"https:"+this.service:this.service,i.Strophe.serialize(e.tree()));return u.info("Successfully send unavailable beacon "+n),this._stropheConn._proto._abortAllRequests(),this._stropheConn._doDisconnect(),!0}},{key:"_tryResumingConnection",value:function(){var e=this._stropheConn.streamManagement;return!(!e||!e.getResumeToken()||(this._resumeTask.schedule(),0))}},{key:"connected",get:function(){var e=this._stropheConn&&this._stropheConn._proto&&this._stropheConn._proto.socket;return(this._status===i.Strophe.Status.CONNECTED||this._status===i.Strophe.Status.ATTACHED)&&(!this.isUsingWebSocket||e&&e.readyState===WebSocket.OPEN)}},{key:"disco",get:function(){return this._stropheConn.disco}},{key:"disconnecting",get:function(){return!0===this._stropheConn.disconnecting}},{key:"domain",get:function(){return this._stropheConn.domain}},{key:"isUsingWebSocket",get:function(){return this._usesWebsocket}},{key:"jid",get:function(){return this._stropheConn.jid}},{key:"lastResponseHeaders",get:function(){return this._stropheConn._proto&&this._stropheConn._proto.lastResponseHeaders}},{key:"logger",get:function(){return this._stropheConn.logger}},{key:"options",get:function(){return this._stropheConn.options}},{key:"service",get:function(){return this._stropheConn.service}},{key:"status",get:function(){return this._status}}]),n})(o.a)}).call(this,"modules/xmpp/XmppConnection.js")},function(e,t){e.exports={ENVIRONMENT:"environment",USER:"user"}},function(e,t){var n;n=(function(){return this})();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(e,n){var r="[object Arguments]",i="[object Map]",o="[object Object]",a="[object Set]",s=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u[r]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u["[object Function]"]=u[i]=u["[object Number]"]=u[o]=u["[object RegExp]"]=u[a]=u["[object String]"]=u["[object WeakMap]"]=!1;var d="object"==typeof e&&e&&e.Object===Object&&e,l="object"==typeof self&&self&&self.Object===Object&&self,h=d||l||Function("return this")(),p=t&&!t.nodeType&&t,f=p&&"object"==typeof n&&n&&!n.nodeType&&n,m=f&&f.exports===p,v=m&&d.process,g=(function(){try{return v&&v.binding&&v.binding("util")}catch(e){}})(),_=g&&g.isTypedArray;function y(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function S(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function E(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var b,C,T,R=Array.prototype,A=Function.prototype,k=Object.prototype,I=h["__core-js_shared__"],w=A.toString,P=k.hasOwnProperty,O=(b=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+b:"",D=k.toString,N=RegExp("^"+w.call(P).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),M=m?h.Buffer:void 0,L=h.Symbol,x=h.Uint8Array,F=k.propertyIsEnumerable,j=R.splice,H=L?L.toStringTag:void 0,U=Object.getOwnPropertySymbols,J=M?M.isBuffer:void 0,B=(C=Object.keys,T=Object,function(e){return C(T(e))}),G=ge(h,"DataView"),V=ge(h,"Map"),q=ge(h,"Promise"),K=ge(h,"Set"),z=ge(h,"WeakMap"),W=ge(Object,"create"),$=Ee(G),Q=Ee(V),X=Ee(q),Y=Ee(K),Z=Ee(z),ee=L?L.prototype:void 0,te=ee?ee.valueOf:void 0;function ne(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function re(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ie(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function oe(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ie;++t<n;)this.add(e[t])}function ae(e){var t=this.__data__=new re(e);this.size=t.size}function se(e,t){var n=Te(e),r=!n&&Ce(e),i=!n&&!r&&Re(e),o=!n&&!r&&!i&&Pe(e),a=n||r||i||o,s=a?(function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r})(e.length,String):[],c=s.length;for(var u in e)!t&&!P.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Se(u,c))||s.push(u);return s}function ce(e,t){for(var n=e.length;n--;)if(be(e[n][0],t))return n;return-1}function ue(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":H&&H in Object(e)?(function(e){var t=P.call(e,H),n=e[H];try{e[H]=void 0}catch(e){}var r=D.call(e);return t?e[H]=n:delete e[H],r})(e):(function(e){return D.call(e)})(e)}function de(e){return we(e)&&ue(e)==r}function le(e,t,n,s,c){return e===t||(null==e||null==t||!we(e)&&!we(t)?e!=e&&t!=t:(function(e,t,n,s,c,u){var d=Te(e),l=Te(t),h=d?"[object Array]":ye(e),p=l?"[object Array]":ye(t),f=(h=h==r?o:h)==o,m=(p=p==r?o:p)==o,v=h==p;if(v&&Re(e)){if(!Re(t))return!1;d=!0,f=!1}if(v&&!f)return u||(u=new ae),d||Pe(e)?fe(e,t,n,s,c,u):(function(e,t,n,r,o,s,c){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new x(e),new x(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return be(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case i:var u=S;case a:var d=1&r;if(u||(u=E),e.size!=t.size&&!d)return!1;var l=c.get(e);if(l)return l==t;r|=2,c.set(e,t);var h=fe(u(e),u(t),r,o,s,c);return c.delete(e),h;case"[object Symbol]":if(te)return te.call(e)==te.call(t)}return!1})(e,t,h,n,s,c,u);if(!(1&n)){var g=f&&P.call(e,"__wrapped__"),_=m&&P.call(t,"__wrapped__");if(g||_){var y=g?e.value():e,b=_?t.value():t;return u||(u=new ae),c(y,b,n,s,u)}}return!!v&&(u||(u=new ae),(function(e,t,n,r,i,o){var a=1&n,s=me(e),c=s.length;if(c!=me(t).length&&!a)return!1;for(var u=c;u--;){var d=s[u];if(!(a?d in t:P.call(t,d)))return!1}var l=o.get(e);if(l&&o.get(t))return l==t;var h=!0;o.set(e,t),o.set(t,e);for(var p=a;++u<c;){var f=e[d=s[u]],m=t[d];if(r)var v=a?r(m,f,d,t,e,o):r(f,m,d,e,t,o);if(!(void 0===v?f===m||i(f,m,n,r,o):v)){h=!1;break}p||(p="constructor"==d)}if(h&&!p){var g=e.constructor,_=t.constructor;g==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof g&&g instanceof g&&"function"==typeof _&&_ instanceof _||(h=!1)}return o.delete(e),o.delete(t),h})(e,t,n,s,c,u))})(e,t,n,s,le,c))}function he(e){return!(!Ie(e)||(function(e){return!!O&&O in e})(e))&&(Ae(e)?N:s).test(Ee(e))}function pe(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||k))return B(e);var t,n,r=[];for(var i in Object(e))P.call(e,i)&&"constructor"!=i&&r.push(i);return r}function fe(e,t,n,r,i,o){var a=1&n,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var u=o.get(e);if(u&&o.get(t))return u==t;var d=-1,l=!0,h=2&n?new oe:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var p=e[d],f=t[d];if(r)var m=a?r(f,p,d,t,e,o):r(p,f,d,e,t,o);if(void 0!==m){if(m)continue;l=!1;break}if(h){if(!y(t,function(e,t){if(a=t,!h.has(a)&&(p===e||i(p,e,n,r,o)))return h.push(t);var a})){l=!1;break}}else if(p!==f&&!i(p,f,n,r,o)){l=!1;break}}return o.delete(e),o.delete(t),l}function me(e){return(function(e,t,n){var r=Oe(e);return Te(e)?r:(function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e})(r,n(e))})(e,0,_e)}function ve(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function ge(e,t){var n=(function(e,t){return null==e?void 0:e[t]})(e,t);return he(n)?n:void 0}ne.prototype.clear=function(){this.__data__=W?W(null):{},this.size=0},ne.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ne.prototype.get=function(e){var t=this.__data__;if(W){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return P.call(t,e)?t[e]:void 0},ne.prototype.has=function(e){var t=this.__data__;return W?void 0!==t[e]:P.call(t,e)},ne.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=W&&void 0===t?"__lodash_hash_undefined__":t,this},re.prototype.clear=function(){this.__data__=[],this.size=0},re.prototype.delete=function(e){var t=this.__data__,n=ce(t,e);return!(n<0||(n==t.length-1?t.pop():j.call(t,n,1),--this.size,0))},re.prototype.get=function(e){var t=this.__data__,n=ce(t,e);return n<0?void 0:t[n][1]},re.prototype.has=function(e){return ce(this.__data__,e)>-1},re.prototype.set=function(e,t){var n=this.__data__,r=ce(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},ie.prototype.clear=function(){this.size=0,this.__data__={hash:new ne,map:new(V||re),string:new ne}},ie.prototype.delete=function(e){var t=ve(this,e).delete(e);return this.size-=t?1:0,t},ie.prototype.get=function(e){return ve(this,e).get(e)},ie.prototype.has=function(e){return ve(this,e).has(e)},ie.prototype.set=function(e,t){var n=ve(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},oe.prototype.add=oe.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},oe.prototype.has=function(e){return this.__data__.has(e)},ae.prototype.clear=function(){this.__data__=new re,this.size=0},ae.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ae.prototype.get=function(e){return this.__data__.get(e)},ae.prototype.has=function(e){return this.__data__.has(e)},ae.prototype.set=function(e,t){var n=this.__data__;if(n instanceof re){var r=n.__data__;if(!V||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ie(r)}return n.set(e,t),this.size=n.size,this};var _e=U?function(e){return null==e?[]:(e=Object(e),(function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a)&&(o[i++]=a)}return o})(U(e),function(t){return F.call(e,t)}))}:function(){return[]},ye=ue;function Se(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||c.test(e))&&e>-1&&e%1==0&&e<t}function Ee(e){if(null!=e){try{return w.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function be(e,t){return e===t||e!=e&&t!=t}(G&&"[object DataView]"!=ye(new G(new ArrayBuffer(1)))||V&&ye(new V)!=i||q&&"[object Promise]"!=ye(q.resolve())||K&&ye(new K)!=a||z&&"[object WeakMap]"!=ye(new z))&&(ye=function(e){var t=ue(e),n=t==o?e.constructor:void 0,r=n?Ee(n):"";if(r)switch(r){case $:return"[object DataView]";case Q:return i;case X:return"[object Promise]";case Y:return a;case Z:return"[object WeakMap]"}return t});var Ce=de((function(){return arguments})())?de:function(e){return we(e)&&P.call(e,"callee")&&!F.call(e,"callee")},Te=Array.isArray,Re=J||function(){return!1};function Ae(e){if(!Ie(e))return!1;var t=ue(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ke(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Ie(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function we(e){return null!=e&&"object"==typeof e}var Pe=_?(function(e){return function(t){return e(t)}})(_):function(e){return we(e)&&ke(e.length)&&!!u[ue(e)]};function Oe(e){return null!=(t=e)&&ke(t.length)&&!Ae(t)?se(e):pe(e);var t}n.exports=function(e,t){return le(e,t)}}).call(this,n(44),n(79)(e))},function(e,t,n){"use strict";(function(e){var r=n(18),i=n(14),o=n(3);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(4).getLogger(e),c=null,u={obtainStream:null,init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;this.options=e,c=t,this.obtainStream=this._createObtainStreamMethod(),this.obtainStream||s.info("Desktop sharing disabled")},_createObtainStreamMethod:function(){return o.a.isNWJS()?function(e,t,n){window.JitsiMeetNW.obtainDesktopStream(t,function(e,t){var o;o=e&&"InvalidStateError"===e.name?new r.a(i.SCREENSHARING_USER_CANCELED):new r.a(e,t,["desktop"]),"function"==typeof n&&n(o)})}:o.a.isElectron()?this.obtainScreenOnElectron:o.a.supportsGetDisplayMedia()?this.obtainScreenFromGetDisplayMedia:(s.log("Screen sharing not supported on ",o.a.getName()),null)},isSupported:function(){return null!==this.obtainStream},obtainScreenOnElectron:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(window.JitsiMeetScreenObtainer&&window.JitsiMeetScreenObtainer.openDesktopPicker){var o=e.desktopSharingSources,s=e.gumOptions;window.JitsiMeetScreenObtainer.openDesktopPicker({desktopSharingSources:o||["screen","window"]},function(e,o){return(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{response:{},gumOptions:{}},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=e.response||{},s=o.streamId,u=o.streamType,d=o.screenShareAudio,l=o.error;if(s){var h=(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){a(e,t,n[t])})}return e})({desktopStream:s,screenShareAudio:d},e.gumOptions);c(["desktop"],h).then(function(e){return t({stream:e,sourceId:s,sourceType:u})},n)}else{if(""===s)return void n(new r.a(i.SCREENSHARING_USER_CANCELED));n(new r.a(i.SCREENSHARING_GENERIC_ERROR,l))}})({response:{streamId:e,streamType:o,screenShareAudio:arguments.length>2&&void 0!==arguments[2]&&arguments[2]},gumOptions:s},t,n)},function(e){return n(new r.a(i.ELECTRON_DESKTOP_PICKER_ERROR,e))})}else n(new r.a(i.ELECTRON_DESKTOP_PICKER_NOT_FOUND))},obtainScreenFromGetDisplayMedia:function(e,t,n){s.info("Using getDisplayMedia for screen sharing"),(navigator.getDisplayMedia?navigator.getDisplayMedia.bind(navigator):navigator.mediaDevices.getDisplayMedia.bind(navigator.mediaDevices))({video:!0,audio:!0}).then(function(n){var r;if(n&&n.getTracks()&&n.getTracks().length>0){var i=n.getVideoTracks()[0];i&&(r=i.applyConstraints(e.trackOptions))}else r=Promise.resolve();r.then(function(){return t({stream:n,sourceId:n.id})})}).catch(function(){return n(new r.a(i.SCREENSHARING_USER_CANCELED))})}};t.a=u}).call(this,"modules/RTC/ScreenObtainer.js")},function(e,t,n){var r=n(150),i={loadScript:function(e,t,n,i,o,a){var s=document,c=s.createElement("script"),u=s.getElementsByTagName("script")[0];if(c.async=t,i){var d=r();if(d){var l=d.src,h=l.substring(0,l.lastIndexOf("/")+1);l&&h&&(e=h+e)}}o&&(c.onload=o),a&&(c.onerror=a),c.src=e,n?u.parentNode.insertBefore(c,u):u.parentNode.appendChild(c)}};e.exports=i},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return m}),n.d(t,"b",function(){return v});var r=n(4),i=n(1),o=n(15),a=n(8),s=n(6),c=n.n(s),u=n(7),d=n(3),l=n(5);function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){p(e,t,n[t])})}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=Object(r.getLogger)(e),m={ACTIVE:"active",INACTIVE:"inactive",INTERRUPTED:"interrupted",RESTORING:"restoring"},v=(function(){function e(t,n,r){_classCallCheck(this,e),this.rtc=t,this.conference=n,this.trackTimers={},this.connStatusFromJvb={},this.outOfLastNTimeout="number"==typeof r.outOfLastNTimeout?r.outOfLastNTimeout:500,this.rtcMuteTimeout="number"==typeof r.rtcMuteTimeout?r.rtcMuteTimeout:1e4,this.rtcMutedTimestamp={},f.info("RtcMuteTimeout set to: "+this.rtcMuteTimeout),this.enteredLastNTimestamp=new Map,this.restoringTimers=new Map,this.connectionStatusMap=new Map}return _createClass(e,null,[{key:"_getNewStateForJvbMode",value:function(e,t,n,r,i){return e?r?m.ACTIVE:d.a.supportsVideoMuteOnConnInterrupted()?i?t?n?m.INTERRUPTED:m.RESTORING:m.INACTIVE:m.ACTIVE:t?m.ACTIVE:m.INACTIVE:m.INTERRUPTED}},{key:"_getNewStateForP2PMode",value:function(e,t){return d.a.supportsVideoMuteOnConnInterrupted()?e||!t?m.ACTIVE:m.INTERRUPTED:m.ACTIVE}}]),_createClass(e,[{key:"_getVideoFrozenTimeout",value:function(e){return this.rtc.isInLastN(e)?this.rtcMuteTimeout:this.outOfLastNTimeout}},{key:"init",value:function(){this._onEndpointConnStatusChanged=this.onEndpointConnStatusChanged.bind(this),this.rtc.addListener(c.a.ENDPOINT_CONN_STATUS_CHANGED,this._onEndpointConnStatusChanged),this._onP2PStatus=this.refreshConnectionStatusForAll.bind(this),this.conference.on(i.P2P_STATUS,this._onP2PStatus),this._onUserLeft=this.onUserLeft.bind(this),this.conference.on(i.USER_LEFT,this._onUserLeft),d.a.supportsVideoMuteOnConnInterrupted()&&(this._onTrackRtcMuted=this.onTrackRtcMuted.bind(this),this.rtc.addListener(c.a.REMOTE_TRACK_MUTE,this._onTrackRtcMuted),this._onTrackRtcUnmuted=this.onTrackRtcUnmuted.bind(this),this.rtc.addListener(c.a.REMOTE_TRACK_UNMUTE,this._onTrackRtcUnmuted),this._onRemoteTrackAdded=this.onRemoteTrackAdded.bind(this),this.conference.on(i.TRACK_ADDED,this._onRemoteTrackAdded),this._onRemoteTrackRemoved=this.onRemoteTrackRemoved.bind(this),this.conference.on(i.TRACK_REMOVED,this._onRemoteTrackRemoved),this._onSignallingMuteChanged=this.onSignallingMuteChanged.bind(this),this._onTrackVideoTypeChanged=this.onTrackVideoTypeChanged.bind(this)),this._onLastNChanged=this._onLastNChanged.bind(this),this.conference.on(i.LAST_N_ENDPOINTS_CHANGED,this._onLastNChanged),this._onLastNValueChanged=this.refreshConnectionStatusForAll.bind(this),this.rtc.on(c.a.LASTN_VALUE_CHANGED,this._onLastNValueChanged)}},{key:"dispose",value:function(){this.rtc.removeListener(c.a.ENDPOINT_CONN_STATUS_CHANGED,this._onEndpointConnStatusChanged),d.a.supportsVideoMuteOnConnInterrupted()&&(this.rtc.removeListener(c.a.REMOTE_TRACK_MUTE,this._onTrackRtcMuted),this.rtc.removeListener(c.a.REMOTE_TRACK_UNMUTE,this._onTrackRtcUnmuted),this.conference.off(i.TRACK_ADDED,this._onRemoteTrackAdded),this.conference.off(i.TRACK_REMOVED,this._onRemoteTrackRemoved)),this.conference.off(i.LAST_N_ENDPOINTS_CHANGED,this._onLastNChanged),this.rtc.removeListener(c.a.LASTN_VALUE_CHANGED,this._onLastNValueChanged),this.conference.off(i.P2P_STATUS,this._onP2PStatus),this.conference.off(i.USER_LEFT,this._onUserLeft);for(var e=0,t=Object.keys(this.trackTimers);e<t.length;e++){var n=t[e];this.clearTimeout(n),this.clearRtcMutedTimestamp(n)}for(var r in this.connectionStatusMap)this.connectionStatusMap.hasOwnProperty(r)&&this.onUserLeft(r);this.connStatusFromJvb={}}},{key:"onEndpointConnStatusChanged",value:function(e,t){f.debug("Detector RTCEvents.ENDPOINT_CONN_STATUS_CHANGED("+Date.now()+"): "+e+": "+t),e!==this.conference.myUserId()&&(this.connStatusFromJvb[e]=t,this.figureOutConnectionStatus(e))}},{key:"_changeConnectionStatus",value:function(e,t){if(e.getConnectionStatus()!==t){var n=e.getId();e._setConnectionStatus(t),f.debug("Emit endpoint conn status("+Date.now()+") "+n+": "+t),l.a.sendLog(JSON.stringify({id:"peer.conn.status",participant:n,status:t})),this.conference.eventEmitter.emit(i.PARTICIPANT_CONN_STATUS_CHANGED,n,t)}}},{key:"clearTimeout",value:function(e){this.trackTimers[e]&&(window.clearTimeout(this.trackTimers[e]),this.trackTimers[e]=null)}},{key:"clearRtcMutedTimestamp",value:function(e){this.rtcMutedTimestamp[e]=null}},{key:"onRemoteTrackAdded",value:function(e){var t=this;e.isLocal()||e.getType()!==a.c||(f.debug("Detector on remote track added for: "+e.getParticipantId()),e.on(o.TRACK_MUTE_CHANGED,this._onSignallingMuteChanged),e.on(o.TRACK_VIDEOTYPE_CHANGED,function(n){return t._onTrackVideoTypeChanged(e,n)}))}},{key:"onRemoteTrackRemoved",value:function(e){if(!e.isLocal()&&e.getType()===a.c){var t=e.getParticipantId();f.debug("Detector on remote track removed: "+t),e.off(o.TRACK_MUTE_CHANGED,this._onSignallingMuteChanged),this.clearTimeout(t),this.clearRtcMutedTimestamp(t),this.figureOutConnectionStatus(t)}}},{key:"isVideoTrackFrozen",value:function(e){if(!d.a.supportsVideoMuteOnConnInterrupted())return!1;var t=e.getId(),n=e.hasAnyVideoTrackWebRTCMuted(),r=this.rtcMutedTimestamp[t],i=this._getVideoFrozenTimeout(t);return n&&"number"==typeof r&&Date.now()-r>=i}},{key:"refreshConnectionStatusForAll",value:function(){for(var e,t=_createForOfIteratorHelperLoose(this.conference.getParticipants());!(e=t()).done;){var n=e.value;this.figureOutConnectionStatus(n.getId())}}},{key:"figureOutConnectionStatus",value:function(t){var n=this.conference.getParticipantById(t);if(n){var r=this.conference.isP2PActive(),i=this._isRestoringTimedout(t),o=0===this.rtc.getLastN(),s=n.isVideoMuted()||o,c=this.isVideoTrackFrozen(n),u=this.rtc.isInLastN(t),d=this.connStatusFromJvb[t];"boolean"!=typeof d&&(f.debug("Assuming connection active by JVB - no notification"),d=!0);var l=r?e._getNewStateForP2PMode(s,c):e._getNewStateForJvbMode(d,u,i,s,c);l!==m.RESTORING&&this._clearRestoringTimer(t),f.debug("Figure out conn status for "+t+", is video muted: "+s+" is active(jvb): "+d+" video track frozen: "+c+" p2p mode: "+r+" is in last N: "+u+" currentStatus => newStatus: "+n.getConnectionStatus()+" => "+l);var p=this.connectionStatusMap[t]||{};if(!("p2p"in p&&"connectionStatus"in p&&p.p2p===r&&p.connectionStatus===l)){var v=Date.now();if(this.maybeSendParticipantConnectionStatusEvent(t,v),this.connectionStatusMap[t]=h({},p,{connectionStatus:l,p2p:r,startedMs:v}),!("videoType"in this.connectionStatusMap[t])){var g=n.getTracksByMediaType(a.c);Array.isArray(g)&&0!==g.length&&(this.connectionStatusMap[t].videoType=g[0].videoType)}}this._changeConnectionStatus(n,l)}else f.debug("figure out conn status - no participant for: "+t)}},{key:"maybeSendParticipantConnectionStatusEvent",value:function(e,t){var n=this.connectionStatusMap[e];n&&"startedMs"in n&&"videoType"in n&&"connectionStatus"in n&&"p2p"in n&&(n.value=t-n.startedMs,l.a.sendAnalytics(Object(u.J)(n)))}},{key:"_onLastNChanged",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Date.now();f.debug("leaving/entering lastN",e,t,n);for(var r,i=_createForOfIteratorHelperLoose(e);!(r=i()).done;){var o=r.value;this.enteredLastNTimestamp.delete(o),this._clearRestoringTimer(o),this.figureOutConnectionStatus(o)}for(var a,s=_createForOfIteratorHelperLoose(t);!(a=s()).done;){var c=a.value;this.enteredLastNTimestamp.set(c,n),this.figureOutConnectionStatus(c)}}},{key:"_clearRestoringTimer",value:function(e){var t=this.restoringTimers.get(e);t&&(clearTimeout(t),this.restoringTimers.delete(e))}},{key:"_isRestoringTimedout",value:function(e){var t=this,n=this.enteredLastNTimestamp.get(e);return!!(n&&Date.now()-n>=1e4)||(this.restoringTimers.get(e)||this.restoringTimers.set(e,setTimeout(function(){return t.figureOutConnectionStatus(e)},1e4)),!1)}},{key:"onUserLeft",value:function(e){this.maybeSendParticipantConnectionStatusEvent(e,Date.now()),delete this.connectionStatusMap[e]}},{key:"onTrackRtcMuted",value:function(e){var t=this,n=e.getParticipantId(),r=this.conference.getParticipantById(n);if(f.debug("Detector track RTC muted: "+n,Date.now()),r){if(this.rtcMutedTimestamp[n]=Date.now(),!r.isVideoMuted()){this.clearTimeout(n);var i=this._getVideoFrozenTimeout(n);this.trackTimers[n]=window.setTimeout(function(){f.debug("Set RTC mute timeout for: "+n+"                     of "+i+" ms"),t.clearTimeout(n),t.figureOutConnectionStatus(n)},i)}}else f.error("No participant for id: "+n)}},{key:"onTrackRtcUnmuted",value:function(e){var t=e.getParticipantId();f.debug("Detector track RTC unmuted: "+t,Date.now()),this.clearTimeout(t),this.clearRtcMutedTimestamp(t),this.figureOutConnectionStatus(t)}},{key:"onSignallingMuteChanged",value:function(e){var t=e.getParticipantId();f.debug("Detector on track signalling mute changed: "+t,e.isMuted()),this.figureOutConnectionStatus(t)}},{key:"onTrackVideoTypeChanged",value:function(e,t){var n=e.getParticipantId(),r=Date.now();this.maybeSendParticipantConnectionStatusEvent(n,r),this.connectionStatusMap[n]=h({},this.connectionStatusMap[n]||{},{videoType:t,startedMs:r})}}]),e})()}).call(this,"modules/connectivity/ParticipantConnectionStatus.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var r=n(4),i=n(20),o="NETWORK_INFO_CHANGED",a=Object(r.getLogger)(e),s=new((function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this))._current={isOnline:!0},e}return _createClass(n,[{key:"updateNetworkInfo",value:function(e){var t=e.isOnline;a.debug("updateNetworkInfo",{isOnline:t}),this._current={isOnline:!0===t},this.eventEmitter.emit(o,this._current)}},{key:"isOnline",value:function(){return!0===this._current.isOnline}}]),n})(i.a));t.b=s}).call(this,"modules/connectivity/NetworkInfo.js")},function(e,t,n){"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},r.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},r.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach(function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)}),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(function(e){return parseInt(e,10)})}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},r.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},r.getCryptoParameters=function(e,t){return r.matchPrefix(e+t,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(e,t){var n=r.matchPrefix(e+t,"a=ice-ufrag:")[0],i=r.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&i?{usernameFragment:n.substr(12),password:i.substr(10)}:null},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e)[0].split(" "),i=3;i<n.length;i++){var o=n[i],a=r.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){var s=r.parseRtpMap(a),c=r.matchPrefix(e,"a=fmtp:"+o+" ");switch(s.parameters=c.length?r.parseFmtp(c[0]):{},s.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(r.parseRtcpFb),t.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(s.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(r.parseExtmap(e))}),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)});var i=0;return t.codecs.forEach(function(e){e.maxptime>i&&(i=e.maxptime)}),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach(function(e){n+=r.writeExtmap(e)}),n},r.parseRtpEncodingParameters=function(e){var t,n=[],i=r.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),a=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),c=s.length>0&&s[0].ssrc,u=r.matchPrefix(e,"a=ssrc-group:FID").map(function(e){return e.substr(17).split(" ").map(function(e){return parseInt(e,10)})});u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),i.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(r.rtx={ssrc:t}),n.push(r),o&&((r=JSON.parse(JSON.stringify(r))).fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},n.push(r))}}),0===n.length&&c&&n.push({ssrc:c});var d=r.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substr(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substr(5),10)*.95-16e3:void 0,n.forEach(function(e){e.maxBitrate=d})),n},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var i=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=r.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},r.parseMsid=function(e){var t,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var i=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return i.length>0?{stream:(t=i[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t,n=r.parseMLine(e),i=r.matchPrefix(e,"a=max-message-size:");i.length>0&&(t=parseInt(i[0].substr(19),10)),isNaN(t)&&(t=65536);var o=r.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:n.fmt,maxMessageSize:t};if(r.matchPrefix(e,"a=sctpmap:").length>0){var a=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:t}}},r.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){var i=void 0!==t?t:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,i){var o=r.writeRtpDescription(e.kind,t);if(o+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var a="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),o},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},e.exports=r},function(e,t,n){"use strict";t.a={getFocusRecordingUpdate:function(e){var t=e&&e.getElementsByTagName("jibri-recording-status")[0];if(t)return{error:t.getAttribute("failure_reason"),initiator:t.getAttribute("initiator"),recordingMode:t.getAttribute("recording_mode"),sessionID:t.getAttribute("session_id"),status:t.getAttribute("status")}},getHiddenDomainUpdate:function(e){var t=e.getElementsByTagName("live-stream-view-url")[0],n=t&&t.textContent,r=e.getElementsByTagName("mode")[0],i=r&&r.textContent&&r.textContent.toLowerCase(),o=e.getElementsByTagName("session_id")[0];return{liveStreamViewURL:n,mode:i,sessionID:o&&o.textContent}},getSessionIdFromIq:function(e){var t=e&&e.getElementsByTagName("jibri")[0];return t&&t.getAttribute("session_id")},getSessionId:function(e){var t=e.getElementsByTagName("session_id")[0];return t&&t.textContent},isFromFocus:function(e){return e.getAttribute("from").includes("focus")}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return p});var r=n(4),i=n(73),o=n.n(i),a=n(1),s=n(6),c=n.n(s),u=n(3),d=n(93),l=n(56),h=Object(r.getLogger)(e),p=(function(){function e(t){var n=this;_classCallCheck(this,e),this.conference=t,this._conferenceJoined=!1,this._enabled=!1,this._initialized=!1,this._e2eeCtx=new d.a({salt:t.getName()}),this._olmAdapter=new l.a(t),this._ratchetKey=o()(this._ratchetKeyImpl,5e3),this._rotateKey=o()(this._rotateKeyImpl,5e3),this.conference.on(a.USER_JOINED,this._onParticipantJoined.bind(this)),this.conference.on(a.USER_LEFT,this._onParticipantLeft.bind(this)),this.conference.on(a.CONFERENCE_JOINED,function(){n._conferenceJoined=!0}),this.conference.on(a._MEDIA_SESSION_STARTED,this._onMediaSessionStarted.bind(this)),this.conference.on(a.TRACK_ADDED,function(e){return e.isLocal()&&n._onLocalTrackAdded(e)}),this.conference.rtc.on(c.a.REMOTE_TRACK_ADDED,function(e,t){return n._setupReceiverE2EEForTrack(t,e)}),this.conference.on(a.TRACK_MUTE_CHANGED,this._trackMuteChanged.bind(this)),this._olmAdapter.on(l.a.events.PARTICIPANT_E2EE_CHANNEL_READY,this._onParticipantE2EEChannelReady.bind(this)),this._olmAdapter.on(l.a.events.PARTICIPANT_KEY_UPDATED,this._onParticipantKeyUpdated.bind(this))}return _createClass(e,[{key:"isEnabled",value:function(){return this._enabled}},{key:"setEnabled",value:function(e){var t=this;if(e!==this._enabled){this._enabled=e,!this._initialized&&e&&(this.conference._restartMediaSessions(),this._initialized=!0);var n=!!e&&this._generateKey();this._olmAdapter.updateKey(n).then(function(e){t._e2eeCtx.setKey(t.conference.myUserId(),n,e)})}}},{key:"_generateKey",value:function(){return window.crypto.getRandomValues(new Uint8Array(32))}},{key:"_onLocalTrackAdded",value:function(e){for(var t,n=_createForOfIteratorHelperLoose(this.conference._getMediaSessions());!(t=n()).done;){var r=t.value;this._setupSenderE2EEForTrack(r,e)}}},{key:"_onMediaSessionStarted",value:function(e){for(var t,n=_createForOfIteratorHelperLoose(this.conference.getLocalTracks());!(t=n()).done;){var r=t.value;this._setupSenderE2EEForTrack(e,r)}}},{key:"_onParticipantJoined",value:function(e){h.debug("Participant "+e+" joined"),this._conferenceJoined&&this._enabled&&this._ratchetKey()}},{key:"_onParticipantLeft",value:function(e){h.debug("Participant "+e+" left"),this._e2eeCtx.cleanup(e),this._enabled&&this._rotateKey()}},{key:"_onParticipantE2EEChannelReady",value:function(e){h.debug("E2EE channel with participant "+e+" is ready")}},{key:"_onParticipantKeyUpdated",value:function(e,t,n){h.debug("Participant "+e+" updated their key"),this._e2eeCtx.setKey(e,t,n)}},{key:"_ratchetKeyImpl",value:function(){return _regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(h.debug("Ratchetting key"),this._rotateKey()));case 1:case"end":return e.stop()}},null,this,null,Promise)}},{key:"_rotateKeyImpl",value:function(){var e,t;return _regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return h.debug("Rotating key"),e=this._generateKey(),n.next=4,_regeneratorRuntime.awrap(this._olmAdapter.updateKey(e));case 4:t=n.sent,this._e2eeCtx.setKey(this.conference.myUserId(),e,t);case 6:case"end":return n.stop()}},null,this,null,Promise)}},{key:"_setupReceiverE2EEForTrack",value:function(e,t){if(this._enabled){var n=e.findReceiverForTrack(t.track);n?this._e2eeCtx.handleReceiver(n,t.getType(),t.getParticipantId()):h.warn("Could not handle E2EE for "+t+": receiver not found in: "+e)}}},{key:"_setupSenderE2EEForTrack",value:function(e,t){if(this._enabled){var n=e.peerconnection,r=n&&n.findSenderForTrack(t.track);r?this._e2eeCtx.handleSender(r,t.getType(),t.getParticipantId()):h.warn("Could not handle E2EE for "+t+": sender not found in "+n)}}},{key:"_trackMuteChanged",value:function(e){if(u.a.doesVideoMuteByStreamRemove()&&e.isLocal()&&e.isVideoTrack()&&!e.isMuted())for(var t,n=_createForOfIteratorHelperLoose(this.conference._getMediaSessions());!(t=n()).done;){var r=t.value;this._setupSenderE2EEForTrack(r,e)}}}],[{key:"isSupported",value:function(e){return u.a.supportsInsertableStreams()&&l.a.isSupported()&&!(e.testing&&e.testing.disableE2EE)}}]),e})()}).call(this,"modules/e2ee/E2EEncryption.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return k});var r=n(4),i=n(2),o=n(36),a=n.n(o),s=n(6),c=n.n(s),u=n(7),d=n(0),l=n.n(d),h=n(5),p=n(104),f=n(11),m=n.n(f),v=n(106),g=n(3),_=n(107),y=n(32),S=n(54),E=n(21),b=n(58),C=n(9),T=n(108),R=n(42),A=Object(r.getLogger)(e),k=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o,a,s,c,u){var d;return _classCallCheck(this,n),(d=t.call(this,e,r,i,o,a,s,u))._bridgeSessionId=null,d._cachedOldLocalSdp=void 0,d._cachedNewLocalSdp=void 0,d._iceCheckingStartedTimestamp=null,d._gatheringStartedTimestamp=null,d.localRecvMaxFrameHeight=void 0,d._localVideoActive=!0,d._remoteVideoActive=!0,d._gatheringReported=!1,d.lasticecandidate=!1,d.closed=!1,d.isP2P=c,d.remoteRecvMaxFrameHeight=void 0,d.signalingLayer=new T.a,d.modificationQueue=new p.a,d.wasConnected=!1,d.establishmentDuration=void 0,d._xmppListeners=[],d._xmppListeners.push(o.addEventListener(R.a.Events.CONN_STATUS_CHANGED,d.onXmppStatusChanged.bind(_assertThisInitialized(d)))),d._removeSenderVideoConstraintsChangeListener=void 0,d}return _createClass(n,null,[{key:"parseVideoSenders",value:function(e){var t=e.find('>content[name="video"]');if(t.length){var n=t[0].getAttribute("senders");if("both"===n||"initiator"===n||"responder"===n||"none"===n)return n}return null}},{key:"parseMaxFrameHeight",value:function(e){var t=e.find('>content[name="video"]>max-frame-height');return t.length?Number(t.text()):null}}]),_createClass(n,[{key:"_assertNotEnded",value:function(){return this.state!==y.b}},{key:"doInitialize",value:function(e){var t=this;this.failICE=Boolean(e.failICE),this.lasticecandidate=!1,this.options=e,this.isReconnect=!1,this.wasstable=!1,this.webrtcIceUdpDisable=Boolean(e.webrtcIceUdpDisable),this.webrtcIceTcpDisable=Boolean(e.webrtcIceTcpDisable);var n={disableRtx:e.disableRtx};if(e.gatherStats&&(n.maxstats=300),n.capScreenshareBitrate=!1,n.enableInsertableStreams=e.enableInsertableStreams,n.videoQuality=e.videoQuality,n.videoQuality&&(n.disabledCodec=n.videoQuality.disabledCodec,n.preferredCodec=n.videoQuality.preferredCodec),this.isP2P){n.disableSimulcast=!0,n.disableH264=e.p2p&&e.p2p.disableH264,n.preferH264=e.p2p&&e.p2p.preferH264,e.p2p&&(n.disabledCodec=e.enableInsertableStreams?a.a.H264:e.p2p.disabledCodec,n.preferredCodec=e.p2p.preferredCodec);var r=this._abtestSuspendVideoEnabled(e);void 0!==r&&(n.abtestSuspendVideo=r)}else n.disableSimulcast=e.disableSimulcast||e.preferH264&&!e.disableH264,n.preferH264=e.preferH264,e.testing&&e.testing.capScreenshareBitrate&&"number"==typeof e.testing.capScreenshareBitrate&&(n.capScreenshareBitrate=Math.random()<e.testing.capScreenshareBitrate,h.a.analytics.addPermanentProperties({capScreenshareBitrate:n.capScreenshareBitrate}));e.startSilent&&(n.startSilent=!0),this.peerconnection=this.rtc.createPeerConnection(this.signalingLayer,this.iceConfig,this.isP2P,n),this.peerconnection.onicecandidate=function(e){if(e){var n=e.candidate,r=window.performance.now();if(n){null===t._gatheringStartedTimestamp&&(t._gatheringStartedTimestamp=r);var i=n.protocol;if("string"==typeof i)if("tcp"===(i=i.toLowerCase())||"ssltcp"===i){if(t.webrtcIceTcpDisable)return}else if("udp"===i&&t.webrtcIceUdpDisable)return}else t._gatheringReported||(h.a.sendAnalytics(u.o,{phase:"gathering",value:r-t._gatheringStartedTimestamp,p2p:t.isP2P,initiator:t.isInitiator}),t._gatheringReported=!0);t.sendIceCandidate(n)}},this.peerconnection.onsignalingstatechange=function(){"stable"===t.peerconnection.signalingState?t.wasstable=!0:"closed"!==t.peerconnection.signalingState&&"closed"!==t.peerconnection.connectionState||t.room.eventEmitter.emit(l.a.SUSPEND_DETECTED,t)},this.peerconnection.oniceconnectionstatechange=function(){var e=window.performance.now();switch(t.isP2P||(t.room.connectionTimes["ice.state."+t.peerconnection.iceConnectionState]=e),A.log("(TIME) ICE "+t.peerconnection.iceConnectionState+" P2P? "+t.isP2P+":\t",e),h.a.sendAnalytics(u.q,{p2p:t.isP2P,state:t.peerconnection.iceConnectionState,signaling_state:t.peerconnection.signalingState,reconnect:t.isReconnect,value:e}),t.room.eventEmitter.emit(l.a.ICE_CONNECTION_STATE_CHANGED,t,t.peerconnection.iceConnectionState),t.peerconnection.iceConnectionState){case"checking":t._iceCheckingStartedTimestamp=e;break;case"connected":if("stable"===t.peerconnection.signalingState&&t.isReconnect&&t.room.eventEmitter.emit(l.a.CONNECTION_RESTORED,t),!t.wasConnected&&t.wasstable){h.a.sendAnalytics(u.o,{phase:"checking",value:e-t._iceCheckingStartedTimestamp,p2p:t.isP2P,initiator:t.isInitiator});var n=Math.min(t._iceCheckingStartedTimestamp,t._gatheringStartedTimestamp);t.establishmentDuration=e-n,h.a.sendAnalytics(u.o,{phase:"establishment",value:t.establishmentDuration,p2p:t.isP2P,initiator:t.isInitiator}),t.wasConnected=!0,t.room.eventEmitter.emit(l.a.CONNECTION_ESTABLISHED,t)}t.isReconnect=!1;break;case"disconnected":t.isReconnect=!0,t.wasstable&&t.room.eventEmitter.emit(l.a.CONNECTION_INTERRUPTED,t);break;case"failed":t.room.eventEmitter.emit(l.a.CONNECTION_ICE_FAILED,t)}},this.peerconnection.onnegotiationneeded=function(){var e=t.peerconnection.signalingState,n=t.peerconnection.remoteDescription;if(g.a.usesUnifiedPlan()&&"stable"===e&&n&&"string"==typeof n.sdp){A.debug("onnegotiationneeded fired on "+t.peerconnection+" in state: "+e);t.modificationQueue.push(function(e){var n=new E.a(t.peerconnection.localDescription.sdp);t._renegotiate().then(function(){var r=new E.a(t.peerconnection.localDescription.sdp);t.notifyMySSRCUpdate(n,r),e()},e)},function(e){e?A.error("onnegotiationneeded error",e):A.debug("onnegotiationneeded executed - OK")})}},this.signalingLayer.setChatRoom(this.room),!this.isP2P&&e.enableLayerSuspension&&(this._removeSenderVideoConstraintsChangeListener=this.rtc.addListener(c.a.SENDER_VIDEO_CONSTRAINTS_CHANGED,function(){t.eventEmitter.emit(S.a.REMOTE_VIDEO_CONSTRAINTS_CHANGED,t)}))}},{key:"getRemoteRecvMaxFrameHeight",value:function(){return this.isP2P?this.remoteRecvMaxFrameHeight:this.options.enableLayerSuspension?this.rtc.getSenderVideoConstraints().idealHeight:void 0}},{key:"sendIceCandidate",value:function(e){var t=this,n=new E.a(this.peerconnection.localDescription.sdp);if(e&&e.candidate.length&&!this.lasticecandidate){var r=C.a.iceparams(n.media[e.sdpMLineIndex],n.session),i=C.a.candidateToJingle(e.candidate);if(!r||!i){var o="failed to get ice && jcand";return m.a.callErrorHandler(new Error(o)),void A.error(o)}r.xmlns="urn:xmpp:jingle:transports:ice-udp:1",this.usedrip?(0===this.dripContainer.length&&setTimeout(function(){0!==t.dripContainer.length&&(t.sendIceCandidates(t.dripContainer),t.dripContainer=[])},20),this.dripContainer.push(e)):this.sendIceCandidates([e])}else A.log("sendIceCandidate: last candidate."),this.lasticecandidate=!0}},{key:"sendIceCandidates",value:function(e){var t=this;if(this._assertNotEnded("sendIceCandidates")){A.log("sendIceCandidates",e);for(var n=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"transport-info",initiator:this.initiatorJid,sid:this.sid}),r=new E.a(this.peerconnection.localDescription.sdp),o=function(i){var o=e.filter(function(e){return e.sdpMLineIndex===i}),a=C.a.parseMLine(r.media[i].split("\r\n")[0]);if(o.length>0){var s=C.a.iceparams(r.media[i],r.session);s.xmlns="urn:xmpp:jingle:transports:ice-udp:1",n.c("content",{creator:t.initiatorJid===t.localJid?"initiator":"responder",name:o[0].sdpMid?o[0].sdpMid:a.media}).c("transport",s);for(var c=0;c<o.length;c++){var u=C.a.candidateToJingle(o[c].candidate);t.failICE&&(u.ip="1.1.1.1"),n.c("candidate",u).up()}var d=C.a.findLine(r.media[i],"a=fingerprint:",r.session);if(d){var l=C.a.parseFingerprint(d);l.required=!0,n.c("fingerprint",{xmlns:"urn:xmpp:jingle:apps:dtls:0"}).t(l.fingerprint),delete l.fingerprint,n.attrs(l),n.up()}n.up(),n.up()}},a=0;a<r.media.length;a++)o(a);this.connection.sendIQ(n,null,this.newJingleErrorHandler(n),1e4)}}},{key:"sendIceFailedNotification",value:function(){var e=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"session-info",initiator:this.initiatorJid,sid:this.sid}).c("ice-state",{xmlns:"http://abcpen.com/protocol/focus"}).t("failed").up();this._bridgeSessionId&&e.c("bridge-session",{xmlns:"http://abcpen.com/protocol/focus",id:this._bridgeSessionId}),this.connection.sendIQ2(e,{timeout:65}).catch(this.newJingleErrorHandler(e))}},{key:"addIceCandidates",value:function(e){var t=this;if("closed"!==this.peerconnection.signalingState){var n=[];e.find(">content>transport>candidate").each(function(e,t){var r=C.a.candidateFromJingle(t);r=r.replace("\r\n","").replace("a=","");var i=new RTCIceCandidate({sdpMLineIndex:0,sdpMid:"",candidate:r});n.push(i)}),n.length?(A.debug("Queued add ("+n.length+") ICE candidates task..."),this.modificationQueue.push(function(e){for(var r,i=_createForOfIteratorHelperLoose(n);!(r=i()).done;){var o=r.value;t.peerconnection.addIceCandidate(o).then(function(){return A.debug("addIceCandidate ok!")},function(e){return A.error("addIceCandidate failed!",e)})}e()})):A.error("No ICE candidates to add ?",e[0]&&e[0].outerHTML)}else A.warn("Ignored add ICE candidate when in closed state")}},{key:"readSsrcInfo",value:function(e){var t=this;$(e).find('>description>source[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each(function(e,n){var r=Number(n.getAttribute("ssrc"));t.isP2P?t.signalingLayer.setSSRCOwner(r,i.Strophe.getResourceFromJid(t.remoteJid)):$(n).find('>ssrc-info[xmlns="http://abcpen.com/zmeet"]').each(function(e,n){var o=n.getAttribute("owner");o&&o.length&&(isNaN(r)||r<0?A.warn("Invalid SSRC "+r+" value received for "+o):t.signalingLayer.setSSRCOwner(r,i.Strophe.getResourceFromJid(o)))})})}},{key:"generateRecvonlySsrc",value:function(){this.peerconnection?this.peerconnection.generateRecvonlySsrc():A.error("Unable to generate recvonly SSRC - no peerconnection")}},{key:"acceptOffer",value:function(e,t,n,r){var i=this;this.setOfferAnswerCycle(e,function(){i.sendSessionAccept(t,n)},n,r)}},{key:"invite",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!this.isInitiator)throw new Error("Trying to invite from the responder session");this.modificationQueue.push(function(n){for(var r,i=[],o=_createForOfIteratorHelperLoose(t);!(r=o()).done;){var a=r.value;i.push(e.peerconnection.addTrack(a,e.isInitiator))}Promise.all(i).then(function(){return e.peerconnection.createOffer(e.mediaConstraints)}).then(function(t){return e.peerconnection.setLocalDescription(t)}).then(function(){e.sendSessionInitiate(e.peerconnection.localDescription.sdp)}).then(function(){return n()},function(e){return n(e)})},function(e){e?A.error("invite error",e):A.debug("invite executed - OK")})}},{key:"sendSessionInitiate",value:function(e){var t=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"session-initiate",initiator:this.initiatorJid,sid:this.sid});new E.a(e).toJingle(t,this.isInitiator?"initiator":"responder"),t=t.tree(),A.info("Session-initiate: ",t),this.connection.sendIQ(t,function(){A.info('Got RESULT for "session-initiate"')},function(e){A.error('"session-initiate" error',e)},1e4)}},{key:"setAnswer",value:function(e){if(!this.isInitiator)throw new Error("Trying to set an answer on the responder session");this.setOfferAnswerCycle(e,function(){A.info("setAnswer - succeeded")},function(e){A.error("setAnswer failed: ",e)})}},{key:"setOfferAnswerCycle",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];this.modificationQueue.push(function(t){for(var n,o=[],a=_createForOfIteratorHelperLoose(i);!(n=a()).done;){var s=n.value;o.push(r.peerconnection.addTrack(s,r.isInitiator))}var c=r._processNewJingleOfferIq(e),u=r.peerconnection.localDescription.sdp,d=$(e).find('>bridge-session[xmlns="http://abcpen.com/protocol/focus"]').attr("id");d!==r._bridgeSessionId&&(r._bridgeSessionId=d),Promise.all(o).then(function(){return r._renegotiate(c.raw)}).then(function(){if(r.state===y.c&&(r.state=y.a,!r.isP2P||r._localVideoActive&&!r.localRecvMaxFrameHeight||r.sendContentModify()),u){var e=new E.a(r.peerconnection.localDescription.sdp);r.notifyMySSRCUpdate(new E.a(u),e)}}).then(function(){return t()},function(e){return t(e)})},function(e){e?n(e):t()})}},{key:"replaceTransport",value:function(e,t,n){var r=this;this.room.eventEmitter.emit(l.a.ICE_RESTARTING,this);var i=e.clone();e.find(">content[name='data']").attr("senders","rejected"),e.find(">content>description>source").remove(),e.find(">content>description>ssrc-group").remove();var o=e.find(">content>transport>fingerprint");o.attr("hash","sha-1"),o.text("00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00"),this.setOfferAnswerCycle(e,function(){r.setOfferAnswerCycle(i,function(){var e=new E.a(r.peerconnection.localDescription.sdp);r.sendTransportAccept(e,t,n),r.room.eventEmitter.emit(l.a.ICE_RESTART_SUCCESS,r,i)},n)},n)}},{key:"sendSessionAccept",value:function(e,t){var n=this,r=new E.a(this.peerconnection.localDescription.sdp),o=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"session-accept",initiator:this.initiatorJid,responder:this.responderJid,sid:this.sid});this.webrtcIceTcpDisable&&(r.removeTcpCandidates=!0),this.webrtcIceUdpDisable&&(r.removeUdpCandidates=!0),this.failICE&&(r.failICE=!0),r.toJingle(o,this.initiatorJid===this.localJid?"initiator":"responder",null),o=o.tree(),A.info("Sending session-accept",o),this.connection.sendIQ(o,e,this.newJingleErrorHandler(o,function(e){t(e),n.room.eventEmitter.emit(l.a.SESSION_ACCEPT_TIMEOUT,n)}),1e4)}},{key:"sendContentModify",value:function(){var e=this.localRecvMaxFrameHeight,t=this._localVideoActive?"both":"none",n=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"content-modify",initiator:this.initiatorJid,sid:this.sid}).c("content",{name:"video",senders:t});void 0!==e&&(n=n.c("max-frame-height",{xmlns:"http://abcpen.com/zmeet/video"}).t(e)),A.info(this+" sending content-modify, video senders: "+t+", max frame height: "+e),this.connection.sendIQ(n,null,this.newJingleErrorHandler(n),1e4)}},{key:"setReceiverVideoConstraint",value:function(e){A.info(this+" setReceiverVideoConstraint - max frame height: "+e),this.localRecvMaxFrameHeight=e,this.isP2P?this.state===y.a&&this.sendContentModify():this.rtc.setReceiverVideoConstraint(e)}},{key:"sendTransportAccept",value:function(e,t,n){var r=this,o=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"transport-accept",initiator:this.initiatorJid,sid:this.sid});e.media.forEach(function(t,n){var i=C.a.parseMLine(t.split("\r\n")[0]);o.c("content",{creator:r.initiatorJid===r.localJid?"initiator":"responder",name:i.media}),e.transportToJingle(n,o),o.up()}),o=o.tree(),A.info("Sending transport-accept: ",o),this.connection.sendIQ(o,t,this.newJingleErrorHandler(o,n),1e4)}},{key:"sendTransportReject",value:function(e,t){var n=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"transport-reject",initiator:this.initiatorJid,sid:this.sid});n=n.tree(),A.info("Sending 'transport-reject",n),this.connection.sendIQ(n,e,this.newJingleErrorHandler(n,t),1e4)}},{key:"setSenderMaxBitrates",value:function(){return this._assertNotEnded()?this.peerconnection.setMaxBitRate():Promise.resolve()}},{key:"setSenderVideoConstraint",value:function(e){return this._assertNotEnded()?(A.info(this+" setSenderVideoConstraint: "+e),this.peerconnection.setSenderVideoConstraint(e)):Promise.resolve()}},{key:"setSenderVideoDegradationPreference",value:function(){return this._assertNotEnded()?this.peerconnection.setSenderVideoDegradationPreference():Promise.resolve()}},{key:"terminate",value:function(e,t,n){if(this.state!==y.b){if(!n||Boolean(n.sendSessionTerminate)){var r=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"session-terminate",initiator:this.initiatorJid,sid:this.sid}).c("reason").c(n&&n.reason||"success").up();n&&n.reasonDescription?r.c("text").t(n.reasonDescription).up().up():r.up(),this._bridgeSessionId&&r.c("bridge-session",{xmlns:"http://abcpen.com/protocol/focus",id:this._bridgeSessionId,restart:n&&!0===n.requestRestart}).up(),r=r.tree(),A.info("Sending session-terminate",r),this.connection.sendIQ(r,e,this.newJingleErrorHandler(r,t),1e4)}else A.info("Skipped sending session-terminate for "+this);this.connection.jingle.terminate(this.sid)}}},{key:"onTerminated",value:function(e,t){A.info("Session terminated "+this,e,t),this._xmppListeners.forEach(function(e){return e()}),this._xmppListeners=[],this._removeSenderVideoConstraintsChangeListener&&this._removeSenderVideoConstraintsChangeListener(),this.close()}},{key:"onXmppStatusChanged",value:function(e){e===R.a.Status.CONNECTED&&this._cachedOldLocalSdp&&(A.info("Sending SSRC update on reconnect"),this.notifyMySSRCUpdate(this._cachedOldLocalSdp,this._cachedNewLocalSdp))}},{key:"_parseSsrcInfoFromSourceAdd",value:function(e,t){var n=[];return $(e).each(function(e,r){var i=$(r).attr("name"),o="";$(r).find('ssrc-group[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each(function(){var e=this.getAttribute("semantics"),t=$(this).find(">source").map(function(){return this.getAttribute("ssrc")}).get();t.length&&(o+="a=ssrc-group:"+e+" "+t.join(" ")+"\r\n")}),$(r).find('source[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each(function(){var e=$(this).attr("ssrc");t.containsSSRC(e)?A.warn("Source-add request for existing SSRC: "+e):$(this).find(">parameter").each(function(){o+="a=ssrc:"+e+" "+$(this).attr("name"),$(this).attr("value")&&$(this).attr("value").length&&(o+=":"+$(this).attr("value")),o+="\r\n"})}),t.media.forEach(function(e,t){C.a.findLine(e,"a=mid:"+i)&&(n[t]||(n[t]=""),n[t]+=o)})}),n}},{key:"addRemoteStream",value:function(e){this._addOrRemoveRemoteStream(!0,e)}},{key:"removeRemoteStream",value:function(e){this._addOrRemoveRemoteStream(!1,e)}},{key:"_addOrRemoveRemoteStream",value:function(e,t){var n=this,r=e?"addRemoteStream":"removeRemoteStream";e&&this.readSsrcInfo(t),this.modificationQueue.push(function(i){if(!n.peerconnection.localDescription||!n.peerconnection.localDescription.sdp){var o=r+" - localDescription not ready yet";return A.error(o),void i(o)}A.log("Processing "+r),A.log("ICE connection state: ",n.peerconnection.iceConnectionState);var a=new E.a(n.peerconnection.localDescription.sdp),s=new E.a(n.peerconnection.remoteDescription.sdp),c=e?n._parseSsrcInfoFromSourceAdd(t,s):n._parseSsrcInfoFromSourceRemove(t,s),u=e?n._processRemoteAddSource(c):n._processRemoteRemoveSource(c);n._renegotiate(u.raw).then(function(){var e=new E.a(n.peerconnection.localDescription.sdp);A.log(r+" - OK, SDPs: ",a,e),n.notifyMySSRCUpdate(a,e),i()},function(e){A.error(r+" failed:",e),i(e)})})}},{key:"_processNewJingleOfferIq",value:function(e){var t=new E.a("");return this.webrtcIceTcpDisable&&(t.removeTcpCandidates=!0),this.webrtcIceUdpDisable&&(t.removeUdpCandidates=!0),this.failICE&&(t.failICE=!0),t.fromJingle(e),this.readSsrcInfo($(e).find(">content")),t}},{key:"_processRemoteRemoveSource",value:function(e){var t=g.a.usesPlanB()?new E.a(this.peerconnection.remoteDescription.sdp):new E.a(this.peerconnection.peerconnection.remoteDescription.sdp);return e.forEach(function(e,n){(e=e.split("\r\n")).pop(),g.a.usesPlanB()?e.forEach(function(e){t.media[n]=t.media[n].replace(e+"\r\n","")}):e.forEach(function(e){var n=t.media.findIndex(function(t){return t.includes(e)});n>-1&&(t.media[n]=t.media[n].replace(e+"\r\n",""),g.a.isFirefox()&&(t.media[n]=t.media[n].replace("a=sendonly","a=inactive")))})}),t.raw=t.session+t.media.join(""),t}},{key:"_processRemoteAddSource",value:function(e){var t=new E.a(this.peerconnection.remoteDescription.sdp);return e.forEach(function(e,n){t.media[n]+=e}),t.raw=t.session+t.media.join(""),t}},{key:"_renegotiate",value:function(e){if("closed"===this.peerconnection.signalingState){var t=new Error("Attempted to renegotiate in state closed");return this.room.eventEmitter.emit(l.a.RENEGOTIATION_FAILED,t,this),Promise.reject(t)}var n=e||this.peerconnection.remoteDescription.sdp;if(!n){var r=new Error("Can not renegotiate without remote description, current state: "+this.state);return this.room.eventEmitter.emit(l.a.RENEGOTIATION_FAILED,r,this),Promise.reject(r)}var i=new RTCSessionDescription({type:this.isInitiator?"answer":"offer",sdp:n});return this.isInitiator?this._initiatorRenegotiate(i):this._responderRenegotiate(i)}},{key:"_responderRenegotiate",value:function(e){var t=this;return A.debug("Renegotiate: setting remote description"),this.peerconnection.setRemoteDescription(e).then(function(){return A.debug("Renegotiate: creating answer"),t.peerconnection.createAnswer(t.mediaConstraints).then(function(e){return A.debug("Renegotiate: setting local description"),t.peerconnection.setLocalDescription(e)})})}},{key:"_initiatorRenegotiate",value:function(e){var t=this;return A.debug("Renegotiate: creating offer"),this.peerconnection.createOffer(this.mediaConstraints).then(function(n){return A.debug("Renegotiate: setting local description"),t.peerconnection.setLocalDescription(n).then(function(){return A.debug("Renegotiate: setting remote description"),t.peerconnection.setRemoteDescription(e)})})}},{key:"replaceTrack",value:function(e,t){var n=this,r=function(r){var i=n.peerconnection.localDescription.sdp;g.a.usesPlanB()&&(n.peerconnection.options.capScreenshareBitrate&&e&&t&&t.isVideoTrack()&&n.peerconnection.clearRecvonlySsrc(),!e&&t&&t.isVideoTrack()?n.peerconnection.clearRecvonlySsrc():e&&e.isVideoTrack()&&!t&&(n.peerconnection.clearRecvonlySsrc(),n.peerconnection.generateRecvonlySsrc())),n.peerconnection.replaceTrack(e,t).then(function(r){var o=Promise.resolve();return r&&(e||t)&&n.state===y.a&&(o=n._renegotiate().then(function(){var e=new E.a(n.peerconnection.localDescription.sdp);n.notifyMySSRCUpdate(new E.a(i),e)})),o.then(function(){if(t&&t.isVideoTrack())return n.peerconnection.setSenderVideoDegradationPreference().then(function(){return n.peerconnection.setSenderVideoConstraint()}).then(function(){return n.peerconnection.setMaxBitRate()})})}).then(function(){return r()},function(e){return r(e)})};return new Promise(function(e,t){n.modificationQueue.push(r,function(n){n?(A.error("Replace track error:",n),t(n)):(A.info("Replace track done!"),e())})})}},{key:"_parseSsrcInfoFromSourceRemove",value:function(e,t){var n=[];return $(e).each(function(e,r){var i=$(r).attr("name"),o="";$(r).find('ssrc-group[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each(function(){var e=this.getAttribute("semantics"),t=$(this).find(">source").map(function(){return this.getAttribute("ssrc")}).get();t.length&&(o+="a=ssrc-group:"+e+" "+t.join(" ")+"\r\n")});var a=[];$(r).find('source[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each(function(){var e=$(this).attr("ssrc");a.push(e)}),t.media.forEach(function(e,t){C.a.findLine(e,"a=mid:"+i)&&(n[t]||(n[t]=""),a.forEach(function(r){var i=C.a.findLines(e,"a=ssrc:"+r);i.length&&(n[t]+=i.join("\r\n")+"\r\n")}),n[t]+=o)})}),n}},{key:"_verifyNoSSRCChanged",value:function(e,t){var n=new E.a(this.peerconnection.localDescription.sdp),r=new b.a(t,n),i=r.getNewMedia();if(Object.keys(i).length)return A.error(this+" - some SSRC were added on "+e,i),!1;var o=(r=new b.a(n,t)).getNewMedia();return!Object.keys(o).length||(A.error(this+" - some SSRCs were removed on "+e,o),!1)}},{key:"addTrackAsUnmute",value:function(e){var t=this;return this._addRemoveTrackAsMuteUnmute(!1,e).then(function(){if(e.isVideoTrack()&&g.a.doesVideoMuteByStreamRemove())return t.setSenderMaxBitrates().then(function(){return t.setSenderVideoDegradationPreference()}).then(function(){return t.setSenderVideoConstraint()})})}},{key:"removeTrackAsMute",value:function(e){return this._addRemoveTrackAsMuteUnmute(!0,e)}},{key:"_addRemoveTrackAsMuteUnmute",value:function(e,t){var n=this;if(!t)return Promise.reject('invalid "track" argument value');var r=e?"removeTrackMute":"addTrackUnmute",i=function(i){var o=n.peerconnection;if(o){var a=o.localDescription.sdp;(e?o.removeTrackMute(t):o.addTrackUnmute(t)).then(function(e){e&&a&&o.remoteDescription.sdp?n._renegotiate().then(function(){n._verifyNoSSRCChanged(r,new E.a(a)),i()}):i()},i)}else i("Error:  tried "+r+" track with no active peerconnection")};return new Promise(function(e,t){n.modificationQueue.push(i,function(n){n?t(n):e()})})}},{key:"setMediaTransferActive",value:function(e,t){var n=this;if(!this.peerconnection)return Promise.reject('Can not modify transfer active state, before "initialize" is called');var r=e?"audio active":"audio inactive",i=t?"video active":"video inactive";A.info("Queued make "+i+", "+r+" task...");var o=function(r){var i=n.state===y.a,o=n.peerconnection.setAudioTransferActive(e);n._localVideoActive!==t&&(n._localVideoActive=t,n.isP2P&&i&&n.sendContentModify());var a=n.peerconnection.setVideoTransferActive(n._localVideoActive&&n._remoteVideoActive);i&&(o||a)?n._renegotiate().then(r,r):r()};return new Promise(function(e,t){n.modificationQueue.push(o,function(n){n?t(n):e()})})}},{key:"modifyContents",value:function(e){var t=this,r=n.parseVideoSenders(e),i=n.parseMaxFrameHeight(e);i&&(A.info(this+" received remote max frame height: "+i),this.remoteRecvMaxFrameHeight=i,this.eventEmitter.emit(S.a.REMOTE_VIDEO_CONSTRAINTS_CHANGED,this)),null!==r?(A.debug(this+" queued \"content-modify\" task(video senders=\""+r+"\")"),this.modificationQueue.push(function(e){t._assertNotEnded("content-modify")&&t._modifyRemoteVideoActive(r)?t._renegotiate().then(e,e):e()},function(e){e&&A.error('"content-modify" failed',e)})):A.error(this+' - failed to parse video "senders" attribute in"content-modify" action')}},{key:"_modifyRemoteVideoActive",value:function(e){var t="both"===e||"initiator"===e&&this.isInitiator||"responder"===e&&!this.isInitiator;return t!==this._remoteVideoActive&&(A.debug(this+" new remote video active: "+t),this._remoteVideoActive=t),this.peerconnection.setVideoTransferActive(this._localVideoActive&&this._remoteVideoActive)}},{key:"notifyMySSRCUpdate",value:function(e,t){if(this.state===y.a){if(!this.connection.connected)return this._cachedOldLocalSdp||(this._cachedOldLocalSdp=e),this._cachedNewLocalSdp=t,void A.warn("Not sending SSRC update while the signaling is disconnected");this._cachedOldLocalSdp=void 0,this._cachedNewLocalSdp=void 0;var n=new b.a(t,e),r=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"source-remove",initiator:this.initiatorJid,sid:this.sid});n.toJingle(r)?(A.info("Sending source-remove",r.tree()),this.connection.sendIQ(r,null,this.newJingleErrorHandler(r),1e4)):A.log("removal not necessary"),n=new b.a(e,t);var o=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"source-add",initiator:this.initiatorJid,sid:this.sid});n.toJingle(o)?(A.info("Sending source-add",o.tree()),this.connection.sendIQ(o,null,this.newJingleErrorHandler(o),1e4)):A.log("addition not necessary")}else A.warn("Skipping SSRC update in '"+this.state+" ' state.")}},{key:"newJingleErrorHandler",value:function(e,t){var n=this;return function(e){var r={},i=$(e).find("error");if(i.length){r.code=i.attr("code");var o=$(e).find("error :first");o.length&&(r.reason=o[0].tagName);var a=i.find(">text");a.length&&(r.msg=a.text())}e||(r.reason="timeout"),r.session=n.toString(),t?t(r):n.state===y.b&&"item-not-found"===r.reason?A.debug("Jingle error: "+JSON.stringify(r)):m.a.callErrorHandler(new Error("Jingle error: "+JSON.stringify(r)))}}},{key:"getIceConnectionState",value:function(){return this.peerconnection.getConnectionState()}},{key:"close",value:function(){var e=this;this.state=y.b,this.establishmentDuration=void 0,this.peerconnection&&(this.peerconnection.onicecandidate=null,this.peerconnection.oniceconnectionstatechange=null,this.peerconnection.onnegotiationneeded=null,this.peerconnection.onsignalingstatechange=null),this.modificationQueue.clear(),this.modificationQueue.push(function(t){e.signalingLayer.setChatRoom(null),e.peerconnection&&e.peerconnection.close(),t()}),this.modificationQueue.shutdown()}},{key:"toString",value:function(){return"JingleSessionPC[p2p="+this.isP2P+",initiator="+this.isInitiator+",sid="+this.sid+"]"}},{key:"_abtestSuspendVideoEnabled",value:function(e){var t=e.abTesting;if(t&&t.enableSuspendVideoTest){var n=this._getInitiatorJid();return Object(v.integerHash)(n)%2==0}}}]),n})(_.a)}).call(this,"modules/xmpp/JingleSessionPC.js")},function(e,t,n){"use strict";t.a={REMOTE_VIDEO_CONSTRAINTS_CHANGED:"media_session.REMOTE_VIDEO_CONSTRAINTS_CHANGED"}},function(e,t,n){"use strict";n.r(t),n.d(t,"DEVICE_LIST_CHANGED",function(){return r}),n.d(t,"PERMISSION_PROMPT_IS_SHOWN",function(){return i});var r="mediaDevices.devicechange",i="mediaDevices.permissionPromptIsShown"},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return E});var r=n(57),i=n.n(r),o=n(4),a=n(45),s=n.n(a),c=n(145),u=n(1),d=n(68),l=n(20),h=n(28),p=Object(o.getLogger)(e),f="error",m="key-info",v="key-info-ack",g="session-ack",_="session-init",y=Symbol("OlmData"),S={PARTICIPANT_E2EE_CHANNEL_READY:"olm.participant_e2ee_channel_ready",PARTICIPANT_KEY_UPDATED:"olm.partitipant_key_updated"},E=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._conf=e,r._init=new d.a,r._key=void 0,r._keyIndex=-1,r._reqs=new Map,n.isSupported()?(r._bootstrapOlm(),r._conf.on(u.ENDPOINT_MESSAGE_RECEIVED,r._onEndpointMessageReceived.bind(_assertThisInitialized(r))),r._conf.on(u.CONFERENCE_JOINED,r._onConferenceJoined.bind(_assertThisInitialized(r))),r._conf.on(u.CONFERENCE_LEFT,r._onConferenceLeft.bind(_assertThisInitialized(r))),r._conf.on(u.USER_LEFT,r._onParticipantLeft.bind(_assertThisInitialized(r)))):r._init.reject(new Error("Olm not supported")),r}return _createClass(n,[{key:"updateKey",value:function(e){var t,n,r,i,o,a=this;return _regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:this._key=e,this._keyIndex++,t=[],n=function(e){var n,r=e.getId(),i=a._getParticipantOlmData(e);if(!i.session)return p.warn("Tried to send key to participant "+r+" but we have no session"),"continue";var o=Object(c.a)(),s=(_defineProperty(n={},h.b,"olm"),_defineProperty(n,"olm",{type:m,data:{ciphertext:a._encryptKeyInfo(i.session),uuid:o}}),n),u=new d.a;u.setRejectTimeout(5e3),u.catch(function(){a._reqs.delete(o)}),a._reqs.set(o,u),t.push(u),a._sendMessage(s,r)},r=_createForOfIteratorHelperLoose(this._conf.getParticipants());case 4:if((i=r()).done){s.next=11;break}if(o=i.value,"continue"!==n(o)){s.next=9;break}return s.abrupt("continue",9);case 9:s.next=4;break;case 11:return s.next=13,_regeneratorRuntime.awrap(Promise.allSettled(t));case 13:return s.abrupt("return",this._keyIndex);case 14:case"end":return s.stop()}},null,this,null,Promise)}},{key:"_bootstrapOlm",value:function(){var e;return _regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return p.debug("Initializing Olm..."),t.prev=1,t.next=4,_regeneratorRuntime.awrap(Olm.init());case 4:this._olmAccount=new Olm.Account,this._olmAccount.create(),e=JSON.parse(this._olmAccount.identity_keys()),this._idKey=e.curve25519,p.debug("Olm initialized!"),this._init.resolve(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),p.error("Failed to initialize Olm",t.t0),this._init.reject(t.t0);case 13:case"end":return t.stop()}},null,this,[[1,10]],Promise)}},{key:"_encryptKeyInfo",value:function(e){var t={};return void 0!==this._key&&(t.key=!!this._key&&i.a.fromByteArray(this._key),t.keyIndex=this._keyIndex),e.encrypt(JSON.stringify(t))}},{key:"_getParticipantOlmData",value:function(e){return e[y]=e[y]||{},e[y]}},{key:"_onConferenceJoined",value:function(){var e,t,n,r;return _regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return p.debug("Conference joined"),i.next=3,_regeneratorRuntime.awrap(this._init);case 3:for(e=[],t=_createForOfIteratorHelperLoose(this._conf.getParticipants());!(n=t()).done;)r=n.value,e.push(this._sendSessionInit(r));return i.next=7,_regeneratorRuntime.awrap(Promise.allSettled(e));case 7:case"end":return i.stop()}},null,this,null,Promise)}},{key:"_onConferenceLeft",value:function(){var e,t,n;return _regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return p.debug("Conference left"),r.next=3,_regeneratorRuntime.awrap(this._init);case 3:for(e=_createForOfIteratorHelperLoose(this._conf.getParticipants());!(t=e()).done;)n=t.value,this._onParticipantLeft(n.getId(),n);this._olmAccount&&(this._olmAccount.free(),this._olmAccount=void 0);case 5:case"end":return r.stop()}},null,this,null,Promise)}},{key:"_onEndpointMessageReceived",value:function(e,t){var n,r,o,a,c,u,d,l,y,E,C,T,R,A,k,I,w,P,O,D,N,M,L,x;return _regeneratorRuntime.async(function(F){for(;;)switch(F.prev=F.next){case 0:if("olm"===t[h.b]){F.next=2;break}return F.abrupt("return");case 2:if(t.olm){F.next=4;break}return F.abrupt("return",void p.warn("Incorrectly formatted message"));case 4:return F.next=6,_regeneratorRuntime.awrap(this._init);case 6:n=t.olm,r=e.getId(),o=this._getParticipantOlmData(e),F.t0=n.type,F.next=F.t0===_?10:F.t0===g?12:F.t0===f?14:F.t0===m?16:F.t0===v?18:19;break;case 10:return o.session?(p.warn("Participant "+r+" already has a session"),this._sendError(e,"Session already established")):((c=new Olm.Session).create_outbound(this._olmAccount,n.data.idKey,n.data.otKey),o.session=c,_defineProperty(a={},h.b,"olm"),_defineProperty(a,"olm",{type:g,data:{ciphertext:this._encryptKeyInfo(c),uuid:n.data.uuid}}),u=a,this._sendMessage(u,r)),F.abrupt("break",19);case 12:return o.session?(p.warn("Participant "+r+" already has a session"),this._sendError(e,"No session found")):n.data.uuid===o.pendingSessionUuid?(d=n.data.ciphertext,l=this._reqs.get(n.data.uuid),(y=new Olm.Session).create_inbound(this._olmAccount,d.body),this._olmAccount.remove_one_time_keys(y),E=y.decrypt(d.type,d.body),o.session=y,o.pendingSessionUuid=void 0,p.debug("Olm session established with "+r),this.eventEmitter.emit(S.PARTICIPANT_E2EE_CHANNEL_READY,r),this._reqs.delete(n.data.uuid),l.resolve(),(C=b(E)).key&&(T=i.a.toByteArray(C.key),R=C.keyIndex,o.lastKey=T,this.eventEmitter.emit(S.PARTICIPANT_KEY_UPDATED,r,T,R))):(p.warn("Received ACK with the wrong UUID"),this._sendError(e,"Invalid UUID")),F.abrupt("break",19);case 14:return p.error(n.data.error),F.abrupt("break",19);case 16:return o.session?(A=n.data.ciphertext,void 0!==(k=b(o.session.decrypt(A.type,A.body))).key&&void 0!==k.keyIndex&&(w=!!k.key&&i.a.toByteArray(k.key),P=k.keyIndex,s()(o.lastKey,w)||(o.lastKey=w,this.eventEmitter.emit(S.PARTICIPANT_KEY_UPDATED,r,w,P)),_defineProperty(I={},h.b,"olm"),_defineProperty(I,"olm",{type:v,data:{ciphertext:this._encryptKeyInfo(o.session),uuid:n.data.uuid}}),O=I,this._sendMessage(O,r))):(p.debug("Received key info message from "+r+" but we have no session for them!"),this._sendError(e,"No session found while processing key-info")),F.abrupt("break",19);case 18:o.session?(D=n.data.ciphertext,void 0!==(N=b(o.session.decrypt(D.type,D.body))).key&&void 0!==N.keyIndex&&(M=!!N.key&&i.a.toByteArray(N.key),L=N.keyIndex,s()(o.lastKey,M)||(o.lastKey=M,this.eventEmitter.emit(S.PARTICIPANT_KEY_UPDATED,r,M,L))),x=this._reqs.get(n.data.uuid),this._reqs.delete(n.data.uuid),x.resolve()):(p.debug("Received key info ack message from "+r+" but we have no session for them!"),this._sendError(e,"No session found while processing key-info-ack"));case 19:case"end":return F.stop()}},null,this,null,Promise)}},{key:"_onParticipantLeft",value:function(e,t){p.debug("Participant "+e+" left");var n=this._getParticipantOlmData(t);n.session&&(n.session.free(),n.session=void 0)}},{key:"_sendError",value:function(e,t){var n,r=e.getId(),i=(_defineProperty(n={},h.b,"olm"),_defineProperty(n,"olm",{type:f,data:{error:t}}),n);this._sendMessage(i,r)}},{key:"_sendMessage",value:function(e,t){this._conf.sendMessage(e,t)}},{key:"_sendSessionInit",value:function(e){var t,n=this,r=e.getId(),i=this._getParticipantOlmData(e);if(i.session)return p.warn("Tried to send session-init to "+r+" but we already have a session"),Promise.reject();if(void 0!==i.pendingSessionUuid)return p.warn("Tried to send session-init to "+r+" but we already have a pending session"),Promise.reject();this._olmAccount.generate_one_time_keys(1);var o=JSON.parse(this._olmAccount.one_time_keys()),a=Object.values(o.curve25519)[0];if(!a)return Promise.reject(new Error("No one-time-keys generated"));this._olmAccount.mark_keys_as_published();var s=Object(c.a)(),u=(_defineProperty(t={},h.b,"olm"),_defineProperty(t,"olm",{type:_,data:{idKey:this._idKey,otKey:a,uuid:s}}),t),l=new d.a;return l.setRejectTimeout(5e3),l.catch(function(){n._reqs.delete(s),i.pendingSessionUuid=void 0}),this._reqs.set(s,l),this._sendMessage(u,r),i.pendingSessionUuid=s,l}}],[{key:"isSupported",value:function(){return void 0!==window.Olm}}]),n})(l.a);function b(e){try{return JSON.parse(e)}catch(e){return{}}}E.events=S}).call(this,"modules/e2ee/OlmAdapter.js")},function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),a=r[0],s=r[1],c=new o(3*(a+s)/4-s),d=0,l=s>0?a-4:a;for(n=0;n<l;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;return 2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[d++]=255&t),1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(d(e,a,a+16383>s?s:a+16383));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function d(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(9);function i(e,t){if(!t)return!1;if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]instanceof Array&&t[n]instanceof Array){if(!e[n].equals(t[n]))return!1}else if(e[n]!==t[n])return!1;return!0}function o(e,t){if(this.mySDP=e,this.otherSDP=t,!e)throw new Error('"mySDP" is undefined!');if(!t)throw new Error('"otherSDP" is undefined!')}o.prototype.getNewMedia=function(){var e=this.mySDP.getMediaSsrcMap(),t=this.otherSDP.getMediaSsrcMap(),n={};return Object.keys(t).forEach(function(r){var o=e[r],a=t[r];o||!a?(Object.keys(a.ssrcs).forEach(function(e){-1===Object.keys(o.ssrcs).indexOf(e)?(n[r]||(n[r]={mediaindex:a.mediaindex,mid:a.mid,ssrcs:{},ssrcGroups:[]}),n[r].ssrcs[e]=a.ssrcs[e]):a.ssrcs[e].lines&&o.ssrcs[e].lines&&void 0!==o.ssrcs[e].lines.find(function(e){return-1!==e.indexOf("msid")})!=(void 0!==a.ssrcs[e].lines.find(function(e){return-1!==e.indexOf("msid")}))&&(n[r]||(n[r]={mediaindex:a.mediaindex,mid:a.mid,ssrcs:{},ssrcGroups:[]}),n[r].ssrcs[e]=a.ssrcs[e])}),a.ssrcGroups.forEach(function(e){for(var t=!1,s=0;s<o.ssrcGroups.length;s++){var c=o.ssrcGroups[s];if(e.semantics===c.semantics&&i(e.ssrcs,c.ssrcs)){t=!0;break}}t||(n[r]||(n[r]={mediaindex:a.mediaindex,mid:a.mid,ssrcs:{},ssrcGroups:[]}),n[r].ssrcGroups.push(e))})):n[r]=a}),n},o.prototype.toJingle=function(e){var t=this.getNewMedia(),n=!1;return Object.keys(t).forEach(function(i){n=!0;var o=t[i];e.c("content",{name:o.mid}),e.c("description",{xmlns:"urn:xmpp:jingle:apps:rtp:1",media:o.mid}),Object.keys(o.ssrcs).forEach(function(t){var n=o.ssrcs[t];e.c("source",{xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0"}),e.attrs({ssrc:n.ssrc}),n.lines.forEach(function(t){var n=t.indexOf(" "),i=t.substr(n+1);if(e.c("parameter"),-1===i.indexOf(":"))e.attrs({name:i});else{var o=i.split(":",2),a=o[0],s=r.a.filterSpecialChars(o[1]);e.attrs({name:a}),e.attrs({value:s})}e.up()}),e.up()}),o.ssrcGroups.forEach(function(t){t.ssrcs.length&&(e.c("ssrc-group",{semantics:t.semantics,xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0"}),t.ssrcs.forEach(function(t){e.c("source",{ssrc:t}).up()}),e.up())}),e.up(),e.up()}),n}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!(function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}})();var c,u=[],d=!1,l=-1;function h(){d&&c&&(d=!1,c.length?u=c.concat(u):l=-1,u.length&&p())}function p(){if(!d){var e=s(h);d=!0;for(var t=u.length;t;){for(c=u,u=[];++l<t;)c&&c[l].run();l=-1,t=u.length}c=null,d=!1,(function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}})(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new f(e,t)),1!==u.length||d||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),window.AudioContext=window.AudioContext||window.webkitAudioContext;var r=null;function i(e,t,n){this.stream=e,this.intervalId=null,this.intervalMilis=t,this.audioLevel=0,this.callback=n}window.AudioContext&&((r=new AudioContext).suspend&&r.suspend()),i.prototype.start=function(){var e=this;if(i.isLocalStatsSupported()){r.resume();var t=r.createAnalyser();t.smoothingTimeConstant=.8,t.fftSize=2048,r.createMediaStreamSource(this.stream).connect(t),this.intervalId=setInterval(function(){var n=new Uint8Array(t.frequencyBinCount);t.getByteTimeDomainData(n);var r=(function(e){for(var t=0,n=e.length,r=0;r<n;r++)t<e[r]&&(t=e[r]);return parseFloat(((t-127)/128).toFixed(3))})(n);e.audioLevel=(function(e,t){var n=t-e;return parseFloat((n>.2?t-.2:n<-.4?t+.4:e).toFixed(3))})(r,e.audioLevel),e.callback(e.audioLevel)},this.intervalMilis)}},i.prototype.stop=function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)},i.isLocalStatsSupported=function(){return Boolean(r)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r="https://api.callstats.io/static/callstats-ws.min.js"},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return d}),n.d(t,"b",function(){return p});var r=n(2),i=n(0),o=n.n(i),a=n(20),s=n(4).getLogger(e),c=["category","type","lang","name"],u=["category","type","lang"],d="Feature version mismatch";function l(e,t){var n=0;return u.some(function(r){return 0!==(n=e[r]>t[r]?1:e[r]<t[r]&&-1)}),n}function h(e,t){var n=e.sort(l).reduce(function(e,t){return c.reduce(function(e,n,r){return e+(0===r?"":"/")+(t[n]?t[n]:"")},"")+"<"},""),i=t.sort().reduce(function(e,t){return e+t+"<"},"");return Object(r.b64_sha1)(n+i)}var p=(function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"http://abcpen.com/abcpenmeet";if(_classCallCheck(this,n),(e=t.call(this)).node=a,e.disco=i.disco,!e.disco)throw new Error("Missing strophe-plugins (disco plugin is required)!");e.versionToCapabilities=Object.create(null),e.jidToVersion=Object.create(null),e.version="",e.rooms=new Set;var s=i.emuc;return s.addListener(o.a.EMUC_ROOM_ADDED,function(t){return e._addChatRoom(t)}),s.addListener(o.a.EMUC_ROOM_REMOVED,function(t){return e._removeChatRoom(t)}),Object.keys(s.rooms).forEach(function(t){e._addChatRoom(s.rooms[t])}),r.Strophe.addNamespace("CAPS","http://jabber.org/protocol/caps"),e.disco.addFeature(r.Strophe.NS.CAPS),i.addHandler(e._handleCaps.bind(_assertThisInitialized(e)),r.Strophe.NS.CAPS),e._onMucMemberLeft=e._removeJidToVersionEntry.bind(_assertThisInitialized(e)),_possibleConstructorReturn(e)}return _createClass(n,[{key:"addFeature",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.disco.addFeature(e),this._generateVersion(),t&&this.submit()}},{key:"removeFeature",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.disco.removeFeature(e),this._generateVersion(),t&&this.submit()}},{key:"submit",value:function(){this.rooms.forEach(function(e){return e.sendPresence()})}},{key:"getFeatures",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,r=e in this.jidToVersion?this.jidToVersion[e]:null;if(!(r&&r.version in this.versionToCapabilities)){var i=r?r.node+"#"+r.version:null;return this._getDiscoInfo(e,i,n).then(function(e){var n=e.features,o=e.identities;if(r){var a=h(Array.from(o),Array.from(n)),c=r.node+"#"+a;return c===i?(t.versionToCapabilities[c]=n,n):t.versionToCapabilities[c]?t.versionToCapabilities[c]:(s.error("Expected node "+i+" but received "+c),Promise.reject(d))}return n})}return Promise.resolve(this.versionToCapabilities[r.version])}},{key:"getFeaturesAndIdentities",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return this._getDiscoInfo(e,t,n)}},{key:"_getDiscoInfo",value:function(e,t,n){var r=this;return new Promise(function(i,o){return r.disco.info(e,t,function(e){var t=new Set,n=new Set;$(e).find(">query>feature").each(function(e,n){return t.add(n.getAttribute("var"))}),$(e).find(">query>identity").each(function(e,t){return n.add({type:t.getAttribute("type"),name:t.getAttribute("name"),category:t.getAttribute("category")})}),i({features:t,identities:n})},o,n)})}},{key:"_addChatRoom",value:function(e){this.rooms.add(e),e.addListener(o.a.MUC_MEMBER_LEFT,this._onMucMemberLeft),this._fixChatRoomPresenceMap(e)}},{key:"_removeChatRoom",value:function(e){this.rooms.delete(e),e.removeListener(o.a.MUC_MEMBER_LEFT,this._onMucMemberLeft)}},{key:"_fixChatRoomPresenceMap",value:function(e){e.addToPresence("c",{attributes:{xmlns:r.Strophe.NS.CAPS,hash:"sha-1",node:this.node,ver:this.version}})}},{key:"_notifyVersionChanged",value:function(){var e=this;this.rooms.forEach(function(t){return e._fixChatRoomPresenceMap(t)})}},{key:"_generateVersion",value:function(){this.version=h(this.disco._identities,this.disco._features),this._notifyVersionChanged()}},{key:"_handleCaps",value:function(e){var t=e.getAttribute("from"),n=e.querySelector("c"),r=n.getAttribute("ver"),i=n.getAttribute("node"),a=this.jidToVersion[t];return this.jidToVersion[t]={version:r,node:i},a&&a.version!==r&&this.eventEmitter.emit(o.a.PARTCIPANT_FEATURES_CHANGED,t),!0}},{key:"_removeJidToVersionEntry",value:function(e){e in this.jidToVersion&&delete this.jidToVersion[e]}}]),n})(a.a)}).call(this,"modules/xmpp/Caps.js")},function(e,t,n){"use strict";n.r(t),n.d(t,"ON",function(){return r}),n.d(t,"OFF",function(){return i});var r="on",i="off"},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return h});var r=n(19),i=n.n(r),o=n(4),a=n(15),s=n(8),c=n(3),u=n(10),d=Object(o.getLogger)(e),l={track_mute:"onmute",track_unmute:"onunmute",track_ended:"onended"},h=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o,a,s){var c;return _classCallCheck(this,n),(c=t.call(this)).addEventListener=c.addListener,c.removeEventListener=c.off=c.removeListener,c.containers=[],c.conference=e,c.audioLevel=-1,c.type=a,c.track=i,c.videoType=s,c.handlers=new Map,c.disposed=!1,c._streamInactiveHandler=o,c._setStream(r),c}return _createClass(n,[{key:"_addMediaStreamInactiveHandler",value:function(e){c.a.isFirefox()?this.track.onended=e:this.stream.oninactive=e}},{key:"_setHandler",value:function(e,t){if(l.hasOwnProperty(e)){if(t?this.handlers.set(e,t):this.handlers.delete(e),this.stream)for(var n,r=_createForOfIteratorHelperLoose(this.stream.getTracks());!(n=r()).done;){n.value[l[e]]=t}}else d.error("Invalid handler type "+e)}},{key:"_unregisterHandlers",value:function(){if(this.stream){for(var e,t=_createForOfIteratorHelperLoose(this.handlers.keys());!(e=t()).done;)for(var n,r=e.value,i=_createForOfIteratorHelperLoose(this.stream.getVideoTracks());!(n=i()).done;){n.value[l[r]]=void 0}this._streamInactiveHandler&&this._addMediaStreamInactiveHandler(void 0)}else d.warn(this+": unable to unregister handlers - no stream object")}},{key:"_setStream",value:function(e){if(this.stream!==e&&(this.stream=e,this.stream)){for(var t,n=_createForOfIteratorHelperLoose(this.handlers.keys());!(t=n()).done;){var r=t.value;this._setHandler(r,this.handlers.get(r))}this._streamInactiveHandler&&this._addMediaStreamInactiveHandler(this._streamInactiveHandler)}}},{key:"getType",value:function(){return this.type}},{key:"isAudioTrack",value:function(){return this.getType()===s.a}},{key:"isWebRTCTrackMuted",value:function(){return this.track&&this.track.muted}},{key:"isVideoTrack",value:function(){return this.getType()===s.c}},{key:"isLocal",value:function(){throw new Error("Not implemented by subclass")}},{key:"isLocalAudioTrack",value:function(){return this.isAudioTrack()&&this.isLocal()}},{key:"getOriginalStream",value:function(){return this.stream}},{key:"getStreamId",value:function(){return this.stream?this.stream.id:null}},{key:"getTrack",value:function(){return this.track}},{key:"getTrackLabel",value:function(){return this.track.label}},{key:"getTrackId",value:function(){return this.track?this.track.id:null}},{key:"getUsageLabel",value:function(){return this.isAudioTrack()?"mic":this.videoType?this.videoType:"default"}},{key:"_maybeFireTrackAttached",value:function(e){this.conference&&e&&this.conference._onTrackAttach(this,e)}},{key:"attach",value:function(e){this.stream&&(this._onTrackAttach(e),u.a.attachMediaStream(e,this.stream)),this.containers.push(e),this._maybeFireTrackAttached(e),this._attachTTFMTracker(e)}},{key:"detach",value:function(e){for(var t=this.containers,n=t.length-1;n>=0;--n){var r=t[n];e||(this._onTrackDetach(r),u.a.attachMediaStream(r,null)),e&&r!==e||t.splice(n,1)}e&&(this._onTrackDetach(e),u.a.attachMediaStream(e,null))}},{key:"_onTrackAttach",value:function(e){}},{key:"_onTrackDetach",value:function(e){}},{key:"_attachTTFMTracker",value:function(e){}},{key:"dispose",value:function(){return this.removeAllListeners(),this.disposed=!0,Promise.resolve()}},{key:"isScreenSharing",value:function(){}},{key:"getId",value:function(){return this.stream?u.a.getStreamID(this.stream):null}},{key:"isActive",value:function(){return void 0===this.stream.active||this.stream.active}},{key:"setAudioLevel",value:function(e,t){c.a.supportsReceiverStats()&&!this.isLocalAudioTrack()&&this.isWebRTCTrackMuted()||(this.audioLevel!==e?(this.audioLevel=e,this.emit(a.TRACK_AUDIO_LEVEL_CHANGED,e,t)):0===this.audioLevel&&0===e&&this.isLocal()&&!this.isWebRTCTrackMuted()&&this.emit(a.NO_AUDIO_INPUT,e))}},{key:"getMSID",value:function(){var e=this.getStreamId(),t=this.getTrackId();return e&&t?e+" "+t:null}},{key:"setAudioOutput",value:function(e){var t=this;return u.a.isDeviceChangeAvailable("output")?this.isVideoTrack()?Promise.resolve():Promise.all(this.containers.map(function(t){return t.setSinkId(e).catch(function(e){throw d.warn("Failed to change audio output device on element. Default or previously set audio output device will be used.",t,e),e})})).then(function(){t.emit(a.TRACK_AUDIO_OUTPUT_CHANGED,e)}):Promise.reject(new Error("Audio output device change is not supported"))}}]),n})(i.a)}).call(this,"modules/RTC/JitsiTrack.js")},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(19),i=n.n(r),o=n(12),a=n(66),s=n(22),c=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this))._procNodeSampleRate=e,o._vadProcessor=r,o._localTrack=i,o._bufferResidue=new Float32Array([]),o._audioContext=Object(a.a)({sampleRate:r.getRequiredPCMFrequency()}),o._vadSampleSize=r.getSampleLength(),o._onAudioProcess=o._onAudioProcess.bind(_assertThisInitialized(o)),o._initializeAudioContext(),o}return _createClass(n,[{key:"_initializeAudioContext",value:function(){this._audioSource=this._audioContext.createMediaStreamSource(this._localTrack.stream),this._audioProcessingNode=this._audioContext.createScriptProcessor(this._procNodeSampleRate,1,1)}},{key:"_onAudioProcess",value:function(e){for(var t=e.inputBuffer.getChannelData(0),n=[].concat(_toConsumableArray(this._bufferResidue),_toConsumableArray(t)),r=Date.now(),i=0;i+this._vadSampleSize<n.length;i+=this._vadSampleSize){var o=n.slice(i,i+this._vadSampleSize),a=this._vadProcessor.calculateAudioFrameVAD(o.slice());this.emit(s.VAD_SCORE_PUBLISHED,{timestamp:r,score:a,pcmData:o,deviceId:this._localTrack.getDeviceId()})}this._bufferResidue=n.slice(i,n.length)}},{key:"_connectAudioGraph",value:function(){this._audioProcessingNode.onaudioprocess=this._onAudioProcess,this._audioSource.connect(this._audioProcessingNode),this._audioProcessingNode.connect(this._audioContext.destination)}},{key:"_disconnectAudioGraph",value:function(){this._audioProcessingNode.onaudioprocess=function(){},this._audioProcessingNode.disconnect(),this._audioSource.disconnect()}},{key:"_cleanupResources",value:function(){this._disconnectAudioGraph(),this._localTrack.stopStream()}},{key:"getDeviceId",value:function(){return this._localTrack.getDeviceId()}},{key:"getTrackLabel",value:function(){return this._localTrack.getDeviceLabel()}},{key:"start",value:function(){this._connectAudioGraph()}},{key:"stop",value:function(){this._disconnectAudioGraph(),this._bufferResidue=[]}},{key:"destroy",value:function(){this._destroyed||(this._cleanupResources(),this._destroyed=!0)}}],[{key:"create",value:function(e,t,r){return o.a.obtainAudioAndVideoPermissions({devices:["audio"],micDeviceId:e}).then(function(i){if(!i[0])throw new Error("Failed to create jitsi local track for device id: "+e);return new n(t,r,i[0])})}}]),n})(i.a)},function(e,t,n){"use strict";function r(e){var t=window.AudioContext||window.webkitAudioContext;if(t)return new t(e)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.r(t),n.d(t,"E2E_RTT_CHANGED",function(){return r});var r="e2eping.e2e_rtt_changed"},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=(function(){function e(){var t=this;_classCallCheck(this,e),this.promise=new Promise(function(e,n){t.resolve=function(){t.clearRejectTimeout(),e.apply(void 0,arguments)},t.reject=function(){t.clearRejectTimeout(),n.apply(void 0,arguments)}}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}return _createClass(e,[{key:"clearRejectTimeout",value:function(){clearTimeout(this._timeout)}},{key:"setRejectTimeout",value:function(e){var t=this;this._timeout=setTimeout(function(){t.reject(new Error("timeout"))},e)}}]),e})()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return h}),n.d(t,"b",function(){return p});var r=n(4),i=n(25),o=n.n(i),a=n(15),s=n(8),c=n(6),u=n.n(c),d=n(3),l=Object(r.getLogger)(e),h=["1","2","3"],p=(function(){function e(t,n){_classCallCheck(this,e),this.pc=t,this.videoBitrates=n,this.localStreamEncodingsConfig=[{active:!0,maxBitrate:d.a.isFirefox()?this.videoBitrates.high:this.videoBitrates.low,rid:"1",scaleResolutionDownBy:d.a.isFirefox()?1:4},{active:!0,maxBitrate:this.videoBitrates.standard,rid:"2",scaleResolutionDownBy:2},{active:!0,maxBitrate:d.a.isFirefox()?this.videoBitrates.low:this.videoBitrates.high,rid:"3",scaleResolutionDownBy:d.a.isFirefox()?4:1}]}return _createClass(e,[{key:"ensureCorrectOrderOfSsrcs",value:function(e){var t=o.a.parse(e.sdp);return t.media.forEach(function(e){if("audio"!==e.type&&e.ssrcGroups&&e.ssrcGroups.length){var t=[];e.ssrcGroups[0].ssrcs.split(" ").forEach(function(n){var r=e.ssrcs.filter(function(e){return e.id.toString()===n});t=t.concat(r)}),e.ssrcs=t}}),new RTCSessionDescription({type:e.type,sdp:o.a.write(t)})}},{key:"_getStreamEncodings",value:function(e){return this.pc.isSimulcastOn()&&e.isVideoTrack()?this.localStreamEncodingsConfig:e.isVideoTrack()?[{active:!0,maxBitrate:this.videoBitrates.high}]:[{active:!0}]}},{key:"insertUnifiedPlanSimulcastReceive",value:function(e){if(d.a.usesSdpMungingForSimulcast())return e;var t=o.a.parse(e.sdp),n=t.media.findIndex(function(e){return"video"===e.type});if(t.media[n].rids&&(t.media[n].simulcast_03||t.media[n].simulcast))return t.media.forEach(function(e,r){"video"===e.type&&r!==n&&(t.media[r].rids=void 0,t.media[r].simulcast=void 0,t.media[r].simulcast_03=void 0)}),new RTCSessionDescription({type:e.type,sdp:o.a.write(t)});t.media[n].rids=[{id:"1",direction:"recv"},{id:"2",direction:"recv"},{id:"3",direction:"recv"}];var r=d.a.isFirefox()&&d.a.isVersionGreaterThan(71)?"recv "+h.join(";"):"recv rid="+h.join(";");return t.media[n].simulcast_03={value:r},new RTCSessionDescription({type:e.type,sdp:o.a.write(t)})}},{key:"addTrack",value:function(e,t){var n=e.getTrack();if(t){var r={direction:"sendrecv",streams:[e.getOriginalStream()],sendEncodings:[]};d.a.isFirefox()||(r.sendEncodings=this._getStreamEncodings(e)),this.pc.peerconnection.addTransceiver(n,r)}else this.pc.peerconnection.addTrack(n)}},{key:"addTrackUnmute",value:function(e){var t=this,n=e.getType(),r=e.getTrack(),i=this.pc.peerconnection.getTransceivers().find(function(e){return e.receiver&&e.receiver.track&&e.receiver.track.kind===n});return i?(l.debug("Adding "+e+" on "+this.pc),"recvonly"===i.direction?e.getOriginalStream()?(this.pc.peerconnection.addStream(e.getOriginalStream()),this.setEncodings(e).then(function(){t.pc.localTracks.set(e.rtcId,e),i.direction="sendrecv"})):Promise.resolve():i.sender.replaceTrack(r)):Promise.reject(new Error("RTCRtpTransceiver for "+n+" not found"))}},{key:"getLocalStreamHeightConstraints",value:function(e){if(d.a.isReactNative())return null;for(var t,n=[],r=e.getSettings().height,i=_createForOfIteratorHelperLoose(this.localStreamEncodingsConfig);!(t=i()).done;){var o=t.value;n.push(r/o.scaleResolutionDownBy)}return n}},{key:"removeTrackMute",value:function(e){var t=e.getType(),n=this.pc.peerconnection.getTransceivers().find(function(t){return t.sender&&t.sender.track&&t.sender.track.id===e.getTrackId()});return n?(l.debug("Removing "+e+" on "+this.pc),n.sender.replaceTrack(null)):Promise.reject(new Error("RTCRtpTransceiver for "+t+" not found"))}},{key:"replaceTrack",value:function(e,t){var n=this;if(e&&t){var r=t.getType(),i=t.getOriginalStream(),o=r===s.a?i.getAudioTracks()[0]:i.getVideoTracks()[0],c=this.pc.peerconnection.getTransceivers().find(function(e){return e.receiver.track.kind===r&&!e.stopped});return c?(l.debug("Replacing "+e+" with "+t+" on "+this.pc),c.sender.replaceTrack(o).then(function(){var r=n.pc.localSSRCs.get(e.rtcId);n.pc.localTracks.delete(e.rtcId),n.pc.localSSRCs.delete(e.rtcId),n.pc._addedStreams=n.pc._addedStreams.filter(function(e){return e!==i}),n.pc.localTracks.set(t.rtcId,t),n.pc._addedStreams.push(i),n.pc.localSSRCs.set(t.rtcId,r),n.pc.eventEmitter.emit(u.a.LOCAL_TRACK_SSRC_UPDATED,t,n.pc._extractPrimarySSRC(r))})):Promise.reject(new Error("replace track failed"))}if(e&&!t){if(!this.removeTrackMute(e))return Promise.reject(new Error("replace track failed"));this.pc.localTracks.delete(e.rtcId),this.pc.localSSRCs.delete(e.rtcId)}else if(t&&!e){var d=this.pc.localSSRCs.get(t.rtcId);this.addTrackUnmute(t).then(function(){t.emit(a.TRACK_MUTE_CHANGED,t),n.pc.localTracks.set(t.rtcId,t),n.pc.localSSRCs.set(t.rtcId,d)})}return Promise.resolve()}},{key:"setAudioTransferActive",value:function(e){this.setMediaTransferActive(s.a,e)}},{key:"setEncodings",value:function(e){var t=this.pc.peerconnection.getTransceivers().find(function(t){return t.sender&&t.sender.track&&t.sender.track.kind===e.getType()}),n=t.sender.getParameters();return n.encodings=this._getStreamEncodings(e),t.sender.setParameters(n)}},{key:"setMediaTransferActive",value:function(e,t){var n=this.pc.peerconnection.getTransceivers().filter(function(t){return t.receiver&&t.receiver.track&&t.receiver.track.kind===e}),r=this.pc.getLocalTracks(e);l.info((t?"Enabling":"Suspending")+" "+e+" media transfer on "+this.pc),n.forEach(function(e,n){t?0===n&&r.length?e.direction="sendrecv":e.direction="recvonly":e.direction="inactive"})}},{key:"setVideoTransferActive",value:function(e){this.setMediaTransferActive(s.c,e)}}]),e})()}).call(this,"modules/RTC/TPCUtils.js")},function(e,t){e.exports=(function(){"use strict";function e(t,n,r){_classCallCheck(this,e),this._userId=t,this.setDisplayName(n),this._isLocalStats=r||!1,this.setDominantSpeaker(!1),this.totalDominantSpeakerTime=0,this._dominantSpeakerStart=0,this._hasLeft=!1}return _createClass(e,[{key:"getUserId",value:function(){return this._userId}},{key:"getDisplayName",value:function(){return this.displayName}},{key:"setDisplayName",value:function(e){this.displayName=e}},{key:"isLocalStats",value:function(){return this._isLocalStats}},{key:"isDominantSpeaker",value:function(){return this._dominantSpeakerStart>0}},{key:"setDominantSpeaker",value:function(e){if(!this.isDominantSpeaker()&&e)this._dominantSpeakerStart=Date.now();else if(this.isDominantSpeaker()&&!e){var t=Date.now()-this._dominantSpeakerStart;this.totalDominantSpeakerTime+=t,this._dominantSpeakerStart=0}}},{key:"getTotalDominantSpeakerTime",value:function(){var e=this.totalDominantSpeakerTime;return this.isDominantSpeaker()&&(e+=Date.now()-this._dominantSpeakerStart),e}},{key:"hasLeft",value:function(){return this._hasLeft}},{key:"markAsHasLeft",value:function(){this._hasLeft=!0,this.setDominantSpeaker(!1)}}]),e})()},function(e,t){e.exports={IDENTITY_UPDATED:"authentication.identity_updated"}},function(module,exports,__webpack_require__){(function(process,global){var __WEBPACK_AMD_DEFINE_RESULT__;!(function(){"use strict";var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD=__webpack_require__(149),ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}!root.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e){return function(t){return new Md5(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Md5},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createOutputMethod(n)}return e},nodeWrap=function nodeWrap(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("md5").update(e,"utf8").digest("hex");if(null==e)throw ERROR;return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash("md5").update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod};function Md5(e){if(e)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(e){if(!this.finalized){var t,n=typeof e;if("string"!==n){if("object"!==n)throw ERROR;if(null===e)throw ERROR;if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw ERROR;t=!0}for(var r,i,o=0,a=e.length,s=this.blocks,c=this.buffer8;o<a;){if(this.hashed&&(this.hashed=!1,s[0]=s[16],s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)if(ARRAY_BUFFER)for(i=this.start;o<a&&i<64;++o)c[i++]=e[o];else for(i=this.start;o<a&&i<64;++o)s[i>>2]|=e[o]<<SHIFT[3&i++];else if(ARRAY_BUFFER)for(i=this.start;o<a&&i<64;++o)(r=e.charCodeAt(o))<128?c[i++]=r:r<2048?(c[i++]=192|r>>6,c[i++]=128|63&r):r<55296||r>=57344?(c[i++]=224|r>>12,c[i++]=128|r>>6&63,c[i++]=128|63&r):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++o)),c[i++]=240|r>>18,c[i++]=128|r>>12&63,c[i++]=128|r>>6&63,c[i++]=128|63&r);else for(i=this.start;o<a&&i<64;++o)(r=e.charCodeAt(o))<128?s[i>>2]|=r<<SHIFT[3&i++]:r<2048?(s[i>>2]|=(192|r>>6)<<SHIFT[3&i++],s[i>>2]|=(128|63&r)<<SHIFT[3&i++]):r<55296||r>=57344?(s[i>>2]|=(224|r>>12)<<SHIFT[3&i++],s[i>>2]|=(128|r>>6&63)<<SHIFT[3&i++],s[i>>2]|=(128|63&r)<<SHIFT[3&i++]):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++o)),s[i>>2]|=(240|r>>18)<<SHIFT[3&i++],s[i>>2]|=(128|r>>12&63)<<SHIFT[3&i++],s[i>>2]|=(128|r>>6&63)<<SHIFT[3&i++],s[i>>2]|=(128|63&r)<<SHIFT[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=EXTRA[3&t],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var e,t,n,r,i,o,a=this.blocks;this.first?t=((t=((e=((e=a[0]-680876937)<<7|e>>>25)-271733879<<0)^(n=((n=(-271733879^(r=((r=(-1732584194^2004318071&e)+a[1]-117830708)<<12|r>>>20)+e<<0)&(-271733879^e))+a[2]-1126478375)<<17|n>>>15)+r<<0)&(r^e))+a[3]-1316259209)<<22|t>>>10)+n<<0:(e=this.h0,t=this.h1,n=this.h2,t=((t+=((e=((e+=((r=this.h3)^t&(n^r))+a[0]-680876936)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+a[1]-389564586)<<12|r>>>20)+e<<0)&(e^t))+a[2]+606105819)<<17|n>>>15)+r<<0)&(r^e))+a[3]-1044525330)<<22|t>>>10)+n<<0),t=((t+=((e=((e+=(r^t&(n^r))+a[4]-176418897)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+a[5]+1200080426)<<12|r>>>20)+e<<0)&(e^t))+a[6]-1473231341)<<17|n>>>15)+r<<0)&(r^e))+a[7]-45705983)<<22|t>>>10)+n<<0,t=((t+=((e=((e+=(r^t&(n^r))+a[8]+1770035416)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+a[9]-1958414417)<<12|r>>>20)+e<<0)&(e^t))+a[10]-42063)<<17|n>>>15)+r<<0)&(r^e))+a[11]-1990404162)<<22|t>>>10)+n<<0,t=((t+=((e=((e+=(r^t&(n^r))+a[12]+1804603682)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+a[13]-40341101)<<12|r>>>20)+e<<0)&(e^t))+a[14]-1502002290)<<17|n>>>15)+r<<0)&(r^e))+a[15]+1236535329)<<22|t>>>10)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+a[1]-165796510)<<5|e>>>27)+t<<0)^t))+a[6]-1069501632)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+a[11]+643717713)<<14|n>>>18)+r<<0)^r))+a[0]-373897302)<<20|t>>>12)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+a[5]-701558691)<<5|e>>>27)+t<<0)^t))+a[10]+38016083)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+a[15]-660478335)<<14|n>>>18)+r<<0)^r))+a[4]-405537848)<<20|t>>>12)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+a[9]+568446438)<<5|e>>>27)+t<<0)^t))+a[14]-1019803690)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+a[3]-187363961)<<14|n>>>18)+r<<0)^r))+a[8]+1163531501)<<20|t>>>12)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+a[13]-1444681467)<<5|e>>>27)+t<<0)^t))+a[2]-51403784)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+a[7]+1735328473)<<14|n>>>18)+r<<0)^r))+a[12]-1926607734)<<20|t>>>12)+n<<0,t=((t+=((o=(r=((r+=((i=t^n)^(e=((e+=(i^r)+a[5]-378558)<<4|e>>>28)+t<<0))+a[8]-2022574463)<<11|r>>>21)+e<<0)^e)^(n=((n+=(o^t)+a[11]+1839030562)<<16|n>>>16)+r<<0))+a[14]-35309556)<<23|t>>>9)+n<<0,t=((t+=((o=(r=((r+=((i=t^n)^(e=((e+=(i^r)+a[1]-1530992060)<<4|e>>>28)+t<<0))+a[4]+1272893353)<<11|r>>>21)+e<<0)^e)^(n=((n+=(o^t)+a[7]-155497632)<<16|n>>>16)+r<<0))+a[10]-1094730640)<<23|t>>>9)+n<<0,t=((t+=((o=(r=((r+=((i=t^n)^(e=((e+=(i^r)+a[13]+681279174)<<4|e>>>28)+t<<0))+a[0]-358537222)<<11|r>>>21)+e<<0)^e)^(n=((n+=(o^t)+a[3]-722521979)<<16|n>>>16)+r<<0))+a[6]+76029189)<<23|t>>>9)+n<<0,t=((t+=((o=(r=((r+=((i=t^n)^(e=((e+=(i^r)+a[9]-640364487)<<4|e>>>28)+t<<0))+a[12]-421815835)<<11|r>>>21)+e<<0)^e)^(n=((n+=(o^t)+a[15]+530742520)<<16|n>>>16)+r<<0))+a[2]-995338651)<<23|t>>>9)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+a[0]-198630844)<<6|e>>>26)+t<<0)|~n))+a[7]+1126891415)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+a[14]-1416354905)<<15|n>>>17)+r<<0)|~e))+a[5]-57434055)<<21|t>>>11)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+a[12]+1700485571)<<6|e>>>26)+t<<0)|~n))+a[3]-1894986606)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+a[10]-1051523)<<15|n>>>17)+r<<0)|~e))+a[1]-2054922799)<<21|t>>>11)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+a[8]+1873313359)<<6|e>>>26)+t<<0)|~n))+a[15]-30611744)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+a[6]-1560198380)<<15|n>>>17)+r<<0)|~e))+a[13]+1309151649)<<21|t>>>11)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+a[4]-145523070)<<6|e>>>26)+t<<0)|~n))+a[11]-1120210379)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+a[2]+718787259)<<15|n>>>17)+r<<0)|~e))+a[9]-343485551)<<21|t>>>11)+n<<0,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=n-1732584194<<0,this.h3=r+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0)},Md5.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3;return HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3;return[255&e,e>>8&255,e>>16&255,e>>24&255,255&t,t>>8&255,t>>16&255,t>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,255&r,r>>8&255,r>>16&255,r>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var e,t,n,r="",i=this.array(),o=0;o<15;)e=i[o++],t=i[o++],n=i[o++],r+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[63&(e<<4|t>>>4)]+BASE64_ENCODE_CHAR[63&(t<<2|n>>>6)]+BASE64_ENCODE_CHAR[63&n];return e=i[o],r+(BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[e<<4&63]+"==")};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()}).call(this,__webpack_require__(59),__webpack_require__(44))},function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,u=s||c||Function("return this")(),d=Object.prototype.toString,l=Math.max,h=Math.min,p=function(){return u.Date.now()};function f(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if((function(e){return"symbol"==typeof e||(function(e){return!!e&&"object"==typeof e})(e)&&"[object Symbol]"==d.call(e)})(e))return NaN;if(f(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=f(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var s=i.test(e);return s||o.test(e)?a(e.slice(2),s?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,o,a,s,c,u=0,d=!1,v=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function _(t){var n=r,o=i;return r=i=void 0,u=t,a=e.apply(o,n)}function y(e){return u=e,s=setTimeout(E,t),d?_(e):a}function S(e){var n=e-c;return void 0===c||n>=t||n<0||v&&e-u>=o}function E(){var e=p();if(S(e))return b(e);s=setTimeout(E,(function(e){var n=t-(e-c);return v?h(n,o-(e-u)):n})(e))}function b(e){return s=void 0,g&&r?_(e):(r=i=void 0,a)}function C(){var e=p(),n=S(e);if(r=arguments,i=this,c=e,n){if(void 0===s)return y(c);if(v)return s=setTimeout(E,t),_(c)}return void 0===s&&(s=setTimeout(E,t)),a}return t=m(t)||0,f(n)&&(d=!!n.leading,o=(v="maxWait"in n)?l(m(n.maxWait)||0,t):o,g="trailing"in n?!!n.trailing:g),C.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=c=i=s=void 0},C.flush=function(){return void 0===s?a:b(p())},C}}).call(this,n(44))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return S});var r=n(4),i=n(18),o=n(14),a=n(15),s=n(43),c=n.n(s),u=n(8),d=n(6),l=n.n(d),h=n(13),p=n.n(h),f=n(7),m=n(3),v=n(5),g=n(64),_=n(10),y=Object(r.getLogger)(e),S=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,i=e.deviceId,o=e.facingMode,s=e.mediaType,c=e.resolution,u=e.rtcId,d=e.sourceId,h=e.sourceType,f=e.stream,v=e.track,g=e.videoType,y=e.effects,S=void 0===y?[]:y;_classCallCheck(this,n),(r=t.call(this,null,f,v,function(){return r.emit(a.LOCAL_TRACK_STOPPED)},s,g))._setEffectInProgress=!1;var E=S.find(function(e){return e.isEnabled(_assertThisInitialized(r))});return E&&r._startStreamEffect(E),r.rtcId=u,r.sourceId=d,r.sourceType=h,m.a.usesNewGumFlow()?(r.resolution=v.getSettings().height,r.maxEnabledResolution=c,r._constraints=v.getConstraints(),Object.keys(r._constraints).length||g!==p.a.CAMERA||(r._constraints={height:v.getSettings().height,width:v.getSettings().width})):(r.resolution=m.a.isFirefox()?null:c,r.maxEnabledResolution=r.resolution),r.deviceId=i,r._prevSetMuted=Promise.resolve(),r._facingMode=o,r._trackEnded=!1,r._hasSentData=!1,r._testDataSent=!0,r._realDeviceId=""===r.deviceId?void 0:r.deviceId,r._trackMutedTS=0,r._onDeviceListWillChange=function(e){var t=r._realDeviceId;r._setRealDeviceIdFromDeviceList(e),(void 0===r.getTrack().readyState&&void 0!==r._realDeviceId&&!e.find(function(e){return e.deviceId===r._realDeviceId})||void 0!==t&&void 0===r._realDeviceId)&&(r._trackEnded=!0)},r.isAudioTrack()&&_.a.isDeviceChangeAvailable("output")&&(r._onAudioOutputDeviceChanged=r.setAudioOutput.bind(_assertThisInitialized(r)),_.a.addListener(l.a.AUDIO_OUTPUT_DEVICE_CHANGED,r._onAudioOutputDeviceChanged)),_.a.addListener(l.a.DEVICE_LIST_WILL_CHANGE,r._onDeviceListWillChange),r._initNoDataFromSourceHandlers(),r}return _createClass(n,[{key:"isEnded",value:function(){return this.isVideoTrack()&&this.isMuted()?this._trackEnded:"ended"===this.getTrack().readyState||this._trackEnded}},{key:"_initNoDataFromSourceHandlers",value:function(){var e=this;this._isNoDataFromSourceEventsEnabled()&&(this._setHandler("track_mute",function(){e._trackMutedTS=window.performance.now(),e._fireNoDataFromSourceEvent()}),this._setHandler("track_unmute",function(){e._fireNoDataFromSourceEvent(),v.a.sendAnalyticsAndLog(f.s,{media_type:e.getType(),track_type:"local",value:window.performance.now()-e._trackMutedTS})}),this.isVideoTrack()&&this.videoType===p.a.CAMERA&&this._setHandler("track_ended",function(){e.isReceivingData()||e._fireNoDataFromSourceEvent()}))}},{key:"_isNoDataFromSourceEventsEnabled",value:function(){return!this.isVideoTrack()||this.videoType!==p.a.DESKTOP}},{key:"_fireNoDataFromSourceEvent",value:function(){var e=!this.isReceivingData();this.emit(a.NO_DATA_FROM_SOURCE,e),v.a.sendAnalytics(Object(f.H)(this.getType(),e)),v.a.sendLog(JSON.stringify({name:a.NO_DATA_FROM_SOURCE,log:e}))}},{key:"_setRealDeviceIdFromDeviceList",value:function(e){var t=this.getTrack(),n=t.kind+"input",r=e.find(function(e){return e.kind===n&&e.label===t.label});if(!r&&"default"===this._realDeviceId){var i=(t.label||"").replace("Default - ","");r=e.find(function(e){return e.kind===n&&e.label===i})}this._realDeviceId=r?r.deviceId:void 0}},{key:"_setStream",value:function(e){_get(_getPrototypeOf(n.prototype),"_setStream",this).call(this,e),e?(this.storedMSID=this.getMSID(),y.debug("Setting new MSID: "+this.storedMSID+" on "+this)):y.debug("Setting 'null' stream on "+this)}},{key:"_startStreamEffect",value:function(e){this._streamEffect=e,this._originalStream=this.stream,this._setStream(this._streamEffect.startEffect(this._originalStream)),this.track=this.stream.getTracks()[0]}},{key:"_stopStreamEffect",value:function(){this._streamEffect&&(this._streamEffect.stopEffect(),this._setStream(this._originalStream),this._originalStream=null,this.track=this.stream.getTracks()[0])}},{key:"_switchStreamEffect",value:function(e){this._streamEffect&&(this._stopStreamEffect(),this._streamEffect=void 0),e&&this._startStreamEffect(e)}},{key:"setEffect",value:function(e){var t=this;if(void 0===this._streamEffect&&void 0===e)return Promise.resolve();if(void 0!==e&&!e.isEnabled(this))return Promise.reject(new Error("Incompatible effect instance!"));if(!0===this._setEffectInProgress)return Promise.reject(new Error("setEffect already in progress!"));if(this.isMuted()&&!this.isAudioTrack())return this._streamEffect=e,Promise.resolve();var n=this.conference;return n?(this._setEffectInProgress=!0,m.a.usesUnifiedPlan()?(this._switchStreamEffect(e),this.isVideoTrack()&&this.containers.forEach(function(e){return _.a.attachMediaStream(e,t.stream)}),n.replaceTrack(this,this).then(function(){t._setEffectInProgress=!1}).catch(function(e){throw t._setEffectInProgress=!1,t._switchStreamEffect(),y.error("Failed to switch to the new stream!",e),e})):n.removeTrack(this).then(function(){return t._switchStreamEffect(e),t.isVideoTrack()&&t.containers.forEach(function(e){return _.a.attachMediaStream(e,t.stream)}),n.addTrack(t)}).then(function(){t._setEffectInProgress=!1}).catch(function(e){throw t._setEffectInProgress=!1,t._switchStreamEffect(),y.error("Failed to switch to the new stream!",e),e})):(this._switchStreamEffect(e),Promise.resolve())}},{key:"mute",value:function(){return this._queueSetMuted(!0)}},{key:"unmute",value:function(){return this._queueSetMuted(!1)}},{key:"_queueSetMuted",value:function(e){var t=this._setMuted.bind(this,e);return this._prevSetMuted=this._prevSetMuted.then(t,t),this._prevSetMuted}},{key:"_setMuted",value:function(e){var t=this;if(this.isMuted()===e)return Promise.resolve();if(this.disposed)return Promise.reject(new i.a(o.TRACK_IS_DISPOSED));var n=Promise.resolve(),r=function(){return y.info("Mute "+t+": "+e)};if(this.isAudioTrack()||this.videoType===p.a.DESKTOP||!m.a.doesVideoMuteByStreamRemove())r(),this.track&&(this.track.enabled=!e);else if(e)n=new Promise(function(e,n){r(),t._removeStreamFromConferenceAsMute(function(){t._streamEffect&&t._stopStreamEffect(),t._unregisterHandlers(),t.stopStream(),t._setStream(null),e()},n)});else{r();var s={cameraDeviceId:this.getDeviceId(),devices:[u.c],effects:this._streamEffect?[this._streamEffect]:[],facingMode:this.getCameraFacingMode()};m.a.usesNewGumFlow()?n=_.a.newObtainAudioAndVideoPermissions(_extends({},s,{constraints:{video:this._constraints}})):(this.resolution&&(s.resolution=this.resolution),n=_.a.obtainAudioAndVideoPermissions(s)),n=n.then(function(e){var n=t.getType()===u.b?u.c:t.getType(),r=m.a.usesNewGumFlow()?e.find(function(e){return e.track.kind===n}):e.find(function(e){return e.mediaType===n});if(!r)throw new i.a(o.TRACK_NO_STREAM_FOUND);return t._setStream(r.stream),t.track=r.track,t.videoType!==r.videoType&&(y.warn(t+": video type has changed after unmute!",t.videoType,r.videoType),t.videoType=r.videoType),t._streamEffect&&t._startStreamEffect(t._streamEffect),t.containers.map(function(e){return _.a.attachMediaStream(e,t.stream)}),t._addStreamToConferenceAsUnmute()})}return n.then(function(){return t._sendMuteStatus(e)}).then(function(){return t.emit(a.TRACK_MUTE_CHANGED,t)})}},{key:"_addStreamToConferenceAsUnmute",value:function(){var e=this;return this.conference?new Promise(function(t,n){e.conference._addLocalTrackAsUnmute(e).then(t,function(e){return n(new Error(e))})}):Promise.resolve()}},{key:"_removeStreamFromConferenceAsMute",value:function(e,t){this.conference?this.conference._removeLocalTrackAsMute(this).then(e,function(e){return t(new Error(e))}):e()}},{key:"_sendMuteStatus",value:function(e){var t=this;return this.conference&&this.conference.room?new Promise(function(n){t.conference.room[t.isAudioTrack()?"setAudioMute":"setVideoMute"](e,n)}):Promise.resolve()}},{key:"dispose",value:function(){var e=this;this._switchStreamEffect();var t=Promise.resolve();return this.conference&&(t=this.conference.removeTrack(this)),this.stream&&(this.stopStream(),this.detach()),_.a.removeListener(l.a.DEVICE_LIST_WILL_CHANGE,this._onDeviceListWillChange),this._onAudioOutputDeviceChanged&&_.a.removeListener(l.a.AUDIO_OUTPUT_DEVICE_CHANGED,this._onAudioOutputDeviceChanged),t.then(function(){return _get(_getPrototypeOf(n.prototype),"dispose",e).call(e)})}},{key:"isMuted",value:function(){return!(this.stream&&(!this.isVideoTrack()||this.isActive())&&this.track&&this.track.enabled)}},{key:"_setConference",value:function(e){this.conference=e;for(var t=0;t<this.containers.length;t++)this._maybeFireTrackAttached(this.containers[t])}},{key:"isLocal",value:function(){return!0}},{key:"getDeviceId",value:function(){return this._realDeviceId||this.deviceId}},{key:"getParticipantId",value:function(){return this.conference&&this.conference.myUserId()}},{key:"_onByteSentStatsReceived",value:function(e,t){var n=this;t>0&&(this._hasSentData=!0);var r=e.getConnectionState();this._testDataSent&&"connected"===r&&(setTimeout(function(){n._hasSentData||(y.warn(n+" 'bytes sent' <= 0:                         "+t),v.a.analytics.sendEvent(f.r,{media_type:n.getType()}))},3e3),this._testDataSent=!1)}},{key:"getCameraFacingMode",value:function(){if(this.isVideoTrack()&&this.videoType===p.a.CAMERA){var e;try{e=this.track.getSettings()}catch(e){}return e&&"facingMode"in e?e.facingMode:void 0!==this._facingMode?this._facingMode:c.a.USER}}},{key:"stopStream",value:function(){this._stopStreamInProgress=!0;try{_.a.stopMediaStream(this.stream)}finally{this._stopStreamInProgress=!1}}},{key:"_switchCamera",value:function(){this.isVideoTrack()&&this.videoType===p.a.CAMERA&&"function"==typeof this.track._switchCamera&&(this.track._switchCamera(),this._facingMode=this._facingMode===c.a.ENVIRONMENT?c.a.USER:c.a.ENVIRONMENT)}},{key:"isReceivingData",value:function(){return!(!this.isVideoTrack()||!this.isMuted()&&!this._stopStreamInProgress&&this.videoType!==p.a.DESKTOP)||!!this.stream&&(this._effectEnabled?this._originalStream:this.stream).getTracks().some(function(e){return!("readyState"in e&&"live"!==e.readyState||"muted"in e&&!0===e.muted)})}},{key:"toString",value:function(){return"LocalTrack["+this.rtcId+","+this.getType()+"]"}}]),n})(g.a)}).call(this,"modules/RTC/JitsiLocalTrack.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return u});var r=n(19),i=n(4),o=n(1),a=n(22),s=n(65),c=Object(i.getLogger)(e),u=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this))._createVADProcessor=r,i._vadEmitter=null,i._isVADEmitterRunning=!1,i._detectionServices=[],i._vadInitTracker=Promise.resolve(),i._processVADScore=i._processVADScore.bind(_assertThisInitialized(i)),e.on(o.TRACK_ADDED,i._trackAdded.bind(_assertThisInitialized(i))),e.on(o.TRACK_REMOVED,i._trackRemoved.bind(_assertThisInitialized(i))),e.on(o.TRACK_MUTE_CHANGED,i._trackMuteChanged.bind(_assertThisInitialized(i))),i}return _createClass(n,[{key:"addVADDetectionService",value:function(e){var t=this;this._detectionServices.push(e),e.on(a.DETECTOR_STATE_CHANGE,function(){!t._detectionServices.filter(function(e){return!0===e.isActive()}).length&&t._isVADEmitterRunning?t._stopVADEmitter():t._isVADEmitterRunning||t._startVADEmitter()})}},{key:"_startVADEmitter",value:function(){this._vadEmitter.on(a.VAD_SCORE_PUBLISHED,this._processVADScore),this._vadEmitter.start(),this._isVADEmitterRunning=!0}},{key:"_stopVADEmitter",value:function(){this._vadEmitter.removeListener(a.VAD_SCORE_PUBLISHED,this._processVADScore),this._vadEmitter.stop(),this._isVADEmitterRunning=!1}},{key:"_processVADScore",value:function(e){for(var t,n=_createForOfIteratorHelperLoose(this._detectionServices);!(t=n()).done;){t.value.processVADScore(e)}}},{key:"_changeDetectorsMuteState",value:function(e){for(var t,n=_createForOfIteratorHelperLoose(this._detectionServices);!(t=n()).done;){t.value.changeMuteState(e)}}},{key:"_trackAdded",value:function(e){var t=this;e.isLocalAudioTrack()&&(this._vadInitTracker=this._vadInitTracker.then(function(){return t._createVADProcessor()}).then(function(t){return s.a.create(e.getDeviceId(),4096,t)}).then(function(n){c.debug("Created VAD emitter for track: ",e.getTrackLabel()),t._vadEmitter=n,t._changeDetectorsMuteState(e.isMuted())}))}},{key:"_trackMuteChanged",value:function(e){var t=this;e.isLocalAudioTrack()&&(this._vadInitTracker=this._vadInitTracker.then(function(){t._changeDetectorsMuteState(e.isMuted())}))}},{key:"_trackRemoved",value:function(e){var t=this;e.isLocalAudioTrack()&&(this._vadInitTracker=this._vadInitTracker.then(function(){c.debug("Removing track from VAD detection - ",e.getTrackLabel()),t._vadEmitter&&(t._stopVADEmitter(),t._vadEmitter.destroy(),t._vadEmitter=null);for(var n,r=_createForOfIteratorHelperLoose(t._detectionServices);!(n=r()).done;){n.value.reset()}}))}}]),n})(r.EventEmitter)}).call(this,"modules/detection/VADAudioAnalyser.js")},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(2),i=n(51),o=(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this._connection=t.connection,this._mode=t.mode,this._setSessionID(t.sessionID),this.setStatus(t.status)}return _createClass(e,[{key:"getError",value:function(){return this._error}},{key:"getID",value:function(){return this._sessionID}},{key:"getInitiator",value:function(){return this._initiator}},{key:"getLiveStreamViewURL",value:function(){return this._liveStreamViewURL}},{key:"getStatus",value:function(){return this._status}},{key:"getTerminator",value:function(){return this._terminator}},{key:"getMode",value:function(){return this._mode}},{key:"setError",value:function(e){this._error=e}},{key:"setLiveStreamViewURL",value:function(e){this._liveStreamViewURL=e}},{key:"setStatus",value:function(e){this._status=e}},{key:"setInitiator",value:function(e){this._initiator=e}},{key:"setTerminator",value:function(e){this._terminator=e}},{key:"start",value:function(e){var t=this,n=e.appData,r=e.broadcastId,o=e.focusMucJid,a=e.streamId;return new Promise(function(e,s){t._connection.sendIQ(t._createIQ({action:"start",appData:n,focusMucJid:o,broadcastId:r,streamId:a}),function(n){t.setStatus("pending"),t._setSessionID(i.a.getSessionIdFromIq(n)),e()},function(e){t._setErrorFromIq(e),s(e)})})}},{key:"stop",value:function(e){var t=this,n=e.focusMucJid;return new Promise(function(e,r){t._connection.sendIQ(t._createIQ({action:"stop",focusMucJid:n}),e,r)})}},{key:"_createIQ",value:function(e){var t=e.action,n=e.appData,i=e.broadcastId,o=e.focusMucJid,a=e.streamId;return Object(r.$iq)({to:o,type:"set"}).c("jibri",{xmlns:"http://abcpen.com/protocol/jibri",action:t,app_data:n,recording_mode:this._mode,streamid:a,you_tube_broadcast_id:i}).up()}},{key:"_setErrorFromIq",value:function(e){var t=e.getElementsByTagName("error")[0];this.setError(t.children[0].tagName)}},{key:"_setSessionID",value:function(e){this._sessionID=e}}]),e})()},function(e,t,n){"use strict";var r=n(19),i=n.n(r),o=n(55),a=n(12),s=n(3),c=n(5),u=n(8),d=n(6),l=n.n(d);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=new((function(){function e(){var t=this;_classCallCheck(this,e),this._eventEmitter=new i.a,this._grantedPermissions={},a.a.addListener(l.a.DEVICE_LIST_CHANGED,function(e){return t._eventEmitter.emit(o.DEVICE_LIST_CHANGED,e)}),a.a.addListener(l.a.DEVICE_LIST_AVAILABLE,function(e){return t._logOutputDevice(t.getAudioOutputDevice(),e)}),a.a.addListener(l.a.GRANTED_PERMISSIONS,function(e){return t._handleGrantedPermissions(e)}),this._permissionsApiSupported=new Promise(function(e){navigator.permissions?navigator.permissions.query({name:"camera"}).then(function(){return e(!0)},function(){return e(!1)}):e(!1)})}return _createClass(e,[{key:"_handleGrantedPermissions",value:function(e){this._grantedPermissions=(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){h(e,t,n[t])})}return e})({},this._grantedPermissions,e)}},{key:"_logOutputDevice",value:function(e,t){var n=t.find(function(t){return"audiooutput"===t.kind&&t.deviceId===e});n&&c.a.sendActiveDeviceListEvent(a.a.getEventDataForActiveDevice(n))}},{key:"enumerateDevices",value:function(e){a.a.enumerateDevices(e)}},{key:"isDeviceListAvailable",value:function(){return a.a.isDeviceListAvailable()}},{key:"isDeviceChangeAvailable",value:function(e){return a.a.isDeviceChangeAvailable(e)}},{key:"isDevicePermissionGranted",value:function(e){var t=this;return new Promise(function(n){e in t._grantedPermissions?n(t._grantedPermissions[e]):t._permissionsApiSupported.then(function(t){if(!t)return s.a.isSafari()?void n(!0):void n(!1);var r=[];switch(e){case u.c:r.push(navigator.permissions.query({name:"camera"}));break;case u.a:r.push(navigator.permissions.query({name:"microphone"}));break;default:r.push(navigator.permissions.query({name:"camera"})),r.push(navigator.permissions.query({name:"microphone"}))}Promise.all(r).then(function(e){return n(e.every(function(e){return"granted"===(e.state||e.status)}))},function(){return n(!1)})})})}},{key:"isMultipleAudioInputSupported",value:function(){return!s.a.isFirefox()}},{key:"getAudioOutputDevice",value:function(){return a.a.getAudioOutputDevice()}},{key:"setAudioOutputDevice",value:function(e){return a.a.getCurrentlyAvailableMediaDevices().length>0&&this._logOutputDevice(e,a.a.getCurrentlyAvailableMediaDevices()),a.a.setAudioOutputDevice(e)}},{key:"addEventListener",value:function(e,t){this._eventEmitter.addListener(e,t)}},{key:"removeEventListener",value:function(e,t){this._eventEmitter.removeListener(e,t)}},{key:"emitEvent",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this._eventEmitter).emit.apply(t,[e].concat(r))}},{key:"supportsVideo",value:function(){return s.a.supportsVideo()}}]),e})())},function(e,t){var n={trace:0,debug:1,info:2,log:3,warn:4,error:5};s.consoleTransport=console;var r=[s.consoleTransport];s.addGlobalTransport=function(e){-1===r.indexOf(e)&&r.push(e)},s.removeGlobalTransport=function(e){var t=r.indexOf(e);-1!==t&&r.splice(t,1)};var i={};function o(){var e={methodName:"",fileLocation:"",line:null,column:null},t=new Error,n=t.stack?t.stack.split("\n"):[];if(!n||n.length<1)return e;var r=null;return n[3]&&(r=n[3].match(/\s*at\s*(.+?)\s*\((\S*)\s*:(\d*)\s*:(\d*)\)/)),!r||r.length<=4?(0===n[2].indexOf("log@")?e.methodName=n[3].substr(0,n[3].indexOf("@")):e.methodName=n[2].substr(0,n[2].indexOf("@")),e):(e.methodName=r[1],e.fileLocation=r[2],e.line=r[3],e.column=r[4],e)}function a(){var e=arguments[0],t=arguments[1],a=Array.prototype.slice.call(arguments,2);if(!(n[t]<e.level))for(var s=!(e.options.disableCallerInfo||i.disableCallerInfo)&&o(),c=r.concat(e.transports),u=0;u<c.length;u++){var d=c[u],l=d[t];if(l&&"function"==typeof l){var h=[];h.push((new Date).toISOString()),e.id&&h.push("["+e.id+"]"),s&&s.methodName.length>1&&h.push("<"+s.methodName+">: ");var p=h.concat(a);l.bind(d).apply(d,p)}}}function s(e,t,r,i){this.id=t,this.options=i||{},this.transports=r,this.transports||(this.transports=[]),this.level=n[e];for(var o=Object.keys(n),s=0;s<o.length;s++)this[o[s]]=a.bind(null,this,o[s])}s.setGlobalOptions=function(e){i=e||{}},s.prototype.setLevel=function(e){this.level=n[e]},e.exports=s,s.levels={TRACE:"trace",DEBUG:"debug",INFO:"info",LOG:"log",WARN:"warn",ERROR:"error"}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var n=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-\.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))? (\S*)(?: (\S*))?/,names:["value","direction","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+" %s"+(e.config?" %s":"")}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),(t+=null!=e["network-id"]?" network-id %d":"%v")+(null!=e["network-cost"]?" network-cost %d":"%v")}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{push:"invalid",names:["value"]}]};Object.keys(n).forEach(function(e){n[e].forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})})},function(e,t,n){var r=n(160),i=function(e){this.track=e,this.recorder=null,this.data=null,this.name=null,this.startTime=null};function o(e){if(void 0===e.recorder)throw new Error("Passed an object to startRecorder which is not a TrackRecorder object");e.recorder.start(),e.startTime=new Date}function a(e){if(void 0===e.recorder)throw new Error("Passed an object to stopRecorder which is not a TrackRecorder object");e.recorder.stop()}function s(){if(MediaRecorder.isTypeSupported("audio/webm"))return"audio/webm";if(MediaRecorder.isTypeSupported("audio/ogg"))return"audio/ogg";throw new Error("unable to create a MediaRecorder with the right mimetype!")}function c(e){this.recorders=[],this.fileType=s(),this.isRecording=!1,this.jitsiConference=e}c.determineCorrectFileType=s,c.prototype.addTrack=function(e){if(e.isAudioTrack()){var t=this.instantiateTrackRecorder(e);this.recorders.push(t),this.updateNames(),this.isRecording&&o(t)}},c.prototype.instantiateTrackRecorder=function(e){var t=new i(e),n=t.track.getOriginalStream(),r=(function(){if("undefined"!=typeof MediaStream)return new MediaStream;throw new Error("cannot create a clean mediaStream")})();return n.getAudioTracks().forEach(function(e){return r.addTrack(e)}),t.recorder=new MediaRecorder(r,{mimeType:this.fileType}),t.data=[],t.recorder.ondataavailable=function(e){e.data.size>0&&t.data.push(e.data)},t},c.prototype.removeTrack=function(e){if(!e.isVideoTrack()){var t,n=this.recorders;for(t=0;t<n.length;t++)if(n[t].track.getParticipantId()===e.getParticipantId()){var r=n[t];this.isRecording?a(r):n.splice(t,1)}this.updateNames()}},c.prototype.updateNames=function(){var e=this.jitsiConference;this.recorders.forEach(function(t){if(t.track.isLocal())t.name="the transcriber";else{var n=t.track.getParticipantId(),r=e.getParticipantById(n).getDisplayName();"undefined"!==r&&(t.name=r)}})},c.prototype.start=function(){if(this.isRecording)throw new Error("audiorecorder is already recording");this.isRecording=!0,this.recorders.forEach(function(e){return o(e)}),console.log("Started the recording of the audio. There are currently "+this.recorders.length+" recorders active.")},c.prototype.stop=function(){this.isRecording=!1,this.recorders.forEach(function(e){return a(e)}),console.log("stopped recording")},c.prototype.download=function(){var e=this;this.recorders.forEach(function(t){var n=new Blob(t.data,{type:e.fileType}),r=URL.createObjectURL(n),i=document.createElement("a");document.body.appendChild(i),i.style="display: none",i.href=r,i.download="test."+e.fileType.split("/")[1],i.click(),window.URL.revokeObjectURL(r)})},c.prototype.getRecordingResults=function(){var e=this;if(this.isRecording)throw new Error("cannot get blobs because the AudioRecorder is still recording!");this.updateNames();var t=[];return this.recorders.forEach(function(n){return t.push(new r(new Blob(n.data,{type:e.fileType}),n.name,n.startTime))}),t},c.prototype.getFileType=function(){return this.fileType},e.exports=c},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(83),i=n(26),o=n(5),a=n(28),s=n(7);function c(e,t,n){this.appID=e,this.token=t,this.options=n,this.xmpp=new a.c(n,t),this.addEventListener(i.CONNECTION_FAILED,function(e,t,n,r){o.a.sendAnalyticsAndLog(Object(s.B)(e,t,r))}),this.addEventListener(i.CONNECTION_DISCONNECTED,function(e){e&&o.a.sendAnalytics(s.m,{message:e}),o.a.sendLog(JSON.stringify({id:s.m,msg:e}))})}c.prototype.connect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.xmpp.connect(e.id,e.password)},c.prototype.attach=function(e){this.xmpp.attach(e)},c.prototype.disconnect=function(){var e;return(e=this.xmpp).disconnect.apply(e,arguments)},c.prototype.getJid=function(){return this.xmpp.getJid()},c.prototype.setToken=function(e){this.token=e},c.prototype.initJitsiConference=function(e,t){return new r.a({name:e,config:t,connection:this})},c.prototype.addEventListener=function(e,t){this.xmpp.addListener(e,t)},c.prototype.removeEventListener=function(e,t){this.xmpp.removeListener(e,t)},c.prototype.getConnectionTimes=function(){return this.xmpp.connectionTimes},c.prototype.addFeature=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.xmpp.caps.addFeature(e,t)},c.prototype.removeFeature=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.xmpp.caps.removeFeature(e,t)},c.prototype.getLogs=function(){var e=this.xmpp.getJingleLog(),t={};t.time=new Date,t.url=window.location.href,t.ua=navigator.userAgent;var n=this.xmpp.getXmppLog();return n&&(t.xmpp=n),e.metadata=t,e}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return ie});var r=n(19),i=n.n(r),o=n(4),a=n(45),s=n.n(a),c=n(2),u=n(16),d=n(84),l=n(1),h=n(91),p=n(18),f=n(14),m=n(15),v=n(92),g=n(12),_=n(3),y=n(120),S=n(121),E=n(48),b=n(22),C=n(122),T=n(123),R=n(75),A=n(124),k=n(125),I=n(52),w=n(126),P=n(127),O=n(128),D=n(129),N=n(31),M=n(130),L=n(131),x=n(132),F=n(5),j=n(133),H=n.n(j),U=n(11),J=n.n(U),B=n(27),G=n(37),V=n.n(G),q=n(134),K=n(135),z=n(24),W=n(28),Q=n(8),X=n(13),Y=n.n(X),Z=n(7),ee=n(0);function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ne(e,t,n[t])})}return e}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var re=Object(o.getLogger)(e);function ie(e){if(!e.name||e.name.toLowerCase()!==e.name){var t="Invalid conference name (no conference name passed or it contains invalid characters like capital letters)!";throw re.error(t),new Error(t)}this.eventEmitter=new i.a,this.options=e,this.eventManager=new d.a(this),this.participants={},this._init(e),this.componentsVersions=new q.a(this),this.jvbJingleSession=null,this.lastDominantSpeaker=null,this.dtmfManager=null,this.somebodySupportsDTMF=!1,this.authEnabled=!1,this.startAudioMuted=!1,this.startVideoMuted=!1,this.startMutedPolicy={audio:!1,video:!1},this.isMutedByFocus=!1,this.mutedByFocusActor=null,this.wasStopped=!1,this.properties={},this.connectionQuality=new y.a(this,this.eventEmitter,e),this.avgRtpStatsReporter=new L.a(this,e.config.avgRtpStatsN||15),this._audioOutputProblemDetector=new M.a(this),this.isJvbConnectionInterrupted=!1,this.speakerStatsCollector=new x.a(this),this.deferredStartP2PTask=null;var n=parseInt(e.config.p2p&&e.config.p2p.backToP2PDelay,10);this.backToP2PDelay=isNaN(n)?5:n,re.info("backToP2PDelay: "+this.backToP2PDelay),this.isP2PConnectionInterrupted=!1,this.p2p=!1,this.p2pJingleSession=null,this.videoSIPGWHandler=new K.a(this.room),this.recordingManager=new D.a(this.room),this._conferenceJoinAnalyticsEventSent=void 0,this.isE2EESupported()&&(re.info("End-to-End Encryprtion is supported"),this._e2eEncryption=new I.a(this))}ie.prototype.constructor=ie,ie.resourceCreator=function(e,t){var n;return t?n=V.a.randomHexString(8).toLowerCase():(n=c.Strophe.getNodeFromJid(e).substr(0,8).toLowerCase(),/[0-9a-f]{8}/g.test(n)||(n=V.a.randomHexString(8).toLowerCase())),n},ie.prototype._init=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.connection&&(this.connection=t.connection,this.xmpp=this.connection.xmpp,this.eventManager.setupXMPPListeners());var n=this.options.config;this._statsCurrentId=n.statisticsId?n.statisticsId:N.a.callStatsUserName,this.room=this.xmpp.createRoom(this.options.name,te({},n,{statsId:this._statsCurrentId}),ie.resourceCreator),this._onIceConnectionInterrupted=this._onIceConnectionInterrupted.bind(this),this.room.addListener(ee.CONNECTION_INTERRUPTED,this._onIceConnectionInterrupted),this._onIceConnectionRestored=this._onIceConnectionRestored.bind(this),this.room.addListener(ee.CONNECTION_RESTORED,this._onIceConnectionRestored),this._onIceConnectionEstablished=this._onIceConnectionEstablished.bind(this),this.room.addListener(ee.CONNECTION_ESTABLISHED,this._onIceConnectionEstablished),this._updateProperties=this._updateProperties.bind(this),this.room.addListener(ee.CONFERENCE_PROPERTIES_CHANGED,this._updateProperties),this._sendConferenceJoinAnalyticsEvent=this._sendConferenceJoinAnalyticsEvent.bind(this),this.room.addListener(ee.MEETING_ID_SET,this._sendConferenceJoinAnalyticsEvent),this.e2eping=new w.a(this,n,function(t,n){try{e.sendMessage(t,n,!0)}catch(t){re.warn("Failed to send E2E ping request or response.",t&&t.msg)}}),this.rtc||(this.rtc=new g.a(this,t),this.eventManager.setupRTCListeners()),this.qualityController=new O.a(this),this.participantConnectionStatus=new E.b(this.rtc,this,{rtcMuteTimeout:n._peerConnStatusRtcMuteTimeout,outOfLastNTimeout:n._peerConnStatusOutOfLastNTimeout}),this.participantConnectionStatus.init();var r=!0;if(n.testing&&n.testing.callStatsThreshold&&(r=Object(B.d)(this.options.name)%100<n.testing.callStatsThreshold),this.statistics||(this.statistics=new F.a(this.xmpp,{aliasName:this._statsCurrentId,userName:n.statisticsDisplayName?n.statisticsDisplayName:this.myUserId(),confID:n.confID||this.connection.options.hosts.domain+"/"+this.options.name,siteID:n.siteID,customScriptUrl:n.callStatsCustomScriptUrl,callStatsID:n.callStatsID,callStatsSecret:n.callStatsSecret,callStatsApplicationLogsDisabled:n.callStatsApplicationLogsDisabled,enableCallStats:r,roomName:this.options.name,applicationName:n.applicationName,getWiFiStatsMethod:n.getWiFiStatsMethod}),F.a.analytics.addPermanentProperties({callstats_name:this._statsCurrentId}),n.longTasksStatsInterval&&this.statistics.attachLongTasksStats(this)),this.eventManager.setupChatRoomListeners(),this.eventManager.setupStatisticsListeners(),n.enableTalkWhileMuted&&!_.a.isSafari())if(n.createVADProcessor){re.info("Using VAD detection for generating talk while muted events"),this._audioAnalyser||(this._audioAnalyser=new R.a(this,n.createVADProcessor));var i=new k.a;i.on(b.VAD_TALK_WHILE_MUTED,function(){return e.eventEmitter.emit(l.TALK_WHILE_MUTED)}),this._audioAnalyser.addVADDetectionService(i)}else re.warn("No VAD Processor was provided. Talk while muted detection service was not initialized!");if(n.enableNoisyMicDetection&&!_.a.isSafari())if(n.createVADProcessor){this._audioAnalyser||(this._audioAnalyser=new R.a(this,n.createVADProcessor));var o=new A.a;o.on(b.VAD_NOISY_DEVICE,function(){return e.eventEmitter.emit(l.NOISY_MIC)}),this._audioAnalyser.addVADDetectionService(o)}else re.warn("No VAD Processor was provided. Noisy microphone detection service was not initialized!");n.enableNoAudioDetection&&(this._noAudioSignalDetection=new C.a(this),this._noAudioSignalDetection.on(b.NO_AUDIO_INPUT,function(){e.eventEmitter.emit(l.NO_AUDIO_INPUT)}),this._noAudioSignalDetection.on(b.AUDIO_INPUT_STATE_CHANGE,function(t){e.eventEmitter.emit(l.AUDIO_INPUT_STATE_CHANGE,t)})),"channelLastN"in n&&this.setLastN(n.channelLastN),this.jvb121Status=new P.a(this),this.p2pDominantSpeakerDetection=new T.a(this),n&&n.deploymentInfo&&n.deploymentInfo.userRegion&&this.setLocalParticipantProperty("region",n.deploymentInfo.userRegion)},ie.prototype.join=function(e){var t=this;this.room&&this.room.join(e).then(function(){return t._maybeSetSITimeout()})},ie.prototype.authenticateAndUpgradeRole=function(e){return v.a.call(this,te({},e,{onCreateResource:ie.resourceCreator}))},ie.prototype.isJoined=function(){return this.room&&this.room.joined},ie.prototype.isP2PEnabled=function(){return Boolean(this.options.config.p2p&&this.options.config.p2p.enabled)||void 0===this.options.config.p2p},ie.prototype.isP2PTestModeEnabled=function(){return Boolean(this.options.config.testing&&this.options.config.testing.p2pTestMode)},ie.prototype.leave=function(){var e=this;if(this.participantConnectionStatus&&(this.participantConnectionStatus.dispose(),this.participantConnectionStatus=null),this.avgRtpStatsReporter&&(this.avgRtpStatsReporter.dispose(),this.avgRtpStatsReporter=null),this._audioOutputProblemDetector&&(this._audioOutputProblemDetector.dispose(),this._audioOutputProblemDetector=null),this.e2eping&&(this.e2eping.stop(),this.e2eping=null),this.getLocalTracks().forEach(function(t){return e.onLocalTrackRemoved(t)}),this.rtc.closeBridgeChannel(),this._sendConferenceLeftAnalyticsEvent(),this.statistics&&this.statistics.dispose(),this._delayedIceFailed&&this._delayedIceFailed.cancel(),this.jvbJingleSession&&(this.jvbJingleSession.close(),this.jvbJingleSession=null),this.p2pJingleSession&&(this.p2pJingleSession.close(),this.p2pJingleSession=null),this.room){var t=this.room;return t.removeListener(ee.CONNECTION_INTERRUPTED,this._onIceConnectionInterrupted),t.removeListener(ee.CONNECTION_RESTORED,this._onIceConnectionRestored),t.removeListener(ee.CONNECTION_ESTABLISHED,this._onIceConnectionEstablished),t.removeListener(ee.CONFERENCE_PROPERTIES_CHANGED,this._updateProperties),t.removeListener(ee.MEETING_ID_SET,this._sendConferenceJoinAnalyticsEvent),this.eventManager.removeXMPPListeners(),this.room=null,t.leave().then(function(){e.rtc&&e.rtc.destroy()}).catch(function(t){throw e.getParticipants().forEach(function(t){return e.onMemberLeft(t.getJid())}),t})}return Promise.reject(new Error("The conference is has been already left"))},ie.prototype._getActiveMediaSession=function(){return this.isP2PActive()?this.p2pJingleSession:this.jvbJingleSession},ie.prototype._getMediaSessions=function(){var e=[];return this.jvbJingleSession&&e.push(this.jvbJingleSession),this.p2pJingleSession&&e.push(this.p2pJingleSession),e},ie.prototype.getName=function(){return this.options.name},ie.prototype.getConnection=function(){return this.connection},ie.prototype.isAuthEnabled=function(){return this.authEnabled},ie.prototype.isLoggedIn=function(){return Boolean(this.authIdentity)},ie.prototype.getAuthLogin=function(){return this.authIdentity},ie.prototype.isExternalAuthEnabled=function(){return this.room&&this.room.moderator.isExternalAuthEnabled()},ie.prototype.getExternalAuthUrl=function(e){var t=this;return new Promise(function(n,r){t.isExternalAuthEnabled()?e?t.room.moderator.getPopupLoginUrl(n,r):t.room.moderator.getLoginUrl(n,r):r()})},ie.prototype.getLocalTracks=function(e){var t=[];return this.rtc&&(t=this.rtc.getLocalTracks(e)),t},ie.prototype.getLocalAudioTrack=function(){return this.rtc?this.rtc.getLocalAudioTrack():null},ie.prototype.getLocalVideoTrack=function(){return this.rtc?this.rtc.getLocalVideoTrack():null},ie.prototype.getPerformanceStats=function(){return{longTasksStats:this.statistics.getLongTasksStats()}},ie.prototype.on=function(e,t){this.eventEmitter&&this.eventEmitter.on(e,t)},ie.prototype.off=function(e,t){this.eventEmitter&&this.eventEmitter.removeListener(e,t)},ie.prototype.addEventListener=ie.prototype.on,ie.prototype.removeEventListener=ie.prototype.off,ie.prototype.addCommandListener=function(e,t){this.room&&this.room.addPresenceListener(e,t)},ie.prototype.removeCommandListener=function(e,t){this.room&&this.room.removePresenceListener(e,t)},ie.prototype.sendTextMessage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body";if(this.room){var n=(this.room.getFromPresence("nick")||{}).value;this.room.sendMessage(e,t,n)}},ie.prototype.sendPrivateTextMessage=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"body";this.room&&this.room.sendPrivateMessage(e,t,n)},ie.prototype.sendCommand=function(e,t){this.room?(this.room.addToPresence(e,t),this.room.sendPresence()):re.warn("Not sending a command, room not initialized.")},ie.prototype.sendCommandOnce=function(e,t){this.sendCommand(e,t),this.removeCommand(e)},ie.prototype.removeCommand=function(e){this.room&&this.room.removeFromPresence(e)},ie.prototype.setDisplayName=function(e){this.room&&(this.room.addToPresence("nick",{attributes:{xmlns:"http://jabber.org/protocol/nick"},value:e}),this.room.sendPresence())},ie.prototype.setSubject=function(e){this.room&&this.isModerator()&&this.room.setSubject(e)},ie.prototype.getTranscriber=function(){if(void 0===this.transcriber){this.transcriber=new H.a;for(var e,t=_createForOfIteratorHelperLoose(this.getLocalTracks(Q.a));!(e=t()).done;){var n=e.value;this.transcriber.addTrack(n)}for(var r,i=_createForOfIteratorHelperLoose(this.rtc.getRemoteTracks(Q.a));!(r=i()).done;){var o=r.value;this.transcriber.addTrack(o)}}return this.transcriber},ie.prototype.getTranscriptionStatus=function(){return this.room.transcriptionStatus},ie.prototype.addTrack=function(e){if(e.isVideoTrack()){var t=this.rtc.getLocalVideoTrack();if(t)return e===t?Promise.resolve(e):Promise.reject(new Error("cannot add second video track to the conference"))}return this.replaceTrack(null,e)},ie.prototype._fireAudioLevelChangeEvent=function(e,t){var n=this.getActivePeerConnection();t&&n!==t||this.eventEmitter.emit(l.TRACK_AUDIO_LEVEL_CHANGED,this.myUserId(),e)},ie.prototype._fireMuteChangeEvent=function(e){var t;if(this.isMutedByFocus&&e.isAudioTrack()&&!e.isMuted()&&(this.isMutedByFocus=!1,this.room.muteParticipant(this.room.myroomjid,!1)),this.mutedByFocusActor){var n=c.Strophe.getResourceFromJid(this.mutedByFocusActor);t=this.participants[n]}this.eventEmitter.emit(l.TRACK_MUTE_CHANGED,e,t)},ie.prototype.onLocalTrackRemoved=function(e){e._setConference(null),this.rtc.removeLocalTrack(e),e.removeEventListener(m.TRACK_MUTE_CHANGED,e.muteHandler),e.removeEventListener(m.TRACK_AUDIO_LEVEL_CHANGED,e.audioLevelHandler),e.isVideoTrack()&&e.videoType===Y.a.DESKTOP&&this.statistics.sendScreenSharingEvent(!1),this.eventEmitter.emit(l.TRACK_REMOVED,e)},ie.prototype.removeTrack=function(e){return this.replaceTrack(e,null)},ie.prototype.replaceTrack=function(e,t){var n=this;return e&&e.disposed||t&&t.disposed?Promise.reject(new p.a(f.TRACK_IS_DISPOSED)):this._doReplaceTrack(e,t).then(function(){return e&&n.onLocalTrackRemoved(e),t&&n._setupNewTrack(t),Promise.resolve()},function(e){return Promise.reject(new Error(e))})},ie.prototype._doReplaceTrack=function(e,t){var n=[];return this.jvbJingleSession?n.push(this.jvbJingleSession.replaceTrack(e,t)):re.info("_doReplaceTrack - no JVB JingleSession"),this.p2pJingleSession?n.push(this.p2pJingleSession.replaceTrack(e,t)):re.info("_doReplaceTrack - no P2P JingleSession"),Promise.all(n)},ie.prototype._setupNewTrack=function(e){if(e.isAudioTrack()||e.isVideoTrack()&&e.videoType!==Y.a.DESKTOP){var t=g.a.getCurrentlyAvailableMediaDevices().find(function(t){return t.kind===e.getTrack().kind+"input"&&t.label===e.getTrack().label});t&&F.a.sendActiveDeviceListEvent(g.a.getEventDataForActiveDevice(t))}e.isVideoTrack()&&(this.removeCommand("videoType"),this.sendCommand("videoType",{value:e.videoType,attributes:{xmlns:"http://abcpen.com/zmeet/video"}})),this.rtc.addLocalTrack(e),e.isAudioTrack()?this.room.setAudioMute(e.isMuted()):this.room.setVideoMute(e.isMuted()),e.muteHandler=this._fireMuteChangeEvent.bind(this,e),e.audioLevelHandler=this._fireAudioLevelChangeEvent.bind(this),e.addEventListener(m.TRACK_MUTE_CHANGED,e.muteHandler),e.addEventListener(m.TRACK_AUDIO_LEVEL_CHANGED,e.audioLevelHandler),e._setConference(this),this.eventEmitter.emit(l.TRACK_ADDED,e)},ie.prototype._addLocalTrackAsUnmute=function(e){var t=[];return this.jvbJingleSession?t.push(this.jvbJingleSession.addTrackAsUnmute(e)):re.info("Add local MediaStream as unmute - no JVB Jingle session started yet"),this.p2pJingleSession?t.push(this.p2pJingleSession.addTrackAsUnmute(e)):re.info("Add local MediaStream as unmute - no P2P Jingle session started yet"),Promise.all(t)},ie.prototype._removeLocalTrackAsMute=function(e){var t=[];return this.jvbJingleSession?t.push(this.jvbJingleSession.removeTrackAsMute(e)):re.info("Remove local MediaStream - no JVB JingleSession started yet"),this.p2pJingleSession?t.push(this.p2pJingleSession.removeTrackAsMute(e)):re.info("Remove local MediaStream - no P2P JingleSession started yet"),Promise.all(t)},ie.prototype.getRole=function(){return this.room.role},ie.prototype.isHidden=function(){return this.connection?c.Strophe.getDomainFromJid(this.connection.getJid())===this.options.config.hiddenDomain:null},ie.prototype.isModerator=function(){return this.room?this.room.isModerator():null},ie.prototype.lock=function(e){var t=this;return this.isModerator()?new Promise(function(n,r){t.room.lockRoom(e||"",function(){return n()},function(e){return r(e)},function(){return r(u.PASSWORD_NOT_SUPPORTED)})}):Promise.reject(new Error("You are not moderator."))},ie.prototype.unlock=function(){return this.lock()},ie.prototype.selectParticipant=function(e){this.selectParticipants([e])},ie.prototype.selectParticipants=function(e){if(!Array.isArray(e))throw new Error("Invalid argument; participantIds must be an array.");this.rtc.selectEndpoints(e)},ie.prototype.pinParticipant=function(e){this.rtc.pinEndpoint(e)},ie.prototype.getLastN=function(){return this.rtc.getLastN()},ie.prototype.setLastN=function(e){if(!Number.isInteger(e)&&!Number.parseInt(e,10))throw new Error("Invalid value for lastN: "+e);var t=Number(e);if(t<-1)throw new RangeError("lastN cannot be smaller than -1");if(this.rtc.setLastN(t),this.p2pJingleSession){var n=0!==t;this.p2pJingleSession.setMediaTransferActive(!0,n).catch(function(e){re.error("Failed to adjust video transfer status ("+n+")",e)})}},ie.prototype.isInLastN=function(e){return this.rtc.isInLastN(e)},ie.prototype.getParticipants=function(){return Object.values(this.participants)},ie.prototype.getParticipantCount=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getParticipants();return e||(t=t.filter(function(e){return!e.isHidden()})),t.length+1},ie.prototype.getParticipantById=function(e){return this.participants[e]},ie.prototype.grantOwner=function(e){var t=this.getParticipantById(e);t&&this.room.setAffiliation(t.getJid(),"owner")},ie.prototype.kickParticipant=function(e){var t=this.getParticipantById(e);t&&this.room.kick(t.getJid())},ie.prototype._maybeClearSITimeout=function(){this._sessionInitiateTimeout&&(this.jvbJingleSession||this.getParticipantCount()<2)&&(window.clearTimeout(this._sessionInitiateTimeout),this._sessionInitiateTimeout=null)},ie.prototype._maybeSetSITimeout=function(){var e=this;!this.jvbJingleSession&&this.getParticipantCount()>=2&&!this._sessionInitiateTimeout&&(this._sessionInitiateTimeout=window.setTimeout(function(){e._sessionInitiateTimeout=null,F.a.sendAnalytics(Object(Z.G)(Z.d,{p2p:!1,value:5e3}))},5e3))},ie.prototype.muteParticipant=function(e){var t=this.getParticipantById(e);t&&this.room.muteParticipant(t.getJid(),!0)},ie.prototype.onMemberJoined=function(e,t,n,r,i,o,a,s){var u=c.Strophe.getResourceFromJid(e);if("focus"!==u&&this.myUserId()!==u){var d=new h.a(e,this,t,r,i,o,a);d._role=n,d._botType=s,this.participants[u]=d,this.eventEmitter.emit(l.USER_JOINED,u,d),this._updateFeatures(d),this._maybeStartOrStopP2P(),this._maybeSetSITimeout()}},ie.prototype._updateFeatures=function(e){var t=this;e.getFeatures().then(function(n){e._supportsDTMF=n.has("urn:xmpp:jingle:dtmf:0"),t.updateDTMFSupport(),n.has("http://abcpen.com/protocol/jigasi")&&e.setProperty("features_jigasi",!0),n.has("https://abcpen.com/meet/e2ee")&&e.setProperty("features_e2ee",!0)}).catch(function(){return!1})},ie.prototype._onMemberBotTypeChanged=function(e,t){var n=this.getParticipants().find(function(t){return t.getJid()===e});if(n){n._botType=t;var r=c.Strophe.getResourceFromJid(e);this.eventEmitter.emit(l.BOT_TYPE_CHANGED,r,t)}n._botType||this._maybeStartOrStopP2P()},ie.prototype.onMemberLeft=function(e){var t=this,n=c.Strophe.getResourceFromJid(e);if("focus"!==n&&this.myUserId()!==n){var r=this.participants[n];delete this.participants[n],this.rtc.removeRemoteTracks(n).forEach(function(e){return t.eventEmitter.emit(l.TRACK_REMOVED,e)}),r&&this.eventEmitter.emit(l.USER_LEFT,n,r),this._maybeStartOrStopP2P(!0),this._maybeClearSITimeout()}},ie.prototype.onMemberKicked=function(e,t,n){if(t!==this.myUserId()){var r=this.participants[t];if(e)return this.eventEmitter.emit(l.KICKED,r),void this.leave();var i=this.participants[n];this.eventEmitter.emit(l.PARTICIPANT_KICKED,r,i)}},ie.prototype.onLocalRoleChanged=function(e){this.eventEmitter.emit(l.USER_ROLE_CHANGED,this.myUserId(),e)},ie.prototype.onUserRoleChanged=function(e,t){var n=c.Strophe.getResourceFromJid(e),r=this.getParticipantById(n);r&&(r._role=t,this.eventEmitter.emit(l.USER_ROLE_CHANGED,n,t))},ie.prototype.onDisplayNameChanged=function(e,t){var n=c.Strophe.getResourceFromJid(e),r=this.getParticipantById(n);r&&r._displayName!==t&&(r._displayName=t,this.eventEmitter.emit(l.DISPLAY_NAME_CHANGED,n,t))},ie.prototype.onRemoteTrackAdded=function(e){var t=this;if(!e.isP2P||this.isP2PActive())if(e.isP2P||!this.isP2PActive()){var n=e.getParticipantId(),r=this.getParticipantById(n);if(r){r._tracks.push(e),this.transcriber&&this.transcriber.addTrack(e);var i=this.eventEmitter;e.addEventListener(m.TRACK_MUTE_CHANGED,function(){return i.emit(l.TRACK_MUTE_CHANGED,e)}),e.addEventListener(m.TRACK_AUDIO_LEVEL_CHANGED,function(e,r){t.getActivePeerConnection()===r&&i.emit(l.TRACK_AUDIO_LEVEL_CHANGED,n,e)}),i.emit(l.TRACK_ADDED,e)}else re.error("No participant found for id: "+n)}else re.info("Trying to add remote JVB track, when in P2P - IGNORED");else re.info("Trying to add remote P2P track, when not in P2P - IGNORED")},ie.prototype.onCallAccepted=function(e,t){this.p2pJingleSession===e&&(re.info("P2P setAnswer"),this.p2pJingleSession.setAnswer(t),this.eventEmitter.emit(l._MEDIA_SESSION_STARTED,this.p2pJingleSession))},ie.prototype.onTransportInfo=function(e,t){this.p2pJingleSession===e&&(re.info("P2P addIceCandidates"),this.p2pJingleSession.addIceCandidates(t))},ie.prototype.onRemoteTrackRemoved=function(e){var t=this;this.getParticipants().forEach(function(n){for(var r=n.getTracks(),i=0;i<r.length;i++)if(r[i]===e){n._tracks.splice(i,1),t.eventEmitter.emit(l.TRACK_REMOVED,e),t.transcriber&&t.transcriber.removeTrack(e);break}},this)},ie.prototype._onIncomingCallP2P=function(e,t){var n;_.a.supportsP2P()?this.isP2PEnabled()||this.isP2PTestModeEnabled()?this.p2pJingleSession?n={reason:"busy",reasonDescription:"P2P already in progress",errorMsg:'Duplicated P2P "session-initiate"'}:this._shouldBeInP2PMode()||(n={reason:"decline",reasonDescription:"P2P requirements not met",errorMsg:'Received P2P "session-initiate" when should not be in P2P mode'},F.a.sendAnalytics(Object(Z.G)(Z.h))):n={reason:"decline",reasonDescription:"P2P disabled",errorMsg:"P2P mode disabled in the configuration"}:n={reason:"unsupported-applications",reasonDescription:"P2P not supported",errorMsg:"This client does not support P2P connections"},n?this._rejectIncomingCall(e,n):this._acceptP2PIncomingCall(e,t)},ie.prototype.onIncomingCall=function(e,t,n){if(e.isP2P)this._onIncomingCallP2P(e,t);else{if(!this.room.isFocus(e.remoteJid)){var r="Rejecting session-initiate from non-focus.";return void this._rejectIncomingCall(e,{reason:"security-error",reasonDescription:r,errorMsg:r})}this._acceptJvbIncomingCall(e,t,n)}},ie.prototype._acceptJvbIncomingCall=function(e,t,n){var r=this;this.jvbJingleSession=e,this.room.connectionTimes["session.initiate"]=n,this._sendConferenceJoinAnalyticsEvent(),this.wasStopped&&F.a.sendAnalyticsAndLog(Object(Z.G)(Z.a,{p2p:!1}));var i=$(t).find('>bridge-session[xmlns="http://abcpen.com/protocol/focus"]').attr("region");this.eventEmitter.emit(l.SERVER_REGION_CHANGED,i),this._maybeClearSITimeout(),F.a.sendAnalytics(Object(Z.G)(Z.c,{p2p:!1,value:n}));try{e.initialize(this.room,this.rtc,te({},this.options.config,{enableInsertableStreams:this._isE2EEEnabled()}))}catch(e){J.a.callErrorHandler(e)}this._setBridgeChannel(t,e.peerconnection);var o=this.getLocalTracks();try{e.acceptOffer(t,function(){r.isP2PActive()&&r.jvbJingleSession&&r._suspendMediaTransferForJvbConnection(),r.eventEmitter.emit(l._MEDIA_SESSION_STARTED,e),r.isP2PActive()||r.eventEmitter.emit(l._MEDIA_SESSION_ACTIVE_CHANGED,e)},function(e){J.a.callErrorHandler(e),re.error("Failed to accept incoming Jingle session",e)},o),re.info("Starting CallStats for JVB connection..."),this.statistics.startCallStats(this.jvbJingleSession.peerconnection,"jitsi"),this.statistics.startRemoteStats(this.jvbJingleSession.peerconnection)}catch(e){J.a.callErrorHandler(e),re.error(e)}},ie.prototype._setBridgeChannel=function(e,t){var n,r=null,i=$(e).find(">content>transport>web-socket").first();switch(1===i.length&&(r=i[0].getAttribute("url")),this.options.config.openBridgeChannel){case"datachannel":case!0:case void 0:n="datachannel";break;case"websocket":n="websocket"}"datachannel"===n?this.rtc.initializeBridgeChannel(t,null):"websocket"===n&&r&&this.rtc.initializeBridgeChannel(null,r)},ie.prototype._rejectIncomingCall=function(e,t){t&&t.errorMsg&&J.a.callErrorHandler(new Error(t.errorMsg)),e.terminate(null,function(e){re.warn("An error occurred while trying to terminate invalid Jingle session",e)},{reason:t&&t.reason,reasonDescription:t&&t.reasonDescription,sendSessionTerminate:!0})},ie.prototype.onCallEnded=function(e,t,n){re.info("Call ended: "+t+" - "+n+" P2P ?"+e.isP2P),e===this.jvbJingleSession?(this.wasStopped=!0,F.a.sendAnalytics(Object(Z.G)(Z.e,{p2p:!1})),this.statistics&&(this.statistics.stopRemoteStats(this.jvbJingleSession.peerconnection),re.info("Stopping JVB CallStats"),this.statistics.stopCallStats(this.jvbJingleSession.peerconnection)),this.jvbJingleSession=null,this.rtc.onCallEnded()):e===this.p2pJingleSession?("decline"===t&&"force JVB121"===n?(re.info("In forced JVB 121 mode..."),F.a.analytics.addPermanentProperties({forceJvb121:!0})):"connectivity-error"===t&&"ICE FAILED"===n&&F.a.analytics.addPermanentProperties({p2pFailed:!0}),this._stopP2PSession()):re.error("Received onCallEnded for invalid session",e.sid,e.remoteJid,t,n)},ie.prototype.onSuspendDetected=function(e){e.isP2P||(this.leave(),this.eventEmitter.emit(l.SUSPEND_DETECTED))},ie.prototype.updateDTMFSupport=function(){for(var e=!1,t=this.getParticipants(),n=0;n<t.length;n+=1)if(t[n].supportsDTMF()){e=!0;break}e!==this.somebodySupportsDTMF&&(this.somebodySupportsDTMF=e,this.eventEmitter.emit(l.DTMF_SUPPORT_CHANGED,e))},ie.prototype.isDTMFSupported=function(){return this.somebodySupportsDTMF},ie.prototype.myUserId=function(){return this.room&&this.room.myroomjid?c.Strophe.getResourceFromJid(this.room.myroomjid):null},ie.prototype.sendTones=function(e,t,n){var r=this.getActivePeerConnection();r?r.sendTones(e,t,n):re.warn("cannot sendTones: no peer connection")},ie.prototype.startRecording=function(e){return this.room?this.recordingManager.startRecording(e):Promise.reject(new Error("The conference is not created yet!"))},ie.prototype.stopRecording=function(e){return this.room?this.recordingManager.stopRecording(e):Promise.reject(new Error("The conference is not created yet!"))},ie.prototype.isSIPCallingSupported=function(){return!!this.room&&this.room.isSIPCallingSupported()},ie.prototype.dial=function(e){return this.room?this.room.dial(e):new Promise(function(e,t){t(new Error("The conference is not created yet!"))})},ie.prototype.hangup=function(){return this.room?this.room.hangup():new Promise(function(e,t){t(new Error("The conference is not created yet!"))})},ie.prototype.startTranscriber=function(){return this.dial("jitsi_meet_transcribe")},ie.prototype.stopTranscriber=ie.prototype.hangup,ie.prototype.getPhoneNumber=function(){return this.room?this.room.getPhoneNumber():null},ie.prototype.getPhonePin=function(){return this.room?this.room.getPhonePin():null},ie.prototype.getMeetingUniqueId=function(){if(this.room)return this.room.getMeetingId()},ie.prototype.getActivePeerConnection=function(){return this.isP2PActive()?this.p2pJingleSession.peerconnection:this.jvbJingleSession?this.jvbJingleSession.peerconnection:null},ie.prototype.getConnectionState=function(){var e=this.getActivePeerConnection();return e?e.getConnectionState():null},ie.prototype.setStartMutedPolicy=function(e){this.isModerator()&&(this.startMutedPolicy=e,this.room.addToPresence("startmuted",{attributes:{audio:e.audio,video:e.video,xmlns:"http://abcpen.com/zmeet/start-muted"}}),this.room.sendPresence())},ie.prototype.getStartMutedPolicy=function(){return this.startMutedPolicy},ie.prototype.isStartAudioMuted=function(){return this.startAudioMuted},ie.prototype.isStartVideoMuted=function(){return this.startVideoMuted},ie.prototype.getConnectionTimes=function(){return this.room.connectionTimes},ie.prototype.setLocalParticipantProperty=function(e,t){this.sendCommand("abcpen_participant_"+e,{value:t})},ie.prototype.removeLocalParticipantProperty=function(e){this.removeCommand("abcpen_participant_"+e),this.room.sendPresence()},ie.prototype.getLocalParticipantProperty=function(e){var t=this.room.presMap.nodes.find(function(t){return t.tagName==="abcpen_participant_"+e});return t?t.value:void 0},ie.prototype.sendFeedback=function(e,t){return this.statistics.sendFeedback(e,t)},ie.prototype.isCallstatsEnabled=function(){return this.statistics.isCallstatsEnabled()},ie.prototype._onTrackAttach=function(e,t){var n=e.isLocal(),r=null,i=e.isP2P,o=i?e.getParticipantId():"jitsi",a=i?this.p2pJingleSession&&this.p2pJingleSession.peerconnection:this.jvbJingleSession&&this.jvbJingleSession.peerconnection;n?a&&(r=a.getLocalSSRC(e)):r=e.getSSRC(),t.id&&r&&a&&this.statistics.associateStreamWithVideoTag(a,r,n,o,e.getUsageLabel(),t.id)},ie.prototype.sendApplicationLog=function(e){F.a.sendLog(e)},ie.prototype._isFocus=function(e){return this.room?this.room.isFocus(e):null},ie.prototype._fireIncompatibleVersionsEvent=function(){this.eventEmitter.emit(l.CONFERENCE_FAILED,u.INCOMPATIBLE_SERVER_VERSIONS)},ie.prototype.sendEndpointMessage=function(e,t){this.rtc.sendChannelMessage(e,t)},ie.prototype.broadcastEndpointMessage=function(e){this.sendEndpointMessage("",e)},ie.prototype.sendMessage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=typeof e;if("object"===r||!n&&"string"===r)if(n)this.sendEndpointMessage(t,e);else{var i=e,o="body";if("object"===r){o="json-message",i.hasOwnProperty(W.b)||(i[W.b]="");try{i=JSON.stringify(i)}catch(e){return void re.error("Can not send a message, stringify failed: ",e)}}t?this.sendPrivateTextMessage(t,i,o):this.sendTextMessage(i,o)}else re.error("Can not send a message of type "+r)},ie.prototype.isConnectionInterrupted=function(){return this.isP2PActive()?this.isP2PConnectionInterrupted:this.isJvbConnectionInterrupted},ie.prototype._onIceConnectionInterrupted=function(e){e.isP2P?this.isP2PConnectionInterrupted=!0:this.isJvbConnectionInterrupted=!0,e.isP2P===this.isP2PActive()&&this.eventEmitter.emit(l.CONNECTION_INTERRUPTED)},ie.prototype._onIceConnectionFailed=function(e){e.isP2P?(F.a.analytics.addPermanentProperties({p2pFailed:!0}),this.p2pJingleSession&&F.a.sendAnalyticsAndLog(Object(Z.I)(Z.j,{initiator:this.p2pJingleSession.isInitiator})),this._stopP2PSession("connectivity-error","ICE FAILED")):e&&this.jvbJingleSession===e&&(this._delayedIceFailed=new S.a(this),this._delayedIceFailed.start(e))},ie.prototype._onIceConnectionRestored=function(e){e.isP2P?this.isP2PConnectionInterrupted=!1:(this.isJvbConnectionInterrupted=!1,this._delayedIceFailed&&this._delayedIceFailed.cancel()),e.isP2P===this.isP2PActive()&&this.eventEmitter.emit(l.CONNECTION_RESTORED)},ie.prototype._acceptP2PIncomingCall=function(e,t){var n=this;this.isP2PConnectionInterrupted=!1,this.p2pJingleSession=e,this._sendConferenceJoinAnalyticsEvent(),this.p2pJingleSession.initialize(this.room,this.rtc,te({},this.options.config,{enableInsertableStreams:this._isE2EEEnabled()})),re.info("Starting CallStats for P2P connection...");var r=c.Strophe.getResourceFromJid(this.p2pJingleSession.remoteJid),i=this.participants[r];i&&(r=i.getStatsID()||r),this.statistics.startCallStats(this.p2pJingleSession.peerconnection,r);var o=this.getLocalTracks();this.p2pJingleSession.acceptOffer(t,function(){re.debug('Got RESULT for P2P "session-accept"'),n.eventEmitter.emit(l._MEDIA_SESSION_STARTED,n.p2pJingleSession)},function(e){re.error("Failed to accept incoming P2P Jingle session",e)},o)},ie.prototype._addRemoteJVBTracks=function(){this._addRemoteTracks("JVB",this.jvbJingleSession.peerconnection.getRemoteTracks())},ie.prototype._addRemoteP2PTracks=function(){this._addRemoteTracks("P2P",this.p2pJingleSession.peerconnection.getRemoteTracks())},ie.prototype._addRemoteTracks=function(e,t){for(var n,r=_createForOfIteratorHelperLoose(t);!(n=r()).done;){var i=n.value;re.info("Adding remote "+e+" track: "+i),this.onRemoteTrackAdded(i)}},ie.prototype._onIceConnectionEstablished=function(e){null!==this.p2pJingleSession&&(this.p2pEstablishmentDuration=this.p2pJingleSession.establishmentDuration),null!==this.jvbJingleSession&&(this.jvbEstablishmentDuration=this.jvbJingleSession.establishmentDuration);var t=!1,n=this.options.config.forceJVB121Ratio;if(e.isP2P?this.p2pJingleSession!==e?(re.error("CONNECTION_ESTABLISHED - wrong P2P session instance ?!"),t=!0):!e.isInitiator&&"number"==typeof n&&Math.random()<n&&(re.info("Forcing JVB 121 mode (ratio="+n+")..."),F.a.analytics.addPermanentProperties({forceJvb121:!0}),this._stopP2PSession("decline","force JVB121"),t=!0):t=!0,!isNaN(this.p2pEstablishmentDuration)&&!isNaN(this.jvbEstablishmentDuration)){var r=this.p2pEstablishmentDuration-this.jvbEstablishmentDuration;F.a.sendAnalytics(Z.p,{value:r})}e.isP2P===this.isP2PActive()&&this.eventEmitter.emit(l.CONNECTION_ESTABLISHED),t||(this._setP2PStatus(!0),this.jvbJingleSession?this._removeRemoteJVBTracks():re.info("Not removing remote JVB tracks - no session yet"),this._addRemoteP2PTracks(),this.jvbJingleSession&&this._suspendMediaTransferForJvbConnection(),re.info("Starting remote stats with p2p connection"),this.statistics.startRemoteStats(this.p2pJingleSession.peerconnection),F.a.sendAnalyticsAndLog(Object(Z.I)(Z.i,{initiator:this.p2pJingleSession.isInitiator})))},ie.prototype._updateProperties=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!s()(e,this.properties);this.properties=e,t&&(this.eventEmitter.emit(l.PROPERTIES_CHANGED,this.properties),["bridge-count","created-ms","octo-enabled"].forEach(function(t){void 0!==e[t]&&F.a.analytics.addPermanentProperties(_defineProperty({},t.replace("-","_"),e[t]))}))},ie.prototype.getProperty=function(e){return this.properties[e]},ie.prototype._maybeClearDeferredStartP2P=function(){this.deferredStartP2PTask&&(re.info("Cleared deferred start P2P task"),clearTimeout(this.deferredStartP2PTask),this.deferredStartP2PTask=null)},ie.prototype._removeRemoteJVBTracks=function(){this._removeRemoteTracks("JVB",this.jvbJingleSession.peerconnection.getRemoteTracks())},ie.prototype._removeRemoteP2PTracks=function(){this._removeRemoteTracks("P2P",this.p2pJingleSession.peerconnection.getRemoteTracks())},ie.prototype._removeRemoteTracks=function(e,t){for(var n,r=_createForOfIteratorHelperLoose(t);!(n=r()).done;){var i=n.value;re.info("Removing remote "+e+" track: "+i),this.onRemoteTrackRemoved(i)}},ie.prototype._resumeMediaTransferForJvbConnection=function(){re.info("Resuming media transfer over the JVB connection..."),this.jvbJingleSession.setMediaTransferActive(!0,!0).then(function(){re.info("Resumed media transfer over the JVB connection!")},function(e){re.error("Failed to resume media transfer over the JVB connection:",e)})},ie.prototype._setP2PStatus=function(e){if(this.p2p!==e){if(this.p2p=e,e){re.info("Peer to peer connection established!"),F.a.analytics.addPermanentProperties({p2pFailed:!1,forceJvb121:!1});var t=0!==this.rtc.getLastN();this.p2pJingleSession.setMediaTransferActive(!0,t).catch(function(e){re.error("Failed to sync up P2P video transfer status("+t+")",e)})}else re.info("Peer to peer connection closed!");this.jvbJingleSession&&this.statistics.sendConnectionResumeOrHoldEvent(this.jvbJingleSession.peerconnection,!e),this.dtmfManager=null,this.eventEmitter.emit(l.P2P_STATUS,this,this.p2p),this.eventEmitter.emit(l._MEDIA_SESSION_ACTIVE_CHANGED,this._getActiveMediaSession()),this.eventEmitter.emit(this.isConnectionInterrupted()?l.CONNECTION_INTERRUPTED:l.CONNECTION_RESTORED)}else re.debug("Called _setP2PStatus with the same status: "+e)},ie.prototype._startP2PSession=function(e){if(this._maybeClearDeferredStartP2P(),this.p2pJingleSession)re.error("P2P session already started!");else{this.isP2PConnectionInterrupted=!1,this.p2pJingleSession=this.xmpp.connection.jingle.newP2PJingleSession(this.room.myroomjid,e),re.info("Created new P2P JingleSession",this.room.myroomjid,e),this._sendConferenceJoinAnalyticsEvent(),this.p2pJingleSession.initialize(this.room,this.rtc,te({},this.options.config,{enableInsertableStreams:this._isE2EEEnabled()})),re.info("Starting CallStats for P2P connection...");var t=c.Strophe.getResourceFromJid(this.p2pJingleSession.remoteJid),n=this.participants[t];n&&(t=n.getStatsID()||t),this.statistics.startCallStats(this.p2pJingleSession.peerconnection,t);var r=this.getLocalTracks();this.p2pJingleSession.invite(r)}},ie.prototype._suspendMediaTransferForJvbConnection=function(){re.info("Suspending media transfer over the JVB connection..."),this.jvbJingleSession.setMediaTransferActive(!1,!1).then(function(){re.info("Suspended media transfer over the JVB connection !")},function(e){re.error("Failed to suspend media transfer over the JVB connection:",e)})},ie.prototype._maybeStartOrStopP2P=function(e){if(_.a.supportsP2P()&&this.isP2PEnabled()&&!this.isP2PTestModeEnabled()){var t=this.getParticipants(),n=t.length,r=this._shouldBeInP2PMode();if(!r&&this.deferredStartP2PTask&&this._maybeClearDeferredStartP2P(),!this.p2pJingleSession&&r){var i=n&&t[0],o=this.myUserId(),a=i.getId();if(o>a)return void re.debug("I'm the bigger peersId - the other peer should start P2P",o,a);if(o===a)return void re.error("The same IDs ? ",o,a);var s=i.getJid();if(e){if(this.deferredStartP2PTask)return void re.error("Deferred start P2P task's been set already!");re.info("Will start P2P with: "+s+" after "+this.backToP2PDelay+" seconds..."),this.deferredStartP2PTask=setTimeout(this._startP2PSession.bind(this,s),1e3*this.backToP2PDelay)}else re.info("Will start P2P with: "+s),this._startP2PSession(s)}else this.p2pJingleSession&&!r&&(re.info("Will stop P2P with: "+this.p2pJingleSession.remoteJid),this.p2pJingleSession.isInitiator&&n>1&&F.a.sendAnalyticsAndLog(Object(Z.I)(Z.k)),this._stopP2PSession())}else re.info("Auto P2P disabled")},ie.prototype._shouldBeInP2PMode=function(){var e=this.getParticipants(),t=e.length,n=void 0!==e.find(function(e){return"poltergeist"===e._botType}),r=1===t&&!n;return re.debug("P2P? peerCount: "+t+", hasBotPeer: "+n+" => "+r),r},ie.prototype._stopP2PSession=function(e,t){if(this.p2pJingleSession){var n=this.isP2PActive();n&&(this.jvbJingleSession&&this._resumeMediaTransferForJvbConnection(),this._removeRemoteP2PTracks()),re.info("Stopping remote stats for P2P connection"),this.statistics.stopRemoteStats(this.p2pJingleSession.peerconnection),re.info("Stopping CallStats for P2P connection"),this.statistics.stopCallStats(this.p2pJingleSession.peerconnection),this.p2pJingleSession.terminate(function(){re.info("P2P session terminate RESULT")},function(t){e&&re.error("An error occurred while trying to terminate P2P Jingle session",t)},{reason:e||"success",reasonDescription:t||"Turing off P2P session",sendSessionTerminate:this.room&&this.getParticipantById(c.Strophe.getResourceFromJid(this.p2pJingleSession.remoteJid))}),this.p2pJingleSession=null,this._setP2PStatus(!1),n&&(this.jvbJingleSession?this._addRemoteJVBTracks():re.info("Not adding remote JVB tracks - no session yet"))}else re.error("No P2P session to be stopped!")},ie.prototype.isP2PActive=function(){return this.p2p},ie.prototype.getP2PConnectionState=function(){return this.isP2PActive()?this.p2pJingleSession.peerconnection.getConnectionState():null},ie.prototype.startP2PSession=function(){var e=this.getParticipants();if(1!==e.length)throw new Error("There must be exactly 1 participant to start the P2P session !");var t=e[0].getJid();this._startP2PSession(t)},ie.prototype.stopP2PSession=function(){this._stopP2PSession()},ie.prototype.getSpeakerStats=function(){return this.speakerStatsCollector.getStats()},ie.prototype.setReceiverVideoConstraint=function(e){this.qualityController.setPreferredReceiveMaxFrameHeight(e)},ie.prototype.setSenderVideoConstraint=function(e){return this.qualityController.setPreferredSendMaxFrameHeight(e)},ie.prototype.createVideoSIPGWSession=function(e,t){return this.room?this.videoSIPGWHandler.createVideoSIPGWSession(e,t):new Error(z.ERROR_NO_CONNECTION)},ie.prototype._sendConferenceJoinAnalyticsEvent=function(){var e=this.getMeetingUniqueId();!this._conferenceJoinAnalyticsEventSent&&e&&null!==this.getActivePeerConnection()&&(F.a.sendAnalytics(Object(Z.A)("joined",{meetingId:e,participantId:e+"."+this._statsCurrentId})),this._conferenceJoinAnalyticsEventSent=Date.now())},ie.prototype._sendConferenceLeftAnalyticsEvent=function(){var e=this.getMeetingUniqueId();e&&this._conferenceJoinAnalyticsEventSent&&F.a.sendAnalytics(Object(Z.A)("left",{meetingId:e,participantId:e+"."+this._statsCurrentId,stats:{duration:Math.floor((Date.now()-this._conferenceJoinAnalyticsEventSent)/1e3),perf:this.getPerformanceStats()}}))},ie.prototype._restartMediaSessions=function(){this.p2pJingleSession&&this.stopP2PSession(),this.jvbJingleSession&&this.jvbJingleSession.terminate(null,function(e){re.warn("An error occurred while trying to terminate the JVB session",e)},{reason:"success",reasonDescription:"restart required",requestRestart:!0,sendSessionTerminate:!0}),this._maybeStartOrStopP2P(!1)},ie.prototype._isE2EEEnabled=function(){return this._e2eEncryption&&this._e2eEncryption.isEnabled()},ie.prototype.isE2EESupported=function(){return I.a.isSupported(this.options.config)},ie.prototype.toggleE2EE=function(e){this.isE2EESupported()?this._e2eEncryption.setEnabled(e):re.warn("Cannot enable / disable E2EE: platform is not supported.")},ie.prototype.isLobbySupported=function(){return Boolean(this.room&&this.room.getLobby().isSupported())},ie.prototype.isMembersOnly=function(){return Boolean(this.room&&this.room.membersOnlyEnabled)},ie.prototype.enableLobby=function(){return this.room&&this.isModerator()?this.room.getLobby().enable():Promise.reject(new Error("The conference not started or user is not moderator"))},ie.prototype.disableLobby=function(){this.room&&this.isModerator()&&this.room.getLobby().disable()},ie.prototype.joinLobby=function(e,t){return this.room?this.room.getLobby().join(e,t):Promise.reject(new Error("The conference not started"))},ie.prototype.lobbyDenyAccess=function(e){this.room&&this.room.getLobby().denyAccess(e)},ie.prototype.lobbyApproveAccess=function(e){this.room&&this.room.getLobby().approveAccess(e)}}).call(this,"JitsiConference.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return E});var r=n(4),i=n(2),o=n(16),a=n(1),s=n(5),c=n(90),u=n.n(c),d=n(8),l=n(6),h=n.n(l),p=n(13),f=n.n(p),m=n(71),v=n.n(m),g=n(7),_=n(0),y=n.n(_),S=Object(r.getLogger)(e);function E(e){this.conference=e,this.xmppListeners={},e.on(a.TRACK_MUTE_CHANGED,function(t){if(t.isLocal()&&e.statistics){var n=t.isP2P?e.p2pJingleSession:e.jvbJingleSession,r=n&&n.peerconnection||null;e.statistics.sendMuteEvent(r,t.isMuted(),t.getType())}})}E.prototype.setupChatRoomListeners=function(){var e=this,t=this.conference,n=t.room;this.chatRoomForwarder=new u.a(n,this.conference.eventEmitter),n.addListener(y.a.ICE_RESTARTING,function(e){e.isP2P||t.rtc.closeBridgeChannel()}),n.addListener(y.a.ICE_RESTART_SUCCESS,function(e,n){!e.isP2P&&t._setBridgeChannel(n,e.peerconnection)}),n.addListener(y.a.AUDIO_MUTED_BY_FOCUS,function(e){s.a.sendAnalytics(Object(g.K)()),t.mutedByFocusActor=e,t.rtc.setAudioMute(!0).then(function(){t.isMutedByFocus=!0,t.mutedByFocusActor=null}).catch(function(e){t.mutedByFocusActor=null,S.warn("Error while audio muting due to focus request",e)})}),this.chatRoomForwarder.forward(y.a.SUBJECT_CHANGED,a.SUBJECT_CHANGED),this.chatRoomForwarder.forward(y.a.MUC_JOINED,a.CONFERENCE_JOINED),n.addListener(y.a.MUC_JOINED,function(){e.conference.isJvbConnectionInterrupted=!1,Object.keys(n.connectionTimes).forEach(function(e){var t=Object(g.C)("conference_"+e,{value:n.connectionTimes[e]});s.a.sendAnalytics(t)}),Object.keys(n.xmpp.connectionTimes).forEach(function(e){var t=Object(g.C)("xmpp_"+e,{value:n.xmpp.connectionTimes[e]});s.a.sendAnalytics(t)})}),n.addListener(y.a.RENEGOTIATION_FAILED,function(e,n){n.isP2P||t.eventEmitter.emit(a.CONFERENCE_FAILED,o.OFFER_ANSWER_FAILED,e)}),this.chatRoomForwarder.forward(y.a.ROOM_JOIN_ERROR,a.CONFERENCE_FAILED,o.CONNECTION_ERROR),this.chatRoomForwarder.forward(y.a.ROOM_CONNECT_ERROR,a.CONFERENCE_FAILED,o.CONNECTION_ERROR),this.chatRoomForwarder.forward(y.a.ROOM_CONNECT_NOT_ALLOWED_ERROR,a.CONFERENCE_FAILED,o.NOT_ALLOWED_ERROR),this.chatRoomForwarder.forward(y.a.ROOM_CONNECT_MEMBERS_ONLY_ERROR,a.CONFERENCE_FAILED,o.MEMBERS_ONLY_ERROR),this.chatRoomForwarder.forward(y.a.ROOM_MAX_USERS_ERROR,a.CONFERENCE_FAILED,o.CONFERENCE_MAX_USERS),this.chatRoomForwarder.forward(y.a.PASSWORD_REQUIRED,a.CONFERENCE_FAILED,o.PASSWORD_REQUIRED),this.chatRoomForwarder.forward(y.a.AUTHENTICATION_REQUIRED,a.CONFERENCE_FAILED,o.AUTHENTICATION_REQUIRED),this.chatRoomForwarder.forward(y.a.BRIDGE_DOWN,a.CONFERENCE_FAILED,o.VIDEOBRIDGE_NOT_AVAILABLE),n.addListener(y.a.BRIDGE_DOWN,function(){return s.a.sendAnalytics(Object(g.z)())}),this.chatRoomForwarder.forward(y.a.RESERVATION_ERROR,a.CONFERENCE_FAILED,o.RESERVATION_ERROR),this.chatRoomForwarder.forward(y.a.GRACEFUL_SHUTDOWN,a.CONFERENCE_FAILED,o.GRACEFUL_SHUTDOWN),n.addListener(y.a.CONNECTION_ICE_FAILED,function(e){t._onIceConnectionFailed(e)}),this.chatRoomForwarder.forward(y.a.MUC_DESTROYED,a.CONFERENCE_FAILED,o.CONFERENCE_DESTROYED),this.chatRoomForwarder.forward(y.a.CHAT_ERROR_RECEIVED,a.CONFERENCE_ERROR,o.CHAT_ERROR),this.chatRoomForwarder.forward(y.a.FOCUS_DISCONNECTED,a.CONFERENCE_FAILED,o.FOCUS_DISCONNECTED),n.addListener(y.a.FOCUS_LEFT,function(){s.a.sendAnalytics(Object(g.E)()),t.eventEmitter.emit(a.CONFERENCE_FAILED,o.FOCUS_LEFT)}),n.addListener(y.a.SESSION_ACCEPT_TIMEOUT,function(e){s.a.sendAnalyticsAndLog(Object(g.G)(g.b,{p2p:e.isP2P}))}),n.addListener(y.a.RECORDER_STATE_CHANGED,function(e,n){if(n){var r=t.getParticipantById(i.Strophe.getResourceFromJid(n));"off"===e.getStatus()?e.setTerminator(r):"on"===e.getStatus()&&e.setInitiator(r)}t.eventEmitter.emit(a.RECORDER_STATE_CHANGED,e)}),this.chatRoomForwarder.forward(y.a.TRANSCRIPTION_STATUS_CHANGED,a.TRANSCRIPTION_STATUS_CHANGED),this.chatRoomForwarder.forward(y.a.VIDEO_SIP_GW_AVAILABILITY_CHANGED,a.VIDEO_SIP_GW_AVAILABILITY_CHANGED),this.chatRoomForwarder.forward(y.a.VIDEO_SIP_GW_SESSION_STATE_CHANGED,a.VIDEO_SIP_GW_SESSION_STATE_CHANGED),this.chatRoomForwarder.forward(y.a.PHONE_NUMBER_CHANGED,a.PHONE_NUMBER_CHANGED),n.setParticipantPropertyListener(function(e,n){var r=t.getParticipantById(n);r&&r.setProperty(e.tagName.substring("abcpen_participant_".length),e.value)}),n.addListener(y.a.KICKED,t.onMemberKicked.bind(t)),n.addListener(y.a.SUSPEND_DETECTED,t.onSuspendDetected.bind(t)),this.chatRoomForwarder.forward(y.a.MUC_LOCK_CHANGED,a.LOCK_STATE_CHANGED),this.chatRoomForwarder.forward(y.a.MUC_MEMBERS_ONLY_CHANGED,a.MEMBERS_ONLY_CHANGED),n.addListener(y.a.MUC_MEMBER_JOINED,t.onMemberJoined.bind(t)),this.chatRoomForwarder.forward(y.a.MUC_LOBBY_MEMBER_JOINED,a.LOBBY_USER_JOINED),this.chatRoomForwarder.forward(y.a.MUC_LOBBY_MEMBER_UPDATED,a.LOBBY_USER_UPDATED),this.chatRoomForwarder.forward(y.a.MUC_LOBBY_MEMBER_LEFT,a.LOBBY_USER_LEFT),n.addListener(y.a.MUC_MEMBER_BOT_TYPE_CHANGED,t._onMemberBotTypeChanged.bind(t)),n.addListener(y.a.MUC_MEMBER_LEFT,t.onMemberLeft.bind(t)),this.chatRoomForwarder.forward(y.a.MUC_LEFT,a.CONFERENCE_LEFT),this.chatRoomForwarder.forward(y.a.MUC_DENIED_ACCESS,a.CONFERENCE_FAILED,o.CONFERENCE_ACCESS_DENIED),n.addListener(y.a.DISPLAY_NAME_CHANGED,t.onDisplayNameChanged.bind(t)),n.addListener(y.a.LOCAL_ROLE_CHANGED,function(e){t.onLocalRoleChanged(e),t.statistics&&t.isModerator()&&t.on(a.RECORDER_STATE_CHANGED,function(e){var t={error:e.getError(),id:"recorder_status",status:e.getStatus()};s.a.sendLog(JSON.stringify(t))})}),n.addListener(y.a.MUC_ROLE_CHANGED,t.onUserRoleChanged.bind(t)),n.addListener(v.a.IDENTITY_UPDATED,function(e,n){t.authEnabled=e,t.authIdentity=n,t.eventEmitter.emit(a.AUTH_STATUS_CHANGED,e,n)}),n.addListener(y.a.MESSAGE_RECEIVED,function(e,n,r,o,s){var c=i.Strophe.getResourceFromJid(e);t.eventEmitter.emit(a.MESSAGE_RECEIVED,c,r,s,n)}),n.addListener(y.a.PRIVATE_MESSAGE_RECEIVED,function(e,n,r,o,s){var c=i.Strophe.getResourceFromJid(e);t.eventEmitter.emit(a.PRIVATE_MESSAGE_RECEIVED,c,r,s)}),n.addListener(y.a.PRESENCE_STATUS,function(e,n){var r=i.Strophe.getResourceFromJid(e),o=t.getParticipantById(r);o&&o._status!==n&&(o._status=n,t.eventEmitter.emit(a.USER_STATUS_CHANGED,r,n))}),n.addListener(y.a.JSON_MESSAGE_RECEIVED,function(e,n){var r=i.Strophe.getResourceFromJid(e),o=t.getParticipantById(r);o?t.eventEmitter.emit(a.ENDPOINT_MESSAGE_RECEIVED,o,n):S.warn("Ignored XMPPEvents.JSON_MESSAGE_RECEIVED for not existing participant: "+e,n)}),n.addPresenceListener("startmuted",function(e,n){var r=!1;if(t.myUserId()===n&&t.isModerator())r=!0;else{var i=t.getParticipantById(n);i&&i.isModerator()&&(r=!0)}if(r){var o="true"===e.attributes.audio,s="true"===e.attributes.video,c=!1;o!==t.startMutedPolicy.audio&&(t.startMutedPolicy.audio=o,c=!0),s!==t.startMutedPolicy.video&&(t.startMutedPolicy.video=s,c=!0),c&&t.eventEmitter.emit(a.START_MUTED_POLICY_CHANGED,t.startMutedPolicy)}}),t.statistics&&(n.addListener(y.a.CONNECTION_ICE_FAILED,function(e){t.statistics.sendIceConnectionFailedEvent(e.peerconnection)}),n.addListener(y.a.ADD_ICE_CANDIDATE_FAILED,function(e,n){t.statistics.sendAddIceCandidateFailed(e,n)}))},E.prototype.setupRTCListeners=function(){var e=this.conference,t=e.rtc;t.addListener(h.a.REMOTE_TRACK_ADDED,e.onRemoteTrackAdded.bind(e)),t.addListener(h.a.REMOTE_TRACK_REMOVED,e.onRemoteTrackRemoved.bind(e)),t.addListener(h.a.DOMINANT_SPEAKER_CHANGED,function(t){e.lastDominantSpeaker!==t&&e.room&&(e.lastDominantSpeaker=t,e.eventEmitter.emit(a.DOMINANT_SPEAKER_CHANGED,t),e.statistics&&e.myUserId()===t&&e.statistics.sendDominantSpeakerEvent(e.room.roomjid))}),t.addListener(h.a.DATA_CHANNEL_OPEN,function(){var t=window.performance.now(),n="data.channel.opened";S.log("(TIME) data.channel.opened:\t",t),e.room.connectionTimes[n]=t,s.a.sendAnalytics(Object(g.C)(n,{value:t})),e.eventEmitter.emit(a.DATA_CHANNEL_OPENED)}),t.addListener(h.a.ENDPOINT_MESSAGE_RECEIVED,function(t,n){var r=e.getParticipantById(t);r?e.eventEmitter.emit(a.ENDPOINT_MESSAGE_RECEIVED,r,n):S.warn("Ignored ENDPOINT_MESSAGE_RECEIVED for not existing participant: "+t,n)}),t.addListener(h.a.LOCAL_UFRAG_CHANGED,function(e,t){e.isP2P||s.a.sendLog(JSON.stringify({id:"local_ufrag",value:t}))}),t.addListener(h.a.REMOTE_UFRAG_CHANGED,function(e,t){e.isP2P||s.a.sendLog(JSON.stringify({id:"remote_ufrag",value:t}))}),t.addListener(h.a.CREATE_ANSWER_FAILED,function(t,n){e.statistics.sendCreateAnswerFailed(t,n),n.isP2P||e.eventEmitter.emit(a.CONFERENCE_FAILED,o.OFFER_ANSWER_FAILED,t)}),t.addListener(h.a.CREATE_OFFER_FAILED,function(t,n){e.statistics.sendCreateOfferFailed(t,n),n.isP2P||e.eventEmitter.emit(a.CONFERENCE_FAILED,o.OFFER_ANSWER_FAILED,t)}),t.addListener(h.a.SET_LOCAL_DESCRIPTION_FAILED,function(t,n){e.statistics.sendSetLocalDescFailed(t,n),n.isP2P||e.eventEmitter.emit(a.CONFERENCE_FAILED,o.OFFER_ANSWER_FAILED,t)}),t.addListener(h.a.SET_REMOTE_DESCRIPTION_FAILED,function(t,n){e.statistics.sendSetRemoteDescFailed(t,n),n.isP2P||e.eventEmitter.emit(a.CONFERENCE_FAILED,o.OFFER_ANSWER_FAILED,t)}),t.addListener(h.a.LOCAL_TRACK_SSRC_UPDATED,function(t,n){t.isVideoTrack()&&t.videoType===f.a.DESKTOP&&e.statistics.sendScreenSharingEvent(!0,n)})},E.prototype.removeXMPPListeners=function(){var e=this,t=this.conference;t.xmpp.caps.removeListener(y.a.PARTCIPANT_FEATURES_CHANGED,this.xmppListeners[y.a.PARTCIPANT_FEATURES_CHANGED]),delete this.xmppListeners[y.a.PARTCIPANT_FEATURES_CHANGED],Object.keys(this.xmppListeners).forEach(function(n){t.xmpp.removeListener(n,e.xmppListeners[n])}),this.xmppListeners={}},E.prototype.setupXMPPListeners=function(){var e=this.conference,t=function(t){var n=e.getParticipantById(i.Strophe.getResourceFromJid(t));n&&e.eventEmitter.emit(a.PARTCIPANT_FEATURES_CHANGED,n)};e.xmpp.caps.addListener(y.a.PARTCIPANT_FEATURES_CHANGED,t),this.xmppListeners[y.a.PARTCIPANT_FEATURES_CHANGED]=t,this._addConferenceXMPPListener(y.a.CALL_INCOMING,e.onIncomingCall.bind(e)),this._addConferenceXMPPListener(y.a.CALL_ACCEPTED,e.onCallAccepted.bind(e)),this._addConferenceXMPPListener(y.a.TRANSPORT_INFO,e.onTransportInfo.bind(e)),this._addConferenceXMPPListener(y.a.CALL_ENDED,e.onCallEnded.bind(e)),this._addConferenceXMPPListener(y.a.START_MUTED_FROM_FOCUS,function(t,n){e.options.config.ignoreStartMuted||(e.startAudioMuted=t,e.startVideoMuted=n,e.getLocalTracks().forEach(function(t){switch(t.getType()){case d.a:e.startAudioMuted&&t.mute();break;case d.c:e.startVideoMuted&&t.mute()}}),e.eventEmitter.emit(a.STARTED_MUTED))}),this._addConferenceXMPPListener(y.a.CONFERENCE_TIMESTAMP_RECEIVED,function(t){e.eventEmitter.emit(a.CONFERENCE_CREATED_TIMESTAMP,t)})},E.prototype._addConferenceXMPPListener=function(e,t){this.xmppListeners[e]=t,this.conference.xmpp.addListener(e,t)},E.prototype.setupStatisticsListeners=function(){var e=this.conference;e.statistics&&(e.statistics.addAudioLevelListener(function(t,n,r,i){e.rtc.setAudioLevel(t,n,r,i)}),e.statistics.addBeforeDisposedListener(function(){e.eventEmitter.emit(a.BEFORE_STATISTICS_DISPOSED)}),e.options.config.startSilent||e.statistics.addByteSentStatsListener(function(t,n){e.getLocalTracks(d.a).forEach(function(e){var r=t.getLocalSSRC(e);r&&n.hasOwnProperty(r)&&e._onByteSentStatsReceived(t,n[r])})}))}}).call(this,"JitsiConferenceEventManager.js")},function(e,t,n){"use strict";(function(e,r){n.d(t,"a",function(){return s});var i=n(17),o=n(4),a=Object(o.getLogger)(e),s=(function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),e=t.call(this),a.info("This appears to be "+e.getName()+", ver: "+e.getVersion()),e}return _createClass(n,[{key:"doesVideoMuteByStreamRemove",value:function(){return this.isChromiumBased()||this.isSafari()}},{key:"supportsP2P",value:function(){return!this.usesUnifiedPlan()}},{key:"isChromiumBased",value:function(){return this.isChrome()||this.isElectron()||this.isNWJS()||this.isOpera()}},{key:"isSupported",value:function(){return this.isChromiumBased()||this.isFirefox()||this.isReactNative()||this.isSafari()&&!this.isVersionLessThan("12.1")}},{key:"isUserInteractionRequiredForUnmute",value:function(){return this.isFirefox()&&this.isVersionLessThan("68")}},{key:"supportsVideoMuteOnConnInterrupted",value:function(){return this.isChromiumBased()||this.isReactNative()||this.isSafari()}},{key:"supportsBandwidthStatistics",value:function(){return!this.isFirefox()&&!this.isSafari()}},{key:"supportsCodecPreferences",value:function(){return this.usesUnifiedPlan()&&void 0!==window.RTCRtpTransceiver&&Object.keys(window.RTCRtpTransceiver.prototype).indexOf("setCodecPreferences")>-1&&Object.keys(RTCRtpSender.prototype).indexOf("getCapabilities")>-1&&!this.isSafari()}},{key:"supportsDeviceChangeEvent",value:function(){return navigator.mediaDevices&&void 0!==navigator.mediaDevices.ondevicechange&&void 0!==navigator.mediaDevices.addEventListener}},{key:"supportsLocalCandidateRttStatistics",value:function(){return this.isChromiumBased()||this.isReactNative()||this.isSafari()}},{key:"supportsPerformanceObserver",value:function(){return void 0!==window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes.indexOf("longtask")>-1}},{key:"supportsReceiverStats",value:function(){return void 0!==window.RTCRtpReceiver&&Object.keys(RTCRtpReceiver.prototype).indexOf("getSynchronizationSources")>-1}},{key:"supportsRTTStatistics",value:function(){return!this.isFirefox()}},{key:"supportsVideo",value:function(){return!0}},{key:"usesPlanB",value:function(){return!this.usesUnifiedPlan()}},{key:"usesSdpMungingForSimulcast",value:function(){return this.isChromiumBased()||this.isReactNative()||this.isSafari()}},{key:"usesUnifiedPlan",value:function(){return!!this.isFirefox()||!(!this.isSafari()||void 0===window.RTCRtpTransceiver)&&Object.keys(RTCRtpTransceiver.prototype).indexOf("currentDirection")>-1}},{key:"usesNewGumFlow",value:function(){return this.isChrome()?!this.isVersionLessThan(61):!(!this.isFirefox()&&!this.isSafari())||!!this.isChromiumBased()&&this._getChromiumBasedVersion()>=61}},{key:"usesAdapter",value:function(){return this.usesNewGumFlow()}},{key:"usesRidsForSimulcast",value:function(){return!1}},{key:"supportsGetDisplayMedia",value:function(){return void 0!==navigator.getDisplayMedia||void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getDisplayMedia}},{key:"supportsInsertableStreams",value:function(){return Boolean(void 0!==window.RTCRtpSender&&(window.RTCRtpSender.prototype.createEncodedStreams||window.RTCRtpSender.prototype.createEncodedVideoStreams))}},{key:"supportsAudioRed",value:function(){return Boolean(window.RTCRtpSender&&window.RTCRtpSender.getCapabilities&&window.RTCRtpSender.getCapabilities("audio").codecs.some(function(e){return"audio/red"===e.mimeType})&&window.RTCRtpReceiver&&window.RTCRtpReceiver.getCapabilities&&window.RTCRtpReceiver.getCapabilities("audio").codecs.some(function(e){return"audio/red"===e.mimeType}))}},{key:"supportsSdpSemantics",value:function(){return this.isChromiumBased()&&this._getChromiumBasedVersion()>=65}},{key:"_getChromiumBasedVersion",value:function(){if(this.isChromiumBased()){if(this.isNWJS())return Number.parseInt(r.versions.chromium,10);var e=navigator.userAgent;if(e.match(/Chrome/))return Number.parseInt(e.match(/Chrome\/([\d.]+)/)[1],10)}return-1}}]),n})(i.a)}).call(this,"modules/browser/BrowserCapabilities.js",n(59))},function(e,t,n){e.exports=(function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)})({17:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(18),i=(function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,r){void 0===r&&(r=!1);var i=e.getVersionPrecision(t),o=e.getVersionPrecision(n),a=Math.max(i,o),s=0,c=e.map([t,n],function(t){var n=a-e.getVersionPrecision(t),r=t+new Array(n+1).join(".0");return e.map(r.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});for(r&&(s=a-Math.min(i,o)),a-=1;a>=s;){if(c[0][a]>c[1][a])return 1;if(c[0][a]===c[1][a]){if(a===s)return 0;a-=1}else if(c[0][a]<c[1][a])return-1}},e.map=function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e})();t.default=i,e.exports=t.default},18:function(e,t,n){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},o=n(18);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=(function(){function e(){}var t;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},(t=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}])&&a(e,t),e})();t.default=s,e.exports=t.default},91:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=c(n(92)),i=c(n(93)),o=c(n(94)),a=c(n(95)),s=c(n(17));function c(e){return e&&e.__esModule?e:{default:e}}var u=(function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=r.default.find(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=i.default.find(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=o.default.find(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=a.default.find(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return _extends({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},r=0,i={},o=0;if(Object.keys(e).forEach(function(t){var a=e[t];"string"==typeof a?(i[t]=a,o+=1):"object"==typeof a&&(n[t]=a,r+=1)}),r>0){var a=Object.keys(n),s=a.find(function(e){return t.isOS(e)});if(s){var c=this.satisfies(n[s]);if(void 0!==c)return c}var u=a.find(function(e){return t.isPlatform(e)});if(u){var d=this.satisfies(n[u]);if(void 0!==d)return d}}if(o>0){var l=Object.keys(i).find(function(e){return t.isBrowser(e,!0)});if(void 0!==l)return this.compareVersion(i[l])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),i=s.default.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n},t.compareVersion=function(e){var t=[0],n=e,r=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(s.default.compareVersions(i,n,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e){return this.isBrowser(e)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some(function(e){return t.is(e)})},e})();t.default=u,e.exports=t.default},92:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=a,e.exports=t.default},93:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows/i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=i.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:n}}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=i.default.getMacOSVersionName(t),r={name:o.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=i.default.getAndroidVersionName(t),r={name:o.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:o.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}];t.default=a,e.exports=t.default},94:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];t.default=a,e.exports=t.default},95:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},n=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},n=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},n=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},n=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=a,e.exports=t.default}})},function(e,t,n){"use strict";(function(e){var r=n(4),i=n(7),o=n(3);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=Object(r.getLogger)(e);t.a=new((function(){function e(){_classCallCheck(this,e),this.reset()}return _createClass(e,[{key:"reset",value:function(){this.disposed=!1,this.analyticsHandlers=new Set,this.cache=[],this.permanentProperties={},this.conferenceName="",this.addPermanentProperties({user_agent:navigator.userAgent,browser_name:o.a.getName()})}},{key:"dispose",value:function(){s.warn("Disposing of analytics adapter."),this.analyticsHandlers&&this.analyticsHandlers.size>0&&this.analyticsHandlers.forEach(function(e){"function"==typeof e.dispose&&e.dispose()}),this.setAnalyticsHandlers([]),this.disposed=!0}},{key:"setAnalyticsHandlers",value:function(e){var t=this;if(!this.disposed){this.analyticsHandlers=new Set(e),this._setUserProperties();var n=this.cache;this.cache=null,n&&n.forEach(function(e){return t._sendEvent(e)})}}},{key:"_setUserProperties",value:function(){var e=this;this.analyticsHandlers.forEach(function(t){try{t.setUserProperties(e.permanentProperties)}catch(t){s.warn("Error in setUserProperties method of one of the analytics handlers: "+t)}})}},{key:"addPermanentProperties",value:function(e){this.permanentProperties=(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){a(e,t,n[t])})}return e})({},this.permanentProperties,e),this._setUserProperties()}},{key:"setConferenceName",value:function(e){this.conferenceName=e,this.addPermanentProperties({conference_name:e})}},{key:"sendEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.disposed){var n=null;"string"==typeof e?n={type:i.t,action:e,actionSubject:e,source:e,attributes:t}:"object"==typeof e&&(n=e),this._verifyRequiredFields(n)?this._sendEvent(n):s.error("Dropping a mis-formatted event: "+JSON.stringify(n))}}},{key:"_verifyRequiredFields",value:function(e){if(!e)return!1;e.type||(e.type=i.t);var t=e.type;return t!==i.t&&t!==i.u&&t!==i.w&&t!==i.v?(s.error("Unknown event type: "+t),!1):t===i.u?Boolean(e.name):(e.action=e.action||e.name||e.actionSubject,e.actionSubject=e.actionSubject||e.name||e.action,e.source=e.source||e.name||e.action||e.actionSubject,e.action&&e.actionSubject&&e.source?!!(t!==i.v||(e.objectType=e.objectType||"generic-object-type",e.containerType=e.containerType||"conference","conference"!==e.containerType||e.containerId||(e.containerId=this.conferenceName),e.objectType&&e.objectId&&e.containerType&&e.containerId))||(s.error("Required field missing (containerId, containerType, objectId or objectType)"),!1):(s.error("Required field missing (action, actionSubject or source)"),!1))}},{key:"_maybeCacheEvent",value:function(e){return!!this.cache&&(this.cache.push(e),this.cache.length>100&&this.cache.splice(0,1),!0)}},{key:"_sendEvent",value:function(e){this._maybeCacheEvent(e)||this.analyticsHandlers.forEach(function(t){try{t.sendEvent(e)}catch(e){s.warn("Error sending analytics event: "+e)}})}}]),e})())}).call(this,"modules/statistics/AnalyticsAdapter.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var r=n(4),i=n(23),o=n(27),a=Object(r.getLogger)(e),s=(function(){function e(t,n){_classCallCheck(this,e),this.eventEmitter=t,this.longTasks=0,this.maxDuration=0,this.performanceStatsInterval=n,this.stats=new o.a}return _createClass(e,[{key:"getLongTasksStats",value:function(){return{avgRatePerMinute:(60*this.stats.getAverage()).toFixed(2),maxDurationMs:this.maxDuration}}},{key:"startObserver",value:function(){var e=this;this.longTaskEventHandler=function(t){for(var n,r=_createForOfIteratorHelperLoose(t.getEntries());!(n=r()).done;){var i=n.value;e.longTasks++,e.maxDuration=Math.max(e.maxDuration,i.duration).toFixed(3)}},a.info("Creating a Performance Observer for monitoring Long Tasks"),this.observer=new PerformanceObserver(this.longTaskEventHandler),this.observer.observe({type:"longtask",buffered:!0});var t=Date.now();this.longTasksIntervalId=setInterval(function(){var n=Date.now(),r=e._lastTimeStamp?(n-e._lastTimeStamp)/1e3:(n-t)/1e3,o=e.longTasks/r;e.stats.addNext(o),e.eventEmitter.emit(i.e,e.getLongTasksStats()),e.longTasks=0,e._lastTimeStamp=Date.now()},this.performanceStatsInterval)}},{key:"stopObserver",value:function(){this.observer&&this.observer.disconnect(),this.longTaskEventHandler=null,this.longTasksIntervalId&&(clearInterval(this.longTasksIntervalId),this.longTasksIntervalId=null)}}]),e})()}).call(this,"modules/statistics/PerformanceObserverStats.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return f});var r=n(17),i=n(4),o=n(8),a=n(23),s=n(3),c=n(11),u=Object(i.getLogger)(e),d={};function l(e,t){return!t||t<=0||!e||e<=0?0:Math.round(e/t*100)}function h(){this.loss={},this.bitrate={download:0,upload:0},this.resolution={},this.framerate=0,this.codec=""}function p(){this.bandwidth={},this.bitrate={},this.packetLoss=null,this.transport=[]}function f(e,t,n,r){this._browserType=s.a.getName();var i=d[this._browserType];if(!i)throw"The browser type '"+this._browserType+"' isn't supported!";this._usesPromiseGetStats=s.a.isSafari()||s.a.isFirefox(),this._getStatValue=this._usesPromiseGetStats?this._defineNewGetStatValueMethod(i):this._defineGetStatValueMethod(i),this.peerconnection=e,this.baselineAudioLevelsReport=null,this.currentAudioLevelsReport=null,this.currentStatsReport=null,this.previousStatsReport=null,this.audioLevelReportHistory={},this.audioLevelsIntervalId=null,this.eventEmitter=r,this.conferenceStats=new p,this.audioLevelsIntervalMilis=t,this.statsIntervalId=null,this.statsIntervalMilis=n,this.ssrc2stats=new Map}d[r.b.FIREFOX]={ssrc:"ssrc",packetsReceived:"packetsReceived",packetsLost:"packetsLost",packetsSent:"packetsSent",bytesReceived:"bytesReceived",bytesSent:"bytesSent",framerateMean:"framerateMean",ip:"address",port:"port",protocol:"protocol"},d[r.b.CHROME]={receiveBandwidth:"googAvailableReceiveBandwidth",sendBandwidth:"googAvailableSendBandwidth",remoteAddress:"googRemoteAddress",transportType:"googTransportType",localAddress:"googLocalAddress",activeConnection:"googActiveConnection",ssrc:"ssrc",packetsReceived:"packetsReceived",packetsSent:"packetsSent",packetsLost:"packetsLost",bytesReceived:"bytesReceived",bytesSent:"bytesSent",googCodecName:"googCodecName",googFrameHeightReceived:"googFrameHeightReceived",googFrameWidthReceived:"googFrameWidthReceived",googFrameHeightSent:"googFrameHeightSent",googFrameWidthSent:"googFrameWidthSent",googFrameRateReceived:"googFrameRateReceived",googFrameRateSent:"googFrameRateSent",audioInputLevel:"audioInputLevel",audioOutputLevel:"audioOutputLevel",currentRoundTripTime:"googRtt",remoteCandidateType:"googRemoteCandidateType",localCandidateType:"googLocalCandidateType",ip:"ip",port:"port",protocol:"protocol"},d[r.b.OPERA]=d[r.b.CHROME],d[r.b.NWJS]=d[r.b.CHROME],d[r.b.ELECTRON]=d[r.b.CHROME],d[r.b.SAFARI]=d[r.b.CHROME],d[r.b.REACT_NATIVE]=d[r.b.CHROME],h.prototype.setLoss=function(e){this.loss=e||{}},h.prototype.setResolution=function(e){this.resolution=e||{}},h.prototype.addBitrate=function(e){this.bitrate.download+=e.download,this.bitrate.upload+=e.upload},h.prototype.resetBitrate=function(){this.bitrate.download=0,this.bitrate.upload=0},h.prototype.setFramerate=function(e){this.framerate=e||0},h.prototype.setCodec=function(e){this.codec=e||""},f.prototype.stop=function(){this.audioLevelsIntervalId&&(clearInterval(this.audioLevelsIntervalId),this.audioLevelsIntervalId=null),this.statsIntervalId&&(clearInterval(this.statsIntervalId),this.statsIntervalId=null)},f.prototype.errorCallback=function(e){c.callErrorHandler(e),u.error("Get stats error",e),this.stop()},f.prototype.start=function(e){var t=this;e&&(s.a.supportsReceiverStats()&&u.info("Using RTCRtpSynchronizationSource for remote audio levels"),this.audioLevelsIntervalId=setInterval(function(){if(s.a.supportsReceiverStats()){var e=t.peerconnection.getAudioLevels();for(var n in e)if(e.hasOwnProperty(n)){var r=2.5*e[n];t.eventEmitter.emit(a.a,t.peerconnection,Number.parseInt(n,10),r,!1)}}else t.peerconnection.getStats(function(e){var n;n=e&&e.result&&"function"==typeof e.result?e.result():e,t.currentAudioLevelsReport=n,t._usesPromiseGetStats?t.processNewAudioLevelReport():t.processAudioLevelReport(),t.baselineAudioLevelsReport=t.currentAudioLevelsReport},function(e){return t.errorCallback(e)})},this.audioLevelsIntervalMilis)),this.statsIntervalId=setInterval(function(){t.peerconnection.getStats(function(e){var n;n=e&&e.result&&"function"==typeof e.result?e.result():e,t.currentStatsReport=n;try{t._usesPromiseGetStats?t.processNewStatsReport():t.processStatsReport()}catch(e){c.callErrorHandler(e),u.error("Unsupported key:"+e,e)}t.previousStatsReport=t.currentStatsReport},function(e){return t.errorCallback(e)})},this.statsIntervalMilis)},f.prototype._defineGetStatValueMethod=function(e){var t;switch(this._browserType){case r.b.CHROME:case r.b.OPERA:case r.b.NWJS:case r.b.ELECTRON:t=function(e,t){return e.stat(t)};break;case r.b.REACT_NATIVE:t=function(e,t){var n;return e.values.some(function(e){return!!e.hasOwnProperty(t)&&(n=e[t],!0)}),n};break;default:t=function(e,t){return e[t]}}return function(n,r){return t(n,(function(t){var n=e[t];if(n)return n;throw"The property '"+t+"' isn't supported!"})(r))}},f.prototype.getNonNegativeStat=function(e,t){var n=this._getStatValue(e,t);return"number"!=typeof n&&(n=Number(n)),isNaN(n)?0:Math.max(0,n)},f.prototype.processStatsReport=function(){var e=this;if(this.previousStatsReport){var t=this._getStatValue,n={};for(var r in this.currentStatsReport)if(this.currentStatsReport.hasOwnProperty(r)){var i=this.currentStatsReport[r];if(i){try{var o=t(i,"receiveBandwidth"),s=t(i,"sendBandwidth");(o||s)&&(this.conferenceStats.bandwidth={download:Math.round(o/1e3),upload:Math.round(s/1e3)})}catch(t){}if("googCandidatePair"===i.type)if("continue"===(function(){var n=void 0,r=void 0,o=void 0,a=void 0,s=void 0,c=void 0,u=void 0;try{if(!(n=t(i,"activeConnection")))return"continue";r=t(i,"remoteAddress"),u=t(i,"transportType"),a=t(i,"localAddress"),o=t(i,"localCandidateType"),s=t(i,"remoteCandidateType"),c=e.getNonNegativeStat(i,"currentRoundTripTime")}catch(e){}if(!r||!u||!a||"true"!==n)return"continue";var d=e.conferenceStats.transport;return d.some(function(e){return e.ip===r&&e.type===u&&e.localip===a})||d.push({ip:r,type:u,localip:a,p2p:e.peerconnection.isP2P,localCandidateType:o,remoteCandidateType:s,rtt:c}),"continue"})())continue;if("candidatepair"===i.type){if("succeeded"!==i.state||!i.selected)continue;var c=this.currentStatsReport[i.localCandidateId],d=this.currentStatsReport[i.remoteCandidateId];this.conferenceStats.transport.push({ip:d.ipAddress+":"+d.portNumber,type:c.transport,localip:c.ipAddress+":"+c.portNumber,p2p:this.peerconnection.isP2P,localCandidateType:c.candidateType,remoteCandidateType:d.candidateType})}if("ssrc"===i.type||"outboundrtp"===i.type||"inboundrtp"===i.type||"track"===i.type){var l=this.previousStatsReport[r],p=this.getNonNegativeStat(i,"ssrc");if("track"===i.type&&Array.isArray(i.ssrcIds)&&(p=Number(i.ssrcIds[0])),l&&p&&!0!==i.isRemote&&!0!==i.remoteSource){var f=this.ssrc2stats.get(p);f||(f=new h,this.ssrc2stats.set(p,f));var m=!0,v="packetsReceived",g=t(i,v);null!=g&&""!==g||(m=!1,null==(g=t(i,v="packetsSent"))&&u.warn("No packetsReceived nor packetsSent stat found")),(!g||g<0)&&(g=0);var _=this.getNonNegativeStat(l,v),y=Math.max(0,g-_),S=this.getNonNegativeStat(i,"packetsLost"),E=this.getNonNegativeStat(l,"packetsLost"),b=Math.max(0,S-E);f.setLoss({packetsTotal:y+b,packetsLost:b,isDownloadStream:m});var C=this.getNonNegativeStat(i,"bytesReceived"),T=this.getNonNegativeStat(l,"bytesReceived"),R=Math.max(0,C-T),A=0,k=t(i,"bytesSent");"number"!=typeof k&&"string"!=typeof k||(k=Number(k),isNaN(k)||(n[p]=k,k>0&&(A=k-t(l,"bytesSent")))),A=Math.max(0,A);var I=i.timestamp-l.timestamp,w=0,P=0;I>0&&(w=Math.round(8*R/I),P=Math.round(8*A/I)),f.addBitrate({download:w,upload:P});var O={height:null,width:null};try{var D=void 0,N=void 0;((D=t(i,"googFrameHeightReceived"))&&(N=t(i,"googFrameWidthReceived"))||(D=t(i,"googFrameHeightSent"))&&(N=t(i,"googFrameWidthSent")))&&(O.height=D,O.width=N)}catch(t){}var M=void 0,L=void 0;try{M=t(i,"googFrameRateReceived")||t(i,"googFrameRateSent")||0}catch(t){try{M=this.getNonNegativeStat(i,"framerateMean")}catch(t){}}f.setFramerate(Math.round(M||0)),O.height&&O.width?f.setResolution(O):f.setResolution(null);try{L=t(i,"googCodecName")||""}catch(t){}f.setCodec(L)}}}}this.eventEmitter.emit(a.c,this.peerconnection,n),this._processAndEmitReport()}},f.prototype._processAndEmitReport=function(){for(var e,t=this,n={download:0,upload:0},r={download:0,upload:0},i=0,o=0,s={},c={},d={},h=0,p=0,f="",m=0,v=0,g="",_=_createForOfIteratorHelperLoose(this.ssrc2stats);!(e=_()).done;){var y=e.value,S=_slicedToArray(y,2),E=S[0],b=S[1],C=b.loss,T=C.isDownloadStream?"download":"upload";n[T]+=C.packetsTotal,r[T]+=C.packetsLost,i+=b.bitrate.download,o+=b.bitrate.upload;var R=this.peerconnection.getTrackBySSRC(E);if(R){R.isAudioTrack()?(h+=b.bitrate.download,p+=b.bitrate.upload,f=b.codec):(m+=b.bitrate.download,v+=b.bitrate.upload,g=b.codec);var A=R.getParticipantId();if(A){var k=b.resolution;if(k.width&&k.height&&-1!==k.width&&-1!==k.height){var I=s[A]||{};I[E]=k,s[A]=I}if(0!==b.framerate){var w=c[A]||{};w[E]=b.framerate,c[A]=w}if(f.length&&g.length){var P={audio:f,video:g},O=d[A]||{};O[E]=P,d[A]=O}}else u.error("No participant ID returned by "+R)}b.resetBitrate()}this.conferenceStats.bitrate={upload:o,download:i},this.conferenceStats.bitrate.audio={upload:p,download:h},this.conferenceStats.bitrate.video={upload:v,download:m},this.conferenceStats.packetLoss={total:l(r.download+r.upload,n.download+n.upload),download:l(r.download,n.download),upload:l(r.upload,n.upload)};var D,N={};Object.keys(this.audioLevelReportHistory).forEach(function(e){var n=t.audioLevelReportHistory[e],r=n.data,i=n.isLocal,o=r.reduce(function(e,t){return e+t})/r.length;if(i)D=o;else{var a=t.peerconnection.getTrackBySSRC(Number(e));if(a){var s=a.getParticipantId();s&&(N[s]=o)}}}),this.audioLevelReportHistory={},this.eventEmitter.emit(a.d,this.peerconnection,{bandwidth:this.conferenceStats.bandwidth,bitrate:this.conferenceStats.bitrate,packetLoss:this.conferenceStats.packetLoss,resolution:s,framerate:c,codec:d,transport:this.conferenceStats.transport,localAvgAudioLevels:D,avgAudioLevels:N}),this.conferenceStats.transport=[]},f.prototype.processAudioLevelReport=function(){if(this.baselineAudioLevelsReport){var e=this._getStatValue;for(var t in this.currentAudioLevelsReport)if(this.currentAudioLevelsReport.hasOwnProperty(t)){var n=this.currentAudioLevelsReport[t];if("ssrc"===n.type||"track"===n.type){var r=this.baselineAudioLevelsReport[t],i=void 0,o=this.getNonNegativeStat(n,"ssrc");if(!o&&Array.isArray(n.ssrcIds)&&(o=Number(n.ssrcIds[0])),r)if(o){try{i=e(n,"audioInputLevel")||e(n,"audioOutputLevel")}catch(e){return u.warn("Audio Levels are not available in the statistics."),void clearInterval(this.audioLevelsIntervalId)}if(i){var s;s="ssrc"===n.type?!e(n,"packetsReceived"):!n.remoteSource,i/=32767,o in this.audioLevelReportHistory||(this.audioLevelReportHistory[o]={isLocal:s,data:[]}),this.audioLevelReportHistory[o].data.push(i),this.eventEmitter.emit(a.a,this.peerconnection,o,i,s)}}else Date.now()-n.timestamp<3e3&&u.warn("No ssrc: ");else u.warn(o+" not enough data")}}}},f.prototype._defineNewGetStatValueMethod=function(e){return function(t,n){return t[(function(t){var n=e[t];if(n)return n;throw"The property '"+t+"' isn't supported!"})(n)]}},f.prototype.getNonNegativeValue=function(e){var t=e;return"number"!=typeof t&&(t=Number(t)),isNaN(t)?0:Math.max(0,t)},f.prototype._calculateBitrate=function(e,t,n){var r=this.getNonNegativeValue(e[n]),i=this.getNonNegativeValue(t[n]),o=Math.max(0,r-i),a=e.timestamp-t.timestamp,s=0;return a>0&&(s=Math.round(8*o/a)),s},f.prototype.processNewStatsReport=function(){var e=this;if(this.previousStatsReport){var t=this._getStatValue,n={};this.currentStatsReport.forEach(function(r){if("candidate-pair"===r.type&&r.nominated&&"succeeded"===r.state){var i=r.availableIncomingBitrate,o=r.availableOutgoingBitrate;(i||o)&&(e.conferenceStats.bandwidth={download:Math.round(i/1e3),upload:Math.round(o/1e3)});var a=e.currentStatsReport.get(r.remoteCandidateId),s=e.currentStatsReport.get(r.localCandidateId);if(a&&s){var c=t(a,"ip")+":"+t(a,"port"),u=t(s,"ip")+":"+t(s,"port"),d=t(a,"protocol"),l=e.conferenceStats.transport;l.some(function(e){return e.ip===c&&e.type===d&&e.localip===u})||l.push({ip:c,type:d,localIp:u,p2p:e.peerconnection.isP2P,localCandidateType:s.candidateType,remoteCandidateType:a.candidateType,networkType:s.networkType,rtt:1e3*r.currentRoundTripTime})}}else if("inbound-rtp"===r.type||"outbound-rtp"===r.type){var p=e.previousStatsReport.get(r.id),f=e.getNonNegativeValue(r.ssrc);if(!p||!f)return;var m=e.ssrc2stats.get(f);m||(m=new h,e.ssrc2stats.set(f,m));var v=!0,g="packetsReceived";"outbound-rtp"===r.type&&(v=!1,g="packetsSent");var _=r[g];(!_||_<0)&&(_=0);var y=e.getNonNegativeValue(p[g]),S=Math.max(0,_-y),E=e.getNonNegativeValue(r.packetsLost),b=e.getNonNegativeValue(p.packetsLost),C=Math.max(0,E-b);m.setLoss({packetsTotal:S+C,packetsLost:C,isDownloadStream:v}),"inbound-rtp"===r.type?m.addBitrate({download:e._calculateBitrate(r,p,"bytesReceived"),upload:0}):(n[f]=e.getNonNegativeValue(r.bytesSent),m.addBitrate({download:0,upload:e._calculateBitrate(r,p,"bytesSent")}));var T=r.framerateMean;T&&m.setFramerate(Math.round(T||0))}else if("track"===r.type){var R={height:r.frameHeight,width:r.frameWidth},A=r.framesPerSecond;if(!A){var k=e.previousStatsReport.get(r.id);if(k){var I=r.timestamp-k.timestamp;I>0&&r.framesSent&&(A=(r.framesSent-k.framesSent)/I*1e3)}if(!A)return}var w=r.trackIdentifier,P=e.peerconnection.getSsrcByTrackId(w);if(!P)return;var O=e.ssrc2stats.get(P);O||(O=new h,e.ssrc2stats.set(P,O)),O.setFramerate(Math.round(A||0)),R.height&&R.width?O.setResolution(R):O.setResolution(null)}}),this.eventEmitter.emit(a.c,this.peerconnection,n),this._processAndEmitReport()}},f.prototype.processNewAudioLevelReport=function(){var e=this;this.baselineAudioLevelsReport&&this.currentAudioLevelsReport.forEach(function(t){if("track"===t.type){var n=t.audioLevel;if(n){var r=t.trackIdentifier,i=e.peerconnection.getSsrcByTrackId(r);if(i){var s=i===e.peerconnection.getLocalSSRC(e.peerconnection.getLocalTracks(o.a));e.eventEmitter.emit(a.a,e.peerconnection,i,n,s)}}}})}}).call(this,"modules/statistics/RTPStatsCollector.js")},function(e,t){function n(e,t){if(!e||!t||"function"!=typeof e.addListener||"function"!=typeof t.emit)throw new Error("Invalid arguments passed to EventEmitterForwarder");this.src=e,this.dest=t}n.prototype.forward=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];t[0]=this.dest,this.src.addListener(r,Function.prototype.bind.apply(this.dest.emit,t))},e.exports=n},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return d});var r=n(4),i=n(2),o=n(1),a=n(48),s=n(62),c=n(8),u=Object(r.getLogger)(e),d=(function(){function e(t,n,r,o,s,c,u){_classCallCheck(this,e),this._jid=t,this._id=i.Strophe.getResourceFromJid(t),this._conference=n,this._displayName=r,this._supportsDTMF=!1,this._tracks=[],this._role="none",this._status=c,this._hidden=o,this._statsID=s,this._connectionStatus=a.a.ACTIVE,this._properties={},this._identity=u}return _createClass(e,[{key:"getConference",value:function(){return this._conference}},{key:"getProperty",value:function(e){return this._properties[e]}},{key:"hasAnyVideoTrackWebRTCMuted",value:function(){return this.getTracks().some(function(e){return e.getType()===c.c&&e.isWebRTCTrackMuted()})}},{key:"_setConnectionStatus",value:function(e){this._connectionStatus=e}},{key:"getConnectionStatus",value:function(){return this._connectionStatus}},{key:"setProperty",value:function(e,t){var n=this._properties[e];t!==n&&(this._properties[e]=t,this._conference.eventEmitter.emit(o.PARTICIPANT_PROPERTY_CHANGED,this,e,n,t))}},{key:"getTracks",value:function(){return this._tracks.slice()}},{key:"getTracksByMediaType",value:function(e){return this.getTracks().filter(function(t){return t.getType()===e})}},{key:"getId",value:function(){return this._id}},{key:"getJid",value:function(){return this._jid}},{key:"getDisplayName",value:function(){return this._displayName}},{key:"getStatsID",value:function(){return this._statsID}},{key:"getStatus",value:function(){return this._status}},{key:"isModerator",value:function(){return"moderator"===this._role}},{key:"isHidden",value:function(){return this._hidden}},{key:"isAudioMuted",value:function(){return this._isMediaTypeMuted(c.a)}},{key:"_isMediaTypeMuted",value:function(e){return this.getTracks().reduce(function(t,n){return t&&(n.getType()!==e||n.isMuted())},!0)}},{key:"isVideoMuted",value:function(){return this._isMediaTypeMuted(c.c)}},{key:"getRole",value:function(){return this._role}},{key:"supportsDTMF",value:function(){return this._supportsDTMF}},{key:"getFeatures",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;return this._getFeaturesPromise?this._getFeaturesPromise:(this._getFeaturesPromise=this._conference.xmpp.caps.getFeatures(this._jid,t).catch(function(n){return n===s.a?e._conference.xmpp.caps.getFeatures(e._jid,t):(u.warn("Failed to discover features of "+e._jid,n),Promise.reject(n))}),this._getFeaturesPromise.then(function(t){return e._getFeaturesPromise=void 0,t},function(t){throw e._getFeaturesPromise=void 0,t}))}},{key:"getBotType",value:function(){return this._botType}}]),e})()}).call(this,"JitsiParticipant.js")},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(26),i=n(28);function o(e){var t,n=this,o=e.id,a=e.password,s=e.onCreateResource,c=e.onLoginSuccessful,u=e.roomPassword,d=!1,l=new i.c(this.connection.options),h=new Promise(function(e,i){t=i,l.addListener(r.CONNECTION_DISCONNECTED,function(){l=void 0}),l.addListener(r.CONNECTION_ESTABLISHED,function(){d||(c&&c(),l.createRoom(n.options.name,n.options.config,s).moderator.authenticate().then(function(){l&&l.disconnect(),d||(n.join(u),e())}).catch(function(e){var t=e.error,n=e.message;l.disconnect(),i({authenticationError:t,message:n})}))}),l.addListener(r.CONNECTION_FAILED,function(e,t,n){i({connectionError:e,credentials:n,message:t}),l=void 0}),d||l.connect(o,a)});return h.cancel=function(){d=!0,t({}),l&&l.disconnect()},h}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var r=n(4),i=Object(r.getLogger)(e),o=Symbol("kJitsiE2EE"),a=(function(){function e(t){_classCallCheck(this,e),this._options=t;var n="",r=document.querySelector('script[src*="lib-jitsi-meet"]');if(r){var o=r.src.lastIndexOf("/");n=r.src.substring(0,o)+"/"}var a=new Blob(["importScripts(\""+n+"lib-jitsi-meet.e2ee-worker.js\");"],{type:"application/javascript"}),s=window.URL.createObjectURL(a);this._worker=new Worker(s,{name:"E2EE Worker"}),this._worker.onerror=function(e){return i.onerror(e)};var c=new TextEncoder;this._worker.postMessage({operation:"initialize",salt:c.encode(t.salt)})}return _createClass(e,[{key:"cleanup",value:function(e){this._worker.postMessage({operation:"cleanup",participantId:e})}},{key:"handleReceiver",value:function(e,t,n){var r;e[o]||(e[o]=!0,r=e.createEncodedStreams?e.createEncodedStreams():"video"===t?e.createEncodedVideoStreams():e.createEncodedAudioStreams(),this._worker.postMessage({operation:"decode",readableStream:r.readable||r.readableStream,writableStream:r.writable||r.writableStream,participantId:n},[r.readable||r.readableStream,r.writable||r.writableStream]))}},{key:"handleSender",value:function(e,t,n){var r;e[o]||(e[o]=!0,r=e.createEncodedStreams?e.createEncodedStreams():"video"===t?e.createEncodedVideoStreams():e.createEncodedAudioStreams(),this._worker.postMessage({operation:"encode",readableStream:r.readable||r.readableStream,writableStream:r.writable||r.writableStream,participantId:n},[r.readable||r.readableStream,r.writable||r.writableStream]))}},{key:"setKey",value:function(e,t,n){this._worker.postMessage({operation:"setKey",participantId:e,key:t,keyIndex:n})}}]),e})()}).call(this,"modules/e2ee/E2EEContext.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var r=n(4),i=n(49),o=n(95),a=Object(r.getLogger)(e),s=(function(){function e(t){_classCallCheck(this,e),this._stropheConn=t,this._resumeRetryN=0,this._retryDelay=void 0}return _createClass(e,[{key:"schedule",value:function(){var e=this;this._cancelResume(),this._resumeRetryN+=1,this._networkOnlineListener=i.b.addEventListener(i.a,function(t){t.isOnline?e._scheduleResume():e._cancelResume()}),i.b.isOnline()&&this._scheduleResume()}},{key:"_scheduleResume",value:function(){var e=this;this._resumeTimeout||(this._resumeRetryN=Math.min(3,this._resumeRetryN),this._retryDelay=Object(o.a)(this._resumeRetryN,1500*this._resumeRetryN,3),a.info("Will try to resume the XMPP connection in "+this.retryDelay+"ms"),this._resumeTimeout=setTimeout(function(){return e._resumeConnection()},this.retryDelay))}},{key:"_cancelResume",value:function(){this._resumeTimeout&&(a.info("Canceling connection resume task"),clearTimeout(this._resumeTimeout),this._resumeTimeout=void 0,this._retryDelay=void 0)}},{key:"_resumeConnection",value:function(){var e=this._stropheConn.streamManagement,t=e.getResumeToken();if(t){a.info("Trying to resume the XMPP connection");var n=new URL(this._stropheConn.service),r=n.search;-1===r.indexOf("previd=")&&(r+=-1===r.indexOf("?")?"?previd="+t:"&previd="+t),n.search=r,this._stropheConn.service=n.toString(),e.resume()}}},{key:"cancel",value:function(){this._cancelResume(),this._resumeRetryN=0,this._networkOnlineListener&&(this._networkOnlineListener(),this._networkOnlineListener=null)}},{key:"retryDelay",get:function(){return this._retryDelay}}]),e})()}).call(this,"modules/xmpp/ResumeTask.js")},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return Math.floor(Math.random()*(1e3*Math.pow(n,e)-t)+t)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=(function(){function e(){_classCallCheck(this,e),this._lastSuccess=null}return _createClass(e,[{key:"startTracking",value:function(e,t){var n=this,r=t.rawInput;t.rawInput=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];e.connected&&(n._lastSuccess=Date.now()),r.apply(t,o)}}},{key:"getTimeSinceLastSuccess",value:function(){return this._lastSuccess?Date.now()-this._lastSuccess:null}}]),e})()},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return u});var r=n(4),i=n(2),o=n(11),a=n.n(o),s=n(38),c=Object(r.getLogger)(e),u=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,i=e.onPingThresholdExceeded;return _classCallCheck(this,n),(r=t.call(this)).failedPings=0,r.pingExecIntervals=new Array(12),r._onPingThresholdExceeded=i,r}return _createClass(n,[{key:"init",value:function(e){_get(_getPrototypeOf(n.prototype),"init",this).call(this,e),i.Strophe.addNamespace("PING","urn:xmpp:ping")}},{key:"ping",value:function(e,t,n,r){this._addPingExecutionTimestamp();var o=Object(i.$iq)({type:"get",to:e});o.c("ping",{xmlns:i.Strophe.NS.PING}),this.connection.sendIQ2(o,{timeout:r}).then(t,n)}},{key:"startInterval",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;clearInterval(this.intervalId),this.intervalId=window.setInterval(function(){t.ping(e,function(){t.failedPings=0},function(e){t.failedPings+=1;var n="Ping "+(e?"error":"timeout");t.failedPings>=2?(a.a.callErrorHandler(new Error(n)),c.error(n,e),t._onPingThresholdExceeded&&t._onPingThresholdExceeded()):c.warn(n,e)},5e3)},n),c.info("XMPP pings will be sent every "+n+" ms")}},{key:"stopInterval",value:function(){this.intervalId&&(window.clearInterval(this.intervalId),this.intervalId=null,this.failedPings=0,c.info("Ping interval cleared"))}},{key:"_addPingExecutionTimestamp",value:function(){this.pingExecIntervals.push((new Date).getTime()),this.pingExecIntervals.length>12&&this.pingExecIntervals.shift()}},{key:"getPingSuspendTime",value:function(){var e=this.pingExecIntervals.slice();e.push((new Date).getTime());var t=0,n=e[0];return e.forEach(function(e){var r=e-n;r>t&&(t=r),n=e}),t-=1e4,Math.max(t,0)}}]),n})(s.b)}).call(this,"modules/xmpp/strophe.ping.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return d});var r=n(4),i=n(2),o=n(0),a=n.n(o),s=n(99),c=n(38),u=Object(r.getLogger)(e),d=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).xmpp=e,r.rooms={},r}return _createClass(n,[{key:"init",value:function(e){_get(_getPrototypeOf(n.prototype),"init",this).call(this,e),this.connection.addHandler(this.onPresence.bind(this),null,"presence",null,null,null,null),this.connection.addHandler(this.onPresenceUnavailable.bind(this),null,"presence","unavailable",null),this.connection.addHandler(this.onPresenceError.bind(this),null,"presence","error",null),this.connection.addHandler(this.onMessage.bind(this),null,"message",null,null),this.connection.addHandler(this.onMute.bind(this),"http://abcpen.com/zmeet/audio","iq","set",null,null)}},{key:"createRoom",value:function(e,t,n){var r=i.Strophe.getBareJidFromJid(e);if(this.rooms[r]){var o="You are already in the room!";throw u.error(o),new Error(o)}return this.rooms[r]=new s.a(this.connection,e,t,this.xmpp,n),this.eventEmitter.emit(a.a.EMUC_ROOM_ADDED,this.rooms[r]),this.rooms[r]}},{key:"doLeave",value:function(e){this.eventEmitter.emit(a.a.EMUC_ROOM_REMOVED,this.rooms[e]),delete this.rooms[e]}},{key:"onPresence",value:function(e){var t=e.getAttribute("from");if(e.getAttribute("type"))return!0;var n=this.rooms[i.Strophe.getBareJidFromJid(t)];return!n||($(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>status[code="201"]').length&&n.createNonAnonymousRoom(),n.onPresence(e),!0)}},{key:"onPresenceUnavailable",value:function(e){var t=e.getAttribute("from"),n=this.rooms[i.Strophe.getBareJidFromJid(t)];return!n||(n.onPresenceUnavailable(e,t),!0)}},{key:"onPresenceError",value:function(e){var t=e.getAttribute("from"),n=this.rooms[i.Strophe.getBareJidFromJid(t)];return!n||(n.onPresenceError(e,t),!0)}},{key:"onMessage",value:function(e){var t=e.getAttribute("from"),n=this.rooms[i.Strophe.getBareJidFromJid(t)];return!n||(n.onMessage(e,t),!0)}},{key:"onMute",value:function(e){var t=e.getAttribute("from"),n=this.rooms[i.Strophe.getBareJidFromJid(t)];return!n||(n.onMute(e),!0)}}]),n})(c.a)}).call(this,"modules/xmpp/strophe.emuc.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return y});var r=n(4),i=n(2),o=n(63),a=n(8),s=n(0),c=n.n(s),u=n(11),d=n.n(u),l=n(20),h=n(100),p=n(42),f=n(101),m=Object(r.getLogger)(e),v={packet2JSON:function(e,t){for(var n=0,r=Array.from(e.children);n<r.length;n++){for(var o=r[n],a={attributes:{},children:[],tagName:o.tagName},s=0,c=Array.from(o.attributes);s<c.length;s++){var u=c[s];a.attributes[u.name]=u.value}var d=i.Strophe.getText(o);d&&(a.value=i.Strophe.xmlunescape(d)),t.push(a),this.packet2JSON(o,a.children)}},json2packet:function(e,t){for(var n=0;n<e.length;n++){var r=e[n];r&&(t.c(r.tagName,r.attributes),r.value&&t.t(r.value),r.children&&this.json2packet(r.children,t),t.up())}}};function g(e,t){for(var n=[],r=0;r<e.length;r++)e[r].tagName===t&&n.push(e[r]);return n}var _=["owner","admin","member"],y=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,s,c){var u;return _classCallCheck(this,n),(u=t.call(this)).xmpp=s,u.connection=e,u.roomjid=i.Strophe.getBareJidFromJid(r),u.myroomjid=r,u.password=a,m.info("Joined MUC as "+u.myroomjid),u.members={},u.presMap={},u.presHandlers={},u._removeConnListeners=[],u.joined=!1,u.role=null,u.focusMucJid=null,u.noBridgeAvailable=!1,u.options=c||{},u.moderator=new f.a(u.roomjid,u.xmpp,u.eventEmitter,{connection:u.xmpp.options,conference:u.options}),(void 0===u.options.enableLobby||u.options.enableLobby)&&(u.lobby=new h.a(_assertThisInitialized(u))),u.initPresenceMap(c),u.lastPresences={},u.phoneNumber=null,u.phonePin=null,u.connectionTimes={},u.participantPropertyListener=null,u.locked=!1,u.transcriptionStatus=o.OFF,u}return _createClass(n,[{key:"initPresenceMap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.presMap.to=this.myroomjid,this.presMap.xns="http://jabber.org/protocol/muc",this.presMap.nodes=[],e.statsId&&this.presMap.nodes.push({tagName:"stats-id",value:e.statsId}),this.addVideoInfoToPresence(!1),e.deploymentInfo&&e.deploymentInfo.userRegion&&this.presMap.nodes.push({tagName:"region",attributes:{id:e.deploymentInfo.userRegion,xmlns:"http://abcpen.com/abcpen-meet"}}),this.presenceUpdateTime=Date.now()}},{key:"join",value:function(e,t){var n=this;return this.password=e,new Promise(function(e){n.options.disableFocus&&m.info("Conference focus disabled for "+n.roomjid),(n.options.disableFocus?Promise.resolve():n.moderator.allocateConferenceFocus()).then(function(){n.sendPresence(!0,t),n._removeConnListeners.push(n.connection.addEventListener(p.a.Events.CONN_STATUS_CHANGED,n.onConnStatusChanged.bind(n))),e()})})}},{key:"sendPresence",value:function(e,t){var n=this.presMap.to;if(this.connection&&this.connection.connected&&n&&(this.joined||e)){var r=Object(i.$pres)({to:n});e&&(r.c("x",{xmlns:this.presMap.xns}),this.password&&r.c("password").t(this.password).up(),t&&Object.keys(t).forEach(function(e){r.c(e).t(t[e]).up()}),r.up()),v.json2packet(this.presMap.nodes,r),this.presenceSyncTime=Date.now(),this.connection.send(r),e&&this.connection.flush()}}},{key:"doLeave",value:function(){m.log("do leave",this.myroomjid);var e=Object(i.$pres)({to:this.myroomjid,type:"unavailable"});this.presMap.length=0,!this.connection.isUsingWebSocket&&this.connection.flush(),this.connection.send(e),this.connection.flush()}},{key:"discoRoomInfo",value:function(){var e=this,t=Object(i.$iq)({type:"get",to:this.roomjid}).c("query",{xmlns:i.Strophe.NS.DISCO_INFO});this.connection.sendIQ(t,function(t){var n=1===$(t).find('>query>feature[var="muc_passwordprotected"]').length;n!==e.locked&&(e.eventEmitter.emit(c.a.MUC_LOCK_CHANGED,n),e.locked=n);var r=$(t).find('>query>x[type="result"]>field[var="muc#roominfo_meetingId"]>value');r.length?e.setMeetingId(r.text()):m.warn("No meeting ID from backend");var i=1===$(t).find('>query>feature[var="muc_membersonly"]').length,o=$(t).find('>query>x[type="result"]>field[var="muc#roominfo_lobbyroom"]>value');e.lobby&&e.lobby.setLobbyRoomJid(o&&o.length?o.text():void 0),i!==e.membersOnlyEnabled&&(e.membersOnlyEnabled=i,e.eventEmitter.emit(c.a.MUC_MEMBERS_ONLY_CHANGED,i))},function(e){d.a.callErrorHandler(e),m.error("Error getting room info: ",e)})}},{key:"setMeetingId",value:function(e){this.meetingId!==e&&(this.meetingId&&m.warn("Meeting Id changed from:"+this.meetingId+" to:"+e),this.meetingId=e,this.eventEmitter.emit(c.a.MEETING_ID_SET,e))}},{key:"createNonAnonymousRoom",value:function(){var e=this;if(!this.options.disableDiscoInfo){var t=Object(i.$iq)({type:"get",to:this.roomjid}).c("query",{xmlns:"http://jabber.org/protocol/muc#owner"}).c("x",{xmlns:"jabber:x:data",type:"submit"});this.connection.sendIQ(t,function(t){if(!$(t).find('>query>x[xmlns="jabber:x:data"]>field[var="muc#roomconfig_whois"]').length){var n="non-anonymous rooms not supported";return d.a.callErrorHandler(new Error(n)),void m.error(n)}var r=Object(i.$iq)({to:e.roomjid,type:"set"}).c("query",{xmlns:"http://jabber.org/protocol/muc#owner"});r.c("x",{xmlns:"jabber:x:data",type:"submit"}),r.c("field",{var:"FORM_TYPE"}).c("value").t("http://jabber.org/protocol/muc#roomconfig").up().up(),r.c("field",{var:"muc#roomconfig_whois"}).c("value").t("anyone").up().up(),e.connection.sendIQ(r)},function(e){d.a.callErrorHandler(e),m.error("Error getting room configuration form: ",e)})}}},{key:"onConnStatusChanged",value:function(e){e===p.a.Status.CONNECTED&&this.sendPresence()}},{key:"onPresence",value:function(e){var t=e.getAttribute("from"),n={},r=e.getElementsByTagName("status")[0];r&&(n.status=r.textContent||"");var o=!1,a=!1,s=e.getElementsByTagNameNS("http://jabber.org/protocol/muc#user","x")[0],u=s&&s.getElementsByTagName("item")[0];n.affiliation=u&&u.getAttribute("affiliation"),n.role=u&&u.getAttribute("role");var d=u&&u.getAttribute("jid");n.jid=d,n.isFocus=d&&0===d.indexOf(this.moderator.getFocusUserJid()+"/"),n.isHiddenDomain=d&&d.indexOf("@")>0&&this.options.hiddenDomain===d.substring(d.indexOf("@")+1,d.indexOf("/")),this.eventEmitter.emit(c.a.PRESENCE_RECEIVED,{fromHiddenDomain:n.isHiddenDomain,presence:e});var l=e.querySelector("x");l&&l.remove();var h=[];v.packet2JSON(e,h),this.lastPresences[t]=h;for(var p=function(e){var t={},n=e.children.find(function(e){return"user"===e.tagName});if(n){t.user={};for(var r=function(e){var r=n.children.find(function(t){return t.tagName===e});r&&(t.user[e]=r.value)},i=0,o=["id","name","avatar"];i<o.length;i++){r(o[i])}}var a=e.children.find(function(e){return"group"===e.tagName});return a&&(t.group=a.value),t},f=0;f<h.length;f++){var g=h[f];switch(g.tagName){case"bot":var _=g.attributes;if(!_)break;var y=_.type;n.botType=y;break;case"nick":n.nick=g.value;break;case"userId":n.id=g.value;break;case"stats-id":n.statsID=g.value;break;case"identity":n.identity=p(g);break;case"stat":var S=g.attributes;if(!S)break;"version"===S.name&&(n.version=S.value)}}if(t===this.myroomjid){var E="owner"===n.affiliation?n.role:"none";if(this.role!==E&&(this.role=E,this.eventEmitter.emit(c.a.LOCAL_ROLE_CHANGED,this.role)),!this.joined){this.joined=!0;var b=this.connectionTimes["muc.joined"]=window.performance.now();m.log("(TIME) MUC joined:\t",b),this.password&&(this.locked=!0),this.presenceUpdateTime>=this.presenceSyncTime&&this.sendPresence(),this.eventEmitter.emit(c.a.MUC_JOINED),!this.options.disableDiscoInfo&&this.discoRoomInfo()}}else if(void 0===d)m.info("Ignoring member with undefined JID");else if(void 0===this.members[t])this.members[t]=n,m.log("entered",t,n),o=void 0!==n.status,a=void 0!==n.version,n.isFocus?this._initFocus(t,d):(this.eventEmitter.emit(c.a.MUC_MEMBER_JOINED,t,n.nick,n.role,n.isHiddenDomain,n.statsID,n.status,n.identity,n.botType,n.jid),o=!1);else{var C=this.members[t];C.role!==n.role&&(C.role=n.role,this.eventEmitter.emit(c.a.MUC_ROLE_CHANGED,t,n.role)),C.affiliation!==n.affiliation&&(C.affiliation=n.affiliation),C.botType!==n.botType&&(C.botType=n.botType,this.eventEmitter.emit(c.a.MUC_MEMBER_BOT_TYPE_CHANGED,t,n.botType)),n.isFocus&&(C.isFocus=!0,this._initFocus(t,d)),n.displayName&&(C.displayName=n.displayName),C.status!==n.status&&(o=!0,C.status=n.status),C.version!==n.version&&(a=!0,C.version=n.version)}for(var T=0;T<h.length;T++){var R=h[T];switch(R.tagName){case"nick":if(!n.isFocus){var A=this.xmpp.options.displayJids?i.Strophe.getResourceFromJid(t):n.nick;this.eventEmitter.emit(c.a.DISPLAY_NAME_CHANGED,t,A)}break;case"bridgeNotAvailable":n.isFocus&&!this.noBridgeAvailable&&(this.noBridgeAvailable=!0,this.eventEmitter.emit(c.a.BRIDGE_DOWN));break;case"conference-properties":if(n.isFocus){for(var k={},I=0;I<R.children.length;I++){var w=R.children[I].attributes;w&&w.key&&(k[w.key]=w.value)}this.eventEmitter.emit(c.a.CONFERENCE_PROPERTIES_CHANGED,k)}break;case"transcription-status":var P=R.attributes;if(!P)break;var O=P.status;O&&O!==this.transcriptionStatus&&(this.transcriptionStatus=O,this.eventEmitter.emit(c.a.TRANSCRIPTION_STATUS_CHANGED,O));break;case"call-control":var D=R.attributes;if(!D)break;this.phoneNumber=D.phone||null,this.phonePin=D.pin||null,this.eventEmitter.emit(c.a.PHONE_NUMBER_CHANGED);break;default:this.processNode(R,t)}}o&&this.eventEmitter.emit(c.a.PRESENCE_STATUS,t,n.status),a&&m.info("Received version for "+d+": "+n.version)}},{key:"_initFocus",value:function(e,t){var n=this;this.focusMucJid=e,m.info("Ignore focus: "+e+", real JID: "+t),this.xmpp.caps.getFeatures(t,15e3).then(function(e){n.focusFeatures=e,m.info("Jicofo supports restart by terminate: "+n.supportsRestartByTerminate())},function(e){m.error("Failed to discover Jicofo features",e&&e.message)})}},{key:"setParticipantPropertyListener",value:function(e){this.participantPropertyListener=e}},{key:"supportsRestartByTerminate",value:function(){return!!this.focusFeatures&&this.focusFeatures.has("https://abcpen.com/meet/jicofo/terminate-restart")}},{key:"processNode",value:function(e,t){try{var n=this.presHandlers[e.tagName];e.tagName.startsWith("abcpen_participant_")&&(n=[this.participantPropertyListener]),n&&n.forEach(function(n){n(e,i.Strophe.getResourceFromJid(t),t)})}catch(t){d.a.callErrorHandler(t),m.error("Error processing:"+e.tagName+" node.",t)}}},{key:"sendMessage",value:function(e,t,n){var r=Object(i.$msg)({to:this.roomjid,type:"groupchat"});"body"===t?r.c(t,e).up():r.c(t,{xmlns:"http://abcpen.com/zmeet"},e).up(),n&&r.c("nick",{xmlns:"http://jabber.org/protocol/nick"}).t(n).up().up(),this.connection.send(r),this.eventEmitter.emit(c.a.SENDING_CHAT_MESSAGE,e)}},{key:"sendPrivateMessage",value:function(e,t,n,r){var o=Object(i.$msg)({to:this.roomjid+"/"+e,type:"chat"});"body"===n?o.c(n,t).up():o.c(n,{xmlns:"http://abcpen.com/zmeet"},t).up(),r&&o.c("nick",{xmlns:"http://jabber.org/protocol/nick"}).t(r).up().up(),this.connection.send(o),this.eventEmitter.emit(c.a.SENDING_PRIVATE_CHAT_MESSAGE,t)}},{key:"setSubject",value:function(e){var t=Object(i.$msg)({to:this.roomjid,type:"groupchat"});t.c("subject",e),this.connection.send(t)}},{key:"onParticipantLeft",value:function(e,t){delete this.lastPresences[e],t||(this.eventEmitter.emit(c.a.MUC_MEMBER_LEFT,e),this.moderator.onMucMemberLeft(e))}},{key:"onPresenceUnavailable",value:function(e,t){var n=this;if($(e).find('>ignore[xmlns="http://abcpen.com/zmeet/"]').length)return!0;var r=$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>destroy');if(r.length){var o,a=$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>destroy>reason');return a.length&&(o=a.text()),this.eventEmitter.emit(c.a.MUC_DESTROYED,o,r.attr("jid")),this.connection.emuc.doLeave(this.roomjid),!0}var s=$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>status[code="110"]').length,u=$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>status[code="307"]').length,d=Object.keys(this.members);if(u){var l,h=$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>item>actor');h.length&&(l=h.attr("nick")),this.eventEmitter.emit(c.a.KICKED,s,l,i.Strophe.getResourceFromJid(t))}s?(d.forEach(function(e){var t=n.members[e];delete n.members[e],n.onParticipantLeft(e,t.isFocus)}),this.connection.emuc.doLeave(this.roomjid),u||this.eventEmitter.emit(c.a.MUC_LEFT)):(delete this.members[t],this.onParticipantLeft(t,!1))}},{key:"onMessage",value:function(e,t){var n=$(e).find('>nick[xmlns="http://jabber.org/protocol/nick"]').text()||i.Strophe.getResourceFromJid(t),r=e.getAttribute("type");if("error"===r){var o=$(e).find(">error>text").text();return this.eventEmitter.emit(c.a.CHAT_ERROR_RECEIVED,o),!0}var a=$(e).find(">body").text(),s=$(e).find(">subject");if(s.length){var u=s.text();(u||""===u)&&(this.eventEmitter.emit(c.a.SUBJECT_CHANGED,u),m.log("Subject is changed to "+u))}var d,l=$(e).find(">delay").attr("stamp");if(!l&&(l=$(e).find('>[xmlns="jabber:x:delay"]').attr("stamp"))){var h=l.match(/(\d{4})(\d{2})(\d{2}T\d{2}:\d{2}:\d{2})/);l=h[1]+"-"+h[2]+"-"+h[3]+"Z"}if(t===this.roomjid)if($(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>status[code="104"]').length)this.discoRoomInfo();else if((d=$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>invite'))&&d.length){var p,f=$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>password');f&&f.length&&(p=f.text()),this.eventEmitter.emit(c.a.INVITE_MESSAGE_RECEIVED,t,d.attr("from"),a,p)}var v=$(e).find(">json-message").text();if(v){var g=this.xmpp.tryParseJSONAndVerify(v);if(g&&void 0===l)return void this.eventEmitter.emit(c.a.JSON_MESSAGE_RECEIVED,t,g)}a&&("chat"===r?this.eventEmitter.emit(c.a.PRIVATE_MESSAGE_RECEIVED,t,n,a,this.myroomjid,l):"groupchat"===r&&this.eventEmitter.emit(c.a.MESSAGE_RECEIVED,t,n,a,this.myroomjid,l))}},{key:"onPresenceError",value:function(e,t){if($(e).find('>error[type="auth"]>not-authorized[xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"]').length)m.log("on password required",t),this.eventEmitter.emit(c.a.PASSWORD_REQUIRED);else if($(e).find('>error[type="cancel"]>not-allowed[xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"]').length)i.Strophe.getDomainFromJid(e.getAttribute("to"))===this.xmpp.options.hosts.anonymousdomain?this.eventEmitter.emit(c.a.ROOM_JOIN_ERROR):(m.warn("onPresError ",e),this.eventEmitter.emit(c.a.ROOM_CONNECT_NOT_ALLOWED_ERROR));else if($(e).find(">error>service-unavailable").length)m.warn("Maximum users limit for the room has been reached",e),this.eventEmitter.emit(c.a.ROOM_MAX_USERS_ERROR);else if($(e).find('>error[type="auth"]>registration-required[xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"]').length){var n,r=$(e).find(">lobbyroom");r.length&&(n=r.text()),this.eventEmitter.emit(c.a.ROOM_CONNECT_MEMBERS_ONLY_ERROR,n)}else m.warn("onPresError ",e),this.eventEmitter.emit(c.a.ROOM_CONNECT_ERROR)}},{key:"setAffiliation",value:function(e,t){var n=Object(i.$iq)({to:this.roomjid,type:"set"}).c("query",{xmlns:"http://jabber.org/protocol/muc#admin"}).c("item",{affiliation:t,nick:i.Strophe.getResourceFromJid(e)}).c("reason").t("Your affiliation has been changed to '"+t+"'.").up().up().up();this.connection.sendIQ(n,function(n){return m.log("Set affiliation of participant with jid: ",e,"to",t,n)},function(e){return m.log("Set affiliation of participant error: ",e)})}},{key:"kick",value:function(e){var t=Object(i.$iq)({to:this.roomjid,type:"set"}).c("query",{xmlns:"http://jabber.org/protocol/muc#admin"}).c("item",{nick:i.Strophe.getResourceFromJid(e),role:"none"}).c("reason").t("You have been kicked.").up().up().up();this.connection.sendIQ(t,function(t){return m.log("Kick participant with jid: ",e,t)},function(e){return m.log("Kick participant error: ",e)})}},{key:"lockRoom",value:function(e,t,n,r){var o=this;this.connection.sendIQ(Object(i.$iq)({to:this.roomjid,type:"get"}).c("query",{xmlns:"http://jabber.org/protocol/muc#owner"}),function(a){if($(a).find('>query>x[xmlns="jabber:x:data"]>field[var="muc#roomconfig_roomsecret"]').length){var s=Object(i.$iq)({to:o.roomjid,type:"set"}).c("query",{xmlns:"http://jabber.org/protocol/muc#owner"});s.c("x",{xmlns:"jabber:x:data",type:"submit"}),s.c("field",{var:"FORM_TYPE"}).c("value").t("http://jabber.org/protocol/muc#roomconfig").up().up(),s.c("field",{var:"muc#roomconfig_roomsecret"}).c("value").t(e).up().up(),s.c("field",{var:"muc#roomconfig_passwordprotectedroom"}).c("value").t(null===e||0===e.length?"0":"1").up().up(),o.membersOnlyEnabled&&s.c("field",{var:"muc#roomconfig_membersonly"}).c("value").t("true").up().up(),s.c("field",{var:"muc#roomconfig_whois"}).c("value").t("anyone").up().up(),o.connection.sendIQ(s,t,n)}else r()},n)}},{key:"setMembersOnly",value:function(e,t,n){var r=this;e&&Object.values(this.members).filter(function(e){return!e.isFocus}).length&&Object.values(this.members).forEach(function(e){e.jid&&!_.includes(e.affiliation)&&r.xmpp.connection.sendIQ(Object(i.$iq)({to:r.roomjid,type:"set"}).c("query",{xmlns:"http://jabber.org/protocol/muc#admin"}).c("item",{affiliation:"member",jid:e.jid}).up().up())});var o=n||function(){};this.xmpp.connection.sendIQ(Object(i.$iq)({to:this.roomjid,type:"get"}).c("query",{xmlns:"http://jabber.org/protocol/muc#owner"}),function(n){if($(n).find('>query>x[xmlns="jabber:x:data"]>field[var="muc#roomconfig_membersonly"]').length){var a=Object(i.$iq)({to:r.roomjid,type:"set"}).c("query",{xmlns:"http://jabber.org/protocol/muc#owner"});a.c("x",{xmlns:"jabber:x:data",type:"submit"}),a.c("field",{var:"FORM_TYPE"}).c("value").t("http://jabber.org/protocol/muc#roomconfig").up().up(),a.c("field",{var:"muc#roomconfig_membersonly"}).c("value").t(e?"true":"false").up().up(),r.locked&&a.c("field",{var:"muc#roomconfig_passwordprotectedroom"}).c("value").t("1").up().up(),r.xmpp.connection.sendIQ(a,t,o)}else o(new Error("Setting members only room not supported!"))},o)}},{key:"addToPresence",value:function(e,t){t.tagName=e,this.removeFromPresence(e),this.presMap.nodes.push(t),this.presenceUpdateTime=Date.now()}},{key:"getFromPresence",value:function(e){return this.presMap.nodes.find(function(t){return e===t.tagName})}},{key:"removeFromPresence",value:function(e){var t=this.presMap.nodes.filter(function(t){return e!==t.tagName});this.presMap.nodes=t,this.presenceUpdateTime=Date.now()}},{key:"addPresenceListener",value:function(e,t){if("function"!=typeof t)throw new Error('"handler" is not a function');var n=this.presHandlers[e];n||(this.presHandlers[e]=n=[]),-1===n.indexOf(t)?n.push(t):m.warn("Trying to add the same handler more than once for: "+e)}},{key:"removePresenceListener",value:function(e,t){var n=this.presHandlers[e],r=n?n.indexOf(t):-1;-1!==r?n.splice(r,1):m.warn("Handler for: "+e+" was not registered")}},{key:"isFocus",value:function(e){var t=this.members[e];return t?t.isFocus:null}},{key:"isModerator",value:function(){return"moderator"===this.role}},{key:"getMemberRole",value:function(e){return this.members[e]?this.members[e].role:null}},{key:"setVideoMute",value:function(e,t){this.sendVideoInfoPresence(e),t&&t(e)}},{key:"setAudioMute",value:function(e,t){return this.sendAudioInfoPresence(e,t)}},{key:"addAudioInfoToPresence",value:function(e){this.addToPresence("audiomuted",{attributes:{xmlns:"http://abcpen.com/zmeet/audio"},value:e.toString()})}},{key:"sendAudioInfoPresence",value:function(e,t){this.addAudioInfoToPresence(e),this.sendPresence(),t&&t()}},{key:"addVideoInfoToPresence",value:function(e){this.addToPresence("videomuted",{attributes:{xmlns:"http://abcpen.com/zmeet/video"},value:e.toString()})}},{key:"sendVideoInfoPresence",value:function(e){this.addVideoInfoToPresence(e),this.sendPresence()}},{key:"getMediaPresenceInfo",value:function(e,t){var n=this.lastPresences[this.roomjid+"/"+e];if(!n)return null;var r={muted:!1,videoType:void 0},i=null;if(t===a.a)i=g(n,"audiomuted");else{if(t!==a.c)return m.error("Unsupported media type: "+t),null;i=g(n,"videomuted");var o=g(n,"videoType");o.length>0&&(r.videoType=o[0].value)}return r.muted=i.length>0&&"true"===i[0].value,r}},{key:"isSIPCallingSupported",value:function(){return!!this.moderator&&this.moderator.isSipGatewayEnabled()}},{key:"dial",value:function(e){return this.connection.rayo.dial(e,"fromnumber",i.Strophe.getBareJidFromJid(this.myroomjid),this.password,this.focusMucJid)}},{key:"hangup",value:function(){return this.connection.rayo.hangup()}},{key:"getLobby",value:function(){return this.lobby}},{key:"getPhoneNumber",value:function(){return this.phoneNumber}},{key:"getPhonePin",value:function(){return this.phonePin}},{key:"getMeetingId",value:function(){return this.meetingId}},{key:"muteParticipant",value:function(e,t){m.info("set mute",t);var n=Object(i.$iq)({to:this.focusMucJid,type:"set"}).c("mute",{xmlns:"http://abcpen.com/zmeet/audio",jid:e}).t(t.toString()).up();this.connection.sendIQ(n,function(e){return m.log("set mute",e)},function(e){return m.log("set mute error",e)})}},{key:"onMute",value:function(e){if(e.getAttribute("from")===this.focusMucJid){var t=$(e).find("mute");t.length&&"true"===t.text()?this.eventEmitter.emit(c.a.AUDIO_MUTED_BY_FOCUS,t.attr("actor")):m.warn("Ignoring a mute request which does not explicitly specify a positive mute command.")}else m.warn("Ignored mute from non focus peer")}},{key:"clean",value:function(){this._removeConnListeners.forEach(function(e){return e()}),this._removeConnListeners=[],this.joined=!1}},{key:"leave",value:function(){var e=this;return new Promise(function(t,n){var r=setTimeout(function(){return o(!0)},5e3),i=e.eventEmitter;function o(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i.removeListener(c.a.MUC_LEFT,o),clearTimeout(r),e?n(new Error("The timeout for the confirmation about leaving the room expired.")):t()}e.clean(),i.on(c.a.MUC_LEFT,o),e.doLeave()})}}]),n})(l.a)}).call(this,"modules/xmpp/ChatRoom.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c});var r=n(4),i=n(2),o=n(0),a=n.n(o),s=Object(r.getLogger)(e),c=(function(){function e(t){var n=this;_classCallCheck(this,e),this.xmpp=t.xmpp,this.mainRoom=t;var r=this._maybeJoinLobbyRoom.bind(this);this.mainRoom.addEventListener(a.a.LOCAL_ROLE_CHANGED,r),this.mainRoom.addEventListener(a.a.MUC_MEMBERS_ONLY_CHANGED,r),this.mainRoom.addEventListener(a.a.ROOM_CONNECT_MEMBERS_ONLY_ERROR,function(e){n.lobbyRoomJid=e})}return _createClass(e,[{key:"isSupported",value:function(){return this.xmpp.lobbySupported}},{key:"enable",value:function(){var e=this;return this.isSupported()?new Promise(function(t,n){e.mainRoom.setMembersOnly(!0,t,n)}):Promise.reject(new Error("Lobby not supported!"))}},{key:"disable",value:function(){this.isSupported()&&this.mainRoom.isModerator()&&this.lobbyRoom&&this.mainRoom.membersOnlyEnabled&&this.mainRoom.setMembersOnly(!1)}},{key:"_leaveLobbyRoom",value:function(){var e=this;this.lobbyRoom&&this.lobbyRoom.leave().then(function(){e.lobbyRoom=void 0,s.info("Lobby room left!")}).catch(function(){})}},{key:"setLobbyRoomJid",value:function(e){this.lobbyRoomJid=e}},{key:"_maybeJoinLobbyRoom",value:function(){this.isSupported()&&this.mainRoom.joined&&this.mainRoom.isModerator()&&this.mainRoom.membersOnlyEnabled&&!this.lobbyRoom&&this.join().then(function(){return s.info("Joined lobby room")}).catch(function(e){return s.error("Failed joining lobby",e)})}},{key:"join",value:function(e,t){var n=this,r=this.mainRoom.joined&&this.mainRoom.isModerator();if(!this.lobbyRoomJid)return Promise.reject(new Error("Missing lobbyRoomJid, cannot join lobby room."));var o=i.Strophe.getNodeFromJid(this.lobbyRoomJid),c=i.Strophe.getDomainFromJid(this.lobbyRoomJid);return this.lobbyRoom=this.xmpp.createRoom(o,{customDomain:c,disableDiscoInfo:!0,disableFocus:!0,enableLobby:!1}),e&&(this.lobbyRoom.removeFromPresence("nick"),this.lobbyRoom.addToPresence("nick",{attributes:{xmlns:"http://jabber.org/protocol/nick"},value:e})),r?(this.lobbyRoom.addPresenceListener("email",function(e,t){n.mainRoom.eventEmitter.emit(a.a.MUC_LOBBY_MEMBER_UPDATED,t,{email:e.value})}),this.lobbyRoom.addEventListener(a.a.MUC_MEMBER_JOINED,function(e,t,r,o,s,c,u,d,l){Object.values(n.mainRoom.members).find(function(e){return e.jid===l})||n.mainRoom.eventEmitter.emit(a.a.MUC_LOBBY_MEMBER_JOINED,i.Strophe.getResourceFromJid(e),t,u?u.avatar:void 0)}),this.lobbyRoom.addEventListener(a.a.MUC_MEMBER_LEFT,function(e){n.mainRoom.eventEmitter.emit(a.a.MUC_LOBBY_MEMBER_LEFT,i.Strophe.getResourceFromJid(e))}),this.lobbyRoom.addEventListener(a.a.MUC_DESTROYED,function(){Object.keys(n.lobbyRoom.members).forEach(function(e){return n.mainRoom.eventEmitter.emit(a.a.MUC_LOBBY_MEMBER_LEFT,i.Strophe.getResourceFromJid(e))}),n.lobbyRoom.clean(),n.lobbyRoom=void 0,s.info("Lobby room left(destroyed)!")})):(this.lobbyRoom.addEventListener(a.a.KICKED,function(e){if(e)return n.mainRoom.eventEmitter.emit(a.a.MUC_DENIED_ACCESS),void n.lobbyRoom.clean()}),this.mainRoom.addEventListener(a.a.INVITE_MESSAGE_RECEIVED,function(e,t,r,i){s.debug("Received approval to join "+e+" "+t+" "+r),e===n.mainRoom.roomjid&&(n.mainRoom.join(i),n._leaveLobbyRoom())}),this.lobbyRoom.addEventListener(a.a.MUC_DESTROYED,function(e,t){t&&t===n.mainRoom.roomjid?n.mainRoom.join():(n.lobbyRoom.clean(),n.mainRoom.eventEmitter.emit(a.a.MUC_DESTROYED,e))}),this.mainRoom.addEventListener(a.a.MUC_JOINED,function(){n._leaveLobbyRoom()})),new Promise(function(e,i){n.lobbyRoom.addEventListener(a.a.MUC_JOINED,function(){e(),t&&!r&&(n.lobbyRoom.removeFromPresence("email"),n.lobbyRoom.addToPresence("email",{value:t}),n.lobbyRoom.sendPresence())}),n.lobbyRoom.addEventListener(a.a.ROOM_JOIN_ERROR,i),n.lobbyRoom.addEventListener(a.a.ROOM_CONNECT_NOT_ALLOWED_ERROR,i),n.lobbyRoom.addEventListener(a.a.ROOM_CONNECT_ERROR,i),n.lobbyRoom.join()})}},{key:"denyAccess",value:function(e){if(this.isSupported()&&this.mainRoom.isModerator()){var t=Object.keys(this.lobbyRoom.members).find(function(t){return i.Strophe.getResourceFromJid(t)===e});t?this.lobbyRoom.kick(t):s.error("Not found member for "+e+" in lobby room.")}}},{key:"approveAccess",value:function(e){if(this.isSupported()&&this.mainRoom.isModerator()){var t=Object.keys(this.lobbyRoom.members).find(function(t){return i.Strophe.getResourceFromJid(t)===e});if(t){var n=this.lobbyRoom.members[t].jid,r=Object(i.$msg)({to:this.mainRoom.roomjid}).c("x",{xmlns:"http://jabber.org/protocol/muc#user"}).c("invite",{to:n});this.xmpp.connection.sendIQ(r,function(){},function(e){s.error("Error sending invite for "+n,e)})}else s.error("Not found member for "+t+" in lobby room.")}}}]),e})()}).call(this,"modules/xmpp/Lobby.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return l});var r=n(4),i=n(2),o=n(31),a=n(71),s=n(0),c=n(11),u=Object(r.getLogger)(e);function d(e){var t=1;return function(n){if(!n){var r=Math.pow(2,t-1);return t+=1,r*e}t=1}}function l(e,t,n,r){function i(e){if(e.data&&e.data.sessionId){if(e.origin!==window.location.origin)return void u.warn("Ignoring sessionId from different origin: "+e.origin);o.a.sessionId=e.data.sessionId}}this.roomName=e,this.xmppService=t,this.getNextTimeout=d(1e3),this.getNextErrorTimeout=d(1e3),this.externalAuthEnabled=!1,this.options=r,this.sipGatewayEnabled=this.options.connection.hosts&&void 0!==this.options.connection.hosts.call_control,this.eventEmitter=n,this.connection=this.xmppService.connection,window.addEventListener?window.addEventListener("message",i,!1):window.attachEvent("onmessage",i)}l.prototype.isExternalAuthEnabled=function(){return this.externalAuthEnabled},l.prototype.isSipGatewayEnabled=function(){return this.sipGatewayEnabled},l.prototype.onMucMemberLeft=function(e){u.info("Someone left is it focus ? "+e),"focus"===i.Strophe.getResourceFromJid(e)&&(u.info("Focus has left the room - leaving conference"),this.eventEmitter.emit(s.FOCUS_LEFT))},l.prototype.setFocusUserJid=function(e){this.focusUserJid||(this.focusUserJid=e,u.info("Focus jid set to:  "+this.focusUserJid))},l.prototype.getFocusUserJid=function(){return this.focusUserJid},l.prototype.getFocusComponent=function(){var e=this.options.connection.hosts.focus;return e||(e="focus."+this.options.connection.hosts.domain),e},l.prototype.createConferenceIq=function(){var e,t=Object(i.$iq)({to:this.getFocusComponent(),type:"set"}),n=o.a.sessionId,r=o.a.machineId,a=this.options.conference;switch(u.info("Session ID: "+n+" machine UID: "+r),t.c("conference",{xmlns:"http://abcpen.com/protocol/focus",room:this.roomName,"machine-uid":r}),n&&t.attrs({"session-id":n}),void 0!==this.options.connection.enforcedBridge&&t.c("property",{name:"enforcedBridge",value:this.options.connection.enforcedBridge}).up(),void 0!==this.options.connection.hosts&&void 0!==this.options.connection.hosts.call_control&&t.c("property",{name:"call_control",value:this.options.connection.hosts.call_control}).up(),void 0!==a.channelLastN&&t.c("property",{name:"channelLastN",value:a.channelLastN}).up(),t.c("property",{name:"disableRtx",value:Boolean(a.disableRtx)}).up(),void 0!==a.enableTcc&&t.c("property",{name:"enableTcc",value:Boolean(a.enableTcc)}).up(),void 0!==a.enableRemb&&t.c("property",{name:"enableRemb",value:Boolean(a.enableRemb)}).up(),!0===a.enableOpusRed&&t.c("property",{name:"enableOpusRed",value:!0}).up(),void 0!==a.minParticipants&&t.c("property",{name:"minParticipants",value:a.minParticipants}).up(),t.c("property",{name:"enableLipSync",value:!0===this.options.connection.enableLipSync}).up(),void 0!==a.audioPacketDelay&&t.c("property",{name:"audioPacketDelay",value:a.audioPacketDelay}).up(),a.startBitrate&&t.c("property",{name:"startBitrate",value:a.startBitrate}).up(),a.minBitrate&&t.c("property",{name:"minBitrate",value:a.minBitrate}).up(),a.testing&&a.testing.octo&&"number"==typeof a.testing.octo.probability&&Math.random()<a.testing.octo.probability&&t.c("property",{name:"octo",value:!0}).up(),this.options.conference.openBridgeChannel){case"datachannel":case!0:case void 0:e=!0;break;case"websocket":e=!1}return t.c("property",{name:"openSctp",value:e}).up(),a.opusMaxAverageBitrate&&t.c("property",{name:"opusMaxAverageBitrate",value:a.opusMaxAverageBitrate}).up(),void 0!==this.options.conference.startAudioMuted&&t.c("property",{name:"startAudioMuted",value:this.options.conference.startAudioMuted}).up(),void 0!==this.options.conference.startVideoMuted&&t.c("property",{name:"startVideoMuted",value:this.options.conference.startVideoMuted}).up(),void 0!==this.options.conference.stereo&&t.c("property",{name:"stereo",value:this.options.conference.stereo}).up(),void 0!==this.options.conference.useRoomAsSharedDocumentName&&t.c("property",{name:"useRoomAsSharedDocumentName",value:this.options.conference.useRoomAsSharedDocumentName}).up(),t.up(),t},l.prototype.parseSessionId=function(e){var t=$(e).find("conference").attr("session-id");t&&(u.info("Received sessionId:  "+t),o.a.sessionId=t)},l.prototype.parseConfigOptions=function(e){this.setFocusUserJid($(e).find("conference").attr("focusjid"));var t=$(e).find(">conference>property[name='authentication'][value='true']").length>0;u.info("Authentication enabled: "+t),this.externalAuthEnabled=$(e).find(">conference>property[name='externalAuth'][value='true']").length>0,u.info("External authentication enabled: "+this.externalAuthEnabled),this.externalAuthEnabled||this.parseSessionId(e);var n=$(e).find(">conference").attr("identity");this.eventEmitter.emit(a.IDENTITY_UPDATED,t,n),$(e).find(">conference>property[name='sipGatewayEnabled'][value='true']").length&&(this.sipGatewayEnabled=!0),u.info("Sip gateway enabled:  "+this.sipGatewayEnabled)},l.prototype.allocateConferenceFocus=function(){var e=this;return new Promise(function(t){e.setFocusUserJid(e.options.connection.focusUserJid),e.connection.sendIQ(e.createConferenceIq(),function(n){return e._allocateConferenceFocusSuccess(n,t)},function(n){return e._allocateConferenceFocusError(n,t)}),e.connection.flush()})},l.prototype._allocateConferenceFocusError=function(e,t){var n=this,r=$(e).find(">error>session-invalid").length||$(e).find(">error>not-acceptable").length;if(r&&(u.info("Session expired! - removing"),o.a.sessionId=void 0),$(e).find(">error>graceful-shutdown").length)this.eventEmitter.emit(s.GRACEFUL_SHUTDOWN);else{var a=$(e).find(">error>reservation-error");if(a.length){var d,l=a.attr("error-code"),h=$(e).find(">error>text");return h&&(d=h.text()),void this.eventEmitter.emit(s.RESERVATION_ERROR,l,d)}if($(e).find(">error>not-authorized").length)return u.warn("Unauthorized to start the conference",e),i.Strophe.getDomainFromJid(e.getAttribute("to"))!==this.options.connection.hosts.anonymousdomain&&(this.externalAuthEnabled=!0),void this.eventEmitter.emit(s.AUTHENTICATION_REQUIRED);var p=this.getNextErrorTimeout(),f="Focus error, retry after "+p;c.callErrorHandler(new Error(f)),u.error(f,e);var m=this.getFocusComponent(),v=p/1e3;r||this.eventEmitter.emit(s.FOCUS_DISCONNECTED,m,v),this.getNextTimeout(!0),window.setTimeout(function(){return n.allocateConferenceFocus().then(t)},p)}},l.prototype._allocateConferenceFocusSuccess=function(e,t){var n=this;if(this.parseConfigOptions(e),this.getNextErrorTimeout(!0),"true"===$(e).find("conference").attr("ready"))this.getNextTimeout(!0),t();else{var r=this.getNextTimeout();u.info("Waiting for the focus... "+r),window.setTimeout(function(){return n.allocateConferenceFocus().then(t)},r)}},l.prototype.authenticate=function(){var e=this;return new Promise(function(t,n){e.connection.sendIQ(e.createConferenceIq(),function(n){e.parseSessionId(n),t()},function(e){return n({error:$(e).find("iq>error :first").prop("tagName"),message:$(e).find("iq>error>text").text()})})})},l.prototype.getLoginUrl=function(e,t){this._getLoginUrl(!1,e,t)},l.prototype._getLoginUrl=function(e,t,n){var r=Object(i.$iq)({to:this.getFocusComponent(),type:"get"}),a={xmlns:"http://abcpen.com/protocol/focus",room:this.roomName,"machine-uid":o.a.machineId},s="auth url";function d(e,t){c.callErrorHandler(new Error(e)),u.error(e,t),n(t)}e&&(a.popup=!0,s="POPUP "+s),r.c("login-url",a),this.connection.sendIQ(r,function(e){var n=$(e).find("login-url").attr("url");(n=decodeURIComponent(n))?(u.info("Got "+s+": "+n),t(n)):d("Failed to get "+s+" from the focus",e)},d.bind(void 0,"Get "+s+" error"))},l.prototype.getPopupLoginUrl=function(e,t){this._getLoginUrl(!0,e,t)},l.prototype.logout=function(e){var t=Object(i.$iq)({to:this.getFocusComponent(),type:"set"}),n=o.a.sessionId;n?(t.c("logout",{xmlns:"http://abcpen.com/protocol/focus","session-id":n}),this.connection.sendIQ(t,function(t){var n=$(t).find("logout").attr("logout-url");n&&(n=decodeURIComponent(n)),u.info("Log out OK, url: "+n,t),o.a.sessionId=void 0,e(n)},function(e){c.callErrorHandler(new Error("Logout error")),u.error("Logout error",e)})):e()}}).call(this,"modules/xmpp/moderator.js")},function(e,t,n){var r=n(37),i=["Aaliyah","Aaron","Abagail","Abbey","Abbie","Abbigail","Abby","Abdiel","Abdul","Abdullah","Abe","Abel","Abelardo","Abigail","Abigale","Abigayle","Abner","Abraham","Ada","Adah","Adalberto","Adaline","Adam","Adan","Addie","Addison","Adela","Adelbert","Adele","Adelia","Adeline","Adell","Adella","Adelle","Aditya","Adolf","Adolfo","Adolph","Adolphus","Adonis","Adrain","Adrian","Adriana","Adrianna","Adriel","Adrien","Adrienne","Afton","Aglae","Agnes","Agustin","Agustina","Ahmad","Ahmed","Aida","Aidan","Aiden","Aileen","Aisha","Aiyana","Akeem","Al","Alaina","Alan","Alana","Alanis","Alanna","Alayna","Alba","Albert","Alberta","Albertha","Alberto","Albin","Albina","Alda","Alden","Alec","Aleen","Alejandra","Alejandrin","Alek","Alena","Alene","Alessandra","Alessandro","Alessia","Aletha","Alex","Alexa","Alexander","Alexandra","Alexandre","Alexandrea","Alexandria","Alexandrine","Alexandro","Alexane","Alexanne","Alexie","Alexis","Alexys","Alexzander","Alf","Alfonso","Alfonzo","Alford","Alfred","Alfreda","Alfredo","Ali","Alia","Alice","Alicia","Alisa","Alisha","Alison","Alivia","Aliya","Aliyah","Aliza","Alize","Allan","Allen","Allene","Allie","Allison","Ally","Alphonso","Alta","Althea","Alva","Alvah","Alvena","Alvera","Alverta","Alvina","Alvis","Alyce","Alycia","Alysa","Alysha","Alyson","Alysson","Amalia","Amanda","Amani","Amara","Amari","Amaya","Amber","Ambrose","Amelia","Amelie","Amely","America","Americo","Amie","Amina","Amir","Amira","Amiya","Amos","Amparo","Amy","Amya","Ana","Anabel","Anabelle","Anahi","Anais","Anastacio","Anastasia","Anderson","Andre","Andreane","Andreanne","Andres","Andrew","Andy","Angel","Angela","Angelica","Angelina","Angeline","Angelita","Angelo","Angie","Angus","Anibal","Anika","Anissa","Anita","Aniya","Aniyah","Anjali","Anna","Annabel","Annabell","Annabelle","Annalise","Annamae","Annamarie","Anne","Annetta","Annette","Annie","Ansel","Ansley","Anthony","Antoinette","Antone","Antonetta","Antonette","Antonia","Antonietta","Antonina","Antonio","Antwan","Antwon","Anya","April","Ara","Araceli","Aracely","Arch","Archibald","Ardella","Arden","Ardith","Arely","Ari","Ariane","Arianna","Aric","Ariel","Arielle","Arjun","Arlene","Arlie","Arlo","Armand","Armando","Armani","Arnaldo","Arne","Arno","Arnold","Arnoldo","Arnulfo","Aron","Art","Arthur","Arturo","Arvel","Arvid","Arvilla","Aryanna","Asa","Asha","Ashlee","Ashleigh","Ashley","Ashly","Ashlynn","Ashton","Ashtyn","Asia","Assunta","Astrid","Athena","Aubree","Aubrey","Audie","Audra","Audreanne","Audrey","August","Augusta","Augustine","Augustus","Aurelia","Aurelie","Aurelio","Aurore","Austen","Austin","Austyn","Autumn","Ava","Avery","Avis","Axel","Ayana","Ayden","Ayla","Aylin","Baby","Bailee","Bailey","Barbara","Barney","Baron","Barrett","Barry","Bart","Bartholome","Barton","Baylee","Beatrice","Beau","Beaulah","Bell","Bella","Belle","Ben","Benedict","Benjamin","Bennett","Bennie","Benny","Benton","Berenice","Bernadette","Bernadine","Bernard","Bernardo","Berneice","Bernhard","Bernice","Bernie","Berniece","Bernita","Berry","Bert","Berta","Bertha","Bertram","Bertrand","Beryl","Bessie","Beth","Bethany","Bethel","Betsy","Bette","Bettie","Betty","Bettye","Beulah","Beverly","Bianka","Bill","Billie","Billy","Birdie","Blair","Blaise","Blake","Blanca","Blanche","Blaze","Bo","Bobbie","Bobby","Bonita","Bonnie","Boris","Boyd","Brad","Braden","Bradford","Bradley","Bradly","Brady","Braeden","Brain","Brandi","Brando","Brandon","Brandt","Brandy","Brandyn","Brannon","Branson","Brant","Braulio","Braxton","Brayan","Breana","Breanna","Breanne","Brenda","Brendan","Brenden","Brendon","Brenna","Brennan","Brennon","Brent","Bret","Brett","Bria","Brian","Briana","Brianne","Brice","Bridget","Bridgette","Bridie","Brielle","Brigitte","Brionna","Brisa","Britney","Brittany","Brock","Broderick","Brody","Brook","Brooke","Brooklyn","Brooks","Brown","Bruce","Bryana","Bryce","Brycen","Bryon","Buck","Bud","Buddy","Buford","Bulah","Burdette","Burley","Burnice","Buster","Cade","Caden","Caesar","Caitlyn","Cale","Caleb","Caleigh","Cali","Calista","Callie","Camden","Cameron","Camila","Camilla","Camille","Camren","Camron","Camryn","Camylle","Candace","Candelario","Candice","Candida","Candido","Cara","Carey","Carissa","Carlee","Carleton","Carley","Carli","Carlie","Carlo","Carlos","Carlotta","Carmel","Carmela","Carmella","Carmelo","Carmen","Carmine","Carol","Carolanne","Carole","Carolina","Caroline","Carolyn","Carolyne","Carrie","Carroll","Carson","Carter","Cary","Casandra","Casey","Casimer","Casimir","Casper","Cassandra","Cassandre","Cassidy","Cassie","Catalina","Caterina","Catharine","Catherine","Cathrine","Cathryn","Cathy","Cayla","Ceasar","Cecelia","Cecil","Cecile","Cecilia","Cedrick","Celestine","Celestino","Celia","Celine","Cesar","Chad","Chadd","Chadrick","Chaim","Chance","Chandler","Chanel","Chanelle","Charity","Charlene","Charles","Charley","Charlie","Charlotte","Chase","Chasity","Chauncey","Chaya","Chaz","Chelsea","Chelsey","Chelsie","Chesley","Chester","Chet","Cheyanne","Cheyenne","Chloe","Chris","Christ","Christa","Christelle","Christian","Christiana","Christina","Christine","Christop","Christophe","Christopher","Christy","Chyna","Ciara","Cicero","Cielo","Cierra","Cindy","Citlalli","Clair","Claire","Clara","Clarabelle","Clare","Clarissa","Clark","Claud","Claude","Claudia","Claudie","Claudine","Clay","Clemens","Clement","Clementina","Clementine","Clemmie","Cleo","Cleora","Cleta","Cletus","Cleve","Cleveland","Clifford","Clifton","Clint","Clinton","Clotilde","Clovis","Cloyd","Clyde","Coby","Cody","Colby","Cole","Coleman","Colin","Colleen","Collin","Colt","Colten","Colton","Columbus","Concepcion","Conner","Connie","Connor","Conor","Conrad","Constance","Constantin","Consuelo","Cooper","Cora","Coralie","Corbin","Cordelia","Cordell","Cordia","Cordie","Corene","Corine","Cornelius","Cornell","Corrine","Cortez","Cortney","Cory","Coty","Courtney","Coy","Craig","Crawford","Creola","Cristal","Cristian","Cristina","Cristobal","Cristopher","Cruz","Crystal","Crystel","Cullen","Curt","Curtis","Cydney","Cynthia","Cyril","Cyrus","Dagmar","Dahlia","Daija","Daisha","Daisy","Dakota","Dale","Dallas","Dallin","Dalton","Damaris","Dameon","Damian","Damien","Damion","Damon","Dan","Dana","Dandre","Dane","D'angelo","Dangelo","Danial","Daniela","Daniella","Danielle","Danika","Dannie","Danny","Dante","Danyka","Daphne","Daphnee","Daphney","Darby","Daren","Darian","Dariana","Darien","Dario","Darion","Darius","Darlene","Daron","Darrel","Darrell","Darren","Darrick","Darrin","Darrion","Darron","Darryl","Darwin","Daryl","Dashawn","Dasia","Dave","David","Davin","Davion","Davon","Davonte","Dawn","Dawson","Dax","Dayana","Dayna","Dayne","Dayton","Dean","Deangelo","Deanna","Deborah","Declan","Dedric","Dedrick","Dee","Deion","Deja","Dejah","Dejon","Dejuan","Delaney","Delbert","Delfina","Delia","Delilah","Dell","Della","Delmer","Delores","Delpha","Delphia","Delphine","Delta","Demarco","Demarcus","Demario","Demetris","Demetrius","Demond","Dena","Denis","Dennis","Deon","Deondre","Deontae","Deonte","Dereck","Derek","Derick","Deron","Derrick","Deshaun","Deshawn","Desiree","Desmond","Dessie","Destany","Destin","Destinee","Destiney","Destini","Destiny","Devan","Devante","Deven","Devin","Devon","Devonte","Devyn","Dewayne","Dewitt","Dexter","Diamond","Diana","Dianna","Diego","Dillan","Dillon","Dimitri","Dina","Dino","Dion","Dixie","Dock","Dolly","Dolores","Domenic","Domenica","Domenick","Domenico","Domingo","Dominic","Dominique","Don","Donald","Donato","Donavon","Donna","Donnell","Donnie","Donny","Dora","Dorcas","Dorian","Doris","Dorothea","Dorothy","Dorris","Dortha","Dorthy","Doug","Douglas","Dovie","Doyle","Drake","Drew","Duane","Dudley","Dulce","Duncan","Durward","Dustin","Dusty","Dwight","Dylan","Earl","Earlene","Earline","Earnest","Earnestine","Easter","Easton","Ebba","Ebony","Ed","Eda","Edd","Eddie","Eden","Edgar","Edgardo","Edison","Edmond","Edmund","Edna","Eduardo","Edward","Edwardo","Edwin","Edwina","Edyth","Edythe","Effie","Efrain","Efren","Eileen","Einar","Eino","Eladio","Elaina","Elbert","Elda","Eldon","Eldora","Eldred","Eldridge","Eleanora","Eleanore","Eleazar","Electa","Elena","Elenor","Elenora","Eleonore","Elfrieda","Eli","Elian","Eliane","Elias","Eliezer","Elijah","Elinor","Elinore","Elisa","Elisabeth","Elise","Eliseo","Elisha","Elissa","Eliza","Elizabeth","Ella","Ellen","Ellie","Elliot","Elliott","Ellis","Ellsworth","Elmer","Elmira","Elmo","Elmore","Elna","Elnora","Elody","Eloisa","Eloise","Elouise","Eloy","Elroy","Elsa","Else","Elsie","Elta","Elton","Elva","Elvera","Elvie","Elvis","Elwin","Elwyn","Elyse","Elyssa","Elza","Emanuel","Emelia","Emelie","Emely","Emerald","Emerson","Emery","Emie","Emil","Emile","Emilia","Emiliano","Emilie","Emilio","Emily","Emma","Emmalee","Emmanuel","Emmanuelle","Emmet","Emmett","Emmie","Emmitt","Emmy","Emory","Ena","Enid","Enoch","Enola","Enos","Enrico","Enrique","Ephraim","Era","Eriberto","Eric","Erica","Erich","Erick","Ericka","Erik","Erika","Erin","Erling","Erna","Ernest","Ernestina","Ernestine","Ernesto","Ernie","Ervin","Erwin","Eryn","Esmeralda","Esperanza","Esta","Esteban","Estefania","Estel","Estell","Estella","Estelle","Estevan","Esther","Estrella","Etha","Ethan","Ethel","Ethelyn","Ethyl","Ettie","Eudora","Eugene","Eugenia","Eula","Eulah","Eulalia","Euna","Eunice","Eusebio","Eva","Evalyn","Evan","Evangeline","Evans","Eve","Eveline","Evelyn","Everardo","Everett","Everette","Evert","Evie","Ewald","Ewell","Ezekiel","Ezequiel","Ezra","Fabian","Fabiola","Fae","Fannie","Fanny","Fatima","Faustino","Fausto","Favian","Fay","Faye","Federico","Felicia","Felicita","Felicity","Felipa","Felipe","Felix","Felton","Fermin","Fern","Fernando","Ferne","Fidel","Filiberto","Filomena","Finn","Fiona","Flavie","Flavio","Fleta","Fletcher","Flo","Florence","Florencio","Florian","Florida","Florine","Flossie","Floy","Floyd","Ford","Forest","Forrest","Foster","Frances","Francesca","Francesco","Francis","Francisca","Francisco","Franco","Frank","Frankie","Franz","Fred","Freda","Freddie","Freddy","Frederic","Frederick","Frederik","Frederique","Fredrick","Fredy","Freeda","Freeman","Freida","Frida","Frieda","Friedrich","Fritz","Furman","Gabe","Gabriel","Gabriella","Gabrielle","Gaetano","Gage","Gail","Gardner","Garett","Garfield","Garland","Garnet","Garnett","Garret","Garrett","Garrick","Garrison","Garry","Garth","Gaston","Gavin","Gay","Gayle","Gaylord","Gene","General","Genesis","Genevieve","Gennaro","Genoveva","Geo","Geoffrey","George","Georgette","Georgiana","Georgianna","Geovanni","Geovanny","Geovany","Gerald","Geraldine","Gerard","Gerardo","Gerda","Gerhard","Germaine","German","Gerry","Gerson","Gertrude","Gia","Gianni","Gideon","Gilbert","Gilberto","Gilda","Giles","Gillian","Gina","Gino","Giovani","Giovanna","Giovanni","Giovanny","Gisselle","Giuseppe","Gladyce","Gladys","Glen","Glenda","Glenna","Glennie","Gloria","Godfrey","Golda","Golden","Gonzalo","Gordon","Grace","Gracie","Graciela","Grady","Graham","Grant","Granville","Grayce","Grayson","Green","Greg","Gregg","Gregoria","Gregorio","Gregory","Greta","Gretchen","Greyson","Griffin","Grover","Guadalupe","Gudrun","Guido","Guillermo","Guiseppe","Gunnar","Gunner","Gus","Gussie","Gust","Gustave","Guy","Gwen","Gwendolyn","Hadley","Hailee","Hailey","Hailie","Hal","Haleigh","Haley","Halie","Halle","Hallie","Hank","Hanna","Hannah","Hans","Hardy","Harley","Harmon","Harmony","Harold","Harrison","Harry","Harvey","Haskell","Hassan","Hassie","Hattie","Haven","Hayden","Haylee","Hayley","Haylie","Hazel","Hazle","Heath","Heather","Heaven","Heber","Hector","Heidi","Helen","Helena","Helene","Helga","Hellen","Helmer","Heloise","Henderson","Henri","Henriette","Henry","Herbert","Herman","Hermann","Hermina","Herminia","Herminio","Hershel","Herta","Hertha","Hester","Hettie","Hilario","Hilbert","Hilda","Hildegard","Hillard","Hillary","Hilma","Hilton","Hipolito","Hiram","Hobart","Holden","Hollie","Hollis","Holly","Hope","Horace","Horacio","Hortense","Hosea","Houston","Howard","Howell","Hoyt","Hubert","Hudson","Hugh","Hulda","Humberto","Hunter","Hyman","Ian","Ibrahim","Icie","Ida","Idell","Idella","Ignacio","Ignatius","Ike","Ila","Ilene","Iliana","Ima","Imani","Imelda","Immanuel","Imogene","Ines","Irma","Irving","Irwin","Isaac","Isabel","Isabell","Isabella","Isabelle","Isac","Isadore","Isai","Isaiah","Isaias","Isidro","Ismael","Isobel","Isom","Israel","Issac","Itzel","Iva","Ivah","Ivory","Ivy","Izabella","Izaiah","Jabari","Jace","Jacey","Jacinthe","Jacinto","Jack","Jackeline","Jackie","Jacklyn","Jackson","Jacky","Jaclyn","Jacquelyn","Jacques","Jacynthe","Jada","Jade","Jaden","Jadon","Jadyn","Jaeden","Jaida","Jaiden","Jailyn","Jaime","Jairo","Jakayla","Jake","Jakob","Jaleel","Jalen","Jalon","Jalyn","Jamaal","Jamal","Jamar","Jamarcus","Jamel","Jameson","Jamey","Jamie","Jamil","Jamir","Jamison","Jammie","Jan","Jana","Janae","Jane","Janelle","Janessa","Janet","Janice","Janick","Janie","Janis","Janiya","Jannie","Jany","Jaquan","Jaquelin","Jaqueline","Jared","Jaren","Jarod","Jaron","Jarred","Jarrell","Jarret","Jarrett","Jarrod","Jarvis","Jasen","Jasmin","Jason","Jasper","Jaunita","Javier","Javon","Javonte","Jay","Jayce","Jaycee","Jayda","Jayde","Jayden","Jaydon","Jaylan","Jaylen","Jaylin","Jaylon","Jayme","Jayne","Jayson","Jazlyn","Jazmin","Jazmyn","Jazmyne","Jean","Jeanette","Jeanie","Jeanne","Jed","Jedediah","Jedidiah","Jeff","Jefferey","Jeffery","Jeffrey","Jeffry","Jena","Jenifer","Jennie","Jennifer","Jennings","Jennyfer","Jensen","Jerad","Jerald","Jeramie","Jeramy","Jerel","Jeremie","Jeremy","Jermain","Jermaine","Jermey","Jerod","Jerome","Jeromy","Jerrell","Jerrod","Jerrold","Jerry","Jess","Jesse","Jessica","Jessie","Jessika","Jessy","Jessyca","Jesus","Jett","Jettie","Jevon","Jewel","Jewell","Jillian","Jimmie","Jimmy","Jo","Joan","Joana","Joanie","Joanne","Joannie","Joanny","Joany","Joaquin","Jocelyn","Jodie","Jody","Joe","Joel","Joelle","Joesph","Joey","Johan","Johann","Johanna","Johathan","John","Johnathan","Johnathon","Johnnie","Johnny","Johnpaul","Johnson","Jolie","Jon","Jonas","Jonatan","Jonathan","Jonathon","Jordan","Jordane","Jordi","Jordon","Jordy","Jordyn","Jorge","Jose","Josefa","Josefina","Joseph","Josephine","Josh","Joshua","Joshuah","Josiah","Josiane","Josianne","Josie","Josue","Jovan","Jovani","Jovanny","Jovany","Joy","Joyce","Juana","Juanita","Judah","Judd","Jude","Judge","Judson","Judy","Jules","Julia","Julian","Juliana","Julianne","Julie","Julien","Juliet","Julio","Julius","June","Junior","Junius","Justen","Justice","Justina","Justine","Juston","Justus","Justyn","Juvenal","Juwan","Kacey","Kaci","Kacie","Kade","Kaden","Kadin","Kaela","Kaelyn","Kaia","Kailee","Kailey","Kailyn","Kaitlin","Kaitlyn","Kale","Kaleb","Kaleigh","Kaley","Kali","Kallie","Kameron","Kamille","Kamren","Kamron","Kamryn","Kane","Kara","Kareem","Karelle","Karen","Kari","Kariane","Karianne","Karina","Karine","Karl","Karlee","Karley","Karli","Karlie","Karolann","Karson","Kasandra","Kasey","Kassandra","Katarina","Katelin","Katelyn","Katelynn","Katharina","Katherine","Katheryn","Kathleen","Kathlyn","Kathryn","Kathryne","Katlyn","Katlynn","Katrina","Katrine","Kattie","Kavon","Kay","Kaya","Kaycee","Kayden","Kayla","Kaylah","Kaylee","Kayleigh","Kayley","Kayli","Kaylie","Kaylin","Keagan","Keanu","Keara","Keaton","Keegan","Keeley","Keely","Keenan","Keira","Keith","Kellen","Kelley","Kelli","Kellie","Kelly","Kelsi","Kelsie","Kelton","Kelvin","Ken","Kendall","Kendra","Kendrick","Kenna","Kennedi","Kennedy","Kenneth","Kennith","Kenny","Kenton","Kenya","Kenyatta","Kenyon","Keon","Keshaun","Keshawn","Keven","Kevin","Kevon","Keyon","Keyshawn","Khalid","Khalil","Kian","Kiana","Kianna","Kiara","Kiarra","Kiel","Kiera","Kieran","Kiley","Kim","Kimberly","King","Kip","Kira","Kirk","Kirsten","Kirstin","Kitty","Kobe","Koby","Kody","Kolby","Kole","Korbin","Korey","Kory","Kraig","Kris","Krista","Kristian","Kristin","Kristina","Kristofer","Kristoffer","Kristopher","Kristy","Krystal","Krystel","Krystina","Kurt","Kurtis","Kyla","Kyle","Kylee","Kyleigh","Kyler","Kylie","Kyra","Lacey","Lacy","Ladarius","Lafayette","Laila","Laisha","Lamar","Lambert","Lamont","Lance","Landen","Lane","Laney","Larissa","Laron","Larry","Larue","Laura","Laurel","Lauren","Laurence","Lauretta","Lauriane","Laurianne","Laurie","Laurine","Laury","Lauryn","Lavada","Lavern","Laverna","Laverne","Lavina","Lavinia","Lavon","Lavonne","Lawrence","Lawson","Layla","Layne","Lazaro","Lea","Leann","Leanna","Leanne","Leatha","Leda","Lee","Leif","Leila","Leilani","Lela","Lelah","Leland","Lelia","Lempi","Lemuel","Lenna","Lennie","Lenny","Lenora","Lenore","Leo","Leola","Leon","Leonard","Leonardo","Leone","Leonel","Leonie","Leonor","Leonora","Leopold","Leopoldo","Leora","Lera","Lesley","Leslie","Lesly","Lessie","Lester","Leta","Letha","Letitia","Levi","Lew","Lewis","Lexi","Lexie","Lexus","Lia","Liam","Liana","Libbie","Libby","Lila","Lilian","Liliana","Liliane","Lilla","Lillian","Lilliana","Lillie","Lilly","Lily","Lilyan","Lina","Lincoln","Linda","Lindsay","Lindsey","Linnea","Linnie","Linwood","Lionel","Lisa","Lisandro","Lisette","Litzy","Liza","Lizeth","Lizzie","Llewellyn","Lloyd","Logan","Lois","Lola","Lolita","Loma","Lon","London","Lonie","Lonnie","Lonny","Lonzo","Lora","Loraine","Loren","Lorena","Lorenz","Lorenza","Lorenzo","Lori","Lorine","Lorna","Lottie","Lou","Louie","Louisa","Lourdes","Louvenia","Lowell","Loy","Loyal","Loyce","Lucas","Luciano","Lucie","Lucienne","Lucile","Lucinda","Lucio","Lucious","Lucius","Lucy","Ludie","Ludwig","Lue","Luella","Luigi","Luis","Luisa","Lukas","Lula","Lulu","Luna","Lupe","Lura","Lurline","Luther","Luz","Lyda","Lydia","Lyla","Lynn","Lyric","Lysanne","Mabel","Mabelle","Mable","Mac","Macey","Maci","Macie","Mack","Mackenzie","Macy","Madaline","Madalyn","Maddison","Madeline","Madelyn","Madelynn","Madge","Madie","Madilyn","Madisen","Madison","Madisyn","Madonna","Madyson","Mae","Maegan","Maeve","Mafalda","Magali","Magdalen","Magdalena","Maggie","Magnolia","Magnus","Maia","Maida","Maiya","Major","Makayla","Makenna","Makenzie","Malachi","Malcolm","Malika","Malinda","Mallie","Mallory","Malvina","Mandy","Manley","Manuel","Manuela","Mara","Marc","Marcel","Marcelina","Marcelino","Marcella","Marcelle","Marcellus","Marcelo","Marcia","Marco","Marcos","Marcus","Margaret","Margarete","Margarett","Margaretta","Margarette","Margarita","Marge","Margie","Margot","Margret","Marguerite","Maria","Mariah","Mariam","Marian","Mariana","Mariane","Marianna","Marianne","Mariano","Maribel","Marie","Mariela","Marielle","Marietta","Marilie","Marilou","Marilyne","Marina","Mario","Marion","Marisa","Marisol","Maritza","Marjolaine","Marjorie","Marjory","Mark","Markus","Marlee","Marlen","Marlene","Marley","Marlin","Marlon","Marques","Marquis","Marquise","Marshall","Marta","Martin","Martina","Martine","Marty","Marvin","Mary","Maryam","Maryjane","Maryse","Mason","Mateo","Mathew","Mathias","Mathilde","Matilda","Matilde","Matt","Matteo","Mattie","Maud","Maude","Maudie","Maureen","Maurice","Mauricio","Maurine","Maverick","Mavis","Max","Maxie","Maxime","Maximilian","Maximillia","Maximillian","Maximo","Maximus","Maxine","Maxwell","May","Maya","Maybell","Maybelle","Maye","Maymie","Maynard","Mayra","Mazie","Mckayla","Mckenna","Mckenzie","Meagan","Meaghan","Meda","Megane","Meggie","Meghan","Mekhi","Melany","Melba","Melisa","Melissa","Mellie","Melody","Melvin","Melvina","Melyna","Melyssa","Mercedes","Meredith","Merl","Merle","Merlin","Merritt","Mertie","Mervin","Meta","Mia","Micaela","Micah","Michael","Michaela","Michale","Micheal","Michel","Michele","Michelle","Miguel","Mikayla","Mike","Mikel","Milan","Miles","Milford","Miller","Millie","Milo","Milton","Mina","Minerva","Minnie","Miracle","Mireille","Mireya","Misael","Missouri","Misty","Mitchel","Mitchell","Mittie","Modesta","Modesto","Mohamed","Mohammad","Mohammed","Moises","Mollie","Molly","Mona","Monica","Monique","Monroe","Monserrat","Monserrate","Montana","Monte","Monty","Morgan","Moriah","Morris","Mortimer","Morton","Mose","Moses","Moshe","Mossie","Mozell","Mozelle","Muhammad","Muriel","Murl","Murphy","Murray","Mustafa","Mya","Myah","Mylene","Myles","Myra","Myriam","Myrl","Myrna","Myron","Myrtice","Myrtie","Myrtis","Myrtle","Nadia","Nakia","Name","Nannie","Naomi","Naomie","Napoleon","Narciso","Nash","Nasir","Nat","Natalia","Natalie","Natasha","Nathan","Nathanael","Nathanial","Nathaniel","Nathen","Nayeli","Neal","Ned","Nedra","Neha","Neil","Nelda","Nella","Nelle","Nellie","Nels","Nelson","Neoma","Nestor","Nettie","Neva","Newell","Newton","Nia","Nicholas","Nicholaus","Nichole","Nick","Nicklaus","Nickolas","Nico","Nicola","Nicolas","Nicole","Nicolette","Nigel","Nikita","Nikki","Nikko","Niko","Nikolas","Nils","Nina","Noah","Noble","Noe","Noel","Noelia","Noemi","Noemie","Noemy","Nola","Nolan","Nona","Nora","Norbert","Norberto","Norene","Norma","Norris","Norval","Norwood","Nova","Novella","Nya","Nyah","Nyasia","Obie","Oceane","Ocie","Octavia","Oda","Odell","Odessa","Odie","Ofelia","Okey","Ola","Olaf","Ole","Olen","Oleta","Olga","Olin","Oliver","Ollie","Oma","Omari","Omer","Ona","Onie","Opal","Ophelia","Ora","Oral","Oran","Oren","Orie","Orin","Orion","Orland","Orlando","Orlo","Orpha","Orrin","Orval","Orville","Osbaldo","Osborne","Oscar","Osvaldo","Oswald","Oswaldo","Otha","Otho","Otilia","Otis","Ottilie","Ottis","Otto","Ova","Owen","Ozella","Pablo","Paige","Palma","Pamela","Pansy","Paolo","Paris","Parker","Pascale","Pasquale","Pat","Patience","Patricia","Patrick","Patsy","Pattie","Paul","Paula","Pauline","Paxton","Payton","Pearl","Pearlie","Pearline","Pedro","Peggie","Penelope","Percival","Percy","Perry","Pete","Peter","Petra","Peyton","Philip","Phoebe","Phyllis","Pierce","Pierre","Pietro","Pink","Pinkie","Piper","Polly","Porter","Precious","Presley","Preston","Price","Prince","Princess","Priscilla","Providenci","Prudence","Queen","Queenie","Quentin","Quincy","Quinn","Quinten","Quinton","Rachael","Rachel","Rachelle","Rae","Raegan","Rafael","Rafaela","Raheem","Rahsaan","Rahul","Raina","Raleigh","Ralph","Ramiro","Ramon","Ramona","Randal","Randall","Randi","Randy","Ransom","Raoul","Raphael","Raphaelle","Raquel","Rashad","Rashawn","Rasheed","Raul","Raven","Ray","Raymond","Raymundo","Reagan","Reanna","Reba","Rebeca","Rebecca","Rebeka","Rebekah","Reece","Reed","Reese","Regan","Reggie","Reginald","Reid","Reilly","Reina","Reinhold","Remington","Rene","Renee","Ressie","Reta","Retha","Retta","Reuben","Reva","Rex","Rey","Reyes","Reymundo","Reyna","Reynold","Rhea","Rhett","Rhianna","Rhiannon","Rhoda","Ricardo","Richard","Richie","Richmond","Rick","Rickey","Rickie","Ricky","Rico","Rigoberto","Riley","Rita","River","Robb","Robbie","Robert","Roberta","Roberto","Robin","Robyn","Rocio","Rocky","Rod","Roderick","Rodger","Rodolfo","Rodrick","Rodrigo","Roel","Rogelio","Roger","Rogers","Rolando","Rollin","Roma","Romaine","Roman","Ron","Ronaldo","Ronny","Roosevelt","Rory","Rosa","Rosalee","Rosalia","Rosalind","Rosalinda","Rosalyn","Rosamond","Rosanna","Rosario","Roscoe","Rose","Rosella","Roselyn","Rosemarie","Rosemary","Rosendo","Rosetta","Rosie","Rosina","Roslyn","Ross","Rossie","Rowan","Rowena","Rowland","Roxane","Roxanne","Roy","Royal","Royce","Rozella","Ruben","Rubie","Ruby","Rubye","Rudolph","Rudy","Rupert","Russ","Russel","Russell","Rusty","Ruth","Ruthe","Ruthie","Ryan","Ryann","Ryder","Rylan","Rylee","Ryleigh","Ryley","Sabina","Sabrina","Sabryna","Sadie","Sadye","Sage","Saige","Sallie","Sally","Salma","Salvador","Salvatore","Sam","Samanta","Samantha","Samara","Samir","Sammie","Sammy","Samson","Sandra","Sandrine","Sandy","Sanford","Santa","Santiago","Santina","Santino","Santos","Sarah","Sarai","Sarina","Sasha","Saul","Savanah","Savanna","Savannah","Savion","Scarlett","Schuyler","Scot","Scottie","Scotty","Seamus","Sean","Sebastian","Sedrick","Selena","Selina","Selmer","Serena","Serenity","Seth","Shad","Shaina","Shakira","Shana","Shane","Shanel","Shanelle","Shania","Shanie","Shaniya","Shanna","Shannon","Shanny","Shanon","Shany","Sharon","Shaun","Shawn","Shawna","Shaylee","Shayna","Shayne","Shea","Sheila","Sheldon","Shemar","Sheridan","Sherman","Sherwood","Shirley","Shyann","Shyanne","Sibyl","Sid","Sidney","Sienna","Sierra","Sigmund","Sigrid","Sigurd","Silas","Sim","Simeon","Simone","Sincere","Sister","Skye","Skyla","Skylar","Sofia","Soledad","Solon","Sonia","Sonny","Sonya","Sophia","Sophie","Spencer","Stacey","Stacy","Stan","Stanford","Stanley","Stanton","Stefan","Stefanie","Stella","Stephan","Stephania","Stephanie","Stephany","Stephen","Stephon","Sterling","Steve","Stevie","Stewart","Stone","Stuart","Summer","Sunny","Susan","Susana","Susanna","Susie","Suzanne","Sven","Syble","Sydnee","Sydney","Sydni","Sydnie","Sylvan","Sylvester","Sylvia","Tabitha","Tad","Talia","Talon","Tamara","Tamia","Tania","Tanner","Tanya","Tara","Taryn","Tate","Tatum","Tatyana","Taurean","Tavares","Taya","Taylor","Teagan","Ted","Telly","Terence","Teresa","Terrance","Terrell","Terrence","Terrill","Terry","Tess","Tessie","Tevin","Thad","Thaddeus","Thalia","Thea","Thelma","Theo","Theodora","Theodore","Theresa","Therese","Theresia","Theron","Thomas","Thora","Thurman","Tia","Tiana","Tianna","Tiara","Tierra","Tiffany","Tillman","Timmothy","Timmy","Timothy","Tina","Tito","Titus","Tobin","Toby","Tod","Tom","Tomas","Tomasa","Tommie","Toney","Toni","Tony","Torey","Torrance","Torrey","Toy","Trace","Tracey","Tracy","Travis","Travon","Tre","Tremaine","Tremayne","Trent","Trenton","Tressa","Tressie","Treva","Trever","Trevion","Trevor","Trey","Trinity","Trisha","Tristian","Tristin","Triston","Troy","Trudie","Trycia","Trystan","Turner","Twila","Tyler","Tyra","Tyree","Tyreek","Tyrel","Tyrell","Tyrese","Tyrique","Tyshawn","Tyson","Ubaldo","Ulices","Ulises","Una","Unique","Urban","Uriah","Uriel","Ursula","Vada","Valentin","Valentina","Valentine","Valerie","Vallie","Van","Vance","Vanessa","Vaughn","Veda","Velda","Vella","Velma","Velva","Vena","Verda","Verdie","Vergie","Verla","Verlie","Vern","Verna","Verner","Vernice","Vernie","Vernon","Verona","Veronica","Vesta","Vicenta","Vicente","Vickie","Vicky","Victor","Victoria","Vida","Vidal","Vilma","Vince","Vincent","Vincenza","Vincenzo","Vinnie","Viola","Violet","Violette","Virgie","Virgil","Virginia","Virginie","Vita","Vito","Viva","Vivian","Viviane","Vivianne","Vivien","Vivienne","Vladimir","Wade","Waino","Waldo","Walker","Wallace","Walter","Walton","Wanda","Ward","Warren","Watson","Wava","Waylon","Wayne","Webster","Weldon","Wellington","Wendell","Wendy","Werner","Westley","Weston","Whitney","Wilber","Wilbert","Wilburn","Wiley","Wilford","Wilfred","Wilfredo","Wilfrid","Wilhelm","Wilhelmine","Will","Willa","Willard","William","Willie","Willis","Willow","Willy","Wilma","Wilmer","Wilson","Wilton","Winfield","Winifred","Winnifred","Winona","Winston","Woodrow","Wyatt","Wyman","Xander","Xavier","Xzavier","Yadira","Yasmeen","Yasmin","Yasmine","Yazmin","Yesenia","Yessenia","Yolanda","Yoshiko","Yvette","Yvonne","Zachariah","Zachary","Zachery","Zack","Zackary","Zackery","Zakary","Zander","Zane","Zaria","Zechariah","Zelda","Zella","Zelma","Zena","Zetta","Zion","Zita","Zoe","Zoey","Zoie","Zoila","Zola","Zora","Zula"];e.exports={generateUsername:function(){return r.randomElement(i)+"-"+r.randomAlphanumStr(3)}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return v});var r=n(4),i=n(2),o=n(7),a=n(0),s=n.n(a),c=n(5),u=n(11),d=n.n(u),l=n(37),h=n.n(l),p=n(38),f=n(53),m=Object(r.getLogger)(e),v=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this)).xmpp=e,o.eventEmitter=r,o.sessions={},o.jvbIceConfig=i.jvb,o.p2pIceConfig=i.p2p,o.mediaConstraints={offerToReceiveAudio:!0,offerToReceiveVideo:!0},o}return _createClass(n,[{key:"init",value:function(e){_get(_getPrototypeOf(n.prototype),"init",this).call(this,e),this.connection.addHandler(this.onJingle.bind(this),"urn:xmpp:jingle:1","iq","set",null,null)}},{key:"onJingle",value:function(e){var t=$(e).find("jingle").attr("sid"),n=$(e).find("jingle").attr("action"),r=e.getAttribute("from"),a=Object(i.$iq)({type:"result",to:r,id:e.getAttribute("id")});m.log("on jingle "+n+" from "+r,e);var u=this.sessions[t];if("session-initiate"!==n){if(!u)return a.attrs({type:"error"}),a.c("error",{type:"cancel"}).c("item-not-found",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).up().c("unknown-session",{xmlns:"urn:xmpp:jingle:errors:1"}),m.warn("invalid session id",e),this.connection.send(a),!0;if(r!==u.remoteJid)return m.warn("jid mismatch for session id",t,u.remoteJid,e),a.attrs({type:"error"}),a.c("error",{type:"cancel"}).c("item-not-found",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).up().c("unknown-session",{xmlns:"urn:xmpp:jingle:errors:1"}),this.connection.send(a),!0}else if(void 0!==u)return a.attrs({type:"error"}),a.c("error",{type:"cancel"}).c("service-unavailable",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).up(),m.warn("duplicate session id",t,e),this.connection.send(a),!0;var l=window.performance.now(),h="focus"!==i.Strophe.getResourceFromJid(r);switch(n){case"session-initiate":m.log("(TIME) received session-initiate:\t",l);var p=$(e).find("jingle>startmuted");if(p&&p.length>0){var v=p.attr("audio"),g=p.attr("video");this.eventEmitter.emit(s.a.START_MUTED_FROM_FOCUS,"true"===v,"true"===g)}m.info("Marking session from "+r+" as "+(h?"":"*not*")+" P2P");var _=h?this.p2pIceConfig:this.jvbIceConfig;u=new f.a($(e).find("jingle").attr("sid"),$(e).attr("to"),r,this.connection,this.mediaConstraints,JSON.parse(JSON.stringify(_)),h,!1),this.sessions[u.sid]=u,this.eventEmitter.emit(s.a.CALL_INCOMING,u,$(e).find(">jingle"),l);break;case"session-accept":this.eventEmitter.emit(s.a.CALL_ACCEPTED,u,$(e).find(">jingle"));break;case"content-modify":u.modifyContents($(e).find(">jingle"));break;case"transport-info":this.eventEmitter.emit(s.a.TRANSPORT_INFO,u,$(e).find(">jingle"));break;case"session-terminate":m.log("terminating...",u.sid);var y=null,S=null;$(e).find(">jingle>reason").length&&(y=$(e).find(">jingle>reason>:first")[0].tagName,S=$(e).find(">jingle>reason>text").text()),this.terminate(u.sid,y,S),this.eventEmitter.emit(s.a.CALL_ENDED,u,y,S);break;case"transport-replace":m.info("(TIME) Start transport replace:\t",l),c.a.sendAnalytics(Object(o.G)(o.f,{p2p:h,value:l})),u.replaceTransport($(e).find(">jingle"),function(){var e=window.performance.now();m.info("(TIME) Transport replace success:\t",e),c.a.sendAnalytics(Object(o.G)(o.g,{p2p:h,value:e}))},function(e){d.a.callErrorHandler(e),m.error("Transport replace failed",e),u.sendTransportReject()});break;case"addsource":case"source-add":u.addRemoteStream($(e).find(">jingle>content"));break;case"removesource":case"source-remove":u.removeRemoteStream($(e).find(">jingle>content"));break;default:m.warn("jingle action not implemented",n),a.attrs({type:"error"}),a.c("error",{type:"cancel"}).c("bad-request",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).up()}return this.connection.send(a),!0}},{key:"newP2PJingleSession",value:function(e,t){var n=new f.a(h.a.randomHexString(12),e,t,this.connection,this.mediaConstraints,this.p2pIceConfig,!0,!0);return this.sessions[n.sid]=n,n}},{key:"terminate",value:function(e,t,n){this.sessions.hasOwnProperty(e)&&("ended"!==this.sessions[e].state&&this.sessions[e].onTerminated(t,n),delete this.sessions[e])}},{key:"getStunAndTurnCredentials",value:function(){var e=this;this.connection.sendIQ(Object(i.$iq)({type:"get",to:this.connection.domain}).c("services",{xmlns:"urn:xmpp:extdisco:1"}),function(t){var n=[];$(t).find(">services>service").each(function(e,t){var r={},i=(t=$(t)).attr("type");switch(i){case"stun":r.urls="stun:"+t.attr("host"),t.attr("port")&&(r.urls+=":"+t.attr("port")),n.push(r);break;case"turn":case"turns":r.urls=i+":";var o=t.attr("username");if(o){var a=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);a&&parseInt(a[2],10)<28?r.urls+=o+"@":r.username=o}r.urls+=t.attr("host"),t.attr("port")&&(r.urls+=":"+t.attr("port"));var s=t.attr("transport");s&&"udp"!==s&&(r.urls+="?transport="+s),r.credential=t.attr("password")||r.credential,n.push(r)}});for(var r,i=e.xmpp.options,o=n.length-1;o>0;o--){var a=Math.floor(Math.random()*(o+1)),s=n[o];n[o]=n[a],n[a]=s}i.useStunTurn&&(r=i.useTurnUdp?function(e){return e.urls.startsWith("turn")}:function(e){return e.urls.startsWith("turn")&&e.urls.indexOf("transport=tcp")>=0},e.jvbIceConfig.iceServers=n.filter(r));i.p2p&&i.p2p.useStunTurn&&(e.p2pIceConfig.iceServers=n)},function(e){m.warn("getting turn credentials failed",e),m.warn("is mod_turncredentials or similar installed?")})}},{key:"getLog",value:function(){var e=this,t={};return Object.keys(this.sessions).forEach(function(n){var r=e.sessions[n].peerconnection;r&&r.updateLog&&(t["jingle_"+n]={updateLog:r.updateLog,stats:r.stats,url:window.location.href})}),t}}]),n})(p.b)}).call(this,"modules/xmpp/strophe.jingle.js")},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(105),i=n.n(r),o=(function(){function e(){_classCallCheck(this,e),this._queue=i.a.queue(this._processQueueTasks.bind(this),1),this._stopped=!1}return _createClass(e,[{key:"clear",value:function(){this._queue.kill()}},{key:"_processQueueTasks",value:function(e,t){e(t)}},{key:"push",value:function(e,t){this._stopped?t&&t(new Error("The queue has been stopped")):this._queue.push(e,t)}},{key:"shutdown",value:function(){this._stopped=!0}}]),e})()},function(e,t,n){(function(n,r){var i;!(function(){var o,a,s={};function c(e){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,e.apply(o,arguments)}}null!=(o=this)&&(a=o.async),s.noConflict=function(){return o.async=a,s};var u=Object.prototype.toString,d=Array.isArray||function(e){return"[object Array]"===u.call(e)},l=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n+=1)t(e[n],n,e)},h=function(e,t){if(e.map)return e.map(t);var n=[];return l(e,function(e,r,i){n.push(t(e,r,i))}),n},p=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};void 0!==n&&n.nextTick?(s.nextTick=n.nextTick,s.setImmediate=void 0!==r?function(e){r(e)}:s.nextTick):"function"==typeof r?(s.nextTick=function(e){r(e)},s.setImmediate=s.nextTick):(s.nextTick=function(e){setTimeout(e,0)},s.setImmediate=s.nextTick),s.each=function(e,t,n){if(n=n||function(){},!e.length)return n();var r=0;function i(t){t?(n(t),n=function(){}):(r+=1)>=e.length&&n()}l(e,function(e){t(e,c(i))})},s.forEach=s.each,s.eachSeries=function(e,t,n){if(n=n||function(){},!e.length)return n();var r=0;!(function i(){t(e[r],function(t){t?(n(t),n=function(){}):(r+=1)>=e.length?n():i()})})()},s.forEachSeries=s.eachSeries,s.eachLimit=function(e,t,n,r){f(t).apply(null,[e,n,r])},s.forEachLimit=s.eachLimit;var f=function(e){return function(t,n,r){if(r=r||function(){},!t.length||e<=0)return r();var i=0,o=0,a=0;!(function s(){if(i>=t.length)return r();for(;a<e&&o<t.length;)a+=1,n(t[(o+=1)-1],function(e){e?(r(e),r=function(){}):(a-=1,(i+=1)>=t.length?r():s())})})()}},m=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[s.each].concat(t))}},v=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[s.eachSeries].concat(t))}},g=function(e,t,n,r){if(t=h(t,function(e,t){return{index:t,value:e}}),r){var i=[];e(t,function(e,t){n(e.value,function(n,r){i[e.index]=r,t(n)})},function(e){r(e,i)})}else e(t,function(e,t){n(e.value,function(e){t(e)})})};s.map=m(g),s.mapSeries=v(g),s.mapLimit=function(e,t,n,r){return _(t)(e,n,r)};var _=function(e){return(function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[f(e)].concat(n))}})(e,g)};s.reduce=function(e,t,n,r){s.eachSeries(e,function(e,r){n(t,e,function(e,n){t=n,r(e)})},function(e){r(e,t)})},s.inject=s.reduce,s.foldl=s.reduce,s.reduceRight=function(e,t,n,r){var i=h(e,function(e){return e}).reverse();s.reduce(i,t,n,r)},s.foldr=s.reduceRight;var y=function(e,t,n,r){var i=[];e(t=h(t,function(e,t){return{index:t,value:e}}),function(e,t){n(e.value,function(n){n&&i.push(e),t()})},function(e){r(h(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};s.filter=m(y),s.filterSeries=v(y),s.select=s.filter,s.selectSeries=s.filterSeries;var S=function(e,t,n,r){var i=[];e(t=h(t,function(e,t){return{index:t,value:e}}),function(e,t){n(e.value,function(n){n||i.push(e),t()})},function(e){r(h(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};s.reject=m(S),s.rejectSeries=v(S);var E=function(e,t,n,r){e(t,function(e,t){n(e,function(n){n?(r(e),r=function(){}):t()})},function(e){r()})};s.detect=m(E),s.detectSeries=v(E),s.some=function(e,t,n){s.each(e,function(e,r){t(e,function(e){e&&(n(!0),n=function(){}),r()})},function(e){n(!1)})},s.any=s.some,s.every=function(e,t,n){s.each(e,function(e,r){t(e,function(e){e||(n(!1),n=function(){}),r()})},function(e){n(!0)})},s.all=s.every,s.sortBy=function(e,t,n){s.map(e,function(e,n){t(e,function(t,r){t?n(t):n(null,{value:e,criteria:r})})},function(e,t){if(e)return n(e);n(null,h(t.sort(function(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}),function(e){return e.value}))})},s.auto=function(e,t){t=t||function(){};var n=p(e),r=n.length;if(!r)return t();var i={},o=[],a=function(e){o.unshift(e)},c=function(){r--,l(o.slice(0),function(e){e()})};a(function(){if(!r){var e=t;t=function(){},e(null,i)}}),l(n,function(n){var r=d(e[n])?e[n]:[e[n]],u=function(e){var r=Array.prototype.slice.call(arguments,1);if(r.length<=1&&(r=r[0]),e){var o={};l(p(i),function(e){o[e]=i[e]}),o[n]=r,t(e,o),t=function(){}}else i[n]=r,s.setImmediate(c)},h=r.slice(0,Math.abs(r.length-1))||[],f=function(){return t=function(e,t){return e&&i.hasOwnProperty(t)},r=!0,((e=h).reduce?e.reduce(t,r):(l(e,function(e,n,i){r=t(r,e)}),r))&&!i.hasOwnProperty(n);var e,t,r};if(f())r[r.length-1](u,i);else{a(function e(){f()&&((function(e){for(var t=0;t<o.length;t+=1)if(o[t]===e)return void o.splice(t,1)})(e),r[r.length-1](u,i))})}})},s.retry=function(e,t,n){var r=[];"function"==typeof e&&(n=t,t=e,e=5),e=parseInt(e,10)||5;var i=function(i,o){for(var a=function(e,t){return function(n){e(function(e,r){n(!e||t,{err:e,result:r})},o)}};e;)r.push(a(t,!(e-=1)));s.series(r,function(e,t){t=t[t.length-1],(i||n)(t.err,t.result)})};return n?i():i},s.waterfall=function(e,t){if(t=t||function(){},!d(e)){var n=new Error("First argument to waterfall must be an array of functions");return t(n)}if(!e.length)return t();!(function e(n){return function(r){if(r)t.apply(null,arguments),t=function(){};else{var i=Array.prototype.slice.call(arguments,1),o=n.next();o?i.push(e(o)):i.push(t),s.setImmediate(function(){n.apply(null,i)})}}})(s.iterator(e))()};var b=function(e,t,n){if(n=n||function(){},d(t))e.map(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},n);else{var r={};e.each(p(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,n(t)})},function(e){n(e,r)})}};s.parallel=function(e,t){b({map:s.map,each:s.each},e,t)},s.parallelLimit=function(e,t,n){b({map:_(t),each:f(t)},e,n)},s.series=function(e,t){if(t=t||function(){},d(e))s.mapSeries(e,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},t);else{var n={};s.eachSeries(p(e),function(t,r){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[t]=i,r(e)})},function(e){t(e,n)})}},s.iterator=function(e){return(function t(n){var r=function t(){return e.length&&e[n].apply(null,arguments),t.next()};return r.next=function(){return n<e.length-1?t(n+1):null},r})(0)},s.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var C=function(e,t,n,r){var i=[];e(t,function(e,t){n(e,function(e,n){i=i.concat(n||[]),t(e)})},function(e){r(e,i)})};s.concat=m(C),s.concatSeries=v(C),s.whilst=function(e,t,n){e()?t(function(r){if(r)return n(r);s.whilst(e,t,n)}):n()},s.doWhilst=function(e,t,n){e(function(r){if(r)return n(r);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?s.doWhilst(e,t,n):n()})},s.until=function(e,t,n){e()?n():t(function(r){if(r)return n(r);s.until(e,t,n)})},s.doUntil=function(e,t,n){e(function(r){if(r)return n(r);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?n():s.doUntil(e,t,n)})},s.queue=function(e,t){function n(e,t,n,r){if(e.started||(e.started=!0),d(t)||(t=[t]),0==t.length)return s.setImmediate(function(){e.drain&&e.drain()});l(t,function(t){var i={data:t,callback:"function"==typeof r?r:null};n?e.tasks.unshift(i):e.tasks.push(i),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),s.setImmediate(e.process)})}void 0===t&&(t=1);var r=0,i={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(e,t){n(i,e,!1,t)},kill:function(){i.drain=null,i.tasks=[]},unshift:function(e,t){n(i,e,!0,t)},process:function(){if(!i.paused&&r<i.concurrency&&i.tasks.length){var t=i.tasks.shift();i.empty&&0===i.tasks.length&&i.empty(),r+=1;var n=c(function(){r-=1,t.callback&&t.callback.apply(t,arguments),i.drain&&i.tasks.length+r===0&&i.drain(),i.process()});e(t.data,n)}},length:function(){return i.tasks.length},running:function(){return r},idle:function(){return i.tasks.length+r===0},pause:function(){!0!==i.paused&&(i.paused=!0,i.process())},resume:function(){!1!==i.paused&&(i.paused=!1,i.process())}};return i},s.priorityQueue=function(e,t){function n(e,t){return e.priority-t.priority}var r=s.queue(e,t);return r.push=function(e,t,i){!(function(e,t,r,i){if(e.started||(e.started=!0),d(t)||(t=[t]),0==t.length)return s.setImmediate(function(){e.drain&&e.drain()});l(t,function(t){var o={data:t,priority:r,callback:"function"==typeof i?i:null};e.tasks.splice((function(e,t,n){for(var r=-1,i=e.length-1;r<i;){var o=r+(i-r+1>>>1);n(t,e[o])>=0?r=o:i=o-1}return r})(e.tasks,o,n)+1,0,o),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),s.setImmediate(e.process)})})(r,e,t,i)},delete r.unshift,r},s.cargo=function(e,t){var n=!1,r=[],i={tasks:r,payload:t,saturated:null,empty:null,drain:null,drained:!0,push:function(e,n){d(e)||(e=[e]),l(e,function(e){r.push({data:e,callback:"function"==typeof n?n:null}),i.drained=!1,i.saturated&&r.length===t&&i.saturated()}),s.setImmediate(i.process)},process:function o(){if(!n){if(0===r.length)return i.drain&&!i.drained&&i.drain(),void(i.drained=!0);var a="number"==typeof t?r.splice(0,t):r.splice(0,r.length),s=h(a,function(e){return e.data});i.empty&&i.empty(),n=!0,e(s,function(){n=!1;var e=arguments;l(a,function(t){t.callback&&t.callback.apply(null,e)}),o()})}},length:function(){return r.length},running:function(){return n}};return i};var T=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&l(n,function(t){console[e](t)}))}]))}};s.log=T("log"),s.dir=T("dir"),s.memoize=function(e,t){var n={},r={};t=t||function(e){return e};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),a=t.apply(null,i);a in n?s.nextTick(function(){o.apply(null,n[a])}):a in r?r[a].push(o):(r[a]=[o],e.apply(null,i.concat([function(){n[a]=arguments;var e=r[a];delete r[a];for(var t=0,i=e.length;t<i;t++)e[t].apply(null,arguments)}])))};return i.memo=n,i.unmemoized=e,i},s.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},s.times=function(e,t,n){for(var r=[],i=0;i<e;i++)r.push(i);return s.map(r,t,n)},s.timesSeries=function(e,t,n){for(var r=[],i=0;i<e;i++)r.push(i);return s.mapSeries(r,t,n)},s.seq=function(){var e=arguments;return function(){var t=this,n=Array.prototype.slice.call(arguments),r=n.pop();s.reduce(e,n,function(e,n,r){n.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);r(e,t)}]))},function(e,n){r.apply(t,[e].concat(n))})}},s.compose=function(){return s.seq.apply(null,Array.prototype.reverse.call(arguments))};var R=function(e,t){var n=function(){var n=this,r=Array.prototype.slice.call(arguments),i=r.pop();return e(t,function(e,t){e.apply(n,r.concat([t]))},i)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return n.apply(this,r)}return n};s.applyEach=m(R),s.applyEachSeries=v(R),s.forever=function(e,t){!(function n(r){if(r){if(t)return t(r);throw r}e(n)})()},e.exports?e.exports=s:void 0===(i=function(){return s}.apply(t,[]))||(e.exports=i)})()}).call(this,n(59),n(154).setImmediate)},function(e,t){e.exports={integerHash:function(e){if(!e)return 0;var t,n=0;for(t=0;t<e.length;t++)n+=e.charCodeAt(t)*Math.pow(31,e.length-1-t),n=Math.abs(0|n);return n}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var r=n(4),i=n(20),o=n(32),a=Object(r.getLogger)(e),s=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o,a,s,c){var u;return _classCallCheck(this,n),(u=t.call(this)).sid=e,u.localJid=r,u.remoteJid=i,u.connection=o,u.mediaConstraints=a,u.iceConfig=s,u.isInitiator=c,u.usedrip=!0,u.dripContainer=[],u.room=null,u.state=null,u.rtc=null,u}return _createClass(n,[{key:"initialize",value:function(e,t,n){if(null!==this.state){var r="attempt to initiate on session "+this.sid+"\n                   in state "+this.state;throw a.error(r),new Error(r)}this.room=e,this.rtc=t,this.state=o.c,this.doInitialize(n)}},{key:"doInitialize",value:function(e){}},{key:"addIceCandidates",value:function(e){}},{key:"getState",value:function(){return this.state}},{key:"addSources",value:function(e){}},{key:"removeSources",value:function(e){}},{key:"terminate",value:function(e,t,n){}},{key:"acceptOffer",value:function(e,t,n){}},{key:"_getInitiatorJid",value:function(){return this.isInitiator?this.localJid:this.remoteJid}},{key:"initiatorJid",get:function(){return this.isInitiator?this.localJid:this.remoteJid}},{key:"responderJid",get:function(){return this.isInitiator?this.remoteJid:this.localJid}}]),n})(i.a)}).call(this,"modules/xmpp/JingleSession.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c});var r=n(4),i=n(8),o=n(40),a=n(109),s=Object(r.getLogger)(e),c=(function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).ssrcOwners=new Map,e.chatRoom=null,e}return _createClass(n,[{key:"setChatRoom",value:function(e){var t=this,n=this.chatRoom;this.chatRoom=e,n&&(n.removePresenceListener("audiomuted",this._audioMuteHandler),n.removePresenceListener("videomuted",this._videoMuteHandler),n.removePresenceListener("videoType",this._videoTypeHandler)),e&&(this._audioMuteHandler=function(e,n){t.eventEmitter.emit(o.a,n,i.a,"true"===e.value)},e.addPresenceListener("audiomuted",this._audioMuteHandler),this._videoMuteHandler=function(e,n){t.eventEmitter.emit(o.a,n,i.c,"true"===e.value)},e.addPresenceListener("videomuted",this._videoMuteHandler),this._videoTypeHandler=function(e,n){t.eventEmitter.emit(o.b,n,e.value)},e.addPresenceListener("videoType",this._videoTypeHandler))}},{key:"getPeerMediaInfo",value:function(e,t){if(this.chatRoom)return this.chatRoom.getMediaPresenceInfo(e,t);s.error("Requested peer media info, before room was set")}},{key:"getSSRCOwner",value:function(e){return this.ssrcOwners.get(e)}},{key:"setSSRCOwner",value:function(e,t){if("number"!=typeof e)throw new TypeError("SSRC("+e+") must be a number");this.ssrcOwners.set(e,t)}}]),n})(a.a)}).call(this,"modules/xmpp/SignalingLayerImpl.js")},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=(function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getSSRCOwner",value:function(e){throw new Error("not implemented")}},{key:"getPeerMediaInfo",value:function(e,t){throw new Error("not implemented")}}]),n})(n(20).a)},function(e,t,n){"use strict";var r=n(2),i=(function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).log=[],e}return _createClass(n,[{key:"init",value:function(e){_get(_getPrototypeOf(n.prototype),"init",this).call(this,e),this.connection.rawInput=this.logIncoming.bind(this),this.connection.rawOutput=this.logOutgoing.bind(this)}},{key:"logIncoming",value:function(e){this.log.push([(new Date).getTime(),"incoming",e])}},{key:"logOutgoing",value:function(e){this.log.push([(new Date).getTime(),"outgoing",e])}}]),n})(n(38).b);t.a=function(){r.Strophe.addConnectionPlugin("logger",new i)}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var r=n(4),i=n(2),o=n(38),a=Object(r.getLogger)(e),s=(function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"init",value:function(e){_get(_getPrototypeOf(n.prototype),"init",this).call(this,e),this.connection.addHandler(this.onRayo.bind(this),"urn:xmpp:rayo:1","iq","set",null,null)}},{key:"onRayo",value:function(e){a.info("Rayo IQ",e)}},{key:"dial",value:function(e,t,n,r,o){var s=this;return new Promise(function(c,u){if(o){var d=Object(i.$iq)({type:"set",to:o});d.c("dial",{xmlns:"urn:xmpp:rayo:1",to:e,from:t}),d.c("header",{name:"JvbRoomName",value:n}).up(),r&&r.length&&d.c("header",{name:"JvbRoomPassword",value:r}).up(),s.connection.sendIQ(d,function(e){a.info("Dial result ",e);var t=$(e).find("ref").attr("uri");s.callResource=t.substr("xmpp:".length),a.info("Received call resource: "+s.callResource),c()},function(e){a.info("Dial error ",e),u(e)})}else u(new Error("Internal error!"))})}},{key:"hangup",value:function(){var e=this;return new Promise(function(t,n){if(!e.callResource)return n(new Error("No call in progress")),void a.warn("No call in progress");var r=Object(i.$iq)({type:"set",to:e.callResource});r.c("hangup",{xmlns:"urn:xmpp:rayo:1"}),e.connection.sendIQ(r,function(n){a.info("Hangup result ",n),e.callResource=null,t()},function(t){a.info("Hangup error ",t),e.callResource=null,n(new Error("Hangup error "))})})}}]),n})(o.b)}).call(this,"modules/xmpp/strophe.rayo.js")},function(e,t,n){"use strict";(function(e){var r=n(4),i=n(2),o=n(11),a=n.n(o),s=Object(r.getLogger)(e),c=-1,u=/request id \d+.\d+ got 200/,d=/request errored, status: (\d+), number of errors: \d+/;t.a=function(){i.Strophe.log=function(e,t){switch(s.trace("Strophe",n,t),"string"==typeof t&&-1!==t.indexOf("Request ")&&-1!==t.indexOf("timed out (secondary), restarting")&&(_readOnlyError("e"),n=i.Strophe.LogLevel.WARN),n){case i.Strophe.LogLevel.DEBUG:-1!==c&&u.test(t)&&(s.debug("Reset lastErrorStatus"),c=-1);break;case i.Strophe.LogLevel.WARN:s.warn("Strophe: "+t);var n=d.exec(t);n&&2===n.length&&(c=parseInt(n[1],10),s.debug("lastErrorStatus set to: "+c));break;case i.Strophe.LogLevel.ERROR:case i.Strophe.LogLevel.FATAL:t="Strophe: "+t,a.a.callErrorHandler(new Error(t)),s.error(t)}},i.Strophe.getLastErrorStatus=function(){return c},i.Strophe.getStatusString=function(e){switch(e){case i.Strophe.Status.BINDREQUIRED:return"BINDREQUIRED";case i.Strophe.Status.ERROR:return"ERROR";case i.Strophe.Status.CONNECTING:return"CONNECTING";case i.Strophe.Status.CONNFAIL:return"CONNFAIL";case i.Strophe.Status.AUTHENTICATING:return"AUTHENTICATING";case i.Strophe.Status.AUTHFAIL:return"AUTHFAIL";case i.Strophe.Status.CONNECTED:return"CONNECTED";case i.Strophe.Status.DISCONNECTED:return"DISCONNECTED";case i.Strophe.Status.DISCONNECTING:return"DISCONNECTING";case i.Strophe.Status.ATTACHED:return"ATTACHED";default:return"unknown"}}}}).call(this,"modules/xmpp/strophe.util.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return l});var r=n(4),i=n(6),o=n.n(i),a=n(7),s=n(5),c=n(11),u=n.n(c),d=Object(r.getLogger)(e),l=(function(){function e(t,n,r,i){if(_classCallCheck(this,e),!t&&!n)throw new TypeError("At least peerconnection or wsUrl must be given");if(t&&n)throw new TypeError("Just one of peerconnection or wsUrl must be given");if(t?d.debug("constructor() with peerconnection"):d.debug("constructor() with wsUrl:\""+n+"\""),this._channel=null,this._eventEmitter=r,this._mode=null,this._areRetriesEnabled=!1,this._closedFromClient=!1,this._senderVideoConstraintsChanged=i,t){var o=t.createDataChannel("JVB data channel",{protocol:"http://abcpen.com/protocols/colibri"});this._handleChannel(o),this._mode="datachannel"}else n&&(this._areRetriesEnabled=!0,this._wsUrl=n,this._initWebSocket())}return _createClass(e,[{key:"_initWebSocket",value:function(){var e=new WebSocket(this._wsUrl);this._handleChannel(e),this._mode="websocket"}},{key:"_startConnectionRetries",value:function(){var e=this,t=1;this._retryTimeout=setTimeout(function n(){e.isOpen()||(e._initWebSocket(e._wsUrl),t=Math.min(2*t,60),e._retryTimeout=setTimeout(n,1e3*t))},1e3*t)}},{key:"_stopConnectionRetries",value:function(){this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=void 0)}},{key:"_retryWebSocketConnection",value:function(e){var t=this;if(this._areRetriesEnabled){var n=e.code,r=e.reason;s.a.sendAnalytics(Object(a.y)(n,r)),this._areRetriesEnabled=!1,this._eventEmitter.once(o.a.DATA_CHANNEL_OPEN,function(){t._stopConnectionRetries(),t._areRetriesEnabled=!0}),this._startConnectionRetries()}}},{key:"close",value:function(){if(this._closedFromClient=!0,this._stopConnectionRetries(),this._areRetriesEnabled=!1,this._channel){try{this._channel.close()}catch(e){}this._channel=null}}},{key:"isOpen",value:function(){return this._channel&&("open"===this._channel.readyState||this._channel.readyState===WebSocket.OPEN)}},{key:"sendMessage",value:function(e,t){this._send({colibriClass:"EndpointMessage",msgPayload:t,to:e})}},{key:"sendSetLastNMessage",value:function(e){var t={colibriClass:"LastNChangedEvent",lastN:e};this._send(t),d.log("Channel lastN set to: "+e)}},{key:"sendPinnedEndpointMessage",value:function(e){d.log("sending pinned changed notification to the bridge for endpoint ",e),this._send({colibriClass:"PinnedEndpointChangedEvent",pinnedEndpoint:e||null})}},{key:"sendSelectedEndpointsMessage",value:function(e){d.log("sending selected changed notification to the bridge for endpoints",e),this._send({colibriClass:"SelectedEndpointsChangedEvent",selectedEndpoints:e})}},{key:"sendReceiverVideoConstraintMessage",value:function(e){d.log("sending a ReceiverVideoConstraint message with a maxFrameHeight of "+e+" pixels"),this._send({colibriClass:"ReceiverVideoConstraint",maxFrameHeight:e})}},{key:"_handleChannel",value:function(e){var t=this,n=this._eventEmitter;e.onopen=function(){d.info(t._mode+" channel opened"),n.emit(o.a.DATA_CHANNEL_OPEN)},e.onerror=function(e){"websocket"!==t._mode&&d.error("Channel error: "+e.message)},e.onmessage=function(e){var r,i=e.data;try{r=JSON.parse(i)}catch(e){return u.a.callErrorHandler(e),void d.error("Failed to parse channel message as JSON: ",i,e)}var a=r.colibriClass;switch(a){case"DominantSpeakerEndpointChangeEvent":var s=r.dominantSpeakerEndpoint;d.info("Channel new dominant speaker event: ",s),n.emit(o.a.DOMINANT_SPEAKER_CHANGED,s);break;case"EndpointConnectivityStatusChangeEvent":var c=r.endpoint,l="true"===r.active;d.info("Endpoint connection status changed: "+c+" active ? "+l),n.emit(o.a.ENDPOINT_CONN_STATUS_CHANGED,c,l);break;case"EndpointMessage":n.emit(o.a.ENDPOINT_MESSAGE_RECEIVED,r.from,r.msgPayload);break;case"LastNEndpointsChangeEvent":var h=r.lastNEndpoints;d.info("Channel new last-n event: ",h,r),n.emit(o.a.LASTN_ENDPOINT_CHANGED,h,r);break;case"SenderVideoConstraints":var p=r.videoConstraints;p&&(d.info("SenderVideoConstraints: "+JSON.stringify(p)),t._senderVideoConstraintsChanged(p));break;default:d.debug("Channel JSON-formatted message: ",r),n.emit("rtc.datachannel."+a,r)}},e.onclose=function(e){d.info("Channel closed by "+(t._closedFromClient?"client":"server")),"websocket"===t._mode&&(t._closedFromClient||(d.error("Channel closed: "+e.code+" "+e.reason),t._retryWebSocketConnection(e))),t._channel=null},this._channel=e}},{key:"_send",value:function(e){var t=this._channel;if(!this.isOpen())throw d.error("Bridge Channel send: no opened channel."),new Error("No opened channel");t.send(JSON.stringify(e))}},{key:"mode",get:function(){return this._mode}}]),e})()}).call(this,"modules/RTC/BridgeChannel.js")},function(e,t,n){"use strict";var r=n(50);function i(e,t,n,i,o){var a=r.writeRtpDescription(e.kind,t);if(a+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":o||"active"),a+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?a+="a=sendrecv\r\n":e.rtpSender?a+="a=sendonly\r\n":e.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var c="msid:"+(i?i.id:"-")+" "+s+"\r\n";a+="a="+c,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),a}function o(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},i=function(e,t,n,i){var o=r(e.parameters.apt,n),a=r(t.parameters.apt,i);return o&&a&&o.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach(function(r){for(var o=0;o<t.codecs.length;o++){var a=t.codecs[o];if(r.name.toLowerCase()===a.name.toLowerCase()&&r.clockRate===a.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&a.parameters.apt&&!i(r,a,e.codecs,t.codecs))continue;(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(r.numChannels,a.numChannels),n.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter(function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}}),n}function a(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function s(e,t){var n=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return n||e.addRemoteCandidate(t),!n}function c(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}e.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,n,r,i){var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=i,e.setTimeout(function(){t._dispatchEvent("track",o)})}var d=function(n){var i=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){i[e]=o[e].bind(o)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=(function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof r;return i&&(r=[r]),r=r.filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)}),delete e.url,e.urls=i?r[0]:r,!!r.length}})})(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var a=n.iceCandidatePoolSize;a>0;a--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(d.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(d.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),d.prototype.onicecandidate=null,d.prototype.onaddstream=null,d.prototype.ontrack=null,d.prototype.onremovestream=null,d.prototype.onsignalingstatechange=null,d.prototype.oniceconnectionstatechange=null,d.prototype.onconnectionstatechange=null,d.prototype.onicegatheringstatechange=null,d.prototype.onnegotiationneeded=null,d.prototype.ondatachannel=null,d.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},d.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},d.prototype.getConfiguration=function(){return this._config},d.prototype.getLocalStreams=function(){return this.localStreams},d.prototype.getRemoteStreams=function(){return this.remoteStreams},d.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();r.iceTransport=i.iceTransport,r.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(r),r},d.prototype.addTrack=function(t,n){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find(function(e){return e.track===t}))throw c("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(r=this.transceivers[i]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},d.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach(function(t){n.addTrack(t,e)});else{var r=e.clone();e.getTracks().forEach(function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",function(e){n.enabled=e.enabled})}),r.getTracks().forEach(function(e){n.addTrack(e,r)})}},d.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find(function(e){return e.rtpSender===t});if(!n)throw c("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},d.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(e){var n=t.getSenders().find(function(t){return t.track===e});n&&t.removeTrack(n)})},d.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},d.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},d.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;i.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},d.prototype._gather=function(t,n){var i=this,o=this.transceivers[n].iceGatherer;if(!o.onlocalcandidate){var a=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),o.onlocalcandidate=function(e){if(!(i.usingBundle&&n>0)){var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:n};var s=e.candidate,c=!s||0===Object.keys(s).length;if(c)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),s.component=1,s.ufrag=o.getLocalParameters().usernameFragment;var u=r.writeCandidate(s);a.candidate=_extends(a.candidate,r.parseCandidate(u)),a.candidate.candidate=u,a.candidate.toJSON=function(){return{candidate:a.candidate.candidate,sdpMid:a.candidate.sdpMid,sdpMLineIndex:a.candidate.sdpMLineIndex,usernameFragment:a.candidate.usernameFragment}}}var d=r.getMediaSections(i._localDescription.sdp);d[a.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",i._localDescription.sdp=r.getDescription(i._localDescription.sdp)+d.join("");var l=i.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==i.iceGatheringState&&(i.iceGatheringState="gathering",i._emitGatheringStateChange()),c||i._dispatchEvent("icecandidate",a),l&&(i._dispatchEvent("icecandidate",new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange())}},e.setTimeout(function(){a.forEach(function(e){o.onlocalcandidate(e)})},0)}},d.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},d.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},d.prototype._transceive=function(e,n,i){var a=o(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(a.encodings=e.sendEncodingParameters,a.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(a.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(a)),i&&e.rtpReceiver&&a.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),e.recvEncodingParameters.length?a.encodings=e.recvEncodingParameters:a.encodings=[{}],a.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(a.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(a.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(a))},d.prototype.setLocalDescription=function(e){var t,n,i=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!a("setLocalDescription",e.type,i.signalingState)||i._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+i.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),n=t.shift(),t.forEach(function(e,t){var n=r.parseRtpParameters(e);i.transceivers[t].localCapabilities=n}),i.transceivers.forEach(function(e,t){i._gather(e.mid,t)});else if("answer"===e.type){t=r.splitSections(i._remoteDescription.sdp),n=t.shift();var s=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach(function(e,t){var a=i.transceivers[t],c=a.iceGatherer,u=a.iceTransport,d=a.dtlsTransport,l=a.localCapabilities,h=a.remoteCapabilities;if(!(r.isRejected(e)&&0===r.matchPrefix(e,"a=bundle-only").length||a.rejected)){var p=r.getIceParameters(e,n),f=r.getDtlsParameters(e,n);s&&(f.role="server"),i.usingBundle&&0!==t||(i._gather(a.mid,t),"new"===u.state&&u.start(c,p,s?"controlling":"controlled"),"new"===d.state&&d.start(f));var m=o(l,h);i._transceive(a,m.codecs.length>0,!1)}})}return i._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?i._updateSignalingState("have-local-offer"):i._updateSignalingState("stable"),Promise.resolve()},d.prototype.setRemoteDescription=function(i){var d=this;if(-1===["offer","answer"].indexOf(i.type))return Promise.reject(c("TypeError",'Unsupported type "'+i.type+'"'));if(!a("setRemoteDescription",i.type,d.signalingState)||d._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+i.type+" in state "+d.signalingState));var l={};d.remoteStreams.forEach(function(e){l[e.id]=e});var h=[],p=r.splitSections(i.sdp),f=p.shift(),m=r.matchPrefix(f,"a=ice-lite").length>0,v=r.matchPrefix(f,"a=group:BUNDLE ").length>0;d.usingBundle=v;var g=r.matchPrefix(f,"a=ice-options:")[0];return d.canTrickleIceCandidates=!!g&&g.substr(14).split(" ").indexOf("trickle")>=0,p.forEach(function(a,c){var u=r.splitLines(a),p=r.getKind(a),g=r.isRejected(a)&&0===r.matchPrefix(a,"a=bundle-only").length,_=u[0].substr(2).split(" ")[2],y=r.getDirection(a,f),S=r.parseMsid(a),E=r.getMid(a)||r.generateIdentifier();if(g||"application"===p&&("DTLS/SCTP"===_||"UDP/DTLS/SCTP"===_))d.transceivers[c]={mid:E,kind:p,protocol:_,rejected:!0};else{var b,C,T,R,A,k,I,w,P;!g&&d.transceivers[c]&&d.transceivers[c].rejected&&(d.transceivers[c]=d._createTransceiver(p,!0));var O,D,N=r.parseRtpParameters(a);g||(O=r.getIceParameters(a,f),(D=r.getDtlsParameters(a,f)).role="client"),I=r.parseRtpEncodingParameters(a);var M=r.parseRtcpParameters(a),L=r.matchPrefix(a,"a=end-of-candidates",f).length>0,x=r.matchPrefix(a,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return 1===e.component});if(("offer"===i.type||"answer"===i.type)&&!g&&v&&c>0&&d.transceivers[c]&&(d._disposeIceAndDtlsTransports(c),d.transceivers[c].iceGatherer=d.transceivers[0].iceGatherer,d.transceivers[c].iceTransport=d.transceivers[0].iceTransport,d.transceivers[c].dtlsTransport=d.transceivers[0].dtlsTransport,d.transceivers[c].rtpSender&&d.transceivers[c].rtpSender.setTransport(d.transceivers[0].dtlsTransport),d.transceivers[c].rtpReceiver&&d.transceivers[c].rtpReceiver.setTransport(d.transceivers[0].dtlsTransport)),"offer"!==i.type||g)"answer"!==i.type||g||(C=(b=d.transceivers[c]).iceGatherer,T=b.iceTransport,R=b.dtlsTransport,A=b.rtpReceiver,k=b.sendEncodingParameters,w=b.localCapabilities,d.transceivers[c].recvEncodingParameters=I,d.transceivers[c].remoteCapabilities=N,d.transceivers[c].rtcpParameters=M,x.length&&"new"===T.state&&(!m&&!L||v&&0!==c?x.forEach(function(e){s(b.iceTransport,e)}):T.setRemoteCandidates(x)),v&&0!==c||("new"===T.state&&T.start(C,O,"controlling"),"new"===R.state&&R.start(D)),!o(b.localCapabilities,b.remoteCapabilities).codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&b.sendEncodingParameters[0].rtx&&delete b.sendEncodingParameters[0].rtx,d._transceive(b,"sendrecv"===y||"recvonly"===y,"sendrecv"===y||"sendonly"===y),!A||"sendrecv"!==y&&"sendonly"!==y?delete b.rtpReceiver:(P=A.track,S?(l[S.stream]||(l[S.stream]=new e.MediaStream),n(P,l[S.stream]),h.push([P,A,l[S.stream]])):(l.default||(l.default=new e.MediaStream),n(P,l.default),h.push([P,A,l.default]))));else{(b=d.transceivers[c]||d._createTransceiver(p)).mid=E,b.iceGatherer||(b.iceGatherer=d._createIceGatherer(c,v)),x.length&&"new"===b.iceTransport.state&&(!L||v&&0!==c?x.forEach(function(e){s(b.iceTransport,e)}):b.iceTransport.setRemoteCandidates(x)),w=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(w.codecs=w.codecs.filter(function(e){return"rtx"!==e.name})),k=b.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var F,j=!1;"sendrecv"===y||"sendonly"===y?(j=!b.rtpReceiver,A=b.rtpReceiver||new e.RTCRtpReceiver(b.dtlsTransport,p),j&&(P=A.track,S&&"-"===S.stream||(S?(l[S.stream]||(l[S.stream]=new e.MediaStream,Object.defineProperty(l[S.stream],"id",{get:function(){return S.stream}})),Object.defineProperty(P,"id",{get:function(){return S.track}}),F=l[S.stream]):(l.default||(l.default=new e.MediaStream),F=l.default)),F&&(n(P,F),b.associatedRemoteMediaStreams.push(F)),h.push([P,A,F]))):b.rtpReceiver&&b.rtpReceiver.track&&(b.associatedRemoteMediaStreams.forEach(function(t){var n=t.getTracks().find(function(e){return e.id===b.rtpReceiver.track.id});n&&(function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))})(n,t)}),b.associatedRemoteMediaStreams=[]),b.localCapabilities=w,b.remoteCapabilities=N,b.rtpReceiver=A,b.rtcpParameters=M,b.sendEncodingParameters=k,b.recvEncodingParameters=I,d._transceive(d.transceivers[c],!1,j)}}}),void 0===d._dtlsRole&&(d._dtlsRole="offer"===i.type?"active":"passive"),d._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?d._updateSignalingState("have-remote-offer"):d._updateSignalingState("stable"),Object.keys(l).forEach(function(t){var n=l[t];if(n.getTracks().length){if(-1===d.remoteStreams.indexOf(n)){d.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout(function(){d._dispatchEvent("addstream",r)})}h.forEach(function(e){var t=e[0],r=e[1];n.id===e[2].id&&u(d,t,r,[n])})}}),h.forEach(function(e){e[2]||u(d,e[0],e[1],[])}),e.setTimeout(function(){d&&d.transceivers&&d.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},d.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},d.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},d.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout(function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}},0))},d.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++}),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},d.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},d.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var o=n.transceivers.filter(function(e){return"audio"===e.kind}).length,a=n.transceivers.filter(function(e){return"video"===e.kind}).length,s=arguments[0];if(s){if(s.mandatory||s.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==s.offerToReceiveAudio&&(o=!0===s.offerToReceiveAudio?1:!1===s.offerToReceiveAudio?0:s.offerToReceiveAudio),void 0!==s.offerToReceiveVideo&&(a=!0===s.offerToReceiveVideo?1:!1===s.offerToReceiveVideo?0:s.offerToReceiveVideo)}for(n.transceivers.forEach(function(e){"audio"===e.kind?--o<0&&(e.wantReceive=!1):"video"===e.kind&&--a<0&&(e.wantReceive=!1)});o>0||a>0;)o>0&&(n._createTransceiver("audio"),o--),a>0&&(n._createTransceiver("video"),a--);var u=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach(function(i,o){var a=i.track,s=i.kind,c=i.mid||r.generateIdentifier();i.mid=c,i.iceGatherer||(i.iceGatherer=n._createIceGatherer(o,n.usingBundle));var u=e.RTCRtpSender.getCapabilities(s);t<15019&&(u.codecs=u.codecs.filter(function(e){return"rtx"!==e.name})),u.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),i.remoteCapabilities&&i.remoteCapabilities.codecs&&i.remoteCapabilities.codecs.forEach(function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)})}),u.headerExtensions.forEach(function(e){(i.remoteCapabilities&&i.remoteCapabilities.headerExtensions||[]).forEach(function(t){e.uri===t.uri&&(e.id=t.id)})});var d=i.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];a&&t>=15019&&"video"===s&&!d[0].rtx&&(d[0].rtx={ssrc:d[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,s)),i.localCapabilities=u,i.sendEncodingParameters=d}),"max-compat"!==n._config.bundlePolicy&&(u+="a=group:BUNDLE "+n.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",n.transceivers.forEach(function(e,t){u+=i(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,u+="a="+r.writeCandidate(e)+"\r\n"}),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))});var d=new e.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(d)},d.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var a=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(a+="a=group:BUNDLE "+n.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),a+="a=ice-options:trickle\r\n";var s=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach(function(e,r){if(!(r+1>s)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?a+="m=application 0 DTLS/SCTP 5000\r\n":a+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?a+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(a+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(a+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;e.stream&&("audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var u=o(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,a+=i(e,u,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(a+="a=rtcp-rsize\r\n")}});var u=new e.RTCSessionDescription({type:"answer",sdp:a});return Promise.resolve(u)},d.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(i,o){if(!n._remoteDescription)return o(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var a=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<n.transceivers.length;u++)if(n.transceivers[u].mid===e.sdpMid){a=u;break}var d=n.transceivers[a];if(!d)return o(c("OperationError","Can not add ICE candidate"));if(d.rejected)return i();var l=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===l.protocol&&(0===l.port||9===l.port))return i();if(l.component&&1!==l.component)return i();if((0===a||a>0&&d.iceTransport!==n.transceivers[0].iceTransport)&&!s(d.iceTransport,l))return o(c("OperationError","Can not add ICE candidate"));var h=e.candidate.trim();0===h.indexOf("a=")&&(h=h.substr(2)),(t=r.getMediaSections(n._remoteDescription.sdp))[a]+="a="+(l.type?h:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var p=0;p<n.transceivers.length&&(n.transceivers[p].rejected||(n.transceivers[p].iceTransport.addRemoteCandidate({}),(t=r.getMediaSections(n._remoteDescription.sdp))[p]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));p++);i()})},d.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach(function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)}),!n)throw c("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(t){e[t]&&r.push(e[t].getStats())})}),Promise.all(r).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then(function(e){var t=new Map;return Object.keys(e).forEach(function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])}),t})}}});var l=["createOffer","createAnswer"];return l.forEach(function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then(function(t){"function"==typeof e[0]&&e[0].apply(null,[t])},function(t){"function"==typeof e[1]&&e[1].apply(null,[t])}):t.apply(this,arguments)}}),(l=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)},function(t){"function"==typeof e[2]&&e[2].apply(null,[t])}):t.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),d}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return A});var r=n(144),i=n(4),o=n(25),a=n.n(o),s=n(36),c=n(8),u=n(6),d=n.n(u),l=n(40),h=n(13),p=n(3),f=n(11),m=n(116),v=n(21),g=n(9),_=n(117),y=n(29),S=n(118),E=n(119),b=n(12),C=n(10),T=n(69),R=Object(i.getLogger)(e);function A(e,t,i,o,a,u,d){var h=this;this.audioTransferActive=!(!0===d.startSilent),this._dtmfSender=void 0,this._dtmfTonesQueue=[],this.videoTransferActive=!0,this.rtc=e,this.id=t,this.isP2P=u,this.remoteTracks=new Map,this.localTracks=new Map,this._addedStreams=[],this.localSSRCs=new Map,this.localUfrag=null,this.remoteUfrag=null,this.signalingLayer=i,this._peerVideoTypeChanged=this._peerVideoTypeChanged.bind(this),this.signalingLayer.on(l.b,this._peerVideoTypeChanged),this._peerMutedChanged=this._peerMutedChanged.bind(this),this.signalingLayer.on(l.a,this._peerMutedChanged),this.options=d,this.peerconnection=new C.a.RTCPeerConnectionType(o,a);this.videoBitrates=this.options.videoQuality&&this.options.videoQuality.maxBitratesVideo?this.options.videoQuality.maxBitratesVideo:{low:2e5,standard:7e5,high:25e5},this.tpcUtils=new T.b(this,this.videoBitrates),this.updateLog=[],this.stats={},this.statsinterval=null,this.maxstats=d.maxstats,this.interop=new r.a;var f=n(158);this.simulcast=new f({numOfLayers:T.a.length,explodeRemoteSimulcast:!1,usesUnifiedPlan:p.a.usesUnifiedPlan()}),this.sdpConsistency=new _.a(this.toString()),this.localSdpMunger=new E.a(this),this.eventEmitter=e.eventEmitter,this.rtxModifier=new m.a,this.senderVideoMaxHeight=null;var v=function(e){return"string"==typeof e?Object.values(s).find(function(t){return t===e.toLowerCase()}):null},g=v(this.options.preferredCodec||this.options.preferH264&&s.H264);p.a.isFirefox()&&g===s.VP9&&(g=null);var y=v(this.options.disabledCodec||this.options.disableH264&&s.H264);y===s.VP8&&(R.warn("Disabling VP8 is not permitted, setting is ignored!"),y=null),(g||y)&&(this.codecPreference={enable:null===y,mediaType:c.c,mimeType:y||g}),this.trace=function(e,t){R.debug(e,t),h.updateLog.push({time:new Date,type:e,value:t||""})},this.onicecandidate=null,this.peerconnection.onicecandidate=function(e){h.trace("onicecandidate",JSON.stringify(e.candidate,null," ")),null!==h.onicecandidate&&h.onicecandidate(e)},p.a.usesPlanB()?(this.peerconnection.onaddstream=function(e){return h._remoteStreamAdded(e.stream)},this.peerconnection.onremovestream=function(e){return h._remoteStreamRemoved(e.stream)}):this.peerconnection.ontrack=function(e){var t=e.streams[0];h._remoteTrackAdded(t,e.track,e.transceiver),t.onremovetrack=function(e){h._remoteTrackRemoved(t,e.track)}},this.onsignalingstatechange=null,this.peerconnection.onsignalingstatechange=function(e){h.trace("onsignalingstatechange",h.signalingState),null!==h.onsignalingstatechange&&h.onsignalingstatechange(e)},this.oniceconnectionstatechange=null,this.peerconnection.oniceconnectionstatechange=function(e){h.trace("oniceconnectionstatechange",h.iceConnectionState),null!==h.oniceconnectionstatechange&&h.oniceconnectionstatechange(e)},this.onnegotiationneeded=null,this.peerconnection.onnegotiationneeded=function(e){h.trace("onnegotiationneeded"),null!==h.onnegotiationneeded&&h.onnegotiationneeded(e)},this.ondatachannel=null,this.peerconnection.ondatachannel=function(e){h.trace("ondatachannel"),null!==h.ondatachannel&&h.ondatachannel(e)},this.maxstats&&(this.statsinterval=window.setInterval(function(){h.getStats(function(e){if(e.result&&"function"==typeof e.result)for(var t=e.result(),n=function(e){var n=t[e];n.names().forEach(function(e){h._processStat(n,e,n.stat(e))})},r=0;r<t.length;++r)n(r);else e.forEach(function(e){return h._processStat(e,"",e)})},function(){})},1e3)),R.info("Create new "+this)}A.prototype._processStat=function(e,t,n){var r=e.id+"-"+t,i=this.stats[r],o=new Date;i||(this.stats[r]=i={startTime:o,endTime:o,values:[],times:[]}),i.values.push(n),i.times.push(o.getTime()),i.values.length>this.maxstats&&(i.values.shift(),i.times.shift()),i.endTime=o};var k=function(e){return null==e?"":"type: "+e.type+"\r\n"+e.sdp};A.prototype.getConnectionState=function(){var e=this.peerconnection.iceConnectionState;return"completed"===e?"connected":e},A.prototype._getDesiredMediaDirection=function(e){var t=!0;return e===c.a?t=this.audioTransferActive:e===c.c&&(t=this.videoTransferActive),t?this.hasAnyTracksOfType(e)?"sendrecv":"recvonly":"inactive"},A.prototype.isSimulcastOn=function(){return!this.options.disableSimulcast},A.prototype._peerVideoTypeChanged=function(e,t){if(e){var n=this.getRemoteTracks(e,c.c);n.length&&n[0]._setVideoType(t)}else R.error("No endpointID on peerVideoTypeChanged "+this)},A.prototype._peerMutedChanged=function(e,t,n){if(e){var r=this.getRemoteTracks(e,t);r.length&&r[0].setMute(n)}else R.error("On peerMuteChanged - no endpoint ID")},A.prototype.getAudioLevels=function(){var e={};return this.peerconnection.getReceivers().filter(function(e){return e.track&&e.track.kind===c.a}).forEach(function(t){var n=t.getSynchronizationSources();n&&n.length&&(e[n[0].source]=n[0].audioLevel)}),e},A.prototype.getLocalTracks=function(e){var t=Array.from(this.localTracks.values());return void 0!==e&&(t=t.filter(function(t){return t.getType()===e})),t},A.prototype.getLocalVideoTrack=function(){return this.getLocalTracks(c.c)[0]},A.prototype.hasAnyTracksOfType=function(e){if(!e)throw new Error('"mediaType" is required');return this.getLocalTracks(e).length>0},A.prototype.getRemoteTracks=function(e,t){for(var n,r=[],i=_createForOfIteratorHelperLoose(e?[e]:this.remoteTracks.keys());!(n=i()).done;){var o=n.value,a=this.remoteTracks.get(o);if(a)for(var s,c=_createForOfIteratorHelperLoose(a.keys());!(s=c()).done;){var u=s.value;if(!t||t===u){var d=a.get(u);d&&r.push(d)}}}return r},A.prototype.getTrackBySSRC=function(e){if("number"!=typeof e)throw new Error("SSRC "+e+" is not a number");for(var t,n=_createForOfIteratorHelperLoose(this.localTracks.values());!(t=n()).done;){var r=t.value;if(this.getLocalSSRC(r)===e)return r}for(var i,o=_createForOfIteratorHelperLoose(this.getRemoteTracks());!(i=o()).done;){var a=i.value;if(a.getSSRC()===e)return a}return null},A.prototype.getSsrcByTrackId=function(e){var t=function(t){return t.getTrack().id===e},n=this.getLocalTracks().find(t);if(n)return this.getLocalSSRC(n);var r=this.getRemoteTracks().find(t);return r?r.getSSRC():null},A.prototype._remoteStreamAdded=function(e){var t=this,n=b.a.getStreamID(e);if(b.a.isUserStreamById(n)){p.a.isChromiumBased()&&(e.onaddtrack=function(n){t._remoteTrackAdded(e,n.track)},e.onremovetrack=function(n){t._remoteTrackRemoved(e,n.track)});for(var r,i=_createForOfIteratorHelperLoose(e.getAudioTracks());!(r=i()).done;){var o=r.value;this._remoteTrackAdded(e,o)}for(var a,s=_createForOfIteratorHelperLoose(e.getVideoTracks());!(a=s()).done;){var c=a.value;this._remoteTrackAdded(e,c)}}else R.info(this+" ignored remote 'stream added' event for non-user streamid: "+n)},A.prototype._remoteTrackAdded=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=b.a.getStreamID(e),i=t.kind;if(this.isP2P||b.a.isUserStreamById(r))if(R.info(this+" remote track added:",r,i),i){var o,a=p.a.usesPlanB()?new v.a(this.remoteDescription.sdp):new v.a(this.peerconnection.remoteDescription.sdp);if(p.a.usesUnifiedPlan())if(n&&n.mid){var s=n.mid;o=a.media.filter(function(e){return g.a.findLine(e,"a=mid:"+s)})}else o=a.media.filter(function(e){var t=g.a.findLine(e,"a=msid");return void 0!==t&&r===t.substring(7).split(" ")[0]});else o=a.media.filter(function(e){return e.startsWith("m="+i)});if(o.length){var c=g.a.findLines(o[0],"a=ssrc:");if((c=c.filter(function(e){return-1!==e.indexOf("msid:"+r)})).length){var u=c[0].substring(7).split(" ")[0],d=Number(u),l=this.signalingLayer.getSSRCOwner(d);if(isNaN(d)||d<0)f.callErrorHandler(new Error("Invalid SSRC: "+u+" for remote track, msid: "+r+" media type: "+i));else if(l){R.log(this+" associated ssrc",l,d);var h=this.signalingLayer.getPeerMediaInfo(l,i);if(h){var m=h.muted,_=h.videoType;this._createRemoteTrack(l,e,t,i,_,d,m)}else f.callErrorHandler(new Error(this+": no peer media info available for "+l))}else f.callErrorHandler(new Error("No SSRC owner known for: "+d+" for remote track, msid: "+r+" media type: "+i))}else f.callErrorHandler(new Error("No SSRC lines for streamId "+r+" for remote track, media type: "+i))}else f.callErrorHandler(new Error("No media lines for type "+i+" found in remote SDP for remote track: "+r))}else f.callErrorHandler(new Error("MediaType undefined for remote track, stream id: "+r));else R.info(this+" ignored remote 'stream added' event for non-user streamid: "+r)},A.prototype._createRemoteTrack=function(e,t,n,r,i,o,a){var s=this.remoteTracks.get(e);s||(s=new Map,this.remoteTracks.set(e,s));var c=s.get(r);if(c&&c.getTrack()===n)R.info(this+" ignored duplicated remote track added event for: "+e+", "+r);else{c&&R.error(this+" overwriting remote track for"+e+" "+r);var u=new S.a(this.rtc,this.rtc.conference,e,t,n,r,i,o,a,this.isP2P);s.set(r,u),this.eventEmitter.emit(d.a.REMOTE_TRACK_ADDED,u,this)}},A.prototype._remoteStreamRemoved=function(e){if(b.a.isUserStream(e)){for(var t,n=_createForOfIteratorHelperLoose(e.getVideoTracks());!(t=n()).done;){var r=t.value;this._remoteTrackRemoved(e,r)}for(var i,o=_createForOfIteratorHelperLoose(e.getAudioTracks());!(i=o()).done;){var a=i.value;this._remoteTrackRemoved(e,a)}}else{var s=b.a.getStreamID(e);R.info("Ignored remote 'stream removed' event for non-user stream "+s)}},A.prototype._remoteTrackRemoved=function(e,t){var n=b.a.getStreamID(e),r=t&&b.a.getTrackID(t);R.info(this+" - remote track removed: "+n+", "+r),n?r?this._removeRemoteTrackById(n,r)||R.warn(this+" Removed track not found for msid: "+n+",\n             track id: "+r):f.callErrorHandler(new Error(this+" remote track removal failed - no track ID")):f.callErrorHandler(new Error(this+" remote track removal failed - no stream ID"))},A.prototype._getRemoteTrackById=function(e,t){for(var n,r=_createForOfIteratorHelperLoose(this.remoteTracks.values());!(n=r()).done;)for(var i,o=_createForOfIteratorHelperLoose(n.value.values());!(i=o()).done;){var a=i.value;if(a.getStreamId()==e&&a.getTrackId()==t)return a}},A.prototype.removeRemoteTracks=function(e){var t=[],n=this.remoteTracks.get(e);if(n){var r=n.get(c.a),i=n.get(c.c);r&&t.push(r),i&&t.push(i),this.remoteTracks.delete(e)}return R.debug(this+" removed remote tracks for "+e+" count: "+t.length),t},A.prototype._removeRemoteTrack=function(e){e.dispose();var t=e.getParticipantId(),n=this.remoteTracks.get(t);n?n.delete(e.getType())||R.error("Failed to remove "+e+" - type mapping messed up ?"):R.error("removeRemoteTrack: no remote tracks map for "+t),this.eventEmitter.emit(d.a.REMOTE_TRACK_REMOVED,e)},A.prototype._removeRemoteTrackById=function(e,t){var n=this._getRemoteTrackById(e,t);return n&&this._removeRemoteTrack(n),n};var I=function(e){if("object"!=typeof e||null===e||"string"!=typeof e.sdp)return R.warn("An empty description was passed as an argument."),e;var t=n(25),r=t.parse(e.sdp);void 0!==r&&void 0!==r.media&&Array.isArray(r.media)&&r.media.forEach(function(e){var t=[],n=[];if(void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&e.ssrcGroups.forEach(function(e){void 0!==e.semantics&&"FID"===e.semantics&&void 0!==e.ssrcs&&t.push(Number(e.ssrcs.split(" ")[0]))}),Array.isArray(e.ssrcs)){var r;for(r=0;r<e.ssrcs.length;r++)"object"==typeof e.ssrcs[r]&&void 0!==e.ssrcs[r].id&&t.indexOf(e.ssrcs[r].id)>=0&&(n.push(e.ssrcs[r]),delete e.ssrcs[r]);for(r=0;r<e.ssrcs.length;r++)void 0!==e.ssrcs[r]&&n.push(e.ssrcs[r]);e.ssrcs=(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!p.a.isChrome()||!p.a.isVersionGreaterThan(70))return e;var t=_toConsumableArray(e);return e.filter(function(e){return"mslabel"===e.attribute&&"-"===e.value}).map(function(e){return e.id}).forEach(function(e){var n=t.find(function(t){return t.id===e&&"cname"===t.attribute});n.value="recvonly-"+e,(t=t.filter(function(t){return t.id!==e})).push(n)}),t})(n)}});var i=t.write(r);return new RTCSessionDescription({type:e.type,sdp:i})};A.prototype.getLocalSSRC=function(e){var t=this._getSSRC(e.rtcId);return t&&t.ssrcs[0]},A.prototype._injectSsrcGroupForUnifiedSimulcast=function(e){var t=a.a.parse(e.sdp),n=t.media.find(function(e){return"video"===e.type});n.ssrcGroups=n.ssrcGroups||[];var r=n.ssrcGroups.filter(function(e){return"FID"===e.semantics});if(n.simulcast||n.simulcast_03){var i=[];if(r&&r.length?r.forEach(function(e){i.push(e.ssrcs.split(" ")[0])}):n.ssrcs.forEach(function(e){"msid"===e.attribute&&i.push(e.id)}),n.ssrcGroups.find(function(e){return"SIM"===e.semantics}))return e;n.ssrcGroups.push({semantics:"SIM",ssrcs:i.join(" ")})}return new RTCSessionDescription({type:e.type,sdp:a.a.write(t)})};var w={signalingState:function(){return this.peerconnection.signalingState},iceConnectionState:function(){return this.peerconnection.iceConnectionState},localDescription:function(){var e=this.peerconnection.localDescription;return e?(this.trace("getLocalDescription::preTransform",k(e)),p.a.usesUnifiedPlan()?(e=this.interop.toPlanB(e),this.trace("getLocalDescription::postTransform (Plan B)",k(e)),e=this._injectSsrcGroupForUnifiedSimulcast(e),this.trace("getLocalDescription::postTransform (inject ssrc group)",k(e))):(p.a.doesVideoMuteByStreamRemove()&&(e=this.localSdpMunger.maybeAddMutedLocalVideoTracksToSDP(e),R.debug("getLocalDescription::postTransform (munge local SDP)",e)),e=(function(e,t){if(!e)throw new Error("No local description passed in.");var n=new y.a(e.sdp),r=n.selectMedia("audio"),i=!1;r&&"sendrecv"!==r.direction&&(t.startSilent?r.direction="inactive":r.direction="sendrecv",i=!0);var o=n.selectMedia("video");return o&&"sendrecv"!==o.direction&&(o.direction="sendrecv",i=!0),i?new RTCSessionDescription({type:e.type,sdp:n.toRawSDP()}):e})(e,this.options)),e=this.localSdpMunger.transformStreamIdentifiers(e)):(R.debug("getLocalDescription no localDescription found"),{})},remoteDescription:function(){var e=this.peerconnection.remoteDescription;return e?(this.trace("getRemoteDescription::preTransform",k(e)),p.a.usesUnifiedPlan()&&(e=this.interop.toPlanB(e),this.trace("getRemoteDescription::postTransform (Plan B)",k(e))),e):(R.debug("getRemoteDescription no remoteDescription found"),{})}};function P(e){return e.getLocalTracks().some(function(e){return"camera"===e.videoType})}Object.keys(w).forEach(function(e){Object.defineProperty(A.prototype,e,{get:w[e]})}),A.prototype._getSSRC=function(e){return this.localSSRCs.get(e)},A.prototype._mungeCodecOrder=function(e){var t=this;if(!this.codecPreference||p.a.supportsCodecPreferences())return e;var n=a.a.parse(e.sdp),r=n.media.find(function(e){return e.type===t.codecPreference.mediaType});return this.codecPreference.enable?(g.a.preferCodec(r,this.codecPreference.mimeType),this.codecPreference.mimeType===s.H264&&p.a.isReactNative()&&this.isP2P&&g.a.stripCodec(r,this.codecPreference.mimeType,!0)):g.a.stripCodec(r,this.codecPreference.mimeType),new RTCSessionDescription({type:e.type,sdp:a.a.write(n)})},A.prototype.containsTrack=function(e){if(e.isLocal())return this.localTracks.has(e.rtcId);var t=e.getParticipantId(),n=this.remoteTracks.get(t);return Boolean(n&&n.get(e.getType())===e)},A.prototype.addTrack=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.rtcId;if(R.info("add "+e+" to: "+this),this.localTracks.has(n))return Promise.reject(new Error(e+" is already in "+this));if(this.localTracks.set(n,e),p.a.usesUnifiedPlan()&&this.isP2P)this.tpcUtils.addTrack(e,t);else{var r=e.getOriginalStream();if(r)this._addStream(r);else if(!p.a.doesVideoMuteByStreamRemove()||e.isAudioTrack()||e.isVideoTrack()&&!e.isMuted())return Promise.reject(new Error(this+" no WebRTC stream for: "+e));if(p.a.usesPlanB()&&p.a.doesVideoMuteByStreamRemove()&&e.isVideoTrack()&&e.isMuted()){var i=this.generateNewStreamSSRCInfo(e);this.sdpConsistency.setPrimarySsrc(i.ssrcs[0]);var o=i.groups.find(function(e){return"SIM"===e.semantics});o&&this.simulcast.setSsrcCache(o.ssrcs);var a=i.groups.filter(function(e){return"FID"===e.semantics});if(a){var s=new Map;a.forEach(function(e){var t=e.ssrcs[0],n=e.ssrcs[1];s.set(t,n)}),this.rtxModifier.setSsrcCache(s)}}}var c=Promise.resolve();return p.a.isFirefox()&&(c=this.tpcUtils.setEncodings(e)),c},A.prototype.addTrackUnmute=function(e){if(!this._assertTrackBelongs("addTrackUnmute",e))return Promise.reject("Track not found on the peerconnection");R.info("Adding "+e+" as unmute to "+this);var t=e.getOriginalStream();return t?p.a.usesUnifiedPlan()?this.tpcUtils.addTrackUnmute(e):(this._addStream(t),Promise.resolve(!0)):(R.error("Unable to add "+e+" as unmute to "+this+" - no WebRTC stream"),Promise.reject("Stream not found"))},A.prototype._addStream=function(e){this.peerconnection.addStream(e),this._addedStreams.push(e)},A.prototype._removeStream=function(e){this.peerconnection.removeStream(e),this._addedStreams=this._addedStreams.filter(function(t){return t!==e})},A.prototype._assertTrackBelongs=function(e,t){var n=this.localTracks.has(t.rtcId);return n||R.error(e+": "+t+" does not belong to "+this),n},A.prototype.isMediaStreamInPc=function(e){return this._addedStreams.indexOf(e)>-1},A.prototype.removeTrack=function(e){var t=e.getOriginalStream();this.trace("removeStream",e.rtcId,t?t.id:void 0),this._assertTrackBelongs("removeStream",e)&&(this.localTracks.delete(e.rtcId),this.localSSRCs.delete(e.rtcId),t&&this.peerconnection.removeStream(t))},A.prototype.findSenderByKind=function(e){return this.peerconnection.getSenders().find(function(t){return t.track&&t.track.kind===e})},A.prototype.findReceiverForTrack=function(e){return this.peerconnection.getReceivers().find(function(t){return t.track===e})},A.prototype.findSenderForTrack=function(e){return this.peerconnection.getSenders().find(function(t){return t.track===e})},A.prototype.replaceTrack=function(e,t){var n=this;if(p.a.usesUnifiedPlan())return this.tpcUtils.replaceTrack(e,t).then(function(){return n.isSimulcastOn()&&p.a.usesSdpMungingForSimulcast()});var r=Promise.resolve();return e&&this.removeTrack(e),t&&(r=this.addTrack(t)),r.then(function(){return!0})},A.prototype.removeTrackMute=function(e){var t=e.getOriginalStream();return this.trace("removeStreamMute",e.rtcId,t?t.id:null),this._assertTrackBelongs("removeStreamMute",e)?p.a.usesUnifiedPlan()?this.tpcUtils.removeTrackMute(e):t?(R.info("Removing "+e+" as mute from "+this),this._removeStream(t),Promise.resolve(!0)):(R.error("removeStreamMute - no WebRTC stream for "+e),Promise.reject("Stream not found")):Promise.reject("Track not found in the peerconnection")},A.prototype.createDataChannel=function(e,t){return this.trace("createDataChannel",e,t),this.peerconnection.createDataChannel(e,t)},A.prototype._ensureSimulcastGroupIsLast=function(e){var t=e.sdp,n=t.indexOf("m=video"),r=t.indexOf("a=ssrc-group:SIM",n),i=t.lastIndexOf("a=ssrc-group");if(-1===r||-1===i||i===r)return e;var o=t.indexOf("\r\n",r),a=t.substring(r,o+2);i=(t=t.replace(a,"")).lastIndexOf("a=ssrc-group");var s=t.indexOf("\r\n",i);return t=t.slice(0,s)+"\r\n"+a.trim()+t.slice(s),new RTCSessionDescription({type:e.type,sdp:t})},A.prototype._adjustLocalMediaDirection=function(e){var t=new y.a(e.sdp),n=!1,r=t.selectMedia("audio");if(r){var i=this._getDesiredMediaDirection(c.a);r.direction!==i&&(r.direction=i,R.info("Adjusted local audio direction to "+i),n=!0)}else R.warn('No "audio" media found int the local description');var o=t.selectMedia("video");if(o){var a=this._getDesiredMediaDirection(c.c);o.direction!==a&&(o.direction=a,R.info("Adjusted local video direction to "+a),n=!0)}else R.warn('No "video" media found in the local description');return n?new RTCSessionDescription({type:e.type,sdp:t.toRawSDP()}):e},A.prototype.setLocalDescription=function(e){var t=this,n=e;return this.trace("setLocalDescription::preTransform",k(n)),n=this._mungeCodecOrder(n),p.a.usesPlanB()?(n=this._adjustLocalMediaDirection(n),n=this._ensureSimulcastGroupIsLast(n)):(n=this.interop.toUnifiedPlan(n),this.trace("setLocalDescription::postTransform (Unified Plan)",k(n))),new Promise(function(e,r){t.peerconnection.setLocalDescription(n).then(function(){t.trace("setLocalDescriptionOnSuccess");var r=g.a.getUfrag(n.sdp);r!==t.localUfrag&&(t.localUfrag=r,t.eventEmitter.emit(d.a.LOCAL_UFRAG_CHANGED,t,r)),e()},function(e){t.trace("setLocalDescriptionOnFailure",e),t.eventEmitter.emit(d.a.SET_LOCAL_DESCRIPTION_FAILED,e,t),r(e)})})},A.prototype.setAudioTransferActive=function(e){R.debug(this+" audio transfer active: "+e);var t=this.audioTransferActive!==e;return this.audioTransferActive=e,p.a.usesUnifiedPlan()?(this.tpcUtils.setAudioTransferActive(e),!1):t},A.prototype.setSenderVideoDegradationPreference=function(){if(!this.peerconnection.getSenders)return R.debug("Browser does not support RTCRtpSender"),Promise.resolve();var e=this.getLocalVideoTrack(),t=this.findSenderByKind(c.c);if(!t)return Promise.resolve();var n=t.getParameters();if(!n.encodings||!n.encodings.length)return Promise.resolve();for(var r in n.encodings)if(n.encodings.hasOwnProperty(r)){var i=e.videoType===h.CAMERA?"maintain-framerate":"maintain-resolution";R.info("Setting video sender degradation preference on "+this+" to "+i),n.encodings[r].degradationPreference=i}return t.setParameters(n)},A.prototype.setMaxBitRate=function(){if(!this.peerconnection.getSenders)return R.debug("Browser doesn't support RTCRtpSender"),Promise.resolve();var e=this.getLocalVideoTrack();if(!e)return Promise.resolve();var t=e.videoType;if(!(this.options.videoQuality&&this.options.videoQuality.maxBitratesVideo||p.a.usesPlanB()&&this.options.capScreenshareBitrate&&t===h.DESKTOP||p.a.usesUnifiedPlan()))return Promise.resolve();var n=e._originalStream&&e._originalStream.id!==e.getStreamId(),r=this.findSenderByKind(c.c);if(!r)return Promise.resolve();var i=r.getParameters();if(!i.encodings||!i.encodings.length)return Promise.resolve();if(this.isSimulcastOn()){for(var o in i.encodings)if(i.encodings.hasOwnProperty(o)){var a=p.a.usesPlanB()&&t===h.DESKTOP&&this.options.capScreenshareBitrate?n?this.videoBitrates.high:5e5:this.tpcUtils.localStreamEncodingsConfig[o].maxBitrate;R.info(this+" Setting a max bitrate of "+a+" bps on layer "+this.tpcUtils.localStreamEncodingsConfig[o].rid),i.encodings[o].maxBitrate=a}}else{var s=this.videoBitrates.high;if(t===h.CAMERA){var u=this.senderVideoMaxHeight?Math.floor(e.resolution/this.senderVideoMaxHeight):1,d=this.tpcUtils.localStreamEncodingsConfig.find(function(e){return e.scaleResolutionDownBy===u});d&&(R.info(this+" Setting a max bitrate of "+d.maxBitrate+" bps on local video track"),s=d.maxBitrate)}i.encodings[0].maxBitrate=s}return r.setParameters(i)},A.prototype.setRemoteDescription=function(e){var t=this;if(this.trace("setRemoteDescription::preTransform",k(e)),e=this._mungeCodecOrder(e),p.a.usesPlanB())this.isSimulcastOn()&&(e=this.simulcast.mungeRemoteDescription(e),this.trace("setRemoteDescription::postTransform (simulcast)",k(e))),e=I(e);else{var n=this.peerconnection.remoteDescription;e=this.interop.toUnifiedPlan(e,n),this.trace("setRemoteDescription::postTransform (Unified)",k(e)),this.isSimulcastOn()&&(e=this.simulcast.mungeRemoteDescription(e),e=this.tpcUtils.insertUnifiedPlanSimulcastReceive(e),this.trace("setRemoteDescription::postTransform (sim receive)",k(e)),e=this.tpcUtils.ensureCorrectOrderOfSsrcs(e))}return new Promise(function(n,r){t.peerconnection.setRemoteDescription(e).then(function(){t.trace("setRemoteDescriptionOnSuccess");var r=g.a.getUfrag(e.sdp);r!==t.remoteUfrag&&(t.remoteUfrag=r,t.eventEmitter.emit(d.a.REMOTE_UFRAG_CHANGED,t,r)),n()},function(e){t.trace("setRemoteDescriptionOnFailure",e),t.eventEmitter.emit(d.a.SET_REMOTE_DESCRIPTION_FAILED,e,t),r(e)})})},A.prototype.setSenderVideoConstraint=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t<0)throw new Error("Invalid frameHeight: "+t);if(p.a.isReactNative())return Promise.resolve();var n=null===t?this.senderVideoMaxHeight:t;this.senderVideoMaxHeight=n,R.log(this+" senderVideoMaxHeight: "+n);var r=this.getLocalVideoTrack();if(!r||r.isMuted()||r.videoType!==h.CAMERA)return Promise.resolve();var i=this.findSenderByKind(c.c);if(!i)return Promise.resolve();var o=i.getParameters();if(!o||!o.encodings||!o.encodings.length)return Promise.resolve();if(this.isSimulcastOn()){var a=this.tpcUtils.getLocalStreamHeightConstraints(r.track).map(function(e){return e<=n}),s=this.tpcUtils.localStreamEncodingsConfig.findIndex(function(e){return 4===e.scaleResolutionDownBy});for(var u in n>0&&-1!==s&&(a[s]=!0),o.encodings)o.encodings.hasOwnProperty(u)&&(o.encodings[u].active=a[u])}else n>0?(o.encodings[0].scaleResolutionDownBy=r.resolution>=n?Math.floor(r.resolution/n):1,o.encodings[0].active=!0):(o.encodings[0].scaleResolutionDownBy=void 0,o.encodings[0].active=!1);return R.info(this+" setting max height of "+n+", encodings: "+JSON.stringify(o.encodings)),i.setParameters(o).then(function(){if(r.maxEnabledResolution=n,e.eventEmitter.emit(d.a.LOCAL_TRACK_MAX_ENABLED_RESOLUTION_CHANGED,r),e.isP2P||!e.isSimulcastOn())return e.setMaxBitRate()})},A.prototype.setVideoTransferActive=function(e){R.debug(this+" video transfer active: "+e);var t=this.videoTransferActive!==e;return this.videoTransferActive=e,p.a.usesUnifiedPlan()?(this.tpcUtils.setVideoTransferActive(e),!1):t},A.prototype.sendTones=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;if(!this._dtmfSender){if(this.peerconnection.getSenders){var r=this.peerconnection.getSenders().find(function(e){return e.dtmf});this._dtmfSender=r&&r.dtmf,this._dtmfSender&&R.info(this+" initialized DTMFSender using getSenders")}if(!this._dtmfSender){var i=Array.from(this.localTracks.values()).find(function(e){return e.isAudioTrack()});this.peerconnection.createDTMFSender&&i&&(this._dtmfSender=this.peerconnection.createDTMFSender(i.getTrack())),this._dtmfSender&&R.info(this+" initialized DTMFSender using deprecated createDTMFSender")}this._dtmfSender&&(this._dtmfSender.ontonechange=this._onToneChange.bind(this))}if(this._dtmfSender){if(this._dtmfSender.toneBuffer)return void this._dtmfTonesQueue.push({tones:e,duration:t,interToneGap:n});this._dtmfSender.insertDTMF(e,t,n)}else R.warn(this+" sendTones - failed to select DTMFSender")},A.prototype._onToneChange=function(e){if(this._dtmfSender&&""===e.tone&&this._dtmfTonesQueue.length){var t=this._dtmfTonesQueue.shift(),n=t.tones,r=t.duration,i=t.interToneGap;this._dtmfSender.insertDTMF(n,r,i)}},A.prototype.generateRecvonlySsrc=function(){var e=g.a.generateSsrc();R.info(this+" generated new recvonly SSRC: "+e),this.sdpConsistency.setPrimarySsrc(e)},A.prototype.clearRecvonlySsrc=function(){R.info("Clearing primary video SSRC!"),this.sdpConsistency.clearVideoSsrcCache()},A.prototype.close=function(){this.trace("stop"),this.signalingLayer.off(l.a,this._peerMutedChanged),this.signalingLayer.off(l.b,this._peerVideoTypeChanged);for(var e,t=_createForOfIteratorHelperLoose(this.remoteTracks.values());!(e=t()).done;)for(var n,r=_createForOfIteratorHelperLoose(e.value.values());!(n=r()).done;){var i=n.value;this._removeRemoteTrack(i)}this.remoteTracks.clear(),this._addedStreams=[],this._dtmfSender=null,this._dtmfTonesQueue=[],this.rtc._removePeerConnection(this)||R.error("RTC._removePeerConnection returned false"),null!==this.statsinterval&&(window.clearInterval(this.statsinterval),this.statsinterval=null),R.info("Closing "+this+"..."),this.peerconnection.close()},A.prototype.createAnswer=function(e){return this._createOfferOrAnswer(!1,e)},A.prototype.createOffer=function(e){return this._createOfferOrAnswer(!0,e)},A.prototype._createOfferOrAnswer=function(e,t){var n=this,r=e?"Offer":"Answer";this.trace("create"+r,JSON.stringify(t,null," "));var i=function(e,t,i){try{n.trace("create"+r+"OnSuccess::preTransform",k(e)),p.a.usesPlanB()&&(n.hasAnyTracksOfType(c.c)||n.sdpConsistency.hasPrimarySsrcCached()||n.generateRecvonlySsrc(),e=new RTCSessionDescription({type:e.type,sdp:n.sdpConsistency.makeVideoPrimarySsrcsConsistent(e.sdp)}),n.trace("create"+r+"OnSuccess::postTransform (make primary audio/video ssrcs consistent)",k(e))),n.isSimulcastOn()&&p.a.usesSdpMungingForSimulcast()&&(!n.options.capScreenshareBitrate||n.options.capScreenshareBitrate&&P(n))&&(e=n.simulcast.mungeLocalDescription(e),n.trace("create"+r+"OnSuccess::postTransform (simulcast)",k(e))),!n.options.disableRtx&&p.a.usesSdpMungingForSimulcast()&&(e=new RTCSessionDescription({type:e.type,sdp:n.rtxModifier.modifyRtxSsrcs(e.sdp)}),n.trace("create"+r+"OnSuccess::postTransform (rtx modifier)",k(e)));var o=(function(e){var t=new Map,n=new Map;if("object"!=typeof e||null===e||"string"!=typeof e.sdp)return R.warn("An empty description was passed as an argument."),t;var r=a.a.parse(e.sdp);if(!Array.isArray(r.media))return t;for(var i,o=_createForOfIteratorHelperLoose(r.media);!(i=o()).done;){var s=i.value;if(Array.isArray(s.ssrcs)){if(Array.isArray(s.ssrcGroups))for(var c,u=_createForOfIteratorHelperLoose(s.ssrcGroups);!(c=u()).done;){var d=c.value;if(void 0!==d.semantics&&void 0!==d.ssrcs){var l=d.ssrcs.split(" ").map(function(e){return parseInt(e,10)}),h=l[0];d.ssrcs=l,n.has(h)||n.set(h,[]),n.get(h).push(d)}}for(var p,f=_createForOfIteratorHelperLoose(s.ssrcs);!(p=f()).done;){var m=p.value;if("msid"===m.attribute){var v=m.value,g=t.get(v);g||(g={ssrcs:[],groups:[],msid:v},t.set(v,g));var _=m.id;if(g.ssrcs.push(_),n.has(_))for(var y,S=_createForOfIteratorHelperLoose(n.get(_));!(y=S()).done;){var E=y.value;g.groups.push(E)}}}}}return t})(e);R.debug("Got local SSRCs MAP: ",o),n._processLocalSSRCsMap(o),t(e)}catch(t){n.trace("create"+r+"OnError",t),n.trace("create"+r+"OnError",k(e)),R.error("create"+r+"OnError",t,k(e)),i(t)}},o=function(t,i){n.trace("create"+r+"OnFailure",t);var o=e?d.a.CREATE_OFFER_FAILED:d.a.CREATE_ANSWER_FAILED;n.eventEmitter.emit(o,t,n),i(t)};return new Promise(function(r,a){(e?n.peerconnection.createOffer(t):n.peerconnection.createAnswer(t)).then(function(e){return i(e,r,a)},function(e){return o(e,a)})})},A.prototype._extractPrimarySSRC=function(e){return e&&e.groups&&e.groups.length?e.groups[0].ssrcs[0]:e&&e.ssrcs&&e.ssrcs.length?e.ssrcs[0]:null},A.prototype._processLocalSSRCsMap=function(e){for(var t,n=_createForOfIteratorHelperLoose(this.localTracks.values());!(t=n()).done;){var r=t.value,i=r.storedMSID;if(e.has(i)){var o=e.get(i);if(!o)return void R.error("No SSRC found for: "+i+" in "+this);var a=this.localSSRCs.get(r.rtcId),s=this._extractPrimarySSRC(o),c=this._extractPrimarySSRC(a);s!==c?(null===c?R.info("Storing new local SSRC for "+r+" in "+this,o):R.error("Overwriting SSRC for "+r+" "+i+" in "+this+" with: ",o),this.localSSRCs.set(r.rtcId,o),this.eventEmitter.emit(d.a.LOCAL_TRACK_SSRC_UPDATED,r,s)):R.debug("The local SSRC("+s+") for "+r+" "+i+"is still up to date in "+this)}else r.isVideoTrack()||r.isMuted()||R.warn("No SSRCs found in the local SDP for "+r+" MSID: "+i+" in "+this)}},A.prototype.addIceCandidate=function(e){return this.trace("addIceCandidate",JSON.stringify({candidate:e.candidate,sdpMid:e.sdpMid,sdpMLineIndex:e.sdpMLineIndex,usernameFragment:e.usernameFragment},null," ")),this.peerconnection.addIceCandidate(e)},A.prototype.getStats=function(e,t){p.a.isSafari()||p.a.isFirefox()||p.a.isReactNative()?this.peerconnection.getStats().then(e).catch(t||function(){}):this.peerconnection.getStats(e)},A.prototype.generateNewStreamSSRCInfo=function(e){var t=e.rtcId,n=this._getSSRC(t);if(n&&R.error("Will overwrite local SSRCs for track ID: "+t),this.isSimulcastOn()&&(!this.options.capScreenshareBitrate||this.options.capScreenshareBitrate&&P(this))){n={ssrcs:[],groups:[]};for(var r=0;r<T.a.length;r++)n.ssrcs.push(g.a.generateSsrc());n.groups.push({ssrcs:n.ssrcs.slice(),semantics:"SIM"})}else n={ssrcs:[g.a.generateSsrc()],groups:[]};if(!this.options.disableRtx)for(var i=n.ssrcs.length,o=0;o<i;++o){var a=n.ssrcs[o],s=g.a.generateSsrc();n.ssrcs.push(s),n.groups.push({ssrcs:[a,s],semantics:"FID"})}return n.msid=e.storedMSID,this.localSSRCs.set(t,n),n},A.prototype.toString=function(){return"TPC["+this.id+",p2p:"+this.isP2P+"]"}}).call(this,"modules/RTC/TraceablePeerConnection.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c});var r=n(4),i=n(9),o=n(29),a=Object(r.getLogger)(e);function s(e,t,n){a.debug("Updating mline to associate "+n+"rtx ssrc with primary stream, "+t.id);var r=t.id,i=t.msid,o=t.cname,s=e.getRtxSSRC(r);s!==n?(s&&(a.debug(r+" was previously associated with rtx"+s+", removing all references to it"),e.removeSSRC(s),a.debug("groups before filtering for "+s),a.debug(e.dumpSSRCGroups()),e.removeGroupsWithSSRC(s)),e.addSSRCAttribute({id:n,attribute:"cname",value:o}),e.addSSRCAttribute({id:n,attribute:"msid",value:i}),e.addSSRCGroup({semantics:"FID",ssrcs:r+" "+n})):a.debug(n+" was already associated with "+r)}var c=(function(){function e(){_classCallCheck(this,e),this.correspondingRtxSsrcs=new Map}return _createClass(e,[{key:"clearSsrcCache",value:function(){this.correspondingRtxSsrcs.clear()}},{key:"setSsrcCache",value:function(e){a.debug("Setting ssrc cache to ",e),this.correspondingRtxSsrcs=e}},{key:"modifyRtxSsrcs",value:function(e){var t=new o.a(e),n=t.selectMedia("video");return n?this.modifyRtxSsrcs2(n)?t.toRawSDP():e:(a.debug("No 'video' media found in the sdp: "+e),e)}},{key:"modifyRtxSsrcs2",value:function(e){if("recvonly"===e.direction)return a.debug("RtxModifier doing nothing, video m line is recvonly"),!1;if(e.getSSRCCount()<1)return a.debug("RtxModifier doing nothing, no video ssrcs present"),!1;a.debug("Current ssrc mapping: ",this.correspondingRtxSsrcs);var t=e.getPrimaryVideoSSRCs();a.debug("Parsed primary video ssrcs ",t," making sure all have rtx streams");for(var n,r=_createForOfIteratorHelperLoose(t);!(n=r()).done;){var o=n.value,c=e.getSSRCAttrValue(o,"msid"),u=e.getSSRCAttrValue(o,"cname"),d=this.correspondingRtxSsrcs.get(o);if(d)a.debug("Already have an associated rtx ssrc forvideo ssrc "+o+": "+d);else{a.debug("No previously associated rtx ssrc for video ssrc "+o);var l=e.getRtxSSRC(o);l?(a.debug("Rtx stream "+l+" already existed in the sdp as an rtx stream for "+o),d=l):(d=i.a.generateSsrc(),a.debug("Generated rtx ssrc "+d+" for ssrc "+o)),a.debug("Caching rtx ssrc "+d+" for video ssrc "+o),this.correspondingRtxSsrcs.set(o,d)}s(e,{id:o,cname:u,msid:c},d)}return!0}},{key:"stripRtx",value:function(e){var t=new o.a(e),n=t.selectMedia("video");if(!n)return a.debug("No 'video' media found in the sdp: "+e),e;if("recvonly"===n.direction)return a.debug("RtxModifier doing nothing, video m line is recvonly"),e;if(n.getSSRCCount()<1)return a.debug("RtxModifier doing nothing, no video ssrcs present"),e;if(!n.containsAnySSRCGroups())return a.debug("RtxModifier doing nothing, no video ssrcGroups present"),e;var r=n.findGroups("FID");n.removeGroupsBySemantics("FID");for(var i,s=_createForOfIteratorHelperLoose(r);!(i=s()).done;){var c=i.value,u=Object(o.c)(c);n.removeSSRC(u)}return t.toRawSDP()}}]),e})()}).call(this,"modules/xmpp/RtxModifier.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var r=n(4),i=n(29),o=Object(r.getLogger)(e),a=(function(){function e(t){_classCallCheck(this,e),this.clearVideoSsrcCache(),this.logPrefix=t}return _createClass(e,[{key:"clearVideoSsrcCache",value:function(){this.cachedPrimarySsrc=null,this.injectRecvOnly=!1}},{key:"setPrimarySsrc",value:function(e){if("number"!=typeof e)throw new Error("Primary SSRC must be a number!");this.cachedPrimarySsrc=e}},{key:"hasPrimarySsrcCached",value:function(){return Boolean(this.cachedPrimarySsrc)}},{key:"makeVideoPrimarySsrcsConsistent",value:function(e){var t=new i.a(e),n=t.selectMedia("video");if(!n)return o.debug(this.logPrefix+" no 'video' media found in the sdp: "+e),e;if("recvonly"===n.direction)this.cachedPrimarySsrc&&this.injectRecvOnly?n.addSSRCAttribute({id:this.cachedPrimarySsrc,attribute:"cname",value:"recvonly-"+this.cachedPrimarySsrc}):o.info(this.logPrefix+" no SSRC found for the recvonly videostream!");else{var r=n.getPrimaryVideoSsrc();if(!r)return o.info(this.logPrefix+" sdp-consistency couldn't parse new primary ssrc"),e;if(this.cachedPrimarySsrc){o.info(this.logPrefix+" sdp-consistency replacing new ssrc"+r+" with cached "+this.cachedPrimarySsrc),n.replaceSSRC(r,this.cachedPrimarySsrc);for(var a,s=_createForOfIteratorHelperLoose(n.ssrcGroups);!(a=s()).done;){var c=a.value;if("FID"===c.semantics){var u=Object(i.b)(c),d=Object(i.c)(c);u===r&&(c.ssrcs=this.cachedPrimarySsrc+" "+d)}}}else this.cachedPrimarySsrc=r,o.info(this.logPrefix+" sdp-consistency caching primary ssrc"+this.cachedPrimarySsrc);this.injectRecvOnly=!0}return t.toRawSDP()}}]),e})()}).call(this,"modules/xmpp/SdpConsistency.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return h});var r=n(15),i=n(7),o=n(5),a=n(64),s=n(4).getLogger(e),c=n(6),u=!1,d=!1,l=["abort","canplay","canplaythrough","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","ratechange","stalled","suspend","waiting"],h=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o,a,c,u,d,h,p){var f;if(_classCallCheck(this,n),(f=t.call(this,r,o,a,function(){},c,u)).rtc=e,"number"!=typeof d)throw new TypeError("SSRC "+d+" is not a number");return f.ssrc=d,f.ownerEndpointId=i,f.muted=h,f.isP2P=p,s.debug("New remote track added: "+_assertThisInitialized(f)),f.hasBeenMuted=h,f.rtc&&f.track&&f._bindTrackHandlers(),f._containerHandlers={},l.forEach(function(e){f._containerHandlers[e]=f._containerEventHandler.bind(_assertThisInitialized(f),e)}),_possibleConstructorReturn(f)}return _createClass(n,[{key:"_bindTrackHandlers",value:function(){var e=this;this.track.addEventListener("mute",function(){return e._onTrackMute()}),this.track.addEventListener("unmute",function(){return e._onTrackUnmute()}),this.track.addEventListener("ended",function(){s.debug("\"onended\" event("+Date.now()+"): "+e)})}},{key:"_onTrackMute",value:function(){s.debug("\"onmute\" event("+Date.now()+"): "+this),this.rtc.eventEmitter.emit(c.REMOTE_TRACK_MUTE,this)}},{key:"_onTrackUnmute",value:function(){s.debug("\"onunmute\" event("+Date.now()+"): "+this),this.rtc.eventEmitter.emit(c.REMOTE_TRACK_UNMUTE,this)}},{key:"setMute",value:function(e){this.muted!==e&&(e&&(this.hasBeenMuted=!0),this.stream&&(this.stream.muted=e),this.muted=e,this.emit(r.TRACK_MUTE_CHANGED,this))}},{key:"isMuted",value:function(){return this.muted}},{key:"getParticipantId",value:function(){return this.ownerEndpointId}},{key:"isLocal",value:function(){return!1}},{key:"getSSRC",value:function(){return this.ssrc}},{key:"_setVideoType",value:function(e){this.videoType!==e&&(this.videoType=e,this.emit(r.TRACK_VIDEOTYPE_CHANGED,e))}},{key:"_playCallback",value:function(){var e=this.isVideoTrack()?"video":"audio",t=window.performance.now();console.log("(TIME) Render "+e+":\t",t),this.conference.getConnectionTimes()[e+".render"]=t;var n=window.connectionTimes["obtainPermissions.start"],r=window.connectionTimes["obtainPermissions.end"],a=isNaN(r)||isNaN(n)?0:r-n,s=t-(this.conference.getConnectionTimes()["session.initiate"]-this.conference.getConnectionTimes()["muc.joined"])-a;this.conference.getConnectionTimes()[e+".ttfm"]=s,console.log("(TIME) TTFM "+e+":\t",s),o.a.sendAnalytics(Object(i.N)({media_type:e,muted:this.hasBeenMuted,value:s}))}},{key:"_attachTTFMTracker",value:function(e){u&&this.isAudioTrack()||d&&this.isVideoTrack()||(this.isAudioTrack()&&(u=!0),this.isVideoTrack()&&(d=!0),e.addEventListener("canplay",this._playCallback.bind(this)))}},{key:"_onTrackAttach",value:function(e){var t=this;s.debug("Track has been attached to a container: "+this),l.forEach(function(n){e.addEventListener(n,t._containerHandlers[n])})}},{key:"_onTrackDetach",value:function(e){var t=this;s.debug("Track has been detached from a container: "+this),l.forEach(function(n){e.removeEventListener(n,t._containerHandlers[n])})}},{key:"_containerEventHandler",value:function(e){s.debug(e+" handler was called for a container with attached "+this)}},{key:"_getStatus",value:function(){var e=this.track,t=e.enabled,n=e.muted;return"readyState: "+e.readyState+", muted: "+n+", enabled: "+t}},{key:"toString",value:function(){return"RemoteTrack[userID: "+this.getParticipantId()+", type: "+this.getType()+", ssrc: "+this.getSSRC()+", p2p: "+this.isP2P+", status: "+this._getStatus()+"]"}}]),n})(a.a)}).call(this,"modules/RTC/JitsiRemoteTrack.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var r=n(4),i=n(8),o=n(29),a=Object(r.getLogger)(e),s=(function(){function e(t){_classCallCheck(this,e),this.tpc=t}return _createClass(e,[{key:"_addMutedLocalVideoTracksToSDP",value:function(e){var t=this.tpc.getLocalTracks(i.c);if(!t.length)return!1;1!==t.length&&a.error(this.tpc+" there is more than 1 video track ! Strange things may happen !",t);var n=e.selectMedia("video");if(!n)return a.debug(this.tpc+' unable to hack local video track SDP- no "video" media'),!1;for(var r,o=!1,s=_createForOfIteratorHelperLoose(t);!(r=s()).done;){var c=r.value,u=c.isMuted(),d=c.getOriginalStream(),l=d&&this.tpc.isMediaStreamInPc(d),h=u||!l;if(a.debug(this.tpc+" "+c+" muted: "+u+", is in PeerConnection: "+l+" => should fake sdp ? : "+h),h){var p=this.tpc.isSimulcastOn()?this.tpc.simulcast.ssrcCache:[this.tpc.sdpConsistency.cachedPrimarySsrc];if(p.length){o=!0,n.direction="sendrecv";for(var f,m="injected-"+p[0],v=_createForOfIteratorHelperLoose(p);!(f=v()).done;){var g=f.value;n.removeSSRC(g),a.debug(this.tpc+" injecting video SSRC: "+g+" for "+c),n.addSSRCAttribute({id:g,attribute:"cname",value:m}),n.addSSRCAttribute({id:g,attribute:"msid",value:c.storedMSID})}if(p.length>1){var _={ssrcs:p.join(" "),semantics:"SIM"};n.findGroup(_.semantics,_.ssrcs)||(a.debug(this.tpc+" injecting SIM group for "+c,_),n.addSSRCGroup(_))}this.tpc.options.disableRtx||this.tpc.rtxModifier.modifyRtxSsrcs2(n)}else a.error("No SSRCs stored for: "+c+" in "+this.tpc)}}return o}},{key:"_transformMediaIdentifiers",value:function(e){for(var t,n=this.tpc.id,r=_createForOfIteratorHelperLoose(e.ssrcs);!(t=r()).done;){var i=t.value;switch(i.attribute){case"cname":case"label":case"mslabel":i.value=i.value&&i.value+"-"+n;break;case"msid":if(i.value){var o=i.value.split(" ");if(2===o.length){var s=o[0],c=o[1];i.value=s+"-"+n+" "+c+"-"+n}else a.warn("Unable to munge local MSID- weird format detected: "+i.value)}}}}},{key:"maybeAddMutedLocalVideoTracksToSDP",value:function(e){if(!e)throw new Error("No local description passed in.");var t=new o.a(e.sdp);return this._addMutedLocalVideoTracksToSDP(t)?new RTCSessionDescription({type:e.type,sdp:t.toRawSDP()}):e}},{key:"transformStreamIdentifiers",value:function(e){if(!e||!e.sdp||!e.type)return e;var t=new o.a(e.sdp),n=t.selectMedia("audio");n&&this._transformMediaIdentifiers(n);var r=t.selectMedia("video");return r&&this._transformMediaIdentifiers(r),new RTCSessionDescription({type:e.type,sdp:t.toRawSDP()})}}]),e})()}).call(this,"modules/RTC/LocalSdpMunger.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return m});var r=n(4),i=n(1),o=n(6),a=n(30),s=n(34),c=n(13),u=n(0),d=Object(r.getLogger)(e),l=[{width:1920,height:1080,layers:3,max:5e3,target:4e3,min:800},{width:1280,height:720,layers:3,max:2500,target:2500,min:600},{width:960,height:540,layers:3,max:900,target:900,min:450},{width:640,height:360,layers:2,max:700,target:500,min:150},{width:480,height:270,layers:2,max:450,target:350,min:150},{width:320,height:180,layers:1,max:200,target:150,min:30}],h=800,p=null;function f(e,t,n){if(n<15e3)return 1;var r=0,i=Math.min(t.height,t.width);if(e){var o=l.find(function(e){return e.height<=i});if(o){var a=function(){var e=i;if(!(o=l.find(function(t){return t.height===e})))return"break";r+=o.target};for(i=o.height;i>=180;i/=2){if("break"===a())break}}}else{var s=t.width*t.height;r=s<=76800?600:s<=307200?1700:s<=518400?2e3:2500}return Math.min(r,(function(e){return e>6e4?Number.MAX_SAFE_INTEGER:h*Math.pow(1.08,e/1e3)})(Math.max(0,n-1e3)))}var m=(function(){function e(t,n,r){var s=this;_classCallCheck(this,e),this.eventEmitter=n,this._conference=t,this._localStats={connectionQuality:100,jvbRTT:void 0},this._lastConnectionQualityUpdate=-1,this._remoteStats={},this._timeIceConnected=-1,this._timeVideoUnmuted=-1,this._timeLastBwCapRemoved=-1,r.config.startBitrate&&r.config.startBitrate>0&&(h=r.config.startBitrate),t.on(i.CONNECTION_INTERRUPTED,function(){s._updateLocalConnectionQuality(0),s.eventEmitter.emit(a.LOCAL_STATS_UPDATED,s._localStats),s._broadcastLocalStats()}),t.room.addListener(u.ICE_CONNECTION_STATE_CHANGED,function(e,t){e.isP2P||"connected"!==t||(s._timeIceConnected=window.performance.now())}),t.on(i.ENDPOINT_MESSAGE_RECEIVED,function(e,t){"stats"===t.type&&s._updateRemoteStats(e.getId(),t.values)}),t.statistics.addConnectionStatsListener(this._updateLocalStats.bind(this)),t.on(i.TRACK_MUTE_CHANGED,function(e){e.isVideoTrack()&&(e.isMuted()?s._timeVideoUnmuted=-1:s._maybeUpdateUnmuteTime())}),t.on(i.TRACK_ADDED,function(e){e.isVideoTrack()&&!e.isMuted()&&s._maybeUpdateUnmuteTime()}),t.rtc.on(o.LOCAL_TRACK_MAX_ENABLED_RESOLUTION_CHANGED,function(e){s._localStats.maxEnabledResolution=e.maxEnabledResolution}),t.on(i.SERVER_REGION_CHANGED,function(e){s._localStats.serverRegion=e}),t.on(i.PROPERTIES_CHANGED,function(e){s._localStats.bridgeCount=Number((e||{})["bridge-count"])})}return _createClass(e,[{key:"_maybeUpdateUnmuteTime",value:function(){this._timeVideoUnmuted<0&&(this._timeVideoUnmuted=window.performance.now())}},{key:"_calculateConnectionQuality",value:function(e,t,n){var r,i=s[n],o=100;if(this._localStats.packetLoss&&(r=this._localStats.packetLoss.upload,t&&(r*=.5)),t||!i||e===c.DESKTOP||this._timeIceConnected<0||this._timeVideoUnmuted<0)void 0===r?(d.error("Cannot calculate connection quality, unknown packet loss."),o=100):o=r<=2?100:r<=4?70:r<=6?50:r<=8?30:r<=12?10:0;else{var a=this._conference.getActivePeerConnection(),u=Boolean(a&&a.isSimulcastOn()),l=a&&a.bandwidthLimiter&&a.bandwidthLimiter.getBandwidthLimit("video");!l&&p&&(this._timeLastBwCapRemoved=window.performance.now(),h=p),p=l;var m=f(u,i,window.performance.now()-Math.max(this._timeVideoUnmuted,this._timeIceConnected,this._timeLastBwCapRemoved));m=Math.min(.9*m,2500),p&&(m=Math.min(m,p)),o=100*this._localStats.bitrate.upload/m,r&&r>=10&&(o=Math.min(o,30))}if(this._lastConnectionQualityUpdate>0){var v=this._localStats.connectionQuality,g=(window.performance.now()-this._lastConnectionQualityUpdate)/1e3;o=Math.min(o,v+2*g)}return Math.min(100,o)}},{key:"_updateLocalConnectionQuality",value:function(e){this._localStats.connectionQuality=e,this._lastConnectionQualityUpdate=window.performance.now()}},{key:"_broadcastLocalStats",value:function(){var e={bitrate:this._localStats.bitrate,packetLoss:this._localStats.packetLoss,connectionQuality:this._localStats.connectionQuality,jvbRTT:this._localStats.jvbRTT,serverRegion:this._localStats.serverRegion,maxEnabledResolution:this._localStats.maxEnabledResolution,avgAudioLevels:this._localStats.localAvgAudioLevels};try{this._conference.broadcastEndpointMessage({type:"stats",values:e})}catch(e){}}},{key:"_updateLocalStats",value:function(e,t){if(!e.isP2P){var n=t.transport&&t.transport.length&&t.transport[0].rtt;this._localStats.jvbRTT=n||void 0}if(e===this._conference.getActivePeerConnection()){var r,i=!this._conference.isConnectionInterrupted(),o=this._conference.getLocalVideoTrack(),s=o?o.videoType:void 0,c=!o||o.isMuted(),u=o?Math.min(o.resolution,o.maxEnabledResolution):null;for(r in c||this._maybeUpdateUnmuteTime(),t)t.hasOwnProperty(r)&&(this._localStats[r]=t[r]);i&&this._updateLocalConnectionQuality(this._calculateConnectionQuality(s,c,u)),this.eventEmitter.emit(a.LOCAL_STATS_UPDATED,this._localStats),this._broadcastLocalStats()}}},{key:"_updateRemoteStats",value:function(e,t){this._remoteStats[e]={bitrate:t.bitrate,packetLoss:t.packetLoss,connectionQuality:t.connectionQuality,jvbRTT:t.jvbRTT,serverRegion:t.serverRegion,maxEnabledResolution:t.maxEnabledResolution,avgAudioLevels:t.avgAudioLevels},this.eventEmitter.emit(a.REMOTE_STATS_UPDATED,e,this._remoteStats[e])}},{key:"getStats",value:function(){return this._localStats}}]),e})()}).call(this,"modules/connectivity/ConnectionQuality.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var r=n(4),i=n(16),o=n(1),a=Object(r.getLogger)(e),s=(function(){function e(t){_classCallCheck(this,e),this._conference=t}return _createClass(e,[{key:"_actOnIceFailed",value:function(){var e=this._conference.options.config.enableIceRestart,t=void 0!==e&&!e,n=this._conference.room.supportsRestartByTerminate(),r=n&&!e;if(a.info("ICE failed, enableIceRestart: "+e+", supports restart by terminate: "+n),t||!e&&!n)return a.info("ICE failed, but ICE restarts are disabled"),void this._conference.eventEmitter.emit(o.CONFERENCE_FAILED,i.ICE_FAILED);var s=this._conference.jvbJingleSession,c=s&&s.getIceConnectionState();s?"connected"===c?a.info("ICE connection restored - not sending ICE failed"):(a.info("Sending ICE failed - the connection did not recover, ICE state: "+c+", use 'session-terminate': "+r),r?this._conference.jvbJingleSession.terminate(function(){a.info("session-terminate for ice restart - done")},function(e){a.error("session-terminate for ice restart - error: "+e.message)},{reason:"connectivity-error",reasonDescription:"ICE FAILED",requestRestart:!0,sendSessionTerminate:!0}):this._conference.jvbJingleSession.sendIceFailedNotification()):a.warn("Not sending ICE failed - no JVB connection")}},{key:"start",value:function(){var e=this;this._conference.xmpp.ping(65e3).then(function(){e._canceled||(e._iceFailedTimeout=window.setTimeout(function(){e._iceFailedTimeout=void 0,e._actOnIceFailed()},2e3))},function(e){a.error("PING error/timeout - not sending ICE failed",e)})}},{key:"cancel",value:function(){this._canceled=!0,window.clearTimeout(this._iceFailedTimeout)}}]),e})()}).call(this,"modules/connectivity/IceFailedHandling.js")},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(19),i=n.n(r),o=n(1),a=n(15),s=n(3),c=n(22),u=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._conference=e,r._timeoutTrigger=null,r._hasAudioInput=null,s.a.supportsReceiverStats()||e.statistics.addAudioLevelListener(r._audioLevel.bind(_assertThisInitialized(r))),e.on(o.TRACK_ADDED,r._trackAdded.bind(_assertThisInitialized(r))),r}return _createClass(n,[{key:"_clearTriggerTimeout",value:function(){clearTimeout(this._timeoutTrigger),this._timeoutTrigger=null}},{key:"_handleAudioInputStateChange",value:function(e){var t=0!==e;null!==this._hasAudioInput&&this._hasAudioInput===t||(this._hasAudioInput=t,this.emit(c.AUDIO_INPUT_STATE_CHANGE,this._hasAudioInput))}},{key:"_handleNoAudioInputDetection",value:function(e){var t=this;this._eventFired||(0!==e||this._timeoutTrigger?0!==e&&this._timeoutTrigger&&this._clearTriggerTimeout():this._timeoutTrigger=setTimeout(function(){t._eventFired=!0,t.emit(c.NO_AUDIO_INPUT)},4e3))}},{key:"_audioLevel",value:function(e,t,n,r){if(r&&this._audioTrack){var i=e.localSSRCs.get(this._audioTrack.rtcId);i&&i.ssrcs.includes(t)&&(this._handleAudioInputStateChange(n),this._handleNoAudioInputDetection(n))}}},{key:"_trackAdded",value:function(e){var t=this;e.isLocalAudioTrack()&&(this._audioTrack=e,this._eventFired=!1,this._clearTriggerTimeout(),s.a.supportsReceiverStats()&&(e.on(a.NO_AUDIO_INPUT,function(e){t._handleNoAudioInputDetection(e)}),e.on(a.TRACK_AUDIO_LEVEL_CHANGED,function(e){t._handleNoAudioInputDetection(e),t._handleAudioInputStateChange(e)})))}}]),n})(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),i=n(6),o=n.n(i),a=(function(){function e(t){_classCallCheck(this,e),this.conference=t,t.addEventListener(r.TRACK_AUDIO_LEVEL_CHANGED,this._audioLevel.bind(this)),this.myUserID=this.conference.myUserId()}return _createClass(e,[{key:"_audioLevel",value:function(e,t){!this.conference.isP2PActive()||t<=.6||e===this.myUserID&&this.conference.getLocalAudioTrack().isMuted()||this.conference.rtc.eventEmitter.emit(o.a.DOMINANT_SPEAKER_CHANGED,e)}}]),e})()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(19),i=n(27),o=n(22),a=(function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this))._processing=!1,e._scoreArray=[],e._audioLvlArray=[],e._active=!1,e._calculateNoisyScore=e._calculateNoisyScore.bind(_assertThisInitialized(e)),e}return _createClass(n,[{key:"_calculateNoisyScore",value:function(){var e=Object(i.b)(this._scoreArray),t=Object(i.b)(this._audioLvlArray);e<.2&&t>.04&&(this.emit(o.VAD_NOISY_DEVICE),this._setActiveState(!1)),this.reset()}},{key:"_recordValues",value:function(e,t){this._scoreArray.push(e),this._audioLvlArray.push(t)}},{key:"_setActiveState",value:function(e){this._active=e,this.emit(o.DETECTOR_STATE_CHANGE,this._active)}},{key:"changeMuteState",value:function(e){this._setActiveState(!e),this.reset()}},{key:"isActive",value:function(){return this._active}},{key:"reset",value:function(){this._processing=!1,this._scoreArray=[],this._audioLvlArray=[],clearTimeout(this._processTimeout)}},{key:"processVADScore",value:function(e){if(this._active)if(this._processing){var t=Object(i.c)(e.pcmData);this._recordValues(e.score,Object(i.b)(t))}else if(e.score<.2){var n=Object(i.c)(e.pcmData),r=Object(i.b)(n);r>.02&&(this._processing=!0,this._recordValues(e.score,r),this._processTimeout=setTimeout(this._calculateNoisyScore,1500))}}}]),n})(r.EventEmitter)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(19),i=n(27),o=n(22),a=(function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this))._processing=!1,e._scoreArray=[],e._active=!1,e._calculateVADScore=e._calculateVADScore.bind(_assertThisInitialized(e)),e}return _createClass(n,[{key:"_calculateVADScore",value:function(){Object(i.b)(this._scoreArray)>.6&&(this.emit(o.VAD_TALK_WHILE_MUTED),this._setActiveState(!1)),this.reset()}},{key:"_setActiveState",value:function(e){this._active=e,this.emit(o.DETECTOR_STATE_CHANGE,this._active)}},{key:"changeMuteState",value:function(e){this._setActiveState(e),this.reset()}},{key:"isActive",value:function(){return this._active}},{key:"processVADScore",value:function(e){this._active&&(this._processing?this._scoreArray.push(e.score):e.score>.9&&(this._processing=!0,this._scoreArray.push(e.score),this._processTimeout=setTimeout(this._calculateVADScore,700)))}},{key:"reset",value:function(){this._processing=!1,this._scoreArray=[],clearTimeout(this._processTimeout)}}]),n})(r.EventEmitter)},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return d});var r=n(4),i=n(1),o=n(67),a=n(7),s=n(5),c=Object(r.getLogger)(e),u=(function(){function e(t,n){_classCallCheck(this,e),this.participant=t,this.e2eping=n,this.id=t.getId(),this.requests={},this.lastRequestId=1,this.clearIntervals=this.clearIntervals.bind(this),this.sendRequest=this.sendRequest.bind(this),this.handleResponse=this.handleResponse.bind(this),this.maybeSendAnalytics=this.maybeSendAnalytics.bind(this),this.sendAnalytics=this.sendAnalytics.bind(this),n.isDataChannelOpen&&this.sendRequest(),this.pingInterval=window.setInterval(this.sendRequest,n.pingIntervalMs),this.analyticsInterval=window.setTimeout(this.maybeSendAnalytics,this.e2eping.analyticsIntervalMs)}return _createClass(e,[{key:"clearIntervals",value:function(){this.pingInterval&&window.clearInterval(this.pingInterval),this.analyticsInterval&&window.clearInterval(this.analyticsInterval)}},{key:"sendRequest",value:function(){var e=this.lastRequestId++,t={type:"e2e-ping-request",id:e};this.e2eping.sendMessage(t,this.id),this.requests[e]={id:e,timeSent:window.performance.now()}}},{key:"handleResponse",value:function(e){var t=this.requests[e.id];t&&(t.rtt=window.performance.now()-t.timeSent,this.e2eping.eventEmitter.emit(o.E2E_RTT_CHANGED,this.participant,t.rtt)),this.maybeSendAnalytics()}},{key:"maybeSendAnalytics",value:function(){var e,t,n=window.performance.now(),r=1/0;for(t in this.requests)this.requests.hasOwnProperty(t)&&((e=this.requests[t]).timeSent<n-this.e2eping.analyticsIntervalMs?delete this.requests[t]:e.rtt&&(r=Math.min(r,e.rtt)));r<1/0&&this.sendAnalytics(r)}},{key:"sendAnalytics",value:function(e){s.a.sendAnalytics(Object(a.D)(this.id,this.participant.getProperty("region"),e))}}]),e})(),d=(function(){function e(t,n,r){_classCallCheck(this,e),this.conference=t,this.eventEmitter=t.eventEmitter,this.sendMessage=r,this.pingIntervalMs=1e4,this.analyticsIntervalMs=6e4,this.participants={},this.isDataChannelOpen=!1,n&&n.e2eping&&("number"==typeof n.e2eping.pingInterval&&(this.pingIntervalMs=n.e2eping.pingInterval),"number"==typeof n.e2eping.analyticsInterval&&(this.analyticsIntervalMs=n.e2eping.analyticsInterval),this.analyticsIntervalMs>0&&this.analyticsIntervalMs<this.pingIntervalMs&&(this.analyticsIntervalMs=this.pingIntervalMs)),c.info("Initializing e2e ping; pingInterval="+this.pingIntervalMs+", analyticsInterval="+this.analyticsIntervalMs+"."),this.participantJoined=this.participantJoined.bind(this),t.on(i.USER_JOINED,this.participantJoined),this.participantLeft=this.participantLeft.bind(this),t.on(i.USER_LEFT,this.participantLeft),this.messageReceived=this.messageReceived.bind(this),t.on(i.ENDPOINT_MESSAGE_RECEIVED,this.messageReceived),this.dataChannelOpened=this.dataChannelOpened.bind(this),t.on(i.DATA_CHANNEL_OPENED,this.dataChannelOpened)}return _createClass(e,[{key:"dataChannelOpened",value:function(){for(var e in this.isDataChannelOpen=!0,this.participants)if(this.participants.hasOwnProperty(e)){var t=this.participants[e];window.setTimeout(t.sendRequest,200)}}},{key:"messageReceived",value:function(e,t){"e2e-ping-request"===t.type?this.handleRequest(e.getId(),t):"e2e-ping-response"===t.type&&this.handleResponse(e.getId(),t)}},{key:"participantJoined",value:function(e,t){this.pingIntervalMs<=0||(this.participants[e]&&(c.info("Participant wrapper already exists for "+e+". Clearing."),this.participants[e].clearIntervals(),delete this.participants[e]),this.participants[e]=new u(t,this))}},{key:"participantLeft",value:function(e){this.pingIntervalMs<=0||this.participants[e]&&(this.participants[e].clearIntervals(),delete this.participants[e])}},{key:"handleRequest",value:function(e,t){if(t&&t.id){var n={type:"e2e-ping-response",id:t.id};this.sendMessage(n,e)}else c.info("Received an invalid e2e ping request from "+e+".")}},{key:"handleResponse",value:function(e,t){var n=this.participants[e];n&&n.handleResponse(t)}},{key:"stop",value:function(){for(var e in c.info("Stopping e2eping"),this.conference.off(i.USER_JOINED,this.participantJoined),this.conference.off(i.USER_LEFT,this.participantLeft),this.conference.off(i.ENDPOINT_MESSAGE_RECEIVED,this.messageReceived),this.conference.off(i.DATA_CHANNEL_OPENED,this.dataChannelOpened),this.participants)this.participants.hasOwnProperty(e)&&this.participants[e].clearIntervals();this.participants={}}}]),e})()}).call(this,"modules/e2eping/e2eping.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var r=n(4),i=n(1),o=Object(r.getLogger)(e),a=(function(){function e(t){var n=this;_classCallCheck(this,e),this._conference=t,this._jvb121=!0,this._conference.addEventListener(i.USER_JOINED,function(){return n.evaluateStatus()}),this._conference.addEventListener(i.USER_LEFT,function(){return n.evaluateStatus()}),this._conference.addEventListener(i.P2P_STATUS,function(){return n.evaluateStatus()})}return _createClass(e,[{key:"evaluateStatus",value:function(){var e=this._jvb121,t=!this._conference.isP2PActive()&&this._conference.getParticipantCount()<=2;e!==t&&(this._jvb121=t,o.debug("JVB121 status "+e+" => "+t),this._conference.eventEmitter.emit(i.JVB121_STATUS,e,t))}}]),e})()}).call(this,"modules/event/Jvb121EventGenerator.js")},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(1),i=n(54),o=(function(){function e(t){var n=this;_classCallCheck(this,e),this.conference=t,this.conference.on(r._MEDIA_SESSION_STARTED,function(e){return n._onMediaSessionStarted(e)}),this.conference.on(r._MEDIA_SESSION_ACTIVE_CHANGED,function(){return n._propagateSendMaxFrameHeight()})}return _createClass(e,[{key:"_onMediaSessionStarted",value:function(e){var t=this;e.addListener(i.a.REMOTE_VIDEO_CONSTRAINTS_CHANGED,function(e){e===t.conference._getActiveMediaSession()&&t._propagateSendMaxFrameHeight()}),this.preferredReceiveMaxFrameHeight&&e.setReceiverVideoConstraint(this.preferredReceiveMaxFrameHeight),e.setSenderVideoDegradationPreference(),e.setSenderMaxBitrates()}},{key:"_propagateSendMaxFrameHeight",value:function(){var e=this.selectSendMaxFrameHeight(),t=[];if(e>=0)for(var n,r=_createForOfIteratorHelperLoose(this.conference._getMediaSessions());!(n=r()).done;){var i=n.value;t.push(i.setSenderVideoConstraint(e))}return Promise.all(t)}},{key:"selectSendMaxFrameHeight",value:function(){var e=this.conference._getActiveMediaSession(),t=e&&e.getRemoteRecvMaxFrameHeight();return this.preferredSendMaxFrameHeight>=0&&t>=0?Math.min(this.preferredSendMaxFrameHeight,t):t>=0?t:this.preferredSendMaxFrameHeight}},{key:"setPreferredReceiveMaxFrameHeight",value:function(e){this.preferredReceiveMaxFrameHeight=e;for(var t,n=_createForOfIteratorHelperLoose(this.conference._getMediaSessions());!(t=n()).done;){var r=t.value;e&&r.setReceiverVideoConstraint(e)}}},{key:"setPreferredSendMaxFrameHeight",value:function(e){return this.preferredSendMaxFrameHeight=e,this._propagateSendMaxFrameHeight()}}]),e})()},function(e,t,n){"use strict";(function(e){var r=n(4),i=n(0),o=n.n(i),a=n(76),s=n(51);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=Object(r.getLogger)(e);t.a=(function(){function e(t){_classCallCheck(this,e),this._sessions={},this._chatRoom=t,this.onPresence=this.onPresence.bind(this),this._chatRoom.eventEmitter.addListener(o.a.PRESENCE_RECEIVED,this.onPresence)}return _createClass(e,[{key:"getSession",value:function(e){return this._sessions[e]}},{key:"onPresence",value:function(e){var t=e.fromHiddenDomain,n=e.presence;s.a.isFromFocus(n)?this._handleFocusPresence(n):t&&this._handleJibriPresence(n)}},{key:"startRecording",value:function(e){var t=this,n=new a.a((function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){c(e,t,n[t])})}return e})({},e,{connection:this._chatRoom.connection}));return n.start({appData:e.appData,broadcastId:e.broadcastId,focusMucJid:this._chatRoom.focusMucJid,streamId:e.streamId}).then(function(){return t.getSession(n.getID())||(t._addSession(n),t._emitSessionUpdate(n)),n}).catch(function(e){return t._emitSessionUpdate(n),Promise.reject(e)})}},{key:"stopRecording",value:function(e){var t=this.getSession(e);return t?t.stop({focusMucJid:this._chatRoom.focusMucJid}):Promise.reject(new Error("Could not find session"))}},{key:"_addSession",value:function(e){this._sessions[e.getID()]=e}},{key:"_createSession",value:function(e,t,n){var r=new a.a({connection:this._chatRoom.connection,focusMucJid:this._chatRoom.focusMucJid,mode:n,sessionID:e,status:t});return this._addSession(r),r}},{key:"_emitSessionUpdate",value:function(e,t){this._chatRoom.eventEmitter.emit(o.a.RECORDER_STATE_CHANGED,e,t)}},{key:"_handleFocusPresence",value:function(e){var t=s.a.getFocusRecordingUpdate(e);if(t){var n=t.error,r=t.initiator,i=t.recordingMode,o=t.sessionID,a=t.status,c=this.getSession(o);c||"off"!==a?c&&c.getStatus()===a&&c.getError()===n?u.warn("Ignoring duplicate presence update: ",JSON.stringify(t)):(c||(c=this._createSession(o,a,i)),c.setStatus(a),n&&c.setError(n),this._emitSessionUpdate(c,r)):u.warn("Ignoring recording presence update","Received a new session with status off.")}}},{key:"_handleJibriPresence",value:function(e){var t=s.a.getHiddenDomainUpdate(e),n=t.liveStreamViewURL,r=t.mode,i=t.sessionID;if(i){var o=this.getSession(i);o||(o=this._createSession(i,"",r)),o.setLiveStreamViewURL(n),this._emitSessionUpdate(o)}else u.warn("Ignoring potential jibri presence due to no session id.")}}]),e})()}).call(this,"modules/recording/RecordingManager.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return d});var r=n(4),i=n(1),o=n(8),a=n(30),s=n(7),c=n(5),u=Object(r.getLogger)(e),d=(function(){function e(t){_classCallCheck(this,e),this._conference=t,this._localAudioLevelCache={},this._reportedParticipants=[],this._audioProblemCandidates={},this._numberOfRemoteAudioLevelsReceived={},this._onLocalAudioLevelsReport=this._onLocalAudioLevelsReport.bind(this),this._onRemoteAudioLevelReceived=this._onRemoteAudioLevelReceived.bind(this),this._clearUserData=this._clearUserData.bind(this),this._conference.on(a.REMOTE_STATS_UPDATED,this._onRemoteAudioLevelReceived),this._conference.statistics.addConnectionStatsListener(this._onLocalAudioLevelsReport),this._conference.on(i.USER_LEFT,this._clearUserData)}return _createClass(e,[{key:"_onRemoteAudioLevelReceived",value:function(e,t){var n=t.avgAudioLevels,r=this._numberOfRemoteAudioLevelsReceived[e]+1||0;if(this._numberOfRemoteAudioLevelsReceived[e]=r,!(-1!==this._reportedParticipants.indexOf(e)||e in this._audioProblemCandidates||n<=0||r<3)){var i=this._conference.getParticipantById(e);if(!(i&&i.getTracksByMediaType(o.a).length>0&&i.isAudioMuted())){var a=this._localAudioLevelCache[e];Array.isArray(a)&&!a.every(function(e){return 0===e})||(this._audioProblemCandidates[e]={remoteAudioLevels:n,localAudioLevels:[]})}}}},{key:"_onLocalAudioLevelsReport",value:function(e,t){var n=this,r=t.avgAudioLevels;e===this._conference.getActivePeerConnection()&&(Object.keys(r).forEach(function(e){if(-1===n._reportedParticipants.indexOf(e)){var t=n._localAudioLevelCache[e];Array.isArray(t)?t.length>=2&&t.shift():n._localAudioLevelCache[e]=[],n._localAudioLevelCache[e].push(r[e])}}),Object.keys(this._audioProblemCandidates).forEach(function(e){var t=n._audioProblemCandidates[e],i=t.localAudioLevels,o=t.remoteAudioLevels;if(i.push(r[e]),2===i.length){if(i.every(function(e){return void 0===e||0===e})){var a=JSON.stringify(i);c.a.sendAnalytics(Object(s.x)(e,a,o)),u.warn("A potential problem is detected with the audio output for participant "+e+", local audio levels: "+a+", remote audio levels: "+o),n._reportedParticipants.push(e),n._clearUserData(e)}delete n._audioProblemCandidates[e]}}))}},{key:"_clearUserData",value:function(e){delete this._localAudioLevelCache[e]}},{key:"dispose",value:function(){this._conference.off(a.REMOTE_STATS_UPDATED,this._onRemoteAudioLevelReceived),this._conference.off(i.USER_LEFT,this._clearUserData),this._conference.statistics.removeConnectionStatsListener(this._onLocalAudioLevelsReport),this._localAudioLevelCache=void 0,this._audioProblemCandidates=void 0,this._reportedParticipants=void 0,this._numberOfRemoteAudioLevelsReceived=void 0,this._conference=void 0}}]),e})()}).call(this,"modules/statistics/AudioOutputProblemDetector.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return v});var r=n(4),i=n(45),o=n.n(i),a=n(1),s=n(8),c=n(13),u=n(30),d=n(7),l=n(3),h=n(5),p=Object(r.getLogger)(e),f=(function(){function e(t){_classCallCheck(this,e),this.name=t,this.count=0,this.sum=0,this.samples=[]}return _createClass(e,[{key:"addNext",value:function(e){"number"!=typeof e?p.error(this.name+" - invalid value for idx: "+this.count,e):isNaN(e)||(this.sum+=e,this.samples.push(e),this.count+=1)}},{key:"calculate",value:function(){return this.sum/this.count}},{key:"appendReport",value:function(e){e[this.name+"_avg"]=this.calculate(),e[this.name+"_samples"]=JSON.stringify(this.samples)}},{key:"reset",value:function(){this.samples=[],this.sum=0,this.count=0}}]),e})(),m=(function(){function e(t,n,r){var i=this;_classCallCheck(this,e),this.isP2P=n,this._n=r,this._sampleIdx=0,this._avgRTT=new f("rtt"),this._avgRemoteRTTMap=new Map,this._avgRtpStatsReporter=t,this._avgEnd2EndRTT=void 0,this._onConnectionStats=function(e,t){i.isP2P===e.isP2P&&i._calculateAvgStats(t)};var o=t._conference;o.statistics.addConnectionStatsListener(this._onConnectionStats),this.isP2P||(this._onUserLeft=function(e){return i._avgRemoteRTTMap.delete(e)},o.on(a.USER_LEFT,this._onUserLeft),this._onRemoteStatsUpdated=function(e,t){return i._processRemoteStats(e,t)},o.on(u.REMOTE_STATS_UPDATED,this._onRemoteStatsUpdated))}return _createClass(e,[{key:"_calculateAvgStats",value:function(e){if(e){if(l.a.supportsRTTStatistics()&&e.transport&&e.transport.length&&this._avgRTT.addNext(e.transport[0].rtt),this._sampleIdx+=1,this._sampleIdx>=this._n){if(l.a.supportsRTTStatistics()){var t=this._avgRtpStatsReporter._conference,n={p2p:this.isP2P,conference_size:t.getParticipantCount()};if(e.transport&&e.transport.length&&_extends(n,{local_candidate_type:e.transport[0].localCandidateType,remote_candidate_type:e.transport[0].remoteCandidateType,transport_type:e.transport[0].type}),this._avgRTT.appendReport(n),this.isP2P){var r=this._avgRtpStatsReporter.jvbStatsMonitor._avgEnd2EndRTT;isNaN(r)||(n.rtt_diff=this._avgRTT.calculate()-r)}else{var i=this._calculateAvgRemoteRTT(),o=this._avgRTT.calculate();this._avgEnd2EndRTT=o+i,isNaN(o)||isNaN(i)||(n.end2end_rtt_avg=this._avgEnd2EndRTT)}h.a.sendAnalytics(Object(d.L)(n))}this._resetAvgStats()}}else p.error("No stats")}},{key:"_calculateAvgRemoteRTT",value:function(){for(var e,t=0,n=0,r=_createForOfIteratorHelperLoose(this._avgRemoteRTTMap.values());!(e=r()).done;){var i=e.value,o=i.calculate();isNaN(o)||(n+=o,t+=1,i.reset())}return n/t}},{key:"_processRemoteStats",value:function(e,t){var n="number"==typeof t.jvbRTT,r=this._avgRemoteRTTMap.get(e);!r&&n&&(r=new f(e+"_stat_rtt"),this._avgRemoteRTTMap.set(e,r)),n?r.addNext(t.jvbRTT):r&&this._avgRemoteRTTMap.delete(e)}},{key:"_resetAvgStats",value:function(){this._avgRTT.reset(),this._avgRemoteRTTMap&&this._avgRemoteRTTMap.clear(),this._sampleIdx=0}},{key:"dispose",value:function(){var e=this._avgRtpStatsReporter._conference;e.statistics.removeConnectionStatsListener(this._onConnectionStats),this.isP2P||(e.off(u.REMOTE_STATS_UPDATED,this._onRemoteStatsUpdated),e.off(a.USER_LEFT,this._onUserLeft))}}]),e})(),v=(function(){function e(t,n){var r=this;_classCallCheck(this,e),this._n=n,n>0?(p.info("Avg RTP stats will be calculated every "+n+" samples"),this._sampleIdx=0,this._conference=t,this._avgAudioBitrateUp=new f("bitrate_audio_upload"),this._avgAudioBitrateDown=new f("bitrate_audio_download"),this._avgVideoBitrateUp=new f("bitrate_video_upload"),this._avgVideoBitrateDown=new f("bitrate_video_download"),this._avgBandwidthUp=new f("bandwidth_upload"),this._avgBandwidthDown=new f("bandwidth_download"),this._avgPacketLossTotal=new f("packet_loss_total"),this._avgPacketLossUp=new f("packet_loss_upload"),this._avgPacketLossDown=new f("packet_loss_download"),this._avgRemoteFPS=new f("framerate_remote"),this._avgRemoteScreenFPS=new f("framerate_screen_remote"),this._avgLocalFPS=new f("framerate_local"),this._avgLocalScreenFPS=new f("framerate_screen_local"),this._avgRemoteCameraPixels=new f("pixels_remote"),this._avgRemoteScreenPixels=new f("pixels_screen_remote"),this._avgLocalCameraPixels=new f("pixels_local"),this._avgLocalScreenPixels=new f("pixels_screen_local"),this._avgCQ=new f("connection_quality"),this._cachedTransportStats=void 0,this._onLocalStatsUpdated=function(e){r._calculateAvgStats(e),r._maybeSendTransportAnalyticsEvent(e)},t.on(u.LOCAL_STATS_UPDATED,this._onLocalStatsUpdated),this._onP2PStatusChanged=function(){p.debug("Resetting average stats calculation"),r._resetAvgStats(),r.jvbStatsMonitor._resetAvgStats(),r.p2pStatsMonitor._resetAvgStats()},t.on(a.P2P_STATUS,this._onP2PStatusChanged),this._onJvb121StatusChanged=function(e,t){!0===t&&(p.info("Resetting JVB avg RTP stats"),r._resetAvgJvbStats())},t.on(a.JVB121_STATUS,this._onJvb121StatusChanged),this.jvbStatsMonitor=new m(this,!1,n),this.p2pStatsMonitor=new m(this,!0,n)):p.info("Avg RTP stats reports are disabled.")}return _createClass(e,[{key:"_calculateAvgStats",value:function(e){if(e){var t=this._conference.isP2PActive(),n=this._conference.getParticipantCount();if(t||!(n<2)){var r=e.bitrate,i=e.bandwidth,o=e.packetLoss,a=e.framerate,s=e.resolution;if(r)if(i)if(o)if(a)if(s){if(this._avgAudioBitrateUp.addNext(r.audio.upload),this._avgAudioBitrateDown.addNext(r.audio.download),this._avgVideoBitrateUp.addNext(r.video.upload),this._avgVideoBitrateDown.addNext(r.video.download),l.a.supportsBandwidthStatistics()&&(this._avgBandwidthUp.addNext(i.upload),this._avgBandwidthDown.addNext(i.download)),this._avgPacketLossUp.addNext(o.upload),this._avgPacketLossDown.addNext(o.download),this._avgPacketLossTotal.addNext(o.total),this._avgCQ.addNext(e.connectionQuality),a&&(this._avgRemoteFPS.addNext(this._calculateAvgVideoFps(a,!1,c.CAMERA)),this._avgRemoteScreenFPS.addNext(this._calculateAvgVideoFps(a,!1,c.DESKTOP)),this._avgLocalFPS.addNext(this._calculateAvgVideoFps(a,!0,c.CAMERA)),this._avgLocalScreenFPS.addNext(this._calculateAvgVideoFps(a,!0,c.DESKTOP))),s&&(this._avgRemoteCameraPixels.addNext(this._calculateAvgVideoPixels(s,!1,c.CAMERA)),this._avgRemoteScreenPixels.addNext(this._calculateAvgVideoPixels(s,!1,c.DESKTOP)),this._avgLocalCameraPixels.addNext(this._calculateAvgVideoPixels(s,!0,c.CAMERA)),this._avgLocalScreenPixels.addNext(this._calculateAvgVideoPixels(s,!0,c.DESKTOP))),this._sampleIdx+=1,this._sampleIdx>=this._n){var u={p2p:t,conference_size:n};e.transport&&e.transport.length&&_extends(u,{local_candidate_type:e.transport[0].localCandidateType,remote_candidate_type:e.transport[0].remoteCandidateType,transport_type:e.transport[0].type}),this._avgAudioBitrateUp.appendReport(u),this._avgAudioBitrateDown.appendReport(u),this._avgVideoBitrateUp.appendReport(u),this._avgVideoBitrateDown.appendReport(u),l.a.supportsBandwidthStatistics()&&(this._avgBandwidthUp.appendReport(u),this._avgBandwidthDown.appendReport(u)),this._avgPacketLossUp.appendReport(u),this._avgPacketLossDown.appendReport(u),this._avgPacketLossTotal.appendReport(u),this._avgRemoteFPS.appendReport(u),isNaN(this._avgRemoteScreenFPS.calculate())||this._avgRemoteScreenFPS.appendReport(u),this._avgLocalFPS.appendReport(u),isNaN(this._avgLocalScreenFPS.calculate())||this._avgLocalScreenFPS.appendReport(u),this._avgRemoteCameraPixels.appendReport(u),isNaN(this._avgRemoteScreenPixels.calculate())||this._avgRemoteScreenPixels.appendReport(u),this._avgLocalCameraPixels.appendReport(u),isNaN(this._avgLocalScreenPixels.calculate())||this._avgLocalScreenPixels.appendReport(u),this._avgCQ.appendReport(u),h.a.sendAnalytics(Object(d.L)(u)),this._resetAvgStats()}}else p.error("No resolution");else p.error('No "framerate"');else p.error('No "packetloss"');else p.error('No "bandwidth"');else p.error('No "bitrate"')}}else p.error("No stats")}},{key:"_calculateAvgVideoPixels",value:function(e,t,n){for(var r=0,i=0,o=this._conference.myUserId(),a=0,s=Object.keys(e);a<s.length;a++){var c=s[a];if(t?c===o:c!==o){var u=t?null:this._conference.getParticipantById(c),d=e[c];if((t||u)&&d){var l=this._calculatePeerAvgVideoPixels(d,u,n);isNaN(l)||(r+=l,i+=1)}}}return r/i}},{key:"_calculatePeerAvgVideoPixels",value:function(e,t,n){var r=Object.keys(e).map(function(e){return Number(e)}),i=null,o=this._conference.getActivePeerConnection();t?(i=t.getTracksByMediaType(s.c))&&(r=r.filter(function(e){return i.find(function(t){return!t.isMuted()&&t.getSSRC()===e&&t.videoType===n})})):(i=this._conference.getLocalTracks(s.c),r=r.filter(function(e){return i.find(function(t){return!t.isMuted()&&o.getLocalSSRC(t)===e&&t.videoType===n})}));for(var a,c=0,u=0,d=_createForOfIteratorHelperLoose(r);!(a=d()).done;){var l=a.value,h=Number(e[l].height)*Number(e[l].width);!isNaN(h)&&h>0&&(c+=h,u+=1)}return c/u}},{key:"_calculateAvgVideoFps",value:function(e,t,n){for(var r=0,i=0,o=this._conference.myUserId(),a=0,s=Object.keys(e);a<s.length;a++){var c=s[a];if(t?c===o:c!==o){var u=t?null:this._conference.getParticipantById(c),d=e[c];if((t||u)&&d){var l=this._calculatePeerAvgVideoFps(d,u,n);isNaN(l)||(r+=l,i+=1)}}}return r/i}},{key:"_calculatePeerAvgVideoFps",value:function(e,t,n){var r=Object.keys(e).map(function(e){return Number(e)}),i=null,o=this._conference.getActivePeerConnection();t?(i=t.getTracksByMediaType(s.c))&&(r=r.filter(function(e){return i.find(function(t){return!t.isMuted()&&t.getSSRC()===e&&t.videoType===n})})):(i=this._conference.getLocalTracks(s.c),r=r.filter(function(e){return i.find(function(t){return!t.isMuted()&&o.getLocalSSRC(t)===e&&t.videoType===n})}));for(var a,c=0,u=0,d=_createForOfIteratorHelperLoose(r);!(a=d()).done;){var l=a.value,h=Number(e[l]);!isNaN(h)&&h>0&&(c+=h,u+=1)}return c/u}},{key:"_maybeSendTransportAnalyticsEvent",value:function(e){if(e&&e.transport&&e.transport.length){var t={p2p:e.transport[0].p2p,local_candidate_type:e.transport[0].localCandidateType,remote_candidate_type:e.transport[0].remoteCandidateType,transport_type:e.transport[0].type};this._cachedTransportStats&&o()(t,this._cachedTransportStats)||(this._cachedTransportStats=t,h.a.sendAnalytics(Object(d.M)(t)))}}},{key:"_resetAvgJvbStats",value:function(){this._resetAvgStats(),this.jvbStatsMonitor._resetAvgStats()}},{key:"_resetAvgStats",value:function(){this._avgAudioBitrateUp.reset(),this._avgAudioBitrateDown.reset(),this._avgVideoBitrateUp.reset(),this._avgVideoBitrateDown.reset(),this._avgBandwidthUp.reset(),this._avgBandwidthDown.reset(),this._avgPacketLossUp.reset(),this._avgPacketLossDown.reset(),this._avgPacketLossTotal.reset(),this._avgRemoteFPS.reset(),this._avgRemoteScreenFPS.reset(),this._avgLocalFPS.reset(),this._avgLocalScreenFPS.reset(),this._avgRemoteCameraPixels.reset(),this._avgRemoteScreenPixels.reset(),this._avgLocalCameraPixels.reset(),this._avgLocalScreenPixels.reset(),this._avgCQ.reset(),this._sampleIdx=0}},{key:"dispose",value:function(){this._conference.off(a.P2P_STATUS,this._onP2PStatusChanged),this._conference.off(u.LOCAL_STATS_UPDATED,this._onLocalStatsUpdated),this._conference.off(a.JVB121_STATUS,this._onJvb121StatusChanged),this.jvbStatsMonitor.dispose(),this.p2pStatsMonitor.dispose()}}]),e})()}).call(this,"modules/statistics/AvgRTPStatsReporter.js")},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(1),i=n(0),o=n.n(i),a=n(70),s=n.n(a),c=(function(){function e(t){_classCallCheck(this,e),this.stats={users:{},dominantSpeakerId:null};var n=t.myUserId();this.stats.users[n]=new s.a(n,null,!0),this.conference=t,t.addEventListener(r.DOMINANT_SPEAKER_CHANGED,this._onDominantSpeaker.bind(this)),t.addEventListener(r.USER_JOINED,this._onUserJoin.bind(this)),t.addEventListener(r.USER_LEFT,this._onUserLeave.bind(this)),t.addEventListener(r.DISPLAY_NAME_CHANGED,this._onDisplayNameChange.bind(this)),t.xmpp&&t.xmpp.addListener(o.a.SPEAKER_STATS_RECEIVED,this._updateStats.bind(this))}return _createClass(e,[{key:"_onDominantSpeaker",value:function(e){var t=this.stats.users[this.stats.dominantSpeakerId],n=this.stats.users[e];t&&t.setDominantSpeaker(!1),n&&n.setDominantSpeaker(!0),this.stats.dominantSpeakerId=e}},{key:"_onUserJoin",value:function(e,t){t.isHidden()||this.stats.users[e]||(this.stats.users[e]=new s.a(e,t.getDisplayName()))}},{key:"_onUserLeave",value:function(e){var t=this.stats.users[e];t&&t.markAsHasLeft()}},{key:"_onDisplayNameChange",value:function(e,t){var n=this.stats.users[e];n&&n.setDisplayName(t)}},{key:"getStats",value:function(){return this.stats.users}},{key:"_updateStats",value:function(e){for(var t in e){var n=void 0,r=this.conference.getParticipantById(t);r&&r.isHidden()||(this.stats.users[t]?(n=this.stats.users[t]).getDisplayName()||n.setDisplayName(e[t].displayName):(n=new s.a(t,e[t].displayName),this.stats.users[t]=n,n.markAsHasLeft())),n.totalDominantSpeakerTime=e[t].totalDominantSpeakerTime}}}]),e})()},function(e,t,n){var r=n(81),i=n(161);function o(){this.audioRecorder=new r,this.transcriptionService=new i,this.counter=null,this.startTime=null,this.transcription=null,this.callback=null,this.results=[],this.state="before",this.lineLength=0}function a(e,t){if(console.log("retrieved an answer from the transcription service. The answer has an array of length: "+t.wordArray.length),t.wordArray.length>0){var n=t.startTime.getUTCMilliseconds()-e.startTime.getUTCMilliseconds();n<0&&(n=0);var r="[";t.wordArray.forEach(function(e){e.begin+=n,e.end+=n,r+=e.word+","}),r+="]",console.log(r),t.wordArray.name=t.name}e.results.push(t.wordArray),e.counter--,console.log("current counter: "+e.counter),e.maybeMerge()}function s(e){for(var t=0;t<e.length;t++)0===e[t].length&&e.splice(t,1);return e.length>0}o.prototype.start=function(){if("before"!==this.state)throw new Error("The transcription can only start when it's in the \"before\" state. It's currently in the \""+this.state+"\" state");this.state="recording",this.audioRecorder.start(),this.startTime=new Date},o.prototype.stop=function(e){var t=this;if("recording"!==this.state)throw new Error("The transcription can only stop when it's in the \"recording\" state. It's currently in the \""+this.state+"\" state");console.log("stopping recording and sending audio files"),this.audioRecorder.stop();var n=a.bind(null,this);this.audioRecorder.getRecordingResults().forEach(function(e){t.transcriptionService.send(e,n),t.counter++}),this.state="transcribing",this.callback=e},o.prototype.maybeMerge=function(){"transcribing"===this.state&&0===this.counter&&this.merge()},o.prototype.merge=function(){var e=this;console.log("starting merge process!\n The length of the array: "+this.results.length),this.transcription="";var t=this.results,n=[],r=function(){var n=t[0];t.forEach(function(e){e[0].begin<n[0].begin&&(n=e)});var r=n.shift(),i=function(){var i=!1,o=n[0].begin;if(t.forEach(function(e){e[0].begin<o&&(i=!0)}),i)return"break";r=n.shift(),e.updateTranscription(r,null)};for(e.updateTranscription(r,n.name);n.length>0;){if("break"===i())break}};for(s(t),t.forEach(function(e){return(function(e,t){if(0===e.length)e.push(t);else{if(e[e.length-1].begin<=t.begin)return void e.push(t);for(var n=0;n<e.length;n++)if(t.begin<e[n].begin)return void e.splice(n,0,t);e.push(t)}})(n,e)});s(t);)r();this.state="finished",this.callback&&this.callback(this.transcription)},o.prototype.updateTranscription=function(e,t){null!=t&&(this.transcription+="\n"+t+":",this.lineLength=t.length+1),this.lineLength+e.word.length>80&&(this.transcription+="\n    ",this.lineLength=4),this.transcription+=" "+e.word,this.lineLength+=e.word.length+1},o.prototype.addTrack=function(e){this.audioRecorder.addTrack(e)},o.prototype.removeTrack=function(e){this.audioRecorder.removeTrack(e)},o.prototype.getTranscription=function(){if("finished"!==this.state)throw new Error("The transcription can only be retrieved when it's in the \"finished\" state. It's currently in the \""+this.state+"\" state");return this.transcription},o.prototype.getState=function(){return this.state},o.prototype.reset=function(){this.state="before",this.counter=null,this.transcription=null,this.startTime=null,this.callback=null,this.results=[],this.lineLength=0},e.exports=o},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var r=n(5),i=n(4).getLogger(e);function o(e){this.versions={},this.conference=e,this.conference.addCommandListener("versions",this.processVersions.bind(this))}o.prototype.processVersions=function(e,t,n){var o=this;if(this.conference._isFocus(n)){var a=[];e.children.forEach(function(e){var t=e.attributes.name,n=e.value;o.versions[t]!==n&&(o.versions[t]=n,i.info("Got "+t+" version: "+n),a.push({id:"component_version",component:t,version:n}))}),a.length>0&&r.a.sendLog(JSON.stringify(a))}else i.warn("Received versions not from the focus user: "+e,n)},o.prototype.getComponentVersion=function(e){return this.versions[e]}}).call(this,"modules/version/ComponentsVersions.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return u});var r=n(4),i=n(0),o=n.n(i),a=n(136),s=n(24),c=Object(r.getLogger)(e),u=(function(){function e(t){_classCallCheck(this,e),this.chatRoom=t,this.eventEmitter=t.eventEmitter,c.debug("creating VideoSIPGW"),this.sessions={},this.sessionStateChangeListener=this.sessionStateChanged.bind(this),t.addPresenceListener("jibri-sip-call-state",this.handleJibriSIPState.bind(this))}return _createClass(e,[{key:"handleJibriSIPState",value:function(e){var t=e.attributes;if(t){c.debug("Handle video sip gw state : ",t);var n=t.state;if(n!==this.state)switch(n){case s.STATE_ON:case s.STATE_OFF:case s.STATE_PENDING:case s.STATE_RETRYING:case s.STATE_FAILED:var r=t.sipaddress;if(!r)return;var i=this.sessions[r];i?i.setState(n,t.failure_reason):c.warn("Video SIP GW session not found:",r)}}}},{key:"createVideoSIPGWSession",value:function(e,t){if(this.sessions[e])return c.warn("There was already a Video SIP GW session for address",e),new Error(s.ERROR_SESSION_EXISTS);var n=new a.a(e,t,this.chatRoom);return n.addStateListener(this.sessionStateChangeListener),this.sessions[e]=n,n}},{key:"sessionStateChanged",value:function(e){var t=e.address;if(e.newState===s.STATE_OFF||e.newState===s.STATE_FAILED){var n=this.sessions[t];if(!n)return void c.error("Missing Video SIP GW session with address:",t);n.removeStateListener(this.sessionStateChangeListener),delete this.sessions[t]}this.eventEmitter.emit(o.a.VIDEO_SIP_GW_SESSION_STATE_CHANGED,e)}}]),e})()}).call(this,"modules/videosipgw/VideoSIPGW.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c});var r=n(4),i=n(2),o=n(20),a=n(24),s=Object(r.getLogger)(e),c=(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var o;return _classCallCheck(this,n),(o=t.call(this)).sipAddress=e,o.displayName=r,o.chatRoom=i,o.state=void 0,o}return _createClass(n,[{key:"stop",value:function(){this.state!==a.STATE_OFF&&this.state!==a.STATE_FAILED?this._sendJibriIQ("stop"):s.warn("Video SIP GW session already stopped or failed!")}},{key:"start",value:function(){this.state!==a.STATE_ON&&this.state!==a.STATE_OFF&&this.state!==a.STATE_PENDING&&this.state!==a.STATE_RETRYING?this._sendJibriIQ("start"):s.warn("Video SIP GW session already started!")}},{key:"setState",value:function(e,t){if(e!==this.state){var n=this.state;this.state=e,this.eventEmitter.emit("STATE_CHANGED",{address:this.sipAddress,failureReason:t,oldState:n,newState:this.state,displayName:this.displayName})}}},{key:"addStateListener",value:function(e){this.addListener("STATE_CHANGED",e)}},{key:"removeStateListener",value:function(e){this.removeListener("STATE_CHANGED",e)}},{key:"_sendJibriIQ",value:function(e){var t=this,n={xmlns:"http://abcpen.com/protocol/jibri",action:e,sipaddress:this.sipAddress};n.displayname=this.displayName;var r=Object(i.$iq)({to:this.chatRoom.focusMucJid,type:"set"}).c("jibri",n).up();s.debug(e+" video SIP GW session",r.nodeTree),this.chatRoom.connection.sendIQ(r,function(){},function(n){s.error("Failed to "+e+" video SIP GW session, error: ",n),t.setState(a.STATE_FAILED)})}}]),n})(o.a)}).call(this,"modules/videosipgw/JitsiVideoSIPGWSession.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c});var r=n(4),i=n(15),o=n(12),a=n(5),s=Object(r.getLogger)(e);function c(){return new Promise(function(e){o.a.enumerateDevices(function(t){for(var n,r=[],c=_createForOfIteratorHelperLoose(t.filter(function(e){return"audioinput"===e.kind}));!(n=c()).done;){var d=n.value,l=o.a.obtainAudioAndVideoPermissions({devices:["audio"],micDeviceId:d.deviceId}).then(function(e){var t=e[0],n=t.getOriginalStream();return a.a.startLocalStats(n,t.setAudioLevel.bind(t)),t.addEventListener(i.LOCAL_TRACK_STOPPED,function(){a.a.stopLocalStats(n)}),t});r.push(l)}Promise.allSettled(r).then(function(t){for(var n,r=t.filter(function(e){return"fulfilled"===e.status}),o=t.filter(function(e){return"rejected"===e.status}),a=r.map(function(e){return e.value}),c=_createForOfIteratorHelperLoose(o.map(function(e){return e.value}));!(n=c()).done;){var d=n.value;s.error("Failed to acquire audio device with error: ",d)}for(var l,h=function(t){t.on(i.TRACK_AUDIO_LEVEL_CHANGED,function(n){n>.008&&(u(a),e({deviceId:t.deviceId,deviceLabel:t.track.label}))})},p=_createForOfIteratorHelperLoose(a);!(l=p()).done;){h(l.value)}setTimeout(function(){u(a),e({deviceId:"",deviceLabel:""})},3e3)})})})}function u(e){for(var t,n=_createForOfIteratorHelperLoose(e);!(t=n()).done;){t.value.stopStream()}}}).call(this,"modules/detection/ActiveDeviceDetector.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return m});var r=n(4),i=n(2),o=n(8),a=n(13),s=n.n(a),c=n(12),u=n(139),d=n(33);function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){h(e,t,n[t])})}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(null==e)return{};var n,r,i=(function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i})(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var f=Object(r.getLogger)(e),m=(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e);var n=t.jitsiConnection,r=p(t,["jitsiConnection"]);this._options=l({iceConfig:n&&n.xmpp.connection.jingle.p2pIceConfig},r),this._peerConnection=null,this._onFatalError=this._onFatalError.bind(this),this._onSendMessage=this._onSendMessage.bind(this),this._onRemoteStream=this._onRemoteStream.bind(this)}return _createClass(e,[{key:"processMessage",value:function(e){var t=e.from;if(t)if(this._peerConnection&&this._peerConnection.getPeerJid()!==t)this._onFatalError(t,d.a.CONNECTION_ERROR,"rejected");else{var n=this._convertStringToXML(e.data.iq),r=n&&n.find("jingle"),i=r&&r.attr("action");i===d.a.INITIATE&&(this._peerConnection=this._createPeerConnection(t,{isInitiator:!1,receiveVideo:!0})),this._peerConnection&&this._peerConnection.processMessage(r),i!==d.a.CONNECTION_ERROR&&i!==d.a.UNAVAILABLE&&i!==d.a.TERMINATE||this._selfCloseConnection()}}},{key:"start",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._peerConnection=this._createPeerConnection(e,{isInitiator:!0,receiveVideo:!1}),this._peerConnection.start(t)}},{key:"stop",value:function(){this._peerConnection&&this._peerConnection.stop(),this._peerConnection=null}},{key:"_convertStringToXML",value:function(e){try{var t=(new DOMParser).parseFromString(e,"text/xml");return $(t)}catch(e){return f.error("Attempted to convert incorrectly formatted xml"),null}}},{key:"_createPeerConnection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("Cannot create ProxyConnectionPC without a peer.");var n=l({iceConfig:this._options.iceConfig,onError:this._onFatalError,onRemoteStream:this._onRemoteStream,onSendMessage:this._onSendMessage,peerJid:e},t);return new u.a(n)}},{key:"_onFatalError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";f.error("Received a proxy connection error",e,t,n);var r=Object(i.$iq)({to:e,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:t}).c("details").t(n).up();this._onSendMessage(e,r),this._peerConnection&&this._peerConnection.getPeerJid()===e&&this._selfCloseConnection()}},{key:"_onRemoteStream",value:function(e){if(!this._options.onRemoteStream)return f.error("Remote track received without callback."),void e.dispose();var t,n=e.isVideoTrack();n&&(t=this._options.convertVideoToDesktop?s.a.DESKTOP:s.a.CAMERA);var r=e.getOriginalStream(),i=c.a.newCreateLocalTracks([{deviceId:"proxy:"+this._peerConnection.getPeerJid(),mediaType:n?o.c:o.a,sourceType:"proxy",stream:r,track:r.getVideoTracks()[0],videoType:t}]);this._options.onRemoteStream(i[0])}},{key:"_onSendMessage",value:function(e,t){if(this._options.onSendMessage)try{var n=(new XMLSerializer).serializeToString(t.nodeTree||t);this._options.onSendMessage(e,{iq:n})}catch(e){f.error("Attempted to send an incorrectly formatted iq.")}}},{key:"_selfCloseConnection",value:function(){this.stop(),this._options.onConnectionClosed&&this._options.onConnectionClosed()}}]),e})()}).call(this,"modules/proxyconnection/ProxyConnectionService.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return m});var r=n(4),i=n(6),o=n.n(i),a=n(0),s=n.n(a),c=n(12),u=n(53),d=n(28),l=n(33);function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){p(e,t,n[t])})}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=Object(r.getLogger)(e),m=(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this._options=h({iceConfig:{},isInitiator:!1,receiveAudio:!1,receiveVideo:!1},t),this._tracks=[],this._peerConnection=null,this._onError=this._onError.bind(this),this._onRemoteStream=this._onRemoteStream.bind(this),this._onSendMessage=this._onSendMessage.bind(this)}return _createClass(e,[{key:"getPeerJid",value:function(){return this._options.peerJid}},{key:"processMessage",value:function(e){switch(e.attr("action")){case l.a.ACCEPT:this._onSessionAccept(e);break;case l.a.INITIATE:this._onSessionInitiate(e);break;case l.a.TERMINATE:this._onSessionTerminate(e);break;case l.a.TRANSPORT_INFO:this._onTransportInfo(e)}}},{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._peerConnection||(this._tracks=this._tracks.concat(e),this._peerConnection=this._createPeerConnection(),this._peerConnection.invite(e))}},{key:"stop",value:function(){this._peerConnection&&this._peerConnection.terminate(),this._onSessionTerminate()}},{key:"_createPeerConnection",value:function(){var e=this,t={connected:!0,jingle:{terminate:function(){}},sendIQ:this._onSendMessage,addEventListener:function(){return function(){}}},n=h({iceServers:d.a},this._options.iceConfig),r={addPresenceListener:function(){},connectionTimes:[],eventEmitter:{emit:function(t){switch(t){case s.a.CONNECTION_ICE_FAILED:case s.a.CONNECTION_FAILED:e._onError(l.a.CONNECTION_ERROR,t)}}},getMediaPresenceInfo:function(){return{}},removePresenceListener:function(){}};this._rtc=new c.a({},{}),this._rtc.addListener(o.a.REMOTE_TRACK_ADDED,this._onRemoteStream);var i=new u.a(void 0,void 0,this._options.peerJid,t,{offerToReceiveAudio:this._options.receiveAudio,offerToReceiveVideo:this._options.receiveVideo},n,!0,this._options.isInitiator);return i.initialize(r,this._rtc,{}),i}},{key:"_onError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._options.onError(this._options.peerJid,e,t)}},{key:"_onRemoteStream",value:function(e){this._tracks.push(e),this._options.onRemoteStream(e)}},{key:"_onSendMessage",value:function(e){this._options.onSendMessage(this._options.peerJid,e)}},{key:"_onSessionAccept",value:function(e){this._peerConnection?this._peerConnection.setAnswer(e):f.error("Received an answer when no peer connection exists.")}},{key:"_onSessionInitiate",value:function(e){var t=this;this._peerConnection?f.error("Received an offer when an offer was already sent."):(this._peerConnection=this._createPeerConnection(),this._peerConnection.acceptOffer(e,function(){},function(){return t._onError(t._options.peerJid,l.a.CONNECTION_ERROR,"session initiate error")}))}},{key:"_onSessionTerminate",value:function(){this._tracks.forEach(function(e){return e.dispose()}),this._tracks=[],this._peerConnection&&this._peerConnection.onTerminated(),this._rtc&&(this._rtc.removeListener(o.a.REMOTE_TRACK_ADDED,this._onRemoteStream),this._rtc.destroy())}},{key:"_onTransportInfo",value:function(e){this._peerConnection.addIceCandidates(e)}}]),e})()}).call(this,"modules/proxyconnection/ProxyConnectionPC.js")},function(e,t,n){"use strict";t.a={error:{BUSY:"busy",ERROR:"error",RESOURCE_CONSTRAINT:"resource-constraint",SERVICE_UNAVAILABLE:"service-unavailable"},mode:{FILE:"file",STREAM:"stream"},status:{OFF:"off",ON:"on",PENDING:"pending"}}},function(e,t,n){"use strict";var r=n(19),i=n.n(r),o=n(3),a=n(31),s=n(47),c=n.n(s),u=n(61),d=new i.a,l=!1,h=null;t.a={init:function(e){return _regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(!l){t.next=2;break}throw new Error("Precall Test already initialized");case 2:return t.next=4,_regeneratorRuntime.awrap((function(){if(!o.a.isReactNative())return new Promise(function(e){c.a.loadScript(u.a,!0,!0,void 0,e)})})());case 4:return h=new window.callstats,t.abrupt("return",(function(e){return new Promise(function(t,n){if(!e.disableThirdPartyRequests){var r=e.callStatsID,i=e.callStatsSecret,o=e.statisticsId||e.statisticsDisplayName||a.a.callStatsUserName;h.initialize(r,i,o,function(e,r){"success"===e?(h.on("preCallTestResults",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];d.emit.apply(d,["preCallTestResults"].concat(t))}),l=!0,t()):n({status:e,message:r})},null,{disablePrecalltest:!0})}})})(e));case 6:case"end":return t.stop()}},null,null,null,Promise)},execute:function(){return l?new Promise(function(e,t){d.on("preCallTestResults",function(n,r){"success"===n?e(r):t({status:n,payload:r})}),h.makePrecallTest()}):Promise.reject("uninitialized")}}},function(e,t){e.exports={getTokenAuthUrl:function(e,t,n){return"string"!=typeof e?null:e.replace("{room}",t).replace("{roleUpgrade}",!0===n)}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var r=n(4),i=n(66),o=Object(r.getLogger)(e),a=(function(){function e(){_classCallCheck(this,e),this._started=!1,this._streamsToMix=[],this._streamMSSArray=[]}return _createClass(e,[{key:"addMediaStream",value:function(e){e.getAudioTracks()||o.warn("Added MediaStream doesn't contain audio tracks."),this._streamsToMix.push(e)}},{key:"start",value:function(){if(this._started)return this._mixedMSD.stream;if(this._audioContext=Object(i.a)(),!this._streamsToMix.length)return o.warn("No MediaStream's added to AudioMixer, nothing will happen."),null;this._started=!0,this._mixedMSD=this._audioContext.createMediaStreamDestination();for(var e,t=_createForOfIteratorHelperLoose(this._streamsToMix);!(e=t()).done;){var n=e.value,r=this._audioContext.createMediaStreamSource(n);r.connect(this._mixedMSD),this._streamMSSArray.push(r)}return this._mixedMSD.stream}},{key:"reset",value:function(){this._started=!1,this._streamsToMix=[];for(var e,t=_createForOfIteratorHelperLoose(this._streamMSSArray);!(e=t()).done;){e.value.disconnect()}this._streamMSSArray=[],this._audioContext&&(this._audioContext=void 0)}}]),e})()}).call(this,"modules/webaudio/AudioMixer.js")},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(41),i=n.n(r),o=n(25),a=n.n(o),s=function(e,t){return void 0!==e&&void 0!==e.media&&Array.isArray(e.media)&&e.media.forEach(function(e){e.sources&&e.sources.length&&(e.ssrcs=[],e.sources.forEach(function(t){Object.keys(t).forEach(function(n){"id"!==n&&e.ssrcs.push({id:t.id,attribute:n,value:t[n]})})}),delete e.sources),e.ssrcGroups&&e.ssrcGroups.length&&e.ssrcGroups.forEach(function(e){void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&(e.ssrcs=e.ssrcs.join(" "))})}),a.a.write(e,t)},c=function(e){var t=a.a.parse(e);return void 0!==t&&void 0!==t.media&&Array.isArray(t.media)&&t.media.forEach(function(e){void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&(e.sources=[],e.ssrcs.forEach(function(t){var n=e.sources.findIndex(function(e){return e.id===t.id});if(n>-1)e.sources[n][t.attribute]=t.value;else{var r={id:t.id};r[t.attribute]=t.value,e.sources.push(r)}}),delete e.ssrcs),void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&e.ssrcGroups.forEach(function(e){"string"==typeof e.ssrcs&&(e.ssrcs=e.ssrcs.split(" "))})}),t},u=["audio","video","data"],d=function(e){return e.find(function(e){return"SIM"===e.semantics})},l=function(e){return e.find(function(e){return"FID"===e.semantics})};function h(e,t,n,r){if(e&&t){var i=function(e){return r.find(function(t){return t.id.toString()===e})};t.ssrcs.forEach(function(t){e.sources.push(i(t));var r=n[parseInt(t,10)].find(function(e){return"FID"===e.semantics});if(r){var o=r.ssrcs.find(function(e){return e!==t});e.sources.push(i(o)),e.ssrcGroups.push(r)}}),e.ssrcGroups.push(t)}}function p(e,t,n,r){if(e&&t){if(e.sources=[],e.ssrcGroups=[],!n[t.id])return e.sources.push(t),void(e.msid=t.msid);var i=d(n[t.id]),o=l(n[t.id]);if(i)h(e,i,n,r);else if(o){var a=o.ssrcs.find(function(e){return e!==t}),s=d(n[a]);s?h(e,s,n,r):(o.ssrcs.forEach(function(t){e.sources.push((function(e){return r.find(function(t){return t.id.toString()===e})})(t))}),e.ssrcGroups.push(o))}e.msid=e.sources[0].msid}}function f(e,t,n){if(!n.find(function(t){return!!t.sources&&t.sources.some(function(t){return t.id===e.id})})){if(!t[e.id])return!1;var r=d(t[e.id]),i=l(t[e.id]);return r?n.some(function(e){return e.sources&&e.sources.some(function(e){return e.id.toString()===r.ssrcs[0]})}):!(!i||e.id.toString()===i.ssrcs[0])&&f({id:i.ssrcs[0]},t,n)}return!0}var m=(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"toPlanB",value:function(e){if(!e||"string"!=typeof e.sdp)return console.warn("An empty description was passed as an argument."),e;var t=c(e.sdp);if(!t.media||!t.media.length)return console.warn("The description has no media."),e;if(t.media.every(function(e){return-1!==u.indexOf(e.mid)}))return console.warn("The description does not look like unified plan sdp"),e;var n={},r=t.media;t.media=[],r.forEach(function(e){var t=e.type;if("application"===t)return e.mid="data",void(n[e.mid]=e);if(void 0===n[t]){var r=i()(e);r.sources&&Array.isArray(r.sources)&&r.sources.forEach(function(t){e.msid?t.msid=e.msid:delete t.msid}),r.ssrcGroups&&e.msid||(r.ssrcGroups=[]),delete r.msid,r.mid=t,n[t]=r}else e.msid&&(e.sources&&Array.isArray(e.sources)&&(n[t].sources=n[t].sources.concat(e.sources)),void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&(n[t].ssrcGroups=n[t].ssrcGroups.concat(e.ssrcGroups)))}),t.media=Object.values(n);var o=[];Object.values(n).forEach(function(e){"inactive"!==e.direction&&o.push(e.mid)}),t.groups.forEach(function(e){"BUNDLE"===e.type&&(e.mids=o.join(" "))}),t.msidSemantic={semantic:"WMS",token:"*"};var a=s(t);return new RTCSessionDescription({type:e.type,sdp:a})}},{key:"toUnifiedPlan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e||"string"!=typeof e.sdp)return console.warn("An empty description was passed as an argument."),e;var n=c(e.sdp);if(!n.media||!n.media.length)return console.warn("The description has no media."),e;if(n.media.length>3||n.media.every(function(e){return-1===u.indexOf(e.mid)}))return console.warn("The description does not look like plan-b"),e;var r=t?c(t.sdp):null,o={};n.media.forEach(function(e){var t=e.type;if("application"!==t){var n=(function(e){var t={};return e&&Array.isArray(e)?(e.forEach(function(e){e.ssrcs&&Array.isArray(e.ssrcs)&&e.ssrcs.forEach(function(n){void 0===t[n]&&(t[n]=[]),t[n].push(e)})}),t):t})(e.ssrcGroups);e.sources&&e.sources.forEach(function(a,s){if(a.msid){if(!r||!r.media){if(f(a,n,Object.values(o)))return;var c=i()(e);return c.mid=Object.keys(o).length.toString(),c.direction=s||"sendonly"===e.direction?"sendonly":"sendrecv",c.bundleOnly=void 0,p(c,a,n,e.sources),void(o[c.mid]=c)}if(!f(a,n,r.media)){var u=r.media.findIndex(function(e){return e.direction&&"inactive"===e.direction&&e.type===t});if(u>-1)r.media[u].direction="sendonly",p(r.media[u],a,n,e.sources);else{var d=i()(e);d.mid=r.media.length.toString(),d.direction="sendonly",p(d,a,n,e.sources),r.media.push(d)}}}})}else{if(!r||!r.media){var a=i()(e);return a.mid=Object.keys(o).length.toString(),void(o[e.mid]=a)}var s=r.media.findIndex(function(e){return e.type===t});s&&(r.media[s]=e,r.media[s].mid=s)}}),n.media=r?r.media:Object.values(o);var a=[];n.media.forEach(function(e){a.push(e.mid)}),n.groups.forEach(function(e){"BUNDLE"===e.type&&(e.mids=a.join(" "))}),n.msidSemantic={semantic:"WMS",token:"*"},n.origin.sessionVersion++;var d=s(n);return new RTCSessionDescription({type:e.type,sdp:d})}}]),e})()},function(e,t,n){"use strict";var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),i=new Uint8Array(16);function o(){if(!r)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}for(var a=[],s=0;s<256;++s)a.push((s+256).toString(16).substr(1));var c=function(e,t){var n=t||0,r=a;return(r[e[n+0]]+r[e[n+1]]+r[e[n+2]]+r[e[n+3]]+"-"+r[e[n+4]]+r[e[n+5]]+"-"+r[e[n+6]]+r[e[n+7]]+"-"+r[e[n+8]]+r[e[n+9]]+"-"+r[e[n+10]]+r[e[n+11]]+r[e[n+12]]+r[e[n+13]]+r[e[n+14]]+r[e[n+15]]).toLowerCase()};t.a=function(e,t,n){"string"==typeof e&&(t="binary"===e?new Uint8Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){for(var i=n||0,a=0;a<16;++a)t[i+a]=r[a];return t}return c(r)}},function(e,t,n){e.exports=n(147).default},function(e,t,n){"use strict";n.r(t),function(e){var r=n(4),i=n.n(r),o=n(16),a=n(1),s=n(82),c=n(39),u=n(26),d=n(77),l=n(55),h=n(18),p=n(14),f=n(15),m=n(63),v=n(12),g=n(3),_=n(49),y=n(48),S=n(137),E=n(22),b=n(65),C=n(138),T=n(140),R=n(60),A=n(141),k=n(5),I=n(142),w=n.n(I),P=n(11),O=n.n(P),D=n(47),N=n.n(D),M=n(24),L=n(143),x=n(8),F=n(34),j=n.n(F),H=n(30),U=n(67),J=n(7),B=i.a.getLogger(e);function G(e){var t={audio_requested:e.devices.includes("audio"),video_requested:e.devices.includes("video"),screen_sharing_requested:e.devices.includes("desktop")};return t.video_requested&&(t.resolution=e.resolution),t}t.default=(function(e){return"object"==typeof window.JitsiMeetJS?_extends({},window.JitsiMeetJS,e):e})({version:"development",JitsiConnection:s.a,ProxyConnectionService:C.a,constants:{participantConnectionStatus:y.a,recording:T.a,sipVideoGW:M,transcriptionStatus:m},events:{conference:a,connection:u,detection:E,track:f,mediaDevices:l,connectionQuality:H,e2eping:U},errors:{conference:o,connection:c,track:p},errorTypes:{JitsiTrackError:h.a},logLevels:i.a.levels,mediaDevices:d.a,analytics:k.a.analytics,init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k.a.init(e),window.connectionTimes||(window.connectionTimes={}),!0!==e.enableAnalyticsLogging&&(B.warn("Analytics disabled, disposing."),this.analytics.dispose()),e.enableWindowOnErrorHandler&&O.a.addHandler(this.getGlobalOnErrorHandler.bind(this));var t=e.deploymentInfo;if(t&&Object.keys(t).length>0){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);n.id="deployment_info",k.a.sendLog(JSON.stringify(n))}if(this.version){var i={id:"component_version",component:"lib-jitsi-meet",version:this.version};k.a.sendLog(JSON.stringify(i))}return v.a.init(e)},isDesktopSharingEnabled:function(){return v.a.isDesktopSharingEnabled()},isWebRtcSupported:function(){return v.a.isWebRtcSupported()},setLogLevel:function(e){i.a.setLogLevel(e)},setLogLevelById:function(e,t){i.a.setLogLevelById(e,t)},addGlobalLogTransport:function(e){i.a.addGlobalTransport(e)},removeGlobalLogTransport:function(e){i.a.removeGlobalTransport(e)},setGlobalLogOptions:function(e){i.a.setGlobalOptions(e)},createLocalTracks:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=!1;return!0===n&&window.setTimeout(function(){i||d.a.emitEvent(l.PERMISSION_PROMPT_IS_SHOWN,g.a.getName())},1e3),window.connectionTimes||(window.connectionTimes={}),window.connectionTimes["obtainPermissions.start"]=window.performance.now(),v.a.obtainAudioAndVideoPermissions(t).then(function(n){if(i=!0,window.connectionTimes["obtainPermissions.end"]=window.performance.now(),k.a.sendAnalytics(Object(J.F)("success",G(t))),!v.a.options.disableAudioLevels)for(var r=function(e){var t=n[e],r=t.getOriginalStream();t.getType()===x.a&&(k.a.startLocalStats(r,t.setAudioLevel.bind(t)),t.addEventListener(f.LOCAL_TRACK_STOPPED,function(){k.a.stopLocalStats(r)}))},o=0;o<n.length;o++)r(o);var a=v.a.getCurrentlyAvailableMediaDevices();if(a)for(var s=0;s<n.length;s++)n[s]._setRealDeviceIdFromDeviceList(a);for(var c,u=_createForOfIteratorHelperLoose(n);!(c=u()).done;){var d=c.value;d.type===x.c&&"desktop"===d.videoType&&e.setVideoTrackContentHints(d.track,"detail")}return n}).catch(function(n){if(i=!0,n.name===p.UNSUPPORTED_RESOLUTION&&!g.a.usesNewGumFlow()){var o=t.resolution||"720",a=(function(e){if(!j.a[e])return null;var t=j.a[e].order,n=null,r=null;return Object.keys(j.a).forEach(function(e){var i=j.a[e];(!n||n.order<i.order&&i.order<t)&&(r=e,n=i)}),r===e&&(r=null),r})(o);if(null!==a)return t.resolution=a,B.debug("Retry createLocalTracks with resolution",a),k.a.sendAnalytics(Object(J.F)("warning",{old_resolution:o,new_resolution:a,reason:"unsupported resolution"})),e.createLocalTracks(t,void 0,r||_extends({},t));if(r&&n.gum.constraints&&n.gum.constraints.video&&n.gum.constraints.video.mandatory&&n.gum.constraints.video.mandatory.sourceId)return r.cameraDeviceId=void 0,e.createLocalTracks(r)}if(n.name===p.SCREENSHARING_USER_CANCELED){var s={id:"screensharing_user_canceled",message:n.message};k.a.sendLog(JSON.stringify(s)),k.a.sendAnalytics(Object(J.F)("warning",{reason:"extension install user canceled"}))}else if(n.name===p.NOT_FOUND){var c={id:"usermedia_missing_device",status:n.gum.devices};k.a.sendLog(JSON.stringify(c));var u=G(t);u.reason="device not found",u.devices=n.gum.devices.join("."),k.a.sendAnalytics(Object(J.F)("error",u))}else{k.a.sendGetUserMediaFailed(n);var d=G(t);d.reason=n.name,k.a.sendAnalytics(Object(J.F)("error",d))}return window.connectionTimes["obtainPermissions.end"]=window.performance.now(),Promise.reject(n)})},createTrackVADEmitter:function(e,t,n){return b.a.create(e,t,n)},createAudioMixer:function(){return new L.a},getActiveAudioDevice:function(){return Object(S.a)()},isDeviceListAvailable:function(){return B.warn("This method is deprecated, use JitsiMeetJS.mediaDevices.isDeviceListAvailable instead"),this.mediaDevices.isDeviceListAvailable()},isDeviceChangeAvailable:function(e){return B.warn("This method is deprecated, use JitsiMeetJS.mediaDevices.isDeviceChangeAvailable instead"),this.mediaDevices.isDeviceChangeAvailable(e)},isMultipleAudioInputSupported:function(){return this.mediaDevices.isMultipleAudioInputSupported()},isCollectingLocalStats:function(){return k.a.audioLevelsEnabled&&R.a.isLocalStatsSupported()},enumerateDevices:function(e){B.warn("This method is deprecated, use JitsiMeetJS.mediaDevices.enumerateDevices instead"),this.mediaDevices.enumerateDevices(e)},getGlobalOnErrorHandler:function(e,t,n,r,i){B.error("UnhandledError: "+e,"Script: "+t,"Line: "+n,"Column: "+r,"StackTrace: ",i),k.a.reportGlobalError(i)},setNetworkInfo:function(e){var t=e.isOnline;_.b.updateNetworkInfo({isOnline:t})},setVideoTrackContentHints:function(e,t){"contentHint"in e?(e.contentHint=t,e.contentHint!==t&&B.debug("Invalid video track contentHint")):B.debug("MediaStreamTrack contentHint attribute not supported")},precallTest:A.a,util:{AuthUtil:w(),ScriptUtil:N(),browser:g.a}})}.call(this,"JitsiMeetJS.js")},function(e,t,n){var r=n(78);function i(e,t){this.logStorage=e,this.stringifyObjects=!(!t||!t.stringifyObjects)&&t.stringifyObjects,this.storeInterval=t&&t.storeInterval?t.storeInterval:3e4,this.maxEntryLength=t&&t.maxEntryLength?t.maxEntryLength:1e4,Object.keys(r.levels).forEach(function(e){this[r.levels[e]]=function(){this._log.apply(this,arguments)}.bind(this,e)}.bind(this)),this.storeLogsIntervalID=null,this.queue=[],this.totalLen=0,this.outputCache=[]}i.prototype.stringify=function(e){try{return JSON.stringify(e)}catch(e){return"[object with circular refs?]"}},i.prototype.formatLogMessage=function(e){for(var t="",n=1,i=arguments.length;n<i;n++){var o=arguments[n];!this.stringifyObjects&&e!==r.levels.ERROR||"object"!=typeof o||(o=this.stringify(o)),t+=o,n!==i-1&&(t+=" ")}return t.length?t:null},i.prototype._log=function(){var e=arguments[1],t=this.formatLogMessage.apply(this,arguments);if(t){var n=this.queue[this.queue.length-1];(n&&n.text)===t?n.count+=1:(this.queue.push({text:t,timestamp:e,count:1}),this.totalLen+=t.length)}this.totalLen>=this.maxEntryLength&&this._flush(!0,!0)},i.prototype.start=function(){this._reschedulePublishInterval()},i.prototype._reschedulePublishInterval=function(){this.storeLogsIntervalID&&(window.clearTimeout(this.storeLogsIntervalID),this.storeLogsIntervalID=null),this.storeLogsIntervalID=window.setTimeout(this._flush.bind(this,!1,!0),this.storeInterval)},i.prototype.flush=function(){this._flush(!1,!0)},i.prototype._flush=function(e,t){this.totalLen>0&&(this.logStorage.isReady()||e)&&(this.logStorage.isReady()?(this.outputCache.length&&(this.outputCache.forEach(function(e){this.logStorage.storeLogs(e)}.bind(this)),this.outputCache=[]),this.logStorage.storeLogs(this.queue)):this.outputCache.push(this.queue),this.queue=[],this.totalLen=0),t&&this._reschedulePublishInterval()},i.prototype.stop=function(){this._flush(!1,!1)},e.exports=i},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){var r,i;this||window,void 0===(i="function"==typeof(r=function(){var e=/^(interactive|loaded|complete)$/,t=window.location?window.location.href:null,n=t&&t.replace(/#.*$/,"").replace(/\?.*$/,"")||null,r=document.getElementsByTagName("script"),i="readyState"in(r[0]||document.createElement("script")),o=!window.opera||"[object Opera]"!==window.opera.toString(),a="currentScript"in document;"stackTraceLimit"in Error&&Error.stackTraceLimit!==1/0&&(Error.stackTraceLimit,Error.stackTraceLimit=1/0);var s=!1,c=!1;function u(){if(0===r.length)return null;var t,d,l,h,p,f=[],m=u.skipStackDepth||1;for(t=0;t<r.length;t++)o&&i?e.test(r[t].readyState)&&f.push(r[t]):f.push(r[t]);if(d=new Error,s&&(l=d.stack),!l&&c)try{throw d}catch(e){l=e.stack}if(l&&!(p=(function(e,t){var n,i=null;if(t=t||r,"string"==typeof e&&e)for(n=t.length;n--;)if(t[n].src===e){i=t[n];break}return i})(h=(function e(t,n){var r,i=null,o="number"==typeof n;return n=o?Math.round(n):0,"string"==typeof t&&t&&(o?r=t.match(/(data:text\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/):(r=t.match(/^(?:|[^:@]*@|.+\)@(?=data:text\/javascript|blob|http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)(data:text\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/))&&r[1]||(r=t.match(/\)@(data:text\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/)),r&&r[1]&&(i=n>0?e(t.slice(t.indexOf(r[0])+r[0].length),n-1):r[1])),i})(l,m),f))&&n&&h===n&&(p=(function(e){var t,n,i=null;for(t=0,n=(e=e||r).length;t<n;t++)if(!e[t].hasAttribute("src")){if(i){i=null;break}i=e[t]}return i})(f)),p||1===f.length&&(p=f[0]),p||a&&(p=document.currentScript),!p&&o&&i)for(t=f.length;t--;)if("interactive"===f[t].readyState){p=f[t];break}return p||(p=f[f.length-1]||null),p}(function(){try{var e=new Error;throw s="string"==typeof e.stack&&!!e.stack,e}catch(e){c="string"==typeof e.stack&&!!e.stack}})(),u.skipStackDepth=1;var d=u;return d.near=u,d.far=function(){return null},d.origin=function(){return null},d})?r.apply(t,[]):r)||(e.exports=i)},function(e,t){e.exports={LOCAL_JID:"local"}},function(e,t,n){!(function(e){"use strict";e.Strophe.addConnectionPlugin("disco",{_connection:null,_identities:[],_features:[],_items:[],init:function(t){this._connection=t,this._identities=[],this._features=[],this._items=[],t.addHandler(this._onDiscoInfo.bind(this),e.Strophe.NS.DISCO_INFO,"iq","get",null,null),t.addHandler(this._onDiscoItems.bind(this),e.Strophe.NS.DISCO_ITEMS,"iq","get",null,null)},addIdentity:function(e,t,n,r){for(var i=0;i<this._identities.length;i++)if(this._identities[i].category==e&&this._identities[i].type==t&&this._identities[i].name==n&&this._identities[i].lang==r)return!1;return this._identities.push({category:e,type:t,name:n,lang:r}),!0},addFeature:function(e){for(var t=0;t<this._features.length;t++)if(this._features[t]==e)return!1;return this._features.push(e),!0},removeFeature:function(e){for(var t=0;t<this._features.length;t++)if(this._features[t]===e)return this._features.splice(t,1),!0;return!1},addItem:function(e,t,n,r){return!(n&&!r||(this._items.push({jid:e,name:t,node:n,call_back:r}),0))},info:function(t,n,r,i,o){var a={xmlns:e.Strophe.NS.DISCO_INFO};n&&(a.node=n);var s=e.$iq({from:this._connection.jid,to:t,type:"get"}).c("query",a);this._connection.sendIQ(s,r,i,o)},items:function(t,n,r,i,o){var a={xmlns:e.Strophe.NS.DISCO_ITEMS};n&&(a.node=n);var s=e.$iq({from:this._connection.jid,to:t,type:"get"}).c("query",a);this._connection.sendIQ(s,r,i,o)},_buildIQResult:function(t,n){var r=t.getAttribute("id"),i=t.getAttribute("from"),o=e.$iq({type:"result",id:r});return null!==i&&o.attrs({to:i}),o.c("query",n)},_onDiscoInfo:function(t){var n,r=t.getElementsByTagName("query")[0].getAttribute("node"),i={xmlns:e.Strophe.NS.DISCO_INFO};r&&(i.node=r);var o=this._buildIQResult(t,i);for(n=0;n<this._identities.length;n++)i={category:this._identities[n].category,type:this._identities[n].type},this._identities[n].name&&(i.name=this._identities[n].name),this._identities[n].lang&&(i["xml:lang"]=this._identities[n].lang),o.c("identity",i).up();for(n=0;n<this._features.length;n++)o.c("feature",{var:this._features[n]}).up();return this._connection.send(o.tree()),!0},_onDiscoItems:function(t){var n,r,i={xmlns:e.Strophe.NS.DISCO_ITEMS},o=t.getElementsByTagName("query")[0].getAttribute("node");if(o){for(i.node=o,n=[],r=0;r<this._items.length;r++)if(this._items[r].node==o){n=this._items[r].call_back(t);break}}else n=this._items;var a=this._buildIQResult(t,i);for(r=0;r<n.length;r++){var s={jid:n[r].jid};n[r].name&&(s.name=n[r].name),n[r].node&&(s.node=n[r].node),a.c("item",s).up()}return this._connection.send(a.tree()),!0}})})(n(2))},function(e,t,n){!(function(e){"use strict";e.Strophe.addConnectionPlugin("streamManagement",{logging:!1,autoSendCountOnEveryIncomingStanza:!1,requestResponseInterval:5,_c:null,_NS:"urn:xmpp:sm:3",_isStreamManagementEnabled:!1,_serverProcesssedStanzasCounter:null,_clientProcessedStanzasCounter:null,_clientSentStanzasCounter:null,_originalXMLOutput:null,_requestHandler:null,_incomingHandler:null,_requestResponseIntervalCount:0,_isSupported:!1,_unacknowledgedStanzas:[],_acknowledgedStanzaListeners:[],addAcknowledgedStanzaListener:function(e){this._acknowledgedStanzaListeners.push(e)},enable:function(t){if(!this._isSupported)throw new Error("The server doesn't support urn:xmpp:sm:3 namespace");if(this._connectionStatus!==e.Strophe.Status.CONNECTED)throw new Error("enable() can only be called in the CONNECTED state");this._c.send(e.$build("enable",{xmlns:this._NS,resume:t})),this._c.flush(),this._c.pause()},getResumeToken:function(){return this._resumeToken},isSupported:function(){return this._isSupported},resume:function(){if(!this.getResumeToken())throw new Error("No resume token");if(this._connectionStatus!==e.Strophe.Status.DISCONNECTED)throw new Error("resume() can only be called in the DISCONNECTED state");this._c.options.explicitResourceBinding=!0,this._resuming=!0,this._originalConnect.apply(this._c,this._connectArgs)},requestAcknowledgement:function(){if(this._connectionStatus!==e.Strophe.Status.CONNECTED)throw new Error("requestAcknowledgement() can only be called in the CONNECTED state");this._requestResponseIntervalCount=0,this._c.send(e.$build("r",{xmlns:this._NS}))},getOutgoingCounter:function(){return this._clientSentStanzasCounter},getIncomingCounter:function(){return this._clientProcessedStanzasCounter},init:function(t){this._c=t,e.Strophe.addNamespace("SM",this._NS),this._originalXMLOutput=this._c.xmlOutput,this._c.xmlOutput=this.xmlOutput.bind(this),this._originalConnect=this._c.connect,this._c.connect=this._interceptConnectArgs.bind(this),this._originalOnStreamFeaturesAfterSASL=this._c._onStreamFeaturesAfterSASL,this._c._onStreamFeaturesAfterSASL=this._onStreamFeaturesAfterSASL.bind(this),this._originalDoDisconnect=this._c._doDisconnect,this._c._doDisconnect=this._interceptDoDisconnect.bind(this),this._originalDisconnect=this._c.disconnect,this._c.disconnect=this._interceptDisconnect.bind(this)},_interceptDisconnect:function(){this._resumeToken=void 0,this._originalDisconnect.apply(this._c,arguments)},_interceptDoDisconnect:function(){this.getResumeToken()&&!this._resuming&&this._c.connected&&!this._c.disconnecting&&(this._resumeState={handlers:this._c.handlers,timedHandlers:this._c.timedHandlers,removeTimeds:this._c.removeTimeds,removeHandlers:this._c.removeHandlers,addTimeds:this._c.addTimeds,addHandlers:this._c.addHandlers},this._storedJid=this._c.jid,this.logging&&e.Strophe.debug("SM stored resume state, handler count: "+this._resumeState.handlers.length)),this._c._data=[],this._originalDoDisconnect.apply(this._c,arguments)},_interceptConnectArgs:function(){this._connectArgs=arguments,this._originalConnect.apply(this._c,arguments)},_onStreamFeaturesAfterSASL:function(e){return this._isSupported=e.getElementsByTagNameNS(this._NS,"sm").length>0,this._originalOnStreamFeaturesAfterSASL.apply(this._c,arguments)},statusChanged:function(t){if(this._connectionStatus=t,this.getResumeToken()||t!==e.Strophe.Status.CONNECTED&&t!==e.Strophe.Status.DISCONNECTED)if(t===e.Strophe.Status.BINDREQUIRED){for(var n in this._c.jid=this._storedJid,this._resumeState)this._c[n]=this._resumeState[n];this._c.send(e.$build("resume",{xmlns:this._NS,h:this._clientProcessedStanzasCounter,previd:this._resumeToken})),this._c.flush()}else t===e.Strophe.Status.ERROR&&(this.logging&&e.Strophe.debug("SM cleared resume token on error"),this._resumeToken=void 0);else this.logging&&e.Strophe.debug("SM reset state"),this._serverProcesssedStanzasCounter=0,this._clientProcessedStanzasCounter=0,this._clientSentStanzasCounter=0,this._isStreamManagementEnabled=!1,this._requestResponseIntervalCount=0,this._resuming=!1,t===e.Strophe.Status.DISCONNECTED&&(this._isSupported=!1),this._unacknowledgedStanzas=[],this._requestHandler&&this._c.deleteHandler(this._requestHandler),this._incomingHandler&&this._c.deleteHandler(this._incomingHandler),this._requestHandler=this._c.addHandler(this._handleServerRequestHandler.bind(this),this._NS,"r"),this._ackHandler=this._c.addHandler(this._handleServerAck.bind(this),this._NS,"a"),this._incomingHandler=this._c.addHandler(this._incomingStanzaHandler.bind(this)),this._enabledHandler=this._c._addSysHandler(this._handleEnabled.bind(this),this._NS,"enabled"),this._resumeFailedHandler=this._c._addSysHandler(this._handleResumeFailed.bind(this),this._NS,"failed"),this._resumedHandler=this._c._addSysHandler(this._handleResumed.bind(this),this._NS,"resumed")},xmlOutput:function(t){return(e.Strophe.isTagEqual(t,"iq")||e.Strophe.isTagEqual(t,"presence")||e.Strophe.isTagEqual(t,"message"))&&this._increaseSentStanzasCounter(t),this._originalXMLOutput.call(this._c,t)},_handleEnabled:function(e){return this._isStreamManagementEnabled=!0,this._resumeToken="true"===e.getAttribute("resume")&&e.getAttribute("id"),this._c.resume(),!0},_handleResumeFailed:function(t){var n=t&&t.firstElementChild&&t.firstElementChild.tagName;return this._c._changeConnectStatus(e.Strophe.Status.ERROR,n,t),this._c._doDisconnect(),!0},_handleResumed:function(t){var n=parseInt(t.getAttribute("h"));if(this._handleAcknowledgedStanzas(n,this._serverProcesssedStanzasCounter),this._resuming=!1,this._c.do_bind=!1,this._c.authenticated=!0,this._c.restored=!0,this._unacknowledgedStanzas.length>0){this.logging&&e.Strophe.debug("SM Sending unacknowledged stanzas",this._unacknowledgedStanzas);for(var r,i=_createForOfIteratorHelperLoose(this._unacknowledgedStanzas);!(r=i()).done;){var o=r.value;this._c.send(o)}}else this.logging&&e.Strophe.debug("SM No unacknowledged stanzas",this._unacknowledgedStanzas);return this._c._changeConnectStatus(e.Strophe.Status.CONNECTED,null),!0},_incomingStanzaHandler:function(t){return(e.Strophe.isTagEqual(t,"iq")||e.Strophe.isTagEqual(t,"presence")||e.Strophe.isTagEqual(t,"message"))&&(this._increaseReceivedStanzasCounter(),this.autoSendCountOnEveryIncomingStanza&&this._answerProcessedStanzas()),!0},_handleAcknowledgedStanzas:function(t,n){var r=t-n;r<0&&this._throwError("New reported stanza count lower than previous. New: "+t+" - Previous: "+n),r>this._unacknowledgedStanzas.length&&this._throwError("Higher reported acknowledge count than unacknowledged stanzas. Reported Acknowledge Count: "+r+" - Unacknowledge Stanza Count: "+this._unacknowledgedStanzas.length+" - New: "+t+" - Previous: "+n);for(var i=0;i<r;i++)for(var o=this._unacknowledgedStanzas.shift(),a=0;a<this._acknowledgedStanzaListeners.length;a++)this._acknowledgedStanzaListeners[a](o);this.logging&&this._unacknowledgedStanzas.length>0&&e.Strophe.warn("SM Unacknowledged stanzas",this._unacknowledgedStanzas),this._serverProcesssedStanzasCounter=t,this.requestResponseInterval>0&&(this._requestResponseIntervalCount=0)},_handleServerRequestHandler:function(){return this._answerProcessedStanzas(),!0},_handleServerAck:function(e){var t=parseInt(e.getAttribute("h"));return this._handleAcknowledgedStanzas(t,this._serverProcesssedStanzasCounter),!0},_answerProcessedStanzas:function(){this._isStreamManagementEnabled&&this._c.send(e.$build("a",{xmlns:this._NS,h:this._clientProcessedStanzasCounter}))},_increaseSentStanzasCounter:function(t){var n=this;if(this._isStreamManagementEnabled){if(-1!==this._unacknowledgedStanzas.indexOf(t))return;this._unacknowledgedStanzas.push(t),this._clientSentStanzasCounter++,this.requestResponseInterval>0&&(this._requestResponseIntervalCount++,this._requestResponseIntervalCount===this.requestResponseInterval&&setTimeout(function(){n._connectionStatus===e.Strophe.Status.CONNECTED&&n.requestAcknowledgement()},1))}},_increaseReceivedStanzasCounter:function(){this._isStreamManagementEnabled&&this._clientProcessedStanzasCounter++},_throwError:function(t){throw e.Strophe.error(t),new Error(t)}})})(n(2))},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(155),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(44))},function(e,t,n){(function(e,t){!(function(e,n){"use strict";if(!e.setImmediate){var r,i,o,a,s,c=1,u={},d=!1,l=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){f(e)})}:(function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}})()?(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&f(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){f(e.data)},r=function(e){o.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(i=l.documentElement,r=function(e){var t=l.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(f,0,e)},h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[c]=i,r(c),c++},h.clearImmediate=p}function p(e){delete u[e]}function f(e){if(d)setTimeout(f,0,e);else{var t=u[e];if(t){d=!0;try{!(function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}})(t)}finally{p(e),d=!1}}}}})("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(44),n(59))},function(e,t,n){var r=function(e){return String(Number(e))===e?Number(e):e},i=function(e,t,n){var i=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:i&&!t[e.name]&&(t[e.name]={});var o=e.push?{}:i?t[e.name]:t;!(function(e,t,n,i){if(i&&!n)t[i]=r(e[1]);else for(var o=0;o<n.length;o+=1)null!=e[o+1]&&(t[n[o]]=r(e[o+1]))})(n.match(e.reg),o,e.names,e.name),e.push&&t[e.push].push(o)},o=n(80),a=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(a).forEach(function(e){var t=e[0],a=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var s=0;s<(o[t]||[]).length;s+=1){var c=o[t][s];if(c.reg.test(a))return i(c,r,a)}}),t.media=n,t};var s=function(e,t){var n=t.split(/=(.+)/,2);return 2===n.length&&(e[n[0]]=r(n[1])),e};t.parseParams=function(e){return e.split(/\;\s?/).reduce(s,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),i=0;i<n.length;i+=3)t.push({component:n[i],ip:n[i+1],port:n[i+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map(function(e){return e.substring(1,e.length-1).split(",").reduce(s,{})})},t.parseSimulcastStreamList=function(e){return e.split(";").map(function(e){return e.split(",").map(function(e){var t,n=!1;return"~"!==e[0]?t=r(e):(t=r(e.substring(1,e.length)),n=!0),{scid:t,paused:n}})})}},function(e,t,n){var r=n(80),i=/%[sdv%]/g,o=function(e){var t=1,n=arguments,r=n.length;return e.replace(i,function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}})},a=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var a=t.names[i];t.name?r.push(n[t.name][a]):r.push(n[t.names[i]])}else r.push(n[t.name]);return o.apply(null,r)},s=["v","o","s","i","u","e","p","c","b","t","r","z","a"],c=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var n=t.outerOrder||s,i=t.innerOrder||c,o=[];return n.forEach(function(t){r[t].forEach(function(n){n.name in e&&null!=e[n.name]?o.push(a(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){o.push(a(t,n,e))})})}),e.media.forEach(function(e){o.push(a("m",r.m[0],e)),i.forEach(function(t){r[t].forEach(function(n){n.name in e&&null!=e[n.name]?o.push(a(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){o.push(a(t,n,e))})})})}),o.join("\r\n")+"\r\n"}},function(e,t,n){var r=n(25),i=n(159),o=i.parseSsrcs,a=i.writeSsrcs;function s(e,t,n){return e.ssrcs.filter(function(e){return e.id===t}).filter(function(e){return e.attribute===n}).map(function(e){return e.value})[0]}function c(e){this.options=e||{},this.options.numOfLayers||(this.options.numOfLayers=3),console.log("SdpSimulcast: using "+this.options.numOfLayers+" layers"),this.ssrcCache=[]}function u(e,t){null!=e&&Array.isArray(e.media)&&e.media.forEach(function(e){"video"===e.type&&t(e)})}function d(e){return e&&null!=e&&e.type&&""!=e.type&&e.sdp&&""!=e.sdp}c.prototype.clearSsrcCache=function(){this.ssrcCache=[]},c.prototype.setSsrcCache=function(e){this.ssrcCache=e},c.prototype._parseSimLayers=function(e){var t=e.ssrcGroups&&e.ssrcGroups.find(function(e){return"SIM"===e.semantics});return t?t.ssrcs.split(" ").map(function(e){return parseInt(e)}):[e.ssrcs[0].id]},c.prototype._buildNewToOldSsrcMap=function(e,t){for(var n={},r=0;r<e.length;++r){var i=e[r],o=t[r]||null;n[i]=o}return n},c.prototype._fillInSourceDataFromCache=function(e){console.log("SdpSimulcast restoring from cache: ",this.ssrcCache);var t=this._parseSimLayers(e);console.log("SdpSimulcast Parsed new sim ssrcs: ",t);var n=s(e,t[0],"msid"),r=s(e,t[0],"cname"),i=this._buildNewToOldSsrcMap(t,this.ssrcCache);console.log("SdpSimulcast built replacement map: ",i);var o=this.ssrcCache.filter(function(e){return-1===Object.values(i).indexOf(e)});return console.log("SdpSimulcast built ssrcs to add: ",o),e.ssrcs.forEach(function(e){i[e.id]&&(e.id=i[e.id])}),o.forEach(function(t){e.ssrcs.push({id:t,attribute:"msid",value:n}),e.ssrcs.push({id:t,attribute:"cname",value:r})}),e.ssrcGroups=e.ssrcGroups||[],e.ssrcGroups.push({semantics:"SIM",ssrcs:this.ssrcCache.join(" ")}),e},c.prototype._generateSourceData=function(e,t){var n=function(e,t){e.ssrcs.push({id:t,attribute:"cname",value:i}),e.ssrcs.push({id:t,attribute:"msid",value:r})},r=s(e,t,"msid"),i=s(e,t,"cname");this.options.usesUnifiedPlan&&!r&&(r=e.msid,e.ssrcs.forEach(function(t){e.ssrcs.push({id:t.id,attribute:"msid",value:r})}));for(var o=[],a=0;a<this.options.numOfLayers-1;++a){var c=Math.floor(4294967295*Math.random())+0;n(e,c),o.push(c)}return e.ssrcGroups=e.ssrcGroups||[],e.ssrcGroups.push({semantics:"SIM",ssrcs:t+" "+o.join(" ")}),e},c.prototype._restoreSimulcast=function(e){var t,n=e.ssrcs&&e.ssrcs.map(function(e){return e.id}).filter(function(e,t,n){return n.indexOf(e)===t}).length||0,r=e.ssrcGroups&&e.ssrcGroups.length||0;if(0===n||n>2)return e;if(2==n&&0===r)return e;if(1===n)t=e.ssrcs[0].id;else{var i=e.ssrcGroups.filter(function(e){return"FID"===e.semantics})[0];if(!i)return e;t=parseInt(i.ssrcs.split(" ")[0])}return console.log("SdpSimulcast: current ssrc cache: ",this.ssrcCache),console.log("SdpSimulcast: parsed primary ssrc "+t),-1!==this.ssrcCache.indexOf(t)?(console.log("SdpSimulcast: Have seen primary ssrc before, filling in data from cache"),e=this._fillInSourceDataFromCache(e)):(console.log("SdpSimulcast: Have not seen primary ssrc before, generating source data"),e=this._generateSourceData(e,t)),this.ssrcCache=this._parseSimLayers(e),e},c.prototype.mungeRemoteDescription=function(e){if(!d(e))return e;var t=r.parse(e.sdp),n=this;return u(t,function(e){n.options.explodeRemoteSimulcast?(function(e){if(e&&Array.isArray(e.ssrcGroups))for(var t=o(e),n=[],r=e.ssrcGroups.length;r--;)if("SIM"===e.ssrcGroups[r].semantics){for(var i=e.ssrcGroups[r].ssrcs.split(" "),s=0;s<i.length;s++){var c=i[s];n.push(c);var u=t[c].msid.split(" ");t[c].msid=[u[0],"/",s," ",u[1],"/",s].join(""),t[c].cname=[t[c].cname,"/",s].join(""),e.ssrcGroups.forEach(function(e){if("SIM"!==e.semantics){var r=e.ssrcs.split(" ");-1!==r.indexOf(c)&&r.forEach(function(e){t[e].msid=t[c].msid,t[e].cname=t[c].cname,e!==c&&n.push(e)})}})}e.ssrcs=a(t,n),e.ssrcGroups.splice(r,1)}})(e):(function(e){if(e&&Array.isArray(e.ssrcGroups)){var t=o(e);e.ssrcGroups.forEach(function(n){if("SIM"===n.semantics){console.info("Imploding SIM group: "+n.ssrcs),n.nuke=!0;for(var r=n.ssrcs.split(" "),i=1;i<r.length;i++){var o=r[i];delete t[o],e.ssrcGroups.forEach(function(e){if("SIM"!==e.semantics){var n=e.ssrcs.split(" ");-1!==n.indexOf(o)&&(n.forEach(function(e){delete t[e]}),e.nuke=!0)}})}}}),e.ssrcs=a(t);for(var n=e.ssrcGroups.length;n--;)e.ssrcGroups[n].nuke&&e.ssrcGroups.splice(n,1)}else console.info("Halt: There are no SSRC groups in the remote description.")})(e),n.options.usesUnifiedPlan||(function(e){e&&(Array.isArray(e.invalid)||(e.invalid=[]),e.invalid.some(function(e){return"x-google-flag:conference"===e.value})||e.invalid.push({value:"x-google-flag:conference"}))})(e)}),new RTCSessionDescription({type:e.type,sdp:r.write(t)})},c.prototype.mungeLocalDescription=function(e){if(!d(e))return e;var t=r.parse(e.sdp),n=this;return u(t,function(e){"recvonly"!=e.direction&&"inactive"!=e.direction&&n._restoreSimulcast(e)}),new RTCSessionDescription({type:e.type,sdp:r.write(t)})},e.exports=c},function(e,t){t.writeSsrcs=function(e,t){var n=[];if(void 0!==e&&0!==Object.keys(e).length){Array.isArray(t)||(t=[]);for(var r=0;r<t.length;r++){var i=t[r],o=e[i];Object.keys(o).forEach(function(e){n.push({id:i,attribute:e,value:o[e]})})}Object.keys(e).forEach(function(r){if(r=parseInt(r),!(t.indexOf(r)>=0)){var i=e[r];Object.keys(i).forEach(function(e){n.push({id:r,attribute:e,value:i[e]})})}})}return n},t.parseSsrcs=function(e){var t={};return void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&e.ssrcs.forEach(function(e){t[e.id]||(t[e.id]={}),t[e.id][e.attribute]=e.value}),t}},function(e,t){e.exports=function(e,t,n,r){this.blob=e,this.name=t,this.startTime=n,this.wordArray=r}},function(e,t,n){var r=n(162),i=n(81),o=n(163),a=function(){this.url=(function(){var e="config does not contain an url to a Sphinx4 https server";if(void 0===config.sphinxURL)console.log(e);else{var t=config.sphinxURL;if(void 0!==t.includes&&t.includes("https://"))return t;console.log(e)}})()};a.prototype=Object.create(o.prototype),a.constructor=a,a.prototype.sendRequest=function(e,t){console.log("sending an audio file  to "+this.url),console.log("the audio file being sent: "+e);var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE&&200===n.status)t(n.responseText);else if(n.readyState===XMLHttpRequest.DONE)throw new Error("unable to accept response from sphinx server. status: "+n.status)},n.open("POST",this.url),n.setRequestHeader("Content-Type",i.determineCorrectFileType()),n.send(e),console.log("send "+e)},a.prototype.formatResponse=function(e){var t=JSON.parse(e).objects;t.shift();var n=[];return t.forEach(function(e){return e.filler||n.push(new r(e.word,e.start,e.end))}),n},a.prototype.verify=function(e){if(console.log("response from server:"+e.toString()),"string"!=typeof e)return!1;var t;try{t=JSON.parse(e)}catch(e){return console.log(e),!1}if(void 0===t.objects)return!1;var n=t.objects;return!(!n[0]||!n[0]["session-id"])},e.exports=a},function(e,t){var n=function(e,t,n){this.word=e,this.begin=t,this.end=n};n.prototype.getWord=function(){return this.word},n.prototype.getBeginTime=function(){return this.begin},n.prototype.getEndTime=function(){return this.end},e.exports=n},function(e,t){var n=function(){throw new Error("TranscriptionService is abstract and cannot becreated")};n.prototype.send=function(e,t){var n=this;this.sendRequest(e.blob,function(r){n.verify(r)?e.wordArray=n.formatResponse(r):(console.log("the retrieved response from the server is not valid!"),e.wordArray=[]),t(e)})},n.prototype.sendRequest=function(e,t){throw new Error("TranscriptionService.sendRequest is abstract")},n.prototype.formatResponse=function(e){throw new Error("TranscriptionService.format is abstract")},n.prototype.verify=function(e){throw new Error("TranscriptionService.verify is abstract")},e.exports=n},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"shimGetUserMedia",function(){return E}),n.d(r,"shimGetDisplayMedia",function(){return b}),n.d(r,"shimMediaStream",function(){return C}),n.d(r,"shimOnTrack",function(){return T}),n.d(r,"shimGetSendersWithDtmf",function(){return R}),n.d(r,"shimGetStats",function(){return A}),n.d(r,"shimSenderReceiverGetStats",function(){return k}),n.d(r,"shimAddTrackRemoveTrackWithNative",function(){return I}),n.d(r,"shimAddTrackRemoveTrack",function(){return w}),n.d(r,"shimPeerConnection",function(){return P}),n.d(r,"fixNegotiationNeeded",function(){return O});var i={};n.r(i),n.d(i,"shimGetUserMedia",function(){return M}),n.d(i,"shimGetDisplayMedia",function(){return L}),n.d(i,"shimPeerConnection",function(){return x}),n.d(i,"shimReplaceTrack",function(){return F});var o={};n.r(o),n.d(o,"shimGetUserMedia",function(){return j}),n.d(o,"shimGetDisplayMedia",function(){return H}),n.d(o,"shimOnTrack",function(){return U}),n.d(o,"shimPeerConnection",function(){return J}),n.d(o,"shimSenderGetStats",function(){return B}),n.d(o,"shimReceiverGetStats",function(){return G}),n.d(o,"shimRemoveStream",function(){return V}),n.d(o,"shimRTCDataChannel",function(){return q}),n.d(o,"shimAddTransceiver",function(){return K}),n.d(o,"shimCreateOffer",function(){return z}),n.d(o,"shimCreateAnswer",function(){return W});var a={};n.r(a),n.d(a,"shimLocalStreamsAPI",function(){return $}),n.d(a,"shimRemoteStreamsAPI",function(){return Q}),n.d(a,"shimCallbacksAPI",function(){return X}),n.d(a,"shimGetUserMedia",function(){return Y}),n.d(a,"shimConstraints",function(){return Z}),n.d(a,"shimRTCIceServerUrls",function(){return ee}),n.d(a,"shimTrackEventTransceiver",function(){return te}),n.d(a,"shimCreateOfferLegacy",function(){return ne});var s={};n.r(s),n.d(s,"shimRTCIceCandidate",function(){return oe}),n.d(s,"shimMaxMessageSize",function(){return ae}),n.d(s,"shimSendThrowTypeError",function(){return se}),n.d(s,"shimConnectionState",function(){return ce}),n.d(s,"removeAllowExtmapMixed",function(){return ue});var c=!0,u=!0;function d(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function l(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var o=function(e){var t=n(e);t&&r(t)};return this._eventMap=this._eventMap||{},this._eventMap[r]=o,i.apply(this,[e,o])};var o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[n])return o.apply(this,arguments);var r=this._eventMap[n];return delete this._eventMap[n],o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function h(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(c=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function p(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(u=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function f(){if("object"==typeof window){if(c)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function m(e,t){u&&console.warn(e+" is deprecated, please use "+t+" instead.")}function v(e){var t=e.navigator,n={browser:null,version:null};if(void 0===e||!e.navigator)return n.browser="Not a browser.",n;if(t.mozGetUserMedia)n.browser="firefox",n.version=d(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)n.browser="chrome",n.version=d(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=d(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=d(t.userAgent,/AppleWebKit\/(\d+)\./,1),n.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return n}function g(e){return"[object Object]"===Object.prototype.toString.call(e)}function _(e){return g(e)?Object.keys(e).reduce(function(t,n){var r=g(e[n]),i=r?_(e[n]):e[n],o=r&&!Object.keys(i).length;return void 0===i||o?t:_extends(t,_defineProperty({},n,i))},{}):e}function y(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var o=[];return e.forEach(function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)}),o.forEach(function(t){e.forEach(function(n){n.type===r&&n.trackId===t.id&&(function e(t,n,r){n&&!r.has(n.id)&&(r.set(n.id,n),Object.keys(n).forEach(function(i){i.endsWith("Id")?e(t,t.get(n[i]),r):i.endsWith("Ids")&&n[i].forEach(function(n){e(t,t.get(n),r)})}))})(e,n,i)})}),i}var S=f;function E(e){var t=e&&e.navigator;if(t.mediaDevices){var n=v(e),r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"==typeof r.ideal?(o[i("min",n)]=r.ideal,t.optional.push(o),(o={})[i("max",n)]=r.ideal,t.optional.push(o)):(o[i("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach(function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(n.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){var o=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};o((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),o(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){var a=e.video.facingMode;a=a&&("object"==typeof a?a:{ideal:a});var s,c=n.version<66;if(a&&("user"===a.exact||"environment"===a.exact||"user"===a.ideal||"environment"===a.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||c))if(delete e.video.facingMode,"environment"===a.exact||"environment"===a.ideal?s=["back","rear"]:"user"!==a.exact&&"user"!==a.ideal||(s=["front"]),s)return t.mediaDevices.enumerateDevices().then(function(t){var n=(t=t.filter(function(e){return"videoinput"===e.kind})).find(function(e){return s.some(function(t){return e.label.toLowerCase().includes(t)})});return!n&&t.length&&s.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=a.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=r(e.video),S("chrome: "+JSON.stringify(e)),i(e)});e.video=r(e.video)}return S("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return n.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,n,r){i(e,function(e){t.webkitGetUserMedia(e,n,function(e){r&&r(o(e))})})}.bind(t),t.mediaDevices.getUserMedia){var a=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return i(e,function(e){return a(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return t},function(e){return Promise.reject(o(e))})})}}}}function b(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then(function(t){var r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function C(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function T(e){if("object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype)l(e,"track",function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e});else{Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find(function(e){return e.track&&e.track.id===r.track.id}):{track:r.track};var o=new Event("track");o.track=r.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)}),t.stream.getTracks().forEach(function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find(function(e){return e.track&&e.track.id===r.id}):{track:r};var o=new Event("track");o.track=r,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}}function R(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach(function(e){n._senders.push(t(n,e))})};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach(function(e){var n=t._senders.find(function(t){return t.track===e});n&&t._senders.splice(t._senders.indexOf(n),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function A(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),r=n[0],i=n[1],o=n[2];if(arguments.length>0&&"function"==typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof r))return t.apply(this,[]);var a=function(e){var t={};return e.result().forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t},s=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]]}))};if(arguments.length>=2){return t.apply(this,[function(e){i(s(a(e)))},r])}return new Promise(function(n,r){t.apply(e,[function(e){n(s(a(e)))},r])}).then(i,o)}}}function k(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach(function(t){return t._pc=e}),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return y(t,e.track,!0)})}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=r.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t}),l(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return y(t,e.track,!1)})}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,n,r,o=arguments[0];return this.getSenders().forEach(function(e){e.track===o&&(t?r=!0:t=e)}),this.getReceivers().forEach(function(e){return e.track===o&&(n?r=!0:n=e),e.track===o}),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}}}function I(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(t){return e._shimmedLocalStreams[t][0]})};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(e){if(t.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")});var r=this.getSenders();n.apply(this,arguments);var i=this.getSenders().filter(function(e){return-1===r.indexOf(e)});this._shimmedLocalStreams[e.id]=[e].concat(i)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]}),i.apply(this,arguments)}}function w(e){if(e.RTCPeerConnection){var t=v(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return I(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map(function(t){return e._reverseStreams[t.id]})};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(function(e){if(n.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}r.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then(function(){r.dispatchEvent(new Event("negotiationneeded"))});else{var a=new e.MediaStream([t]);this._streams[n.id]=a,this._reverseStreams[a.id]=n,this.addStream(a)}return this.getSenders().find(function(e){return e.track===t})},["createOffer","createAnswer"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t],r=_defineProperty({},t,function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[function(n){var r=s(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then(function(t){return s(e,t)})});e.RTCPeerConnection.prototype[t]=r[t]});var o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=(e=this,t=arguments[0],n=t.sdp,Object.keys(e._reverseStreams||[]).forEach(function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:n})),o.apply(this,arguments)):o.apply(this,arguments);var e,t,n};var a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach(function(r){n._streams[r].getTracks().find(function(t){return e.track===t})&&(t=n._streams[r])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function s(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)}),new RTCSessionDescription({type:t.type,sdp:n})}}function P(e){var t=v(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection){var n=0===e.RTCPeerConnection.prototype.addIceCandidate.length;t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t],r=_defineProperty({},t,function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)});e.RTCPeerConnection.prototype[t]=r[t]});var r=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return n||arguments[0]?t.version<78&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}}function O(e){l(e,"negotiationneeded",function(e){if("stable"===e.target.signalingState)return e})}var D=n(114),N=n.n(D);function M(e){var t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch(function(e){return Promise.reject((function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}})(e))})}}function L(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function x(e){var t=v(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var r=N()(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&m("RTCIceServer.url","RTCIceServer.urls");var r="string"==typeof t;return r&&(t=[t]),t=t.filter(function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n}),delete e.url,e.urls=r?t[0]:t,!!t.length}})})(e.iceServers,t.version),f("ICE servers after filtering:",e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype}function F(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}function j(e){var t=v(e),n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){m("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var i=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"==typeof e&&"object"==typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),i(e.audio,"autoGainControl","mozAutoGainControl"),i(e.audio,"noiseSuppression","mozNoiseSuppression")),o(e)},r&&r.prototype.getSettings){var a=r.prototype.getSettings;r.prototype.getSettings=function(){var e=a.apply(this,arguments);return i(e,"mozAutoGainControl","autoGainControl"),i(e,"mozNoiseSuppression","noiseSuppression"),e}}if(r&&r.prototype.applyConstraints){var s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"==typeof e&&(e=JSON.parse(JSON.stringify(e)),i(e,"autoGainControl","mozAutoGainControl"),i(e,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[e])}}}}function H(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function U(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function J(e){var t=v(e);if("object"==typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){if(!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t],r=_defineProperty({},t,function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)});e.RTCPeerConnection.prototype[t]=r[t]}),t.version<68){var n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}var r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),n=e[0],o=e[1],a=e[2];return i.apply(this,[n||null]).then(function(e){if(t.version<53&&!o)try{e.forEach(function(e){e.type=r[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach(function(t,n){e.set(n,_extends({},t,{type:r[t.type]||t.type}))})}return e}).then(o,a)}}}function B(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach(function(t){return t._pc=e}),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function G(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach(function(t){return t._pc=e}),n}),l(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function V(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;m("removeStream","removeTrack"),this.getSenders().forEach(function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)})})}function q(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function K(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach(function(e){if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});var r=t.apply(this,arguments);if(n){var i=r.sender,o=i.getParameters();"encodings"in o||(o.encodings=e.sendEncodings,this.setParametersPromises.push(i.setParameters(o).catch(function(){})))}return r})}}function z(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return t.apply(n,e)}).finally(function(){n.setParametersPromises=[]}):t.apply(this,arguments)}}}function W(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return t.apply(n,e)}).finally(function(){n.setParametersPromises=[]}):t.apply(this,arguments)}}}function $(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(function(r){return t.call(n,r,e)}),e.getVideoTracks().forEach(function(r){return t.call(n,r,e)})},e.RTCPeerConnection.prototype.addTrack=function(e){var n=arguments[1];return n&&(this._localStreams?this._localStreams.includes(n)||this._localStreams.push(n):this._localStreams=[n]),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach(function(e){r.includes(e.track)&&t.removeTrack(e)})}})}}function Q(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}})})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}})}),t.apply(e,arguments)}}}function X(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};var s=function(e,t,n){var r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=s}}function Y(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(Z(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function Z(e){return e&&void 0!==e.video?_extends({},e,{video:_(e.video)}):e}function ee(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],i=0;i<e.iceServers.length;i++){var o=e.iceServers[i];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(m("RTCIceServer.url","RTCIceServer.urls"),(o=JSON.parse(JSON.stringify(o))).urls=o.url,delete o.url,r.push(o)):r.push(e.iceServers[i])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}function te(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function ne(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find(function(e){return"audio"===e.receiver.track.kind});!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find(function(e){return"video"===e.receiver.track.kind});!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}}var re=n(50),ie=n.n(re);function oe(e){if(e.RTCIceCandidate&&!(e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),r=ie.a.parseCandidate(e.candidate),i=_extends(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,l(e,"icecandidate",function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t})}}function ae(e){if(e.RTCPeerConnection){var t=v(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=function(e){if(!e||!e.sdp)return!1;var t=ie.a.splitSections(e.sdp);return t.shift(),t.some(function(e){var t=ie.a.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})},r=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n},i=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},o=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var i=ie.a.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){(this._sctp=null,"chrome"===t.browser&&t.version>=76)&&("plan-b"===this.getConfiguration().sdpSemantics&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0}));if(n(arguments[0])){var e,s=r(arguments[0]),c=i(s),u=o(arguments[0],s);e=0===c&&0===u?Number.POSITIVE_INFINITY:0===c||0===u?Math.max(c,u):Math.min(c,u);var d={};Object.defineProperty(d,"maxMessageSize",{get:function(){return e}}),this._sctp=d}return a.apply(this,arguments)}}}function se(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},l(e,"datachannel",function(e){return n(e.channel,e.target),e})}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function ce(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}}function ue(e){if(e.RTCPeerConnection){var t=v(e);if(!("chrome"===t.browser&&t.version>=71)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter(function(e){return"a=extmap-allow-mixed"!==e.trim()}).join("\n")),n.apply(this,arguments)}}}}var de=(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},n=f,c=v(e),u={browserDetails:c,commonShim:s,extractVersion:d,disableLog:h,disableWarnings:p};switch(c.browser){case"chrome":if(!P||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),u;n("adapter.js shimming chrome."),u.browserShim=r,E(e),C(e),P(e),T(e),w(e),R(e),A(e),k(e),O(e),oe(e),ce(e),ae(e),se(e),ue(e);break;case"firefox":if(!J||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),u;n("adapter.js shimming firefox."),u.browserShim=o,j(e),J(e),U(e),V(e),B(e),G(e),q(e),K(e),z(e),W(e),oe(e),ce(e),ae(e),se(e);break;case"edge":if(!x||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),u;n("adapter.js shimming edge."),u.browserShim=i,M(e),L(e),x(e),F(e),ae(e),se(e);break;case"safari":if(!t.shimSafari)return n("Safari shim is not included in this adapter release."),u;n("adapter.js shimming safari."),u.browserShim=a,ee(e),ne(e),X(e),$(e),Q(e),te(e),Y(e),oe(e),ae(e),se(e),ue(e);break;default:n("Unsupported browser!")}return u})({window:window});t.default=de}])},"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.JitsiMeetJS=t():e.JitsiMeetJS=t()},471,[470,16,42,111,17,54,48,29,30,45,47,44,25]);
__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n='';n&&(n=n.substr(0,n.length-1).split('.').join('_').toLowerCase()+".");e.default={disableSimulcast:!1,enableRemb:!0,enableTcc:!0,resolution:480,constraints:{video:{height:{ideal:480,max:480,min:180},width:{ideal:720,max:720,min:320}}},enableInsecureRoomNameWarning:!0,analytics:{amplitudeAPPKey:'fafdba4c3b47fe5f151060ca37f02d2f',whiteListedEvents:['conference.joined','page.reload.scheduled','rejoined','transport.stats']},enableP2P:!1,p2p:{enabled:!1,preferH264:!0,disableH264:!0,useStunTurn:!0},useStunTurn:!0,useTurnUdp:!1,desktopSharing:'ext',chromeExtensionId:'kglhbbefdnlheedjiejgomgmfplipfeb',desktopSharingSources:['screen','window'],googleApiApplicationClientID:'39065779381-bbhnkrgibtf4p0j9ne5vsq7bm49t1tlf.apps.googleusercontent.com',microsoftApiApplicationClientID:'00000000-0000-0000-0000-000040240063',enableCalendarIntegration:!0,desktopSharingChromeExtId:'kglhbbefdnlheedjiejgomgmfplipfeb',desktopSharingChromeDisabled:!1,desktopSharingChromeSources:['screen','window','tab'],desktopSharingChromeMinExtVersion:'0.2.6.2',desktopSharingFirefoxDisabled:!1,useRoomAsSharedDocumentName:!1,enableLipSync:!1,disableRtx:!1,enableScreenshotCapture:!1,openBridgeChannel:'websocket',channelLastN:-1,startBitrate:'300',disableAudioLevels:!0,disableSuspendVideo:!0,stereo:!1,forceJVB121Ratio:-1,enableTalkWhileMuted:!0,enableNoAudioDetection:!0,enableNoisyMicDetection:!0,enableClosePage:!0,disableLocalVideoFlip:!0,dropbox:{appKey:'3v5iyto7n7az02w'},transcribingEnabled:!1,enableRecording:!0,liveStreamingEnabled:!0,fileRecordingsEnabled:!0,fileRecordingsServiceEnabled:!1,fileRecordingsServiceSharingEnabled:!1,requireDisplayName:!1,enableWelcomePage:!0,isBrand:!1,peopleSearchQueryTypes:['user','conferenceRooms'],startAudioMuted:9,startVideoMuted:9,enableUserRolesBasedOnToken:!1,enableLayerSuspension:!1,feedbackPercentage:0,prejoinPageEnabled:!1,e2eping:{pingInterval:-1},abTesting:{},testing:{capScreenshareBitrate:1,octo:{probability:1}}}},472,[]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r(d[1])),o=t(r(d[2]));function c(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);n&&(c=c.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,c)}return o}function s(t){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?c(Object(s),!0).forEach(function(o){(0,n.default)(t,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}var v=r(d[3]).NativeModules.AppNativeModule,f=new(function t(){var n=this;(0,o.default)(this,t),this.sendNativeEvent=function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{if(v[t]){var c=s(s({},o),{},{event:n});v[t](JSON.stringify(c))}else console.error("\ud83d\udea8\ud83d\udea8\ud83d\udea8\ud83e\udd8a\ud83e\udd8a\ud83e\udd8a "+(new Date).toLocaleString()+" ERROR WHILE SEND EVENT TO NATIVE: \n        METHOD NOT IMPLIED >>> "+t)}catch(t){console.log("\u2620\ufe0f\ud83e\udd8a\ud83e\udd8a\ud83e\udd8a "+(new Date).toLocaleString()+" ERROR WHILE SEND EVENT TO NATIVE",t)}},this.sendConferenceMsg=function(t,o){var c=o||{};n.sendNativeEvent('conferenceEvent',t,c)},this.sendConnectMsg=function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.sendNativeEvent('connectionStatus',t,o)},this.sendTrackMsg=function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.sendNativeEvent('trackEvent',t,o)},this.sendCommandMsg=function(t){n.sendNativeEvent('commandEvent','command',t)}});e.default=f},473,[1,54,29,5]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1])),n=t(r(d[2])),s=r(d[3]),c=t(r(d[4])),o=new((function(){function t(){var n=this;(0,u.default)(this,t),this.tracksMap=new Map,this.registerTrack=function(t){var u=t.getTrackId();u&&n.tracksMap.set(u,t)},this.getTrack=function(t){return n.tracksMap.get(t)||null}}return(0,n.default)(t,[{key:"muteTrack",value:function(t){var u=this.tracksMap.get(t);u&&u.isLocal()&&u.mute()}},{key:"unmuteTrack",value:function(t){var u=this.tracksMap.get(t);u&&u.isLocal()&&u.unmute()}},{key:"disposeTrack",value:function(t){var u=this.tracksMap.get(t);u&&u.dispose()}},{key:"sendMuteStatus",value:function(t,u){c.default.sendTrackMsg(s.TrackEvent.TRACK_MUTE_CHANGED,{trackId:t,muted:u}),console.log("\ud83e\udd81 ["+(new Date).toLocaleString()+"] send mute status to native with trackId: "+t+", muted:"+u)}}]),t})());e.default=o},474,[1,29,30,465,473]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t(r(d[1])),n=t(r(d[2])),c=r(d[3]),l=t(r(d[4])),u=new((function(){function t(){var n=this;(0,o.default)(this,t),this.selectParticiant=function(t){var o=t.trackId,c=l.default.getTrack(o);n.room&&c?(console.log("\ud83e\udd81 ["+(new Date).toLocaleString()+"] DO Select Participant",c),n.room.selectParticipant(c.getId())):console.error("\ud83d\udea8\ud83d\udea8\ud83d\udea8\ud83e\udd8a\ud83e\udd8a\ud83e\udd8a "+(new Date).toLocaleString()+" Invilid track Id")}}return(0,n.default)(t,[{key:"addTrack",value:function(t){var o=t.trackId,n=l.default.getTrack(o);this.room&&n?this.room.addTrack(n):console.error("\ud83d\udea8\ud83d\udea8\ud83d\udea8\ud83e\udd8a\ud83e\udd8a\ud83e\udd8a "+(new Date).toLocaleString()+" Invilid track Id")}},{key:"removeTrack",value:function(t){var o=t.trackId,n=l.default.getTrack(o);this.room&&n?(console.log("\ud83e\udd81 ["+(new Date).toLocaleString()+"] DO REMOVE TRACK",n),this.room.removeTrack(n)):console.error("\ud83d\udea8\ud83d\udea8\ud83d\udea8\ud83e\udd8a\ud83e\udd8a\ud83e\udd8a "+(new Date).toLocaleString()+" Invilid track Id")}},{key:"room",get:function(){return c.meetingHelper.room}}]),t})());e.default=u},475,[1,29,30,466,474]);
__r(97);
__r(0);